(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4680],{24680:function(xt,T,v){"use strict";v.d(T,{sg:function(){return Ly},yi:function(){return ky},aC:function(){return Ry},x1:function(){return Wy},Kj:function(){return Uy},Ex:function(){return t0},Fk:function(){return r0},TZ:function(){return o0},m:function(){return g0},cQ:function(){return m0},kB:function(){return S0}});var d={};v.r(d),v.d(d,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var c={};v.r(c),v.d(c,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var F={};v.r(F),v.d(F,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var L={};v.r(L),v.d(L,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var O={};v.r(O),v.d(O,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var _={};v.r(_),v.d(_,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var P={};v.r(P),v.d(P,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var A={};v.r(A),v.d(A,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var x={};v.r(x),v.d(x,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var C={};v.r(C),v.d(C,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var w={};v.r(w),v.d(w,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var M={};v.r(M),v.d(M,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var S={};v.r(S),v.d(S,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var I={};v.r(I),v.d(I,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var B={};v.r(B),v.d(B,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var N={};v.r(N),v.d(N,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var G={};v.r(G),v.d(G,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var W={};v.r(W),v.d(W,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var $={};v.r($),v.d($,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var H={};v.r(H),v.d(H,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var j={};v.r(j),v.d(j,{EVENT_MAP:function(){return pt},onEvent:function(){return Lt}});var nt={};v.r(nt),v.d(nt,{calculationItemsBBox:function(){return M0},cloneEvent:function(){return Uh},formatPadding:function(){return md},isNaN:function(){return Co},isViewportChanged:function(){return C0},processParallelEdges:function(){return EE}});var rt={};v.r(rt),v.d(rt,{getColorsWithSubjectColor:function(){return O0},mixColor:function(){return eo}});var mt={};v.r(mt),v.d(mt,{Line:function(){return as},applyMatrix:function(){return kl},distance:function(){return Bl},floydWarshall:function(){return Cd},fractionToLine:function(){return Td},getAdjMatrix:function(){return Md},getBBoxBoundLine:function(){return Ad},getCircleCenterByPoints:function(){return Sd},getCircleIntersectByPoint:function(){return j0},getDegree:function(){return Jh},getEllipseIntersectByPoint:function(){return U0},getLineIntersect:function(){return Ol},getPointsCenter:function(){return tm},getRectIntersectByPoint:function(){return W0},intersectBBox:function(){return J0},invertMatrix:function(){return Z0},isPointInPolygon:function(){return Dl},isPointsOverlap:function(){return Pd},isPolygonsIntersect:function(){return Ed},itemIntersectByLine:function(){return q0},move:function(){return Q0},pointLineSquareDist:function(){return em},pointRectSquareDist:function(){return rm},rotate:function(){return aA},scale:function(){return iA},scaleMatrix:function(){return K0},squareDist:function(){return qh},translate:function(){return $0}});var Ft={};v.r(Ft),v.d(Ft,{getClosedSpline:function(){return _d},getControlPoint:function(){return tf},getSpline:function(){return nm},paddedHull:function(){return um},pathToPoints:function(){return ef},pointsToPolygon:function(){return im},roundedHull:function(){return lm}});var Gt={};v.r(Gt),v.d(Gt,{getBBox:function(){return nf},getChartRegion:function(){return _A},getComboBBox:function(){return Dd},getLabelPosition:function(){return af},getLetterWidth:function(){return Sm},getLoopCfgs:function(){return xm},getTextSize:function(){return Cm},plainCombosToTrees:function(){return kd},radialLayout:function(){return wm},reconstructTree:function(){return Bd},traverseTree:function(){return aa},traverseTreeUp:function(){return Ta}});var gt={};v.r(gt),v.d(gt,{adjMatrix:function(){return Ef},breadthFirstSearch:function(){return EI},degree:function(){return lx},depthFirstSearch:function(){return Xx},detectAllCycles:function(){return PI},detectAllDirectedCycle:function(){return jx},detectAllUndirectedCycle:function(){return Wx},detectDirectedCycle:function(){return LI},findAllPath:function(){return BI},findShortestPath:function(){return kI},floydWarshall:function(){return cx},getConnectedComponents:function(){return Vx},getPageRank:function(){return HI},minimumSpanningTree:function(){return zI}});var st=v(59301),Xt=v(90575),Q=v(32447),qt=v(95472),y=v(26169),Yt=["click","dblclick","mousemove","mouseenter","mouseleave","mousedown","mouseup","contextmenu"],K=[],ht={axis:"axis-label",label:"label",legend:"legend-item"},J={title:"title",description:"description",breadcrumb:"breadcrumb"},At=(0,y.deepMix)(Tt(J),kt("Plot",Yt)),Vt=kt("Layer",Yt),pt=(0,y.deepMix)({},Tt(ht),kt("View",Yt),jt());function Lt(i,r,t){i.view.on(r,function(e){var n={x:e==null?void 0:e.x,y:e==null?void 0:e.y,clientX:e==null?void 0:e.clientX,clientY:e==null?void 0:e.clientY,target:e==null?void 0:e.target,data:(e==null?void 0:e.data)?e.data.data:null,plot:i,canvas:i.canvas,gEvent:e==null?void 0:e.gEvent};t(n)})}function Tt(i){var r={};return(0,y.each)(i,function(t,e){var n=(0,y.upperFirst)(e),a="on"+n,o=t+":";(0,y.each)(Yt,function(s){var u=(0,y.upperFirst)(s),h=""+a+u,p=""+o+s;r[h]=p})}),r}function kt(i,r){var t={},e="on";return(0,y.each)(r,function(n){var a=(0,y.upperFirst)(n),o=""+e+i+a;t[o]=n}),t}function jt(){var i={},r="on";return(0,y.each)(K,function(t){var e=(0,y.upperFirst)(t),n=""+r+e;i[n]=t}),i}var Wt=v(60103),zt=v(43599),bt=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.fromBBoxObject=function(t){return new r(t.x,t.y,t.width,t.height)},r}(Wt.BBox),at=bt,ft=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.layers=[],e.destroyed=!1,e.visibility=!0,e.rendered=!1,e.eventHandlers=[],e.options=e.getOptions(t),e.processOptions(e.options),e}return r.prototype.processOptions=function(t){this.id=t.id,this.x=t.x||0,this.y=t.y||0,this.width=t.width,this.height=t.height,this.canvas=t.canvas,this.parent=t.parent},r.prototype.updateConfig=function(t){this.options=(0,y.deepMix)({},this.options,t),this.processOptions(this.options)},r.prototype.beforeInit=function(){return null},r.prototype.init=function(){this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.eachLayer(function(t){t.init()})},r.prototype.afterInit=function(){return null},r.prototype.render=function(){this.rendered||(this.container=this.parent?this.parent.container.addGroup():this.canvas.addGroup()),this.rendered=!0,this.beforeInit(),this.init(),this.afterInit(),this.eachLayer(function(t){t.render()}),this.canvas.draw()},r.prototype.clear=function(){this.eachLayer(function(t){t.destroy()}),this.layers=[],this.container.clear()},r.prototype.destroy=function(){var t=this;this.eachLayer(function(e){e.destroy()}),(0,y.each)(this.eventHandlers,function(e){t.off(e.eventName,e.handler)}),this.container.remove(!0),this.destroyed=!0},r.prototype.show=function(){this.container.attr("visible",!0),this.container.set("visible",!0),this.visibility=!0,this.canvas.draw()},r.prototype.hide=function(){this.container.attr("visible",!1),this.container.set("visible",!1),this.visibility=!1,this.canvas.draw()},r.prototype.addLayer=function(t){var e=(0,y.findIndex)(this.layers,function(n){return n===t});e<0&&(t.parent!==this&&(t.parent=this,t.init()),this.layers.push(t))},r.prototype.removeLayer=function(t){var e=(0,y.findIndex)(this.layers,function(n){return n===t});e>=0&&this.layers.splice(e,1)},r.prototype.updateBBox=function(t,e){e===void 0&&(e=!1);var n={x:this.x,y:this.y,width:this.width,height:this.height},a=(0,y.deepMix)({},n,t);this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.layerBBox=this.getLayerBBox(),this.layerRegion=this.getLayerRegion(),this.render(),e&&this.eachLayer(function(o){o.updateBBoxByParent(),o.render()}),this.canvas.draw()},r.prototype.updateBBoxByParent=function(){var t=this.layerRegion;this.x=this.parent.x+this.parent.width*t.start.x,this.y=this.parent.y+this.parent.height*t.start.y,this.width=this.parent.width*(t.end.x-t.start.x),this.height=this.parent.height*(t.end.y-t.start.y),this.layerBBox=this.getLayerBBox()},r.prototype.getGlobalPosition=function(){for(var t=this.x,e=this.y,n=this.parent;n;)t+=n.x,e+=n.y,n=n.parent;return{x:t,y:e}},r.prototype.getGlobalBBox=function(){var t=this.getGlobalPosition();return new at(t.x,t.y,this.width,this.height)},r.prototype.getOptions=function(t){var e=0,n=0;t.parent&&(e=t.parent.width,n=t.parent.height);var a={x:0,y:0,width:e,height:n};return(0,y.deepMix)({},a,t)},r.prototype.eachLayer=function(t){(0,y.each)(this.layers,t)},r.prototype.parseEvents=function(t){var e=this,n=(0,y.keys)(Vt);(0,y.each)(t,function(a,o){if((0,y.contains)(n,o)&&(0,y.isFunction)(a)){var s=Vt[o]||o,u=a;e.on(s,u),e.eventHandlers.push({name:s,handler:u})}})},r.prototype.getLayerBBox=function(){return new at(this.x,this.y,this.width,this.height)},r.prototype.getLayerRegion=function(){if(this.parent){var t=this.parent.width,e=this.parent.height,n=this.parent.x,a=this.parent.y,o=(this.x-n)/t,s=(this.y-a)/e,u=(this.x+this.width-n)/t,h=(this.y+this.height-a)/e;return{start:{x:o,y:s},end:{x:u,y:h}}}return{start:{x:0,y:0},end:{x:1,y:1}}},r}(qt.default),Pt=ft,q=v(12729);function ut(i){return i?!!(i.visible===!0&&typeof i.text=="string"&&i.text.trim()):!1}function Et(i,r){var t=(0,Q.__spreadArrays)(i);return r.forEach(function(e,n){t.splice(e+n,0,`
`)}),t.join("")}function Nt(i){return i.getComponents().filter(function(r){return r.type===q.TN.AXIS}).map(function(r){return r.component})}function ee(i){return i.getComponents().filter(function(r){return r.type===q.TN.LEGEND}).map(function(r){return r.component})}function ge(i){var r=i.backgroundGroup.findAll(function(t){if(t.get("name")){var e=t.get("name").split("-");return e[0]==="axis"}});return r}function De(i){var r=i.foregroundGroup.findAll(function(t){if(t.get("name"))return t.get("name")==="legend-item-group"});return r}function er(i,r){for(var t=i.length;t>0&&!(r>=i[t-1]);)t-=1;return t}function Re(i,r){return!(i.maxY<r.minY||r.maxY<i.minY||i.maxX<r.minX||r.maxX<i.minX)}function Ke(){return!!navigator.userAgent.match(/(Mobile)|(Android)|(WebOS)|(iPhone)|(iPad)/)}var hr=function(){function i(r){this.position="top",this.destroyed=!1,(0,y.assign)(this,r),this.init()}return i.prototype.getBBox=function(){var r=this;if(this.shape){var t=this.shape.getBBox();if(this.index===0)return at.fromBBoxObject(t);var e=this.plot.theme.description.padding;return(0,y.isArray)(e)&&(0,y.each)(e,function(n,a){typeof e[a]=="function"&&(e[a]=e[a](r.plot.options.legend.position))}),new at(t.maxX,t.minY,t.width,t.height)}return null},i.prototype.clear=function(){this.shape&&this.shape.attr("text","")},i.prototype.destroy=function(){this.shape&&this.shape.remove(),this.destroyed=!0},i.prototype.init=function(){var r=this.textWrapper(),t=this.getPosition(),e=t.x,n=t.y;this.shape=this.container.addShape("text",{attrs:(0,y.mix)({x:e,y:n,text:r},this.style,{textAlign:this.getTextAlign()})}),this.shape.name=this.name},i.prototype.getPosition=function(){return this.alignTo==="left"?{x:this.leftMargin,y:this.topMargin}:this.alignTo==="middle"?{x:this.leftMargin+this.wrapperWidth/2,y:this.topMargin}:{x:this.rightMargin,y:this.topMargin}},i.prototype.getTextAlign=function(){return this.alignTo==="left"?"left":this.alignTo==="middle"?"center":"right"},i.prototype.textWrapper=function(){var r=this.wrapperWidth,t=this.style,e=this.text,n=this.container.addShape("text",{attrs:(0,Q.__assign)({text:"",x:0,y:0},t)}),a=e.split(`
`),o=a.map(function(s){for(var u="",h=s.split(""),p=[],b=0;b<h.length;b++){var k=h[b];n.attr("text",u+=k);var R=n.getBBox().width-1;if(R>r){if(b===0)break;p.push(b),u=""}}return Et(h,p)});return n.remove(),o.join(`
`)},i}(),Sr=hr,Rr=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.container=t.container,e.destroyed=!1,e.config=t,e.disposables=[],e}return r.prototype.init=function(){this.group||this.initGroup(),this.initConfig(this.config)},r.prototype.getGroup=function(){return this.group},r.prototype.getConfig=function(){return this.config},r.prototype.getBBox=function(){return this.getGroup().getBBox()},r.prototype.clear=function(){this.group.clear()},r.prototype.render=function(){this.group.clear(),this.renderInner(this.group),this.getCanvas().draw()},r.prototype.update=function(t){this.config=(0,Q.__assign)((0,Q.__assign)({},this.config),t),this.initConfig(this.config)},r.prototype.destroy=function(){(0,y.each)(this.disposables,function(t){t()}),this.disposables=[],this.group.remove(!0),this.destroyed=!0},r.prototype.initGroup=function(){this.group=this.container.addGroup()},r.prototype.getCanvas=function(){return this.container.get("canvas")},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.initConfig=function(t){},r}(qt.default),vr=Rr,en=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.labelsCfgMap={},t.lastLabelsCfgMap={},t}return r.prototype.getGeometry=function(){return this.geometry},r.prototype.getLabels=function(){return this.labels},r.prototype.show=function(){this.container.show()},r.prototype.hide=function(){this.container.hide()},r.prototype.initConfig=function(t){var e=this;this.layer=t.layer;var n=this.layer.view;this.view=n,this.geometry=t.geometry,this.coord=n.getCoordinate(),this.options=(0,y.deepMix)(this.getDefaultOptions(),t.label);var a=function(){e.clear(),e.labelsCfgMap={},e.lastLabelsCfgMap={},e.render()};n.on(q.ld.AFTER_PAINT,a),this.addDisposable(function(){n.off(q.ld.AFTER_PAINT,a)})},r.prototype.renderInner=function(t){var e=this;this.labels=[],this.labelsCfgMap={},(0,y.each)(this.geometry.elements,function(s,u){var h=[].concat(e.drawLabelItem(t,s,u));(0,y.each)(h,function(p,b){e.adjustLabel(p,s,b),p.destroyed||(e.labels.push(p),e.labelsCfgMap[p.get("id")]=(0,y.clone)(p.attrs))})}),this.layoutLabels(this.geometry,this.labels);var n=this.lastLabelsCfgMap,a=this.labelsCfgMap,o=this.geometry.animateOption?(0,q.cd)("label",this.coord):!1;(0,y.each)(a,function(s,u){var h=t.findById(u);if(h)if(n[u]){var p=n[u],b=(0,y.get)(o,"update");b&&(h.stopAnimate(),h.attr(p),(0,q.IZ)(h,b,{toAttrs:(0,Q.__assign)({},s),coordinate:e.coord}))}else{var k=(0,y.get)(o,"appear");k&&(h.stopAnimate(),(0,q.IZ)(h,k,{toAttrs:(0,Q.__assign)({},h.attr()),coordinate:e.coord}))}delete n[u]}),(0,y.each)(n,function(s,u){var h=(0,y.get)(o,"leave");if(h){var p=t.addShape("text",{attrs:s,id:u,name:"label"});p.stopAnimate(),(0,q.IZ)(p,h,{toAttrs:null,coordinate:e.coord})}}),this.lastLabelsCfgMap=this.labelsCfgMap},r.prototype.drawLabelText=function(t,e,n){return n===void 0&&(n={}),t.addShape("text",(0,Q.__assign)({attrs:e},n))},r.prototype.drawLabelItem=function(t,e,n){var a=this,o=e.getModel(),s=[].concat(this.getLabelItemAttrs(e,n)),u=this.getDefaultOffset(),h=this.getLabelOffset();return(0,y.map)(s,function(p,b){var k,R={x:p.x+h.x,y:p.y+h.y},Y=(0,y.isArray)(o.mappingData)?o.mappingData[b]:o.mappingData,V=a.getLabelId(Y);return a.drawLabelText(t,(0,Q.__assign)((0,Q.__assign)({},p),R),(k={id:V,name:"label",offset:u,element:e},k[q.jQ]=Y,k))})},r.prototype.getDefaultOffset=function(){return Number(this.options.offset)},r.prototype.getLabelOffset=function(){var t=this.options,e=t.offsetX,n=t.offsetY;return{x:(0,y.isNumber)(e)?e:0,y:(0,y.isNumber)(n)?n:0}},r.prototype.getLabelOffsetByDimAndFactor=function(t,e){var n=this.options,a=n.offsetX,o=n.offsetY,s=this.getDefaultOffset(),u={x:0,y:0};return u[t]=s*e,(0,y.isNumber)(a)&&(u.x+=a),(0,y.isNumber)(o)&&(u.y+=o),u},r.prototype.getDefaultOptions=function(){return{}},r.prototype.layoutLabels=function(t,e){},r.prototype.getLabelId=function(t){var e=t._origin,n=this.geometry.type,a=this.geometry.getXScale(),o=this.geometry.getYScale(),s=this.geometry.getElementId(t);return n==="line"||n==="area"?s+=" "+e[a.field]:n==="path"&&(s+=" "+e[a.field]+"-"+e[o.field]),s},r.prototype.getCoordinateBBox=function(){var t=this.coord,e=t.start,n=t.end;return new at(Math.min(e.x,n.x),Math.min(e.y,n.y),t.getWidth(),t.getHeight())},r}(vr),gn=en,hn={};function vn(i,r){hn[i]=r}function Wn(i){return hn[i]}var $r=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return function(t,e,n){return i.reduce(function(a,o){return o(a,e,n)},t)}},wi=function(){return function(i){return i}},ci=function(i){return function(r){var t=Number(r);return isNaN(t)||(0,y.isNil)(i)?r:t.toFixed(i)}},oe=function(i){return function(r){return(0,y.isNil)(i)?r:r+" "+i}};function ce(i,r,t){i[t]&&(r[t]=i[t])}var Ee=function(){function i(r){this.config=!1,this.plot=r.plot,this.dim=r.dim,this.init()}return i.prototype.init=function(){this.config=!1;var r=this.plot.getPlotTheme();this.themeConfig=r&&r.axis&&r.axis[this.dim],this._needDraw()&&this._styleParser()},i.prototype._styleParser=function(){this.config=(0,Q.__assign)({},this.localProps),this._isVisible("line")?this._lineParser():this.config.line=null,this._isVisible("grid")?this._gridParser():this.config.grid=null,this._isVisible("tickLine")?this._tickLineParser():this.config.tickLine=null,this._isVisible("label")?this._labelParser():this.config.label=null,this._isVisible("title")?this._titleParser():this.config.title=null,ce(this.localProps,this.config,"autoHideLabel"),ce(this.localProps,this.config,"autoRotateLabel"),ce(this.localProps,this.config,"autoRotateTitle")},i.prototype._needDraw=function(){var r=this.plot.options,t=r[this.dim+"Axis"]?r[this.dim+"Axis"]:{},e=(0,y.deepMix)({},this.themeConfig,t);return this.localProps=e,!!e.visible},i.prototype._lineParser=function(){this.config.line=this.localProps.line,this.localProps.line.style&&(this.config.line={style:this.localProps.line.style}),this.applyThemeConfig("line")},i.prototype._gridParser=function(){var r=this,t,e,n,a,o,s=(e=(t=this.localProps.grid)===null||t===void 0?void 0:t.line)===null||e===void 0?void 0:e.style,u=(a=(n=this.localProps.grid)===null||n===void 0?void 0:n.line)===null||a===void 0?void 0:a.type,h=(o=this.localProps.grid)===null||o===void 0?void 0:o.alternateColor;(0,y.isFunction)(s)?this.config.grid=function(p,b,k){var R=s(p,b,k);return{line:{type:u,style:(0,y.deepMix)({},(0,y.get)(r.themeConfig,"grid.line.style"),R)},alternateColor:h}}:s&&(this.config.grid={line:{type:u,style:s},alternateColor:h},this.applyThemeConfig("grid"))},i.prototype._tickLineParser=function(){this.config.tickLine=this.localProps.tickLine,this.localProps.tickLine.style&&(this.config.tickLine={style:this.localProps.tickLine.style}),this.applyThemeConfig("tickLine")},i.prototype._labelParser=function(){var r=this.localProps.label,t=r.style,e=(0,Q.__rest)(r,["style"]),n=(0,Q.__assign)({},e);t&&(n.style=(0,Q.__assign)({},this.localProps.label.style)),n.style=(0,y.deepMix)({},(0,y.get)(this.themeConfig,"label.style"),n.style);var a=this.parseFormatter(n);n.formatter=a,this.config.label=n},i.prototype._titleParser=function(){var r=(0,Q.__assign)({},this.localProps.title),t=this.localProps.title,e=t.visible,n=t.style,a=t.text;e?(this.config.showTitle=!0,n&&(r.style=n),r.style=(0,y.deepMix)({},(0,y.get)(this.config,"title.style"),r.textStyle),a&&(r.text=a)):this.config.showTitle=!1,this.config.title=r},i.prototype._isVisible=function(r){return!!(this.localProps[r]&&this.localProps[r].visible)},i.prototype.applyThemeConfig=function(r){this.config[r]=(0,y.deepMix)({},(0,y.get)(this.themeConfig,r+".style"),this.config[r])},i.prototype.parseFormatter=function(r){var t=$r(wi(),ci(r.precision),oe(r.suffix));return r.formatter&&(t=$r(t,r.formatter)),t},i}(),Pe=Ee,Fe=v(15856),Ue=v(92541);function Qe(i){var r=0;return each(i,function(t){r+=t*t}),Math.sqrt(r)}function rr(i,r){return i.x*r.y+i.y*r.x}function We(i,r){var t=Qe(i),e=Qe(r),n=rr(i,r),a=Math.acos(n/t/e);return a}function fr(i,r){var t=Qe(i),e=Qe(r),n=rr(i,r),a=Math.acos(n/t/e);return t*e*Math.sin(a)}function fe(i,r){var t=i.x,e=i.y,n=i.z,a=r.x,o=r.y,s=r.z,u=e*s-n*o,h=n*a-t*s,p=t*o-e*a;return{x:u,y:h,z:p}}function re(i,r){return{x:i.x-r.x,y:i.y-r.y}}function Rt(i,r,t){t===void 0&&(t=1);var e=[i.x,i.y,t];return Ue.transformMat3(e,e,r),{x:e[0],y:e[1]}}function ie(i,r,t){return i>=r&&i<=t}var be=.001;function Oe(i,r,t,e){var n={x:t.x-i.x,y:t.y-i.y},a={x:r.x-i.x,y:r.y-i.y},o={x:e.x-t.x,y:e.y-t.y},s=a.x*o.y-a.y*o.x,u=s*s,h=a.x*a.x+a.y*a.y,p=o.x*o.x+o.y*o.y,b=null;if(u>be*h*p){var k=(n.x*o.y-n.y*o.x)/s,R=(n.x*a.y-n.y*a.x)/s;ie(k,0,1)&&ie(R,0,1)&&(b={x:i.x+k*a.x,y:i.y+k*a.y})}return b}function ze(i,r){for(var t=!1,e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,s=r[n].x,u=r[n].y,h=o>i.y!=u>i.y&&i.x<=(s-a)*(i.y-o)/(u-o)+a;h&&(t=!t)}return t}function ke(i){return i*i}function Ze(i,r){return Math.sqrt(ke(i.x-r.x)+ke(i.y-r.y))}function kr(i,r){return Math.sqrt(ke(i.x-r.x)+ke(i.y-r.y))}function Fr(i,r,t){var e=Ze(r,t);if(e===0)return Ze(i,r);var n=((i.x-r.x)*(t.x-r.x)+(i.y-r.y)*(t.y-r.y))/e;n=Math.max(0,Math.min(1,n));var a=Ze(i,{x:r.x+n*(t.x-r.x),y:r.y+n*(t.y-r.y)});return Math.sqrt(a)}function jr(i,r){var t=Infinity;(0,y.each)(r,function(p){var b=Math.sqrt(Ze(p,i));t>b&&(t=b)});for(var e=0,n=r.length-1;e<r.length;n=e++){var a=r[e].x,o=r[e].y,s=r[n].x,u=r[n].y,h=Fr(i,{x:a,y:o},{x:s,y:u});t>h&&(t=h)}return t}function ve(i,r){for(var t=0,e=i;t<e.length;t++){var n=e[t],a=ze(n,r);if(a)return!0}return!1}function pe(i,r){if(ve(i,r))return 0;var t=Infinity,e=Infinity;return(0,y.each)(i,function(n){var a=jr(n,r);t>a&&(t=a)}),(0,y.each)(r,function(n){var a=jr(n,i);e>a&&(e=a)}),Math.min(t,e)}function Se(i){var r=i.getBBox(),t=r.minX,e=r.minY,n=r.maxX-r.minX,a=r.maxY-r.minY,o=i.attr("matrix"),s;o?s=[o[0],o[1],0,o[3],o[4],0,0,0,1]:s=[1,0,0,0,1,0,0,0,1];var u=Rt({x:0,y:0},s);u.x+=t,u.y+=e;var h=Rt({x:n,y:0},s);h.x+=t,h.y+=e;var p=Rt({x:0,y:a},s);p.x+=t,p.y+=e;var b=Rt({x:n,y:a},s);b.x+=t,b.y+=e;var k=[u,h,p,b];k.sort(function(Ce,me){return Ce.y-me.y});var R=k[0].y,Y=k[k.length-1].y,V=[k[0],k[1]],Z=[k[2],k[3]],it=V[0].x<V[1].x?V[0]:V[1],tt=V[0].x<V[1].x?V[1]:V[0],_t=Z[0].x<Z[1].x?Z[0]:Z[1],It=Z[0].x<Z[1].x?Z[1]:Z[0];k.sort(function(Ce,me){return Ce.x-me.x});var Ht=k[0].x,le=k[k.length-1].x,xe={width:le-Ht,height:Y-R,left:Ht,right:le,top:R,bottom:Y,topLeft:it,topRight:tt,bottomLeft:_t,bottomRight:It,centerX:Ht+(le-Ht)/2,centerY:R+(Y-R)/2};return xe}var Xe=2;function je(i){return i.length<5?i:tr(i,Xe)}function tr(i,r){for(var t,e=-Infinity,n=0,a=i.length-1,o=1;o<a;o++){var s=i[o],u={start:i[0],end:i[a]},h=Fr(s,u.start,u.end);h>e&&(e=h,n=o)}if(e>r){var p=tr(i.slice(0,n+1),r),b=tr(i.slice(n,i.length),r);t=p.concat(b)}else t=[i[0],i[i.length-1]];return t}function pr(i){var r=(0,y.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2?r[t]:(r[t-1]+r[t])/2}function Ar(i){var r=0;return(0,y.each)(i,function(t){r+=t}),r/i.length}function Hr(i){return Math.ceil(Math.log(i.length)/Math.LN2)+1}function Br(i,r,t,e,n){n===void 0&&(n=2);for(var a=[],o=i;o<=i+t;o+=n)a.push([o,r]);for(var s=r;s<=r+e;s+=n)a.push([i+t,s]);for(var o=i+t;o>=i;o-=n)a.push([o,r+e]);for(var s=r+e;s>=r;s-=n)a.push([i,s]);return a}var Vr=function(){function i(r){(0,y.assign)(this,r),this._init()}return i.prototype._init=function(){var r=this.plot.options,t=r.yField,e=r.data,n=this.plot.processData(e);if(!((0,y.isEmpty)(n)||!(0,y.isNumber)(n[0][t]))){var a=this.getDefaultStyle(),o={type:"line",top:!0,start:this.cfg.start,end:this.cfg.end};if(o.style=(0,y.deepMix)({},a.line.style,this.cfg.lineStyle),o.text=(0,y.deepMix)({},a.text,this.cfg.text),this.cfg.type){var s=this._getState(this.cfg.type),u=this.getYScale(),h=(1-u.scale(s))*100+"%",p=["0%",h],b=["100%",h];this.config=(0,y.mix)({start:p,end:b},o)}else{var k=this.cfg,R=k.start,Y=k.end;this.config=(0,y.clone)(o);var V=this.getXScale(),Z=this.getYScale(),it=(0,y.clone)(R),tt=(0,y.clone)(Y);(0,y.each)(R,function(_t,It){(!(0,y.contains)((0,y.toArray)(R[It]),"%")||(0,y.isNumber)(R[It]))&&(It===0?it[It]=V.scale(R[0])*100+"%":it[It]=(1-Z.scale(R[1]))*100+"%")}),(0,y.each)(Y,function(_t,It){(!(0,y.contains)((0,y.toArray)(Y[It]),"%")||(0,y.isNumber)(Y[It]))&&(It===0?tt[It]=V.scale(Y[0])*100+"%":tt[It]=(1-Z.scale(Y[1]))*100+"%")}),this.config.start=it,this.config.end=tt}}},i.prototype.getYScale=function(){var r=this._getState("min"),t=this._getState("max"),e=(0,Fe.getScale)("linear"),n=new e((0,y.mix)({},{min:this.plot.type==="column"?0:r,max:t,nice:!0,values:this.values},this.plot.config.scales[this.plot.options.yField]));return n},i.prototype.getXScale=function(){var r=this.extractXValue();if((0,y.isString)(r[0])){var t=(0,Fe.getScale)("cat"),e=new t((0,y.mix)({},{values:r},this.plot.config.scales[this.plot.options.xField]));return e}else{var n=Math.min.apply(Math,r),a=Math.max.apply(Math,r),t=(0,Fe.getScale)("linear"),e=new t((0,y.mix)({},{min:n,max:a,nice:!0,values:r},this.plot.config.scales[this.plot.options.xField]));return e}},i.prototype._getState=function(r){if(this.values=this._extractValues(),r==="median")return pr(this.values);if(r==="mean")return Ar(this.values);if(r==="max")return Math.max.apply(Math,this.values);if(r==="min")return Math.min.apply(Math,this.values)},i.prototype._extractValues=function(){var r=this.plot.options,t=r.yField,e=[],n=this.plot.processData(r.data);return(0,y.each)(n,function(a){(0,y.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.extractXValue=function(){var r=this.plot.options,t=r.xField,e=[],n=this.plot.processData(r.data);return(0,y.each)(n,function(a){(0,y.isArray)(a[t])?e.push.apply(e,a[t]):e.push(a[t])}),e},i.prototype.getDefaultStyle=function(){return this.getDefaultTextAlign(),{line:{style:{lineWidth:2,stroke:"#333333",opacity:.7,lineDash:[0,0]}},text:{content:"",offsetY:-5,style:{fontSize:14,stroke:"white",lineWidth:2,textAlign:this.getDefaultTextAlign()}}}},i.prototype.getDefaultTextAlign=function(){var r=this.cfg.text;if(r){if(!r.position||r.position==="start")return"left";if(r.position==="center")return"center";if(r.position==="end")return"right"}},i}(),Tn=Vr,Pn=function(){function i(r){this.config={};var t=r.plot,e=(0,Q.__rest)(r,["plot"]);this.plot=t,this.originConfig=e,this.init(r)}return i.prototype.getConfig=function(){return this.config},i.prototype.init=function(r){var t=this;(0,y.assign)(this.config,r),this.config.callback=function(e){return t.parseCallBack(e)}},i.prototype.parseCallBack=function(r){var t=this.originConfig,e=this.plot.getPlotTheme(),n=(0,Q.__assign)({},t);return this.parseOffset(t,n),t.position&&((0,y.isFunction)(t.position)?n.position=t.position(r):n.position=t.position),this.parseFormatter(n),t.style&&((0,y.isFunction)(t.style)?n.textStyle=t.style(r):n.textStyle=t.style),n.textStyle=(0,y.deepMix)({},(0,y.get)(e,"label.style"),n.textStyle),t.autoRotate&&(n.autoRotate=t.autoRotate),n},i.prototype.parseOffset=function(r,t){var e=["offset","offsetX","offsetY"],n=0;(0,y.each)(e,function(a){(0,y.has)(r,a)&&(t[a]=r[a],n++)}),n===0&&(0,y.get)(r,"position")==="middle"&&(t.offset=0)},i.prototype.parseFormatter=function(r){var t=this.originConfig;r.content=function(e,n){var a=e[t.fields[0]];return $r(wi(),ci(t.precision),oe(t.suffix),t.formatter?t.formatter:wi())(a,e,n)}},i}(),ni=Pn,On,si;function zn(i,r){On||Hn(i),(0,y.each)(On,function(t){var e=Ri(t,r),n=e.labelData,a=e.con;if(yt(n,a)){var o=Dt();t.shape.attr(o)}})}function Ti(i,r){On||Hn(i),(0,y.each)(On,function(t,e){var n=Ri(t,r),a=n.labelData,o=n.con;if(yt(a,o)){var s=si[e],u=Jt(s);t.shape.attr(u)}})}function Hn(i){var r;On=[],si=[];var t=(r=i.view.getController("axis"))===null||r===void 0?void 0:r.getComponents();(0,y.each)(t,function(e){var n=e.component,a=[],o=Un(i,n),s=n.get("labelRenderer").get("group").get("children");if((0,y.each)(s,function(p){p.type==="text"&&(a.push({shape:p}),si.push(p.attr()))}),o){var u=o.ticks,h=o.field;(0,y.each)(a,function(p,b){p.value=u[b],p.scaleField=h,p.type=o.type})}On.push.apply(On,a)})}function Un(i,r){var t=i.options,e="y",n=r.get("position");(n==="bottom"||n==="top")&&(e="x");var a=t[e+"Field"];return i.view.get("scales")[a]}function Ri(i,r){var t,e=(t={},t[i.scaleField]=i.value,t),n=(0,y.clone)(r);return i.type==="time"&&(0,y.isObject)(r)&&!(0,y.isFunction)(n.exp)&&(n.exp=new Date(n.exp).getTime()),{labelData:e,con:n}}function Jt(i){var r=i.opacity||1;return{opacity:r*.2}}function Dt(){return{opacity:1,fontWeight:600,fill:"red"}}function yt(i,r){if(!(0,y.isFunction)(r)){var t=r.name,e=r.exp;return i[t]?(0,y.isFunction)(e)?e(i[t]):i[t]===e:!1}return r(i)}var Ct={active:zn,selected:zn,disable:Ti},ct=function(i){(0,Q.__extends)(r,i);function r(){var t=i.call(this)||this;return t._states={},t._stateStack={},t}return r.prototype.setState=function(t,e){this._stateStack[t]=e,this._onUpdate()},r.prototype.getState=function(t){return this._states[t]},r.prototype.getAllStates=function(){return this._states},r.prototype.clear=function(){this._states={},this._stateStack={},this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null)},r.prototype._onUpdate=function(){var t=this,e=this._stateStack;this._changeTimer&&(clearTimeout(this._changeTimer),this._changeTimer=null),this._changeTimer=setTimeout(function(){(0,y.each)(e,function(n,a){var o=e[a];(!t._states[a]||t._states[a]!==n)&&(t._states[a]=n,t._triggerEvent(a,o))}),t._stateStack={}},16)},r.prototype._triggerEvent=function(t,e){this.emit(t+":change",{name:t,exp:e})},r}(qt.default),vt=ct;function ot(i,r){if(!(0,y.isFunction)(r)){var t=r.name,e=r.exp;return(0,y.isFunction)(e)?e(i[t]):i[t]===e}return r(i)}var St=function(){function i(r){this.shapeContainers=[],(0,y.assign)(this,r)}return i.prototype.createStateManager=function(){this.stateManager=new vt},i.prototype.bindStateManager=function(r,t){this.stateManager=r,t.setState&&this._updateStateProcess(t.setState),t.onStateChange&&this._stateChangeProcess(t.onStateChange)},i.prototype.defaultStates=function(r){var t=this;(0,y.each)(r,function(e,n){var a=e.condition,o=e.related;t.setState({type:n,condition:a,related:o})})},i.prototype.setState=function(r){var t=this,e=r.type,n=r.condition,a=r.related;this.shapes=this._getShapes(),this.originAttrs=this._getOriginAttrs(),(0,y.each)(this.shapes,function(o,s){var u=o.get("origin").data,h=(0,y.isArray)(u)?u[0]:u;if(ot(h,n)){var p=r.style?r.style:t._getDefaultStateStyle(e,o),b=t.originAttrs[s],k=void 0;(0,y.isFunction)(p)?k=p(b):k=(0,y.mix)({},b,p),o.attr(k),t.setZIndex(e,o)}}),a&&this._parserRelated(e,a,n),this.plot.canvas.draw()},i.prototype._updateStateProcess=function(r){var t=this;(0,y.each)(r,function(e){var n=e.state,a;(0,y.isFunction)(n)?a=function(o){var s=n(o);t.stateManager.setState(s.name,s.exp)}:a=function(){t.stateManager.setState(n.name,n.exp)},e.event?Lt(t.plot,t._eventParser(e.event),a):a()})},i.prototype._stateChangeProcess=function(r){var t=this;(0,y.each)(r,function(e){t.stateManager.on(e.name+":change",function(n){e.callback(n,t.plot)})})},i.prototype._getShapes=function(){var r=this,t=[],e=this.plot.view.geometries;return(0,y.each)(e,function(n){var a=n.container;r.shapeContainers.push(a),n.destroyed||t.push.apply(t,n.getShapes())}),t},i.prototype._getOriginAttrs=function(){var r=[];return(0,y.each)(this.shapes,function(t){r.push((0,y.clone)(t.attr()))}),r},i.prototype._eventParser=function(r){var t=r.split(":"),e=this.plot.geometryParser("g2",t[0]),n=t[1];return e+":"+n},i.prototype._getDefaultStateStyle=function(r,t){var e=this.plot.theme,n=this.plot.geometryParser("plot",t.name),a=n+"Style";if(e[a]){var o=e[a][r];return(0,y.isFunction)(o)&&(o=o(t.attr())),o}return{}},i.prototype._parserRelated=function(r,t,e){var n=this;(0,y.each)(t,function(a){if(n.plot[a]){var o=_n(a,r);o(n.plot,e)}})},i.prototype.setZIndex=function(r,t){if(r==="active"||r==="selected"){var e=t.get("parent").get("children");e[e.length-1].setZIndex(0),t.setZIndex(1)}},i.prototype.resetZIndex=function(){(0,y.each)(this.shapeContainers,function(r){var t=r.get("children");t.sort(function(e,n){return e._INDEX-n._INDEX})})},i}(),Mt=St,te,ne;function de(i,r){te||Ge(i),(0,y.each)(te,function(t,e){var n=t.get("origin");if(ot(n,r)){var a=ne[e],o=(0,y.mix)({},a,{opacity:1});t.attr(o)}})}function He(i,r){te||Ge(i),(0,y.each)(te,function(t,e){var n=t.get("origin");if(ot(n,r)){var a=ne[e],o=Ie(a);t.attr(o)}})}function Ge(i){te=[],ne=[];var r=i.view.get("elements");(0,y.each)(r,function(t){var e=t.get("labels");e&&(0,y.each)(e,function(n){te.push(n),ne.push(n.attr())})})}function Ie(i){var r=i.opacity||1;return{opacity:r*.2}}var qe={active:de,selected:de,disable:He},xr=["xField","yField","angleField"];function Pr(i,r){var t=i.options;if(br(t,r)){var e=t.data;(0,y.each)(e,function(n){if(ot(n,r)){var a=i.view.getXY(n);i.view.on("tooltip:create",function(o){Lr(r,o,!1)}),i.view.showTooltip(a)}})}}function Wr(i,r){i.view.on("tooltip:change",function(t){Lr(r,t,!0)})}function Lr(i,r,t){var e=!t,n=(0,y.clone)(r.items);r.items.splice(0),(0,y.each)(n,function(a){var o=a.point._origin;ot(o,i)===e&&r.items.push(a)})}function br(i,r){var t=Dr(i);return!(0,y.isFunction)(r)&&t.indexOf(r.name)}function Dr(i){var r=[];return(0,y.each)(xr,function(t){(0,y.has)(i,t)&&r.push(t)}),r}var Sn={active:Pr,selected:Pr,disable:Wr},Dn={axis:Pe,label:ni,guideLine:Tn},Yn={tooltip:Sn,label:qe,axis:Ct};function Ln(i,r){var t=Dn[i];return new t(r).config}function _n(i,r){return Yn[i][r]}var Jn=["start","process","end","reset"],Ii=function(){function i(r){var t=this.getDefaultCfg();(0,y.assign)(this,t,r),this.canvas=this.view.canvas,this._eventHandlers=[],this._bindEvents()}return i.prototype.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},i.prototype._start=function(r){this.preStart(r),this.start(r),this.afterStart(r)},i.prototype.preStart=function(r){},i.prototype.afterStart=function(r){},i.prototype._process=function(r){this.preProcess(r),this.process(r),this.afterProcess(r)},i.prototype.preProcess=function(r){},i.prototype.process=function(r){},i.prototype.afterProcess=function(r){},i.prototype._end=function(r){this.preEnd(r),this.end(r),this.afterEnd(r)},i.prototype.preEnd=function(r){},i.prototype.end=function(r){},i.prototype.afterEnd=function(r){},i.prototype._reset=function(r){this.preReset(r),this.reset(r),this.afterReset(r)},i.prototype.preReset=function(r){},i.prototype.reset=function(r){},i.prototype.afterReset=function(r){},i.prototype._bindEvents=function(){var r=this;(0,y.each)(Jn,function(t){var e=r[t+"Event"],n=(0,y.wrapBehavior)(r,"_"+t);r.view.on(e,n),r._eventHandlers.push({type:e,handler:n})})},i.prototype._unbindEvents=function(){var r=this,t=this._eventHandlers;(0,y.each)(t,function(e){r.view.off(e.type,e.handler)})},i.prototype.destroy=function(){this._unbindEvents(),this._reset()},i}(),Qn=Ii,qi=function(i){(0,Q.__extends)(r,i);function r(t,e,n,a){var o=i.call(this,t)||this;return o.viewLayer=e,o.interactionRange=n,o.interactionConfig=a,o.disposables=[],o}return r.registerInteraction=function(t,e){r.GLOBAL_INTERACTION_MAP[t]=e},r.registerPlotInteraction=function(t,e,n){r.PLOT_INTERACTION_MAP[t]||(r.PLOT_INTERACTION_MAP[t]={}),r.PLOT_INTERACTION_MAP[t][e]=n},r.getInteraction=function(t,e){return e&&r.PLOT_INTERACTION_MAP[e]&&r[e][t]?r.PLOT_INTERACTION_MAP[e][t]:r.GLOBAL_INTERACTION_MAP[t]},r.getInteractionRange=function(t,e){},r.prototype.destroy=function(){(0,y.each)(this.disposables,function(t){t()}),this.disposables=[],this.clear(),i.prototype.destroy.call(this)},r.prototype.getViewLayer=function(){return this.viewLayer},r.prototype.getRange=function(){return this.interactionRange},r.prototype.getInteractionConfig=function(){return this.interactionConfig},r.prototype.addDisposable=function(t){this.disposables.push(t)},r.prototype.render=function(){},r.prototype.start=function(t){},r.GLOBAL_INTERACTION_MAP={},r.PLOT_INTERACTION_MAP={},r}(Qn),dn=qi,Si=function(i,r,t,e,n){var a=e[0],o=e[1];n===void 0&&(n=!1);var s=(0,y.groupBy)(t,i),u=n?r.slice(r.length-o,r.length-a):r.slice(a,o);return(0,y.flatten)((0,y.map)(u,function(h){return s[h]||[]}))},Zn;(function(i){i.BEFORE_INIT="beforeinit",i.AFTER_INIT="afterinit",i.BEFORE_RENDER="beforerender",i.AFTER_RENDER="afterrender",i.BEFORE_CHANGE_DATA="beforechangedata",i.AFTER_CHANGE_DATA="afterchangedata"})(Zn||(Zn={}));var ya=4,La=8,Va=32,ji=20,ma=999,va=function(i){i===void 0&&(i={});var r=(0,Q.__assign)({type:"horizontal",categorySize:Va,width:La,height:La,padding:[0,0,0,0]},i);return i.padding||(r.padding=r.type==="horizontal"?[ya,0,ya,0]:[0,ya,0,ya]),r},_a=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,y.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=va(e),a=n.padding,o=a[0],s=a[1],u=a[2],h=a[3];return n.type==="horizontal"?new at(t.minX,t.maxY-n.height-o-u,t.width,n.height+o+u):new at(t.maxX-n.width-h-s,t.minY,n.width+h+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view;this.ratio=0,this.thumbOffset=0;var a=function(){var s=t.view.padding;s==="auto"||(0,y.isEqual)(s,[0,0,0,1])||(t.trackLen?t.renderScrollbar():(t.measureScrollBar(),t.changeViewData(t.getScrollRange(),!0)))},o=function(){t.trackLen=0};n.on(zt.VIEW_LIFE_CIRCLE.AFTER_PAINT,a),this.addDisposable(function(){return n.off(zt.VIEW_LIFE_CIRCLE.AFTER_PAINT,a)}),n.on(zt.VIEW_LIFE_CIRCLE.AFTER_RENDER,a),this.addDisposable(function(){return n.off(zt.VIEW_LIFE_CIRCLE.AFTER_RENDER,a)}),e.on(Zn.BEFORE_CHANGE_DATA,o),this.addDisposable(function(){return e.off(Zn.BEFORE_CHANGE_DATA,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=null),this.container&&(this.container.remove(!0),this.container=null),this.trackLen=null,this.thumbLen=null},r.prototype.renderScrollbar=function(){var t=va(this.getInteractionConfig()),e=this.getRange(),n=t.type!=="vertical",a=this.view.coordinateBBox,o=t.padding,s=o[0],u=o[3],h=n?{x:a.minX+u,y:e.minY+s}:{x:e.minX+u,y:a.minY+s};this.scrollbar?(this.scrollbar.update({trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.thumbOffset,x:h.x,y:h.y}),this.scrollbar.render()):(this.container=this.canvas.addGroup(),this.scrollbar=new q.LW({container:this.container,x:h.x,y:h.y,isHorizontal:n,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:this.ratio*this.trackLen}),this.scrollbar.init(),this.scrollbar.render(),this.scrollbar.get("group").set("zIndex",ma),this.scrollbar.on("scrollchange",this.onChangeFn))},r.prototype.measureScrollBar=function(){var t=va(this.getInteractionConfig()),e=t.padding,n=e[0],a=e[1],o=e[2],s=e[3],u=t.type!=="vertical",h=this.view.coordinateBBox,p=this.view.getXScale(),b=this.view.getYScales().filter(function(k){return k});this.cnt=p.values.length,this.xScaleCfg={field:p.field,values:p.values||[]},this.yScalesCfg=b,this.step=Math.floor((u?h.width:h.height)/t.categorySize),this.trackLen=u?h.width-s-a:h.height-n-o,this.thumbLen=Math.max(this.trackLen*(0,y.clamp)(this.step/p.values.length,0,1),ji)},r.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*(0,y.clamp)(this.ratio,0,1)),e=Math.min(t+this.step,this.cnt);return[t,e]},r.prototype.changeViewData=function(t,e){var n=this,a=t[0],o=t[1],s=va(this.getInteractionConfig()),u=this.getViewLayer(),h=u.options.meta,p=u.getData(),b=Si(this.xScaleCfg.field,this.xScaleCfg.values,p,[a,o],s.type==="vertical");this.yScalesCfg.forEach(function(k){var R=(0,y.get)(h,k.field)||{};n.view.scale(k.field,(0,Q.__assign)((0,Q.__assign)({formatter:k.formatter},R),{type:k.type,min:k.min,max:k.max}))}),e?(this.view.data(b),this.view.render()):this.view.changeData(b)},r.prototype.onChange=function(t){var e=t.ratio,n=t.thumbOffset;this.ratio=e,this.thumbOffset=n;var a=this.view.getOptions().animate;this.view.animate(!1),this.changeViewData(this.getScrollRange(),!0),this.view.animate(a),this.renderScrollbar()},r}(dn),ta=_a,sa=4,ea=16,xa=function(i){i===void 0&&(i={});var r=(0,Q.__assign)({type:"horizontal",start:0,end:1,width:void 0,height:void 0,padding:[0,0,0,0],backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},trendCfg:{}},i);i.padding||(r.padding=r.type==="horizontal"?[sa,0,sa,0]:[0,sa,0,sa]),i.height||(r.height=ea),i.width||(r.width=ea);var t=(0,y.clamp)(Math.min(r.start,r.end),0,1),e=(0,y.clamp)(Math.max(r.start,r.end),0,1);return r.start=t,r.end=e,r},Ca=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,y.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=xa(e),a=n.padding||[0,0,0,0],o=a[0],s=a[1],u=a[2],h=a[3];if(n.type==="horizontal"){var p=new at(t.minX,t.maxY-n.height-o-u,t.width,n.height+o+u);return p}else return new at(t.maxX-n.width-h-s,t.minY,n.width+h+s,t.height)},r.prototype.render=function(){var t=this,e=this.getViewLayer(),n=this.view,a=xa(this.getInteractionConfig());this.curStart=a.start,this.curEnd=a.end,this.xScaleCfg=void 0;var o=function(){var s=t.view.padding;if(!(s==="auto"||(0,y.isEqual)(s,[0,0,0,1]))&&!(0,y.isEmpty)(e.options.data))if(t.xScaleCfg)t.renderSlider();else{var u=n.getXScale();t.xScaleCfg={field:u.field,values:u.values||[]},n.data(t.getSliderData(t.curStart,t.curEnd)),n.render()}};n.on(q.ld.AFTER_PAINT,o),this.addDisposable(function(){return n.off(q.ld.AFTER_PAINT,o)}),n.on(q.ld.AFTER_RENDER,o),this.addDisposable(function(){return n.off(q.ld.AFTER_RENDER,o)})},r.prototype.start=function(){},r.prototype.clear=function(){this.slider&&(this.slider.destroy(),this.slider=null),this.container&&(this.container.remove(!0),this.container=null)},r.prototype.renderSlider=function(){this.slider?(this.slider.update(this.getSliderConfig()),this.slider.render()):(this.container=this.canvas.addGroup(),this.slider=new q.iR((0,Q.__assign)((0,Q.__assign)({},this.getSliderConfig()),{container:this.container})),this.slider.init(),this.slider.render(),this.slider.on("sliderchange",this.onChangeFn))},r.prototype.getSliderConfig=function(){var t=this.view,e=t.coordinateBBox,n=this.getRange(),a=xa(this.getInteractionConfig()),o=a||{},s=o.padding,u=s===void 0?[0,0,0,0]:s,h=o.backgroundStyle,p=o.foregroundStyle,b=o.handlerStyle,k=o.textStyle,R=o.trendCfg,Y=R===void 0?{}:R,V=u[0],Z=u[1],it=u[2],tt=u[3],_t=this.getSliderMinMaxText(this.curStart,this.curEnd),It=_t.minText,Ht=_t.maxText,le={x:e.minX+tt,y:n.minY+V,width:e.width-tt-Z,height:n.height-V-it,start:this.curStart,end:this.curEnd,minText:It,maxText:Ht,backgroundStyle:h,foregroundStyle:p,handlerStyle:b,textStyle:k,trendCfg:(0,Q.__assign)((0,Q.__assign)({isArea:!1,smooth:!1},Y),{data:this.getSliderTrendData()})};return le},r.prototype.getSliderTrendData=function(){var t=this.getViewLayer().options,e=t.data,n=t.yField;return(0,y.map)(e,function(a){return a[n]})},r.prototype.getSliderData=function(t,e){var n=this.getViewLayer().getData(),a=(0,y.size)(this.xScaleCfg.values),o=Math.round(t*a),s=Math.max(o+1,Math.round(e*a));return Si(this.xScaleCfg.field,this.xScaleCfg.values,n,[o,s])},r.prototype.getSliderMinMaxText=function(t,e){var n=this.getViewLayer().options,a=n.data,o=a===void 0?[]:a,s=n.xField,u=(0,y.size)(o),h=Math.round(t*u),p=Math.max(h+1,Math.round(e*u)),b=o.slice(h,p);return{minText:b.length>0?(0,y.head)(b)[s]:"",maxText:b.length>0?(0,y.last)(b)[s]:""}},r.prototype.onChange=function(t){var e=this.view,n=(0,y.clamp)(Math.min(t[0],t[1]),0,1),a=(0,y.clamp)(Math.max(t[0],t[1]),0,1),o=this.getSliderData(n,a),s=this.getSliderMinMaxText(n,a),u=s.minText,h=s.maxText;this.curStart=n,this.curEnd=a,this.slider.update({start:n,end:a,minText:u,maxText:h}),this.slider.render();var p=e.getOptions().animate;e.animate(!1),e.data(o),e.render(),e.animate(p)},r}(dn),ba=Ca,fo=function(i){(0,Q.__extends)(r,i);function r(t){return i.call(this,(0,y.deepMix)({},t))||this}return r.prototype.renderInner=function(t){var e=this;this.initElement(t),this.updateElement(),this.renderMarker(),t.off("click"),t.on("click",function(){e.emit("click")})},r.prototype.destroy=function(){this.group.off(),i.prototype.destroy.call(this)},r.prototype.initElement=function(t){this.circle=t.addShape("circle",{attrs:{x:this.config.x,y:this.config.y,r:this.config.r,fill:"#607889"}}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ffffff"}}),this.pauseGroupMarker=t.addGroup();var e=1/4*this.config.r,n=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-n/2,width:e,height:n,fill:"#ffffff"}})},r.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var t=1/4*this.config.r,e=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-e/2),this.pauseLeftMarker.attr("width",t),this.pauseLeftMarker.attr("height",e),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-e/2),this.pauseRightMarker.attr("width",t),this.pauseRightMarker.attr("height",e)},r.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},r.prototype.getStartMarkerPath=function(){var t=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-t/Math.sqrt(3)/2,this.config.y-t/2],["L",this.config.x+t/Math.sqrt(3),this.config.y],["L",this.config.x-t/Math.sqrt(3)/2,this.config.y+t/2]]},r}(vr),Xo=fo,co="timelinestart",vo="timelinechange",Wa="timelineend",wa="timelineupdate",cs=20,po=20,Ho=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,(0,y.deepMix)({},{speed:1,loop:!1},t))||this;return e.onTimeSelectMouseMove=function(n){n.stopPropagation(),n.preventDefault();var a=(0,y.get)(n,"touches.0.pageX",n.pageX),o=a-e.prevX;e.setTimeSelectX(o),e.prevX=a},e.onTimeSelectMouseUp=function(){e.syncCurrnentTick(),e.emit(Wa,null);var n=e.getCanvas().get("container");n&&(n.removeEventListener("mousemove",e.onTimeSelectMouseMove),n.removeEventListener("mouseup",e.onTimeSelectMouseUp),n.removeEventListener("mouseleave",e.onTimeSelectMouseUp),n.removeEventListener("touchmove",e.onTimeSelectMouseMove),n.removeEventListener("touchend",e.onTimeSelectMouseUp),n.removeEventListener("touchcancel",e.onTimeSelectMouseUp))},e.onTimeSelectMouseDown=function(n){var a=n.originalEvent;a.stopPropagation(),a.preventDefault(),e.isPlay===!1?e.emit(co,null):(e.isPlay=!1,e.changePlayStatus(!1)),e.prevX=(0,y.get)(a,"touches.0.pageX",a.pageX);var o=e.getCanvas().get("container");o.addEventListener("mousemove",e.onTimeSelectMouseMove),o.addEventListener("mouseup",e.onTimeSelectMouseUp),o.addEventListener("mouseleave",e.onTimeSelectMouseUp),o.addEventListener("touchmove",e.onTimeSelectMouseMove),o.addEventListener("touchend",e.onTimeSelectMouseUp),o.addEventListener("touchcancel",e.onTimeSelectMouseUp)},e}return r.prototype.renderInner=function(t){var e=this.config,n=e.ticks,a=e.defaultCurrentTick;n&&n.length&&(this.currentTick=this.config.ticks.includes(a)?a:n[0],this.renderPlayButton(t),this.renderTimeLine(t),this.renderTimeSelect(t,this.currentTick),this.initEvent())},r.prototype.update=function(t){i.prototype.update.call(this,t),this.emit(wa,this.currentTick)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.timeLineButton.destroy(),this.timeLineButton.off(),this.timeSelect.off(),this.playHandler&&window.cancelAnimationFrame(this.playHandler)},r.prototype.renderPlayButton=function(t){var e=this.config,n=e.height,a=e.x,o=e.y,s=.8,u=n/2*s;this.timeLineButton?this.timeLineButton.update({x:a+u,y:o+u+n*(1-s)/2,r:u}):(this.timeLineButton=new Xo({container:t,x:a+u,y:o+u+n*(1-s)/2,r:u,isPlay:this.isPlay}),this.timeLineButton.init()),this.timeLineButton.render()},r.prototype.getTimeLinePath=function(){var t=this.timeLine,e=t.x,n=t.y,a=t.width,o=t.height,s=o/2;return a>0?"M"+e+", "+n+("A"+s+","+s+" 90 0,0 "+e+","+(n+o))+("L"+(e+a)+", "+(n+o))+("A"+s+","+s+" 90 0,0 "+(e+a)+","+n)+("L"+e+", "+n):[]},r.prototype.renderTimeLine=function(t){var e=this,n=this.config,a=n.width,o=n.height,s=n.ticks,u=n.x,h=n.y;this.timeLine||(this.timeLine={}),this.timeLine.height=o*.15,this.timeLine.x=u+o+cs,this.timeLine.y=h+(o/2-this.timeLine.height/2),this.timeLine.width=a-this.timeLine.x-po,this.timeLine&&this.timeLine.shape?this.timeLine.shape.attr("path",this.getTimeLinePath()):this.timeLine.shape=t.addShape("path",{attrs:{path:this.getTimeLinePath(),fill:"#607889",opacity:.2}});var p=this.timeLine.width/(s.length-1);this.tickPosList=[],this.timeLine.textList&&this.timeLine.textList.length&&this.timeLine.textList.forEach(function(k){k.destroy()});var b=-Infinity;this.timeLine.textList=s.map(function(k,R){e.tickPosList.push(e.timeLine.x+R*p);var Y=t.addShape("text",{attrs:{x:e.timeLine.x+R*p,y:e.timeLine.y+e.timeLine.height+5,text:k,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),V=Y.getBBox();return V.minX>b?(Y.show(),b=V.minX+V.width+10):Y.hide(),Y})},r.prototype.renderTimeSelect=function(t,e){var n=this.config,a=n.ticks,o=n.height,s=this.timeLine.width/(a.length-1),u=(0,y.findIndex)(a,function(k){return k===e}),h=this.timeLine.x+u*s,p=this.config.y+o/2,b=o*.15;this.timeSelect?(this.timeSelect.attr("x",h),this.timeSelect.attr("y",p),this.timeSelect.attr("r",b)):this.timeSelect=t.addShape("circle",{attrs:{x:h,y:p,r:b,fill:"#607889"}}),this.timeSelectText?(this.timeSelectText.attr("x",h),this.timeSelectText.attr("y",p-o*.15-14),this.timeSelectText.attr("text",this.currentTick)):this.timeSelectText=t.addShape("text",{attrs:{x:h,y:p-o*.15-14,text:this.currentTick,textAlign:"center",textBaseline:"top",fill:"#607889"}})},r.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1},r.prototype.setTimeSelectX=function(t){var e=this.timeSelect.attr("x")+t;e<this.timeLine.x&&(e=this.timeLine.x),e>this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x+this.timeLine.width,this.isPlay&&(this.config.loop?this.timeSelect.attr("x")===this.timeLine.x+this.timeLine.width&&(e=this.timeLine.x):(this.isPlay=!1,this.changePlayStatus()))),this.timeSelect.attr("x",e),this.timeSelectText.attr("x",e);var n=this.adjustTickIndex(e);this.currentTick!==this.config.ticks[n]&&(this.currentTick=this.config.ticks[n],this.timeSelectText.attr("text",this.currentTick),this.emit(vo,this.currentTick)),this.getCanvas().draw()},r.prototype.syncCurrnentTick=function(){var t=this,e=this.config.ticks,n=this.timeLine.width/(e.length-1),a=(0,y.findIndex)(e,function(s){return s===t.currentTick}),o=this.timeLine.x+a*n;this.timeSelect.attr("x",o),this.timeSelectText.attr("x",o),this.getCanvas().draw()},r.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame(function(){var e=t.config,n=e.speed,a=e.ticks,o=t.timeLine.width,s=o/a.length,u=s/(n*1e3/60);t.setTimeSelectX(u),t.isPlay&&(t.playHandler=t.startPlay())})},r.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.timeLineButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.emit(co,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&(this.syncCurrnentTick(),this.emit(Wa,null))),this.getCanvas().draw()},r.prototype.initEvent=function(){var t=this;this.timeLineButton.off("click"),this.timeLineButton.on("click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),this.timeSelect.off("mousedown"),this.timeSelect.on("mousedown",function(e){t.onTimeSelectMouseDown(e)})},r}(vr),Vo=Ho,Wo=40;function To(i){return(0,Q.__assign)({loop:!1,auto:!0,height:Wo,padding:[0,20,0,0],speed:2},i)}var go=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onChangeFn=(0,y.throttle)(t.onChange.bind(t),20,{leading:!0}),t}return r.getInteractionRange=function(t,e){var n=To(e),a=n.padding[0],o=n.padding[2];return new at(t.minX,t.maxY-n.height-a-o,t.width,n.height+a+o)},r.prototype.setAnimate=function(t){var e=this.view.geometries;this.view.animate(t),e.forEach(function(n){n.animate(t)})},r.prototype.start=function(){},r.prototype.renderTimeLine=function(){var t=this;this.config=To(this.getInteractionConfig());var e=this.view.viewBBox,n=this.config,a=n.loop,o=n.padding,s=n.speed,u=o[0],h=o[1],p=o[2],b=o[3],k=this.getRange(),R=this.getTicks(),Y=e.width-b-h,V={x:e.minX+b,y:k.tl.y+u,width:Y,height:k.height-u-p,loop:a,ticks:R,speed:s,defaultCurrentTick:R[0]};this.timeline?(0,y.isEqual)(V,this.timeLineConfig)||(this.timeLineConfig=V,this.timeline.update(V)):(this.container=this.canvas.addGroup(),this.timeline=new Vo((0,Q.__assign)({container:this.container},V)),this.timeline.init(),this.timeline.render(),this.timeline.on("timelinestart",function(){t.originAnimation=t.view.getOptions().animate,t.setAnimate(!0)}),this.timeline.on("timelineend",function(){t.setAnimate(t.originAnimation)}),this.timeline.on("timelinechange",this.onChangeFn),this.timeline.on("timelineupdate",this.onChange.bind(this)),this.view.data(this.getFilterData(R[0])),this.timeLineConfig=V)},r.prototype.onChange=function(t){var e=this.getFilterData(t);this.view.changeData(e)},r.prototype.getFilterData=function(t){var e=this.config.field,n=this.getViewLayer().options.data;return n.filter(function(a){return a[e]===t})},r.prototype.getTicks=function(){var t=this.config.field,e=this.getViewLayer().options.data;return(0,y.uniq)(e.map(function(n){return n[t]}))},r.prototype.render=function(){var t=this;this.firstRender=!0,this.view.on(q.ld.BEFORE_RENDER,function(){t.renderTimeLine()}),this.view.on(q.ld.BEFORE_PAINT,function(){t.renderTimeLine()}),this.view.on(q.ld.AFTER_PAINT,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1}),this.view.on(q.ld.AFTER_RENDER,function(){t.config.auto&&t.firstRender&&(t.timeline.isPlay=!0,t.timeline.changePlayStatus()),t.firstRender=!1})},r.prototype.clear=function(){this.timeline&&(this.timeline.destroy(),this.timeline=null),this.container&&(this.container.remove(!0),this.container=null)},r}(dn),jo=go,da=v(50669);function Po(i,r){var t=[1,0,0,0,1,0,0,0,1],e=da.transform(t,r);i.setMatrix(e)}function zi(i,r){var t=r?(0,y.clone)(r):[1,0,0,0,1,0,0,0,1];return da.transform(t,i)}function Lo(i,r,t,e){var n=e?(0,y.clone)(e):[1,0,0,0,1,0,0,0,1];n[6]=r,n[7]=t,i.setMatrix(n)}function Uo(i,r,t){q.Zr.translate(i,r,t)}function Zo(i,r){Util.rotate(i,r)}var ue=document.createElement("canvas"),wt=ue.getContext("2d"),X=(0,y.memoize)(function(i,r){r===void 0&&(r={});var t=r.fontSize,e=r.fontFamily,n=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return wt.font=[a,o,n,t+"px",e].join(" "),wt.measureText((0,y.isString)(i)?i:"").width},function(i,r){return r?(0,Q.__spreadArrays)([i],(0,y.values)(r)).join(""):i}),et=function(i,r,t){var e=16,n=X("...",t),a;(0,y.isString)(i)?a=i:a=(0,y.toString)(i);var o=r,s=[],u,h;if(X(i,t)<=r)return i;for(;u=a.substr(0,e),h=X(u,t),!(h+n>o&&h>o);)if(s.push(u),o-=h,a=a.substr(e),!a)return s.join("");for(;u=a.substr(0,1),h=X(u,t),!(h+n>o);)if(s.push(u),o-=h,a=a.substr(1),!a)return s.join("");return s.join("")+"..."},dt;(function(i){i.TOOLTIP_INDICATOR_INNER="tooltip_indicator-inner",i.TOOLTIP_INDICATOR_TITLE="tooltip_indicator-title",i.TOOLTIP_INDICATOR_BODY="tooltip_indicator-body",i.TOOLTIP_INDICATOR_ITEM_GROUP="tooltip_indicator-item-group",i.TOOLTIP_INDICATOR_ITEM_BACKGROUND="tooltip_indicator-item-background",i.TOOLTIP_INDICATOR_ITEM_LINE="tooltip_indicator-item-line",i.TOOLTIP_INDICATOR_ITEM_TITLE="tooltip_indicator-item-title",i.TOOLTIP_INDICATOR_ITEM_BODY="tooltip_indicator-item-body",i.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP="tooltip_indicator-item-value-group",i.TOOLTIP_INDICATOR_ITEM_NAME="tooltip_indicator-item-name",i.TOOLTIP_INDICATOR_ITEM_VALUE="tooltip_indicator-item-value"})(dt||(dt={}));var Ot;(function(i){i.ON_SELECT_ITEM="onSelectItem"})(Ot||(Ot={}));var Qt;(function(i){i[i.LARGE=12]="LARGE",i[i.NORMAL=8]="NORMAL",i[i.SMALL=4]="SMALL"})(Qt||(Qt={}));var se=160,Me=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.curX=0,t.curY=0,t.offsetX=0,t.scrollWidth=0,t.onBodyGroupMousemove=function(e){var n=Ne(e.target,function(o){return o.get("name")===dt.TOOLTIP_INDICATOR_ITEM_GROUP});if(n){var a=n.get("delegateObject");t.doSelectItem(a.item.id)}},t.onWheel=function(e){var n=t.config.width,a=n===void 0?0:n,o=e.deltaX,s=Math.min(t.scrollWidth-a,0)-(t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2)),u=Math.max(t.scrollWidth-a,0)+t.scrollWidth/2+Math.max(0,(t.scrollWidth-a)/2),h=(0,y.clamp)(t.offsetX+o,s,u);h!==t.offsetX&&(Uo(t.bodyGroup,t.offsetX-h,0),t.offsetX=h)},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.selectItem=function(t){this.doSelectItem(t)},r.prototype.resetSelect=function(){this.doSelectItem(this.selectedItemId)},r.prototype.initConfig=function(t){var e,n=t.theme,a=n===void 0?{}:n,o={x:0,y:0,title:{text:"",spacingY:Qt.NORMAL,style:{}},line:{spacingX:Qt.SMALL,width:2,style:{}},itemTitle:{spacingX:0,spacingY:Qt.SMALL,style:{}},itemName:{spacingX:Qt.NORMAL,spacingY:Qt.SMALL,style:{}},itemValue:{style:{}},itemBackground:{style:{opacity:0,fill:"#000"}},itemSpacing:Qt.LARGE};this.config=(0,y.deepMix)({},(e=a==null?void 0:a.components)===null||e===void 0?void 0:e.tooltipIndicator,o,t),this.selectedItemId=this.config.selectedItem},r.prototype.renderInner=function(t){var e=this;this.resetRender();var n=this.config,a=n.items,o=n.x,s=n.y,u=[],h=t.addGroup({name:dt.TOOLTIP_INDICATOR_INNER});this.renderTitle(h),this.bodyGroup=h.addGroup({name:dt.TOOLTIP_INDICATOR_BODY}),a==null||a.forEach(function(p,b){u.push(e.renderItem(e.bodyGroup,p,b))}),this.layoutItems(h),Lo(h,o,s),this.applyClip(t),this.bindEvents(h)},r.prototype.renderTitle=function(t){var e=this.config.title;if(e==null?void 0:e.text){var n=t.addShape({type:"text",name:dt.TOOLTIP_INDICATOR_TITLE,attrs:(0,Q.__assign)({text:e==null?void 0:e.text,textAlign:"left",textBaseline:"top"},(e==null?void 0:e.style)||{})}),a=n.getBBox();return this.curY+=a.height,this.curY+=e.spacingY||0,n}},r.prototype.renderItem=function(t,e,n){var a=this.config.itemBackground,o=t.addGroup({name:dt.TOOLTIP_INDICATOR_ITEM_GROUP,delegateObject:{item:e,index:n}}),s=this.curX,u=this.curY,h=o.addShape({name:dt.TOOLTIP_INDICATOR_ITEM_BACKGROUND,type:"rect",attrs:(0,Q.__assign)({x:this.curX,y:this.curY,width:1,height:1},a.style||{})}),p=this.renderLine(o,e);this.renderItemTitle(o,e),this.renderItemValues(o,e);var b=o.getBBox();return p.attr({y2:p.attr("y1")+b.height}),this.curX=s+b.width,this.curX+=this.config.itemSpacing||0,h.attr({width:this.curX-s-h.attr("lineWidth")*2,height:this.curY-u-h.attr("lineWidth")*2}),this.curY=u,o},r.prototype.renderLine=function(t,e){var n=this.config.line,a=n.width||2,o=(0,Q.__assign)({x1:this.curX+a/2,y1:this.curY,x2:this.curX+a/2,y2:this.curY,lineWidth:a,stroke:e.color},(n==null?void 0:n.style)||{}),s=t.addShape({name:dt.TOOLTIP_INDICATOR_ITEM_LINE,type:"line",attrs:o}),u=s.getBBox();return this.curX+=u.width,this.curX+=n.spacingX||0,s},r.prototype.renderItemTitle=function(t,e){var n=this.config.itemTitle,a=et(e.title,se,n.style||{}),o=t.addShape({name:dt.TOOLTIP_INDICATOR_ITEM_TITLE,type:"text",attrs:(0,Q.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:a},n.style||{})}),s=o.getBBox();return this.curY+=s.height,this.curY+=n.spacingY||0,o},r.prototype.renderItemValues=function(t,e){var n=this,a,o=t.addGroup({name:dt.TOOLTIP_INDICATOR_ITEM_BODY}),s=this.curX;return(a=e.values)===null||a===void 0||a.forEach(function(u,h){var p=o.addGroup({name:dt.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP,delegateObject:{item:e,valueIndex:h}});n.curX=s,n.renderItemValueName(p,u),n.renderItemValueValue(p,u)}),this.layoutItemValues(o),o},r.prototype.renderItemValueName=function(t,e){var n=this.config.itemName;if(e.name){var a=t.addShape({name:dt.TOOLTIP_INDICATOR_ITEM_NAME,type:"text",attrs:(0,Q.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.name},n.style||{})}),o=a.getBBox();return e.wrapLine?(this.curY+=o.height,this.curY+=n.spacingY||0):(this.curX+=o.width,this.curX+=n.spacingX||0),a}},r.prototype.renderItemValueValue=function(t,e){var n=this.config,a=n.itemName,o=n.itemValue,s=t.addShape({name:dt.TOOLTIP_INDICATOR_ITEM_VALUE,type:"text",attrs:(0,Q.__assign)({x:this.curX,y:this.curY,textAlign:"left",textBaseline:"top",text:e.value},o.style||{})}),u=s.getBBox();return this.curY+=u.height,this.curY+=a.spacingY||0,s},r.prototype.layoutItems=function(t){var e=t.findAllByName(dt.TOOLTIP_INDICATOR_BODY)[0],n=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_GROUP);if(!(!e||n.length===0)){var a=e.getBBox();this.scrollWidth=a.width}},r.prototype.layoutItemValues=function(t){var e=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_VALUE_GROUP),n=e.map(function(u){return at.fromBBoxObject(u.getBBox())}),a=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_VALUE),o=a.map(function(u){return at.fromBBoxObject(u.getBBox())}),s=Math.max.apply(Math,o.map(function(u){return u.maxX}));e.forEach(function(u,h){var p=n[h],b=u.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_NAME)[0],k=u.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_VALUE)[0];if(b&&k){var R=at.fromBBoxObject(b.getBBox()),Y=at.fromBBoxObject(k.getBBox());R.height<p.height&&b.attr("y",b.attr("y")+(p.height-R.height)/2),Y.height<p.height&&k.attr("y",k.attr("y")+(p.height-Y.height)/2),Y.maxX<s&&k.attr("x",k.attr("x")+s-Y.maxX)}})},r.prototype.applyClip=function(t){var e=this.config,n=e.x,a=e.y,o=e.width,s=e.height,u=t.getBBox();(o||s)&&t.setClip({type:"rect",attrs:{x:n,y:a,width:o||u.width,height:s||u.height}})},r.prototype.doSelectItem=function(t){var e=this,n=this.getGroup(),a=n.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_GROUP);t!==this.selectedItemId?(a.forEach(function(o){var s=o.get("delegateObject");s&&e.applyItemStyle(o,s.item.id===t?"selected":"inactive")}),this.selectedItemId=t):(a.forEach(function(o){e.applyItemStyle(o)}),this.selectedItemId=void 0),this.emit(Ot.ON_SELECT_ITEM,this.selectedItemId)},r.prototype.applyItemStyle=function(t,e){var n=this.config,a=n.line,o=n.itemTitle,s=n.itemName,u=n.itemValue,h=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_LINE)[0],p=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_TITLE)[0],b=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_NAME),k=t.findAllByName(dt.TOOLTIP_INDICATOR_ITEM_VALUE),R=e&&e+"Style";h&&(h.attr(a.style),h.attr(a[R]||{})),p&&(p.attr(o.style),p.attr(o[R]||{})),b.forEach(function(Y){Y.attr(s.style),Y.attr(s[R]||{})}),k.forEach(function(Y){Y.attr(u.style),Y.attr(u[R]||{})})},r.prototype.bindEvents=function(t){var e=this;this.offEvents();var n=t.findAllByName(dt.TOOLTIP_INDICATOR_BODY)[0];n.on("mousemove",this.onBodyGroupMousemove),this.addDisposable(function(){n.off("mousemove",e.onBodyGroupMousemove)}),this.gm=new q.GM(n),this.wheel=new q.AK(n),this.wheel.on("wheel",this.onWheel)},r.prototype.offEvents=function(){this.gm&&this.gm.destroy(),this.wheel&&this.wheel.destroy()},r.prototype.resetRender=function(){this.curX=0,this.curY=0,this.offsetX=0},r}(vr),Te=Me;function Ne(i,r){for(var t=i;t;){if(r(t))return t;t=t.getParent()}}function Je(i,r){return(0,y.filter)(i.geometries,function(t){return t.type===r})}function sr(i,r){return(0,y.head)(Je(i,r))}function gr(i){return(0,y.map)(i.elements,function(r){return r.shape})}function Ir(i,r){i.geometries.forEach(r)}function tn(i,r){i.geometries.forEach(function(t){t.elements.forEach(function(e){r(e)})})}function Qr(i,r,t){return(0,y.some)(r,function(e){return t(e.get(q.jQ),i.get(q.jQ))})}function En(i,r){var t=i.getBBox(),e=0,n=0;t.minX<r.minX?e=t.minX-r.minX:t.maxX>r.maxX&&(e=t.maxX-r.maxX),e&&i.attr("x",i.attr("x")-e),t.minY<r.minY?n=t.minY-r.minY:t.maxY>r.maxY&&(n=t.maxY-r.maxY),n&&i.attr("y",i.attr("y")-n)}function Bn(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function Nn(i,r){var t=i.getBBox();return(0,y.some)(r,function(e){var n=e.getBBox();return Bn(t,n,2)>0})}var Zt=8,we=function(i){i===void 0&&(i={});var r=(0,Q.__assign)({showTotal:!1,showPercent:!1,padding:[Zt,24,Zt,24],height:i.showPercent?72:54},i);return r},_e;(function(i){i.ACTIVE_ELEMENT="tooltip_indicator_active_element",i.ACTIVE_ELEMENT_BY_X="tooltip_indicator_active_element_by_x"})(_e||(_e={}));var Ve=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.state="selected",t.isSingle=!1,t}return r.prototype.active=function(){var t=q.D9.getCurrentElement(this.context);t.hasState("selected")?this.isSingle?this.setStateByX(t):this.setState(t):this.setStateByX(t)},r.prototype.setState=function(t){var e=this;tn(this.getView(),function(n){n===t?n.hasState(e.state)||n.setState(e.state,!0):n.setState(e.state,!1)}),this.isSingle=!0,this.getView().emit(_e.ACTIVE_ELEMENT,{element:t,isSingle:!0})},r.prototype.setStateByX=function(t){var e=this,n=this.getXField(),a=t.getData()[n];tn(this.getView(),function(o){o.getData()[n]===a?o.hasState(e.state)||o.setState(e.state,!0):o.setState(e.state,!1)}),this.isSingle=!1,this.getView().emit(_e.ACTIVE_ELEMENT_BY_X,{element:t,isSingle:!1})},r.prototype.setStateByField=function(t,e){var n=this,a=this.getView().getXScale().field,o=this.getView().getGroupScales()[0].field;tn(this.getView(),function(s){var u=s.getData();s.setState(n.state,u[a]===t&&(e===void 0||u[o]===e))})},r.prototype.getView=function(){return this.context.view},r.prototype.getXField=function(){var t=this.context.view;return t.getXScale().field},r}(q.Mx);(0,q.zl)("tooltip-indicator",Ve),(0,q.w_)("element-tooltip-indicator",{start:[{trigger:"element:mousemove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"element:touchmove",action:"tooltip-indicator:active",throttle:{wait:50,leading:!0,trailing:!1}}]});var lr=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.onElementActive=function(e){var n=e.element,a=e.isSingle,o=t.view.getXScale(),s=t.view.getXScale().field,u=t.view.getGroupScales()[0].field,h=n.getData(),p=h[s],b=t.getLegendItems(p);t.component.update({items:b,title:{text:o.getText(p)}}),t.component.render(),a&&t.component.selectItem(h[u]),t.curX=p},t.onSelectTooltipIndicatorItem=function(e){t.component&&e&&t.getInteractionAction().setStateByField(t.curX,e)},t}return r.getInteractionRange=function(t,e){var n=we(e),a=n.padding,o=a[0],s=a[2];return new at(t.minX,t.minY,t.width,n.height+o+s)},r.prototype.clear=function(){this.component&&this.component.destroy(),this.container&&this.container.remove(!0),this.component=null,this.container=null},r.prototype.render=function(){var t=this,e=this.view,n=function(){var a=t.view.getXScale(),o=(0,y.last)(a.getTicks()).tickValue,s=t.view.padding;(0,y.isEqual)([0,0,0,0],s)||(t.component?t.updateComponent():(t.createComponent(),t.component.on(Ot.ON_SELECT_ITEM,t.onSelectTooltipIndicatorItem)),t.curX=o,t.component.update({title:{text:a.getText(t.curX)}}),t.component.render(),t.getInteractionAction().setStateByField(o))};e.legend(!1),e.removeInteraction("active-region"),e.removeInteraction("tooltip"),e.interaction("element-tooltip-indicator"),e.on(q.ld.AFTER_PAINT,n),e.on(q.ld.AFTER_RENDER,n),e.on(_e.ACTIVE_ELEMENT,this.onElementActive),e.on(_e.ACTIVE_ELEMENT_BY_X,this.onElementActive)},r.prototype.getInteractionAction=function(){var t=this.view.interactions["element-tooltip-indicator"];return t&&t.context.getAction("tooltip-indicator")},r.prototype.createComponent=function(){var t=we(this.getInteractionConfig()).padding,e=t[0],n=t[1],a=t[2],o=t[3],s=this.getLegendItems(),u=this.getRange(),h=this.view.getXScale(),p=(0,y.last)(h.getTicks()).tickValue;this.container=this.canvas.addGroup(),this.component=new Te({container:this.container,x:u.x+o,y:u.y+e,width:u.width-o-n,height:u.height-e-a,theme:this.getViewLayer().getPlotTheme(),items:s}),this.component.init(),this.getInteractionAction().setStateByField(p)},r.prototype.updateComponent=function(){var t=this.getLegendItems();this.component.update({items:t})},r.prototype.getLegendItems=function(t){var e=this.view,n=e.getData(),a=e.getTheme().defaultColor,o=e.getXScale(),s=e.getYScales()[0],u=t||(0,y.last)(o.getTicks()).tickValue,h=e.getLegendAttributes(),p=h.find(function(V){return V.type==="color"}),b=[],k=e.getGroupScales()[0],R=k.field;k&&k.isCategory&&k.getTicks().forEach(function(V){var Z=V.text,it=V.tickValue,tt=p.mapping(it).join("")||a;b.push({id:it,title:Z,color:tt,values:[]})});var Y=(n==null?void 0:n.filter(function(V){return V[o.field]===u}))||[];return b.forEach(function(V){var Z=Y.find(function(it){return it[R]===V.id});V.values.push({value:s.formatter?s.formatter(Z[s.field]):Z[s.field]})}),b},r}(dn),Or=lr;dn.registerInteraction("slider",ba),dn.registerInteraction("scrollbar",ta),dn.registerInteraction("timeline",jo),dn.registerInteraction("tooltip-indicator",Or);var on=dn,Cn=function(){function i(r){this.innerPaddingComponents=[],this.outerPaddingComponents=[],this.plot=r.plot}return i.prototype.registerPadding=function(r,t,e){t===void 0&&(t="outer"),e===void 0&&(e=!1),t==="inner"?e?this.innerPaddingComponents.find(function(n){return n==r})||this.innerPaddingComponents.push(r):this.innerPaddingComponents.push(r):e?this.outerPaddingComponents.find(function(n){return n==r})||this.outerPaddingComponents.push(r):this.outerPaddingComponents.push(r)},i.prototype.getPaddingComponents=function(r){return r===void 0&&(r="outer"),(r==="outer"?this.outerPaddingComponents:this.innerPaddingComponents)||[]},i.prototype.clear=function(){this.innerPaddingComponents=[],this.outerPaddingComponents=(0,y.filter)(this.outerPaddingComponents,function(r){return r.afterRender})},i.prototype.clearOuterComponents=function(){(0,y.each)(this.outerPaddingComponents,function(r){r.afterRender&&r.destroy()}),this.outerPaddingComponents=[]},i.prototype.getPadding=function(){var r=this.plot.options,t=r.padding?r.padding:this.plot.config.theme.padding;return t==="auto"?[0,0,0,1]:t},i.prototype.processAutoPadding=function(){var r=this._getInnerAutoPadding();this.plot.updateConfig({padding:r}),this.plot.render()},i.prototype.processOuterPadding=function(){this.plot.layerBBox||(this.plot.layerBBox=new at(this.plot.x,this.plot.y,this.plot.width,this.plot.height));var r=this.plot.layerBBox.minX,t=this.plot.layerBBox.maxX,e=this.plot.layerBBox.minY,n=this.plot.layerBBox.maxY;return(0,y.each)(this.outerPaddingComponents,function(a){var o=a.position;if(!a.destroyed){var s=a.getBBox(),u=s.minX,h=s.maxX,p=s.minY,b=s.maxY;b>=e&&b<=n&&o==="top"&&(e=b),p>=e&&p<=n&&o==="bottom"&&(n=p),h>r&&h<=t&&o==="left"&&(r=h),u>=r&&h<=t&&o==="right"&&(t=u)}}),new at(r,e,t-r,n-e)},i.prototype._getInnerAutoPadding=function(){var r,t=this.plot.options,e=this.plot.view,n=e.coordinateBBox,a=n.maxX,o=n.maxY,s=n.minY,u=n.minX,h=this.plot.config.theme.bleeding;(0,y.isArray)(h)&&(0,y.each)(h,function(V,Z){typeof h[Z]=="function"&&(h[Z]=h[Z](t))}),this.bleeding=(0,y.clone)(h);var p=[new at(n.minX,n.minY,n.width,n.height)];((r=this.plot.config.coordinate)===null||r===void 0?void 0:r.type)==="cartesian"&&this._getCartesianAxis(e,p[0],p);var b=this._mergeBBox(p);this._getLegend(e,b,p),b=this._mergeBBox(p);var k=this.innerPaddingComponents;(0,y.each)(k,function(V){var Z=V,it=Z.getBBox();p.push(it)}),b=this._mergeBBox(p);var R=[s-b.minY+this.bleeding[0],b.maxX-a+this.bleeding[1],b.maxY-o+this.bleeding[2],u-b.minX+this.bleeding[3]],Y=this._getPanel(e);return R[0]+=Y[0],R[1]+=Y[1],R[2]+=Y[2],R[3]+=Y[3],R},i.prototype._getCartesianAxis=function(r,t,e){var n=Nt(r),a=r.getCoordinate().isTransposed;(0,y.each)(n,function(o){if(o.get("group").get("children").length!==0){var s=o.get("position"),u=o.getLayoutBBox(),h=u.minX,p=u.minY,b=u.width,k=u.height;a?s==="bottom"?e.push(new at(t.minX-b,p,b,k)):s==="left"?e.push(new at(h,t.maxY,b,k)):s==="top"&&e.push(new at(t.maxX,p,b,k)):s==="left"?e.push(new at(t.minX-b,p,b,k)):s==="bottom"?e.push(new at(h,t.maxY,b,k)):s==="right"&&e.push(new at(t.maxX,p,b,k))}})},i.prototype._getLegend=function(r,t,e){var n=ee(r);(0,y.each)(n,function(a){var o=a.get("position").split("-")[0],s=a.getLayoutBBox(),u=s.minX,h=s.minY,p=s.width,b=s.height;o==="top"?e.push(new at(u,t.minY-b,p,b)):o==="bottom"?e.push(new at(u,t.maxY,p,b)):o==="left"?e.push(new at(t.minX-p,h,p,b)):e.push(new at(t.maxX,h,p,b))})},i.prototype._getPanel=function(r){var t=[],e=r.geometries;(0,y.each)(e,function(Y){Y.labelsContainer&&t.push(Y.labelsContainer)});var n=Infinity,a=-Infinity,o=Infinity,s=-Infinity;(0,y.each)(t,function(Y){var V=Y.get("children");V.forEach(function(Z){if(!(Z.type==="group"&&Z.get("children").length===0)){var it=Z.getBBox();it.minX<n&&(n=it.minX),it.maxX>a&&(a=it.maxX),it.minY<o&&(o=it.minY),it.maxY>s&&(s=it.maxY)}})});var u=r.coordinateBBox,h=Math.max(a-parseFloat(u.maxX),0);if(h>0){var p=u.width/(u.width+h);h*=p}var b=Math.max(parseFloat(u.minX)-n,0);if(b>0){var p=u.width/(u.width+b);b*=p}var k=Math.max(parseFloat(u.minY)-o,0);if(k>0){var p=u.height/(u.height+k);k*=p}var R=Math.max(s-parseFloat(u.maxY),0);if(R>0){var p=u.height/(u.height+R);R*=p}return[k,h,R,b]},i.prototype._mergeBBox=function(r){var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity;return(0,y.each)(r,function(o){var s=o;t=Math.min(s.minX,t),e=Math.max(s.maxX,e),n=Math.min(s.minY,n),a=Math.max(s.maxY,a)}),{minX:t,maxX:e,minY:n,maxY:a}},i}(),Li=Cn,ra="#5B8FF9",na=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"],Ko=["#5B8FF9","#BDD2FD","#5AD8A6","#BDEFDB","#5D7092","#C2C8D5","#F6BD16","#FBE5A2","#E8684A","#F6C3B7","#6DC8EC","#B6E3F5","#9270CA","#D3C6EA","#FF9D4D","#FFD8B8","#269A99","#AAD8D8","#FF99C3","#FFD6E7"],Hs=function(i){return i&&i.split("-")[0]==="top"?12:24},yo=function(i){var r=i.title&&i.title.visible,t=i.description&&i.description.visible;return r||t?12:24},Jl=function(i){return(0,y.some)(i.interactions||[],function(r){return(r.type==="slider"||r.type==="scrollbar")&&(r.cfg&&r.cfg.type)!=="vertical"})?8:24},ql={width:400,height:400,bleeding:[yo,24,Jl,24],padding:"auto",defaultColor:ra,colors:na,colors_20:Ko,title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fill:"black",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Hs,24],fontFamily:"PingFang SC",fontSize:12,fill:"grey",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(0,0,0,0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(0, 0, 0, 0.15)",lineWidth:1,lineDash:[0,0]}}},line:{visible:!1,style:{stroke:"rgba(0, 0, 0, 0.45)",lineWidth:1}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(0, 0, 0, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},circle:{autoHideLabel:!1,grid:{line:{style:{lineDash:null,lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}}},line:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}},tickLine:{style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12}}},radius:{label:{textStyle:{fill:"rgba(0,0,0,0.45)",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],margin:[0,24,24,24]},label:{offset:12,textStyle:{fill:"#595959"},style:{fill:"#595959",stroke:"#ffffff",lineWidth:2}},tooltip:{"g2-tooltip":{boxShadow:"0px 0px 8px rgba(0,0,0,0.15)"},offset:10},components:{legend:{margin:[0,24,24,24]},tooltipIndicator:{title:{style:{fontSize:14,fill:"#262626"}},line:{style:{opacity:1},inactiveStyle:{opacity:.3}},itemTitle:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemName:{style:{fontSize:12,fill:"#8C8C8C",opacity:1},inactiveStyle:{opacity:.3}},itemValue:{style:{fontSize:14,fontWeight:"bold",fill:"#595959",opacity:1},inactiveStyle:{opacity:.3}}}}},Vf={backgroundStyle:{fill:"#262626"},defaultColor:"#5B8FF9",width:400,height:400,bleeding:[yo,24,Jl,24],padding:"auto",title:{padding:[24,24,24,24],fontFamily:"PingFang SC",fontSize:18,fontWeight:"bold",fill:"rgba(255,255,255,0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:20,alignWithAxis:!1},description:{padding:[10,24,Hs,24],fontFamily:"PingFang SC",fontSize:12,fill:"rgba(255, 255, 255, 0.65)",stroke:"rgba(0,0,0,0.95)",textAlign:"left",textBaseline:"top",lineHeight:16,alignWithAxis:!1},axis:{y:{visible:!0,position:"left",autoRotateTitle:!0,grid:{visible:!0,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:1}},tickLine:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5,length:4}},label:{visible:!0,offset:8,autoRotate:!1,autoHide:!0,textStyle:{fill:"rgba(255, 255, 255, 0.45)",fontSize:12}},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12,textBaseline:"bottom"}}},x:{visible:!0,position:"bottom",autoRotateTitle:!1,grid:{visible:!1,line:{style:{stroke:"rgba(255, 255, 255, 0.15)",lineWidth:1,lineDash:null}}},line:{visible:!1,style:{stroke:"rgba(255, 255, 255, 0.45)"}},tickLine:{visible:!0,style:{length:4,stroke:"rgba(255, 255, 255, 0.45)",lineWidth:.5}},label:{visible:!0,textStyle:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12},offset:16,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12,style:{fill:"rgba(255, 255, 255, 0.65)",fontSize:12}}},circle:{autoRotateTitle:!0,grid:{style:{lineDash:null,lineWidth:1,stroke:"#E3E8EC"}},line:{style:{lineWidth:1,stroke:"#BFBFBF"}},tickLine:{style:{lineWidth:1,stroke:"#bdc8d3",length:4,alignWithLabel:!0}},label:{offset:16,textStyle:{fill:"#a0a4aa",fontSize:12},autoRotate:!0,autoHide:!0},title:{offset:12,style:{fill:"#767b84",fontSize:12}}},radius:{label:{offset:12,textStyle:{fill:"#a0a4aa",fontSize:12}}}},legend:{flipPage:!1,position:"bottom",innerPadding:[16,16,16,16],title:{visible:!1,style:{fill:"#bdc8d3"}},text:{style:{fill:"#bdc8d3"}}},label:{offset:12,textStyle:{fill:"rgba(255, 255, 255, 0.65)"},style:{fill:"rgba(255, 255, 255, 0.65)",lineWidth:1}},components:{tooltip:{domStyles:{"g2-tooltip":{backgroundColor:"rgba(33,33,33, 0.95)",boxShadow:"0px 0px 8px rgba(0,0,0,0.65)",color:"rgba(255, 255, 255, 0.65)"}}}}},Vs={default:ql,dark:Vf};function Wf(i,r){var t=Di();Vs[i.toLowerCase()]=deepMix({},t,r)}function Di(i){i===void 0&&(i="default");var r=Vs[i.toLowerCase()];return r||(console.warn("error in theme: Can't find the theme named %s. Please register theme first.",i),ql)}var Ws={};function _o(i,r){var t={lineStyle:"line.line",columnStyle:"interval.rect",pointStyle:"point.circle"},e={};i==="area"&&(t={areaStyle:"area.area",lineStyle:"area.line",pointStyle:"point.circle"});var n={};return(0,y.each)(r,function(a,o){var s;if((0,y.has)(t,o)){var u=t[o];(0,y.each)(a,function(h,p){(0,y.set)(n,u+"."+[p==="normal"?"default":p==="disable"?"inactive":p]+".style",h)})}else e=(0,y.deepMix)({},e,(s={},s[o]=a,s))}),(0,y.isEmpty)(n)||(e=(0,y.deepMix)({},e,{geometries:n})),e}function Xi(i,r){Ws[i.toLowerCase()]=_o(i,r)}function ja(i){return Ws[i.toLowerCase()]||{}}function jf(i){var r=(0,y.clone)(i);return r.legend||(r.legend={}),r}var js={axis:{x:{category:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"textWrapper",option:{lineNumber:2}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}},linear:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"nodesResampling",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"robustAbbrevaite",option:{unit:"thousand",decimal:1,abbreviateBy:"end"}},{name:"textHide"}]}},dateTime:{constraints:[{name:"elementDist"}],rules:{elementDist:[{name:"datetimeStringAbbrevaite"},{name:"nodesResamplingByAbbrevate",option:{keep:["end"]}},{name:"textRotation",option:{degree:45}},{name:"textRotation",option:{degree:90}},{name:"nodesResampling"},{name:"nodesResampling"},{name:"textHide"}]}}},y:{linear:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"digitsAbbreviate"},{name:"textHide"}]}},category:{constraints:[{name:"elementDistVertical"},{name:"elementWidth"}],rules:{elementDistVertical:[{name:"nodesResampling"},{name:"textHide"}],elementWidth:[{name:"textAbbreviate",option:{abbreviateBy:"end"}},{name:"textHide"}]}}}}},tu={default:js};function vs(i,r){tu[i.toLowerCase()]=(0,y.deepMix)({},js,r)}function Ia(i){var r=tu[i.toLowerCase()];return r||js}var yi=(0,q.gh)(),Us=function(){function i(){}return i.getGlobalTheme=function(r){return(0,y.isString)(r)?Di(r):(0,y.deepMix)({},Di(),r)},i.prototype.getPlotTheme=function(r,t){var e=r.theme;return(0,y.isString)(e)?(0,y.deepMix)({},Di(e),ja(t)):(0,y.deepMix)({},Di(),ja(t),_o(t,e))},i.prototype.getTheme=function(r,t){var e=jf(this.getPlotTheme(r,t)),n=(0,y.deepMix)({},yi,e);return n},i.prototype.getResponsiveTheme=function(r){return Ia(r)||Ia("default")},i}(),Zs=Us,eu=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.interactions=[],e.labels=[],e.options=e.getOptions(t),e.initialOptions=(0,y.deepMix)({},e.options),e.paddingController=new Li({plot:e}),e.stateController=new Mt({plot:e}),e.themeController=new Zs,e}return r.getDefaultOptions=function(){return{renderer:"canvas",title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"},padding:"auto",legend:{visible:!0,position:"bottom-center"},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20},xAxis:{visible:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},label:{visible:!1},interactions:[{type:"tooltip"},{type:"legend-active"},{type:"legend-filter"}],animation:!0}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t),o=(0,y.reduce)((0,y.flatten)((0,y.map)([n,a,(0,y.hasKey)(t,"interactions")?t:e],function(s){return(0,y.get)(s,"interactions",[])})),function(s,u){var h=(0,y.findIndex)(s,function(p){return p.type===u.type});return h>=0&&s.splice(h,1),(0,Q.__spreadArrays)(s,[u])},[]);return(0,y.deepMix)({},n,a,e,t,{interactions:o})},r.prototype.beforeInit=function(){this.emit(Zn.BEFORE_INIT),i.prototype.beforeInit.call(this)},r.prototype.init=function(){var t=this;i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.config={data:this.processData(this.options.data),scales:{},legends:{},tooltip:{showTitle:!0},axes:{},coordinate:{type:"cartesian"},geometries:[],annotations:[],interactions:[],theme:this.theme,panelRange:{},animate:{},views:[]},this.paddingController.clear(),this.drawTitle(),this.drawDescription(),this.interaction(),this.coord(),this.scale(),this.axis(),this.tooltip(),this.legend(),this.addGeometry(),this.annotation(),this.animation(),this.viewRange=this.getViewRange();var e=this.viewRangeToRegion(this.viewRange);this.view=new q.G7({parent:null,canvas:this.canvas,backgroundGroup:this.container.addGroup(),middleGroup:this.container.addGroup(),foregroundGroup:this.container.addGroup(),padding:this.paddingController.getPadding(),theme:this.theme,options:this.config,limitInPlot:this.isLimitInPlot(),region:e}),this.applyInteractions(),this.view.on(q.ld.AFTER_RENDER,function(){t.afterRender()})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this),!(!this.view||this.view.destroyed)&&(this.options.padding!=="auto"&&this.parseEvents(),this.emit(Zn.AFTER_INIT))},r.prototype.afterRender=function(){var t,e;if(!(!this.view||this.view.destroyed)){var n=this.options,a=n.padding?n.padding:this.config.theme.padding;n.defaultState&&a!=="auto"&&this.stateController.defaultStates(n.defaultState),a==="auto"&&this.paddingController.processAutoPadding(),((e=(t=n.tooltip)===null||t===void 0?void 0:t.custom)===null||e===void 0?void 0:e.onChange)&&n.padding!=="auto"&&this.customTooltip()}},r.prototype.render=function(){this.emit(Zn.BEFORE_RENDER),i.prototype.render.call(this);var t=this.options.data;(0,y.isEmpty)(t)||this.view.render(),this.emit(Zn.AFTER_RENDER)},r.prototype.repaint=function(){this.canvas&&this.canvas.draw()},r.prototype.getScaleByField=function(t){return this.view.getScaleByField(t)},r.prototype.getXScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.getYScale=function(){var t=this.options.yField;if(t)return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options;if((0,y.contains)(t,"colorField"))return this.view.getScaleByField(t)},r.prototype.getShapes=function(){var t=this.view.geometries,e={};return(0,y.each)(t,function(n){var a=n.type;e[a]=n.getShapes()}),e},r.prototype.destroy=function(){this.doDestroy(),i.prototype.destroy.call(this)},r.prototype.updateConfig=function(t){this.doDestroy(),!t.padding&&this.initialOptions.padding&&this.initialOptions.padding==="auto"&&(t.padding="auto"),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){this.emit(Zn.BEFORE_CHANGE_DATA);var e=(0,y.isEmpty)(this.options.data);this.options.data=this.processData(t),e?(this.options.padding=this.initialOptions.padding||"auto",this.view.data(this.options.data),this.view.render()):this.view.changeData(this.options.data),this.emit(Zn.AFTER_CHANGE_DATA)},r.prototype.getPlot=function(){return this.view},r.prototype.getLabels=function(){return this.labels},r.prototype.getTheme=function(){return this.theme?this.theme:this.themeController.getTheme(this.options,this.type)},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme(this.type)},r.prototype.getPlotTheme=function(){return this.themeController.getPlotTheme(this.options,this.type)},r.prototype.getInteractions=function(){return this.interactions},r.prototype.bindStateManager=function(t,e){this.stateController.bindStateManager(t,e)},r.prototype.setActive=function(t,e){this.stateController.setState({type:"active",condition:t,style:e})},r.prototype.setSelected=function(t,e){this.stateController.setState({type:"selected",condition:t,style:e})},r.prototype.setDisable=function(t,e){this.stateController.setState({type:"disable",condition:t,style:e})},r.prototype.setDefault=function(t,e){this.stateController.setState({type:"default",condition:t,style:e})},r.prototype.getData=function(t,e){return this.processData((this.options.data||[]).slice(t,e))},r.prototype.processData=function(t){return t},r.prototype.scale=function(){var t=(0,y.mapValues)(this.config.scales,function(n){var a=n.type;return a?{type:a}:{}}),e=(0,y.deepMix)({},this.config.scales,this.options.meta||{},t);this.setConfig("scales",e)},r.prototype.axis=function(){var t=Ln("axis",{plot:this,dim:"x"}),e=Ln("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.tooltip=function(){var t,e;if(this.options.tooltip.visible===!1){this.setConfig("tooltip",!1);return}var n=(0,y.get)(this.options,"tooltip");((t=n.custom)===null||t===void 0?void 0:t.container)&&(n.container=n.custom.container),((e=n.custom)===null||e===void 0?void 0:e.customContent)&&(n.customContent=n.custom.customContent),this.setConfig("tooltip",(0,y.deepMix)({},n)),(0,y.deepMix)(this.config.theme.tooltip,this.options.tooltip.domStyles)},r.prototype.createTooltipContainer=function(){var t=document.createElement("div");return t.className="g2-tooltip",t},r.prototype.customTooltip=function(){var t=this.options.tooltip.custom,e;t.container&&(e=(0,y.isString)(t.container)?document.getElementById(t.container):t.container),e||(e=this.createTooltipContainer()),this.view.on("tooltip:show",function(n){(t==null?void 0:t.onChange)&&t.onChange(e,n)}),this.view.hideTooltip(),this.view.on("tooltip:change",function(n){t.onChange(e,n)})},r.prototype.getLegendPosition=function(t){var e=t.split("-");return e&&e.length>1&&e[1]==="center"?e[0]:t},r.prototype.legend=function(){var t;if(this.options.legend.visible===!1){this.setConfig("legends",!1);return}var e=(0,y.deepMix)({},this.theme.legend,this.options.legend),n={position:this.getLegendPosition((0,y.get)(e,"position")),offsetX:(0,y.get)(e,"offsetX"),offsetY:(0,y.get)(e,"offsetY"),flipPage:(0,y.get)(e,"flipPage"),marker:(0,y.get)(e,"marker"),title:((t=e.title)===null||t===void 0?void 0:t.visible)?(0,y.get)(e,"title"):null,itemName:(0,y.get)(e,"text")};this.setConfig("legends",n)},r.prototype.annotation=function(){var t=this,e=[];this.config.coordinate.type==="cartesian"&&this.options.guideLine&&(0,y.each)(this.options.guideLine,function(n){var a=Ln("guideLine",{plot:t,cfg:n});e.push(a)}),this.setConfig("annotations",e)},r.prototype.interaction=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e;(0,y.each)(n,function(a){var o=a.type;if(o==="slider"||o==="scrollbar"){var s={label:{autoHide:!0,autoRotate:!1}};t.options.xAxis=(0,y.deepMix)({},t.options.xAxis,s)}t.setConfig("interaction",a)})},r.prototype.animation=function(){this.options.animation===!1&&this.setConfig("animate",!1)},r.prototype.applyInteractions=function(){var t=this,e=at.fromBBoxObject(this.layerBBox),n=this.title||this.description,a=new at(e.minX,e.minY,e.width,n?n.getBBox().maxY:0);e=e.cut(a,zt.DIRECTION.TOP);var o=this.options.interactions,s=o===void 0?[]:o;this.interactions&&this.interactions.forEach(function(u){u.destroy()}),this.interactions=[],s.forEach(function(u){var h=on.getInteraction(u.type,t.type);if(h){var p=new h({view:t.view},t,h.getInteractionRange(e,u.cfg),u.cfg);p.render(),t.interactions.push(p)}})},r.prototype.setConfig=function(t,e){if(t==="geometry"){this.config.geometries.push(e);return}if(t==="interaction"){this.config.interactions.push(e);return}if(e===!1){this.config[t]=!1;return}(0,y.assign)(this.config[t],e)},r.prototype.parseEvents=function(t){var e=this,n=this.options;if(n.events){i.prototype.parseEvents.call(this,n.events);var a=t?t.EVENT_MAP:pt;(0,y.each)(n.events,function(o,s){if((0,y.isFunction)(o)){var u=a[s]||s,h=o;Lt(e,u,h)}})}},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),ut(t.title)){var n=this.width,a=this.config.theme,o=new Sr({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,y.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:ut(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o,this.paddingController.registerPadding(o,"outer")}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),ut(t.description)){var n=this.width,a=this.config.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var u=new Sr({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,y.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=u,this.paddingController.registerPadding(u,"outer")}},r.prototype.doRenderLabel=function(t,e){(0,y.each)(this.labels,function(s){s.destroy()}),this.labels=[];var n={layer:this,container:t.labelsContainer,geometry:t,label:e},a=Wn(e.type);if(a){var o=new a(n);o.init(),o.render(),this.labels.push(o)}},r.prototype.doDestroy=function(){this.doDestroyInteractions(),this.doDestroyLabels(),this.view.destroyed||this.view.destroy()},r.prototype.doDestroyInteractions=function(){this.interactions&&this.interactions.forEach(function(t){t.destroy()}),this.interactions=[]},r.prototype.doDestroyLabels=function(){(0,y.each)(this.labels,function(t){t.destroy()}),this.labels=[]},r.prototype.getViewRange=function(){var t=this,e=this.options.interactions,n=e===void 0?[]:e,a=this.paddingController.processOuterPadding();n.forEach(function(s){var u=on.getInteraction(s.type,t.type),h=u&&u.getInteractionRange(a,s.cfg),p="";h&&(h.maxY===a.maxY&&h.minY>a.minY?p="bottom":h.maxX===a.maxX&&h.minX>a.minX?p="right":h.minX===a.minX&&h.maxX>a.maxX?p="left":h.minY===a.minY&&h.maxY<a.maxY&&(p="top"),t.paddingController.registerPadding({interaction:s.type,name:s.type,getBBox:function(){return h},position:p},"outer"))});var o=this.paddingController.processOuterPadding();return o},r.prototype.isLimitInPlot=function(){var t=this.options.yAxis;return!!((0,y.hasKey)(t,"max")||(0,y.hasKey)(t,"min")||(0,y.hasKey)(t,"maxLimit")||(0,y.hasKey)(t,"minLimit"))},r.prototype.viewRangeToRegion=function(t){var e=this,n=e.x,a=e.y,o=e.width,s=e.height,u={x:0,y:0},h={x:1,y:1};return u.x=t.minX/(n+o),u.y=t.minY/(a+s),h.x=t.maxX/(n+o),h.y=t.maxY/(a+s),{start:u,end:h}},r}(Pt),qn=eu,Ui=v(53918),Uf=v(76374),Ua=function(){function i(r){var t=this;this.onResize=(0,y.debounce)(function(){if(!t.plot.destroyed){var a=t.getCanvasSize(),o=a.width,s=a.height;t.width===o&&t.height===s||(t.width=o,t.height=s,t.plot.updateConfig({width:o,height:s}),t.plot.render())}},300);var e=r.containerDOM,n=r.plot;this.containerDOM=e,this.plot=n,this.init()}return i.prototype.getCanvasSize=function(){var r=Di(),t=this.plot.width?this.plot.width:r.width,e=this.plot.height?this.plot.height:r.height;return this.plot.forceFit&&(t=this.containerDOM.offsetWidth?this.containerDOM.offsetWidth:t,e=this.containerDOM.offsetHeight?this.containerDOM.offsetHeight:e),{width:t,height:e}},i.prototype.getCanvasDOM=function(){return this.canvas.get("container")},i.prototype.updateCanvasSize=function(){var r=this.getCanvasSize(),t=r.width,e=r.height;this.width=t,this.height=e,this.canvas.changeSize(t,e)},i.prototype.updateCanvasTheme=function(){var r=this.plot.theme,t=Zs.getGlobalTheme(r),e=(0,y.get)(t,"backgroundStyle.fill");e&&this.updateCanvasStyle({backgroundColor:e})},i.prototype.updateCanvasStyle=function(r){(0,Ui.Z)(this.getCanvasDOM(),r),(0,Ui.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},i.prototype.destroy=function(){this.resizeObserver&&(this.resizeObserver.unobserve(this.containerDOM),this.resizeObserver.disconnect(),this.containerDOM=null),this.canvas.destroy()},i.prototype.bindForceFit=function(){var r=this.plot.forceFit;r&&(this.resizeObserver=new Uf.Z(this.onResize),this.resizeObserver.observe(this.containerDOM))},i.prototype.init=function(){this.initGCanvas(),this.bindForceFit(),this.updateCanvasStyle({position:"relative"})},i.prototype.initGCanvas=function(){var r=this.plot,t=r.renderer,e=t===void 0?"canvas":t,n=r.pixelRatio,a=r.localRefresh,o=a===void 0?!1:a,s=this.getCanvasSize(),u=s.width,h=s.height,p=e==="canvas"?q.Xz:q.Wj;this.canvas=new p({localRefresh:o,container:this.containerDOM,width:u,height:h,pixelRatio:n}),this.width=u,this.height=h,this.updateCanvasTheme()},i}(),ds=Ua;function Ks(i,r){return!!(i&&r&&i===r)}function ru(i,r){return i.x>=r.minX&&i.x<=r.maxX&&i.y>=r.minY&&i.y<=r.maxY}var up=function(){function i(r){this.plot=r.plot,this.canvas=r.canvas,this.eventHandlers=[]}return i.prototype.bindEvents=function(){this.addEvent(this.canvas,"mousedown",(0,y.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"mousemove",(0,y.wrapBehavior)(this,"onMove")),this.addEvent(this.canvas,"mouseup",(0,y.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"click",(0,y.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"dblclick",(0,y.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"contextmenu",(0,y.wrapBehavior)(this,"onEvents")),this.addEvent(this.canvas,"wheel",(0,y.wrapBehavior)(this,"onEvents"))},i.prototype.clearEvents=function(){var r=this.eventHandlers;(0,y.each)(r,function(t){t.target.off(t.type,t.handler)})},i.prototype.addEvent=function(r,t,e){r.on(t,e),this.eventHandlers.push({target:r,type:t,handler:e})},i.prototype.onEvents=function(r){var t=this.getEventObj(r),e=r.target;!this.isShapeInView(e)&&e.name&&this.plot.emit(e.name+":"+r.type,r),this.plot.emit(""+r.type,t);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,t,r.type)},i.prototype.onMove=function(r){var t=r.target,e=this.getEventObj(r);!this.isShapeInView(t)&&t.name&&(this.plot.emit(t.name+":"+r.type,e),this.lastShape&&!Ks(t,this.lastShape)&&(this.lastShape&&this.plot.emit(this.lastShape.name+":mouseleave",e),this.plot.emit(t.name+":mouseenter",e)),this.lastShape=t),this.plot.emit("mousemove",e);var n=this.plot.getLayers();n.length>0&&this.onLayerEvent(n,e,"mousemove")},i.prototype.isShapeInView=function(r){for(var t=["frontgroundGroup","backgroundGroup","panelGroup"],e=r.get("parent");e;){var n=e.get("name");if(n&&(0,y.contains)(t,n))return!0;e=e.get("parent")}return!1},i.prototype.getEventObj=function(r){var t={clientX:r.clientX,clientY:r.clientY,x:r.x,y:r.y,plot:this.plot,data:r.data?r.data.data:null,canvas:this.canvas,target:r.target,gEvent:r};return t},i.prototype.onLayerEvent=function(r,t,e){var n=this;(0,y.each)(r,function(a){var o=a.getGlobalBBox();if(ru({x:t.x,y:t.y},o)){a.emit(""+e,t);var s=a.layers;s.length>0&&n.onLayerEvent(s,t,e)}})},i}(),Zf=up,nu={};function An(i,r){nu[i.toLowerCase()]=r}function Kf(i){return nu[i.toLowerCase()]}var $f=function(i){(0,Q.__extends)(r,i);function r(t,e){var n=i.call(this)||this;return n.containerDOM=typeof t=="string"?document.getElementById(t):t,n.forceFit=(0,y.isNil)(e.forceFit)?(0,y.isNil)(e.width)&&(0,y.isNil)(e.height):e.forceFit,n.renderer=e.renderer||"canvas",n.pixelRatio=e.pixelRatio||null,n.width=e.width,n.height=e.height,n.theme=e.theme,n.localRefresh=e.localRefresh,n.canvasController=new ds({containerDOM:n.containerDOM,plot:n}),n.width=n.canvasController.width,n.height=n.canvasController.height,n.canvas=n.canvasController.canvas,n.layers=[],n.destroyed=!1,n.createLayers(e),n.eventController=new Zf({plot:n,canvas:n.canvasController.canvas}),n.eventController.bindEvents(),n.parseEvents(e),n}return r.prototype.destroy=function(){this.eachLayer(function(t){t.destroy()}),this.canvasController.destroy(),this.eventController.clearEvents(),this.layers=[],this.destroyed=!0},r.prototype.repaint=function(){this.canvasController.canvas.draw()},r.prototype.updateConfig=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof qn&&a.updateConfig(t)});else{var n=this.layers[0];n instanceof Pt&&n.updateConfig(t)}t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.theme&&(this.theme=t.theme),this.canvasController.updateCanvasSize(),this.canvasController.updateCanvasTheme()},r.prototype.changeData=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof qn&&a.changeData(t)});else{var n=this.layers[0];n instanceof qn&&n.changeData(t)}},r.prototype.getScaleByField=function(t){return this.layers[0].getScaleByField(t)},r.prototype.getXScale=function(){return this.layers[0].getXScale()},r.prototype.getYScale=function(){return this.layers[0].getYScale()},r.prototype.getColorScale=function(){return this.layers[0].getColorScale()},r.prototype.getPlotTheme=function(){var t=this.layers[0];return t.getPlotTheme()},r.prototype.getData=function(){var t=this.layers[0];return t.getData()},r.prototype.bindStateManager=function(t,e){this.eachLayer(function(n){n instanceof qn&&n.bindStateManager(t,e)})},r.prototype.setActive=function(t,e){this.eachLayer(function(n){n instanceof qn&&n.setActive(t,e)})},r.prototype.setSelected=function(t,e){this.eachLayer(function(n){n instanceof qn&&n.setSelected(t,e)})},r.prototype.setDisable=function(t,e){this.eachLayer(function(n){n instanceof qn&&n.setDisable(t,e)})},r.prototype.setDefault=function(t,e){this.eachLayer(function(n){n instanceof qn&&n.setDefault(t,e)})},r.prototype.getView=function(){return this.layers[0].view},r.prototype.getLayer=function(t){return t===void 0&&(t=0),this.layers[t]},r.prototype.getCanvas=function(){return this.canvasController.canvas},r.prototype.getLayers=function(){return this.layers},r.prototype.render=function(){this.eachLayer(function(t){return t.render()})},r.prototype.eachLayer=function(t){(0,y.each)(this.layers,t)},r.prototype.addLayer=function(t){var e=(0,y.findIndex)(this.layers,function(n){return n===t});e<0&&this.layers.push(t)},r.prototype.createLayers=function(t){if(!t.layers){if(t.type){var e=Kf(t.type),n=(0,y.deepMix)({},t,{canvas:this.canvasController.canvas,x:0,y:0,width:this.width,height:this.height}),a=new e(n);this.addLayer(a)}}},r.prototype.parseEvents=function(t){var e=this,n=(0,y.keys)(At);t.events&&(0,y.each)(t.events,function(a,o){if((0,y.contains)(n,o)&&(0,y.isFunction)(a)){var s=At[o]||o,u=a;e.on(s,u)}})},r}(qt.default),un=$f,Qf=function(){function i(r){(0,y.assign)(this,r),this.init()}return i.prototype.init=function(){this.config={type:this.type,position:{fields:this.positionFields}}},i}(),$o=Qf,mo=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"area",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls||!1},t.smooth&&(this.config.shape={values:["smooth"]}),(this._getColorMappingField()||t.color)&&this.parseColor(),(t.areaStyle||t.area&&t.area.style)&&this.parseStyle()},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();if(n&&(e.fields=n),(0,y.has)(t,"color")){var a=t.color;(0,y.isString)(a)?e.values=[a]:(0,y.isFunction)(a)?e.callback=a:(0,y.isArray)(a)&&(n?e.values=a:a.length>0&&(e.values=[a[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.areaStyle?t.areaStyle:t.area.style,n={};(0,y.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,y.get)(t,o))return[t[o]]}},r}($o),ei=mo,li=v(7124);function Jf(i,r){var t=[];if(i.length){for(var e=0,n=i.length;e<n;e+=1){var a=i[e],o=e===0?"M":"L";t.push([o,a.x,a.y])}r&&t.push(["Z"])}return t}function iu(i,r){var t=i.getCenter(),e=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));return e}function $s(i,r){for(var t=[i[0]],e=1,n=i.length;e<n;e=e+2){var a=r.convertPoint({x:i[e],y:i[e+1]});t.push(a.x,a.y)}return t}function qf(i,r,t){var e=t.isTransposed,n=t.startAngle,a=t.endAngle,o={x:i[1],y:i[2]},s={x:r[1],y:r[2]},u=[],h=e?"y":"x",p=Math.abs(s[h]-o[h])*(a-n),b=s[h]>=o[h]?1:0,k=p>Math.PI?1:0,R=t.convertPoint(s),Y=iu(t,R);if(Y>=.5)if(p===Math.PI*2){var V={x:(s.x+o.x)/2,y:(s.y+o.y)/2},Z=t.convertPoint(V);u.push(["A",Y,Y,0,k,b,Z.x,Z.y]),u.push(["A",Y,Y,0,k,b,R.x,R.y])}else u.push(["A",Y,Y,0,k,b,R.x,R.y]);return u}function Qs(i){each(i,function(r,t){var e=r;if(e[0].toLowerCase()==="a"){var n=i[t-1],a=i[t+1];a&&a[0].toLowerCase()==="a"?n&&n[0].toLowerCase()==="l"&&(n[0]="M"):n&&n[0].toLowerCase()==="a"&&a&&a[0].toLowerCase()==="l"&&(a[0]="M")}})}var au=function(i,r,t,e){var n=[],a,o,s=!!e,u,h;if(s){u=[Infinity,Infinity],h=[-Infinity,-Infinity];for(var p=0,b=i.length;p<b;p++){var k=i[p];u=li.min([0,0],u,k),h=li.max([0,0],h,k)}u=li.min([0,0],u,e[0]),h=li.max([0,0],h,e[1])}for(var p=0,R=i.length;p<R;p++){var k=i[p];if(t)a=i[p?p-1:R-1],o=i[(p+1)%R];else if(p===0||p===R-1){n.push(k);continue}else a=i[p-1],o=i[p+1];var Y=[0,0];Y=li.sub(Y,o,a),Y=li.scale(Y,Y,r);var V=li.distance(k,a),Z=li.distance(k,o),it=V+Z;it!==0&&(V/=it,Z/=it);var tt=li.scale([0,0],Y,-V),_t=li.scale([0,0],Y,Z),It=li.add([0,0],k,tt),Ht=li.add([0,0],k,_t);s&&(It=li.max([0,0],It,u),It=li.min([0,0],It,h),Ht=li.max([0,0],Ht,u),Ht=li.min([0,0],Ht,h)),n.push(It),n.push(Ht)}return t&&n.push(n.shift()),n};function Js(i,r,t){for(var e=!!r,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=au(n,.4,e,t),u=n.length,h=[],p,b,k,a=0;a<u-1;a++)p=s[a*2],b=s[a*2+1],k=n[a+1],h.push(["C",p[0],p[1],b[0],b[1],k[0],k[1]]);return e&&(p=s[u],b=s[u+1],k=n[0],h.push(["C",p[0],p[1],b[0],b[1],k[0],k[1]])),h}function Oi(i,r){return Jf(i,r)}function Qo(i,r,t){var e=[],n=i[0],a=null;if(i.length<=2)return Oi(i,r);(0,y.each)(i,function(u){(!a||!(a.x===u.x&&a.y===u.y))&&(e.push(u.x),e.push(u.y),a=u)});var o=t||[[0,0],[1,1]],s=Js(e,r,o);return s.unshift(["M",n.x,n.y]),s}function hp(i,r){return iu(i,r)}function tc(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function fp(i,r){var t=[];return each(r,function(e){var n=e[0];switch(n.toLowerCase()){case"m":case"l":case"c":t.push($s(e,i));break;case"z":default:t.push(e);break}}),t}function ou(i,r){var t=[],e,n,a,o;return each(r,function(s,u){var h=s[0];switch(h.toLowerCase()){case"m":case"c":case"q":t.push($s(s,i));break;case"l":e=r[u-1],n=s,a=i.isTransposed,o=a?e[e.length-2]===n[1]:e[e.length-1]===n[2],o?t=t.concat(qf(e,n,i)):t.push($s(s,i));break;case"z":default:t.push(s);break}}),Qs(t),t}(0,q.Fj)("area","miniArea",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=su(i,this,!1),n=(0,y.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),a=r.addShape("path",{attrs:{path:e,fill:ec(i.color||Di().defaultColor),opacity:t||.4},style:n});return a}}),(0,q.Fj)("area","miniAreaSmooth",{draw:function(i,r){var t=i.style?i.style.opacity:null,e=su(i,this,!0),n=r.addShape("path",{attrs:{path:e,fill:ec(i.color||Di().defaultColor),opacity:t||.5}});return n}});function su(i,r,t){var e=[[0,0],[1,1]],n=[],a=[];(0,y.each)(i.points,function(h){n.push(h[1]),a.push(h[0])}),a=r.parsePoints(a.reverse()),n=je(r.parsePoints(n));var o=t?Qo(n,!1,e):lu(n),s=lu(a);s[0][0]="L";var u=o.concat(s);return u}function lu(i){for(var r=[],t=0;t<i.length;t++){var e=i[t],n=t===0?"M":"L";r.push([n,e.x,e.y])}return r}function ec(i){return"l(90) 0:"+i+" 1:#ffffff"}var cp=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniAreaSmooth"]}:this.config.shape={values:["miniArea"]}},r}(ei),rc=cp,qs={main:ei,mini:rc},uu=["colorField","stackField","groupField"],ps=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.type="interval",i.prototype.init.call(this);var t=this.plot.options;this._needParserColor()&&this.parseColor(),this.config.color||(this.config.color={values:["#5b8ff9"]});var e=this._getSizeProps(t);e&&this.parseSize(e);var n=this._getStyleProps(t);n&&this.parseStyle(n)},r.prototype.parseColor=function(){var t=this.plot.options,e=this._getColorMappingField(t),n={};e&&(n.fields=e),t.color&&((0,y.isString)(t.color)?n.values=[t.color]:(0,y.isFunction)(t.color)?n.callback=t.color:(0,y.isArray)(t.color)?e?n.values=t.color:t.color.length>0&&(n.values=[t.color[0]]):(0,y.isObject)(t.color)&&(n.fields=e,n.callback=function(a){return t.color[a]})),this.config.color=n},r.prototype.parseSize=function(t){var e=this.plot.options,n={};(0,y.isFunction)(e[t])?(n.fields=[this.config.position.fields],n.callback=e[t]):n.values=[e[t]],this.config.size=n},r.prototype.parseStyle=function(t){var e=this.plot.options,n=this.config.color,a=this.plot.options[t],o={};(0,y.isFunction)(a)?(o.fields=(n==null?void 0:n.fields)||[e.xField,e.yField],o.callback=a):o.cfg=a,this.config.style=o},r.prototype._getSizeProps=function(t){for(var e=["columnSize","barSize"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,y.get)(t,o))return o}},r.prototype._getStyleProps=function(t){for(var e=["columnStyle","barStyle","pieStyle","ringStyle"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,y.get)(t,o))return o}},r.prototype._getColorMappingField=function(t){for(var e=0,n=uu;e<n.length;e++){var a=n[e];if((0,y.get)(t,a))return[t[a]]}},r.prototype._needParserColor=function(){var t=this.plot.options;if(t.color)return!0;for(var e=0,n=uu;e<n.length;e++){var a=n[e];if(t[a])return!0}return!1},r}($o),hu=ps,vp={main:hu},dp=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.config={type:"line",position:{fields:[t.xField,t.yField]},connectNulls:t.connectNulls},t.lineSize&&this.parseSize(),t.smooth&&(this.config.shape={values:["smooth"]}),t.step&&(this.config.shape={values:[t.step]}),(t.seriesField||t.color)&&this.parseColor(),(t.lineStyle||(0,y.get)(t,["line","style"]))&&this.parseStyle()},r.prototype.parseSize=function(){var t=this.plot.options.lineSize,e={};(0,y.isFunction)(t)?e.callback=t:e.values=[t],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={};if(t.seriesField&&(e.fields=[t.seriesField]),(0,y.has)(t,"color")){var n=t.color;(0,y.isString)(n)?e.values=[n]:(0,y.isFunction)(n)?e.callback=n:(0,y.isArray)(n)&&(t.seriesField?e.values=n:n.length>0&&(e.values=[n[0]]))}this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.lineStyle||(0,y.get)(t,["line","style"]),n={fields:null,callback:null,cfg:null};(0,y.isFunction)(e)&&t.seriesField?(n.fields=[t.seriesField],n.callback=e):n.cfg=e,this.config.style=n},r}($o),tl=dp,nc=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;!t.xField||!t.yField||(this.config={type:"line",position:{fields:[t.xField,t.yField]},tooltip:!1},(this._getColorMappingField()||this._needParseAttribute("color"))&&this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.line.style&&this.parseStyle(),t.smooth&&(this.config.shape={values:["smooth"]}))},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.line.size?e.values=[t.line.size]:e.values=[2],this.config.size=e},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField();n&&(e.fields=n),t.line.color?e.values=[t.line.color]:(0,y.isString)(t.color)?e.values=[t.color]:(0,y.isFunction)(t.color)?(e.fields=n,e.callback=t.color):(0,y.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]])),this.config.color=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.line.style,n={};(0,y.isFunction)(e)?(n.fields=this.config.position.fields,n.callback=e):n.cfg=e,this.config.style=n},r.prototype._needParseAttribute=function(t){var e=this.plot.options;return e[t]?!0:!!e.line[t]},r.prototype._getColorMappingField=function(){for(var t=this.plot.options,e=["stackField","seriesField"],n=0,a=e;n<a.length;n++){var o=a[n];if((0,y.get)(t,o))return[t[o]]}},r}(tl),pp=nc;(0,q.Fj)("line","miniLine",{draw:function(i,r){for(var t=je(i.points),e=[],n=0;n<t.length;n++){var a=t[n],o=n===0?"M":"L";e.push([o,a.x,a.y])}var s=(0,y.deepMix)({},{lineJoin:"round",lineCap:"round"},i.style),u=r.addShape("path",{attrs:(0,y.mix)({path:e,stroke:i.color||Di().defaultColor,lineWidth:i.size||2},s)});return u}}),(0,q.Fj)("line","miniLineSmooth",{draw:function(i,r){var t=je(i.points),e=[[0,0],[1,1]],n=Qo(t,!1,e),a=r.addShape("path",{attrs:(0,y.mix)({path:n,stroke:i.color||Di().defaultColor,lineWidth:i.size||2},i.style)});return a}});var gp=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){i.prototype.init.call(this),this.parseShape()},r.prototype.parseShape=function(){var t=this.plot.options;t.smooth?this.config.shape={values:["miniLineSmooth"]}:this.config.shape={values:["miniLine"]}},r}(tl),ic=gp,ac={main:tl,guide:pp,mini:ic},oc=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.pointStyle,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]}},this.parseColor(),this.parseSize(),t.shape&&this.parseShape(t.shape),t.pointStyle&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=t.colorField;n&&(e.fields=(0,y.isArray)(n)?n:[n]),t.color&&this._parseColor(t,e),(0,y.isEmpty)(e)||(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};t.sizeField&&(e.fields=[t.sizeField]),t.pointSize&&(e.values=(0,y.isArray)(t.pointSize)?t.pointSize:[t.pointSize]),this.config.size=e},r.prototype.parseShape=function(t){this.config.shape=t},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.pointStyle,n={fields:null,callback:null,cfg:null},a=t.xField,o=t.yField,s=t.colorField;(0,y.isFunction)(e)?(s?n.fields=(0,y.isArray)(s)?[a,o,s].concat(s):[a,o,s]:n.fields=[a,o],n.callback=e):(n.cfg=e,(0,y.isNil)(e.opacity)||(n.cfg.fillOpacity=e.opacity)),this.config.style=n},r.prototype._parseColor=function(t,e){(0,y.isString)(t.color)?e.values=[t.color]:(0,y.isFunction)(t.color)?e.callback=t.color:(0,y.isArray)(t.color)&&(e.values=t.color)},r}($o),sc=oc;function lc(i,r){var t=[];return(0,y.each)(r,function(e){var n=e[i];t.push(n)}),(0,y.uniq)(t)}var el=["seriesField","stackField"],rl=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){var t=this.plot.options;this.style=t.point.style,!(!t.xField||!t.yField)&&(this.config={type:"point",position:{fields:[t.xField,t.yField]},tooltip:!1},this.parseColor(),this._needParseAttribute("size")&&this.parseSize(),t.point.shape&&this.parseShape(t.point.shape),t.point.style&&this.parseStyle())},r.prototype.parseColor=function(){var t=this.plot.options,e={},n=this._getColorMappingField(t);if(n)this._parseColorByField(t,e,n);else if(t.point&&t.point.color)e.values=[t.point.color];else if(t.color)this._parseColor(t,e);else{var a=this.plot.getTheme();e.values=[a.defaultColor]}(0,y.keys)(e).length>0&&(this.config.color=e)},r.prototype.parseSize=function(){var t=this.plot.options,e={};e.values=[t.point.size],this.config.size=e},r.prototype.parseShape=function(t){var e={};(0,y.isString)(t)?e.values=[t]:(0,y.isObject)(t)&&(e.fields=t.fields,e.callback=t.callback),this.config.shape=e},r.prototype.parseStyle=function(){var t=this.plot.options,e=t.point&&t.point.style,n={fields:null,callback:null,cfg:null},a=this._getColorMappingField(t);(0,y.isFunction)(e)?(n.fields=[t.xField,t.yField],n.callback=e,a&&n.fields.unshift(a)):n.cfg=e,this.config.style=n},r.prototype._parseColorByField=function(t,e,n){if(e.fields=[n],t.point.color){for(var a=lc(n,t.data).length,o=[],s=0;s<a;s++)o.push(t.point.color);e.values=o}else t.color&&this._parseColor(t,e)},r.prototype._parseColor=function(t,e){var n=this._getColorMappingField(t);(0,y.isString)(t.color)?e.values=[t.color]:(0,y.isFunction)(t.color)?e.callback=t.color:(0,y.isArray)(t.color)&&(n?e.values=t.color:t.color.length>0&&(e.values=[t.color[0]]))},r.prototype._needParseAttribute=function(t){var e=this.plot.options,n=e.point&&(0,y.has)(e.point,t);return n},r.prototype._getColorMappingField=function(t){for(var e=0,n=el;e<n.length;e++){var a=n[e];if((0,y.get)(t,a))return[t[a]]}},r}($o),fu=rl,yp={guide:fu,circle:sc},mp={area:qs,line:ac,point:yp,interval:vp};function Ci(i,r,t){var e=mp[i][r];return new e(t).config}function uc(i){var r=Xt.B,t=i.split(" "),e=r[t[1]],n=parseInt(t[0],10);return[e.format,n*e.value]}function _i(i,r){if(!r)return i;Object.prototype.hasOwnProperty.call(r,"tickCount")&&(i.tickCount=r.tickCount),Object.prototype.hasOwnProperty.call(r,"type")&&r.type!=="dateTime"&&(i.type=r.type),Object.prototype.hasOwnProperty.call(r,"tickInterval")&&(r.type==="time"?i.tickInterval=uc(r.tickInterval):i.tickInterval=r.tickInterval),r.type==="time"&&r.mask&&(i.mask=r.mask),Object.prototype.hasOwnProperty.call(r,"min")&&(i.min=r.min),Object.prototype.hasOwnProperty.call(r,"max")&&(i.max=r.max),Object.prototype.hasOwnProperty.call(r,"minLimit")&&(i.minLimit=r.minLimit),Object.prototype.hasOwnProperty.call(r,"maxLimit")&&(i.maxLimit=r.maxLimit),Object.prototype.hasOwnProperty.call(r,"nice")&&(i.nice=r.nice),Object.prototype.hasOwnProperty.call(r,"formatter")&&(i.formatter=r.formatter),Object.prototype.hasOwnProperty.call(r,"exponent")&&(i.exponent=r.exponent),Object.prototype.hasOwnProperty.call(r,"base")&&(i.base=r.base),r.tickMethod&&(i.tickMethod=r.tickMethod)}function hc(i,r){var t=(0,y.filter)(r,function(a){return(0,y.isNumber)(a)}),e=Math.min.apply(Math,t),n=Math.max.apply(Math,t);e>0?(0,y.isNil)(i.min)&&(i.min=0):n<0&&(0,y.isNil)(i.max)&&(i.max=0)}var nl;function fc(i,r){var t={easing:"easeLinear",duration:1e4},e=(0,y.deepMix)({},r,t),n=i.get("element").geometry;n.labelsContainer.set("visible",!1);var a=i.get("index"),o=n.coordinate,s=n.scales,u=s[nl.options.yField],h=(0,y.clone)(i.get("origin"));cc(i,o);var p=i.get("clipShape"),b=i.get("parent"),k=12,R=null,Y=nl.options.seriesField;Y&&(R=b.addShape("text",{attrs:{x:o.start.x+k,y:0,text:h.data[0][Y],fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}}));var V=R?16:0,Z=b.addShape("text",{attrs:{x:o.start.x+k,y:V,text:"test"+a,fill:i.attr("stroke"),fontSize:12,textAlign:"start",textBaseline:"middle"}});e.callback=function(){i&&!i.get("destroyed")&&(i.setClip(null),p.remove(),Z.animate({opacity:0},300,function(){Z.remove(),(0,y.isNil)(R)||R.remove();var _t=n.labelsContainer;_t.get("visible")||_t.set("visible",!0)}))};var it=e.delay;(0,y.isFunction)(it)&&(it=e.delay(a));var tt=e.easing;(0,y.isFunction)(tt)&&(tt=e.easing(a)),p.animate({width:o.getWidth()},e.duration,tt,e.callback,it),e.onFrame=function(_t){var It=Za(_t,h,o);if(!!It){Z.attr("x",It[0]+k),Z.attr("y",It[1]+V);var Ht=cu(u,It[1],o);u.formatter&&(Ht=u.formatter(Ht)),Z.attr("text",Ht)}},Z.animate(e.onFrame,{duration:e.duration,easing:tt,callback:e.callback,delay:it}),R&&R.animate({onFrame:function(_t){var It=Za(_t,h,o);!It||(R.attr("x",It[0]+k),R.attr("y",It[1]))}},e.duration,tt,e.callback,it)}function cc(i,r){var t=r.start,e=r.end,n=r.height;i.setClip({type:"rect",attrs:{x:t.x,y:e.y,width:0,height:n}})}function Za(i,r,t){for(var e=r.points,n=t.start.x+t.getWidth()*i,a=0;a<e.length-1;a++){var o=e[a],s=e[a+1];if(n>=o.x&&n<=s.x){var u=(s.y-o.y)/(s.x-o.x),h=o.y+u*(n-o.x);return[n,h]}}}function cu(i,r,t){var e=(r-t.start.y)/(t.end.y-t.start.y);return i.invert(e).toFixed(2)}function vc(i){nl=i}(0,q.ph)("clipingWithData",fc);var il=function(){function i(r){this.type="shape",this.shapes=r.shapes,this.nodes=[],this._parserNodes(),this.origion_nodes=(0,y.deepMix)([],this.nodes)}return i.prototype.measure=function(r){var t=(0,y.deepMix)({},Se(r),{shape:r});return t},i.prototype.measureNodes=function(){var r=this,t=[],e=[];(0,y.each)(this.shapes,function(n,a){var o=(0,y.deepMix)({},r.nodes[a],r.measure(n));o.width!==0&&o.height!==0&&(t.push(o),e.push(n))}),this.nodes=t,this.shapes=e},i.prototype._parserNodes=function(){var r=this;(0,y.each)(this.shapes,function(t){var e=r.measure(t);r.nodes.push(e)})},i}(),dc=il;function xp(i,r,t){return t===void 0&&(t={ratio:.6}),r.width*t.ratio}var pc={type:"padding",usage:"assign",expression:xp};function gc(i,r){var t=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],e=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],n=pe(t,e);return Math.round(n)>=2}var yc={type:"group",usage:"compare",expression:gc};function bp(i,r,t){t===void 0&&(t={value:4});var e=[i.topLeft,i.topRight,i.bottomRight,i.bottomLeft],n=[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft],a=pe(e,n);return Math.round(a)>=t.value}var wp={type:"chain",usage:"compare",expression:bp};function mc(i,r,t){t===void 0&&(t={value:5});var e=Math.abs(i.bottom-r.top);return Math.round(e)>=t.value}var xc={type:"chain",usage:"compare",expression:mc};function Sp(i,r,t){return t===void 0&&(t={ratio:.15}),i.width<r.width*t.ratio}var Cp={type:"padding",usage:"compare",expression:Sp};function bc(i,r){var t=2,e=r.coord.radius/t;return Math.min(e,i.value)}var wc={type:"padding",usage:"assign",expression:bc};function al(i,r,t){return t===void 0&&(t={ratio:.8}),r.radius*t.ratio}var ol={type:"padding",usage:"assign",expression:al},vu={elementDist:wp,elementDistVertical:xc,elementCollision:yc,elementWidth:Cp,columnWidth:pc,ringThickness:ol,minRingThickness:wc};function Mp(i,r){vu[i]=r}function Io(i){i.attr("text","")}function gs(i,r,t,e){var n=e.nodes.nodes,a=n[t],o=[];if(!a.shape.get("blank"))for(var s=0;s<n.length;s++){var u=n[s],h=u.shape;if(s!==t&&!h.get("blank")){var p=du(a,u);p&&o.push(u)}}o.length>0&&(o.push(a),o.sort(function(b,k){return k.top-b.top}),(0,y.each)(o,function(b,k){if(k>0){var R=b.shape;Io(R),R.set("blank",!0)}}))}function du(i,r){return!(i.bottom<r.top||r.bottom<i.top||i.right<r.left||r.right<i.left)}var Ka=v(17118),Sc=1e3,pu=60*Sc,sl=60*pu,ys=24*sl,gu=31*ys,yu=365*ys;function ll(i,r,t,e){var n=e.nodes.nodes,a;t===n.length-1?a=n[t-1].shape.get("delegateObject").item.name:a=n[t+1].shape.get("delegateObject").item.name;var o=new Date(a),s=i.get("delegateObject").item.name,u=new Date(s),h=n[0].shape.get("delegateObject").item.name,p=new Date(h),b=n[n.length-1].shape.get("delegateObject").item.name,k=new Date(b),R=xu(p,k),Y=xu(u,o);if(R===Y){if(t!==0&&t!==n.length-1){var V=bu(R);i.attr("text",Ka.default.format(u,V))}return}if(t!==0){var Z=n[t-1].shape.get("delegateObject").item.name,it=new Date(Z),tt=mu(R,u,it);if(tt){var V=Cc(R,Y);i.attr("text",Ka.default.format(u,V));return}}}function mu(i,r,t){var e=wu(r,i),n=wu(t,i);return e===n}function xu(i,r){var t,e=Math.abs(i-r),n={minute:[pu,sl],hour:[sl,ys],day:[ys,gu],month:[gu,yu],year:[yu,Infinity]};return(0,y.each)(n,function(a,o){e>=a[0]&&e<a[1]&&(t=o)}),t}function Cc(i,r){for(var t=["year","month","day","hour","minute"],e=["YYYY","MM","DD","HH","MM"],n=t.indexOf(i)+1,a=t.indexOf(r),o="",s=n;s<=a;s++)o+=e[s],s<a&&(o+="-");return o}function bu(i){var r=["year","month","day","hour","minute"],t=["YYYY","MM","DD","HH","MM"],e=r.indexOf(i),n=t[e];return n}function wu(i,r){if(r==="year")return i.getFullYear();if(r==="month")return i.getMonth()+1;if(r==="day")return i.getDay()+1;if(r==="hour")return i.getHours()+1;if(r==="minute")return i.getMinutes()+1}function Mc(i){var r=/^(?:(?:[0-2][0-3])|(?:[01]\d)):[0-5]\d$/,t=/^(?:(?:[0-2][0-3])|(?:[01]\d))(?::[0-5]\d){2}$/;return r.test(i)||t.test(i)}var Su={k:{number:1e3,index:0},m:{number:1e6,index:1},b:{number:1e9,index:2},t:{number:1e12,index:3}};function Cu(i,r,t,e){if(!(!(0,y.has)(e,"node")||!(0,y.has)(e.node,"node"))){var n=e.nodes.nodes,a=parseFloat(i.get("origin").text);if(a!==0){if(r.formatter){i.attr("text",r.formatter(a));return}if(r.unit){var o=Jo(r,a),s=o.num,u=o.unitname;i.attr("text",s+u)}else{var h=Mu(n),p=pr(h),u=Ec(p),b=Su[u].number,k=Ac(n),R=Tc(k,b),s=Jo({unit:u,decimal:R},a).num;i.attr("text",s+u)}}}}function Jo(i,r){var t=["k","m","b","t"],e,n;if(i.unit==="auto"){var a=Math.floor(Math.log(r)/Math.log(1e3));n=t[a-1],e=(r/Math.pow(1e3,a)).toFixed(i.decimal)}else if(i.unit){var o=Su[i.unit];n=i.unit,e=(r/o.number).toFixed(i.decimal)}return{num:e,unitname:n}}function Ec(i){var r=["k","m","b","t"],t=Math.floor(Math.log(i)/Math.log(1e3));return r[t-1]}function Mu(i){var r=[];return(0,y.each)(i,function(t){var e=t,n=parseFloat(e.shape.get("origin").text);r.push(n)}),r}function Ac(i){if(i.length>=2){var r=parseFloat(i[0].shape.get("origin").text),t=parseFloat(i[1].shape.get("origin").text);return Math.abs(r-t)}return 0}function Tc(i,r){var t=Math.floor(Math.log10(r));if(i>=r){var e=i%r;if(e>0){var n=Math.floor(Math.log10(e));return Math.abs(n-t)}}else{var a=Math.floor(Math.log10(i));return Math.abs(a-t)}return 0}function Eu(i,r,t){var e=t.nodes.nodes;if(r!==e.length-1){var n=e[r],a=e[r+1],o=Pc(n,a).dir,s=i.get("startPoint");o==="x"&&i.attr("y",s.y+20)}}function Pc(i,r){var t,e={x:r.centerX-i.centerX,y:r.centerY-i.centerY},n=Math.sqrt(e.x*e.x+e.y*e.y),a={x:10,y:0},o=Math.sqrt(a.x*a.x+a.y*a.y),s=rr(e,a),u=s/(n*o)*180/Math.PI;u<0&&(u=360-u),u=Lc(u);var h=Math.abs(i.centerX-r.centerX),p=Math.abs(i.centerY-r.centerY);return u>45?t="x":u<45&&(t="y"),{dir:t,distX:h,distY:p}}function Lc(i){return i>90&&i<=180?180-i:i>180&&i<270?i-180:360-i}function Au(i,r,t,e){var n=e.nodes.nodes;if(t!==0){var a=n[t],o=n[t-1];if(du(a,o)){var s=e.plot.view.geometries[0].elements[0],u=o.top-a.height/2,h=10;if(u-h>e.region.top){var p=a.shape.get("origin"),b=s.getShapeId(p),k=s.getShapes(),R=_c(b,k).get("box"),Y=R.left+R.width/2,V=R.top,Z=s.get("labelController").labelsContainer,it=Z.addShape("path",{attrs:{path:[["M",Y,V],["L",a.shape.attr("x"),u]],stroke:"#ccc",lineWidth:1}}),tt={x:i.attr("x"),y:i.attr("y")};a.shape.attr("y",u-h),n[t]=e.nodes.measure(a.shape),n[t].line=it,n[t].origin_position=tt}}}}function _c(i,r){var t;return(0,y.each)(r,function(e){var n=e,a=n.get("id");a===i&&(t=n)}),t}function Ic(i,r,t,e){var n=e.nodes.nodes,a=n.length%2!=0;if(!Tu(r.keep,t,n)){var o=t%2==0;(!a&&o||a&&!o)&&Io(i)}}function Tu(i,r,t){var e=[];(0,y.each)(i,function(s){s==="start"?e.push(r===0):s==="end"?e.push(r===t.length-1):(0,y.isNumber)(s)&&e.push(r===s)});for(var n=0,a=e;n<a.length;n++){var o=a[n];if(o===!0)return!0}return!1}function Oc(i,r,t,e){var n=e.nodes.nodes;if(!Tu(r.keep,t,n)){var a=i.attr("text"),o=i.get("delegateObject").item.name;a!==o&&Io(i)}}function kc(i,r,t,e){var n=e.nodes.nodes,a=Bc(n);if(!(t<=1)){var o=n[t],s=Pu(t,n),u=s.centerX-o.centerX,h=s.centerY-o.centerY,p=Math.sqrt(u*u+h*h);p<a&&(Io(i),i.set("blank",!0))}}function Pu(i,r){for(var t=i-1;t>0;t--){var e=r[t];if(!e.shape.get("blank"))return e}}function Bc(i){var r=(0,y.deepMix)([],i);return r.sort(function(t,e){return e.width-t.width}),Math.round(r[0].width)}function Dc(i,r,t,e){var n=e.nodes.nodes,a=n[t];a.line&&a.line.remove();var o=e.plot.initialOptions.data,s=e.plot[e.plot.type]||e.plot[e.plot.baseType],u=(0,y.get)(s,["label","fields",0],(0,y.get)(s,["position","fields",1])),h=Fc(o,u,n),p=!1;if((0,y.each)(h,function(Y){Y.shape.get("origin")===a.shape.get("origin")&&(p=!0)}),p){if(a.origin_position){var b=a.origin_position,k=b.x,R=b.y;i.attr("x",k),i.attr("y",R)}}else Io(i)}function Fc(i,r,t){var e=[];(0,y.each)(i,function(p){e.push(p[r])}),e.sort(function(p,b){return p-b});var n=e[0],a=ul(t,r,n),o=e[e.length-1],s=ul(t,r,o),u=Rc(e),h=ul(t,r,u);return{min:a,max:s,median:h}}function Rc(i){var r=(0,y.clone)(i);r.sort(function(e,n){return e-n});var t=Math.floor(r.length/2);return r.length%2,r[t]}function ul(i,r,t){for(var e=0,n=i;e<n.length;e++){var a=n[e],o=a.shape.get("origin")._origin;if(o[r]===t)return a}}function Lu(i,r){var t=r.abbreviateBy?r.abbreviateBy:"end",e=i.attr("text"),n;t==="end"&&(n=e[0]+"..."),t==="start"&&(n="..."+e[e.length-1]),t==="middle"&&(n=e[0]+"..."+e[e.length-1]),i.resetMatrix(),i.attr({text:n,textAlign:"center",textBaseline:"top"})}function Nc(i,r,t,e){var n=e.nodes.nodes,a=i.attr("text"),o=/^\d+$/.test(a);o?Cu(i,r,t,n):Mc(a)?ll(i,r,t,n):Lu(i,r)}function hl(i,r){i.resetMatrix(),i.attr({rotate:360-r.degree,textAlign:"right",textBaseline:"middle"})}function Yc(i,r){for(var t=i.attr("text"),e=Math.ceil(t.length/r.lineNumber),n="",a=1;a<r.lineNumber;a++){var o=e*a;n=t.slice(0,o)+`
`+t.slice(o)}var s=i.attr("fontSize");i.attr({text:n,lineHeight:s,textAlign:"center",textBaseline:"top"})}var _u={textWrapper:Yc,textRotation:hl,textAbbreviate:Lu,textHide:Io,digitsAbbreviate:Cu,datetimeStringAbbrevaite:ll,robustAbbrevaite:Nc,nodesResampling:Ic,nodesResamplingByAbbrevate:Oc,nodesResamplingByChange:kc,nodesResamplingByState:Dc,nodeJitter:Eu,nodeJitterUpward:Au,clearOverlapping:gs};function Ep(i,r){_u[i]=r}var Gc=function(){function i(r){this.iterationTime=10,this.iterationIndex=0,this.rulesLocker=[],this.constraintIndex=0,(0,y.assign)(this,r),this.currentConstraint=this.constraints[0],this.rules&&(this.iterationTime=this.rules[this.currentConstraint.name].length),this._start(),this._run(),this._end()}return i.prototype._start=function(){this.onStart&&this.onStart(this.nodes)},i.prototype._iteration=function(){var r;this.nodes.type==="shape"?r=this.nodes:r=this.nodes,r.type==="shape"&&r.measureNodes(),this.rules&&this._applyRules(),r.type==="shape"&&r.measureNodes(),this.onIteration&&this.onIteration(this.nodes)},i.prototype._end=function(){this.onEnd&&this.onEnd(this.nodes)},i.prototype._run=function(){for(var r=this._constraintsTest();!r&&!(this.iterationIndex>this.iterationTime-1);)this._iteration(),r=this._constraintsTest(),this.iterationIndex++;this.constraintIndex<this.constraints.length-1&&(this.constraintIndex++,this.currentConstraint=this.constraints[this.constraintIndex],this.iterationTime=this.rules?this.rules[this.currentConstraint.name].length:1,this.iterationIndex=0,this._run())},i.prototype._constraintsTest=function(){var r=vu[this.currentConstraint.name],t=this.currentConstraint.option;return r.usage==="compare"?this._constraintCompare(r,t):this._constraintAssignment(r,t)},i.prototype._constraintCompare=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintCompare(n,a,t);if(e==="padding")return this._paddingConstraintCompare(n,this.region,a,t);if(e==="group")return this._groupConstraintCompare(n,a,t)},i.prototype._chainConstraintCompare=function(r,t,e){for(var n=0;n<t.length-1;n++){var a=t[n],o=t[n+1];if(r(a,o,e)===!1)return!1}return!0},i.prototype._paddingConstraintCompare=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a];if(r(s,t,n)===!1)return!1}return!0},i.prototype._groupConstraintCompare=function(r,t,e){for(var n=0;n<t.length;n++)for(var a=t[n],o=0;o<t.length;o++)if(o!==n){var s=t[o];if(r(a,s,e)===!1)return!1}return!0},i.prototype._constraintAssignment=function(r,t){var e=r.type,n=r.expression,a=this.nodes.nodes;if(e==="chain")return this._chainConstraintAssign();if(e==="padding")return this._paddingConstraintAssign(n,this.region,a,t)},i.prototype._chainConstraintAssign=function(){return!0},i.prototype._paddingConstraintAssign=function(r,t,e,n){if(t)for(var a=0,o=e;a<o.length;a++){var s=o[a],u=r(s,t,n);s.value=u}return!0},i.prototype._applyRules=function(){for(var r=this.rules[this.currentConstraint.name][this.iterationIndex],t=_u[r.name],e=r.option?r.option:{},n=this.nodes.nodes,a=0;a<n.length;a++){var o=n[a];this._applyRule(o.shape,t,e,a)}},i.prototype._applyRule=function(r,t,e,n){var a={nodes:this.nodes,region:this.region,plot:this.plot};t(r,e,n,a)},i}(),Iu=Gc,zc=function(){function i(r){(0,y.assign)(this,r),this.init()}return i.prototype.init=function(){this.type=this.getType(),this.shouldApply()&&this.apply()},i}(),Ou=zc,Xc={cat:"category",timeCat:"category",time:"dateTime",linear:"linear"},ku=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.axisInstance=this.getAxisInstance(),i.prototype.init.call(this)},r.prototype.shouldApply=function(){var t=this.plot.options;return this.responsiveTheme.axis?!!(this.responsiveTheme.axis[this.dim]&&t[this.dim+"Axis"].visible&&t[this.dim+"Axis"].label&&t[this.dim+"Axis"].label.visible):!1},r.prototype.apply=function(){for(var t=this,e=this.plot.view.backgroundGroup.findAll(function(p){var b=p.get("name");if(b==="axis-label"){var k=p.get("delegateObject").axis.get("field");if(k===t.plot.options[t.dim+"Field"])return p}}),n=[],a=0;a<e.length;a++)n.push(e[a]);var o=new dc({shapes:n}),s=this.responsiveTheme.axis.x[this.type],u=s.constraints,h=s.rules;new Iu({nodes:o,constraints:u,region:this.plot.getViewRange(),rules:h,plot:this.plot,onEnd:function(p){t.updateTicks(p.origion_nodes)}})},r.prototype.getType=function(){var t=this.plot.options,e=this.dim+"Axis",n=this.dim+"Field";if(t[e]&&t[e].type&&t[e].type==="dateTime")return"dateTime";var a=this.plot.view.getScaleByField([t[n]]).type;return Xc[a]},r.prototype.getAxisInstance=function(){var t,e,n=this.dim==="x"?0:1,a=(t=this.plot.view.getController("axis"))===null||t===void 0?void 0:t.getComponents();if(a)return(e=a[n])===null||e===void 0?void 0:e.component},r.prototype.updateTicks=function(t){var e=this,n=this.plot.view.backgroundGroup.findAll(function(o){var s=o.get("name");if(s==="axis-tickline-group"){var u=o.get("delegateObject").axis.get("field");if(u===e.plot.options[e.dim+"Field"])return o}})[0];if(n){var a=n.get("children");(0,y.each)(t,function(o,s){o.shape.attr("text")===""&&a[s].attr("opacity",0)})}this.plot.canvas.draw()},r}(Ou),Oa=ku;function Bu(i){var r=i.getResponsiveTheme(),t=i.canvas;new Oa({plot:i,responsiveTheme:r,dim:"x"}),new Oa({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var Hc=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldApply=function(){return!(!this.responsiveTheme.label||!this.responsiveTheme.label[this.type])},r.prototype.apply=function(){var t=this.plot.view.geometries[0].labelsContainer.get("children"),e=[];(0,y.each)(t,function(u){e=e.concat(u.findAllByName("label"))});var n=new dc({shapes:e}),a=this.responsiveTheme.label[this.type],o=a.constraints,s=a.rules;new Iu({nodes:n,constraints:o,rules:s,plot:this.plot,region:this.plot.view.coordinateBBox})},r.prototype.getType=function(){return null},r}(Ou),Du=Hc,fl=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,y.get)(this.plot.options,["label","type"],"point")},r}(Du);function Vc(i){var r=i.getResponsiveTheme();new fl({plot:i,responsiveTheme:r})}var Wc=[],ka=[{name:"responsiveAxis",method:Bu},{name:"responsivePointLabel",method:Vc}],cl={preRender:Wc,afterRender:ka},Fu=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Q.__assign)({offsetX:0,offsetY:0},n)},r.prototype.getLabelOffset=function(){return this.getLabelOffsetByDimAndFactor("y",-1)},r.prototype.getLabelItemAttrs=function(t,e){var n=this,a=this.options,o=a.style,s=a.formatter,u=(0,y.get)(t,"model.mappingData",[]);return(0,y.map)(u,function(h,p){var b,k=n.getValue(h);return(0,Q.__assign)((0,Q.__assign)((0,Q.__assign)({},n.getPosition(h)),{text:s?s(k,(b={},b[q.YI]=h._origin,b.mappingDatum=h,b.mappingDatumIndex=p,b.element=t,b.elementIndex=e,b),e):k,textAlign:"center",textBaseline:"middle"}),o)})},r.prototype.getValue=function(t){return(0,y.get)(t._origin,this.layer.options.yField)},r.prototype.getPosition=function(t){var e={x:(0,y.isArray)(t.x)?(0,y.last)(t.x):t.x,y:(0,y.isArray)(t.y)?(0,y.last)(t.y):t.y};return e},r.prototype.layoutLabels=function(t,e){var n=this;if(!!this.options.adjustPosition){var a=this.isOverlapped(e);if(a){var o=this.getGlobalTolerance(e);(0,y.each)(e,function(s,u){u>1&&n.labelResamplingByChange(s,e,u,o)})}a=this.isOverlapped(e),a&&(0,y.each)(e,function(s,u){s.get("visible")&&n.clearOverlapping(s,e,u)})}},r.prototype.adjustLabel=function(){},r.prototype.labelResamplingByChange=function(t,e,n,a){var o=this.findPrevious(n,e),s=this.getCenter(t),u=this.getCenter(o),h=u.x-s.x,p=u.y-s.y,b=Math.sqrt(h*h+p*p);b<a&&t.set("visible",!1)},r.prototype.clearOverlapping=function(t,e,n){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(o!==n&&s.get("visible")){var u=Re(t.getBBox(),s.getBBox());u&&a.push(s)}}a.length>0&&(a.push(t),a.sort(function(h,p){return p.minY-h.minY}),(0,y.each)(a,function(h,p){p>0&&h.set("visible",!1)}))},r.prototype.isOverlapped=function(t){for(var e=0;e<t.length;e++)if(t[e].get("visible")){for(var n=t[e].getBBox(),a=0;a<t.length;a++)if(a!==e&&t[a].get("visible")){var o=t[a].getBBox(),s=Re(n,o);if(s)return!0}}return!1},r.prototype.getGlobalTolerance=function(t){var e=t.slice();return e.sort(function(n,a){return a.getBBox().width-n.getBBox().width}),Math.round(e[0].getBBox().width)},r.prototype.findPrevious=function(t,e){for(var n=t-1;n>0;n--)if(e[n].get("visible"))return e[n]},r.prototype.getCenter=function(t){var e=t.getBBox(),n=e.minX,a=e.maxX,o=e.minY,s=e.maxY;return{x:n+(a-n)/2,y:o+(s-o)/2}},r}(gn),Ru=Fu;vn("point",Fu);var Nu=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){var n=this,a,o=[],s=at.fromBBoxObject(this.getCoordinateBBox()),u=t.getXYFields(),h=u[0],p=u[1],b=(0,y.groupBy)(e,function(R){return R.get(q.jQ)[q.wv][h]}),k=(a=e[0])===null||a===void 0?void 0:a.get("offset");(0,y.each)((0,y.keys)(b).reverse(),function(R){for(var Y=n.sortLabels(t,b[R]);Y.length;){var V=Y.shift();if(Qr(V,o,function(tt,_t){return tt._origin[h]===_t._origin[h]&&tt._origin[p]===_t._origin[p]})){V.set("visible",!1);continue}En(V,s);var Z=Nn(V,o),it=void 0;if(Z&&(V.attr("y",V.attr("y")+2*k),En(V,s),it=Nn(V,o)),it){V.set("visible",!1);continue}o.push(V)}})},r.prototype.sortLabels=function(t,e){var n=t.getXYFields()[1],a=[];return e.sort(function(o,s){return s.get(q.jQ)[q.wv][n]-o.get(q.jQ)[q.wv][n]}),e.length>0&&a.push(e.shift()),e.length>0&&a.push(e.pop()),a.push.apply(a,e),a},r}(Ru),jc=Nu;vn("point-auto",Nu);var Uc=8,Zc=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,y.each)(t,function(e){var n=r.getShapeInfo(e.shape),a=r.options,o=a.style,s=a.offsetX,u=a.offsetY,h=r.options.formatter,p=h?h(n.name):n.name;r.container.addShape("text",{attrs:(0,y.deepMix)({},{x:n.x+s,y:n.y+u,text:p,fill:n.color,textAlign:"left",textBaseline:"middle"},o),name:"label"})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,y.clone)(r.label.style);return delete t.fill,{offsetX:Uc,offsetY:0,style:t}},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="line"})},i.prototype.getShapeInfo=function(r){var t=r.get("origin").points,e=t[t.length-1],n=r.attr("stroke"),a=this.plot.options.seriesField,o=r.get("origin").data[0][a];return{x:e.x,y:e.y,color:n,name:o}},i}(),Yu=Zc,Kc={line:"line",point:"point"},$c=Tt(Kc);(0,y.assign)(pt,$c);var vl=v(23361),Qc={stroke:"transparent",fill:"#FCC509",lineWidth:0},Jc={stroke:"#FFF",fill:"#FCC509",lineWidth:1},qc={stroke:"rgba(0,0,0,0.85)",fill:"#FCC509",lineWidth:1},tv=function(){function i(r){this.points=[],this.labels=[],this.name="markerPoints",this.defaultCfg={offsetX:0,offsetY:0,style:{normal:Qc,selected:qc,active:Jc},label:{visible:!1,offsetY:-8,position:"top",style:{fill:"rgba(0, 0, 0, 0.85)"}},animation:!1},this.view=r.view,this.size=r.size||6,this.config=(0,y.deepMix)({},this.defaultCfg,r),this._init()}return i.prototype.render=function(){var r=this.getDataArray();this._renderPoints(r),this.view.canvas.draw(),this._addInteraction()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.points=[],this.labels=[]},i.prototype.getDataArray=function(){var r=this.view.geometries[0];return r.dataArray},i.prototype._init=function(){var r=this,t=this.view.foregroundGroup;this.container=t.addGroup(),this.render(),this.view.on("beforerender",function(){r.clear()})},i.prototype._renderPoints=function(r){var t=this;(0,y.each)(this.config.data,function(e,n){(0,y.each)(r,function(a){var o=(0,y.find)(a,function(it){return(0,y.isMatch)(it._origin,e)});if(o){var s=t.config.style.normal,u=t.container.addGroup({name:t.name}),h=o.x,p=o.y;(0,y.isArray)(h)&&(h=h[0]),(0,y.isArray)(p)&&(p=p[0]);var b=t.config.symbol,k=t.config,R=k.offsetX,Y=k.offsetY,V=void 0;if((0,y.isString)(b)&&b.startsWith("image://")){var Z=b.substr(8);V=u.addShape("image",{attrs:{x:h-t.size/2+R,y:p-t.size/2+Y,img:Z,width:t.size,height:t.size}})}else b=(0,y.isString)(b)?q.Tv[b]:b,V=u.addShape({type:"marker",name:"marker-point",id:"point-"+n,attrs:(0,Q.__assign)((0,Q.__assign)({x:h+R,y:p+Y,r:t.size/2},s),{symbol:b})});t.points.push(V),t._animatePoint(V),t._renderLabel(u,o,n),u.set("data",e),u.set("origin",o)}})})},i.prototype._renderLabel=function(r,t,e){var n=this.config.label;if(n&&n.visible){var a=n.offsetX,o=a===void 0?0:a,s=n.offsetY,u=s===void 0?0:s,h=n.formatter,p=n.position,b=n.field,k=t._origin[b];h&&(k=h(k,{_origin:t._origin},e));var R=(0,y.isArray)(t.x)?t.x[0]:t.x,Y=(0,y.isArray)(t.y)?t.y[0]:t.y,V=r.addShape("text",{name:"marker-label",id:"label-"+e,attrs:(0,Q.__assign)((0,Q.__assign)({x:R+o,y:Y+u,text:k||""},n.style),{textAlign:"center",textBaseline:p==="top"?"bottom":"top"})});this.labels.push(V)}},i.prototype._addInteraction=function(){var r=this,t=this.config.events;(0,y.each)(t,function(e,n){r.container.on(r.name+":"+n,function(a){e(a);var o=a.target.get("parent"),s=o.get("children")[0];if(s){var u=s.get("data"),h=s.get("id"),p={id:h,data:u};n==="click"?r.selectedPoint&&r.selectedPoint.get("id")===h?(r.selectedPoint=null,r.setState("inactive",p)):(r.selectedPoint=s,r.setState("selected",p)):n==="mouseenter"?r.setState("active",p):n==="mouseleave"&&r.setState("inactive",p)}r.view.canvas.draw()}),r.view.on("click",function(a){var o=a.target.get("parent");(!o||o.get("name")!==r.name&&r.selectedPoint)&&(r.selectedPoint=null,r.setState("inactive"))})})},i.prototype.setState=function(r,t){var e=this;r==="active"?(!this.selectedPoint||t.id!==this.selectedPoint.get("id"))&&this._onActive(t):r==="inactive"?this.points.forEach(function(n){return e._onInactive(n)}):r==="selected"&&this._onSelected(t)},i.prototype._onActive=function(r){var t=this,e=this.config.style.active;(0,y.each)(this.points,function(n){n.get("id")===r.id?(0,y.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._onInactive=function(r){var t=this.config.style.normal;(!this.selectedPoint||r.get("id")!==this.selectedPoint.get("id"))&&(0,y.each)(t,function(e,n){r.attr(n,e)})},i.prototype._onSelected=function(r){var t=this,e=this.config.style.selected;(0,y.each)(this.points,function(n){n.get("id")===r.id?(0,y.each)(e,function(a,o){n.attr(o,a)}):t._onInactive(n)})},i.prototype._animatePoint=function(r){var t=this.config,e=t.animation,n=t.size;if(e!==!1){var a=e,o=a.endState,s=o===void 0?{}:o,u=a.animateCfg,h=u===void 0?vl.DEFAULT_ANIMATE_CFG.appear:u;r.animate((0,Q.__assign)({r:Number.isNaN(s.size/2)?n/2:s.size/2},s),h)}},i}(),Gu=tv,ms=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+1}},dl=function(i){var r=i.shape,t=r.attr("opacity")||1;return{opacity:t*.2}},zu=function(i){var r=i.shape,t=r.attr("lineWidth")||1;return{lineWidth:t+2}};Xi("line",{lineStyle:{normal:{},active:ms,disable:dl,selected:zu},pointStyle:{normal:{},active:{},disable:{},selected:{}}});var $a={label:{point:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodesResamplingByChange"},{name:"clearOverlapping"}]}}}};vs("line",$a);var Xu=function(i){(0,Q.__extends)(r,i);function r(t){return i.call(this,(0,Q.__assign)({processEvent:"mousemove"},t))||this}return r.prototype.start=function(){},r.prototype.process=function(t){var e=(0,y.filter)(this.view.geometries,function(o){return o.type=="line"}),n=t.target;if(n.get("name")==="line"){var a=(0,y.get)(t,"data.data");(0,y.each)(e,function(o){(0,y.each)(o.elements,function(s){s.setState("active",s.data===a)})})}else(0,y.each)(e,function(o){(0,y.each)(o.elements,function(s){s.setState("active",!1)})})},r}(Qn),ev=Xu,rv=function(i){(0,Q.__extends)(r,i);function r(t){return i.call(this,(0,Q.__assign)({endEvent:"click"},t))||this}return r.prototype.start=function(){},r.prototype.end=function(t){var e=t.target,n=(0,y.filter)(this.view.geometries,function(o){return o.type=="line"});if(e.get("name")==="line"){var a=(0,y.get)(t,"data.data");(0,y.each)(n,function(o){(0,y.each)(o.elements,function(s){s.setState("inactive",s.data!==a)})})}else(0,y.each)(n,function(o){(0,y.each)(o.elements,function(s){s.setState("inactive",!1)})})},r}(Qn),xs=rv,nv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"selected-tooltip"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,Q.__assign)((0,Q.__assign)({},t),{showContent:!1,showCrosshairs:!0,showMarkers:!0,shared:!0})},r}(q.fw);(0,q.ak)("selected-tooltip",nv);var Hu=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.show=function(){var t=this.getPoint();(0,y.isEqual)(t,this.location)||(this.location=t,this.showTooltip(t))},r.prototype.hide=function(){var t=this.getTooltipController();t.hideTooltip()},r.prototype.showTooltip=function(t){var e=this.getTooltipController();e.showTooltip(t)},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:this.getLastXPoint()},r.prototype.getLastXPoint=function(){var t=this.getView(),e=t.getXScale(),n=t.getYScales()[0],a=t.getCoordinate(),o=(0,y.last)(e.getTicks()).value;return a.convert({x:o,y:(n.range[0]+n.range[1])/2})},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("selected-tooltip")},r}(q.Mx),Vu=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"name",{get:function(){return"tooltip-active"},enumerable:!1,configurable:!0}),r.prototype.getTooltipCfg=function(){var t=i.prototype.getTooltipCfg.call(this);return(0,Q.__assign)((0,Q.__assign)({},t),{showCrosshairs:!0,showMarkers:!1,shared:!0})},r}(q.fw);(0,q.ak)("tooltip-active",Vu);var iv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.init=function(){this.getView().removeInteraction("tooltip")},r.prototype.show=function(){var t=this.getPoint();t&&this.showTooltip(t)},r.prototype.hide=function(){var t=this.getView(),e=this.getTooltipController();e.hideTooltip();var n=(0,y.filter)(t.geometries,function(a){return a.type=="point"});(0,y.each)(n,function(a){(0,y.each)(a.elements,function(o){o.setState("active",!1)})})},r.prototype.showTooltip=function(t){var e=this.getView(),n=this.getTooltipController();n.showTooltip(t);var a=n.getTooltipItems(t),o=(0,y.filter)(e.geometries,function(s){return s.type=="point"});(0,y.each)(o,function(s){(0,y.each)(s.elements,function(u){u.setState("active",(0,y.findIndex)(a,function(h){return h.data===u.data})!==-1)})})},r.prototype.getPoint=function(){var t=this.context.event;return t?{x:t.x,y:t.y}:null},r.prototype.getView=function(){return this.context.view},r.prototype.getTooltipController=function(){return this.getView().getController("tooltip-active")},r}(q.Mx),av=iv;(0,q.zl)("selected-tooltip",Hu),(0,q.w_)("selected-tooltip",{start:[{trigger:q.ld.AFTER_PAINT,action:"selected-tooltip:show"},{trigger:q.ld.AFTER_RENDER,action:"selected-tooltip:show"},{trigger:"plot:mousemove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"selected-tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}]}),(0,q.zl)("marker-active",av),(0,q.w_)("marker-active",{start:[{trigger:q.ld.AFTER_PAINT,action:"marker-active:show"},{trigger:q.ld.AFTER_RENDER,action:"marker-active:show"},{trigger:"plot:mousemove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"marker-active:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:mouseleave",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchend",action:"marker-active:hide",throttle:{wait:50,leading:!0,trailing:!1}}]});var Ap={line:"line",point:"point"},pl=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.markerPoints=[],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{connectNulls:!1,smooth:!1,lineSize:2,lineStyle:{lineJoin:"round",lineCap:"round"},point:{visible:!1,size:3,shape:"circle"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{showContent:!0,crosshairs:{line:{style:{stroke:"rgba(0,0,0,0.45)"}}}},markerPoints:[]})},r.prototype.afterRender=function(){var t=this,e=this.options;this.renderLabel(),e.markerPoints&&((0,y.each)(this.markerPoints,function(n){return n.destroy()}),this.markerPoints=[],e.markerPoints.forEach(function(n){if(n.visible){var a=new Gu((0,Q.__assign)((0,Q.__assign)({},n),{view:t.view}));t.markerPoints.push(a)}})),e.responsive&&e.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.seriesField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return Ap[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),this.setConfig("scales",e),hc(e[t.yField],(0,y.map)(t.data||[],function(n){return n[t.yField]})),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.tooltip=function(){(0,y.some)(this.options.markerPoints,function(t){return t.visible})&&(this.options.tooltip.showMarkers=!1),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){this.addLine(),this.addPoint()},r.prototype.addLine=function(){var t=this.options;this.line=Ci("line","main",{plot:this}),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",this.line)},r.prototype.addPoint=function(){var t=this.options,e={visible:!1};t.point&&(t.point=(0,y.deepMix)(e,t.point)),t.point&&t.point.visible&&(this.point=Ci("point","guide",{plot:this}),this.setConfig("geometry",this.point))},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var s=sr(this.view,"line");if(n.type==="line"){var u=new Yu((0,Q.__assign)({view:this.view,plot:this},this.options.label));u.render()}else this.doRenderLabel(s,(0,Q.__assign)({type:"point",formatter:o.formatter&&function(h){return o.formatter(h)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.line.tooltip={};var t=this.options.tooltip;t.fields&&(this.line.tooltip.fields=t.fields),t.formatter&&(this.line.tooltip.callback=t.formatter,t.fields||(this.line.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.line.tooltip.fields.push(this.options.seriesField)))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation?(vc({options:this.options,view:this.view}),this.line.animate=t.animation):(this.line.animate=!1,this.point&&(this.point.animate=!1))},r.prototype.applyInteractions=function(){i.prototype.applyInteractions.call(this),this.interactions.push(new ev({view:this.view})),this.interactions.push(new xs({view:this.view}))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,d)},r.prototype.applyResponsive=function(t){var e=this,n=cl[t];(0,y.each)(n,function(a){var o=a;o.method(e)})},r.prototype.singleLineLabelCheck=function(){return!this.options.seriesField&&this.options.label.type&&this.options.label.type==="line"},r}(qn),Oo=pl;An("line",pl);var gl=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Oo.getDefaultOptions,r}(un),Wu=gl;function ov(i,r,t,e,n){var a=e-r,o=i.children,s=i.value;o.sort(function(p,b){return b.value-p.value});var u=a/s,h=r;(0,y.each)(o,function(p){p.y0=t,p.y1=n,p.x0=h,h+=p.value*u,p.x1=p.x0+p.value*u})}function ju(i,r,t,e,n){var a=n-t,o=i.children,s=i.value;o.sort(function(p,b){return b.value-p.value});var u=a/s,h=t;(0,y.each)(o,function(p){p.x0=r,p.x1=e,p.y0=h,h+=p.value*u,p.y1=p.y0+p.value*u})}var qo=(1+Math.sqrt(5))/2;function Uu(i,r,t,e,n){var a=i.children,o=i.value;a.sort(function(xe,Ce){return Ce.value-xe.value});for(var s=[],u,h,p,b,k,R,Y,V,Z=0,it=0;Z<a.length;){var tt=e-r,_t=n-t;for(u=a[it++].value,h=u,p=u,b=Math.max(_t/tt,tt/_t)/(o*qo),k=u*u*b,Y=Math.max(h/k,k/p);it<a.length;it++){if(V=a[it].value,u+=V,V<p&&(p=V),V>h&&(h=V),k=u*u*b,R=Math.max(h/k,k/p),R>Y){u-=V;break}Y=R}var It={value:u,dice:tt<_t,children:a.slice(Z,it)};if(s.push(It),It.dice){var Ht=o?_t*u/o:_t;ov(It,r,t,e,t+Ht),o&&(t+=Ht)}else{var le=o?tt*u/o:tt;ju(It,r,t,r+le,n),o&&(r+=le)}o-=u,Z=it}return s}var sv=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.listeners=[],t.onItemGroupToggleActive=function(e,n){return function(){var a=e.get("children").find(function(o){return o.get("class")==="item-background"});a&&a.attr(n?t.itemActiveBackgroundStyle:t.itemBackgroundStyle),t.getCanvas().draw()}},t}return r.prototype.destroy=function(){this.offEvents(),i.prototype.destroy.call(this)},r.prototype.initConfig=function(t){this.x=t.x,this.y=t.y,this.items=t.items||[],this.itemPadding=t.itemPadding||[2,8,2,8],this.backgroundStyle=(0,Q.__assign)({lineWidth:1,stroke:"#ffffff"},t.backgroundStyle||{}),this.itemBackgroundStyle=(0,Q.__assign)({fill:"#fff"},t.itemBackgroundStyle||{}),this.itemActiveBackgroundStyle=(0,Q.__assign)({fill:"#ccc",opacity:.2},t.itemActiveBackgroundStyle||{}),this.separator=t.separator||"/",this.separatorStyle=(0,Q.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.separatorStyle||{}),this.itemWidth=t.itemWidth,this.itemHeight=t.itemHeight,this.maxItemWidth=t.maxItemWidth,this.textStyle=(0,Q.__assign)({textBaseline:"top",fill:"#000000",opacity:.45},t.textStyle||{})},r.prototype.renderInner=function(t){var e=0,n=0;this.offEvents(),this.renderItems(t,e,n),Lo(this.group,this.x,this.y)},r.prototype.renderItems=function(t,e,n){var a=this,o=this.itemPadding,s=o[0],u=o[1],h=o[2],p=o[3],b,k=t.addShape("rect",{class:"breadcrumb-background",attrs:(0,Q.__assign)({x:e,y:n,width:1,height:1},this.backgroundStyle)});this.items.forEach(function(R,Y){var V=t.addGroup({id:"item-group-"+R.key,data:R,class:"item-group",attrs:{cursor:"pointer"}}),Z=V.addShape("rect",{id:"item-background-"+R.key,class:"item-background",attrs:(0,Q.__assign)((0,Q.__assign)({x:e,y:n,width:p+u,height:s+h},a.itemBackgroundStyle),{cursor:"pointer"})});Z.name="breadcrumb";var it=V.addShape("text",{id:"item-text-"+R.key,class:"item-text",attrs:(0,Q.__assign)((0,Q.__assign)({x:e+p,y:n+s,text:R.text},a.textStyle),{cursor:"pointer"})});it.name="breadcrumb";var tt=it.getBBox();b=a.itemHeight||tt.height;var _t=a.itemWidth||tt.width;a.maxItemWidth&&(_t=Math.min(_t,a.maxItemWidth));var It={x:e,y:n,width:_t+p+u,height:b+s+h};if(Z.attr("width",It.width),Z.attr("height",It.height),V.setClip({type:"rect",attrs:It}),e+=It.width,Y!==a.items.length-1){var Ht=t.addShape("text",{attrs:(0,Q.__assign)({x:e,y:n+s,text:a.separator},a.separatorStyle),class:"separator"});e+=Ht.getBBox().width}}),k.attr({width:e,height:b+s+h})},r.prototype.bindEvents=function(t){var e=this,n=this.items,a=t.get("children").filter(function(s){return s.get("class")==="item-group"}),o=function(s,u,h){return function(){var p=u.get("data"),b=n.find(function(k){return k.key===p});e.emit(h,{item:b})}};a.forEach(function(s){var u=o("click",s,"onItemClick"),h=o("dblclick",s,"onItemDblclick"),p=e.onItemGroupToggleActive(s,!0),b=e.onItemGroupToggleActive(s,!1);s.on("click",u),s.on("dblclick",h),s.on("mouseenter",p),s.on("mouseleave",b),e.listeners.push({target:s,event:"click",callback:u}),e.listeners.push({target:s,event:"dblclick",callback:h}),e.listeners.push({target:s,event:"mouseenter",callback:p}),e.listeners.push({target:s,event:"mouseleave",callback:b})})},r.prototype.offEvents=function(){this.listeners&&this.listeners.forEach(function(t){var e=t.target,n=t.event,a=t.callback;e.off(n,a)}),this.listeners=[]},r}(vr),lv=sv,bs=[1,0,0,0,1,0,0,0,1],xo=400,ko="easeQuadInOut";function uv(i,r,t){var e=$u(i),n=yl(r),a=n.width/e.width,o=n.height/e.height,s=(n.minX-e.minX)*a,u=(n.minY-e.minY)*o,h=zi([["s",a,o],["t",s,u]]),p=r.geometries[0];ws(p);var b=r.backgroundGroup.addGroup();b.set("zIndex",-100),b.setClip({type:"rect",attrs:{x:n.minX,y:n.minY,width:n.width,height:n.height}});var k=Zu(p,b);p.container.set("visible",!1),r.canvas.draw(),t(),window.setTimeout(function(){(0,y.each)(k,function(Z,it){it===0?Z.animate({matrix:h},xo,ko,function(){b.remove(),r.canvas.draw()}):Z.animate(zi,xo)}),p=r.geometries[0],ws(p);var R=p.getShapes();(0,y.each)(R,function(Z){Z.attr("opacity",0),Z.animate({opacity:1},xo,ko)});var Y=p.container;Y.stopAnimate(),Y.set("visible",!0),Y.attr("matrix",(0,y.clone)(bs)),Po(Y,[["s",e.width/n.width,e.height/n.height],["t",e.minX,e.minY]]);var V=(0,y.clone)(bs);p.container.animate({matrix:V},xo,ko,function(){Qu(p)}),r.canvas.draw()},16)}function Zu(i,r){var t=i.getShapes(),e=[];return(0,y.each)(t,function(n){var a=r.addShape("path",{attrs:(0,y.deepMix)({},n.attrs,{capture:!1})});e.push(a)}),e}function Ku(i,r,t){var e=r.geometries[0];ws(e);var n=e.container;n.attr("matrix",(0,y.clone)(bs));var a=r.backgroundGroup.addGroup();a.set("zIndex",-100);var o=Zu(e,a);n.set("visible",!1),r.canvas.draw(),t(),e=r.geometries[0],ws(e),n=e.container;var s=hv(e.getShapes(),i),u=$u(s),h=yl(r),p=n.get("parent");p.get("clipShape")||n.setClip({type:"rect",attrs:{x:h.minX,y:h.minY,width:h.width,height:h.height}}),fv(a,o,u,h);var b=h.width/u.width,k=h.height/u.height,R=(h.minX-u.minX)*b,Y=(h.minY-u.minY)*k,V=zi([["s",b,k],["t",R,Y]]);n.setMatrix(V),n.set("visible",!0),n.animate({matrix:bs},xo,ko,function(){Qu(e)})}function hv(i,r){var t;return(0,y.each)(i,function(e){var n=e.get("origin").data.name;n===r&&(t=e)}),t}function yl(i){var r=i.coordinateBBox,t={minX:r.minX,minY:r.minY,centerX:(r.maxX-r.minX)/2,centerY:(r.maxY-r.minY)/2,width:r.width,height:r.height};return t}function $u(i){var r=i.attr("path"),t=r[0][1],e=r[0][2],n=r[1][1],a=r[2][2],o={minX:t,minY:a,centerX:(n-t)/2,centerY:(e-a)/2,width:Math.abs(n-t),height:Math.abs(e-a)};return o}function fv(i,r,t,e){var n=t.width/e.width,a=t.height/e.height,o=zi([["s",n,a],["t",t.minX,t.minY]]);i.animate({matrix:o},xo,ko,function(){i.remove()}),(0,y.each)(r,function(s){s.animate({opacity:0},xo,ko)})}function ws(i){var r=i.labelsContainer;r.set("visible",!1)}function Qu(i){var r=i.labelsContainer;r.set("visible",!0)}var cv=100,ml=30,Ju=10,vv=function(i){i===void 0&&(i={});var r=(0,Q.__assign)({x:0,y:0,startNode:{name:"root"},itemWidth:cv,itemHeight:ml,padding:[0,0,0,0]},i);return r},Ss=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getInteractionRange=function(t,e){var n=vv(e),a=n.padding,o=a[0],s=a[1];if(t)return new at(t.minX,t.maxY-n.itemHeight-o-s,t.width,n.itemHeight+o+s)},r.prototype.start=function(t){var e=this,n=t.data.data;n.children&&(this.parentNode={color:t.target.attr("fill"),shape:t.target,data:{name:(0,y.clone)(this.currentNode.name),value:(0,y.clone)(this.currentNode.value)},depth:(0,y.clone)(this.currentDepth)},this.currentDepth++,uv(t.target,this.view,function(){e.update(n)}))},r.prototype.update=function(t){(0,y.hasKey)(this.cache,t.name)||(this.cache[t.name]=t);var e=this.plot.getTreemapData(t,t.depth);this.view.changeData(e),this.adjustScale(this.currentDepth),this.currentNode=t,this.render()},r.prototype.render=function(){if(this.breadcrumb){var t=this.getItems();this.breadcrumb.update({items:t}),this.breadcrumb.render(),this.layout()}else this.initGeometry(),this.cache={},this.saveOriginMapping(),this.container=this.plot.canvas.addGroup(),this.startNode||(this.startNode={name:"root"}),this.startNode.name==="root"?(this.startNodeName=(0,y.hasKey)(this.plot.options.data,"name")?this.plot.options.data.name:"root",this.currentNode=this.plot.options.data,this.currentDepth=1):(this.startNodeName=this.startNode.name,this.currentNode=this.startNode),this.y=this.view.coordinateBBox.maxY+Ju,this.breadcrumb=new lv({container:this.container,x:0,y:this.y,items:this.getItems()}),this.breadcrumb.init(),this.breadcrumb.render(),this.plot.canvas.draw(),this.layout();this.onInteraction()},r.prototype.clear=function(){},r.prototype.layout=function(){var t=this.container.getBBox().width,e=(this.plot.width-t)/2;this.breadcrumb.update({x:e,y:this.y}),this.breadcrumb.render()},r.prototype.getItems=function(){var t=[];if(this.currentNode.name&&this.currentNode.name===this.startNodeName){var e=this.getRootItem();t.push(e)}else{t=[];var n=[];this.findParent(this.currentNode,n),t.push(this.getRootItem()),(0,y.each)(n,function(a,o){t.push({key:String(o+2),text:a.name,data:a})}),t.push({key:String(n.length+2),text:this.currentNode.name,data:this.currentNode})}return t},r.prototype.findParent=function(t,e){if(t.parent)(0,y.hasKey)(this.cache,t.parent.name)?e.push(this.cache[t.parent.name]):e.push(t.parent),this.findParent(t.parent,e);else return},r.prototype.onInteraction=function(){var t=this;this.container.on("click",function(e){var n=e.target.get("parent");if(n&&n.get("class")==="item-group"){var a=n.get("data");if(a.data)if(a.text===t.startNodeName){var o=1;t.currentDepth-1===o?Ku(t.currentNode.name,t.view,function(){t.updateRoot(a)}):t.updateRoot(a),t.currentDepth=1}else{if(t.currentNode===a.data)return;var s=(0,y.clone)(t.currentDepth);t.currentDepth=parseInt(a.key),s-1===t.currentDepth?Ku(t.currentNode.name,t.view,function(){t.update(a.data)}):t.update(a.data)}}})},r.prototype.getRootItem=function(){var t=this.plot.options.data,e=(0,y.hasKey)(t,"name")?t.name:"root";return{key:"1",text:e,data:this.plot.rootData}},r.prototype.saveOriginMapping=function(){var t=this.plot.options,e=t.colorField,n=t.colors,a={field:e,values:n};this.originMapping=a},r.prototype.adjustScale=function(t){var e=this.view;if(this.mapping&&(0,y.hasKey)(this.mapping,String(t))){var n=(0,y.clone)(this.mapping[t]);if(n.values&&(0,y.isFunction)(n.values)){var a=n.values(this.parentNode,this.currentNode);n.values=a}this.view.geometries[0].color(n.field,n.values)}else{var n=(0,y.clone)(this.originMapping);this.view.geometries[0].color(n.field,n.values)}e.render()},r.prototype.initGeometry=function(){this.geometry=this.view.geometries[0];var t=this.view.viewBBox,e=this.geometry.container;e.setClip({type:"rect",attrs:{x:t.minX,y:t.minY,width:t.width,height:t.height}})},r.prototype.updateRoot=function(t){this.view.changeData(t.data),this.adjustScale(1),this.currentNode=this.plot.options.data,this.render()},r}(dn),dv=Ss;dn.registerInteraction("drilldown",Ss);var pv={drilldown:dv},gv={rect:"polygon",breadcrumb:"breadcrumb"},yv=Tt(gv);(0,y.assign)(pt,yv);var qu=4,xl=8;function mv(i,r){return!i.children||i.depth>=r}function xv(i,r,t){var e=i.attr("fontSize"),n=i.attr("text"),a=t.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:e}}),o=n.split(`
`),s=o.map(function(u){for(var h="",p=u.split(""),b=[],k=0;k<p.length;k++){var R=p[k];a.attr("text",h+=R);var Y=a.getBBox().width-1;if(Y>r){if(k===0)break;b.push(k),h=""}}return Et(p,b)});return a.remove(),s.join(`
`)}function th(i,r,t,e){for(var n=e.addShape("text",{attrs:{text:"...",x:0,y:0,fontSize:r}}),a=n.getBBox().width,o=e.addShape("text",{attrs:{text:"",x:0,y:0,fontSize:r}}),s="",u=t-a,h=0;h<i.length;h++){var p=i[h];o.attr("text",s+=p);var b=o.getBBox().width;if(b>=u){var k=s.substr(0,s.length-1);if(k.length>0)return k+"..."}}return o.remove(),n.remove(),s}var bl=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry().elements;(0,y.each)(t,function(e){var n=e.shape,a=n.get("origin").data,o=mv(a,r.plot.options.maxLevel);if(a.showLabel){var s=(0,y.clone)(r.options.style),u=r.getPosition(n,o),h=r.options.formatter,p=h?h(a.name):a.name,b=r.getTextBaseLine(o),k=r.container.addShape("text",{attrs:(0,y.deepMix)({},s,{x:u.x,y:u.y,text:p,fill:"black",textAlign:"center",textBaseline:b,fontWeight:o?300:600}),name:"label"});r.adjustLabel(k,n,o)}})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getPosition=function(r,t){var e=r.getBBox(),n=0,a=0;return t?(n=e.minX+e.width/2,a=e.minY+e.height/2):(n=e.x+e.width/2,a=e.y+4),{x:n,y:a}},i.prototype.getTextBaseLine=function(r){return r?"middle":"top"},i.prototype.adjustLabel=function(r,t,e){e?this.adjustLeafLabel(r,t):this.adjustParentLabel(r,t)},i.prototype.adjustLeafLabel=function(r,t){var e=t.getBBox(),n=r.getBBox(),a=(0,y.clone)(r.attr("text")),o=2,s=Math.max(r.attr("fontSize")-o,xl),u=e.x+e.width/2,h=e.y+e.height/2;r.attr({x:u,y:h,textAlign:"center",textBaseline:"middle",lineHeight:s,fontSize:s});var p=e.width-qu*2;if(n.width>e.width&&n.height>e.height){r.attr("text","");return}else if(p<s){r.attr("text","");return}if(n.width>e.width){var b=xv(r,p,this.container);r.attr({lineHeight:r.attr("fontSize"),text:b});var k=r.getBBox();if(k.height>e.height){var R=th(a,s,p,this.container);r.attr("text",R)}}},i.prototype.adjustParentLabel=function(r,t){var e=t.getBBox(),n=e.width-qu*2;if(r.getBBox().width>n){var a=th(r.attr("text"),r.attr("fontSize"),n,this.container);r.attr("text",a)}},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,y.clone)(t)}},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="polygon"})},i}(),bv=bl,wv=4,Ba=4,Bo=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="treemap",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{maxLevel:2,padding:[0,0,0,0],tooltip:{visible:!1,showTitle:!1,showCrosshairs:!1,showMarkers:!1,shared:!1},legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},xField:"x",yField:"y",label:{visible:!0,adjustPosition:!0,style:{stroke:"rgba(0,0,0,0)",lineWidth:0,fontSize:12}},meta:{x:{nice:!1},y:{nice:!1}},interactions:[{type:"tooltip"}]})},r.prototype.beforeInit=function(){var t=this;i.prototype.beforeInit.call(this);var e=this.options.interactions;e&&(0,y.each)(e,function(o){o.type==="drilldown"&&(t.isDrilldown=!0,t.options.maxLevel=1)});var n=this.options.data,a=this.getTreemapData(n);this.rootData=a},r.prototype.afterRender=function(){if(i.prototype.afterRender.call(this),this.options.label&&this.options.label.visible){var t=new bv((0,Q.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.geometryParser=function(){return"polygon"},r.prototype.getTreemapData=function(t,e){var n=this.getViewRange(),a=Uu(t,n.x,n.y,n.width,n.height);this.recursive(a,1);var o=[];return this.getAllNodes(a,o,e),o.sort(function(s,u){return s.depth-u.depth}),this.options.xField="x",this.options.yField="y",o},r.prototype.processData=function(){return this.rootData},r.prototype.coord=function(){},r.prototype.addGeometry=function(){var t=this,e=this.options,n=e.data,a=e.colorField,o=e.color,s=this.getTreemapData(n);this.rootData=s;var u=this.isNested(s);this.rect={type:"polygon",position:{fields:["x","y"]},color:{fields:[a],values:o},style:{fields:["depth"],callback:function(h){var p=t.adjustStyleByDepth(h,u);return(0,y.deepMix)({},p,t.options.rectStyle)}},tooltip:{fields:["name","value"]}},this.options.tooltip&&this.options.tooltip.formatter&&(this.rect.tooltip.callback=this.options.tooltip.formatter),this.setConfig("geometry",this.rect)},r.prototype.applyInteractions=function(){var t=this,e=this.options.interactions,n=this.view.interactions;(0,y.each)(e,function(a){var o=pv[a.type];if(o){var s=new o((0,y.deepMix)({},{view:t.view,plot:t,startEvent:"polygon:click"},a.cfg,o.getInteractionRange(t.layerBBox,a.cfg)));n[a.type]=s}})},r.prototype.animation=function(){i.prototype.animation.call(this),this.isDrilldown&&(this.rect.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,c)},r.prototype.recursive=function(t,e){var n=this,a=this.options.colorField;(0,y.each)(t,function(o){(0,y.each)(o.children,function(s){s.depth=e,e>1&&(s.parent=o),(0,y.hasKey)(s,a)||(s[a]=o[a]),s.showLabel=!0;var u=n.isLeaf(s);if(!u){var h=Math.abs(s.y1-s.y0),p=n.getLabelHeight(),b=h/2>p?p:Ba;s.showLabel=b!==Ba;var k=Uu(s,s.x0+Ba,s.y0+b,s.x1-Ba,s.y1-Ba);n.fillColorField(k,a,s[a]),n.recursive(k,s.depth+1)}})})},r.prototype.getAllNodes=function(t,e,n){var a=this,o=n||this.options.maxLevel,s=this.getViewRange();(0,y.each)(t,function(u){(0,y.hasKey)(u,"x0")&&u.depth<=o&&e.push((0,Q.__assign)((0,Q.__assign)({},u),{x:[u.x0,u.x1,u.x1,u.x0],y:[s.height-u.y1,s.height-u.y1,s.height-u.y0,s.height-u.y0]})),(0,y.hasKey)(u,"children")&&a.getAllNodes(u.children,e)})},r.prototype.fillColorField=function(t,e,n){(0,y.each)(t,function(a){(0,y.hasKey)(a,e)||(a[e]=n)})},r.prototype.getLabelHeight=function(){var t=this.options.label,e=this.getPlotTheme().label.style.fontSize,n=0;if(t&&t.visible){var a=t.style;n=a&&a.fontSize?a.fontSize:e}return n+wv*2},r.prototype.isLeaf=function(t){return!t.children||t.children.length===0},r.prototype.isNested=function(t){var e=this.options.maxLevel;if(e===1)return!1;for(var n=!1,a=0;a<t.length;a++)if(t[a].children){n=!0;break}return n},r.prototype.adjustStyleByDepth=function(t,e){var n=this.options.maxLevel;return e?t===1?{lineWidth:1,stroke:"black",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.3)",opacity:t/n}:{lineWidth:1,stroke:"rgba(0,0,0,0.9)",opacity:.9}},r}(qn),wl=Bo;An("treemap",Bo);var eh=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="treemap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=wl.getDefaultOptions,r}(un),Qa=eh,Ma=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="step-line",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{step:"hv"})},r}(Oo);An("step-line",Ma);var Sv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="step-line",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Ma.getDefaultOptions,r}(un),Cs=Sv;function rh(i,r){var t=[],e=i.get("origin").points;return(0,y.each)(e,function(n){t.push(r.convertPoint(n))}),t}var Cv=function(){function i(r){(0,y.deepMix)(this,this.constructor.getDefaultOptions(r),r),this._init()}return i.getDefaultOptions=function(r){var t=r.transpose;return{visible:!0,size:t?32:80,spacing:t?8:12,offset:t?32:0,arrow:{visible:!0,headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},value:{visible:!0,style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)"},formatter:function(e,n){return(100*n/e).toFixed(2)+"%"}},animation:(0,y.deepMix)({},vl.DEFAULT_ANIMATE_CFG)}},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype.draw=function(){var r=this,t=this.transpose,e=this.view.getScaleByField(this.field).values,n=this.view.geometries[0],a=n.getShapes(),o,s,u,h;t?a.forEach(function(p,b){s=e[b],b++>0&&r._drawTag(u,h,p,s),h=s,u=p}):a.forEach(function(p,b){h=e[b],b++>0&&r._drawTag(p,h,o,s),s=h,o=p})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._drawTag=function(r,t,e,n){var a=this.transpose,o=this.view.geometries[0].coordinate,s=rh(r,o)[a?3:0],u=rh(e,o)[a?0:3];this._drawTagArrow(s,u),this._drawTagValue(s,t,u,n)},i.prototype._drawTagArrow=function(r,t){var e=this.spacing,n=this,a=n.size,o=n.offset,s=n.animation,u=n.transpose,h=this.arrow.headSize,p=t.y-r.y,b=t.x-r.x,k;u?(b-h)/2<e?(e=Math.max(1,(b-h)/2),k=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e,t.y-o-a/2]]):k=[[r.x+e,r.y-o],[r.x+e,r.y-o-a],[t.x-e-h,t.y-o-a],[t.x-e,t.y-o-a/2],[t.x-e-h,t.y-o]]:(p-h)/2<e?(e=Math.max(1,(p-h)/2),k=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a/2,t.y-e]]):k=[[r.x+o,r.y+e],[r.x+o+a,r.y+e],[t.x+o+a,t.y-e-h],[t.x+o+a/2,t.y-e],[t.x+o,t.y-e-h]];var R=this.container.addShape("polygon",{name:"arrow",attrs:(0,Q.__assign)((0,Q.__assign)({},this.arrow.style),{points:k})});s!==!1&&this._fadeInTagShape(R)},i.prototype._drawTagValue=function(r,t,e,n){var a=this,o=a.size,s=a.offset,u=a.animation,h=a.transpose,p=this.value.formatter(t,n),b=this.container.addShape("text",{name:"value",attrs:(0,Q.__assign)((0,Q.__assign)({},this.value.style),{text:p,x:h?(r.x+e.x)/2:r.x+s+o/2,y:h?r.y-s-o/2:(r.y+e.y)/2,textAlign:"center",textBaseline:"middle"})});if(h){var k=e.x-r.x,R=b.getBBox().width;if(R>k){var Y=R/p.length,V=Math.max(1,Math.ceil(k/Y)-1),Z=p.slice(0,V)+"...";b.attr("text",Z)}}u!==!1&&this._fadeInTagShape(b)},i.prototype._fadeInTagShape=function(r){var t=this.animation,e=r.attr("opacity");r.attr("opacity",0);var n=(0,y.get)(t,"appear",vl.DEFAULT_ANIMATE_CFG.appear).duration;r.animate({opacity:e},n)},i}(),nh=Cv;function Mv(i){var r=i.getResponsiveTheme(),t=i.canvas;new Oa({plot:i,responsiveTheme:r,dim:"x"}),new Oa({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var Ev=[],ih=[{name:"responsiveAxis",method:Mv}],Av={preRender:Ev,afterRender:ih},Tv=function(i){var r=i.opacity||1;return{opacity:r*.5}},Pv=function(i){var r=i.opacity||1;return{opacity:r*.5}},Sl={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:Tv,disable:Pv,selected:{lineWidth:1,stroke:"black"}}};Xi("bar",Sl);function Da(i){var r=i.indexOf("#")===0?i.substr(1):i,t=[];return t.push(parseInt(r.substr(0,2),16)),t.push(parseInt(r.substr(2,2),16)),t.push(parseInt(r.substr(4,2),16)),t}function Cl(i){var r;return r=Math.round(i),r=r.toString(16),r.length===1&&(r="0"+i),r}function Tp(i){return"#"+(Cl(i[0])+Cl(i[1])+Cl(i[2]))}function Ms(i,r){var t;return(0,y.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var Ml=function(i){var r=Da(i),t=r[0],e=r[1],n=r[2],a=(t*299+e*587+n*114)/1e3<128;return a},ts=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a=this.options,o=a.style,s=a.formatter,u=[].concat(t.getModel().mappingData),h=this.getValue(t);return(0,y.deepMix)({},o,(0,Q.__assign)((0,Q.__assign)({},this.getPosition(t)),{text:s?s(h,(n={},n[q.YI]=u[0]._origin,n.mappingDatum=u[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):h,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(t),textBaseline:this.getTextBaseline()}))},r.prototype.adjustLabel=function(t,e){var n=this.options,a=n.adjustPosition,o=n.style;if(a){var s=this.getDefaultOffset(),u=t.getBBox(),h=this.getElementShapeBBox(e);if(h.width<=u.width){var p=h.maxX+this.options.offsetX+s;t.attr("x",p),t.attr("fill",o.fill)}}},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Q.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.getValue=function(t){return(0,y.get)(t.getData(),this.layer.options.xField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,u=a.minY,h=a.height,p=a.width,b=this.options,k=b.offsetX,R=b.offsetY,Y=b.position,V=u+h/2+R,Z=n<0?-1:1,it;if(Y==="left"){var tt=n>0?o:s;it=tt+e*Z+k}else if(Y==="right"){var tt=n>0?s:o;it=tt+e*Z+k}else it=o+p/2+k;return{x:it,y:V}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="right"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=Da(n),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,u=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],h=Ms(u,s);return h}var p=this.options.style.fill;return p},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="right"&&o&&e!=="black"?null:void 0},r.prototype.getTextAlign=function(t){var e=this.getValue(t),n=this.options.position,a={right:"left",left:"left",middle:"center"},o={right:"right",left:"right",middle:"center"};return e<0?o[n]:a[n]},r.prototype.getTextBaseline=function(){return"middle"},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,y.each)(n.get("origin").points,function(R){a.push(e.coord.convertPoint(R))});var o=a.map(function(R){return R.x}),s=Math.min.apply(Math,o),u=Math.max.apply(Math,o),h=a.map(function(R){return R.y}),p=Math.min.apply(Math,h),b=Math.max.apply(Math,h),k=new at(s,p,u-s,b-p);return k},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(gn),ah=ts;vn("bar",ts);var oh=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.maxX,u=a.minY,h=a.height,p=this.options,b=p.offsetX,k=p.offsetY,R=u+h/2+k,Y=n<0?-1:1,V=n>0?s:o,Z=V+e*Y+b;return{x:Z,y:R}},r.prototype.getTextAlign=function(t){var e=this.getValue(t);return e>0?"left":"right"},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,y.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),s=e.getElementShapeBBox(o);return s.height>=a.height})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,u=s.darkStyle,h=s.lightStyle,p=(0,y.groupBy)(e,function(b){return b.get(q.jQ)[q.wv][o]});(0,y.each)(e,function(b){var k=p[b.get(q.jQ)[q.wv][o]]||[],R=b.get("element"),Y=R.shape,V=Ml(Y.attr("fill")),Z=n.getElementShapeBBox(R),it=at.fromBBoxObject(b.getBBox());if(Bn(a,Z)<=0&&b.set("visible",!1),it.width>Z.width){var tt=(0,y.findIndex)(k,function(It){return It===b});tt!==k.length-1&&b.set("visible",!1)}else{b.attr({x:Z.x+Z.width/2,textAlign:"center"});var _t=it.width>Z.width||it.height>Z.height;_t?b.attr({stroke:h==null?void 0:h.stroke}):b.attr({fill:V?h==null?void 0:h.fill:u==null?void 0:u.fill,fillOpacity:V?h==null?void 0:h.fillOpacity:u==null?void 0:u.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],u=[],h=(0,y.groupBy)(a,function(R){return R.get(q.jQ)[q.wv][o]}),p=(0,y.uniq)((0,y.map)(a,function(R){return R.get(q.jQ)[q.wv][o]})),b;for((0,y.size)(p)>0&&(b=p.shift(),(0,y.each)(h[b],function(R){return u.push(R)})),(0,y.size)(p)>0&&(b=p.pop(),(0,y.each)(h[b],function(R){return u.push(R)})),(0,y.each)(p.reverse(),function(R){(0,y.each)(h[R],function(Y){return u.push(Y)})});u.length>0;){var k=u.shift();k.get("visible")&&(En(k,n),Nn(k,s)?k.set("visible",!1):s.push(k))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,y.each)(t,function(o,s){s%a==0?n.push(o):o.set("visible",!1)}),n},r}(ah),sh=oh;vn("bar-auto",oh);var lh={bar:"interval"},Lv=Tt(lh);(0,y.assign)(pt,Lv);var es={bar:"interval"},bo={interval:"bar"},uh=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bar",t}return r.getDefaultOptions=function(){var t={xAxis:{visible:!0,line:{visible:!1},title:{visible:!0},label:{visible:!1},tickLine:{visible:!1},grid:{visible:!1},nice:!0},yAxis:{visible:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!0},title:{visible:!1,spacing:12}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!0,position:"left",adjustColor:!0},legend:{visible:!1,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}};return(0,y.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this);var t=this.options;t.responsive&&t.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),t.responsive&&t.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new nh((0,Q.__assign)({view:this.view,field:t.xField,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?es[e]:bo[e]},r.prototype.processData=function(t){var e=t&&t.slice().reverse(),n=this.options.yField,a=[];return(0,y.each)(e,function(o){var s=(0,y.clone)(o);s[n]=s[n].toString(),a.push(s)}),a},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={type:"cat"},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),e[t.xField]={},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.axis=function(){var t=Ln("axis",{plot:this,dim:"x"}),e=Ln("axis",{plot:this,dim:"y"});t&&(t.position="left"),e&&(e.position="bottom");var n={};n[this.options.xField]=t,n[this.options.yField]=e,this.setConfig("axes",n)},r.prototype.adjustBar=function(t){return null},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.yField,t.xField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,y.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustBar(e),this.bar=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.bar.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,F)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var s=sr(this.view,"interval");this.doRenderLabel(s,(0,Q.__assign)({type:"bar",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.bar.tooltip.fields.push(this.options.colorField)))},r.prototype.applyResponsive=function(t){var e=this,n=Av[t];(0,y.each)(n,function(a){var o=a;o.method(e)})},r.prototype.getLabelOptionsByPosition=function(t){if(t==="middle")return{offset:0};if(t==="left")return{offset:7,style:{stroke:null,lineWidth:0}};if(t==="right")return{offset:4}},r}(qn),Do=uh;An("bar",uh);var _v=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="bar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Do.getDefaultOptions,r}(un),hh=_v;Xi("stackedBar",Sl);var Iv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){if(this.options.adjustPosition){var n=t.getBBox(),a=this.getElementShapeBBox(e);a.maxX<=n.maxX&&t.set("visible",!1)}},r}(ah),Pp=null;vn("stacked-bar",Iv);var Ov=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(sh),fh=null;vn("stacked-bar-auto",Ov);var ch=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!0},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!1,spacing:12}},legend:{visible:!0,position:"top-left",offsetY:0}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustBar=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.xField,o=t[a];if(n==null?void 0:n.visible){var s=sr(this.view,"interval");this.doRenderLabel(s,(0,Q.__assign)({type:"stacked-bar",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(Do),El=ch;An("stackedBar",ch);var kv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=El.getDefaultOptions,r}(un),Al=kv;Xi("groupedBar",Sl);var Tl=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedBar",t.baseType="bar",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,grid:{visible:!0}},yAxis:{visible:!0,title:{visible:!1}},label:{visible:!0,position:"right",adjustColor:!0},legend:{visible:!0,position:"right-top",offsetY:0}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=(0,y.valuesOfKey)(this.options.data,this.options.groupField)||[];this.view.on("tooltip:change",function(e){var n=e.items,a=n===void 0?[]:n,o=(0,y.sortBy)(a.slice(),function(s){return t.indexOf(s.name)}).reverse();o.forEach(function(s,u){e.items[u]=s})})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.scale=function(){var t={};t[this.options.groupField]={values:(0,y.valuesOfKey)(this.options.data,this.options.groupField)},this.options.meta?this.options.meta=(0,y.deepMix)({},this.options.meta,t):this.options.meta=t,i.prototype.scale.call(this)},r.prototype.adjustBar=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.bar.tooltip={};var t=this.options.tooltip;t.fields&&(this.bar.tooltip.fields=t.fields),t.formatter&&(this.bar.tooltip.callback=t.formatter,t.fields||(this.bar.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(Do),vh=Tl;An("groupedBar",Tl);var dh=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=vh.getDefaultOptions,r}(un),ph=dh,Es=function(i,r,t){var e=(0,y.groupBy)(i,r);e=(0,y.mapValues)(e,function(o){return(0,y.map)(o,function(s){return(0,y.map)(t,function(u){return s[u]})})}),e=(0,y.mapValues)(e,y.flatten),e=(0,y.mapValues)(e,function(o){return(0,y.map)(o,function(s){var u=Number.parseFloat(s);return!(0,y.isNumber)(u)||isNaN(u)?0:u})});var n=(0,y.mapValues)(e,function(o){return(0,y.reduce)(o,function(s,u){return s+u},0)}),a=(0,y.map)(i,function(o){var s=(0,Q.__assign)((0,Q.__assign)({},o),{_origin:o,total:n[o[r]]});return(0,y.each)(t,function(u){s[u]=o[u]/(n[o[r]]||1)}),s});return(0,y.each)((0,y.groupBy)(a,r),function(o){var s=0;(0,y.each)(o,function(u,h){(0,y.each)(t,function(p,b){(s+u[p]>=1||h===o.length-1&&b===t.length-1&&s>0)&&(u[p]=1-s),s+=u[p]})})}),a},gh=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedBar",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},grid:{visible:!1},title:{visible:!0,formatter:function(t){return t+" (%)"}},label:{visible:!1,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField,o=i.prototype.processData.call(this,t);return Es(o,a,[n])},r.prototype.scale=function(){var t={},e=this.options.xField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,y.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(El),yh=gh;An("percentStackedBar",gh);var Bv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=yh.getDefaultOptions,r}(un),mh=Bv,xh=8;function Dv(i,r){var t;return(0,y.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var bh=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.options.leftStyle||(this.options.leftStyle=this.options.style),this.options.rightStyle||(this.options.rightStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.elements,n=t.coordinate;this.coord=n,(0,y.each)(e,function(a){var o=a.shape,s=r.getPosition(o),u=r.getValue(o),h=r.getTextAlign(),p=[];(0,y.each)(s,function(b,k){var R=k===0?r.options.leftStyle:r.options.rightStyle,Y=r.getTextColor(o,k);r.options.position==="inner"&&r.options.adjustColor&&Y!=="black"&&(R.stroke=null);var V=r.options.formatter,Z=V?V(u[k]):u[k],it=r.container.addShape("text",{attrs:(0,y.deepMix)({},R,{x:b.x,y:b.y,text:Z,fill:Y,textAlign:h[k],textBaseline:"middle"}),name:"label"});p.push(it),r.doAnimation(it)}),o.set("labelShapes",p),r.adjustPosition(p[0],p[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,y.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new at(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:xh,offsetY:0,style:(0,y.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.maxX,a=t.minY,o=t.height,s=this.options,u=s.offsetX,h=s.offsetY,p=a+o/2+h,b,k;return this.options.position==="outer"?(b=e-u,k=n+u):(b=e+u,k=n-u),[{x:b,y:p},{x:k,y:p}]},i.prototype.getValue=function(r){var t=this.plot.options.xField;return r.get("origin").data[t]},i.prototype.getTextAlign=function(){return this.options.position==="outer"?["right","left"]:["left","right"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=Da(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Dv(s,o);return u}var h=t===0?this.options.leftStyle.fill:this.options.rightStyle.fill;return h},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.x[0],o=n.x[1],s=Math.abs(o-a),u=this.view.coordinateBBox,h=[r.getBBox(),t.getBBox()],p=r.attr("x"),b=t.attr("x");if(this.options.adjustPosition&&this.options.position==="inner"){var k=h[0].width+h[1].width,R=h[0].maxX-h[1].minX>2,Y=k>s;(R||Y)&&(p=a-this.options.offsetX,r.attr("fill",this.options.leftStyle.fill),r.attr("textAlign","right"),h[0]=r.getBBox(),b=o+this.options.offsetX,t.attr("fill",this.options.rightStyle.fill),t.attr("textAlign","left"),h[1]=t.getBBox())}h[0].minX<u.minX&&(p=u.minX+xh,r.attr("textAlign","left")),r.attr("x",p),t.attr("x",b),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),Fv=bh,rs;function wh(i,r){var t=i.getBBox(),e=t.minX+t.width/2;i.setClip({type:"rect",attrs:{x:e,y:t.minY,width:0,height:t.height}});var n=i.get("clipShape");n.animate({width:t.width,x:t.minX},r.duration,r.easing,function(){i.setClip(null)},r.delay)}wh.animationName="clipInFromCenter";function Pl(i){rs=i}function Sh(i,r){var t=Rv(i).attr("path"),e=(0,y.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function Rv(i){var r=i.id,t;return(0,y.each)(rs,function(e){e.id===r&&(t=e)}),t}Sh.animationName="updateFromCenter",(0,q.ph)("clipInFromCenter",wh),(0,q.ph)("updateFromCenter",Sh);var Ch=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeBar",t}return r.getDefaultOptions=function(){return(0,y.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"},xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!0,autoHide:!0},title:{visible:!0,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,y.each)(e,function(n){var a=n.elements;(0,y.each)(a,function(o){t.push(o.shape)})}),Pl(t),i.prototype.afterRender.call(this)},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new Fv((0,Q.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r.prototype.animation=function(){i.prototype.animation.call(this)},r}(Do),Mh=Ch;An("rangeBar",Ch);var Nv=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="rangeBar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Mh.getDefaultOptions,r}(un),Eh=Nv,Ah=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(Ru),Yv=Ah;vn("area-point",Ah);var Th=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.layoutLabels=function(t,e){i.prototype.layoutLabels.call(this,t,e),this.adjustAreaLabelsStyle(e)},r.prototype.adjustAreaLabelsStyle=function(t){var e=this.view,n=this.options,a=n.darkStyle,o=n.lightStyle,s=sr(e,"area"),u=gr(s).sort(function(h,p){return p.getBBox().height-h.getBBox().height});(0,y.each)(t,function(h){var p=h.getBBox(),b=Br(p.x,p.y,p.width,p.height),k=(0,y.map)(u,function(V){return{area:V,matches:(0,y.filter)(b,function(Z){return!!V.isHit(Z[0],Z[1])}).length}}).sort(function(V,Z){return V.matches-Z.matches});if((0,y.last)(k).matches>0){var R=(0,y.last)(k).area.attr("fill"),Y=Ml(R);h.attr({fill:Y?o==null?void 0:o.fill:a==null?void 0:a.fill,fillOpacity:Y?o.fillOpacity:a.fillOpacity,stroke:Y?o==null?void 0:o.stroke:a==null?void 0:a.stroke})}})},r}(jc),Gv=Th;vn("area-point-auto",Th);function zv(i){var r=i.getResponsiveTheme(),t=i.canvas;new Oa({plot:i,responsiveTheme:r,dim:"x"}),new Oa({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var Xv=[],Hv=[{name:"responsiveAxis",method:zv}],Vv={preRender:Xv,afterRender:Hv},Ph={area:"area",line:"line",point:"point"},Lh=Tt(Ph);(0,y.assign)(pt,Lh);var Wv=function(i){var r=i.opacity||1;return{opacity:r}},_h=function(i){var r=i.opacity||1;return{opacity:r*.5}},jv=function(i){var r=i.opacity||1;return{opacity:r}},Uv=function(i){var r=i.opacity||1;return{opacity:r*.5}},Zv=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},Kv=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},Ja=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},Ih=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}},Oh={areaStyle:{normal:{},active:Wv,disable:_h,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:jv,disable:Uv,selected:Zv},pointStyle:{normal:{},active:Kv,disable:Ih,selected:Ja},label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",fillOpacity:1,stroke:"#2c3542"}}};Xi("area",Oh);var m={area:"area",line:"line",point:"point"},g=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="area",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{smooth:!1,areaStyle:{opacity:.25},line:{visible:!0,size:2,style:{opacity:1,lineJoin:"round",lineCap:"round"}},point:{visible:!1,size:4,shape:"point"},label:{visible:!1,type:"point"},legend:{visible:!0,position:"top-left",wordSpacing:4},tooltip:{visible:!0,shared:!0,showCrosshairs:!0,crosshairs:{type:"x"},offset:20}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return m[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){return null},r.prototype.addGeometry=function(){var t=this.options,e=Ci("area","main",{plot:this});this.area=e,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.adjustArea(e),this.setConfig("geometry",e),this.addLine(),this.addPoint()},r.prototype.adjustArea=function(t){},r.prototype.adjustLine=function(t){},r.prototype.adjustPoint=function(t){},r.prototype.addLine=function(){var t=this.options,e=(0,y.deepMix)({},t.line);if(e.visible){var n=Ci("line","guide",{type:"line",plot:this,line:e});this.adjustLine(n),this.setConfig("geometry",n),this.line=n}},r.prototype.addPoint=function(){var t=this.options,e=(0,y.deepMix)({},t.point);if(e.visible){var n=Ci("point","guide",{plot:this});this.adjustPoint(n),this.setConfig("geometry",n),this.point=n}},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n.visible){var s=sr(this.view,"area");this.doRenderLabel(s,(0,Q.__assign)({type:"area-point",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area.animate=!1,this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.label=function(){},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField],this.options.seriesField&&this.area.tooltip.fields.push(this.options.seriesField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,L)},r.prototype.applyResponsive=function(t){var e=this,n=Vv[t];(0,y.each)(n,function(a){var o=a;o.method(e)})},r}(qn),l=g;An("area",g);var f=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="area",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=l.getDefaultOptions,r}(un),E=f,D=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getShapeInfo=function(t){var e=t.get("origin").points,n=e[e.length-1],a=t.attr("stroke"),o=this.plot.options.stackField,s=t.get("origin").data[0][o],u=(0,y.reduce)(n.y,function(h,p){return h+p},0)/(0,y.size)(n.y);return{x:n.x,y:u,color:a,name:s}},r}(Yu),z=D,U=12,lt=.01,Bt=100,Ut=12;function $t(i){var r=-Infinity,t=Infinity,e=-Infinity;return(0,y.each)(i,function(n){t=Math.min(n.x,t),e=Math.max(n.x,e);var a=Math.abs(n.y[0]-n.y[1]);r=Math.max(r,a)}),{xRange:[t,e],maxHeight:r}}function Kt(i,r,t){var e=r[0],n=r[r.length-1];(0,y.each)(r,function(o){if(o.x===i)return o.y[t];o.x<i&&o.x>e.x&&(e=o),o.x>i&&o.x<n.x&&(n=o)});var a=(i-e.x)/(n.x-e.x);return e.y[t]*(1-a)+n.y[t]*a}function ae(i,r){var t;for(t=0;t<i.length;t++){var e=i[t];if(e.x===r||e.x>r)break}return t}var ye=function(){function i(r){this.destroyed=!1,this.scaleFactor=[],this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.plot.options.stackField,e=this.getGeometry().dataArray,n=[];(0,y.each)(e,function(o,s){var u=r.drawLabel(o,s);u&&(n.push((0,y.deepMix)({},o[0],u)),r.scaleFactor.push(u.scaleFactor))});var a=[];(0,y.each)(n,function(o,s){var u=r.options,h=u.style,p=u.offsetX,b=u.offsetY,k=r.getFontSize(s),R=r.options.formatter,Y=R?R(o._origin[t]):o._origin[t],V=r.container.addShape("text",{attrs:(0,y.deepMix)({},{x:o.x+p,y:o.y+b,text:Y,fill:o.color,fontSize:k,textAlign:"center",textBaseline:"top"},h),name:"label"});a.push(V)}),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=(0,y.clone)(r.label.style);return t.stroke=null,delete t.fill,{offsetX:0,offsetY:0,style:t,autoScale:!0}},i.prototype.drawLabel=function(r,t){var e=$t(r),n=e.xRange,a=e.maxHeight,o=n[1]-n[0],s=this.getInterpolatedPoints(n[0],o,r),u=this.getLabelBbox(t),h={xRange:n,aspect:u.width/u.height,data:s,justTest:!0},p=this.bisection(Ut,a,this.testFit,h,lt,Bt);if(p!==null){h.justTest=!1;var b=this.testFit(h);return b.x=b.x,b.y=b.y0+(b.y1-b.y0)/2,b.scaleFactor=p/u.height*.2,b}},i.prototype.getInterpolatedPoints=function(r,t,e){for(var n=[],a=2,o=r;o<t;o+=a){var s=Kt(o,e,0),u=Kt(o,e,1);n.push({x:o,y:[s,u]})}return n},i.prototype.bisection=function(r,t,e,n,a,o){for(var s=0;s<o;s++){var u=(r+t)/2,h=n;h.height=u,h.width=u*h.aspect;var p=e(h),b=(t-r)/2<a;if(p&&b)return u;p?r=u:t=u}return null},i.prototype.testFit=function(r){for(var t=r.xRange,e=r.width,n=r.height,a=r.data,o=r.justTest,s=0;s<a.length;s++){var u=a[s],h=u.x,p=h+e;if(p>t[1])break;for(var b=ae(a,p),k=-Infinity,R=null,Y=Infinity,V=s;V<b;V++){var Z=a[V].y[1],it=a[V].y[0];if(it<Y&&(Y=it),Z>k&&(k=Z,R=it),Y-k<n)break}if(Y-k>=n)return o?!0:{x:h,y0:k,y1:R,width:e,height:n}}return!1},i.prototype.getLabelBbox=function(r){var t=(0,y.clone)(this.plot.theme.label.textStyle);t.fontSize=U;var e=this.container.addShape("text",{attrs:(0,Q.__assign)({text:r,x:0,y:0},t)}),n=e.getBBox();return e.remove(),n},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="area"})},i.prototype.getFontSize=function(r){if(this.options.autoScale){var t=this.scaleFactor[r];return U*t}return U},i}(),Ae=ye,$e={lineLabel:{Ctr:z},areaLabel:{Ctr:Ae}};function nr(i,r,t){if(i.options[r]&&i.options[r].visible){var e=$e[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var ir=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r}(Yv),_r=null;vn("stackedArea-point",ir);var Gr=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.sortLabels=function(t,e){var n=[];return e.length>0&&n.push(e.shift()),e.length>0&&n.push(e.pop()),n.push.apply(n,e),n},r}(Gv),qr=null;vn("stackedArea-point-auto",Gr),Xi("stackedArea",Oh);var mn=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.plotComponents=[],t.type="stackedArea",t.baseType="area",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!1,type:"area"}})},r.prototype.beforeInit=function(){var t=(0,y.get)(this.options,["label","visible"]),e=(0,y.get)(this.options,["label","type"]),n=this.options;t&&(e==="line"&&(n.lineLabel=this.options.label),e==="area"&&(n.areaLabel=this.options.label)),i.prototype.beforeInit.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.label=function(){var t=this.options,e=t.label;if(e&&e.visible===!1){this.line&&(this.line.label=!1),this.point&&(this.point.label=!1),this.area.label=!1;return}},r.prototype.adjustArea=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustLine=function(t){t.adjust=[{type:"stack"}]},r.prototype.adjustPoint=function(t){t.adjust=[{type:"stack"}]},r.prototype.afterRender=function(){this.renderPlotComponents(),this.options.responsive=!1,i.prototype.afterRender.call(this)},r.prototype.geometryTooltip=function(){this.area.tooltip={};var t=this.options.tooltip;t.fields&&(this.area.tooltip.fields=t.fields),t.formatter&&(this.area.tooltip.callback=t.formatter,t.fields||(this.area.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r.prototype.renderPlotComponents=function(){var t=this,e=["areaLabel","lineLabel"];(0,y.each)(e,function(n){var a=(0,Q.__assign)({view:t.view,plot:t},t.options[n]),o=nr(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(l),kn=mn;An("stackedArea",mn);var Rn=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=kn.getDefaultOptions,r}(un),cn=Rn,Vn=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedArea",t.baseType="stackedArea",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{visible:!0,label:{visible:!0,formatter:function(t){var e=/%/gi;return t.replace(e,"")}}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Es(t,n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[this.options.yField]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,y.deepMix)({},t,this.options.meta),i.prototype.scale.call(this)},r}(kn),vi=Vn;An("percentStackedArea",Vn);var la=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=vi.getDefaultOptions,r}(un),mi=la;function Mi(i){var r=i.getResponsiveTheme(),t=i.canvas;new Oa({plot:i,responsiveTheme:r,dim:"x"}),new Oa({plot:i,responsiveTheme:r,dim:"y"}),t.draw()}var Fa=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getType=function(){return(0,y.get)(this.plot.options,["label","position"],"inner")},r}(Du);function Fo(i){var r=i.getResponsiveTheme();new Fa({plot:i,responsiveTheme:r})}var kh=[],$v=[{name:"responsiveAxis",method:Mi},{name:"responsiveLabel",method:Fo}],Qv={preRender:kh,afterRender:$v},Bh={label:{top:{constraints:[{name:"elementCollision"}],rules:{elementCollision:[{name:"nodeJitterUpward"},{name:"nodesResamplingByState",option:{keep:["min","max","median"]}},{name:"textHide"}]}}}};vs("column",Bh);var As=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getLabelItemAttrs=function(t,e){var n,a,o=this.options,s=o.style,u=o.formatter,h=[].concat(t.getModel().mappingData),p=this.getValue(t);return(0,y.deepMix)({},s,(0,Q.__assign)((0,Q.__assign)({},this.getPosition(t)),{text:u?u(p,(n={},n[q.YI]=(a=h[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=h[0],n.mappingDatumIndex=0,n.element=t,n.elementIndex=e,n),e):p,fill:this.getTextFill(t),stroke:this.getTextStroke(t),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseLine()}))},r.prototype.getDefaultOptions=function(){var t=this.layer.theme,e=t.label,n=e===void 0?{}:e;return(0,Q.__assign)({offsetX:0,offsetY:0,adjustPosition:!0},n)},r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=this.getDefaultOffset(),o=t.getBBox(),s=this.getElementShapeBBox(e);if(s.height<=o.height){var u=s.minY+this.options.offsetY-a;t.attr("y",u),t.attr("textBaseline","bottom"),t.attr("fill",this.options.style.fill)}}},r.prototype.getValue=function(t){return(0,y.get)(t.getData(),this.layer.options.yField)},r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,u=a.maxY,h=a.height,p=a.width,b=this.options,k=b.offsetX,R=b.offsetY,Y=b.position,V=o+p/2+k,Z=n>0?-1:1,it;if(Y==="top"){var tt=n>0?s:u;it=tt+e*Z+R}else if(Y==="bottom"){var tt=n>0?u:s;it=tt+e*Z+R}else it=s+h/2+R;return{x:V,y:it}},r.prototype.getTextFill=function(t){var e=t.shape;if(this.options.adjustColor&&this.options.position!=="top"){var n=e.attr("fill"),a=e.attr("opacity")?e.attr("opacity"):1,o=Da(n),s=Math.round(o[0]*.299+o[1]*.587+o[2]*.114)/a,u=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],h=Ms(u,s);return h}var p=this.options.style.fill;return p},r.prototype.getTextStroke=function(t){var e=this.getTextFill(t),n=this.options,a=n.position,o=n.adjustColor;return a!=="top"&&o&&e!=="black"?null:void 0},r.prototype.getElementShapeBBox=function(t){var e=this,n=t.shape,a=[];(0,y.each)(n.get("origin").points,function(R){a.push(e.coord.convertPoint(R))});var o=a.map(function(R){return R.x}),s=Math.min.apply(Math,o),u=Math.max.apply(Math,o),h=a.map(function(R){return R.y}),p=Math.min.apply(Math,h),b=Math.max.apply(Math,h),k=new at(s,p,u-s,b-p);return k},r.prototype.getTextAlign=function(){return"center"},r.prototype.getTextBaseLine=function(){return"middle"},r.prototype.getLabelOffset=function(){return{x:0,y:0}},r}(gn),Ea=As;vn("column",As);var Lp=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getPosition=function(t){var e=this.getDefaultOffset(),n=this.getValue(t),a=this.getElementShapeBBox(t),o=a.minX,s=a.minY,u=a.maxY,h=a.width,p=this.options,b=p.offsetX,k=p.offsetY,R=o+h/2+b,Y=n>0?-1:1,V=n>0?s:u,Z=V+e*Y+k;return{x:R,y:Z}},r.prototype.getTextFill=function(t){var e=this.options.style;return e.fill},r.prototype.getTextStroke=function(t){},r.prototype.adjustLabel=function(t,e){},r.prototype.layoutLabels=function(t,e){this.shouldInShapeLabels(e)&&this.inShapeLabels(t,e),this.autoHideLabels(t,e)},r.prototype.shouldInShapeLabels=function(t){var e=this;return(0,y.every)(t,function(n){var a=n.getBBox(),o=n.get("element"),s=e.getElementShapeBBox(o);return s.width>=a.width})},r.prototype.inShapeLabels=function(t,e){var n=this,a=this.getCoordinateBBox(),o=t.getXYFields()[0],s=this.options,u=s.darkStyle,h=s.lightStyle,p=(0,y.groupBy)(e,function(b){return b.get(q.jQ)[q.wv][o]});(0,y.each)(e,function(b){var k=p[b.get(q.jQ)[q.wv][o]]||[],R=b.get("element"),Y=R.shape,V=Ml(Y.attr("fill")),Z=n.getElementShapeBBox(R),it=at.fromBBoxObject(b.getBBox());if(Bn(a,Z)<=0&&b.set("visible",!1),it.height>Z.height){var tt=(0,y.findIndex)(k,function(It){return It===b});tt!==0&&b.set("visible",!1)}else{b.attr({y:Z.y+Z.height/2,textBaseline:"middle"});var _t=it.width>Z.width||it.height>Z.height;_t?b.attr({stroke:h==null?void 0:h.stroke}):b.attr({fill:V?h==null?void 0:h.fill:u==null?void 0:u.fill,fillOpacity:V?h==null?void 0:h.fillOpacity:u==null?void 0:u.fillOpacity,stroke:void 0})}})},r.prototype.autoHideLabels=function(t,e){var n=this.getCoordinateBBox(),a=this.filterLabels(e),o=t.getXYFields()[0],s=[],u=[],h=(0,y.groupBy)(a,function(R){return R.get(q.jQ)[q.wv][o]}),p=(0,y.uniq)((0,y.map)(a,function(R){return R.get(q.jQ)[q.wv][o]})),b;for((0,y.size)(p)>0&&(b=p.shift(),(0,y.each)(h[b],function(R){return u.push(R)})),(0,y.size)(p)>0&&(b=p.pop(),(0,y.each)(h[b],function(R){return u.push(R)})),(0,y.each)(p.reverse(),function(R){(0,y.each)(h[R],function(Y){return u.push(Y)})});u.length>0;){var k=u.shift();k.get("visible")&&(En(k,n),Nn(k,s)?k.set("visible",!1):s.push(k))}},r.prototype.filterLabels=function(t){var e=500,n=[],a=Math.max(Math.floor(t.length/e),1);return(0,y.each)(t,function(o,s){s%a==0?n.push(o):o.set("visible",!1)}),n},r}(Ea),i1=Lp;vn("column-auto",Lp);var qa={column:"interval"},ns=Tt(qa);(0,y.assign)(pt,ns);var a1=function(i){var r=i.opacity||1;return{opacity:r*.5}},o1=function(i){var r=i.opacity||1;return{opacity:r*.5,fillOpacity:r*.5}},Jv={label:{darkStyle:{fill:"#2c3542",stroke:"#ffffff",fillOpacity:.85},lightStyle:{fill:"#ffffff",stroke:"#ffffff",fillOpacity:1}},columnStyle:{normal:{},active:a1,disable:o1,selected:{lineWidth:1,stroke:"black"}}};Xi("column",Jv);var s1={column:"interval"},l1={interval:"column"},_p=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="column",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,tickLine:{visible:!1},title:{visible:!0}},yAxis:{nice:!0,title:{visible:!0},label:{visible:!0},grid:{visible:!0}},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1},label:{visible:!1,position:"top",adjustColor:!0},legend:{visible:!0,position:"top-left"},interactions:[{type:"tooltip"},{type:"active-region"},{type:"legend-active"},{type:"legend-filter"}],conversionTag:{visible:!1}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("preRender")},r.prototype.afterRender=function(){var t=this.options;this.renderLabel(),this.options.responsive&&this.options.padding!=="auto"&&this.applyResponsive("afterRender"),t.conversionTag.visible&&(this.conversionTag=new nh((0,Q.__assign)({view:this.view,field:t.yField,transpose:!0,animation:t.animation!==!1},t.conversionTag))),i.prototype.afterRender.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?s1[e]:l1[e]},r.prototype.processData=function(t){var e=this.options.xField,n=[];return(0,y.each)(t,function(a){var o=(0,y.clone)(a);o[e]=o[e].toString(),n.push(o)}),n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.adjustColumn=function(t){},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.xField,t.yField],plot:this});t.conversionTag.visible&&this.setConfig("theme",(0,y.deepMix)({},this.getTheme(),{columnWidthRatio:1/3})),this.adjustColumn(e),this.column=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&this.column.tooltip.fields.push(this.options.colorField)))},r.prototype.animation=function(){i.prototype.animation.call(this),this.options.animation===!1&&(this.column.animate=!1)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,O)},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n==null?void 0:n.visible){var s=sr(this.view,"interval");this.doRenderLabel(s,(0,Q.__assign)({type:"column",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.applyResponsive=function(t){var e=this,n=Qv[t];(0,y.each)(n,function(a){var o=a;o.method(e)})},r}(qn),Ts=_p;An("column",_p);var u1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="column",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Ts.getDefaultOptions,r}(un),Ip=u1;Xi("groupedColumn",Jv);var Op=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.baseType="column",t.type="groupedColumn",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{title:{visible:!0}}})},r.prototype.getResponsiveTheme=function(){return this.themeController.getResponsiveTheme("column")},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.addGeometry=function(){i.prototype.addGeometry.call(this)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"dodge",marginRatio:.1}]},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.groupField]))},r}(Ts),qv=Op;An("groupedColumn",Op);var h1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=qv.getDefaultOptions,r}(un),kp=h1;function Bp(i,r){var t=[],e=i.get("origin").points;return(0,y.each)(e,function(n){t.push(r.convertPoint(n))}),t}function f1(){return{areaStyle:{opacity:.2},lineStyle:{lineWidth:2,opacity:.1}}}var c1=function(){function i(r){this.areas=[],this.lines=[],this._areaStyle={},this._lineStyle={},(0,y.assign)(this,r),this._init()}return i.prototype.draw=function(){var r=this,t=this._getGroupedShapes();(0,y.each)(t,function(e,n){e.length>0&&r._drawConnection(e,n)}),this.triggerOn?this._addInteraction():this.animation&&this._initialAnimation()},i.prototype.clear=function(){this.container&&this.container.clear(),this.areas=[],this.lines=[]},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.setState=function(r,t){r==="active"&&this._onActive(t),r==="disabled"&&this._onDisabled(t),r==="selected"&&this._onSelected(t)},i.prototype._init=function(){var r=this,t=this.view.backgroundGroup;this.container=t.addGroup(),this.draw(),this.view.on("beforerender",function(){r.clear()})},i.prototype._getGroupedShapes=function(){var r=this,t=this.view.getScaleByField(this.field).values,e=this.view.geometries[0],n=e.getShapes(),a={};return(0,y.each)(t,function(o){a[o]=[]}),(0,y.each)(n,function(o){var s=o.get("origin").data,u=s[r.field];a[u].push(o)}),a},i.prototype._drawConnection=function(r,t){var e=r[0].attr("fill");this._areaStyle[t]=this._getShapeStyle(e,"area"),this._lineStyle[t]=this._getShapeStyle(e,"line");for(var n=this.view.geometries[0].coordinate,a=0;a<r.length-1;a++){var o=Bp(r[a],n),s=Bp(r[a+1],n),u=(0,y.mix)({},this._areaStyle[t]),h=(0,y.mix)({},this._lineStyle[t]);this.triggerOn&&(u.opacity=0,h.opacity=0);var p=this.container.addShape("path",{attrs:(0,y.mix)({},u,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y],["L",s[0].x,s[0].y],["L",o[3].x,o[3].y]]}),name:"connectedArea"}),b=this.container.addShape("path",{attrs:(0,y.mix)({},h,{path:[["M",o[2].x,o[2].y],["L",s[1].x,s[1].y]]}),name:"connectedArea"}),k=r[a].get("origin").data;p.set("data",k),b.set("data",k),this.areas.push(p),this.lines.push(b)}},i.prototype._getShapeStyle=function(r,t){var e=t+"Style";if(this[e])return this[e];var n=f1()[e],a={fill:r};return t==="line"&&(a={stroke:r}),(0,y.mix)(n,a)},i.prototype._addInteraction=function(){var r=this,t=this.triggerOn;this.view.on("interval:"+t,function(e){var n=e.target.get("origin").data[r.field];r.setState("active",{name:r.field,exp:n}),r.setState("disabled",{name:r.field,exp:function(a){return a!==n}}),r.view.canvas.draw()}),this.view.on("mousemove",function(e){e.gEvent.target.get("name")!=="interval"&&r.setState("disabled",{name:r.field,exp:function(){return!0}})})},i.prototype._initialAnimation=function(){var r=this.view.coordinateBBox,t=r.x,e=r.y,n=r.width,a=r.height;this.container.setClip({type:"rect",attrs:{x:t,y:e,width:0,height:a}}),this.container.set("animating",!0),this.container.getClip().animate({width:n},600,"easeQuadOut",function(){},400)},i.prototype._onActive=function(r){var t=this;(0,y.each)(this.areas,function(e){var n=e.get("data"),a=n[t.field];if(ot(n,r)){var o=t._areaStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}}),(0,y.each)(this.lines,function(e){var n=e.get("data"),a=n[t.field];if(ot(n,r)){var o=t._lineStyle[a].opacity||1;e.stopAnimate(),e.animate({opacity:o},400,"easeQuadOut")}})},i.prototype._onDisabled=function(r){(0,y.each)(this.areas,function(t){var e=t.get("data");ot(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))}),(0,y.each)(this.lines,function(t){var e=t.get("data");ot(e,r)&&(t.stopAnimate(),t.animate({opacity:0},400,"easeQuadOut"))})},i.prototype._onSelected=function(r){this._onActive(r)},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),v1=c1;Xi("stackedColumn",Jv);var d1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n=this.options.adjustPosition;if(n){var a=t.getBBox(),o=this.getElementShapeBBox(e);(o.height<a.height||o.width<a.width)&&t.hide()}},r}(Ea),PO=null;vn("stacked-column",d1);var p1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.shouldInShapeLabels=function(t){return!0},r}(i1),LO=null;vn("stacked-column-auto",p1);var Dp=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedColumn",t.baseType="column",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0,position:"right-top"},label:{visible:!1,position:"middle",offset:0,adjustColor:!0},connectedArea:{visible:!1,triggerOn:"mouseenter"}})},r.prototype.init=function(){this.options.connectedArea.visible&&(this.options.tooltip.crosshairs=null),i.prototype.init.call(this)},r.prototype.afterRender=function(){var t=this.options;t.connectedArea.visible&&(this.connectedArea=new v1((0,Q.__assign)({view:this.view,field:t.stackField,animation:t.animation!==!1},t.connectedArea))),i.prototype.afterRender.call(this)},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustColumn=function(t){t.adjust=[{type:"stack"}]},r.prototype.renderLabel=function(){var t=this.config.scales,e=this.options,n=e.label,a=e.yField,o=t[a];if(n&&n.visible){var s=sr(this.view,"interval");this.doRenderLabel(s,(0,Q.__assign)({type:"stacked-column",formatter:o.formatter&&function(u){return o.formatter(u)}},this.options.label))}},r.prototype.geometryTooltip=function(){this.column.tooltip={};var t=this.options.tooltip;t.fields&&(this.column.tooltip.fields=t.fields),t.formatter&&(this.column.tooltip.callback=t.formatter,t.fields||(this.column.tooltip.fields=[this.options.xField,this.options.yField,this.options.stackField]))},r}(Ts),Dh=Dp;An("stackedColumn",Dp);var g1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Dh.getDefaultOptions,r}(un),Fp=g1,td=8;function y1(i,r){var t;return(0,y.each)(i,function(e){var n=e;r>=n.from&&r<n.to&&(t=n.color)}),t}var m1=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.options.topStyle||(this.options.topStyle=this.options.style),this.options.bottomStyle||(this.options.bottomStyle=this.options.style),this.init()}return i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.getGeometry(),e=t.coordinate,n=t.elements;this.coord=e,(0,y.each)(n,function(a){var o=a.shape,s=r.getPosition(o),u=r.getValue(o),h=r.getTextBaseline(),p=[];(0,y.each)(s,function(b,k){var R=k===1?r.options.topStyle:r.options.bottomStyle,Y=r.getTextColor(o,k);r.options.position==="inner"&&r.options.adjustColor&&Y!=="black"&&(R.stroke=null);var V=r.options.formatter,Z=V?V(u[k]):u[k],it=r.container.addShape("text",{attrs:(0,y.deepMix)({},R,{x:b.x,y:b.y,text:Z,fill:Y,textAlign:"center",textBaseline:h[k]}),name:"label"});p.push(it),r.doAnimation(it)}),o.set("labelShapes",p),r.adjustPosition(p[0],p[1],o)}),this.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getShapeBbox=function(r){var t=this,e=[];(0,y.each)(r.get("origin").points,function(a){e.push(t.coord.convertPoint(a))});var n=new at(e[0].x,e[1].y,Math.abs(e[2].x-e[0].x),Math.abs(e[0].y-e[1].y));return n},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{position:"outer",offsetX:0,offsetY:td,style:(0,y.clone)(t),adjustColor:!0,adjustPosition:!0}},i.prototype.getPosition=function(r){var t=this.getShapeBbox(r),e=t.minX,n=t.minY,a=t.maxY,o=t.width,s=this.options.offsetY,u=e+o/2,h,p;return this.options.position==="outer"?(h=n-s,p=a+s):(h=n+s,p=a-s),[{x:u,y:p},{x:u,y:h}]},i.prototype.getValue=function(r){var t=this.plot.options.yField;return r.get("origin").data[t]},i.prototype.getTextBaseline=function(){return this.options.position==="outer"?["top","bottom"]:["bottom","top"]},i.prototype.getTextColor=function(r,t){if(this.options.adjustColor&&this.options.position==="inner"){var e=r.attr("fill"),n=r.attr("opacity")?r.attr("opacity"):1,a=Da(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=y1(s,o);return u}var h=t===1?this.options.topStyle.fill:this.options.bottomStyle.fill;return h},i.prototype.doAnimation=function(r){this.plot.animation&&this.plot.animation===!1||(r.attr("fillOpacity",0),r.attr("strokeOpacity",0),r.stopAnimate(),r.animate({fillOpacity:1,strokeOpacity:1},800,"easeLinear",500))},i.prototype.adjustPosition=function(r,t,e){var n=e.get("origin"),a=n.y[1],o=n.y[0],s=e.getBBox(),u=s.height,h=u,p=this.view.coordinateBBox,b=[r.getBBox(),t.getBBox()],k=r.attr("y"),R=t.attr("y");if(this.options.adjustPosition&&this.options.position==="inner"){var Y=b[0].height+b[1].height,V=b[1].maxY-b[0].minY>2,Z=Y>h;(V||Z)&&(R=a-this.options.offsetY,t.attr("fill",this.options.topStyle.fill),t.attr("textBaseline","bottom"),k=o+this.options.offsetY,r.attr("fill",this.options.bottomStyle.fill),r.attr("textBaseline","top"),b[0]=r.getBBox(),b[1]=t.getBBox())}b[0].maxY>p.maxY-td&&(k=p.maxY-td/2,r.attr("textBaseline","bottom")),r.attr("y",k),t.attr("y",R),this.plot.canvas.draw()},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),x1=m1,Rp;function Np(i,r){var t=i.getBBox(),e=t.minY+t.height/2;i.setClip({type:"rect",attrs:{x:t.minX,y:e,width:t.width,height:0}});var n=i.get("clipShape");n.animate({height:t.height,y:t.minY},r.duration,r.easing,function(){i.setClip(null)},r.delay)}Np.animationName="clipInFromCenterVertical";function b1(i){Rp=i}function Yp(i,r){var t=w1(i).attr("path"),e=(0,y.clone)(i.attr("path"));i.attr("path",t),i.animate({path:e},r.duration,r.easing,r.callback,100)}function w1(i){var r=i.id,t;return(0,y.each)(Rp,function(e){e.id===r&&(t=e)}),t}Yp.animationName="updateFromCenterVertical",(0,q.ph)("clipInFromCenterVertical",Np),(0,q.ph)("updateFromCenterVertical",Yp);var Gp=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rangeColumn",t}return r.getDefaultOptions=function(){return(0,y.deepMix)(i.getDefaultOptions.call(this),{label:{visible:!0,position:"outer"}},{})},r.prototype.afterRender=function(){this.renderLabel();var t=[],e=this.view.geometries;(0,y.each)(e,function(n){var a=n.elements;(0,y.each)(a,function(o){t.push(o.shape)})}),b1(t),i.prototype.afterRender.call(this)},r.prototype.animation=function(){i.prototype.animation.call(this),this.column.animate={appear:{animation:"clipInFromCenterVertical",duration:600},update:{animation:"updateFromCenterVertical",duration:600}}},r.prototype.renderLabel=function(){if(this.options.label&&this.options.label.visible){var t=new x1((0,Q.__assign)({view:this.view,plot:this},this.options.label));t.render()}},r}(Ts),S1=Gp;An("rangeColumn",Gp);var C1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="rangeColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=S1.getDefaultOptions,r}(un),zp=C1,Xp=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="percentStackedColumn",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{label:{visible:!0,position:"middle",offset:0},yAxis:{visible:!0,tick:{visible:!1},grid:{visible:!1},title:{visible:!0},label:{visible:!1}}})},r.prototype.processData=function(t){var e=this.options,n=e.xField,a=e.yField;return Es(t||[],n,[a])},r.prototype.scale=function(){var t={},e=this.options.yField;t[e]={tickCount:6,alias:e+" (%)",min:0,max:1,formatter:function(n){var a=(n*100).toFixed(1);return a+"%"}},this.options.meta=(0,y.deepMix)({},this.options.meta,t),i.prototype.scale.call(this)},r}(Dh),Hp=Xp;An("percentStackedColumn",Xp);var M1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Hp.getDefaultOptions,r}(un),Vp=M1,E1={pie:"interval"},A1=Tt(E1);(0,y.assign)(pt,A1);function Fh(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}function _O(i){return{x:i.x+i.width/2,y:i.y+i.height/2}}function T1(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e*n}function P1(i,r,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(i.x+i.width+t,r.x+r.width+t)-Math.max(i.x-t,r.x-t)),n=Math.max(0,Math.min(i.y+i.height+t,r.y+r.height+t)-Math.max(i.y-t,r.y-t));return e&&i.x<r.x&&(e=-e),n&&i.y<r.y&&(n=-n),i.x===r.x&&i.width===r.width&&(e=r.width),i.y===r.y&&i.height===r.height&&(n=r.height),{xOverlap:e,yOverlap:n}}function IO(i,r){return i.x<r.x&&i.x+i.width>r.x+r.width&&i.y<r.y&&i.y+i.height>r.y+r.height}var L1=function(i,r,t){return t===void 0&&(t=Math.pow(Number.EPSILON,.5)),[i,r].includes(Infinity)?Math.abs(i)===Math.abs(r):Math.abs(i-r)<t};function _1(i,r){var t=i.getCenter();return Math.atan2(r.y-t.y,r.x-t.x)}function I1(i){var r=Math.PI/2,t=i;return(t>r||t<-r)&&(t=t+Math.PI),t}var OO=4;function O1(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}function k1(i,r){var t=i.getBBox();r.y<=t.y&&r.y+r.height>=t.y+t.height||i.get("parent").set("visible",!1)}var B1=function(){function i(r,t){this.destroyed=!1,this.plot=r,this.coordinateBBox=this.plot.view.coordinateBBox;var e=(0,y.deepMix)(this.getDefaultOptions(),t,{});this.adjustOption(e),this.options=e,this.init()}return i.prototype.adjustOverlap=function(r,t){for(var e=1;e<r.length;e++)for(var n=r[e],a=0,o=e-1;o>=0;o--){var s=r[o],u=s.getBBox(),h=n.getBBox();if(s.get("parent").get("visible")&&(a=T1(u,h),!L1(a,0))){n.get("parent").set("visible",!1);break}}r.forEach(function(p){return k1(p,t)})},i.prototype.adjustItem=function(r){},i.prototype.init=function(){var r=this;this.container=this.getGeometry().labelsContainer,this.plot.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){this.clear(),this.initArcPoints(),this.drawTexts(),this.drawLines()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getFilteredSum=function(){var r=this.plot.options.angleField,t=this.plot.view.filteredData||[];return t.reduce(function(e,n){return e+n[r]},0)},i.prototype.drawTexts=function(){var r=this,t=this.options,e=t.style,n=t.formatter,a=t.autoRotate,o=t.offsetX,s=t.offsetY,u=t.adjustPosition,h=t.allowOverlap,p=this.getItems(),b=[];p.map(function(k,R){var Y=(0,y.deepMix)({},k,e),V=r.getFilteredSum(),Z=r.plot.options.angleField,it=k.origin[Z]/V,tt=n?n(k.name,{_origin:k.origin,percent:it},R):k.name,_t=r.container.addGroup({name:"itemGroup",index:R,capture:!1}),It=_t.addShape("text",{attrs:(0,y.deepMix)({},Y,{x:k.x+o,y:k.y+s,text:tt})});It.set("id","text-"+k.name+"-"+R),b.push(It)}),b.forEach(function(k){var R=r.coordinateBBox;r.adjustText(k,R)}),u&&this.layout(b,p,this.coordinateBBox),h||this.adjustOverlap(b,this.coordinateBBox),b.forEach(function(k,R){a&&r.rotateLabel(k,I1(p[R].angle))})},i.prototype.adjustText=function(r,t){var e=r.getBBox(),n=e.width,a=0;if(e.maxX>t.maxX?n=t.maxX-e.minX:e.minX<t.minX&&(n=e.maxX-t.minX),r.attr("textAlign")==="left"?r.attr("x",Math.max(e.x-a,0)):r.attr("textAlign")==="right"&&r.attr("x",Math.max(e.maxX-a,0)),n!==e.width){var o={};["fontSize","fontFamily","fontWeight"].forEach(function(u){o[u]=r.attr(u)});var s=r.attr("text").split(`
`).map(function(u){return et(u,n,o)});r.attr("text",s.join(`
`))}},i.prototype.drawLines=function(){var r=this;if(this.options.line.visible){var t=this.container.get("children"),e=this.getCoordinate().center;t.forEach(function(n,a){var o=n.get("children")[0],s=r.arcPoints[a],u=s.x<e.x,h=r.options.offset>4?4:0,p=r.getLinePath(o,s,h),b=r.options.line;n.addShape("path",{attrs:(0,Q.__assign)({path:p,stroke:s.color},b)}),o.attr("x",o.attr("x")+(u?-h:h))})}},i.prototype.getLinePath=function(r,t,e){var n=this.options.line?this.options.line.smooth:!1,a=t.angle,o=this.getCoordinate(),s=o.center,u=o.radius,h=Fh(s,a,u+e);e<4&&(h=t);var p=t.x<s.x,b=r.getBBox(),k={x:p?b.maxX:b.minX,y:b.y+b.height/2},R=["C",k.x+(p?1:-1)*(e<4?e/2:4),k.y,2*h.x-t.x,2*h.y-t.y,h.x,h.y],Y=["L",h.x,h.y],V=n?R:Y,Z=["M",k.x,k.y].concat(V).concat("L",t.x,t.y);return Z.join(",")},i.prototype.getGeometry=function(){return this.plot.view.geometries[0]},i.prototype.getCoordinate=function(){var r=this.getGeometry().coordinate,t=r.getCenter(),e=r.getRadius(),n=r.startAngle;return{center:t,radius:e,startAngle:n}},i.prototype.adjustOption=function(r){var t=r.offset,e=this.getCoordinate().radius;(0,y.isString)(t)&&(t=e*O1(t)),r.offset=t},i.prototype.rotateLabel=function(r,t){var e=r.attr("x"),n=r.attr("y"),a=da.transform(r.getMatrix(),[["t",-e,-n],["r",t],["t",e,n]]);r.setMatrix(a)},i.prototype.getItems=function(){var r=this,t=this.options.offset,e=this.getCoordinate(),n=e.center,a=e.radius,o=this.arcPoints.map(function(s){var u=Fh(n,s.angle,a+t),h=(0,Q.__assign)((0,Q.__assign)({},s),u);return r.adjustItem(h),h});return o},i.prototype.initArcPoints=function(){var r=this,t=this.plot.options.angleField,e=this.getGeometry().elements,n=this.getCoordinate(),a=n.center,o=n.radius,s=this.getCoordinate().startAngle,u=this.getGeometry().attributes.position.scales,h=u[1],p=h.field,b=e.map(function(k){var R=k.shape.get("origin"),Y=R.color,V=R.data[0]||R.data,Z=s+Math.PI*2*h.scale(V[p]),it=(s+Z)/2,tt=Fh(a,it,o);s=Z;var _t=h.getText(V[t]),It=tt.x>a.x?"left":"right";return{x:tt.x,y:tt.y,color:Y,name:_t,origin:V,angle:_1(r.getGeometry().coordinate,tt),textAlign:It}});this.arcPoints=b},i}(),ed=B1;function kO(i){var r=Number(i.endsWith("%")?i.slice(0,-1):i);return r/100}var D1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset>0&&(t.offset=0)},r.prototype.adjustItem=function(t){t.textAlign="middle"},r.prototype.drawLines=function(){},r.prototype.layout=function(t,e){var n=this;t.forEach(function(a,o){o>0&&(0,y.each)(t.slice(0,o),function(s){n.resolveCollision(a,s,e[o])})})},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:"-30%",style:(0,Q.__assign)((0,Q.__assign)({},e),{textAlign:"center",textBaseline:"middle"})}},r.prototype.resolveCollision=function(t,e,n){var a=this.getCoordinate().center,o=n.angle,s=t.getBBox(),u=e.getBBox(),h={x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},p=(0,y.clone)(h),b=(0,y.clone)(h);if(e.get("id")!==t.get("id")){var k=P1(s,u),R=k.xOverlap,Y=k.yOverlap;if(R&&(p.x=h.x+R,p.y=h.y+Math.tan(o)*R),Y){var V=Y;h.y<a.y?V=V<0?V:u.minY-s.maxY:V=V>0?V:u.maxY-s.minY,b.y=h.y+V,b.x=h.x+V/Math.tan(o)}var Z=kr(h,p),it=kr(h,b),tt=Z<it?p:b;t.attr("x",tt.x),t.attr("y",tt.y)}},r}(ed),F1=D1,BO=16,R1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Q.__assign)((0,Q.__assign)({},e),{textBaseline:"middle"})}},r.prototype.layout=function(t,e,n){var a=this,o=this.getCoordinate().center,s=(0,y.filter)(t,function(h){return h.attr("x")<=o.x}),u=(0,y.filter)(t,function(h){return h.attr("x")>o.x});[u,s].forEach(function(h,p){a._antiCollision(h,!p,n)})},r.prototype._antiCollision=function(t,e,n){var a=this,o=this.getLabelHeight(t),s=this.getCoordinate(),u=s.center,h=s.radius,p=this.options.offset,b=h+p,k=Math.min(n.height,Math.max(b*2+o*2,t.length*o)),R=Math.floor(k/o);this.options.allowOverlap||t.slice(R).forEach(function(me){me.get("parent").set("visible",!1)}),t.splice(R,t.length-R),t.sort(function(me,Le){return me.getBBox().y-Le.getBBox().y});for(var Y=!0,V,Z=u.y+k/2,it=u.y-k/2,tt=t.map(function(me){var Le=me.getBBox();return Le.maxY>Z&&(Z=Math.min(n.maxY,Le.maxY)),Le.minY<it&&(it=Math.max(n.minY,Le.minY)),{text:me.attr("text"),size:o,pos:Le.y,targets:[]}}),_t=0;_t<tt.length;)_t===tt.length-1?tt[_t].targets[0]=Z:tt[_t].targets[0]=tt[_t+1].pos-tt[_t+1].size/2,_t++;for(;Y;)for(tt.forEach(function(me){var Le=(0,y.last)(me.targets);me.pos=Math.max(it,Math.min(me.pos,Le-me.size))}),Y=!1,V=tt.length;V--;)if(V>0){var It=tt[V-1],Ht=tt[V];if(It.pos+It.size>Ht.pos){It.size+=Ht.size,It.targets=It.targets.concat(Ht.targets);var le=(0,y.last)(It.targets);It.pos+It.size>le&&(It.pos=le-It.size),tt.splice(V,1),Y=!0}else It.targets.splice(-1,1,Ht.pos)}V=0,tt.forEach(function(me){var Le=o/2;me.targets.forEach(function(){t[V].attr("y",me.pos+Le),Le+=o,V++})});var xe=[],Ce=[];t.forEach(function(me,Le){var Ye=a.arcPoints[Le];Ye.angle>=0&&Ye.angle<=Math.PI?Ce.push(me):xe.push(me)}),[xe,Ce].forEach(function(me,Le){if(!!me.length){var Ye=Le?(0,y.last)(me).getBBox().maxY-u.y:u.y-(0,y.head)(me).getBBox().minY;Ye=Math.max(b,Ye);var Be=p>4?4:0,or=Math.max.apply(0,(0,y.map)(t,function(wr){return wr.getBBox().width}))+p+Be,cr=Math.max(b,Math.min((Ye+b)/2,u.x-(n.minX+or))),ar=cr*cr,Cr=Ye*Ye;me.forEach(function(wr,Mr){var yr=a.arcPoints[Mr],mr=wr.getBBox(),zr={x:mr.minX+mr.width/2,y:mr.minY+mr.height/2},Ur=Math.pow(zr.y-u.y,2),Xr=Fh(u,yr.angle,h),Er=(e?1:-1)*Be*2;if(Ur>Cr)console.warn("\u5F02\u5E38(\u4E00\u822C\u4E0D\u4F1A\u51FA\u73B0)",wr.attr("text")),wr.attr("x",Xr.x+Er);else{var Zr=u.x+(e?1:-1)*Math.sqrt((1-Ur/Cr)*ar);(u.x===Xr.x&&zr.y===Xr.y||u.y===Xr.y&&Zr===Xr.x)&&(Zr=Xr.x),wr.attr("x",Zr+Er)}})}})},r.prototype.getLabelHeight=function(t){return this.options.labelHeight?this.options.labelHeight:(0,y.head)(t)?(0,y.head)(t).getBBox().height:14},r}(ed),N1=R1,DO=16,Y1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustOption=function(t){i.prototype.adjustOption.call(this,t),t.offset<0&&(t.offset=0)},r.prototype.getDefaultOptions=function(){var t=this.plot.theme,e=t.label.style;return{offsetX:0,offsetY:0,offset:12,style:(0,Q.__assign)((0,Q.__assign)({},e),{textBaseline:"middle"})}},r.prototype.adjustItem=function(t){var e=this.options.offset;t.textAlign==="left"?t.x+=e>4?4:e/2:t.textAlign==="right"&&(t.x-=e>4?4:e/2)},r.prototype.layout=function(t,e,n){},r}(ed),G1=Y1,Wp={inner:F1,outer:N1,"outer-center":G1};function z1(i){if(!Wp[i]){console.warn("this label "+i+" is not registered");return}return Wp[i]}var X1=0,rd=15,H1="#CCC",V1=2,W1=-2,jp=15;function Up(i,r,t){return{x:i.x+t*Math.cos(r),y:i.y+t*Math.sin(r)}}var j1=function(){function i(r){this.destroyed=!1,this.view=r.view,this.options=(0,y.deepMix)({},this.getDefaultOptions(),r),this._adjustOptions(this.options),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear()})},i.prototype.render=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,y.clone)(this.view.getData());this.halves=[[],[]];var e=[],n=this.view.geometries[0].elements;(0,y.each)(n,function(Ht){e.push(Ht.shape)}),this.coord=this.view.geometries[0].coordinate;var a=this.options,o=a.allZero,s=a.angleField,u=this.options.fields[0],h=this.view.getScalesByDim("y")[u],p=this.coord.getCenter(),b=this.coord.startAngle,k=this.coord.polarRadius,R=this.view.coordinateBBox,Y=R.width,V=R.height;this.width=Y,this.height=V;for(var Z=b,it=function(Ht){var le=t[Ht],xe=h.scale(le[u]),Ce=Z+Math.PI*2*xe,me=Z+(Ce-Z)/2;Z=Ce;var Le=Up(p,me,k+X1),Ye=Up(p,me,k+rd),Be=H1;if(tt.options.fields.length===2){var or=tt.options.fields[1],cr=tt.view.geometries[0].scales[or],ar=cr.scale(le[or]);if(ar){var Cr=Math.floor(ar*(e.length-1));Be=e[Cr].attr("fill")}}var wr={_anchor:Le,_inflection:Ye,_data:le,x:Ye.x,y:Ye.y,r:k+rd,fill:Be,textGroup:null,_side:null},Mr=[];if((0,y.each)(tt.options.fields,function(ln){o&&ln===Rh?Mr.push(le[s]):Mr.push(le[ln])}),tt.options.formatter){var yr=tt.options.formatter(le[s],{_origin:le,color:Be},Ht);(0,y.isString)(yr)&&(yr=[yr]),Mr=yr}var mr=tt.container.addGroup({capture:!1,visible:!1}),zr={x:0,y:0,fontSize:tt.options.text.fontSize,lineHeight:tt.options.text.fontSize,fontWeight:tt.options.text.fontWeight,fill:tt.options.text.fill},Ur=le[s];tt.options.formatter&&(Ur=Mr[0]);var Xr=(0,y.clone)(zr);Mr.length===2&&(Xr.fontWeight=700);var Er=mr.addShape("text",{attrs:(0,y.mix)({textBaseline:Mr.length===2?"top":"middle",text:Ur},Xr),data:le,offsetY:Mr.length===2?V1:0,name:"label"});if(Er.name="label",Mr.length===2){var Zr=mr.addShape("text",{attrs:(0,y.mix)({textBaseline:"bottom",text:Mr[1]},zr),data:le,offsetY:W1,name:"label"});Zr.name="label"}wr.textGroup=mr,Le.x<p.x?(wr._side="left",tt.halves[0].push(wr)):(wr._side="right",tt.halves[1].push(wr))},tt=this,_t=0;_t<t.length;_t++)it(_t);var It=Math.floor(V/this.options.lineHeight);(0,y.each)(this.halves,function(Ht){Ht.length>It&&Ht.splice(It,Ht.length-It),Ht.sort(function(le,xe){return le.y-xe.y}),r._antiCollision(Ht)}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.view.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.view.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getDefaultOptions=function(){return{text:{fill:"rgba(0, 0, 0, 0.65)",fontSize:12},line:{lineWidth:.5,stroke:"rgba(0, 0, 0, 0.45)"},lineHeight:32,sidePadding:20}},i.prototype._antiCollision=function(r){var t=this,e=this.coord,n=e.getHeight(),a=e.center,o=e.getRadius(),s=a.y-o-rd-this.options.lineHeight,u=!0,h=n,p,b=0,k=Number.MIN_VALUE,R=0,Y=r.map(function(_t){var It=_t.y;It>b&&(b=It),It<k&&(k=It);var Ht=_t.textGroup,le=Ht.getBBox().width;return le>=R&&(R=le),{size:t.options.lineHeight,targets:[It-s]}});b-s>h&&(h=b-s);for(var V=function(_t){_t.forEach(function(It){var Ht=(Math.min.apply(k,It.targets)+Math.max.apply(k,It.targets))/2;It.pos=Math.min(Math.max(k,Ht-It.size/2),h-It.size)})};u;)for(V(Y),u=!1,p=Y.length;p--;)if(p>0){var Z=Y[p-1],it=Y[p];Z.pos+Z.size>it.pos&&(Z.size+=it.size,Z.targets=Z.targets.concat(it.targets),Z.pos+Z.size>h&&(Z.pos=h-Z.size),Y.splice(p,1),u=!0)}p=0,Y.forEach(function(_t){var It=s;_t.targets.forEach(function(){r[p].y=_t.pos+It+t.options.lineHeight/2,It+=t.options.lineHeight,p++})});var tt=[];r.forEach(function(_t){var It=t._drawLabel(_t);t._drawLabelLine(_t,R,It),tt.push(It)})},i.prototype._drawLabel=function(r){var t=this.coord,e=t.getCenter(),n=t.getRadius(),a=r.y,o=r.textGroup,s=o.get("children"),u=r._side==="left"?1:-1,h=(0,Q.__assign)({textAlign:r._side==="left"?"right":"left",x:r._side==="left"?e.x-n-this.options.sidePadding:e.x+n+this.options.sidePadding},this.options.style);return this.options.offsetX&&(h.x+=this.options.offsetX*u),s.forEach(function(p){var b=p.get("offsetY"),k=a+b;p.attr(h),p.attr("y",k)}),o.show(),o},i.prototype._drawLabelLine=function(r,t,e){var n=[r._anchor.x,r._anchor.y],a=[r._inflection.x,r._inflection.y],o=r.y,s=r.textGroup;if(!!s){var u=[r._side==="left"?s.getBBox().maxX+4:s.getBBox().minX-4,o],h=[n,a,u];if(a[1]!==o)if(a[1]<this.height/2&&a[1]<o||a[1]>=this.height/2&&a[1]>o){var p=a,b=u[0]+jp,k=u[0]-jp,R=[r._side==="left"?b:k,a[1]];h=[n,p,R,u],(r._side==="right"&&R[0]<p[0]||r._side==="left"&&R[0]>p[0])&&(h=[n,p,u])}else h=[n,[a[0],o],u];for(var Y=[],V=0;V<h.length;V++){var Z=h[V],it="L";V===0&&(it="M"),Y.push([it,Z[0],Z[1]])}e.addShape("path",{attrs:{path:Y,lineWidth:this.options.line.lineWidth,stroke:this.options.line.stroke}})}},i.prototype._adjustOptions=function(r){r.text.fontSize&&(r.lineHeight=r.text.fontSize*3)},i}(),U1=j1,Z1=function(i){var r=i.opacity||1;return{fillOpacity:r*.8}},K1=function(i){var r=i.opacity||1;return{fillOpacity:r*.5}};Xi("pie",{columnStyle:{normal:{},active:Z1,disable:K1,selected:{lineWidth:1,stroke:"black"}}});var Rh="$$percentage$$",$1={pie:"interval"},Q1={pie:"column"},Zp=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pie",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,label:{visible:!0,type:"inner",autoRotate:!1,adjustPosition:!0,allowOverlap:!1,line:{visible:!0,smooth:!0}},legend:{visible:!0,position:"right-center"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},pieStyle:{stroke:"white",lineWidth:1}})},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.angleField,n=t.colorField,a=t.data,o=(0,y.every)(a,function(u){return u[e]===0});if(o){var s=this.view.geometries[0];s.tooltip(n+"*"+e)}},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;if(t.label&&t.label.visible){this.labelComponent&&this.labelComponent.clear();var e=t.label;if(e.type==="spider"){var n=t.data,a=t.colorField,o=t.angleField,s=(0,y.every)(n,function(p){return p[o]===0}),u=s?Rh:o;this.labelComponent=new U1((0,Q.__assign)({view:this.view,fields:a?[u,a]:[u],angleField:o,allZero:s},this.options.label)),this.labelComponent.render()}else{var h=z1(e.type);this.labelComponent=new h(this,t.label),this.labelComponent.render()}}},r.prototype.getAngleScale=function(){var t=this.options.angleField;if(t)return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?$1[e]:Q1[e]},r.prototype.scale=function(){var t=this.options;i.prototype.scale.call(this);var e={};e[t.angleField]={},e[t.colorField]={type:"cat"},e=(0,y.deepMix)({},this.config.scales,e),this.setConfig("scales",e)},r.prototype.processData=function(t){var e=this.options.angleField,n=(0,y.every)(t,function(a){return a[e]===0});return n?t.map(function(a){var o;return(0,Q.__assign)((0,Q.__assign)({},a),(o={},o[e]=typeof a[e]=="string"?Number.parseFloat(a[e]):a[e],o[Rh]=1/t.length,o))}):t.map(function(a){var o,s=a[e];return(0,Q.__assign)((0,Q.__assign)({},a),(o={},o[e]=s&&!isNaN(s)?+s:s,o))})},r.prototype.axis=function(){},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=t.data,n=t.angleField,a,o=(0,y.every)(e,function(s){return s[n]===0});o?a=Ci("interval","main",{plot:this,positionFields:[1,Rh]}):a=Ci("interval","main",{plot:this,positionFields:[1,t.angleField]}),a.adjust=[{type:"stack"}],this.pie=a,t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",a)},r.prototype.geometryTooltip=function(){this.pie.tooltip={};var t=this.options.tooltip;t.fields?this.pie.tooltip.fields=t.fields:this.pie.tooltip.fields=[this.options.angleField,this.options.colorField],t.formatter&&(this.pie.tooltip.callback=t.formatter,t.fields||(this.pie.tooltip.fields=[this.options.angleField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.pie.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,_)},r.prototype.label=function(){this.pie.label=!1},r}(qn),Kp=Zp;An("pie",Zp);var J1=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="pie",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Kp.getDefaultOptions,r}(un),$p=J1,q1=.3989422804014327,tb=1/255/16,Ll="_origin",eb=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="heatmap",e.paletteCache={},e.intensity=t.intensity,e.radius=t.radius,e}return r.prototype.createElements=function(t){var e=this.prepareRange(t);return this.prepareSize(),this.prepareBlur(),this.prepareGreyScaleBlurredCircle(this.radius),this.drawWithRange(t,e),null},r.prototype.clear=function(){this.clearShadowCanvasCtx(),i.prototype.clear.call(this)},r.prototype.prepareRange=function(t){var e=this.getAttribute("color"),n=e.getFields()[0],a=Infinity,o=-Infinity;return t.forEach(function(s){var u=s[Ll][n];u>o&&(o=u),u<a&&(a=u)}),a===o&&(a=o-1),[a,o]},r.prototype.prepareSize=function(){var t=this.radius;this.radius||(t=this.getDefaultValue("size"),(0,y.isNumber)(t)||(t=this.getDefaultSize()),this.radius=t)},r.prototype.prepareBlur=function(){var t=(0,y.get)(this.styleOption,["style","shadowBlur"]);(0,y.isNumber)(t)||(t=this.radius/2),this.blur=t},r.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate,n=Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4));return n},r.prototype.colorize=function(t){for(var e=this.getAttribute("color"),n=t.data,a=this.paletteCache,o=3;o<n.length;o+=4){var s=n[o];if(s){var u=void 0;a[s]?u=a[s]:(u=Da(e.gradient(s/256)),a[s]=u),n[o-3]=u[0],n[o-2]=u[1],n[o-1]=u[2],n[o]=s}}},r.prototype.prepareGreyScaleBlurredCircle=function(t){var e=this.grayScaleCanvas;e||(e=document.createElement("canvas"),this.grayScaleCanvas=e);var n=this.intensity?this.intensity:2,a=Math.sqrt(-2*Math.log(tb/t/n/q1))/3*t,o=a-t,s=a+o,u=e.getContext("2d");e.width=e.height=s*2,u.clearRect(0,0,e.width,e.height),u.shadowOffsetX=u.shadowOffsetY=s*2,u.shadowBlur=o,u.shadowColor="black",u.beginPath(),u.arc(-s,-s,t,0,Math.PI*2,!0),u.closePath(),u.fill()},r.prototype.drawGrayScaleBlurredCircle=function(t,e,n,a,o){var s=this.grayScaleCanvas;o.globalAlpha=a,o.drawImage(s,t-n,e-n)},r.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight();var e=t.getContext("2d");return e.globalCompositeOperation="lighter",e},r.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},r.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;t=e.addShape({type:"image",attrs:{}}),this.imageShape=t},r.prototype.drawWithRange=function(t,e){var n=this.coordinate,a=n.start,o=n.end,s=this.coordinate.getWidth(),u=this.coordinate.getHeight(),h=this.getAttribute("color"),p=h.getFields()[0];this.clearShadowCanvasCtx();var b=this.getShadowCanvasCtx();e&&(t=t.filter(function(_t){return _t[Ll][p]<=e[1]&&_t[Ll][p]>=e[0]}));for(var k=this.scales[p],R=0;R<t.length;R++){var Y=t[R],V=this.getDrawCfg(Y),Z=k.scale(Y[Ll][p]);this.drawGrayScaleBlurredCircle(V.x-a.x,V.y-o.y,this.radius+this.blur,Z,b)}var it=b.getImageData(0,0,s,u);this.clearShadowCanvasCtx(),this.colorize(it),b.putImageData(it,0,0);var tt=new Image;tt.src=b.canvas.toDataURL("image/png"),this.getImageShape(),this.imageShape.attr("x",a.x),this.imageShape.attr("y",o.y),this.imageShape.attr("width",s),this.imageShape.attr("height",u),this.imageShape.attr("img",b.canvas),this.imageShape.set("origin",this.getShapeInfo(t))},r.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]);return(0,Q.__assign)((0,Q.__assign)({},e),{mappingData:t,data:this.getData(t)})},r.prototype.getData=function(t){return t.map(function(e){return e[Ll]})},r}(q.ZX);(0,q.dZ)("linearHeatmap",eb);var rb=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.options=t,e.view=e.options.view,e.init(),e}return r.prototype.init=function(){var t=this.getCoordinate();this.width=t.getWidth(),this.height=t.getHeight(),this.x=t.start.x,this.y=t.end.y,this.container=this.view.backgroundGroup.addGroup({})},r.prototype.render=function(){if(this.options.type==="color")this.renderColorBackground();else if(this.options.type==="image")this.renderImageBackground();else if(this.options.callback){var t={x:this.x,y:this.y,width:this.width,height:this.height,container:this.container};this.options.callback(t)}},r.prototype.renderColorBackground=function(){this.container.addShape("rect",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,fill:this.options.value},name:"heatmap-background"})},r.prototype.renderImageBackground=function(){this.container.addShape("image",{attrs:{x:this.x,y:this.y,width:this.width,height:this.height,img:this.options.src},name:"heatmap-background"})},r.prototype.clear=function(){this.container&&(this.container.clear(),this.emit("background:clear"))},r.prototype.destroy=function(){this.container&&(this.container.remove(),this.emit("background:destroy"))},r.prototype.getCoordinate=function(){var t;return(0,y.each)(this.view.geometries,function(e){e.type==="heatmap"&&(t=e.coordinate)}),t},r}(qt.default),nb=rb,Nh=4,Qp=1,ib=.1,ab=function(){function i(r){this.destroyed=!1,this.dataSlides={};var t=this.getDefaultOptions();r.plot.options.theme&&r.plot.options.theme==="dark"&&(t=this.getDarkOptions()),this.options=(0,y.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var r=this.options.plot.container;this.container=r.addGroup()},i.prototype.render=function(){var r=this.getScales(),t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction(),this.options.plot.canvas.draw()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new at(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=this.width,o=this.height/e.length,s=this.container.addGroup(),u=(0,y.clone)(e).reverse(),h=(t-r)/e.length;(0,y.each)(u,function(p,b){var k=o*b,R={to:t-h*b,from:t-h*(b+1)},Y=n.container.addShape("rect",{attrs:{x:0,y:k,width:a,height:o,fill:p,opacity:Qp,cursor:"pointer"},name:"legend"});Y.set("info",R);var V=n.getDataSlide(R);n.dataSlides[R.from+"-"+R.to]={mode:"active",data:V},s.addShape("path",{attrs:(0,Q.__assign)({path:[["M",0,k+o],["L",a,k+o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Q.__assign)({text:t,x:a/2,y:-Nh,textAlign:"center",textBaseline:"bottom"},this.options.text.style),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Q.__assign)((0,Q.__assign)({text:r,x:a/2,y:this.height+Nh,textAlign:"center",textBaseline:"top"},this.options.text.style),{name:"legend-label"})}),s.addShape("path",{attrs:(0,Q.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=this.width/e.length,o=this.height,s=this.container.addGroup(),u=(t-r)/e.length;(0,y.each)(e,function(h,p){var b=a*p,k={from:u*p,to:u*(p+1)},R=n.container.addShape("rect",{attrs:{x:b,y:0,width:a,height:o,fill:h,opacity:.8,cursor:"pointer"},name:"legend"});R.set("info",k),s.addShape("path",{attrs:(0,Q.__assign)({path:[["M",b+a,0],["L",b+a,o]]},n.options.gridlineStyle)})}),this.container.addShape("text",{attrs:(0,Q.__assign)((0,Q.__assign)({text:r,x:-Nh,y:o/2},this.options.text.style),{textAlign:"right",textBaseline:"middle"}),name:"legend-label"}),this.container.addShape("text",{attrs:(0,Q.__assign)({text:t,x:this.width+Nh,y:o/2,textAlign:"left",textBaseline:"middle"},this.options.text.style),name:"legend-label"}),s.addShape("path",{attrs:(0,Q.__assign)({path:[["M",0,0],["L",this.width,0],["L",this.width,this.height],["L",0,this.height],["L",0,0]]},this.options.gridlineStyle)})},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.options.plot.options.width;return r*.5}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.options.plot.options.height;return r*.5}return 10},i.prototype.legendLayout=function(){var r=this,t=this.options.plot.getPlotTheme().bleeding;(0,y.isArray)(t)&&(0,y.each)(t,function(h,p){typeof t[p]=="function"&&(t[p]=t[p](r.options.plot.options))});var e=this.container.getBBox(),n=0,a=0,o=this.options.position.split("-"),s=this.options.plot.width,u=this.options.plot.height;o[0]==="left"?n=t[3]:o[0]==="right"?n=s-t[1]-e.width:o[1]==="center"?n=(s-e.width)/2:o[1]==="left"?n=t[3]:o[1]==="right"&&(n=this.options.plot.width-t[1]-e.width),o[0]==="bottom"?a=u-t[2]-e.height:o[0]==="top"?a=this.getTopPosition(t):o[1]==="center"?a=(u-e.height)/2:o[1]==="top"?a=t[0]:o[1]==="bottom"&&(a=u-t[2]-e.height),this.x=n,this.y=a,this.container.translate(n,a)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.45)"}}},i.prototype.getDarkOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(255, 255, 255, 0.45)"}},gridlineStyle:{lineWidth:1,stroke:"rgba(255, 255, 255, 0.25)"}}},i.prototype.addInteraction=function(){var r=this,t=this.options.plot.options.colorField;this.container.on("click",function(e){var n=e.target;if(n.get("name")==="legend"){var a=n.get("info"),o=a.from+"-"+a.to,s=r.dataSlides[o];s.mode==="active"?(s.mode="deactive",n.stopAnimate(),n.animate({opacity:ib},200)):(s.mode="active",n.stopAnimate(),n.animate({opacity:Qp},200));var u=r.getFilteredData();u.length>0&&(r.view.changeData(u),r.view.scale(t,{min:r.colorScale.min,max:r.colorScale.max,nice:r.colorScale.nice}),r.view.render())}})},i.prototype.getFilteredData=function(){var r=[];return(0,y.each)(this.dataSlides,function(t){t.mode=="active"&&r.push.apply(r,t.data)}),r},i.prototype.getDataSlide=function(r){var t=[],e=this.options.plot.options,n=e.colorField,a=e.data;return(0,y.each)(a,function(o){var s=o[n];s>=r.from&&s<r.to&&t.push(o)}),t},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.getScales=function(){var r;return(0,y.each)(this.view.geometries,function(t){t.type==="heatmap"&&(r=t.scales)}),r},i}(),ob=ab,sb={background:{Ctr:nb},legend:{Ctr:ob,padding:"outer"}};function lb(i,r,t){if(i.options[r]&&i.options[r].visible){var e=sb[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var ub={heatmap:"heatmap",legendLabel:"legend-label",heatmapBackground:"heatmap-background"},hb=Tt(ub);(0,y.assign)(pt,hb);var Jp=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="densityHeatmap",t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,autoRotateTitle:!1,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1,spacing:12}},yAxis:{visible:!0,autoRotateTitle:!0,grid:{visible:!1},line:{visible:!0},tickLine:{visible:!0},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{visible:!1,spacing:12}},tooltip:{visible:!0,showCrosshairs:!0,crosshairs:{type:"xy",line:{style:{stroke:"#000000",lineWidth:1,opacity:.5}}},showMarkers:!1},legend:{visible:!0,position:"bottom-center"},color:["rgba(33,102,172,0)","rgb(103,169,207)","rgb(209,229,240)","rgb(253,219,199)","rgb(239,138,98)","rgb(178,24,43)"],interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.destroy=function(){(0,y.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.geometryParser=function(){return"heatmap"},r.prototype.addGeometry=function(){if(this.options.data.length>1){var t={type:"linearheatmap",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},cfg:{intensity:this.options.intensity,radius:this.options.radius}};this.options.radius&&(t.radius=this.options.radius),this.options.intensity&&(t.intensity=this.options.intensity),this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t),this.addPoint()}},r.prototype.addPoint=function(){var t=this.options,e={visible:!1,size:0};t.point&&t.point.visible?t.point=(0,y.deepMix)(e,t.point):t.point=e;var n=Ci("point","guide",{plot:this});n.active=!1,this.setConfig("geometry",n)},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=Ln("label",(0,Q.__assign)({plot:this,labelType:"scatterLabel",fields:[t.xField,t.yField],position:"middle",offset:0},e));return n},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,P)},r.prototype.renderPlotComponents=function(){var t=this;(0,y.each)(this.plotComponents,function(n){n.destroy()});var e=["legend","background"];(0,y.each)(e,function(n){var a=(0,Q.__assign)({view:t.view,plot:t},t.options[n]),o=lb(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(qn),fb=Jp;An("densityHeatmap",Jp);var cb=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="densityHeatmap",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=fb.getDefaultOptions,r}(un),qp=cb;function Yh(i,r,t,e,n){var a=t*n,o=e*n,s=[["M",i-a/2,r+o/2],["Q",i-a/2,r,i-a/2,r-o/2],["Q",i,r-o/2,i+a/2,r-o/2],["Q",i+a/2,r,i+a/2,r+o/2],["Q",i,r+o/2,i-a/2,r+o/2],["Z"]];return s}function Gh(i,r,t){var e=[["M",i,r],["l",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-(t*2),0],["Z"]];return e}function tg(i,r,t){var e=[["M",i-t,r],["Q",i-t,r-t,i,r-t],["Q",i+t,r-t,i+t,r],["Q",i+t,r+t,i,r+t],["Q",i-t,r+t,i-t,r],["Z"]];return e}(0,q.Fj)("polygon","rect",{draw:function(i,r){var t=this.parsePoints(i.points),e=t[2].x-t[0].x,n=t[0].y-t[1].y,a=t[0].x+e/2,o=t[1].y+n/2,s=Yh(a,o,e,n,i.size);return r.addShape("path",{attrs:(0,y.deepMix)({},{path:s,fill:i.color,opacity:1},i.style)})}}),(0,q.Fj)("point","curvePoint",{draw:function(i,r){var t=Gh(i.x,i.y,i.size);return r.addShape("path",{attrs:(0,y.deepMix)({},{path:t,fill:i.color,opacity:1},i.style)})}});var vb=function(){function i(r){this.destroyed=!1,this.view=r.view,this.plot=r.plot;var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.init()}return i.prototype.init=function(){var r=this;this.container=this.view.geometries[0].labelsContainer,this.view.on("beforerender",function(){r.clear(),r.plot.canvas.draw()})},i.prototype.render=function(){var r=this,t=this.view.geometries[0].elements;(0,y.each)(t,function(e){var n=e.shape,a=r.options,o=a.style,s=a.offsetX,u=a.offsetY,h=r.options.formatter,p=h?h(r.getContent(n)):r.getContent(n),b=r.getPosition(n),k=r.getTextColor(n),R=r.container.addShape("text",{attrs:(0,y.deepMix)({},o,{x:b.x+s,y:b.y+u,text:p,fill:k,textAlign:"center",textBaseline:"middle"}),name:"label"});r.options.adjustPosition&&r.adjustLabel(R,n)})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.hide=function(){this.container.set("visible",!1),this.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.plot.canvas.draw()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.destroyed=!0},i.prototype.getBBox=function(){return this.container.getBBox()},i.prototype.getDefaultOptions=function(){var r=this.plot.theme,t=r.label.style;return{offsetX:0,offsetY:0,style:(0,y.clone)(t)}},i.prototype.getContent=function(r){var t=r.get("origin").data,e=this.plot.options.colorField;return t[e]},i.prototype.getPosition=function(r){var t=r.getBBox();return{x:t.minX+t.width/2,y:t.minY+t.height/2}},i.prototype.getTextColor=function(r){if(this.options.adjustColor){var t=r.attr("fill"),e=r.attr("opacity")?r.attr("opacity"):1,n=Da(t),a=Math.round(n[0]*.299+n[1]*.587+n[2]*.114)/e,o=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],s=Ms(o,a);return s}var u=this.options.style.fill;return u},i.prototype.adjustLabel=function(r,t){var e=r.getBBox(),n=t.getBBox();(e.width>n.width||e.height>n.height)&&r.attr("text","")},i}(),db=vb,eg=4,pb=function(){function i(r){this.destroyed=!1,this.dataSlides={},this.interactiveEvents={};var t=this.getDefaultOptions();this.options=(0,y.deepMix)({},t,r),this.view=this.options.view,this.afterRender=!0,this.init()}return i.prototype.init=function(){var r=this;this.layout=this.getLayout(),this.width=this.options.width?this.options.width:this.getDefaultWidth(),this.height=this.options.height?this.options.height:this.getDefaultHeight();var t=this.options.plot.container;this.container&&this.container.remove(),this.container=t.addGroup(),this.view.on("beforerender",function(){r.clear(),r.options.plot.canvas.draw()})},i.prototype.render=function(){var r=this.view.geometries[0].scales,t=this.options.plot.options.colorField;this.colorScale=r[t];var e=this.colorScale,n=e.min,a=e.max,o=this.options.plot.options.color;this.layout==="horizontal"?this.renderHorizontal(n,a,o):this.renderVertical(n,a,o),this.legendLayout(),this.addInteraction()},i.prototype.hide=function(){this.container.set("visible",!1),this.options.plot.canvas.draw()},i.prototype.show=function(){this.container.set("visible",!0),this.options.plot.canvas.draw()},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove(),this.offEvent(),this.destroyed=!0},i.prototype.getBBox=function(){var r=this.container.getBBox();return new at(this.x,this.y,r.width,r.height)},i.prototype.renderVertical=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.height/(e.length-1),u="l(90)";(0,y.each)(e,function(k,R){var Y=o*R;u+=Y+":"+k+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:u},name:"legend"}),(0,y.each)(e,function(k,R){var Y=s*R;n.container.addShape("path",{attrs:(0,Q.__assign)({path:[["M",0,Y],["L",n.width,Y]]},n.options.ticklineStyle)});var V=Math.round(a*R);n.container.addShape("text",{attrs:(0,Q.__assign)({text:V,textAlign:"left",textBaseline:"middle",x:n.width+eg,y:Y},n.options.text.style),name:"legend-label"})});var h=10,p=14,b=[["M",-h,-p/2],["L",0,0],["L",-h,p/2],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Q.__assign)({path:b},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.renderHorizontal=function(r,t,e){var n=this,a=(t-r)/(e.length-1),o=1/(e.length-1),s=this.width/(e.length-1),u="l(0)";(0,y.each)(e,function(k,R){var Y=o*R;u+=Y+":"+k+" "}),this.container.addShape("rect",{attrs:{x:0,y:0,width:this.width,height:this.height,fill:u},name:"legend"}),(0,y.each)(e,function(k,R){var Y=s*R;n.container.addShape("path",{attrs:(0,Q.__assign)({path:[["M",Y,0],["L",Y,n.height]]},n.options.ticklineStyle),name:"legend-label"});var V=Math.round(a*R);n.container.addShape("text",{attrs:(0,Q.__assign)({text:V,textAlign:"center",textBaseline:"top",x:Y,y:n.height+eg},n.options.text.style)})});var h=14,p=10,b=[["M",0,0],["L",-h/2,-p],["L",h/2,-p],["Z"]];this.anchor=this.container.addShape("path",{attrs:(0,Q.__assign)({path:b},this.options.anchorStyle)}),this.anchor.set("visible",!1)},i.prototype.getLayout=function(){var r=this.options.position.split("-");return this.position=r[0],r[0]==="left"||r[0]==="right"?"vertical":"horizontal"},i.prototype.getDefaultWidth=function(){if(this.layout==="horizontal"){var r=this.view.coordinateBBox.width;return r}return 10},i.prototype.getDefaultHeight=function(){if(this.layout==="vertical"){var r=this.view.coordinateBBox.height;return r}return 10},i.prototype.legendLayout=function(){var r=this,t=this.view.coordinateBBox,e=this.options.plot.getPlotTheme().bleeding;(0,y.isArray)(e)&&(0,y.each)(e,function(p,b){typeof e[b]=="function"&&(e[b]=e[b](r.options.plot.options))});var n=this.container.getBBox(),a=0,o=0,s=this.options.position.split("-"),u=this.options.plot.width,h=this.options.plot.height;s[0]==="left"?a=e[3]:s[0]==="right"?a=u-e[1]-n.width:s[1]==="center"?this.width===t.width?a=t.x:a=(u-n.width)/2:s[1]==="left"?a=e[3]:s[1]==="right"&&(a=this.options.plot.width-e[1]-n.width),s[0]==="bottom"?o=h-e[2]-n.height:s[0]==="top"?o=this.getTopPosition(e):s[1]==="center"?this.height===t.height?o=t.y:o=(h-n.height)/2:s[1]==="top"?o=e[0]:s[1]==="bottom"&&(o=h-e[2]-n.height),this.x=a,this.y=o,this.container.translate(a,o)},i.prototype.getDefaultOptions=function(){return{text:{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.45)"}},ticklineStyle:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.8)"},anchorStyle:{fill:"rgba(0,0,0,0.5)"},triggerOn:"mousemove"}},i.prototype.addInteraction=function(){var r=this,t;this.options.plot.options.shapeType==="rect"?t="polygon":t="point";var e=t+":"+this.options.triggerOn,n=this.options.plot.options.colorField,a=this.colorScale,o=a.min,s=a.max,u=function(p){var b=p.data.data[n],k=(b-o)/(s-o);r.moveAnchor(k)};this.view.on(e,u),this.interactiveEvents[e]={target:this.view,handler:u};var h=function(){r.anchor.set("visible",!1)};this.options.plot.canvas.on("mouseleave",h),this.interactiveEvents.mouseleave={target:this.options.plot.canvas,handler:h}},i.prototype.moveAnchor=function(r){if(this.anchor.set("visible",!0),this.layout==="vertical"){var t=this.height*r,e=[1,0,0,0,1,0,0,0,1];e[7]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}else{var t=this.width*r,e=[1,0,0,0,1,0,0,0,1];e[6]=t,this.anchor.stopAnimate(),this.anchor.animate({matrix:e},400,"easeLinear")}},i.prototype.getTopPosition=function(r){if(this.options.plot.description){var t=this.options.plot.description.getBBox();return t.maxY+10}else if(this.options.plot.title){var t=this.options.plot.title.getBBox();return t.maxY+10}return r[0]},i.prototype.offEvent=function(){(0,y.each)(this.interactiveEvents,function(r,t){var e=r.target,n=r.handler;e.off(t,n)})},i}(),gb=pb,yb={label:{Ctr:db},legend:{Ctr:gb,padding:"outer"}};function mb(i,r,t){if(i.options[r]&&i.options[r].visible){var e=yb[r],n=new e.Ctr(t);return e.padding&&i.paddingController.registerPadding(n,e.padding),n}}var rg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="heatmap",t.gridSize=[],t.plotComponents=[],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{shapeType:"rect",legend:{visible:!0,position:"right-center"},tooltip:{shared:!1,showCrosshairs:!1,showMarkers:!1},xAxis:{visible:!0,gridAlign:"center",grid:{visible:!0},tickLine:{visible:!0},line:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!0}},yAxis:{visible:!0,gridAlign:"center",grid:{visible:!0,align:"center"},tickLine:{visible:!0},label:{autoHide:!0,autoRotate:!1}},color:["#9ae3d5","#66cdbb","#e7a744","#f1e066","#f27664","#e7c1a2"],label:{visible:!0,adjustColor:!0,adjustPosition:!0,offset:0,style:{stroke:"rgba(255,255,255,0)",lineWidth:0}},interactions:[{type:"tooltip"}]})},r.prototype.afterRender=function(){this.renderPlotComponents(),i.prototype.afterRender.call(this)},r.prototype.changeShape=function(t){if(this.options.shapeType!==t){if(this.options.shapeType=t,t==="rect"){var e=this.getShape();this.circleToRect(e)}else if(t==="circle"){var e=this.getShape();this.rectToCircle(e)}}},r.prototype.mappingSize=function(t){if(!(this.options.sizeField&&this.options.sizeField===t)){this.options.sizeField=t;var e=(0,y.valuesOfKey)(this.options.data,t),n=Math.min.apply(Math,e),a=Math.max.apply(Math,e),o=(0,Fe.getScale)("linear"),s=new o({min:n,max:a}),u=this.getShape();this.options.shapeType==="rect"?this.rectSizeMapping(u,s,t):this.options.shapeType==="circle"&&this.circleSizeMapping(u,s,t)}},r.prototype.disableMappingSize=function(){var t=this.getShape();this.options.shapeType==="rect"?this.rectDisableSizeMapping(t):this.options.shapeType==="circle"&&this.circleDisableSizeMapping(t)},r.prototype.destroy=function(){(0,y.each)(this.plotComponents,function(t){t.destroy()}),i.prototype.destroy.call(this)},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(){return""},r.prototype.coord=function(){},r.prototype.legend=function(){this.setConfig("legends",!1)},r.prototype.addGeometry=function(){this.gridSize=this.getGridSize();var t;if(this.options.shapeType==="rect")t=this.addRect();else{var e=this.addCircle();t=e}if(this.options.shapeStyle){var n={};(0,y.isFunction)(this.options.shapeStyle)?(n.fields=[this.options.colorField,this.options.xField,this.options.yField,this.options.sizeField],n.callback=this.options.shapeStyle):(0,y.isObject)(this.options.shapeStyle)&&(n.cfg=this.options.shapeStyle),t.style=n}this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(t),this.setConfig("geometry",t)},r.prototype.addRect=function(){var t=[.3,.9];this.options.shapeSize&&(t[0]=this.options.shapeSize[0]/this.gridSize[0],t[1]=this.options.shapeSize[1]/this.gridSize[1]);var e={type:"polygon",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["rect"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[1]},e},r.prototype.addCircle=function(){var t=[.3,.9];this.options.shapeSize?t=this.options.shapeSize:(t[0]=this.gridSize[0]*t[0]*.5,t[1]=this.gridSize[1]*t[1]*.5);var e={type:"point",position:{fields:[this.options.xField,this.options.yField]},color:{fields:[this.options.colorField],values:this.options.color},shape:{values:["curvePoint"]},label:!1};return this.options.sizeField?e.size={fields:[this.options.sizeField],values:t}:e.size={values:[Math.min(this.gridSize[0],this.gridSize[1])*.5*.9]},e},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.xField,this.options.yField],this.options.colorField&&t.tooltip.fields.push(this.options.colorField)))},r.prototype.getGridSize=function(){if(this.options.padding==="auto")return[0,0];var t=this.getViewRange(),e=this.options,n=e.padding,a=e.xField,o=e.yField,s=e.data,u=t.width-n[1]-n[3],h=t.height-n[0]-n[2],p=(0,y.valuesOfKey)(s,a).length,b=(0,y.valuesOfKey)(s,o).length;return[u/p,h/b]},r.prototype.circleToRect=function(t){var e=this,n=this.gridSize;(0,y.each)(t,function(a){var o=a.get("origin"),s=o.x,u=o.y,h=o.size,p=h*2/Math.min(n[0],n[1]);e.options.sizeField||(p=1);var b=tg(s,u,h),k=Yh(s,u,n[0],n[1],p);a.stopAnimate(),a.attr("path",b),a.animate({path:k},500,"easeLinear")})},r.prototype.rectToCircle=function(t){var e=this;(0,y.each)(t,function(n){var a=n.get("coord"),o=n.get("origin").points,s=[];(0,y.each)(o,function(Z){s.push(a.convertPoint(Z))});var u=n.getBBox(),h=u.width,p=u.height,b=u.minX+h/2,k=u.minY+p/2,R=e.options.sizeField?1:.9,Y=tg(b,k,Math.min(h,p)/2*R),V=Gh(b,k,Math.min(h,p)/2*R);n.stopAnimate(),n.animate({path:Y},500,"easeLinear",function(){n.attr("path",V)})})},r.prototype.rectSizeMapping=function(t,e,n){(0,y.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[n])*.6;a.get("origin").size=s;var u=a.getBBox(),h=u.width,p=u.height,b=u.minX+h/2,k=u.minY+p/2,R=Yh(b,k,h,p,s);a.stopAnimate(),a.animate({path:R},500,"easeLinear")})},r.prototype.circleSizeMapping=function(t,e,n){(0,y.each)(t,function(a){var o=a.get("origin").data,s=.3+e.scale(o[n])*.6,u=a.get("origin"),h=u.x,p=u.y,b=u.size,k=Gh(h,p,b*s);a.get("origin").size=b*s,a.stopAnimate(),a.animate({path:k},500,"easeLinear")})},r.prototype.circleDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,y.each)(t,function(n){var a=n.get("origin"),o=a.x,s=a.y,u=Math.min(e.gridSize[0],e.gridSize[1])*.9;n.get("origin").size=u/2;var h=Gh(o,s,u/2);n.stopAnimate(),n.animate({path:h},500,"easeLinear")})},r.prototype.rectDisableSizeMapping=function(t){var e=this;this.options.sizeField=null,(0,y.each)(t,function(n){var a=n.getBBox(),o=a.width,s=a.height,u=a.minX+o/2,h=a.minY+s/2,p=Yh(u,h,e.gridSize[0],e.gridSize[1],1);n.get("origin").size=1,n.stopAnimate(),n.animate({path:p},500,"easeLinear")})},r.prototype.getShape=function(){var t=this.view.geometries[0].elements,e=[];return(0,y.each)(t,function(n){e.push(n.shape)}),e},r.prototype.renderPlotComponents=function(){var t=this;(0,y.each)(this.plotComponents,function(n){n.destroy()}),this.plotComponents=[];var e=["label","legend"];(0,y.each)(e,function(n){var a=(0,Q.__assign)({view:t.view,plot:t},t.options[n]),o=mb(t,n,a);o&&(o.render(),t.plotComponents.push(o))})},r}(qn),xb=rg;An("heatmap",rg);var bb=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="heatmap",i.prototype.createLayers.call(this,e)},r.prototype.changeShape=function(t){var e=this.layers[0];e.changeShape(t)},r.prototype.mappingSize=function(t){var e=this.layers[0];e.mappingSize(t)},r.prototype.disableMappingSize=function(){var t=this.layers[0];t.disableMappingSize()},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=xb.getDefaultOptions,r}(un),ng=bb,wb=function(i){(0,Q.__extends)(r,i);function r(t){var e=this,n=(0,y.deepMix)({},t,{itemTpl:`<div data-index={index}>
        <span style="background-color:{color};" class="g2-tooltip-marker"></span>
        {name}<span class="g2-tooltip-value">{value}</span></div>`},t);return e=i.call(this,n)||this,e}return r}(q.P),Sb=wb;/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",n=function(o){var s=t.length;return t.push(o),window.postMessage(e+s.toString(36),"*"),s};return window.addEventListener("message",function(o){if(!(typeof o.data!="string"||o.data.substr(0,e.length)!==e)){o.stopImmediatePropagation();var s=parseInt(o.data.substr(e.length),36);!t[s]||(t[s](),t[s]=void 0)}},!0),window.clearImmediate=function(o){!t[o]||(t[o]=void 0)},n}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}());var nd=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var t=r.getContext("2d");return!(!t.getImageData||!t.fillText||!Array.prototype.some||!Array.prototype.push)}(),Ps=function(){if(!!nd){for(var r=document.createElement("canvas").getContext("2d"),t=20,e,n;t;){if(r.font=t.toString(10)+"px sans-serif",r.measureText("\uFF37").width===e&&r.measureText("m").width===n)return t+1;e=r.measureText("\uFF37").width,n=r.measureText("m").width,t--}return 0}}(),Cb=function(r){for(var t,e,n=r.length;n;t=Math.floor(Math.random()*n),e=r[--n],r[n]=r[t],r[t]=e);return r},id=function(r,t){if(!nd)return;Array.isArray(r)||(r=[r]),r.forEach(function(Kr,ur){if(typeof Kr=="string"){if(r[ur]=document.getElementById(Kr),!r[ur])throw"The element id specified is not found."}else if(!Kr.tagName&&!Kr.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var e={data:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minFontSize:Ps,maxFontSize:60,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotateRatio:.5,rotationSteps:1,shuffle:!0,shape:"circle",ellipticity:1,active:!0,animatable:!0,selected:-1,shadowColor:"#333",shadowBlur:10,fontScale:1.2,classes:null,onWordCloudHover:null,onWordCloudClick:null},n=[];if(t)for(var a in t)if(a==="wordStyle")for(var o in t[a])o in e&&(e[o]=t[a][o]);else a in e&&(e[a]=t[a]);if(e.minFontSize<Ps&&(e.minFontSize=Ps),e.minFontSize>e.maxFontSize){console.error("minSize cant bigger than maxSize");return}for(var s=0,u=0;u<e.data.length;u++)s<e.data[u].weight&&(s=e.data[u].weight);var h=function(ur){var Tr=Math.min(Math.max(e.minFontSize,e.maxFontSize*ur/s),e.maxFontSize);return nn?Tr*e.fontScale:Tr},p=!1;if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(ur){return 1-Math.sin(ur)},p=!0;break;case"diamond":e.shape=function(ur){var Tr=ur%(2*Math.PI/4);return 1/(Math.cos(Tr)+Math.sin(Tr))};break;case"square":e.shape=function(ur){var Tr=(ur+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(Tr)+Math.sin(Tr))};break;case"triangle-forward":e.shape=function(ur){var Tr=ur%(2*Math.PI/3);return 1/(Math.cos(Tr)+Math.sqrt(3)*Math.sin(Tr))};break;case"triangle-backward":e.shape=function(ur){var Tr=(ur+Math.PI)%(2*Math.PI/3);return 1/(Math.cos(Tr)+Math.sqrt(3)*Math.sin(Tr))};break;case"triangle":case"triangle-up":e.shape=function(ur){var Tr=(ur+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(Tr)+Math.sqrt(3)*Math.sin(Tr))};break;case"triangle-down":e.shape=function(ur){var Tr=(ur+Math.PI*5/2)%(2*Math.PI/3);return 1/(Math.cos(Tr)+Math.sqrt(3)*Math.sin(Tr))};break;case"pentagon":e.shape=function(ur){var Tr=(ur+.955)%(2*Math.PI/5);return 1/(Math.cos(Tr)+.726543*Math.sin(Tr))};break;case"star":e.shape=function(ur){var Tr=(ur+.955)%(2*Math.PI/10);return(ur+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-Tr)+3.07768*Math.sin(2*Math.PI/10-Tr)):1/(Math.cos(Tr)+3.07768*Math.sin(Tr))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var b=e.gridSize,k=b-e.maskGapWidth,R=Math.abs(e.maxRotation-e.minRotation),Y=Math.min(e.maxRotation,e.minRotation),V=e.rotationSteps,Z,it,tt,_t,It,Ht,le;function xe(Kr,ur){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(ur-Kr)+Kr).toFixed()+"%)"}switch(e.color){case"random-dark":le=function(){return xe(10,50)};break;case"random-light":le=function(){return xe(50,90)};break;default:typeof e.color=="function"&&(le=e.color);break}var Ce=null;typeof e.classes=="function"&&(Ce=e.classes);var me=!1,Le=[],Ye,Be=function(ur){var Tr=ur.currentTarget,an=Tr.getBoundingClientRect(),fn,Jr;ur.touches?(fn=ur.touches[0].clientX,Jr=ur.touches[0].clientY):(fn=ur.clientX,Jr=ur.clientY);var bn=fn-an.left,pn=Jr-an.top,sn=Math.floor(bn*(Tr.width/an.width||1)/b),wn=Math.floor(pn*(Tr.height/an.height||1)/b);return Le&&Le[sn]&&Le[sn][wn]},or=function(ur,Tr,an,fn){fn(ur?ur.id:-1)},cr=function(ur){var Tr=Be(ur);if(Ye!==Tr&&!(nn&&Tr&&Tr.item&&!(0,y.get)(Tr,["item","twiceRender"]))){if(!Tr){e.onWordCloudHover(void 0,void 0,ur,yn),e.active&&or(void 0,void 0,ur,yn);return}e.onWordCloudHover(Tr.item,Tr.dimension,ur,yn),e.active&&or(Tr.item,Tr.dimension,ur,yn),Ye=Tr}},ar=function(ur){var Tr=Be(ur);!Tr||(e.onWordCloudClick(Tr.item,Tr.dimension,ur),ur.preventDefault())},Cr=[],wr=function(ur){if(Cr[ur])return Cr[ur];var Tr=ur*8,an=Tr,fn=[];for(ur===0&&fn.push([_t[0],_t[1],0]);an--;){var Jr=1;e.shape!=="circle"&&(Jr=e.shape(an/Tr*2*Math.PI)),fn.push([_t[0]+ur*Jr*Math.cos(-an/Tr*2*Math.PI),_t[1]+ur*Jr*Math.sin(-an/Tr*2*Math.PI)*e.ellipticity,an/Tr*2*Math.PI])}return Cr[ur]=fn,fn},Mr=function(){return e.abortThreshold>0&&new Date().getTime()-Ht>e.abortThreshold},yr=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:R===0?Y:V>0?Y+Math.floor(Math.random()*V)*R/V:Y+Math.random()*R},mr=function(ur,Tr,an){var fn=!1,Jr=h(Tr);if(Jr<=0)return!1;var bn=1;Jr<Ps&&(bn=function(){for(var us=2;us*Jr<Ps;)us+=2;return us}());var pn=document.createElement("canvas"),sn=pn.getContext("2d",{willReadFrequently:!0});sn.font=e.fontWeight+" "+(Jr*bn).toString(10)+"px "+e.fontFamily;var wn=sn.measureText(ur).width/bn,Fn=Math.max(Jr*bn,sn.measureText("m").width,sn.measureText("\uFF37").width)/bn,hi=wn+Fn*2,jn=Fn*3,xi=Math.ceil(hi/b),Ai=Math.ceil(jn/b);hi=xi*b,jn=Ai*b;var Wi=-wn/2,Qi=-Fn*.4,Bi=Math.ceil((hi*Math.abs(Math.sin(an))+jn*Math.abs(Math.cos(an)))/b),rn=Math.ceil((hi*Math.abs(Math.cos(an))+jn*Math.abs(Math.sin(an)))/b),bi=rn*b,Yi=Bi*b;pn.setAttribute("width",bi),pn.setAttribute("height",Yi),fn&&(document.body.appendChild(pn),sn.save()),sn.scale(1/bn,1/bn),sn.translate(bi*bn/2,Yi*bn/2),sn.rotate(-an),sn.font=e.fontWeight+" "+(Jr*bn).toString(10)+"px "+e.fontFamily,sn.fillStyle="#000",sn.textBaseline="middle",sn.fillText(ur,Wi*bn,(Qi+Jr*.5)*bn);var Fi;try{Fi=sn.getImageData(0,0,bi,Yi).data}catch(Ji){return!1}if(Mr())return!1;fn&&(sn.strokeRect(Wi*bn,Qi,wn*bn,Fn*bn),sn.restore());for(var ho=[],Gi=rn,Kn,Xn,fi,gi=[Bi/2,rn/2,Bi/2,rn/2];Gi--;)for(Kn=Bi;Kn--;){fi=b;t:{for(;fi--;)for(Xn=b;Xn--;)if(Fi[((Kn*b+fi)*bi+(Gi*b+Xn))*4+3]){ho.push([Gi,Kn]),Gi<gi[3]&&(gi[3]=Gi),Gi>gi[1]&&(gi[1]=Gi),Kn<gi[0]&&(gi[0]=Kn),Kn>gi[2]&&(gi[2]=Kn),fn&&(sn.fillStyle="rgba(255, 0, 0, 0.5)",sn.fillRect(Gi*b,Kn*b,b-.5,b-.5));break t}fn&&(sn.fillStyle="rgba(0, 0, 255, 0.5)",sn.fillRect(Gi*b,Kn*b,b-.5,b-.5))}}return fn&&(sn.fillStyle="rgba(0, 255, 0, 0.5)",sn.fillRect(gi[3]*b,gi[0]*b,(gi[1]-gi[3]+1)*b,(gi[2]-gi[0]+1)*b)),{mu:bn,occupied:ho,bounds:gi,gw:rn,gh:Bi,fillTextOffsetX:Wi,fillTextOffsetY:Qi,fillTextWidth:wn,fillTextHeight:Fn,fontSize:Jr}},zr=function(ur,Tr,an,fn,Jr){for(var bn=Jr.length;bn--;){var pn=ur+Jr[bn][0],sn=Tr+Jr[bn][1];if(pn>=it||sn>=tt||pn<0||sn<0){if(!e.drawOutOfBound)return!1;continue}if(!Z[pn][sn])return!1}return!0},Ur=function(ur,Tr,an,fn,Jr,bn,pn,sn,wn,Fn,hi){var jn=an.fontSize,xi=e.color,Ai=e.classes;if(!hi)le?xi=le(fn,Jr,jn,bn,pn):xi=e.color,Ce?Ai=Ce(fn,Jr,jn,bn,pn):Ai=e.classes;else{var Wi=Nr(Fn);xi=Wi?Wi.color:e.color}var Qi,Bi=an.bounds;Qi={x:(ur+Bi[3])*b,y:(Tr+Bi[0])*b,w:(Bi[1]-Bi[3]+1)*b,h:(Bi[2]-Bi[0]+1)*b},r.forEach(function(rn){if(rn.getContext){var bi=rn.getContext("2d"),Yi=an.mu;bi.save();var Fi=e.fontWeight+" "+(jn*Yi).toString(10)+"px "+e.fontFamily;bi.scale(1/Yi,1/Yi),bi.font=Fi,bi.fillStyle=xi;var ho=(ur+an.gw/2)*b*Yi,Gi=(Tr+an.gh/2)*b*Yi;bi.translate(ho,Gi),sn!==0&&bi.rotate(-sn),bi.textBaseline="middle",e.selected===Fn&&(bi.shadowColor=e.shadowColor,bi.shadowBlur=e.shadowBlur),bi.fillText(fn,an.fillTextOffsetX*Yi,(an.fillTextOffsetY+jn*.5)*Yi),hi||n.push({gx:ur,gy:Tr,info:an,word:fn,weight:Jr,distance:bn,theta:pn,rotateDeg:sn,attributes:wn,id:Fn,color:xi}),bi.restore()}else{var Kn=document.createElement("span"),Xn="";Xn="rotate("+-sn/Math.PI*180+"deg) ",an.mu!==1&&(Xn+="translateX(-"+an.fillTextWidth/4+"px) scale("+1/an.mu+")");var fi={position:"absolute",display:"block",font:e.fontWeight+" "+jn*an.mu+"px "+e.fontFamily,left:(ur+an.gw/2)*b+an.fillTextOffsetX+"px",top:(Tr+an.gh/2)*b+an.fillTextOffsetY+"px",width:an.fillTextWidth+"px",height:an.fillTextHeight+"px",lineHeight:jn+"px",whiteSpace:"nowrap",transform:Xn,webkitTransform:Xn,msTransform:Xn,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};xi&&(fi.color=xi),Kn.textContent=fn;for(var gi in fi)Kn.style[gi]=fi[gi];if(wn)for(var Ji in wn)Kn.setAttribute(Ji,wn[Ji]);Ai&&(Kn.className+=Ai),rn.appendChild(Kn)}})},Xr=function(ur,Tr,an,fn,Jr){if(!(ur>=it||Tr>=tt||ur<0||Tr<0)){if(Z[ur][Tr]=!1,an){var bn=r[0].getContext("2d");bn.fillRect(ur*b,Tr*b,k,k)}me&&(Le[ur][Tr]={item:Jr,dimension:fn})}},Er=function(ur,Tr,an,fn,Jr){var bn=Jr.occupied,pn=e.drawMask,sn;pn&&(sn=r[0].getContext("2d"),sn.save(),sn.fillStyle=e.maskColor);var wn;if(me){var Fn=Jr.bounds;wn={x:(ur+Fn[3])*b,y:(Tr+Fn[0])*b,w:(Fn[1]-Fn[3]+1)*b,h:(Fn[2]-Fn[0]+1)*b}}for(var hi=bn.length;hi--;){var jn=ur+bn[hi][0],xi=Tr+bn[hi][1];if(!(jn>=it||xi>=tt||jn<0||xi<0)){var Ai=Nr(Jr.item.id);Ai&&(Jr.item.color=Ai.color),Xr(jn,xi,pn,wn,Jr.item)}}pn&&sn.restore()},Zr=function(ur,Tr,an,fn,Jr,bn,pn,sn){var wn=Math.floor(ur[0]-Tr.gw/2),Fn=Math.floor(ur[1]-Tr.gh/2),hi=Tr.gw,jn=Tr.gh;return zr(wn,Fn,hi,jn,Tr.occupied)?(Ur(wn,Fn,Tr,an,fn,Jr,ur[2],bn,pn,sn,!1),Er(wn,Fn,hi,jn,Tr),{gx:wn,gy:Fn,rot:bn,info:Tr}):!1},ln=function(ur){var Tr,an,fn,Jr;Array.isArray(ur)?(Tr=ur[0],an=ur[1]):(Tr=ur.word,an=ur.weight,fn=ur.attributes,Jr=ur.id);var bn=(0,y.isNil)(ur.rotateDeg)?yr():ur.rotateDeg,pn=mr(Tr,an,bn);if(pn&&(pn.item=ur),!pn||Mr())return!1;if(!e.drawOutOfBound){var sn=pn.bounds;if(sn[1]-sn[3]+1>it||sn[2]-sn[0]+1>tt)return!1}for(var wn=It+1;wn--;){var Fn=wr(It-wn);e.shuffle&&(Fn=[].concat(Fn),Cb(Fn));for(var hi=0;hi<Fn.length;hi++){var jn=Zr(Fn[hi],pn,Tr,an,It-wn,bn,fn,Jr);if(jn)return jn}}return null},Yr=function(ur,Tr,an){if(Tr)return!r.some(function(fn){var Jr=document.createEvent("CustomEvent");return Jr.initCustomEvent(ur,!0,Tr,an||{}),!fn.dispatchEvent(Jr)},this);r.forEach(function(fn){var Jr=document.createEvent("CustomEvent");Jr.initCustomEvent(ur,!0,Tr,an||{}),fn.dispatchEvent(Jr)},this)},Nr=function(ur){for(var Tr=0;Tr<n.length;Tr++){var an=n[Tr];if(n[Tr].id===ur)return an}},nn,yn=function(ur){if(ur!==void 0){if(e.selected!==ur&&r[0].getContext){e.selected=ur;var Tr=r[0].getContext("2d");Tr.fillStyle=e.backgroundColor,Tr.clearRect(0,0,r[0].width,r[0].height),Tr.fillRect(0,0,r[0].width,r[0].height);for(var an=0;an<n.length;an++){var fn=n[an];(!nn||nn&&(0,y.get)(fn,["info","item","twiceRender"]))&&Ur(fn.gx,fn.gy,fn.info,fn.word,fn.weight,fn.distance,fn.theta,fn.rotateDeg,fn.attributes,fn.id,!0)}}return}var Jr=r[0];if(Jr.getContext)it=Math.ceil(Jr.width/b),tt=Math.ceil(Jr.height/b);else{var bn=Jr.getBoundingClientRect();it=Math.ceil(bn.width/b),tt=Math.ceil(bn.height/b)}if(!!Yr("wordcloudstart",!0)){_t=e.origin?[e.origin[0]/b,e.origin[1]/b]:[it/2,tt/(p?4:2)],It=Math.floor(Math.sqrt(it*it+tt*tt)),Z=[];var pn,sn,wn;if(!Jr.getContext||e.clearCanvas)for(r.forEach(function(Xn){if(Xn.getContext){var fi=Xn.getContext("2d");fi.fillStyle=e.backgroundColor,fi.clearRect(0,0,it*(b+1),tt*(b+1)),fi.fillRect(0,0,it*(b+1),tt*(b+1))}else Xn.textContent="",Xn.style.backgroundColor=e.backgroundColor,Xn.style.position="relative"}),pn=it;pn--;)for(Z[pn]=[],sn=tt;sn--;)Z[pn][sn]=!0;else{var Fn=document.createElement("canvas").getContext("2d");Fn.fillStyle=e.backgroundColor,Fn.fillRect(0,0,1,1);var hi=Fn.getImageData(0,0,1,1).data,jn=Jr.getContext("2d").getImageData(0,0,it*b,tt*b).data;pn=it;for(var xi,Ai;pn--;)for(Z[pn]=[],sn=tt;sn--;){Ai=b;t:for(;Ai--;)for(xi=b;xi--;)for(wn=4;wn--;)if(jn[((sn*b+Ai)*it*b+(pn*b+xi))*4+wn]!==hi[wn]){Z[pn][sn]=!1;break t}Z[pn][sn]!==!1&&(Z[pn][sn]=!0)}jn=Fn=hi=void 0}if(e.onWordCloudHover||e.onWordCloudClick){for(me=!0,pn=it+1;pn--;)Le[pn]=[];e.onWordCloudHover&&Jr.addEventListener("mousemove",cr),e.onWordCloudClick&&(Jr.addEventListener("click",ar),Jr.addEventListener("touchstart",ar),Jr.addEventListener("touchend",function(Xn){Xn.preventDefault()}),Jr.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),Jr.addEventListener("wordcloudstart",function Xn(){Jr.removeEventListener("wordcloudstart",Xn),Jr.removeEventListener("mousemove",cr),Jr.removeEventListener("click",ar),Ye=void 0})}if(e.animatable){wn=0;var bi,Yi;e.wait!==0?(bi=window.setTimeout,Yi=window.clearTimeout):(bi=window.setImmediate,Yi=window.clearImmediate);var Fi=function(fi,gi){r.forEach(function(Ji){Ji.addEventListener(fi,gi)},this)},ho=function(fi,gi){r.forEach(function(Ji){Ji.removeEventListener(fi,gi)},this)},Gi=function Xn(){ho("wordcloudstart",Xn),Yi(Kn)};Fi("wordcloudstart",Gi);var Kn=bi(function Xn(){if(wn>=e.data.length){Yi(Kn),Yr("wordcloudstop",!1),ho("wordcloudstart",Gi);return}Ht=new Date().getTime();var fi=ln(e.data[wn]),gi=!Yr("wordclouddrawn",!0,{item:e.data[wn],drawn:fi});if(Mr()||gi){Yi(Kn),e.abort(),Yr("wordcloudabort",!1),Yr("wordcloudstop",!1),ho("wordcloudstart",Gi);return}wn++,Kn=bi(Xn,e.wait)},e.wait)}else{t.maskImage&&r.forEach(function(Xn){if(Xn.getContext){var fi=Xn.getContext("2d");fi.fillStyle=e.backgroundColor,fi.clearRect(0,0,it*(b+1),tt*(b+1)),fi.fillRect(0,0,it*(b+1),tt*(b+1))}});for(var Wi=[],Qi=0;Qi<e.data.length;Qi++){var Bi=ln(e.data[Qi]);Bi&&Wi.push(Bi)}if(Wi.length===e.data.length&&!nn){for(r.forEach(function(Xn){if(Xn.getContext){var fi=Xn.getContext("2d");fi.fillStyle=e.backgroundColor,fi.clearRect(0,0,it*(b+1),tt*(b+1)),fi.fillRect(0,0,it*(b+1),tt*(b+1))}}),pn=it;pn--;)for(Z[pn]=[],sn=tt;sn--;)Z[pn][sn]=!0;nn=!0;for(var rn=0;rn<e.data.length;rn++)ln((0,Q.__assign)((0,Q.__assign)({},e.data[rn]),{twiceRender:nn}))}}}};yn()};id.isSupported=nd,id.minFontSize=Ps;var Mb=id,Eb=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e._toolTipsAction=function(n,a,o,s){a?(e._toolTips.update({items:[{color:n.color||"red",name:n.word,value:n.weight}],x:o.offsetX,y:o.offsetY}),e._toolTips.show()):e._toolTips.hide(),e._toolTips.render(),e._configHoverAction&&e._configHoverAction(n,a,o,s)},e._configHoverAction=t.onWordCloudHover,e._enableToolTips=(0,y.get)(t,"tooltip.visible",!0),e.options=(0,y.deepMix)({},{width:400,height:400,enableToolTips:!0},t,{onWordCloudHover:e._enableToolTips?e._toolTipsAction:e._configHoverAction}),e}return r.prototype.init=function(){i.prototype.init.call(this),this._initToolTips()},r.prototype.render=function(){i.prototype.render.call(this),this._render()},r.prototype._initToolTips=function(){this._toolTips=new Sb({showTitle:!1,visible:!1,parent:this.options.container,follow:!0,inPanel:!1,items:[]}),this._toolTips.init()},r.prototype._render=function(){this._targetCanvas=this.canvas.get("el"),this.options.maskImage?this._handleMaskImage():this._start()},r.prototype._handleMaskImage=function(){var t=this,e=new Image;e.src=this.options.maskImage+"?"+new Date().getTime(),e.crossOrigin="Anonymous",e.onload=function(){e.naturalHeight+e.naturalWidth===0||e.width+e.height===0?t._start():t._startWithMaskImage(e)},e.onerror=function(){console.error("image %s load failed !!!",t.options.maskImage),t._start()}},r.prototype._start=function(){this._handleG2PlotConfig();var t=this._targetCanvas.getContext("2d"),e=this.canvas.get("width")/this.canvas.get("el").width;t.scale(e,e),Mb(this._targetCanvas,this.options)},r.prototype._handleG2PlotConfig=function(){var t=this.options.wordStyle.fontSize||[10,60],e=this.options.wordStyle.rotation||[-Math.PI/2,Math.PI/2],n,a,o;this.options.wordStyle.active?(n=!0,a=this.options.wordStyle.active.shadowColor||"#333",o=this.options.wordStyle.active.shadowBlur||10):n=!1,this.options=(0,y.deepMix)({},this.options,{minFontSize:t[0],maxFontSize:t[1],minRotation:e[0],maxRotation:e[1],active:n,shadowColor:a,shadowBlur:o})},r.prototype._startWithMaskImage=function(t){var e=this._scaleMaskImageCanvas(this._transformWhite2BlackPixels(t)),n=e.maskImageCanvas,a=e.maskImageContext,o=document.createElement("canvas").getContext("2d");o.fillStyle=this.options.backgroundColor||"#fff",o.fillRect(0,0,1,1);for(var s=o.getImageData(0,0,1,1).data,u=a.getImageData(0,0,n.width,n.height),h=a.createImageData(u),p=0;p<u.data.length;p+=4)u.data[p+3]>128?(h.data[p]=s[0],h.data[p+1]=s[1],h.data[p+2]=s[2],h.data[p+3]=s[3]):(h.data[p]=s[0],h.data[p+1]=s[1],h.data[p+2]=s[2],h.data[p+3]=254);a.putImageData(h,0,0);var b=this._targetCanvas.getContext("2d");b.drawImage(n,0,0),this.options=(0,y.deepMix)({},this.options,{clearCanvas:!1}),this._start()},r.prototype._scaleMaskImageCanvas=function(t){var e=document.createElement("canvas");e.width=this.canvas.get("width"),e.height=this.canvas.get("height");var n=e.getContext("2d");return n.imageSmoothingEnabled=!0,n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),{maskImageCanvas:e,maskImageContext:n}},r.prototype._transformWhite2BlackPixels=function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);for(var a=n.getImageData(0,0,e.width,e.height),o=4,s=0,u=255,h=0;h<a.data.length;h+=o){var p=a.data[h]+a.data[h+1]+a.data[h+2],b=a.data[h+3];b<128||p>250*3?(a.data[h]=u,a.data[h+1]=u,a.data[h+2]=u,a.data[h+3]=s):(a.data[h]=s,a.data[h+1]=s,a.data[h+2]=s,a.data[h+3]=u)}return n.putImageData(a,0,0),e},r}(Pt),Ab=Eb,Tb=function(i){(0,Q.__extends)(r,i);function r(t,e){var n=this;return e.renderer="canvas",n=i.call(this,t,e)||this,n}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="wordCloud",e.container=this.containerDOM,i.prototype.createLayers.call(this,e)},r}(un),Pb=Tb;An("wordCloud",Ab);var Lb={rose:"interval"},_b=Tt(Lb);(0,y.assign)(pt,_b);var Ib={rose:"interval"},Ob={rose:"column"},ig=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rose",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,innerRadius:0,label:{visible:!0,type:"inner",autoRotate:!0,adjustColor:!1},legend:{visible:!0,position:"right"},tooltip:{visible:!0,shared:!1,showCrosshairs:!1,showMarkers:!1},columnStyle:{stroke:"white",lineWidth:1},xAxis:{visible:!1,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t),n=t.sectorStyle,a=t.categoryField,o=t.radiusField;return(0,y.deepMix)({},e,{columnStyle:n,xField:a,yField:o})},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;t&&this.view.getScaleByField(t)},r.prototype.getAngleScale=function(){var t=this.options.categoryField;t&&this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return t==="g2"?Ib[e]:Ob[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.radiusField]={},e[t.categoryField]={type:"cat"},this.setConfig("scales",e)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius,innerRadius:t.innerRadius||0}};this.setConfig("coordinate",e)},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{plot:this,positionFields:[t.categoryField,t.radiusField],widthRatio:{rose:1}});e.label=this.extractLabel(),e.adjust=this.adjustRoseAdjust(),this.rose=e,t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.adjustRoseAdjust=function(){},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.colorField]))},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.rose.animate=!1)},r.prototype.annotation=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,A)},r.prototype.extractLabel=function(){var t=this.options;if(!t.label||!t.label.visible)return!1;var e=(0,y.deepMix)({},t.label);this.adjustLabelOptions(e);var n=[t.categoryField,t.radiusField],a=Ln("label",(0,Q.__assign)({plot:this,labelType:"polar",fields:n},e));return a},r.prototype.adjustLabelOptions=function(t){var e=this.options.radiusField;if(t){var n=t.offset,a=t.type,o=t.content;a==="inner"?t.offset=n<0?n:-10:a==="outer"&&(t.offset=n>=0?n:10),o||(t.content=function(s,u){return""+u._origin[e]})}},r}(qn),ad=ig;An("rose",ig);var kb=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="rose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=ad.getDefaultOptions,r}(un),ag=kb,wo=v(50344),Bb=function(i){var r=i.opacity||1;return{opacity:r*.5}},Db=function(i){var r=i.opacity||1;return{opacity:r*.5}};Xi("funnel",{columnStyle:{normal:{},active:Bb,disable:Db,selected:{lineWidth:1,stroke:"black"}}});var Ro=v(99576),og=v(26877);function Fb(i,r){r===void 0&&(r=!1);var t=i.x,e=i.y,n=i.y0,a=i.size,o,s;(0,y.isArray)(e)?(o=e[0],s=e[1]):(o=n,s=e);var u,h;(0,y.isArray)(t)?(u=t[0],h=t[1]):(u=t-a/2,h=t+a/2);var p=[{x:u,y:o},{x:u,y:s}];return r?p.push({x:h,y:(s+o)/2}):p.push({x:h,y:s},{x:h,y:o}),p}function Rb(i,r){var t=[],e=i.points,n=i.nextPoints;if(r){var a=r.yValues,o=r.yValuesMax,s=r.yValuesNext,u=(e[0].y+e[1].y)/2,h=a[0]+a[1],p=a.map(function(V){return V/h/.5}),b=(o[0]/(o[0]+o[1])-.5)*.9,k=.001;if((0,y.isNil)(n))t.push(["M",e[0].x,b+(e[0].y-u)*p[0]+u],["L",e[1].x,b+u],["L",e[2].x,b+u],["L",e[3].x,b+(e[3].y-u)*p[0]+u],["Z"]),t.push(["M",e[0].x,b+.002+u],["L",e[1].x,b+.002+(e[1].y-u)*p[1]+u],["L",e[2].x,b+.002+(e[2].y-u)*p[1]+u],["L",e[3].x,b+.002+u],["Z"]);else{var R=s[0]+s[1],Y=s.map(function(V){return V/R/.5});t.push(["M",e[0].x,b+(e[0].y-u)*p[0]+u-k],["L",e[1].x,b+u-k],["L",n[1].x,b+u-k],["L",n[0].x,b+(n[3].y-u)*Y[0]+u-k],["Z"]),t.push(["M",e[0].x,b+u+k],["L",e[1].x,b+(e[1].y-u)*p[1]+u+k],["L",n[1].x,b+(n[2].y-u)*Y[1]+u+k],["L",n[0].x,b+u+k],["Z"])}}else(0,y.isNil)(n)?t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):t.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",n[1].x,n[1].y],["L",n[0].x,n[0].y],["Z"]);return t}(0,Ro.registerShape)("interval","funnel-basic-rect",{getPoints:function(i){return i.size=i.size*1.8,Fb(i)},draw:function(i,r){var t,e=(0,og.getStyle)(i,!1,!0),n=(0,y.get)(i,"data.__compare__"),a=this.parsePath(Rb(i,n));return r.addShape("path",(t={name:"interval",attrs:(0,Q.__assign)((0,Q.__assign)({},e),{path:a})},t.__compare__=n,t))},getMarker:function(i){var r=i.color;return{symbol:"square",style:{r:4,fill:r}}}});function od(i,r,t){return(1-t)*i+t*r}function Nb(i,r){var t=r.reverse,e=r.ratioUpper,n=r.ratioLower,a=[],o=i[0],s=(i[1].x+i[2].x)/2,u=1.2,h=.6;if(t){var p=n;n=e,e=p}var b=(o.x-s)*od(h,u,n)+s;a.push(["M",b,o.y]);for(var k=1,R=i.length;k<R;k++){var Y=i[k].x;switch(k){case 1:case 2:Y=(Y-s)*od(h,u,e)+s;break;case 3:Y=(Y-s)*od(h,u,n)+s;break}a.push(["L",Y,i[k].y])}return a.push(["L",b,o.y]),a.push(["z"]),a}(0,Ro.registerShape)("interval","funnel-dynamic-rect",{draw:function(i,r){var t=(0,og.getStyle)(i,!1,!0),e=(0,y.get)(i,"data.__custom__"),n=this.parsePath(Nb(i.points,e));return r.addShape("path",{attrs:(0,Q.__assign)((0,Q.__assign)({},t),{path:n})})},getMarker:function(i){var r=i.color,t=i.isInPolar;return{symbol:t?"circle":"square",style:{r:t?4.5:4,fill:r}}}});function sg(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,u=t.reverse,h=i.getBBox(),p=u?h.maxX:h.minX,b=(h.minY+h.maxY)/2,k=i.setClip({type:"rect",attrs:{x:h.x,y:h.y,width:h.width,height:h.height}}),R={matrix:[1,0,0,0,1,0,0,0,1]};k.setMatrix(da.transform(k.getMatrix(),[["t",-p,-b],["s",0,1],["t",p,b]]));var Y={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),k.animate(R,{duration:200,easing:o,callback:function(){i.setClip(null),k.remove()},delay:a}),i.animate(Y,{duration:n,easing:o,delay:a}),s&&setTimeout(function(){return s(i)},n+a)}sg.animationName="funnelScaleInX",(0,Ro.registerAnimation)("funnelScaleInX",sg);function lg(i,r){var t=r||{},e=t.duration,n=e===void 0?200:e,a=t.delay,o=t.easing,s=t.callback,u=t.reverse,h=i.getBBox(),p=(h.minX+h.maxX)/2,b=u?h.maxY:h.minY,k=i.setClip({type:"rect",attrs:{x:h.x,y:h.y,width:h.width,height:h.height}}),R={matrix:[1,0,0,0,1,0,0,0,1]};k.setMatrix(da.transform(k.getMatrix(),[["t",-p,-b],["s",1,0],["t",p,b]]));var Y={fillOpacity:i.attr("fillOpacity"),strokeOpacity:i.attr("strokeOpacity"),opacity:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),k.animate(R,{duration:200,easing:o,callback:function(){i.setClip(null),k.remove()},delay:a}),i.animate(Y,{duration:n,easing:o,delay:a}),s&&setTimeout(function(){return s(i)},n+a)}lg.animationName="funnelScaleInY",(0,Ro.registerAnimation)("funnelScaleInY",lg);function zh(i,r,t){return(1-t)*i+t*r}var Yb={column:"interval"},Gb={interval:"funnel"},ug=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="funnel",e._shouldResetPercentages=!0,e._shouldResetLabels=!0,e._shouldResetCompareTexts=!0,e._legendsListenerAttached=!1,e._onLegendContainerMouseDown=function(n){var a=e.options,o=n.target.get("name");if(o.startsWith("legend-item")){var s=n.target.get("parent");if(s.set("unchecked",!s.get("unchecked")),e.refreshPercentages(),e.refreshLabels(),a.dynamicHeight){var u=e._findCheckedDataByMouseDownLegendItem(s);e._genCustomFieldForDynamicHeight(u)}if(a.compareField){var u=e._findCheckedDataByMouseDownLegendItem(s);e._updateDataForCompare(u),e.refreshCompareTexts()}}},e.adjustProps(e.options),t.dynamicHeight&&e._genCustomFieldForDynamicHeight(e.getData()),t.compareField&&(e.options.data=e._reduceDataForCompare(e.getData())),e}return r.getDefaultOptions=function(t){var e={label:{visible:!0,adjustColor:!0},percentage:{visible:!0,offsetX:t.transpose?0:40,offsetY:t.transpose?40:0,spacing:4,line:{visible:!0,style:{lineWidth:1,stroke:"rgba(0, 0, 0, 0.15)"}},text:{content:"\u8F6C\u5316\u7387",style:{fill:"rgba(0, 0, 0, 0.65)"}},value:{visible:!0,style:{fill:"black"},formatter:function(n,a){return(100*a/n).toFixed(2)+"%"}}},tooltip:{visible:!0,shared:!0,showTitle:!1,showCrosshairs:!1,showMarkers:!1},animation:(0,y.deepMix)({},q.pq,{appear:{duration:800}}),dynamicHeight:!1,compareText:{visible:!0,offsetX:-16,offsetY:-16,style:{fill:"black"}},legend:{position:"bottom-center"},interactions:[{type:"tooltip"},{type:"legend-filter"}]};return(0,y.deepMix)({},i.getDefaultOptions.call(this),e)},r.prototype.getColorScale=function(){var t=this.options.xField;if(t)return this.view.getScaleByField(t)},r.prototype.coord=function(){var t=this.options,e={type:"rect",actions:t.transpose?t.dynamicHeight?[["transpose"],["scale",1,-1]]:[["scale",1,-1]]:t.dynamicHeight?[]:[["transpose"],["scale",1,-1]]};this.setConfig("coordinate",e)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustFunnel=function(t){var e=this.options;t.shape=e.dynamicHeight?"funnel-dynamic-rect":"funnel-basic-rect",t.color={fields:[e.xField],values:e.color&&(Array.isArray(e.color)?e.color:[e.color])},(0,y.isFunction)(e.funnelStyle)?t.style={callback:e.funnelStyle}:t.style={cfg:e.funnelStyle},t.adjust=[{type:e.dynamicHeight?"stack":"symmetric"}]},r.prototype.tooltip=function(){var t=this.options;t.compareField&&(0,y.deepMix)(t.tooltip,{htmlContent:function(e,n){var a,o,s,u;a=q.sS.CONTAINER_CLASS,o=(0,wo.Z)('<div class="'+a+'"></div>'),(0,Ui.Z)(o,q.L0[a]);var h=o;if(e){a=q.sS.TITLE_CLASS,o=(0,wo.Z)('<div class="'+a+'"></div>'),(0,Ui.Z)(o,q.L0[a]),h.appendChild(o);var p=o;a=q.sS.MARKER_CLASS,o=(0,wo.Z)('<span class="'+a+'"></span>'),(0,Ui.Z)(o,q.L0[a]),(0,Ui.Z)(o,{width:"10px",height:"10px"}),p.appendChild(o),u=o,o=(0,wo.Z)("<span>"+e+"</span>"),p.appendChild(o)}if(n){a=q.sS.LIST_CLASS,o=(0,wo.Z)('<ul class="'+a+'"></ul>'),(0,Ui.Z)(o,q.L0[a]),h.appendChild(o);var b=o;n.reduce(function(k,R){s||(s=R.color);var Y=(0,y.get)(R,"point._origin.__compare__.compareValues"),V=(0,y.get)(R,"point._origin.__compare__.yValues");return V.forEach(function(Z,it){return k.push([Y[it],Z])}),k},[]).forEach(function(k,R){var Y=k[0],V=k[1];a=q.sS.LIST_ITEM_CLASS,o=(0,wo.Z)('<li class="'+a+'" data-index='+R+"></li>"),(0,Ui.Z)(o,q.L0[a]),b.appendChild(o);var Z=o;a=q.sS.NAME_CLASS,o=(0,wo.Z)('<span class="'+a+'">'+Y+"</span>"),(0,Ui.Z)(o,q.L0[a]),Z.appendChild(o),a=q.sS.VALUE_CLASS,o=(0,wo.Z)('<span class="'+a+'">'+V+"</span>"),(0,Ui.Z)(o,q.L0[a]),Z.appendChild(o)})}return s&&u&&(0,Ui.Z)(u,{backgroundColor:s}),h}}),i.prototype.tooltip.call(this)},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.dynamicHeight?"_":t.xField,t.yField],plot:this});this.adjustFunnel(e),this.funnel=e,this.setConfig("geometry",e),t.compareField||this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.options.tooltip;t.fields&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.fields=t.fields),t.formatter&&(this.funnel.tooltip||(this.funnel.tooltip={}),this.funnel.tooltip.callback=t.formatter,t.fields||(this.funnel.tooltip.fields=[this.options.xField,this.options.yField]))},r.prototype.animation=function(){var t=this;i.prototype.animation.call(this);var e=this.options;if(e.animation===!1)this.funnel.animate=!1;else{var n=this.getData(),a=(0,y.get)(e,"animation.appear.duration"),o=a/(n.length||1);this._animationAppearTimeoutHandler&&(clearTimeout(this._animationAppearTimeoutHandler),delete this._animationAppearTimeoutHandler),this._animationAppearTimeoutHandler=setTimeout(function(){t.fadeInPercentages(o),e.compareField&&t.fadeInCompareTexts(o),delete t._animationAppearTimeoutHandler},a),this.funnel.animate=(0,y.deepMix)({},e.animation,{appear:{animation:e.transpose?"funnelScaleInX":"funnelScaleInY",duration:o,delay:function(s){return(0,y.findIndex)(n,function(u){return(0,y.isEqual)(u,s)})*o},callback:function(s){t.fadeInLabels(s,.5*o)}},enter:{animation:"fade-in"}})}},r.prototype.afterRender=function(){var t=this.options;if(this.resetLabels(),this.resetPercentages(),t.compareField&&this.resetCompareTexts(),t.padding=="auto"){var e=this._findPercentageContainer();e&&this.paddingController.registerPadding(e,"inner",!0);var n=this._findCompareTextContainer();n&&this.paddingController.registerPadding(n,"inner",!0)}if(i.prototype.afterRender.call(this),t.animation===!1&&(this.fadeInLabels(),this.fadeInPercentages(),t.compareField&&this.fadeInCompareTexts()),!this._legendsListenerAttached){this._legendsListenerAttached=!0;var a=this.view.getController("legend").container;a.on("mousedown",this._onLegendContainerMouseDown)}},r.prototype.updateConfig=function(t){t=this.adjustProps(t),i.prototype.updateConfig.call(this,t),this._legendsListenerAttached=!1},r.prototype.changeData=function(t){var e=this.options;if(e.animation!==!1&&(this._shouldResetPercentages=!1,this._shouldResetLabels=!1),e.dynamicHeight){var n=this._findCheckedDataInNewData(t);this._genCustomFieldForDynamicHeight(n)}if(e.compareField){t=this._reduceDataForCompare(t);var n=this._findCheckedDataInNewData(t);this._updateDataForCompare(n)}i.prototype.changeData.call(this,t),this.refreshPercentages(),this.refreshLabels(),e.compareField&&this.fadeInCompareTexts()},r.prototype.geometryParser=function(t,e){return t==="g2"?Yb[e]:Gb[e]},r.prototype.adjustProps=function(t){return t.compareField&&(t.dynamicHeight=!1),t.dynamicHeight&&((0,y.set)(t,"meta."+t.yField+".nice",!1),(0,y.set)(t,"tooltip.shared",!1)),t},r.prototype.resetPercentages=function(){var t=this;if(!!this._shouldResetPercentages){var e=this.options,n=e.percentage||{},a=n.offsetX,o=n.offsetY,s=n.spacing,u=n.line,h=u===void 0?{}:u,p=n.text,b=p===void 0?{}:p,k=n.value,R=k===void 0?{}:k,Y=Date.now(),V=this._findPercentageContainer(!0);this._eachShape(function(Z,it,tt,_t){if(it>0){var It=Z.getBBox(),Ht=It.minX,le=It.maxX,xe=It.maxY,Ce=It.minY,me=e.transpose?Ht:le,Le=e.transpose&&e.compareField?xe:Ce,Ye=t._findPercentageMembersInContainerByIndex(V,it,!0),Be=Ye.line,or=Ye.text,cr=Ye.value,ar=[function(yr,mr,zr,Ur,Xr){zr&&(zr.attr((0,y.deepMix)({},h.style,{x1:yr,y1:mr,x2:e.transpose?yr+a:yr-a,y2:e.transpose?mr-o:mr+o,opacity:0})),zr.set("adjustTimestamp",Y));var Er=0,Zr=0,ln=function(){Ur&&(Ur.attr((0,y.deepMix)({},b.style,{x:e.transpose?yr+a:yr-a-s-Zr-s,y:e.transpose?mr-o-s:mr+o,opacity:0,text:b.content,textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),Ur.set("adjustTimestamp",Y),Er=Ur.getBBox().width)},Yr=function(){Xr&&(Xr.attr((0,y.deepMix)({},R.style,{x:e.transpose?yr+a+Er+s:yr-a-s,y:e.transpose?mr-o-s:mr+o,opacity:0,text:(0,y.isFunction)(R.formatter)?e.compareField?R.formatter((0,y.get)(_t,"__compare__.yValues.0"),(0,y.get)(tt,"__compare__.yValues.0")):R.formatter(_t[e.yField],tt[e.yField]):"",textAlign:e.transpose?"left":"right",textBaseline:e.transpose?"bottom":"middle"})),Xr.set("adjustTimestamp",Y),Zr=Xr.getBBox().width)};e.transpose?(ln(),Yr()):(Yr(),ln())},function(yr,mr,zr,Ur,Xr){zr&&(zr.attr((0,y.deepMix)({},h.style,{x1:yr,y1:mr,x2:yr+a,y2:e.transpose?e.compareField?mr+o:mr-o:mr+o,opacity:0})),zr.set("adjustTimestamp",Y));var Er=0;Ur&&(Ur.attr((0,y.deepMix)({},b.style,{x:e.transpose?yr+a:yr+a+s,y:e.transpose?e.compareField?mr+o+s:mr-o-s:mr+o,opacity:0,text:b.content,textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),Ur.set("adjustTimestamp",Y),Er=Ur.getBBox().width),Xr&&(Xr.attr((0,y.deepMix)({},R.style,{x:e.transpose?yr+a+Er+s:yr+a+s+Er+s,y:e.transpose?e.compareField?mr+o+s:mr-o-s:mr+o,opacity:0,text:(0,y.isFunction)(R.formatter)?e.compareField?R.formatter((0,y.get)(_t,"__compare__.yValues.1"),(0,y.get)(tt,"__compare__.yValues.1")):R.formatter(_t[e.yField],tt[e.yField]):"",textAlign:"left",textBaseline:e.transpose?e.compareField?"top":"bottom":"middle"})),Xr.set("adjustTimestamp",Y))}];if(e.compareField){var Cr=[Ht,Ce],wr=Cr[0],Mr=Cr[1];[[wr,Mr],[me,Le]].forEach(function(yr,mr){var zr=yr[0],Ur=yr[1];return ar[mr](zr,Ur,Be&&Be[mr],or&&or[mr],cr&&cr[mr])})}else ar[1](me,Le,Be,or,cr)}_t=tt,it++}),V.get("children").forEach(function(Z){Z.get("adjustTimestamp")!=Y&&(Z.attr({opacity:0}),V.set(Z.get("id"),null),setTimeout(function(){return Z.remove()},0))})}},r.prototype.fadeInPercentages=function(t,e){var n=this,a=this.options,o=this._findPercentageContainer(),s=function(u){var h={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity};n._eachShape(function(p,b){var k=n._findPercentageMembersInContainerByIndex(o,b),R={minX:Infinity,maxX:-Infinity,minY:Infinity,maxY:-Infinity},Y=function(Z){if(Z&&Z.get("type")=="text"){var it=Z.getBBox(),tt=it.minX,_t=it.maxX,It=it.minY,Ht=it.maxY;tt<R.minX&&(R.minX=tt),_t>R.maxX&&(R.maxX=_t),It<R.minY&&(R.minY=It),Ht>R.maxY&&(R.maxY=Ht)}};if((0,y.each)(k,function(Z){return(0,y.isArray)(Z)?Y(Z[u]):Y(Z)}),R.minX>h.maxX||R.maxX<h.minX||R.minY>h.maxY||R.maxY<h.minY){var V=function(Z){if(Z){var it={opacity:1};t?Z.animate(it,t):Z.attr(it)}};(0,y.each)(k,function(Z){return(0,y.isArray)(Z)?V(Z[u]):V(Z)}),(0,y.assign)(h,R)}})};a.compareField?[0,1].forEach(s):s(),t&&e&&setTimeout(e,t)},r.prototype.fadeOutPercentages=function(t,e){var n=this,a=this._findPercentageContainer();this._eachShape(function(o,s){var u=n._findPercentageMembersInContainerByIndex(a,s),h=function(p){if(p){var b={opacity:0};t?p.animate(b,t):p.attr(b)}};(0,y.each)(u,function(p){return(0,y.isArray)(p)?p.forEach(h):h(p)})}),t&&e&&setTimeout(e,t)},r.prototype.refreshPercentages=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetPercentages=!1,this.fadeOutPercentages(o,function(){e._shouldResetPercentages=!0,e.resetPercentages(),e.fadeInPercentages(s,t)})}},r.prototype._findPercentageContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("percentageContainer");return!n&&t&&(n=e.addGroup(),e.set("percentageContainer",n)),n},r.prototype._findPercentageMembersInContainerByIndex=function(t,e,n){n===void 0&&(n=!1);var a=this.options,o=a.percentage||{},s=o.visible,u=o.line,h=u===void 0?{}:u,p=o.text,b=p===void 0?{}:p,k=o.value,R=k===void 0?{}:k,Y={line:void 0,text:void 0,value:void 0};if(s===!1||!t)return Y;if(h.visible!==!1){var V=function(_t){var It="_percentage-line-"+e+"-"+_t,Ht=t.get(It);return!Ht&&n&&(Ht=t.addShape({id:It,type:"line",attrs:{}}),t.set(It,Ht)),Ht},Z=a.compareField?[0,1].map(V):V(0);Y.line=Z}if(b.visible!==!1){var V=function(It){var Ht="_percentage-text-"+e+"-"+It,le=t.get(Ht);return!le&&n&&(le=t.addShape({id:Ht,type:"text",attrs:{}}),t.set(Ht,le)),le},it=a.compareField?[0,1].map(V):V(0);Y.text=it}if(R.visible!==!1){var V=function(It){var Ht="_percentage-value-"+e+"-"+It,le=t.get(Ht);return!le&&n&&(le=t.addShape({id:Ht,type:"text",attrs:{}}),t.set(Ht,le)),le},tt=a.compareField?[0,1].map(V):V(0);Y.value=tt}return Y},r.prototype._calcRefreshFadeDurations=function(){var t=this.options,e=(0,y.get)(t,"animation.update.duration"),n=(0,y.get)(t,"animation.enter.duration"),a=Math.min(n,e)*.6,o=Math.max(n,e)*1.2;return{fadeInDuration:a,fadeOutDuration:o}},r.prototype.resetLabels=function(){var t=this;if(!!this._shouldResetLabels){var e=this.options,n=e.xField,a=e.yField,o=Date.now(),s=this._getGeometry().labelsContainer,u=e.label||{},h=(0,y.deepMix)((0,Q.__assign)({},this.theme.label),e.label.style,{opacity:0,textAlign:"center",textBaseline:"middle"}),p;this._eachShape(function(b,k,R,Y){var V,Z=b.get("element");k==0&&(p=R);var it=b.getBBox(),tt=it.minX,_t=it.maxX,It=it.minY,Ht=it.maxY,le=R[n],xe=R[a];u.adjustColor&&(h.fill=t._getAdjustedTextFillByShape(b));var Ce=R.__compare__,me,Le=(V={},V[q.YI]=R,V.element=Z,V.elementIndex=Y,V.mappingDatum=[].concat(Z.getModel().mappingData)[0],V.mappingDatumIndex=0,V);u.formatter?me=u.formatter(le,Le,k,xe,p[a]):Ce?me=[0,1].map(function(){return""+xe}).join(e.transpose?`

`:"    "):me=le+" "+xe;var Ye=t._findLabelInContainerByIndex(s,k,!0),Be=Ce?Ce.yValues[0]/(Ce.yValues[0]+Ce.yValues[1]):.5;Ye&&(Ye.attr((0,Q.__assign)((0,Q.__assign)({},h),{x:zh(tt,_t,e.transpose?.5:Be),y:zh(It,Ht,e.transpose?Be:.5),text:me})),Ye.set("adjustTimestamp",o))}),s.get("children").forEach(function(b){b.get("adjustTimestamp")!=o&&(b.attr({opacity:0}),s.set(b.get("id"),null),setTimeout(function(){return b.remove()}))})}},r.prototype.fadeInLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,u){if(!t||t==s){var h=a._findLabelInContainerByIndex(o,u);if(h){var p=s.getBBox(),b=h.getBBox();if(b.minX>=p.minX&&b.maxX<=p.maxX&&b.minY>=p.minY&&b.maxY<=p.maxY){var k={opacity:1};e?h.animate(k,e):h.attr(k)}}}}),e&&n&&setTimeout(n,e)},r.prototype.fadeOutLabels=function(t,e,n){var a=this,o=this._getGeometry().labelsContainer;this._eachShape(function(s,u){if(!t||t==s){var h=a._findLabelInContainerByIndex(o,u);if(h){var p={opacity:0};e?h.animate(p,e):h.attr(p)}}}),e&&n&&setTimeout(n,e)},r.prototype.refreshLabels=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeOutDuration,s=a.fadeInDuration;this._shouldResetLabels=!1,this.fadeOutLabels(null,o,function(){e._shouldResetLabels=!0,e.resetLabels(),e.fadeInLabels(null,s,t)})}},r.prototype._findLabelInContainerByIndex=function(t,e,n){var a;n===void 0&&(n=!1);var o=this.options,s;if(((a=o.label)===null||a===void 0?void 0:a.visible)===!1)return s;var u="_label-"+e;return s=t.get(u),!s&&n&&(s=t.addShape({id:u,type:"text",attrs:{}}),t.set(u,s)),s},r.prototype.resetCompareTexts=function(){if(!!this._shouldResetCompareTexts){var t=this.options,e,n;if(this._eachShape(function(R,Y,V){Y==0&&(e=R.get("parent").getBBox(),n=(0,y.get)(V,"__compare__"))}),e&&n&&(0,y.get)(t,"compareText.visible")!==!1){var a=this._findCompareTextContainer(!0),o=n.yValuesMax,s=n.compareValues,u=e.minX,h=e.maxX,p=e.minY,b=e.maxY,k=a.get("children");[0,1].forEach(function(R){var Y=k[R];Y||(Y=a.addShape({type:"text"})),Y.attr((0,y.deepMix)({},(0,y.get)(t,"compareText.style"),{text:t.transpose?s[R]:R?"  "+s[R]:s[R]+"  ",x:t.transpose?u+(0,y.get)(t,"compareText.offsetX"):zh(u,h,o[0]/(o[0]+o[1])),y:t.transpose?zh(p,b,o[0]/(o[0]+o[1]))+(R?8:-8):p+(0,y.get)(t,"compareText.offsetY"),opacity:0,textAlign:t.transpose?"right":R?"left":"right",textBaseline:t.transpose&&R?"top":"bottom"}))})}}},r.prototype.fadeInCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var u={opacity:1};t?s.animate(u,t):s.attr(u)}})}t&&e&&setTimeout(e,t)},r.prototype.fadeOutCompareTexts=function(t,e){var n=this._findCompareTextContainer();if(n){var a=n.get("children");[0,1].forEach(function(o){var s=a[o];if(s){var u={opacity:0};t?s.animate(u,t):s.attr(u)}})}t&&e&&setTimeout(e,t)},r.prototype.refreshCompareTexts=function(t){var e=this,n=this.options;if(n.animation!==!1){var a=this._calcRefreshFadeDurations(),o=a.fadeInDuration,s=a.fadeOutDuration;this._shouldResetCompareTexts=!1,this.fadeOutCompareTexts(s,function(){e._shouldResetCompareTexts=!0,e.resetCompareTexts(),e.fadeInCompareTexts(o,t)})}},r.prototype._findCompareTextContainer=function(t){t===void 0&&(t=!1);var e=this.view.middleGroup,n=e.get("compareTextContainer");return!n&&t&&(n=e.addGroup(),e.set("compareTextContainer",n)),n},r.prototype._eachShape=function(t){var e,n=this._findCheckedData(this.getData()),a=n.length,o=0,s;(e=this._getGeometry())===null||e===void 0||e.elements.forEach(function(u,h){var p=u.shape,b=n[o];o<a&&t(p,o,b,s,h),s=b,o++})},r.prototype._getGeometry=function(){return this.view.geometries[0]},r.prototype._getAdjustedTextFillByShape=function(t){var e=t.attr("fill"),n=t.attr("opacity")?t.attr("opacity"):1,a=Da(e),o=Math.round(a[0]*.299+a[1]*.587+a[2]*.114)/n,s=[{from:0,to:85,color:"white"},{from:85,to:170,color:"#F6F6F6"},{from:170,to:255,color:"black"}],u=Ms(s,o);return u},r.prototype._genCustomFieldForDynamicHeight=function(t){var e=this.options,n=t.reduce(function(o,s){return o+s[e.yField]},0),a=1;t.forEach(function(o,s){var u=o[e.yField],h=u/n,p=a-h;o.__custom__={datumIndex:s,dataLength:t.length,ratioUpper:a,ratioLower:p,reverse:e.transpose},a=p})},r.prototype._findCheckedDataByMouseDownLegendItem=function(t){var e=t.get("parent").get("children").map(function(a){return!a.get("unchecked")}),n=this.getData().filter(function(a,o){return e[o]});return n},r.prototype._findCheckedDataInNewData=function(t){var e=this.options,n=this.view.getController("legend").container,a=n.findAll(function(s){return s.get("name")=="legend-item"}).filter(function(s){return s.get("unchecked")}).map(function(s){return s.get("id").replace("-legend-item-","")}),o=t.filter(function(s){return!(0,y.contains)(a,s[e.xField])});return o},r.prototype._findCheckedData=function(t){var e,n=this.options;if((e=n.legend)===null||e===void 0?void 0:e.visible){var a=this.view.getController("legend").container,o=a.findAll(function(u){return u.get("name")=="legend-item"}).filter(function(u){return!u.get("unchecked")}).map(function(u){return u.get("id").replace("-legend-item-","")}),s=t.filter(function(u){return(0,y.contains)(o,u[n.xField])});return s}else return this.processData(n.data)},r.prototype._reduceDataForCompare=function(t){var e=this.options,n,a=[-Infinity,-Infinity];return t=t.reduce(function(o,s){var u,h=s[e.xField],p=s[e.yField],b=s[e.compareField];n||(n=b);var k=o.find(function(Y){return Y[e.xField]==h});k||(k=(u={},u[e.xField]=h,u[e.yField]=0,u.__compare__={compareValues:[],yValues:[],yValuesMax:[],yValuesNext:void 0,transpose:e.transpose},u),o.push(k));var R=b==n?0:1;return k.__compare__.yValues[R]=p,a[R]<p&&(a[R]=p),k.__compare__.compareValues[R]=b,o},[]),t.forEach(function(o,s){o[e.yField]=(0,y.get)(o,"__compare__.yValues",[]).reduce(function(u,h){return u+=h},0),(0,y.set)(o,"__compare__.yValuesMax",a),(0,y.set)(o,"__compare__.yValuesNext",(0,y.get)(t,s+1+".__compare__.yValues"))}),t},r.prototype._updateDataForCompare=function(t){var e=[-Infinity,-Infinity];t.forEach(function(n){var a=(0,y.get)(n,"__compare__.yValues");[0,1].forEach(function(o){a[o]>e[o]&&(e[o]=a[o])})}),t.forEach(function(n,a){(0,y.set)(n,"__compare__.yValuesMax",e),(0,y.set)(n,"__compare__.yValuesNext",(0,y.get)(t,a+1+".__compare__.yValues"))})},r}(qn),zb=ug;An("funnel",ug);var Xb=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="funnel",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=zb.getDefaultOptions,r}(un),Hb=Xb,hg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="stackedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.stackField;return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"stack"}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.stackField]))},r}(ad),Vb=hg;An("stackedRose",hg);var Wb=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedRose",i.prototype.createLayers.call(this,e)},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Vb.getDefaultOptions,r}(un),fg=Wb,cg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedRose",t.baseType="rose",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,alignTick:!1,style:{lineWidth:.5}},label:{offset:5,autoRotate:!0}},yAxis:{visible:!1}})},r.prototype.getColorScale=function(){var t=this.options.groupField;if(t)return this.view.getScaleByField(t)},r.prototype.adjustRoseAdjust=function(){return[{type:"dodge",marginRatio:1}]},r.prototype.geometryTooltip=function(){this.rose.tooltip={};var t=this.options.tooltip;t.fields&&(this.rose.tooltip.fields=t.fields),t.formatter&&(this.rose.tooltip.callback=t.formatter,t.fields||(this.rose.tooltip.fields=[this.options.radiusField,this.options.categoryField,this.options.groupField]))},r}(ad),jb=cg;An("groupedRose",cg);var Ub=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedRose",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=jb.getDefaultOptions,r}(un),vg=Ub,Zb={area:"area",line:"line",point:"point"},Kb=Tt(Zb);(0,y.assign)(pt,Kb);var $b=function(i){var r=i.opacity||1;return{opacity:r}},Qb=function(i){var r=i.opacity||1;return{opacity:r*.5}},Jb=function(i){var r=i.opacity||1;return{opacity:r}},qb=function(i){var r=i.opacity||1;return{opacity:r*.5}},tw=function(i){var r=i.lineWidth||1;return{lineWidth:r+2}},ew=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+1,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:1}},rw=function(i){var r=i.fill||i.fillStyle,t=i.size||i.radius;return{radius:t+2,shadowBlur:t,shadowColor:r,stroke:r,strokeOpacity:1,lineWidth:2}},nw=function(i){var r=i.opacity||i.fillOpacity||1;return{opacity:r*.5}};Xi("radar",{areaStyle:{normal:{},active:$b,disable:Qb,selected:{lineWidth:1,stroke:"#333333"}},lineStyle:{normal:{},active:Jb,disable:qb,selected:tw},pointStyle:{normal:{},active:ew,disable:nw,selected:rw}});var iw={area:"area",line:"line",point:"point"},dg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="radar",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{width:400,height:400,title:{visible:!1},description:{visible:!1},forceFit:!0,padding:"auto",radius:.8,smooth:!1,line:{visible:!0,size:2,style:{opacity:1}},area:{visible:!0,style:{opacity:.25}},point:{visible:!1,size:4,shape:"point",style:{opacity:1}},angleAxis:{visible:!0,autoRotateTitle:!0,line:{visible:!1},tickLine:{visible:!1},grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,offset:16,autoRotate:!0,autoHide:!0},title:{visible:!1}},radiusAxis:{min:0,visible:!0,nice:!0,autoRotateTitle:!0,line:{visible:!0},tickLine:{visible:!0},gridType:"line",grid:{visible:!0,line:{style:{lineDash:[0,0]}}},label:{visible:!0,autoHide:!0,autoRotate:!0},title:{visible:!1}},label:{visible:!1,type:"point"},legend:{visible:!0,position:"left-top"},tooltip:{visible:!0,shared:!0,showCrosshairs:!1}})},r.prototype.init=function(){var t=this.options;t.xField=t.angleField,t.yField=t.radiusField,i.prototype.init.call(this)},r.prototype.getAngleScale=function(){var t=this.options.angleField;return this.view.getScaleByField(t)},r.prototype.getRadiusScale=function(){var t=this.options.radiusField;return this.view.getScaleByField(t)},r.prototype.getColorScale=function(){var t=this.options.seriesField;return this.view.getScaleByField(t)},r.prototype.geometryParser=function(t,e){return iw[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.angleField]={},(0,y.has)(t,"angleAxis")&&_i(e[t.angleField],t.angleAxis),e[t.radiusField]={},(0,y.has)(t,"radiusAxis")&&_i(e[t.radiusField],t.radiusAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){var t=this.options,e={type:"polar",cfg:{radius:t.radius}};this.setConfig("coordinate",e)},r.prototype.axis=function(){var t=this.options,e=Ln("axis",{plot:this,dim:"angle"}),n=Ln("axis",{plot:this,dim:"radius"}),a={};a[t.angleField]=e,a[t.radiusField]=n,this.setConfig("axes",a)},r.prototype.addGeometry=function(){var t=this.options;if(t.area.visible){var e=Ci("area","main",{plot:this});this.setConfig("geometry",e),this.area=e}if(t.line&&t.line.visible){var n=Ci("line","main",{plot:this});this.setConfig("geometry",n),this.line=n}if(t.point&&t.point.visible){var a=Ci("point","guide",{plot:this});this.setConfig("geometry",a),this.point=a}t.label&&this.label(),t.tooltip&&(t.tooltip.fields||t.tooltip.formatter)&&this.geometryTooltip()},r.prototype.geometryTooltip=function(){var t=this.line?this.line:this.area;t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[this.options.angleField,this.options.radiusField]),this.options.seriesField&&t.tooltip.fields.push(this.options.seriesField))},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.point&&(this.point.label=!1),this.line&&(this.line.label=!1),this.area&&(this.area.label=!1);return}var e=Ln("label",(0,Q.__assign)({fields:[t.radiusField],cfg:{type:"polar",autoRotate:!1},plot:this},t.label));this.point?this.point.label=e:this.line?this.line.label=e:this.area&&(this.area.label=e)},r.prototype.annotation=function(){},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.area&&(this.area.animate=!1),this.line&&(this.line.animate=!1),this.point&&(this.point.animate=!1))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,x)},r}(qn),aw=dg;An("radar",dg);var ow=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="radar",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.prototype.getRadiusScale=function(){var t=this.layers[0];return t.getRadiusScale()},r.prototype.getColorScale=function(){var t=this.layers[0];return t.getColorScale()},r.getDefaultOptions=aw.getDefaultOptions,r}(un),pg=ow,sw=v(66362),lw=v(33506),uw=function(){function i(r){var t=this.getDefaultOptions();this.options=(0,y.deepMix)(t,r,{}),this.x=this.options.x,this.y=this.options.y,this.html=this.options.html,this.container=this.options.container}return i.prototype.render=function(){if((0,y.isElement)(this.container)){this.wrapperNode=(0,wo.Z)('<div class="g2plot-htmlStatistic"></div>'),this.container.appendChild(this.wrapperNode),(0,Ui.Z)(this.wrapperNode,{position:"absolute",pointerEvents:"none"});var r=this.html;this.wrapperNode.appendChild(r),this.setDomPosition(this.x,this.y)}},i.prototype.updateHtml=function(r){(0,y.isType)(r,"HTMLDivElement")?(this.wrapperNode.innerHTML="",this.wrapperNode.appendChild(r)):this.wrapperNode.innerHTML=r,this.setDomPosition(this.x,this.y)},i.prototype.updatePosition=function(r,t){this.x=r,this.y=t,this.setDomPosition(r,t)},i.prototype.destroy=function(){this.container.removeChild(this.wrapperNode)},i.prototype.getDefaultOptions=function(){return{x:0,y:0,width:0,height:0,html:"",container:null,alignX:"middle",alignY:"middle"}},i.prototype.setDomPosition=function(r,t){var e=r,n=t,a=(0,sw.Z)(this.wrapperNode),o=(0,lw.Z)(this.wrapperNode);this.options.alignX==="middle"&&(e=r-a/2),this.options.alignY==="middle"&&(n=t-o/2),(0,Ui.Z)(this.wrapperNode,{top:Math.round(n)+"px",left:Math.round(e)+"px",transform:a>0?"none":"translate(-50%, -50%)"})},i}(),gg=uw,hw="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",fw="font-size:32px;font-weight:bold;color:#4D4D4D";function cw(i,r){var t='<span class="liquid-guide-value" style='+fw+">"+i+"</span>";return'<div class="liquid-guide-html '+r+'" style='+hw+">"+t+"</div>"}var vw=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.getTotalHtmlString=function(){var t=document.createElement("div"),e=this.plot.options,n=e.value,a=n===void 0?0:n,o=e.statistic;if(o&&!o.visible)return t;var s=this.options.htmlContent(a);return(0,y.isType)(s,"HTMLDivElement")?t.appendChild(s):t.innerHTML=cw(s,this.statisticClass),t},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r}(gg),dw=vw,pw={liquid:"intervl",statistic:"annotation-text"},gw=Tt(pw);(0,y.assign)(pt,gw);var yg=Di(),mg={splitPoints:function(i){var r=[],t=i.x,e=i.y;return e=(0,y.isArray)(e)?e:[e],(0,y.each)(e,function(n,a){var o={x:(0,y.isArray)(t)?t[a]:t,y:n};r.push(o)}),r},addFillAttrs:function(i,r){r.color&&!i.fill&&(i.fill=r.color),(0,y.isNumber)(r.opacity)&&(i.opacity=i.fillOpacity=r.opacity)},addStrokeAttrs:function(i,r){r.color&&!i.stroke&&(i.stroke=r.color),(0,y.isNumber)(r.opacity)&&(i.opacity=i.strokeOpacity=r.opacity)}},sd={lerp:function(i,r,t){return(1-t)*i+t*r}},yw=function(i){var r={lineWidth:0,fill:yg.color,fillOpacity:.85},t=(0,y.mix)({},r,i.style);return mg.addFillAttrs(t,i),i.color&&!t.stroke&&(t.stroke=t.stroke||i.color),t},mw=function(i){var r={fill:"#fff",stroke:yg.color,fillOpacity:0,lineWidth:2},t=(0,y.mix)({},r,i.style);return mg.addStrokeAttrs(t,i),t};function xw(i,r,t,e){return r===0?[[i+1/2*t/Math.PI/2,e/2],[i+1/2*t/Math.PI,e],[i+t/4,e]]:r===1?[[i+1/2*t/Math.PI/2*(Math.PI-2),e],[i+1/2*t/Math.PI/2*(Math.PI-1),e/2],[i+t/4,0]]:r===2?[[i+1/2*t/Math.PI/2,-e/2],[i+1/2*t/Math.PI,-e],[i+t/4,-e]]:[[i+1/2*t/Math.PI/2*(Math.PI-2),-e],[i+1/2*t/Math.PI/2*(Math.PI-1),-e/2],[i+t/4,0]]}function bw(i,r,t,e,n,a,o){for(var s=Math.ceil(2*i/t*4)*2,u=[],h=e;h<-Math.PI*2;)h+=Math.PI*2;for(;h>0;)h-=Math.PI*2;h=h/Math.PI/2*t;var p=a-i+h-i*2;u.push(["M",p,r]);for(var b=0,k=0;k<s;++k){var R=k%4,Y=xw(k*t/4,R,t,n);u.push(["C",Y[0][0]+p,-Y[0][1]+r,Y[1][0]+p,-Y[1][1]+r,Y[2][0]+p,-Y[2][1]+r]),k===s-1&&(b=Y[2][0])}return u.push(["L",b+p,o+i]),u.push(["L",p,o+i]),u.push(["L",p,r]),u}function ww(i,r,t,e,n,a,o,s){for(var u=o.getBBox(),h=u.maxX-u.minX,p=u.maxY-u.minY,b=5e3,k=0;k<e;k++){var R=e<=1?0:k/(e-1),Y=a.addShape("path",{attrs:{path:bw(s,u.minY+p*t,h/4,0,h/sd.lerp(56,64,R),i,r),fill:n,opacity:sd.lerp(.6,.3,R)}}),V=zi([["t",h/2,0]]);Y.animate({matrix:V},{duration:sd.lerp(b,.7*b,R),repeat:!0})}}(0,q.Fj)("interval","liquid-fill-gauge",{draw:function(i,r){var t=.5,e=Infinity;(0,y.each)(i.points,function(k){k.x<e&&(e=k.x)});var n=.5,a=this.parsePoint({x:n,y:t}),o=this.parsePoint({x:e,y:.5}),s=a.x-o.x,u=Math.min(s,o.y),h=yw(i).fill,p=r.addGroup({name:"waves",attrs:{x:a.x,y:a.y}});p.setClip({type:"circle",attrs:{x:a.x,y:a.y,r:u}});var b=p.get("clipShape");return ww(a.x,a.y,1-i.points[1].y,3,h,p,b,u*4),r.addShape("circle",{name:"wrap",attrs:(0,y.mix)(mw(i),{x:a.x,y:a.y,r:u,fill:"transparent"})}),p[0]}});function xg(i,r){var t=i.get("parent"),e=t.getBBox(),n=Math.min(Math.max(0,(0,y.get)(r,"factor",.5)),1),a=(0,y.get)(r,"delay",0),o=(0,y.get)(r,"duration",800),s=r.callback,u=(e.minX+e.maxX)/2,h=e.maxY,p=t.find(function(V){return V.get("name")=="wrap"}),b=p.attr("opacity");p.attr("opacity",0),p.animate({opacity:b},o*n,"easeLinear",null,a);var k=t.find(function(V){return V.get("name")=="waves"}),R=(0,y.clone)(k.attr("matrix"))||[1,0,0,0,1,0,0,0,1],Y=zi(R,[["t",-u,-h],["s",1,0],["t",u,h]]);k.setMatrix(Y),k.animate({matrix:R},o,r.easing,function(){return s&&s(t,p,k)},a)}xg.animationName="liquidMoveIn",(0,q.ph)("liquidMoveIn",xg);var Sw={column:"interval"},Cw={interval:"liquid"},bg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="liquid",t.shouldFadeInAnnotation=!0,t}return r.getDefaultOptions=function(){var t={padding:[0,0,0,0],animation:{factor:.4,easing:"easeExpOut",duration:800},liquidStyle:{lineWidth:2},color:"#6a99f9",interactions:[],statistic:{visible:!0}};return(0,y.deepMix)({},i.getDefaultOptions.call(this),t)},r.prototype.beforeInit=function(){var t=this.options,e=t.min,n=t.max,a=t.value;if(!(0,y.isNumber)(e))throw new Error("The min value of Liquid is required, and the type of min must be Number.");if(!(0,y.isNumber)(n))throw new Error("The max value of Liquid is required, and the type of max must be Number.");if(!(0,y.isNumber)(a))throw new Error("The value of Liquid is required, and the type of value must be Number.")},r.prototype.init=function(){this.options.data=[{}],i.prototype.init.call(this)},r.prototype.coord=function(){},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a={value:{}};_i(a.value,{min:Math.min(e,n),max:Math.max(e,n)}),this.setConfig("scales",a),i.prototype.scale.call(this)},r.prototype.axis=function(){this.setConfig("axes",!1)},r.prototype.adjustLiquid=function(t){var e=this.options;t.shape={values:["liquid-fill-gauge"]},t.tooltip=!1;var n=e.liquidStyle;(0,y.isFunction)(n)&&(n=n()),n&&(t.style=n)},r.prototype.addGeometry=function(){var t=Ci("interval","main",{positionFields:[1,"value"],plot:this});this.adjustLiquid(t);var e=this.getViewRange(),n=Math.min(e.width,e.height)*.8,a=this.options.liquidSize?this.options.liquidSize:n;t.size={values:[a]},this.liquid=t,this.setConfig("geometry",t)},r.prototype.animation=function(){var t=this.options;if(t.animation===!1)this.liquid.animate=!1;else{var e=(0,y.get)(t,"animation.factor"),n=(0,y.get)(t,"animation.easing"),a=(0,y.get)(t,"animation.duration");this.liquid.animate={appear:{animation:"liquidMoveIn",factor:e,easing:n,duration:a}}}},r.prototype.geometryParser=function(t,e){return t==="g2"?Sw[e]:Cw[e]},r.prototype.annotation=function(){var t=[],e=this.extractStatistic();t.push(e),this.setConfig("annotations",t)},r.prototype.useHtmlContent=function(){var t=this.options,e=t.statistic||{};return(0,y.isFunction)(e.htmlContent)},r.prototype.extractStatistic=function(){if(!this.useHtmlContent()){var t=this.options,e=t.statistic||{},n;(0,y.isFunction)(e.formatter)?n=e.formatter(t.value):n=""+t.value;var a,o;if(n){var s=Math.min(this.width,this.height);a=s/n.length*.5,o=Math.max(1,Math.ceil(.025*a))}var u;if(e.visible!==!1){var h=(0,y.deepMix)({style:{fontSize:a,shadowBlur:o}},{top:!0,content:n,type:"text",position:["50%","50%"],style:{opacity:u,fill:"transparent",shadowColor:"transparent",textAlign:"center"}},e);return delete h.visible,delete h.formatter,delete h.adjustColor,h}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,C)},r.prototype.afterRender=function(){var t;((t=this.options.statistic)===null||t===void 0?void 0:t.visible)&&!this.useHtmlContent()&&this.fadeInAnnotation();var e=this.options,n=e.padding?e.padding:this.config.theme.padding;if(e.defaultState&&n!=="auto"&&this.stateController.defaultStates(e.defaultState),n==="auto"&&this.paddingController.processAutoPadding(),this.useHtmlContent()){var a=this.canvas.get("container");if(this.statistic&&a.removeChild(this.statistic.wrapperNode),this.options.statistic&&this.options.statistic.visible){var o=this.canvas.get("container");(0,Ui.Z)(o,{position:"relative"}),this.statistic=new dw((0,Q.__assign)({container:o,view:this.view,plot:this},this.options.statistic)),this.statistic.render()}i.prototype.afterRender.call(this)}},r.prototype.processData=function(){var t=this.options;return[{_:"_",value:t.value}]},r.prototype.changeValue=function(t){var e=this.options;e.value=t,this.changeData([])},r.prototype.fadeInAnnotation=function(){var t=this,e=this.options,n=this.view.foregroundGroup.findAll(function(s){return s.get("name")==="annotation-text"})[0],a=e.animation||{},o=this.calcAnnotationColorStyle();this.shouldFadeInAnnotation?n.animate(o,a.duration*Math.min(1,1.5*a.factor),null,function(){t.shouldFadeInAnnotation=!1}):(0,y.forIn)(o,function(s,u){return n.attr(u,s)})},r.prototype.calcAnnotationColorStyle=function(){var t=this.options,e={fill:"#f6f6f6",shadowColor:"black"},n={fill:"#303030",shadowColor:"white"};if((0,y.get)(t,"statistic.adjustColor")===!1)return{fill:(0,y.get)(t,"statistic.style.fill",n.fill),shadowColor:(0,y.get)(t,"statistic.style.shadowColor",n.shadowColor)};var a=t.min,o=t.max,s=t.value;a=Math.min(a,o),o=Math.max(a,o);var u;if(a==o?u=1:u=(s-a)/(o-a),u>.55){var h=this.options.color,p=.8,b=Da(h),k=Math.round(b[0]*.299+b[1]*.587+b[2]*.114)/p;return k<156?e:n}return n},r.prototype.updateConfig=function(t){i.prototype.updateConfig.call(this,t),this.shouldFadeInAnnotation=!0},r.prototype.getViewRange=function(){var t=i.prototype.getViewRange.call(this),e=this.options.liquidStyle,n=e.lineWidth?e.lineWidth:2,a=t.minX,o=t.minY,s=t.width,u=t.height,h=Math.min(s,u)-n*2,p=a+s/2,b=o+u/2,k=p-h/2,R=b-h/2;return new at(k,R,h,h)},r}(qn),ld=bg;An("liquid",bg);var Mw=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="liquid",i.prototype.createLayers.call(this,e)},r.prototype.changeValue=function(t,e){if(e===void 0&&(e=!1),e)this.eachLayer(function(a){a instanceof ld&&a.changeValue(t)});else{var n=this.layers[0];n instanceof ld&&n.changeValue(t)}},r.getDefaultOptions=ld.getDefaultOptions,r}(un),wg=Mw,Sg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="histogram",t}return r.prototype.init=function(){this.options.xField="range",this.options.yField="count",i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,s=n.binNumber,u=(0,y.clone)(t);(0,y.sortBy)(u,a);var h=(0,y.valuesOfKey)(u,a),p=(0,y.getRange)(h),b=p.max-p.min,k=o;if(!o&&s&&(k=b/s),!o&&!s){var R=Hr(h);k=b/R}var Y={};(0,y.each)(u,function(Z){var it=Z[a],tt=e.getBin(it,k),_t=tt[0]+"-"+tt[1];(0,y.hasKey)(Y,_t)||(Y[_t]={name:_t,range:tt,count:0,data:[]}),Y[_t].data.push(Z),Y[_t].count+=1});var V=[];return(0,y.each)(Y,function(Z){V.push(Z)}),V},r.prototype.scale=function(){i.prototype.scale.call(this);var t=this.config.scales.range;t.nice=!1,t.type="linear"},r.prototype.getBin=function(t,e){var n=Math.floor(t/e);return[e*n,e*(n+1)]},r}(Ts),Ew=Sg;An("histogram",Sg);var Aw=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="histogram",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Ew.getDefaultOptions,r}(un),Cg=Aw,Tw={epanechnikov:function(i){return Math.abs(i)<=1?.75*(1-i*i):0},gaussian:function(i){return 1/Math.sqrt(Math.PI*2)*Math.exp(-.5*Math.pow(i,2))},uniform:function(i){return Math.abs(i)<=1?.5:0},triangle:function(i){return Math.abs(i)<=1?1-Math.abs(i):0},quartic:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*r*r:0},triweight:function(i){var r=1-i*i;return Math.abs(i)<=1?15/16*Math.pow(r,3):0},cosinus:function(i){var r=Math.PI/4*Math.cos(.5*Math.PI*i);return Math.abs(i)<=1?r:0}},Mg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="density",t}return r.prototype.init=function(){var t=this.options.xAxis?(0,y.clone)(this.options.xAxis):{};this.options.xField="value",this.options.yField="density",this.options.xAxis=(0,y.deepMix)({},t,{type:"linear"}),this.options.smooth=!0,i.prototype.init.call(this)},r.prototype.processData=function(t){var e=this,n=this.options,a=n.binField,o=n.binWidth,s=n.binNumber,u=n.kernel,h=u||"epanechnikov",p=Tw[h],b=(0,y.clone)(t);(0,y.sortBy)(b,a);var k=(0,y.valuesOfKey)(b,a),R=(0,y.getRange)(k),Y=R.max-R.min,V=s,Z=o;!s&&o&&(V=Math.floor(Y/o)),!o&&s&&(Z=Y/s),!s&&!o&&(V=Hr(k),Z=Y/s);var it=(0,Fe.getScale)("linear"),tt=new it({min:R.min,max:R.max,tickCount:V,nice:!1}),_t=tt.getTicks(),It=[];return(0,y.each)(_t,function(Ht){var le=e.kernelDensityEstimator(Z,p,Ht,k);It.push({value:Ht.text,density:le})}),It},r.prototype.kernelDensityEstimator=function(t,e,n,a){var o=0;return(0,y.each)(a,function(s){var u=(n.tickValue-s)/t;o+=e(u)}),a.length===0?0:o/a.length},r}(l),Pw=Mg;An("density",Mg);var FO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="density",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Pw.getDefaultOptions,r}(un),RO=null,Lw={ring:"interval"},_w=Tt(Lw);(0,y.assign)(pt,_w);var Iw="color:#4d4d4d;font-size:14px;text-align:center;line-height:2;font-family:'-apple-system',BlinkMacSystemFont,'SegoeUI',Roboto,'HelveticaNeue',Helvetica,'PingFangSC','HiraginoSansGB','MicrosoftYaHei',SimSun,'sans-serif';pointer-events:none;",Ow="font-weight:300;white-space: nowrap;text-overflow: ellipsis;",kw="font-size:32px;font-weight:bold;color:#4D4D4D";function Bw(i,r,t,e){var n=Iw+"width:"+e+"px;",a=i?'<span class="ring-guide-name" style='+Ow+">"+i+"</span><br/>":"",o='<span class="ring-guide-value" style='+kw+">"+r+"</span>";return'<div class="ring-guide-html '+t+'" style='+n+">"+a+o+"</div>"}var Dw=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.view=t.view,e.plot=t.plot,e.statisticClass=t.statisticClass,e.adjustOptions(),e}return r.prototype.triggerOn=function(){var t=this,e=this.options.triggerOn;this.view.on("interval:"+e,(0,y.debounce)(function(a){var o=t.parseStatisticData("item",a.data.data,a.data.color),s=t.getStatisticHtmlString(o);t.updateHtml(s)},150));var n=this.options.triggerOff?this.options.triggerOff:"mouseleave";this.view.on("interval:"+n,(0,y.debounce)(function(){var a=t.getTotalHtmlString();t.updateHtml(a)},150))},r.prototype.getTotalHtmlString=function(){var t;if(this.options.content)t=this.options.content;else{var e=this.getTotalValue();t=this.parseStatisticData("total",e)}var n;this.options.htmlContent?n=this.options.htmlContent(t,this.getStatisticSize()):n=this.getStatisticTemplate(t);var a=document.createElement("div");return(0,y.isType)(n,"HTMLDivElement")?a.appendChild(n):a.innerHTML=n,a},r.prototype.adjustOptions=function(){this.html=this.getTotalHtmlString();var t=this.view.coordinateBBox,e=t.minX,n=t.minY,a=t.width,o=t.height;this.x=e+a/2,this.y=n+o/2},r.prototype.getTotalValue=function(){var t,e=0,n=this.plot.options,a=n.angleField,o=n.colorField,s=this.options.totalLabel;(0,y.each)(this.plot.options.data,function(h){typeof h[a]=="number"&&(e+=h[a])});var u=(t={},t[a]=e,t[o]=s,t);return u},r.prototype.parseStatisticData=function(t,e,n){var a=this.plot,o=a.options,s=o.angleField,u=o.colorField,h=a.getScaleByField(s),p=a.getScaleByField(u),b={name:p?p.getText(e[u]):null,value:h.getText(e[s])};return t==="item"&&(b.itemData=e,b.color=n),b},r.prototype.getStatisticTemplate=function(t){var e=this.getStatisticSize(),n=Bw(t.name,t.value,this.statisticClass,e);return n},r.prototype.getStatisticSize=function(){var t=this.plot.view.coordinateBBox,e=this.plot.options,n=e.radius,a=e.innerRadius,o=Math.min(t.width,t.height),s=o*n*a;return s},r.prototype.getStatisticHtmlString=function(t){var e=this.options.htmlContent,n;return e?n=e(t,this.getStatisticSize()):n=this.getStatisticTemplate(t),n},r}(gg),Fw=Dw,Rw={ring:"interval"},Nw={interval:"ring"},Eg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="donut",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{radius:.8,innerRadius:.64,tooltip:{visible:!1},statistic:{visible:!0,totalLabel:"\u603B\u8BA1",triggerOn:"mouseenter",triggerOff:"mouseleave"}})},r.prototype.beforeInit=function(){i.prototype.beforeInit.call(this),r.centralId++,this.statisticClass="statisticClassId"+r.centralId,this.adjustLabelDefaultOptions()},r.prototype.afterRender=function(){var t=this.canvas.get("container");if(this.statistic&&(t.removeChild(this.statistic.wrapperNode),this.statistic=null),this.options.statistic&&this.options.statistic.visible){var e=this.canvas.get("container");(0,Ui.Z)(e,{position:"relative"}),this.statistic=new Fw((0,Q.__assign)({container:e,view:this.view,plot:this,statisticClass:this.statisticClass},this.options.statistic)),this.statistic.render(),this.options.statistic.triggerOn&&this.statistic.triggerOn()}i.prototype.afterRender.call(this)},r.prototype.destroy=function(){this.statistic&&this.statistic.destroy(),i.prototype.destroy.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?Rw[e]:Nw[e]},r.prototype.coord=function(){var t=this.options,e={type:"theta",cfg:{radius:t.radius,innerRadius:t.innerRadius}};this.setConfig("coordinate",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,w)},r.prototype.adjustLabelDefaultOptions=function(){var t=this.options.label;if(t&&t.type==="inner"){var e=t.style||{};e.textAlign||(e.textAlign="center"),t.style=e,t.offset||(t.offset=(this.options.innerRadius-1)/2*100+"%")}},r.centralId=0,r}(Kp),Ag=Eg;An("donut",Eg);var Yw=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e)},r.prototype.getAngleScale=function(){var t=this.layers[0];return t.getAngleScale()},r.getDefaultOptions=Ag.getDefaultOptions,r}(un),Tg=Yw;function Gw(i,r,t){var e=i.style,n=i.defaultStyle,a=i.color,o=(0,Q.__assign)((0,Q.__assign)({},n),e);return a&&(r&&(o.stroke=a),t&&(o.fill=a)),o}function zw(i){var r=[],t=i[0];r.push(["M",t.x,t.y]);for(var e=1,n=i.length;e<n;e++)r.push(["L",i[e].x,i[e].y]);return r.push(["L",t.x,t.y]),r.push(["z"]),r}(0,q.Fj)("interval","waterfall",{draw:function(i,r){var t=Gw(i,!1,!0),e=this.parsePath(zw(i.points)),n=r.addShape("path",{attrs:(0,Q.__assign)((0,Q.__assign)({},t),{path:e}),name:"interval"}),a=(0,y.get)(i.style,"leaderLine");if(a&&a.visible){var o=a.style||{};if(i.nextPoints){var s=[["M",i.points[2].x,i.points[2].y],["L",i.nextPoints[0].x,i.nextPoints[0].y]];s=this.parsePath(s),r.addShape("path",{attrs:(0,Q.__assign)({path:s,stroke:"#d3d3d3",lineDash:[4,2],lineWidth:1},o),name:"leader-line"})}}return n}});var Pg=2,Xw=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.adjustLabel=function(t,e){var n,a,o=e.shape,s=o.getBBox(),u=e.getData(),h=u[pa],p=u[this.layer.options.yField],b=(0,y.isArray)(h)?h[1]:h,k=this.options.formatter,R=[].concat(e.getModel().mappingData),Y=k?R[0]&&R[0]._origin[Xh]:0,V=k?k(b,(n={},n[q.YI]=(a=R[0])===null||a===void 0?void 0:a._origin,n.mappingDatum=R[0],n.mappingDatumIndex=0,n.element=e,n.elementIndex=Y,n),Y):b,Z=(s.minY+s.maxY)/2,it="bottom";p<0?(Z=s.maxY+Pg,it="top"):Z=s.minY-Pg,t.attr("y",Z),t.attr("text",V),t.attr("textBaseline",it)},r}(Ea),NO=null;vn("waterfall",Xw);function Hw(){return{fill:"#fff",fontSize:12,lineHeight:12,stroke:"rgba(0, 0, 0, 0.45)"}}var Vw=function(){function i(r){this.textAttrs={},this.view=r.view,this.fields=r.fields,this.formatter=r.formatter,this.textAttrs=(0,y.mix)(Hw(),r.style),this._init()}return i.prototype.draw=function(){var r=this;if(!(!this.view||this.view.destroyed)){var t=(0,y.clone)(this.view.getData());this.container=this.view.foregroundGroup.addGroup();var e=this.view.geometries[0].elements.map(function(n){return n.shape});(0,y.each)(e,function(n,a){if(!!n.cfg.origin){var o=n.cfg.origin.data,s=n.getBBox(),u=o[pa],h=u;(0,y.isArray)(u)&&(h=u[1]-u[0]),h=h>0?"+"+h:h,o[ud]&&(h=u[0]-u[1]);var p=h;if(r.formatter){var b=e[a].attr("fill");p=r.formatter(""+h,{_origin:t[a],color:b},a)}var k=r.container.addShape("text",{attrs:(0,Q.__assign)({text:p,textBaseline:"middle",textAlign:"center",x:(s.minX+s.maxX)/2,y:(s.minY+s.maxY)/2},r.textAttrs),name:"dill-label"});k.getBBox().height>s.height&&k.set("visible",!1)}}),this.view.getCanvas().draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype._init=function(){var r=this;this.view.on(q.ld.BEFORE_RENDER,function(){r.clear()}),this.view.on(q.ld.AFTER_RENDER,function(){r.draw()})},i}(),Ww=Vw,jw={waterfall:"interval"},Uw={interval:"waterfall"},pa="$$value$$",ud="$$total$$",Xh="$$index$$",Lg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="watarfall",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!1,position:"bottom"},label:{visible:!0,adjustPosition:!0},diffLabel:{visible:!0},leaderLine:{visible:!0},showTotal:{visible:!0,label:"\u603B\u8BA1\u503C"},waterfallStyle:{lineWidth:0},tooltip:{visible:!0,shared:!0,showCrosshairs:!1,showMarkers:!1}})},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustLegendOptions(e),this.adjustMeta(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options;t.diffLabel&&t.diffLabel.visible?this.diffLabel=new Ww({view:this.view,fields:[t.xField,t.yField,pa],formatter:t.diffLabel.formatter,style:t.diffLabel.style}):this.diffLabel&&(this.diffLabel.clear(),this.diffLabel=null)},r.prototype.afterRender=function(){i.prototype.afterRender.call(this);var t=this.options;this.view.on("tooltip:change",function(e){for(var n=e.items,a=0;a<n.length;a++){var o=n[a],s=(0,y.get)(o,"data",{});if(o.name=s[t.xField],o.value=s[t.yField],!o.value&&s[ud]){var u=s[pa];o.value=u[0]-u[1]}e.items[a]=o}}),this.renderLabel()},r.prototype.renderLabel=function(){var t=sr(this.view,"interval");this.options.label&&this.options.label.visible&&this.doRenderLabel(t,(0,Q.__assign)({type:"waterfall"},this.options.label))},r.prototype.geometryParser=function(t,e){return t==="g2"?jw[e]:Uw[e]},r.prototype.interaction=function(){this.setConfig("interactions",[{type:"tooltip"},{type:"active-region"}])},r.prototype.addGeometry=function(){var t=this.options,e={type:"interval",position:{fields:[t.xField,pa]},shape:{values:["waterfall"]}};e.style=this._parseStyle(),e.color=this._parseColor(),this.waterfall=e,this.options.tooltip&&(this.options.tooltip.fields||this.options.tooltip.formatter)&&this.geometryTooltip(),this.setConfig("geometry",e)},r.prototype.processData=function(t){var e,n=[],a=this.options.xField,o=this.options.yField;if((0,y.map)(t,function(h,p){var b,k=h[o];if(p>0){var R=n[p-1][pa];(0,y.isArray)(R)?k=[R[1],h[o]+R[1]]:k=[R,h[o]+R]}n.push((0,Q.__assign)((0,Q.__assign)({},h),(b={},b[pa]=k,b[Xh]=p,b)))}),this.options.showTotal&&this.options.showTotal.visible){var s=(0,y.map)(t,function(h){return h[o]}),u=(0,y.reduce)(s,function(h,p){return h+p},0);n.push((e={},e[a]=this.options.showTotal.label,e[o]=null,e[pa]=[u,0],e[Xh]=n.length,e[ud]=!0,e))}return n},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[pa]={},(0,y.has)(t,"yAxis")&&_i(e[pa],t.yAxis),this.setConfig("scales",e)},r.prototype.axis=function(){var t=Ln("axis",{plot:this,dim:"x"}),e=Ln("axis",{plot:this,dim:"y"}),n={};n[this.options.xField]=t,n[pa]=e,this.setConfig("axes",n)},r.prototype.coord=function(){},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,M)},r.prototype.geometryTooltip=function(){this.waterfall.tooltip={};var t=this.options.tooltip;t.fields&&(this.waterfall.tooltip.fields=t.fields),t.formatter&&(this.waterfall.tooltip.callback=t.formatter,t.fields||(this.waterfall.tooltip.fields=[this.options.xField,pa]))},r.prototype._parseStyle=function(){var t=this.options.waterfallStyle,e=this.options.leaderLine,n={};return(0,y.isFunction)(t)?n.callback=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return Object.assign({},t.apply(void 0,a),{leaderLine:e})}:n.cfg=(0,Q.__assign)((0,Q.__assign)({},t),{leaderLine:e}),n},r.prototype._parseColor=function(){var t=this,e=this.options,n=this.options,a=n.xField,o=n.yField,s={fields:[a,o,pa,Xh]};if((0,y.isFunction)(e.color))s.callback=e.color;else{var u="#f4664a",h="#30bf78",p="rgba(0, 0, 0, 0.25)";if((0,y.isString)(e.color))u=h=p=e.color;else if((0,y.isObject)(e.color)){var b=e.color,k=b.rising,R=b.falling,Y=b.total;u=k,h=R,p=Y}s.callback=function(V,Z,it,tt){return tt===t.options.data.length?p||(it[0]>=0?u:h):((0,y.isArray)(it)?it[1]-it[0]:it)>=0?u:h}}return s},r.prototype.adjustLegendOptions=function(t){var e=t.legend;e&&(e.visible=!1)},r.prototype.adjustMeta=function(t){var e=t.meta;if(e){var n=e?e[t.yField]:{};n.alias=n.alias||t.yField,t.meta[pa]=n}},r}(qn),Zw=Lg;An("waterfall",Lg);var Kw=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="waterfall",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Zw.getDefaultOptions,r}(un),_g=Kw,$w=function(){function i(r){this.quadrantGroups=[],this.regionData=[],this.lineData=[],this.options=r,this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options,t=r.xBaseline,e=r.yBaseline,n=this.view.getCoordinate(),a=this.view.getScaleByField(this.options.plotOptions.xField),o=this.view.getScaleByField(this.options.plotOptions.yField),s;if(t>a.min&&t<a.max){var u=(t-a.min)/(a.max-a.min);s=[new at(n.start.x,n.end.y,n.getWidth()*u,n.getHeight()),new at(n.start.x+n.getWidth()*u,n.end.y,n.getWidth()*(1-u),n.getHeight())];var h={start:{x:n.start.x+n.getWidth()*u,y:n.end.y},end:{x:n.start.x+n.getWidth()*u,y:n.start.y}};this.lineData.push(h)}else s=[new at(n.start.x,n.end.y,n.getWidth(),n.getHeight())];if(e>o.min&&e<o.max){var u=(e-o.min)/(o.max-o.min),p={start:{x:n.start.x,y:n.start.y-n.getHeight()*u},end:{x:n.end.x,y:n.start.y-n.getHeight()*u}};this.lineData.push(p);var b={name:t<=a.min?"top-right":"top-left",bbox:new at(s[0].minX,s[0].minY,s[0].width,s[0].height*(1-u)),index:t<=a.min?2:0};this.regionData.push(b);var k={name:t<=a.min?"bottom-right":"bottom-left",bbox:new at(s[0].minX,s[0].minY+s[0].height*(1-u),s[0].width,s[0].height*u),index:t<=a.min?3:1};if(this.regionData.push(k),s.length>1){var R={name:"top-right",bbox:new at(s[1].minX,s[1].minY,s[1].width,s[1].height*(1-u)),index:2};this.regionData.push(R);var Y={name:"bottom-right",bbox:new at(s[1].minX,s[1].minY+s[1].height*(1-u),s[1].width,s[1].height*u),index:3};this.regionData.push(Y)}}else if(s.length===2)if(e<=o.min){var V={name:"top-left",bbox:s[0],index:0};this.regionData.push(V);var R={name:"top-right",bbox:s[1],index:2};this.regionData.push(R)}else{var Z={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(Z);var Y={name:"bottom-right",bbox:s[1],index:3};this.regionData.push(Y)}else if(t<=a.min)if(e<=o.min){var R={name:"top-right",bbox:s[0],index:2};this.regionData.push(R)}else{var Y={name:"bottom-right",bbox:s[0],index:3};this.regionData.push(Y)}else if(e<=o.min){var V={name:"top-left",bbox:s[0],index:0};this.regionData.push(V)}else{var Z={name:"bottom-left",bbox:s[0],index:1};this.regionData.push(Z)}this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this;if(this.regionData.length>0){var t=this.getDefaultStyle(),e=this.getRegionStyle(this.regionData);(0,y.each)(this.regionData,function(a){var o=a.index,s=r.container.addGroup(),u=s.addShape("rect",{attrs:(0,Q.__assign)({x:a.bbox.minX,y:a.bbox.minY,width:a.bbox.width,height:a.bbox.height},e[o]),name:"quadrant"});if(r.options.label&&r.options.label.text){var h=(0,y.deepMix)({},t.label,r.options.label),p=r.getLabelConfig(a,h);s.addShape("text",{attrs:(0,Q.__assign)({},p),name:"quadrant-label"})}u.set("data",a),r.quadrantGroups.push(s)});var n=(0,y.deepMix)({},t.line,this.options.lineStyle);(0,y.each)(this.lineData,function(a){r.container.addShape("path",{attrs:(0,Q.__assign)({path:[["M",a.start.x,a.start.y],["L",a.end.x,a.end.y]]},n),name:"quadrant-line"})}),this.view.canvas.draw()}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype.getDefaultStyle=function(){return{line:{stroke:"#9ba29a",lineWidth:1},regionStyle:[{fill:"#000000",opacity:.05},{fill:"#ffffff",opacity:0},{fill:"#ffffff",opacity:0},{fill:"#000000",opacity:.05}],label:{position:"outter-inner",offset:10,style:{fontSize:14,fill:"#ccc"}}}},i.prototype.getRegionStyle=function(r){var t=this.getDefaultStyle(),e=t.regionStyle;if(this.options.regionStyle){var n=this.options.regionStyle;(0,y.isArray)(n)?e=e.map(function(a,o){return n.length>o&&n[o]?n[o]:a}):(0,y.isFunction)(n)&&(0,y.each)(r,function(a,o){e[o]=n(a)})}return e},i.prototype.getLabelConfig=function(r,t){var e=r.index,n=0,a=0,o={},s=t.text;(0,y.isFunction)(s)?s=s(r):(0,y.isArray)(s)&&(s=s[e]);var u=t.position,h=u.split("-"),p=r.name.split("-");return p[1]==="left"?(h[0]==="inner"&&(n=r.bbox.maxX-t.offset,o.textAlign="right"),h[0]==="outter"&&(n=r.bbox.minX+t.offset,o.textAlign="left")):p[1]==="right"&&(h[0]==="inner"&&(n=r.bbox.minX+t.offset,o.textAlign="left"),h[0]==="outter"&&(n=r.bbox.maxX-t.offset,o.textAlign="right")),p[0]==="top"?(h[1]==="inner"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom"),h[1]==="outter"&&(a=r.bbox.minY+t.offset,o.textBaseline="top")):p[0]==="bottom"&&(h[1]==="inner"&&(a=r.bbox.minY+t.offset,o.textBaseline="top"),h[1]==="outter"&&(a=r.bbox.maxY-t.offset,o.textBaseline="bottom")),o=(0,y.deepMix)({},t.style,o),o.lineHeight=o.fontSize,(0,Q.__assign)({x:n,y:a,text:s},o)},i}(),Qw=$w,is=v(89831),Jw={exp:is.regressionExp,linear:is.regressionLinear,loess:is.regressionLoess,log:is.regressionLog,poly:is.regressionPoly,pow:is.regressionPow,quad:is.regressionQuad};function qw(i,r){return Math.sqrt(i*(1-i)/r)*1.96}var tS=function(){function i(r){var t={type:"linear",style:{stroke:"#9ba29a",lineWidth:2,opacity:.5,lineJoin:"round",lineCap:"round"},showConfidence:!1,confidenceStyle:{fill:"#ccc",opacity:.1}};this.options=(0,y.deepMix)({},t,r),this.view=this.options.view,this.init()}return i.prototype.init=function(){var r=this.options.plotOptions,t=r.xField,e=r.yField,n=r.data,a=Jw[this.options.type]().x(function(o){return o[t]}).y(function(o){return o[e]});this.data=this.processData(a(n)),this.container=this.view.backgroundGroup.addGroup()},i.prototype.render=function(){var r=this.view.getScaleByField(this.options.plotOptions.xField),t=this.view.getScaleByField(this.options.plotOptions.yField),e=this.view.getCoordinate(),n=this.data.trendlineData,a=(0,Fe.getScale)("linear"),o=this.adjustScale(r,n,"x"),s=new a({min:o.min,max:o.max}),u=this.adjustScale(t,n,"y"),h=new a({min:u.min,max:u.max});if(this.options.showConfidence){var p=this.getConfidencePath(s,h,e);this.container.addShape("path",{attrs:(0,Q.__assign)({path:p},this.options.confidenceStyle),name:"confidence"})}var b=this.getTrendlinePoints(s,h,e),k=[[0,0],[1,1]],R=Qo(b,!1,k);this.shape=this.container.addShape("path",{attrs:(0,Q.__assign)({path:R},this.options.style),name:"trendline"})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.destroy()},i.prototype.processData=function(r){var t=[],e=[];return(0,y.each)(r,function(n){t.push({x:n[0],y:n[1]});var a=qw(r.rSquared,n[1]);e.push({x:n[0],y0:n[1]-a,y1:n[1]+a})}),{trendlineData:t,confidenceData:e}},i.prototype.getTrendlinePoints=function(r,t,e){var n=[];return(0,y.each)(this.data.trendlineData,function(a){var o=r.scale(a.x),s=t.scale(a.y),u=e.start.x+e.width*o,h=e.start.y-e.height*s;n.push({x:u,y:h})}),n},i.prototype.getConfidencePath=function(r,t,e){var n=[],a=[],o=[];(0,y.each)(this.data.confidenceData,function(b){var k=r.scale(b.x),R=t.scale(b.y0),Y=t.scale(b.y1),V=e.start.x+e.width*k,Z=e.start.y-e.height*R,it=e.start.y-e.height*Y;n.push({x:V,y:Z}),a.push({x:V,y:it})});for(var s=0;s<n.length;s++){var u=s===0?"M":"L",h=n[s];!isNaN(h.x)&&!isNaN(h.y)&&o.push([u,h.x,h.y])}for(var p=a.length-1;p>0;p--){var h=a[p];!isNaN(h.x)&&!isNaN(h.y)&&o.push(["L",h.x,h.y])}return o},i.prototype.adjustScale=function(r,t,e){var n=r.min,a=r.max,o=this.options.plotOptions,s=o.data,u=o.xField,h=o.yField,p=e==="x"?u:h,b=(0,y.minBy)(s,p)[p],k=(0,y.maxBy)(s,p)[p],R=(n-b)/(k-b),Y=(a-k)/(k-b),V=(0,y.minBy)(t,e)[e],Z=(0,y.maxBy)(t,e)[e];return{min:V+R*(Z-V),max:Z+Y*(Z-V)}},i}(),eS=tS,rS={point:"point",trendline:"trendline",confidence:"confidence",quadrant:"quadrant",quadrantLabel:"quadrant-label",quadrantLine:"quadrant-line"},nS=Tt(rS);(0,y.assign)(pt,nS);var iS=function(i){var r=i.stroke||"#000";return{stroke:r}},aS=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},oS=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};Xi("scatter",{pointStyle:{normal:{},active:iS,selected:aS,inactive:oS}});var sS={scatter:"point"},lS={point:"point"},Ig=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="scatter",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{pointSize:4,pointStyle:{lineWidth:1,strokeOpacity:1,fillOpacity:.95,stroke:"#fff"},xAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},yAxis:{nice:!0,grid:{visible:!0},line:{visible:!0}},tooltip:{visible:!0,shared:null,showTitle:!1,showMarkers:!1,showCrosshairs:!1},label:{visible:!1},shape:"circle"})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.quadrant&&this.quadrant.destroy(),this.trendline&&this.trendline.destroy(),this.options.quadrant&&this.options.quadrant.visible&&(this.quadrant=new Qw((0,Q.__assign)({view:this.view,plotOptions:this.options},this.options.quadrant)),this.quadrant.render()),this.options.trendline&&this.options.trendline.visible&&(this.trendline=new eS((0,Q.__assign)({view:this.view,plotOptions:this.options},this.options.trendline)),this.trendline.render())},r.prototype.destroy=function(){this.quadrant&&(this.quadrant.destroy(),this.quadrant=null),this.trendline&&(this.trendline.destroy(),this.trendline=null),i.prototype.destroy.call(this)},r.prototype.isValidLinearValue=function(t){return(0,y.isNil)(t)?!1:!Number.isNaN(Number(t))},r.prototype.processData=function(t){var e=this,n=this.options,a=n.xField,o=n.yField,s=(0,y.get)(this.options,["xAxis","type"],"linear"),u=(0,y.get)(this.options,["yAxis","type"],"linear");if(s&&u){var h=t.filter(function(p){return!(s==="linear"&&!e.isValidLinearValue(p[a])||u==="linear"&&!e.isValidLinearValue(p[o]))}).map(function(p){var b;return(0,Q.__assign)((0,Q.__assign)({},p),(b={},b[a]=s==="linear"?Number(p[a]):String(p[a]),b[o]=u==="linear"?Number(p[o]):String(p[o]),b))});return h}return t},r.prototype.geometryParser=function(t,e){return t==="g2"?sS[e]:lS[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis);var n=(0,y.find)(t.interactions,function(o){return o.type==="timeline"});if(n&&(0,y.get)(n,"cfg.key")){var a=n.cfg.key;e[a]?e[a].key=!0:e[a]={key:!0}}this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.coord=function(){},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=Ci("point","circle",{plot:this});if(this.points=t,this.options.tooltip&&this.options.tooltip.visible){var e=this.options.tooltip,n=e.showTitle,a=e.titleField;this.extractTooltip(),this.setConfig("tooltip",(0,Q.__assign)({showTitle:n,title:n?a:void 0},this.options.tooltip))}this.options.label&&this.label(),this.setConfig("geometry",t)},r.prototype.label=function(){var t=this.options;if(t.label.visible===!1){this.points&&(this.points.label=!1);return}var e=Ln("label",(0,Q.__assign)((0,Q.__assign)({fields:t.label.field?[t.label.field]:[t.yField]},t.label),{plot:this}));this.points&&(this.points.label=e)},r.prototype.animation=function(){i.prototype.animation.call(this);var t=this.options;t.animation===!1&&(this.points.animate=!1)},r.prototype.parseEvents=function(t){i.prototype.parseEvents.call(this,t||S)},r.prototype.extractTooltip=function(){this.points.tooltip={};var t=this.options.tooltip;t.fields?this.points.tooltip.fields=t.fields:this.points.tooltip.fields=[this.options.xField,this.options.yField],t.formatter&&(this.points.tooltip.callback=t.formatter,this.options.colorField&&this.points.tooltip.fields.push(this.options.colorField))},r}(qn),Og=Ig;An("scatter",Ig);var uS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="scatter",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=Og.getDefaultOptions,r}(un),kg=uS,hS=v(74236);(0,Ro.registerShape)("point","bubble-point",{draw:function(i,r){var t=(0,hS.iV)(this,i,r,"circle",!1);if(!i.style.stroke){var e=t.attr("fill");t.attr("stroke",e)}return t},getMarker:function(i){var r=i.color;return{symbol:"circle",style:{r:4.5,fill:r}}}});var fS=function(i){var r=i.stroke||"#000",t=i.fillOpacity||i.opacity||.95;return{stroke:r,fillOpacity:t}},cS=function(i){var r=i.stroke||"#000",t=i.lineWidth||2;return{stroke:r,lineWidth:t}},vS=function(i){var r=i.fillOpacity||i.opacity||.3;return{fillOpacity:r}};Xi("bubble",{pointStyle:{normal:{},active:fS,selected:cS,inactive:vS}});var Bg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bubble",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{pointSize:[2,32],pointStyle:{stroke:null,strokeOpacity:1,fillOpacity:.5},label:{position:"middle",style:{stroke:"#fff",lineWidth:2}},shape:"bubble-point"})},r.prototype.getSizeScale=function(){var t=this.options.sizeField;t&&this.view.getScaleByField(t)},r.prototype.legend=function(){var t;i.prototype.legend.call(this),!(this.options.legend&&this.options.legend.visible===!1)&&this.setConfig("legends",(t={},t[this.options.sizeField]=!1,t))},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,S)},r}(Og),dS=Bg;An("bubble",Bg);var pS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="bubble",i.prototype.createLayers.call(this,e)},r.prototype.getSizeScale=function(){var t=this.layers[0];return t.getSizeScale()},r.getDefaultOptions=dS.getDefaultOptions,r}(un),Dg=pS,gS={bullet:"interval",bulletTarget:"bullet-target"},yS=Tt(gS);(0,y.assign)(pt,yS);var mS=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.middleGroup.addGroup(),this.container.set("name","rectGroups"),this.container.setZIndex(-100);for(var r=this.getGeometry(),t=(0,y.map)(r==null?void 0:r.elements,function(o){return o.shape}),e=0;e<this.cfg.ranges.length;e+=1){var n=t[e].getBBox(),a=n.width/t[e].get("origin").data[this.cfg.yField];this.drawRect(n,this.cfg.ranges[e]||[0,1],a)}this.view.canvas.draw()}},i.prototype.drawRect=function(r,t,e){for(var n=this.cfg,a=n.rangeColors,o=r.minX,s=r.minY-r.height*(n.rangeSize-1)/2,u=1;u<t.length;u+=1){var h=(t[u]-t[u-1])*n.rangeMax*e;this.container.addShape("rect",{name:"bullet-rect",attrs:{width:h,height:r.height*n.rangeSize,x:o,y:s,fill:a[(u-1)%a.length],fillOpacity:.25}}).set("zIndex",-1),o+=h}if(n.axis&&n.axis.visible){var p=n.rangeMax/(n.axis.tickCount-1),b=new at(r.x,s,o,r.height*n.rangeSize);this.drawBulletTicks(b,p,e)}},i.prototype.drawBulletTicks=function(r,t,e){for(var n=this.cfg,a=n.axis.style,o=n.axis.tickCount,s=n.axis.position,u=(0,y.get)(a,"lineHeight",0)-a.fontSize/2,h=0;h<o;h+=1){var p=r.minX+t*h*e,b=""+t*h;if(n.axis.formatter&&(b=n.axis.formatter(b,h)),this.container.addShape("text",{name:"tick",attrs:(0,Q.__assign)({x:p,y:s==="before"?r.minY-u:r.maxY+u,text:""+b},a)}),n.axis.tickLine&&n.axis.tickLine.visible){var k=n.axis.tickLine;h>0&&h!==o-1&&this.container.addShape("path",{attrs:(0,Q.__assign)({path:[["M",p,r.minY],["L",p,r.maxY]]},k)}).set("zIndex",-1)}}},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),xS=mS,bS=function(){function i(r,t){this.view=r,this.cfg=t,this._init()}return i.prototype.draw=function(){if(!(!this.view||this.view.destroyed)){this.container=this.view.foregroundGroup.addGroup(),this.container.set("name","targetGroups");for(var r=(0,y.map)(this.getGeometry().elements,function(a){return a.shape}),t=0;t<this.cfg.targets.length;t+=1){var e=r[t].getBBox(),n=e.width/r[t].get("origin").data[this.cfg.yField];this.drawTarget(e,this.cfg.targets[t],n)}this.view.canvas.draw()}},i.prototype.drawTarget=function(r,t,e){var n=this,a=this.cfg,o=a.markerColors;t.forEach(function(s,u){var h=a.markerStyle;n.container.addShape("rect",{name:"bullet-target",attrs:(0,Q.__assign)((0,Q.__assign)({width:h.width,height:r.height*a.markerSize-h.width/2,x:r.minX+s*e,y:r.minY-r.height*(a.markerSize-1)/2},h),{fill:o[u%o.length]||h.fill})})})},i.prototype.clear=function(){this.container&&this.container.clear()},i.prototype.destroy=function(){this.container&&this.container.remove()},i.prototype._init=function(){var r=this;this.view.on("beforerender",function(){r.clear()}),this.view.on("afterrender",function(){r.draw()})},i.prototype.getGeometry=function(){return(0,y.find)(this.view.geometries,function(r){return r.type==="interval"})},i}(),wS=bS,SS=function(i){var r=i.opacity||1;return{opacity:r*.5,lineWidth:0}},CS=function(i){var r=i.opacity||1;return{opacity:r*.5}};Xi("bullet",{columnStyle:{normal:{},active:SS,disable:CS,selected:{}}});var MS={bullet:"interval"},ES={interval:"bullet"},AS="$$stackField$$",TS="$$xField$$",PS="$$yField$$",Fg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="bullet",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{data:[],stackField:AS,xField:TS,yField:PS,rangeColors:["rgba(91, 143, 249, 0.45)"],measureSize:12,rangeSize:2,markerSize:2,markerColors:[],markerStyle:{width:2,fill:"#5B8FF9",lineWidth:0},axis:{visible:!1,position:"before",tickCount:6,formatter:function(t,e){return""+e},style:{fill:"rgba(0, 0, 0, 0.25)",textBaseline:"middle",textAlign:"center",fontSize:12,lineHeight:16},tickLine:{visible:!0,lineWidth:1,stroke:"#FFF",lineDash:[4,2]}},xAxis:{visible:!0,line:{visible:!1},tickLine:{visible:!1},label:{visible:!0}},yAxis:{visible:!1,nice:!1},tooltip:{visible:!1,trigger:"item",crosshairs:!1},label:{visible:!0,offset:4,style:{fill:"rgba(0, 0, 0, 0.45)",stroke:"#fff",lineWidth:1}}})},r.prototype.afterRender=function(){i.prototype.afterRender.call(this),this.view.removeInteraction("legend-filter")},r.prototype.scale=function(){var t=this.options,e={};e[t.yField]={},(0,y.has)(t,"yAxis")&&_i(e[t.yField],t.yAxis),e[t.xField]={type:"cat"},(0,y.has)(t,"xAxis")&&_i(e[t.xField],t.xAxis),this.setConfig("scales",e),i.prototype.scale.call(this)},r.prototype.getOptions=function(t){var e=i.prototype.getOptions.call(this,t);return this.adjustOptions(e),e},r.prototype.afterInit=function(){i.prototype.afterInit.call(this);var t=this.options,e=t.data.map(function(a){return a.ranges}),n=t.data.map(function(a){return a.targets});this.bulletRect=new xS(this.view,{ranges:e,rangeMax:t.rangeMax,yField:t.yField,rangeSize:t.rangeSize,rangeColors:t.rangeColors||[],axis:t.axis}),this.bulletTarget=new wS(this.view,{targets:n,yField:t.yField,markerSize:t.markerSize,markerColors:t.markerColors||[],markerStyle:t.markerStyle})},r.prototype.geometryParser=function(t,e){return t==="g2"?MS[e]:ES[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.legend=function(){var t=this.options,e=t.markerStyle.fill,n=t.measureColors||this.theme.colors,a=[{name:"\u5B9E\u9645\u8FDB\u5EA6",value:"\u5B9E\u9645\u8FDB\u5EA6",marker:{symbol:"square",style:{fill:n[0]}}},{name:"\u76EE\u6807\u503C",value:"\u76EE\u6807\u503C",marker:{symbol:"line",style:{stroke:e,lineWidth:2}}}],o=(0,Q.__assign)({custom:!0,position:"bottom",items:a},t.legend);this.setConfig("legends",o)},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.xField,t.yField],plot:this});e.adjust=[{type:"stack"}],t.label&&(e.label=this.extractLabel()),this.bullet=e,this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,I)},r.prototype.extractLabel=function(){var t=this.options,e=(0,y.deepMix)({},t.label);if(e.visible===!1)return!1;var n=Ln("label",(0,Q.__assign)({plot:this,labelType:"barLabel",fields:[t.yField]},e));return n},r.prototype.adjustOptions=function(t){t.barSize=t.measureSize||12,this.adjustYAxisOptions(t)},r.prototype.adjustYAxisOptions=function(t){var e=[];t.data.forEach(function(n){return e.push(n.measures.reduce(function(a,o){return a+o},0))}),e.push(t.rangeMax),t.yAxis.max=Math.max.apply([],e)},r.prototype.processData=function(t){var e=this.options,n=[];return t.forEach(function(a,o){for(var s,u=0;u<a.measures.length;u+=1){var h=a.measures[u],p=a.title||""+o;n.push((s={},s[e.xField]=p,s[e.yField]=h,s[e.stackField]=""+u,s))}}),n},r}(qn),LS=Fg;An("bullet",Fg);var _S=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="bullet",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=LS.getDefaultOptions,r}(un),Rg=_S,Ls="$$day$$",_s="$$week$$",Ng="$$date$$",YO="$$is_month_center$$",Is="YYYY-MM-DD",IS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],OS=["S","M","T","W","T","F","S"],_l=864e5;function kS(i){var r=(0,Q.__spreadArrays)(i).sort(function(t,e){return t.getTime()-e.getTime()});return[Ka.default.format((0,y.head)(r),Is),Ka.default.format((0,y.last)(r),Is)]}function GO(i){var r=i||new Date;return[fecha.format(new Date(r.getFullYear(),0,1),FORMATTER),fecha.format(new Date(r.getFullYear(),11,30),FORMATTER)]}function BS(i){return i.getMonth()!==Hh(new Date(i),7*_l).getMonth()}function DS(i){return i.getMonth()!==Hh(new Date(i),_l).getMonth()}function Yg(i){var r=new Date(i.getFullYear(),0,1);return Math.ceil(((i.getTime()-r.getTime())/_l+r.getDay()+1)/7)}function FS(i){return i.getDay()}function Hh(i,r){return i.setMilliseconds(i.getMilliseconds()+r),i}function Gg(i){var r,t=i[0],e=i[1],n=Ka.default.parse(t,Is),a=Ka.default.parse(e,Is);return n>a&&(r=[n,a],a=r[0],n=r[1]),[n,a]}function RS(i,r,t){for(var e=[],n=Gg(r),a=n[0],o=n[1],s=new Date(a),u=function(){var h,p=Ka.default.format(s,Is),b=(0,y.find)(i,function(k){return k[t]===p});e.push((0,Q.__assign)((h={},h[Ls]=FS(s),h[_s]=""+Yg(s),h[t]=p,h[Ng]=new Date(s),h),b)),Hh(s,_l)};s<=o;)u();return e}function NS(i){var r=Gg(i),t=r[0],e=r[1],n=new Map;function a(u){var h=u.getMonth(),p=Yg(u);n.has(h)||n.set(h,[]),n.get(h).push(p)}for(var o=new Date(t);o<=e;)a(o),Hh(o,_l*7);e<o&&a(e);var s={};return n.forEach(function(u,h){var p=Math.ceil(((0,y.head)(u)+(0,y.last)(u))/2);s[p]=h}),s}var YS={rect:"polygon"},GS=Tt(YS);(0,y.assign)(pt,GS);var zg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="calendar",t}return r.getDefaultOptions=function(){var t;return(0,y.deepMix)({},i.getDefaultOptions.call(this),{xAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},yAxis:{line:{visible:!1},grid:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoRotate:!1,autoHide:!1}},legend:{visible:!1},meta:(t={},t[Ls]={type:"cat",alias:"Day",values:[0,1,2,3,4,5,6]},t[_s]={type:"cat",alias:"Month"},t),tooltip:{visible:!0,showTitle:!0,showCrosshairs:!1,showMarkers:!1,title:"date"}})},r.prototype.processData=function(t){var e=this.options.dateField,n=this.options.dateRange;if((0,y.isNil)(n)){var a=(0,y.map)(t,function(o){return Ka.default.parse(""+o[e],Is)});n=kS(a)}return RS(t,n,e)},r.prototype.addGeometry=function(){var t=this.options,e=t.valueField,n=t.colors,a=t.tooltip,o={type:"polygon",position:{fields:[_s,Ls]},shape:{values:["calendar-polygon"]},color:{fields:[e],values:n},label:this.extractLabel()};a&&(a.fields||a.formatter)&&this.geometryTooltip(o),this.setConfig("geometry",o)},r.prototype.geometryTooltip=function(t){t.tooltip={};var e=this.options.tooltip;e.fields&&(t.tooltip.fields=e.fields),e.formatter&&(t.tooltip.callback=e.formatter,e.fields||(t.tooltip.fields=[_s,Ls]))},r.prototype.extractLabel=function(){var t=this.options,e=t.label;if(e&&e.visible===!1)return!1;var n=this.options.valueField;return Ln("label",(0,Q.__assign)({plot:this,fields:[n],position:"top",offset:0},e))},r.prototype.coord=function(){var t={type:"rect",cfg:{},actions:[["reflect","y"]]};this.setConfig("coordinate",t)},r.prototype.geometryParser=function(){return""},r.prototype.axis=function(){var t=Ln("axis",{plot:this,dim:"x"}),e=Ln("axis",{plot:this,dim:"y"}),n={};n[_s]=t,n[Ls]=e,this.setConfig("axes",n)},r.prototype.scale=function(){i.prototype.scale.call(this);var t=NS(this.options.dateRange),e=this.config.scales,n=this.options,a=n.weeks,o=a===void 0?OS:a,s=n.months,u=s===void 0?IS:s,h=e[_s],p=e[Ls];h.formatter=function(Y){var V=t[Y];return V!==void 0?u[V]:""},p.formatter=function(Y){return o[Y]||""};var b=this.options,k=b.xAxis,R=b.yAxis;h.alias=(0,y.get)(k,["title","text"],h.alias),p.alias=(0,y.get)(R,["title","text"],p.alias),this.setConfig("scales",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,B)},r}(qn),zS=zg;An("calendar",zg),(0,Ro.registerShape)("polygon","calendar-polygon",{draw:function(i,r){if(!(0,y.isEmpty)(i.points)){var t=i.points,e=[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["L",t[2].x,t[2].y],["L",t[3].x,t[3].y],["Z"]];e=this.parsePath(e);var n=(0,Q.__assign)((0,Q.__assign)({stroke:"#fff",lineWidth:1,fill:i.color},i.style),{path:e}),a=r.addShape("path",{attrs:n}),o=i.data[Ng];if(BS(o)){var s=[["M",t[2].x,t[2].y],["L",t[3].x,t[3].y]];r.addShape("path",{zIndex:1,attrs:{path:this.parsePath(s),lineWidth:1,stroke:"#404040"}}),DS(o)&&r.addShape("path",{zIndex:1,attrs:{path:this.parsePath([["M",t[1].x,t[1].y],["L",t[2].x,t[2].y]]),lineWidth:1,stroke:"#404040"}})}return r.sort(),a}}});var XS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="calendar",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=zS.getDefaultOptions,r}(un),HS=XS,Xg=function(){function i(r){this.uid=r}return i.prototype.setOption=function(r,t){this.type=r,this.options=t,this.axis=t.axis,this.pivot=t.pivot},i.prototype.render=function(){var r=this;(0,Ro.registerShape)("point","gauge",{draw:function(t,e){var n,a,o;this.gauge={},this.gauge.options=r.options,this.gauge.axis=r.axis,this.gauge.pivot=r.pivot,this.gauge.type=r.type;var s=this.gauge,u=this.gauge.type,h=t.points[0],p=this.parsePoint({x:0,y:0}),b=this.parsePoint({x:h.x||0,y:1});s.center=p,s.group=e;var k={x:p.x-b.x,y:p.y-b.y};this.gauge.ringRadius=Math.sqrt(k.x*k.x+k.y*k.y);var R=this.getAngleRange(),Y=R.starAngle,V=R.endAngle,Z=h.x*(V-Y)+Y;switch(u){case"meterGauge":this.drawBarGauge(Z),this.gauge.axis.visible&&((n=this.gauge.axis.tickLine)===null||n===void 0?void 0:n.visible)&&this.drawInSideAxis();break;case"fanGauge":this.drawGauge(Z),this.gauge.axis.visible&&((a=this.gauge.axis.tickLine)===null||a===void 0?void 0:a.visible)&&this.drawOutSideAxis();break;case"standardGauge":default:this.drawGauge(Z),this.gauge.axis.visible&&((o=this.gauge.axis.tickLine)===null||o===void 0?void 0:o.visible)&&this.drawAxis();break}this.gauge.pivot.visible&&this.drawPivot(t,e)},drawGauge:function(t){var e=this.gauge.options.range;this.drawBottomRing(),e&&e.length?this.drawRangeColor():this.drawCurrentRing(t)},drawRangeColor:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.range,o=t.color,s=t.rangeStyle,u=o||Di().colors,h=this.getAngleRange(),p=h.starAngle,b=h.endAngle,k={min:e,max:n,starAngle:p,endAngle:b},R=0;R<a.length;R++){var Y=this.valueToAngle(a[R],k),V=this.valueToAngle(a[R+1],k);if(V>=Y){var Z=this.getPath(Y,V),it=(0,y.deepMix)({fill:u[R]},s);this.drawRing(Z,it)}}},drawBottomRing:function(){var t=this.getAngleRange(),e=t.starAngle,n=t.endAngle,a=this.gauge.options.rangeBackgroundStyle,o=this.getPath(e,n);this.drawRing(o,a)},drawCurrentRing:function(t){var e=this.getAngleRange().starAngle,n=this.gauge.rangeStyle,a=this.getPath(e,t);this.drawRing(a,n)},drawInSideAxis:function(){for(var t=this.gauge.options,e=t.min,n=t.max,a=t.axis,o=this.getAngleRange(),s=o.starAngle,u=o.endAngle,h={min:e,max:n,starAngle:s,endAngle:u},p=(n-e)/a.tickCount,b=0;b<a.tickCount;b++){var k=e+b*p,R=this.valueToAngle(k+p/2,h);this.drawRect(R,{length:a.tickLine.length,style:a.tickLine.style})}},drawAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,u=o.endAngle,h={min:n,max:a,starAngle:s,endAngle:u},p=(a-n)/(t.tickCount-1),b=0;b<t.tickCount;b++){var k=n+b*p,R=this.valueToAngle(k,h),Y=(0,y.clone)(t.tickLine.style);b%5!=0&&(Y.lineWidth=Y.lineWidth/2),this.drawRect(R,{length:b%5==0?t.tickLine.length:t.tickLine.length/2,style:Y})}},drawOutSideAxis:function(){for(var t=this.gauge.axis,e=this.gauge.options,n=e.min,a=e.max,o=this.getAngleRange(),s=o.starAngle,u=o.endAngle,h={min:n,max:a,starAngle:s,endAngle:u},p=(a-n)/(t.tickCount-1),b=0;b<t.tickCount;b++){var k=n+b*p,R=this.valueToAngle(k,h);this.drawRect(R,{length:t.tickLine.length,style:t.tickLine.style})}},drawBarGauge:function(t){for(var e=this,n=this.gauge.options,a=n.min,o=n.max,s=n.range,u=n.color,h=n.rangeStyle,p=n.rangeBackgroundStyle,b=u||Di().colors,k=this.getAngleRange(),R=k.starAngle,Y=k.endAngle,V={min:a,max:o,starAngle:R,endAngle:Y},Z=(Y-R)/(50-1),it=Z/3,tt=0;tt<50;tt++){var _t=R+tt*Z,It=this.getPath(_t-it/2,_t+it-it/2),Ht=p;if(s&&s.length){var le=s.map(function(me){return e.valueToAngle(me,V)}),xe=er(le,_t),Ce=Math.min(xe,s.length-1);Ht=(0,y.deepMix)({},{fill:b[Ce-1]},h)||p}else Ht=t>=_t?(0,y.deepMix)({},{fill:u},h):p;this.drawRing(It,Ht)}},getAngleRange:function(){var t=this.gauge.options.angle,e=90-(360-t)*.5,n=(270-90-e)*Math.PI/180,a=(270+90+e)*Math.PI/180;return{starAngle:n,endAngle:a}},valueToAngle:function(t,e){var n=e.min,a=e.max,o=e.starAngle,s=e.endAngle;if(t===a)return s;if(t===n)return o;var u=(t-n)/(a-n);a===n&&(u=1);var h=u*(s-o)+o;return h=Math.max(h,o),h=Math.min(h,s),h},drawRing:function(t,e){this.gauge.group.addShape("path",{attrs:(0,y.deepMix)({},{path:t},e)})},drawRect:function(t,e){var n=this.gauge.axis,a=(0,Q.__assign)((0,Q.__assign)({},n),e),o=a.offset,s=a.length,u=this.gauge.center,h;o<0?h=this.gauge.ringRadius-this.gauge.options.rangeSize+o:h=this.gauge.ringRadius+o;var p=h*Math.cos(t)+u.x,b=h*Math.sin(t)+u.y,k=(h+s)*Math.cos(t)+u.x,R=(h+s)*Math.sin(t)+u.y,Y=this.gauge.group.addShape("line",{attrs:(0,y.deepMix)({},{x1:p,y1:b,x2:k,y2:R},e.style)});Y.set("name","axis-tickLine")},getPath:function(t,e){var n=this.gauge.center,a=this.gauge.ringRadius,o=this.gauge.options.rangeSize,s=a*Math.cos(t)+n.x,u=a*Math.sin(t)+n.y,h=(a-o)*Math.cos(t)+n.x,p=(a-o)*Math.sin(t)+n.y,b=a*Math.cos(e)+n.x,k=a*Math.sin(e)+n.y,R=(a-o)*Math.cos(e)+n.x,Y=(a-o)*Math.sin(e)+n.y,V=Math.abs(t-e)>Math.PI?1:0;return[["M",s,u],["A",a,a,0,V,1,b,k],["L",R,Y],["A",a-o,a-o,0,V,0,h,p],["Z"]]},drawPivot:function(t){var e=this.getAngleRange(),n=e.starAngle,a=e.endAngle,o=this.gauge.options,s=o.radius,u=o.rangeSize,h=this.gauge.pivot,p=h.thickness,b=h.thickness/2.5,k=this.gauge.group,R=t.points[0],Y=this.parsePoint({x:0,y:0}),V=R.x*(a-n)+n,Z=(this.gauge.ringRadius-u)*s*Math.cos(V)+this.gauge.center.x,it=(this.gauge.ringRadius-u)*s*Math.sin(V)+this.gauge.center.y,tt={x:Z,y:it};if(h.base.visible&&k.addShape("circle",{attrs:(0,y.deepMix)({},{x:Y.x,y:Y.y,r:h.base.size?h.base.size/2:p*2.2},h.base.style)}),h.pointer.visible){var _t={x:Y.x-tt.x,y:Y.y-tt.y},It=Math.sqrt(_t.x*_t.x+_t.y*_t.y);_t.x*=1/It,_t.y*=1/It;var Ht=-Math.PI/2,le=Math.cos(Ht)*_t.x-Math.sin(Ht)*_t.y,xe=Math.sin(Ht)*_t.x+Math.cos(Ht)*_t.y,Ce=Math.PI/2,me=Math.cos(Ce)*_t.x-Math.sin(Ce)*_t.y,Le=Math.sin(Ce)*_t.x+Math.cos(Ce)*_t.y,Ye=[["M",tt.x+le*b,tt.y+xe*b],["L",Y.x+le*p,Y.y+xe*p],["L",Y.x+me*p,Y.y+Le*p],["L",tt.x+me*b,tt.y+Le*b],["Z"]];k.addShape("path",{attrs:(0,y.deepMix)({},{path:Ye},h.pointer.style)}),k.addShape("circle",{attrs:{x:tt.x,y:tt.y,r:b,fill:h.pointer.style.fill}}),k.addShape("circle",{attrs:{x:Y.x,y:Y.y,r:p,fill:h.pointer.style.fill}})}h.pin.visible&&k.addShape("circle",{attrs:(0,y.deepMix)({},{x:Y.x,y:Y.y,r:b/1.2},h.pin.style)})}})},i}(),VS={range:"point",statistic:"annotation-text"},WS=Tt(VS);(0,y.assign)(pt,WS);var Hg=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.type="gauge",e}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{startAngle:-7/6,endAngle:1/6,rangeBackgroundStyle:{fill:"#f0f0f0"},rangeSize:24,statistic:{position:["50%","80%"]},axis:{visible:!0,offset:-10,tickCount:21,subTickCount:4,tickLine:{visible:!0,length:5,style:{stroke:"#aaa",lineWidth:2}},label:{visible:!0,offset:8,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}},pivot:{visible:!0,thickness:6,pin:{visible:!0,size:2,style:{fill:"#2E364B"}},base:{visible:!0,style:{fill:"#EEEEEE"}},pointer:{visible:!0,style:{fill:"#CFCFCF"}}}})},r.prototype.init=function(){var t=this.options,e=t.value,n=t.range,a=(n||[]).map(function(Y){return+Y}).sort(function(Y,V){return Y-V}),o=this.options,s=o.min,u=s===void 0?a[0]:s,h=o.max,p=h===void 0?a[a.length-1]:h,b=o.format,k=b===void 0?function(Y){return""+Y}:b,R=k(e);this.options.data=[{value:e||0}],this.options.valueText=R,this.options.min=u,this.options.max=p,this.options.format=k,this.initG2Shape(),i.prototype.init.call(this)},r.prototype.initG2Shape=function(){this.gaugeShape=new Xg((0,y.uniqueId)()),this.gaugeShape.setOption(this.type,(0,y.deepMix)({},this.options,{radius:.6,angle:240,textPosition:"100%"})),this.gaugeShape.render()},r.prototype.geometryParser=function(){return"gauge"},r.prototype.scale=function(){var t=this.options,e=t.min,n=t.max,a=t.format,o={value:{}};_i(o.value,{min:e,max:n,minLimit:e,maxLimit:n,nice:!0,formatter:a,tickInterval:20}),this.setConfig("scales",o),i.prototype.scale.call(this)},r.prototype.coord=function(){var t={type:"polar",cfg:{radius:1,startAngle:this.options.startAngle*Math.PI,endAngle:this.options.endAngle*Math.PI}};this.setConfig("coordinate",t)},r.prototype.axis=function(){var t=this.options.axis,e={value:{line:null,grid:null,tickLine:null}},n;t.offset<0?n=t.offset-this.options.rangeSize-t.tickLine.length-t.label.offset:n=t.offset+t.tickLine.length+t.label.offset,t.label.visible?e.value.label={offset:n,textStyle:t.label.style,autoRotate:!0}:e.value.label={style:{opacity:0}},e["1"]=!1,e.value=t.visible?e.value:!1,this.setConfig("axes",e)},r.prototype.addGeometry=function(){var t=this.options.pivot.pointer.style.fill||this.theme.defaultColor,e={type:"point",position:{fields:["value","1"]},shape:{values:["gauge"]},color:{values:[t]}};this.setConfig("geometry",e)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}this.setConfig("annotations",e)},r.prototype.renderStatistic=function(){var t=Math.max(this.options.width,this.options.height)/20,e=this.options.statistic,n={type:"text",content:e.text,top:!0,position:e.position,style:{fill:e.color,fontSize:e.size?e.size:t*1.2,textAlign:"center",textBaseline:"middle"}};return n},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,N)},r}(qn),hd=Hg;An("gauge",Hg);var jS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="gauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=hd.getDefaultOptions,r}(un),Vg=jS,Wg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="fanGauge",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{rangeColor:"#F6445A",rangeSize:70,axis:{visible:!0,offset:5,tickCount:10,subTickCount:4,tickLine:{visible:!0,length:3,style:{stroke:"#aaa",lineWidth:3}},label:{visible:!0,style:{fill:"#aaa",fontSize:16,textAlign:"center",textBaseline:"middle"}}}})},r.prototype.initG2Shape=function(){this.gaugeShape=new Xg((0,y.uniqueId)()),this.gaugeShape.setOption(this.type,(0,y.deepMix)({},this.options,{radius:1,angle:120,textPosition:"125%",bottomRatio:3.5})),this.gaugeShape.render()},r.prototype.axis=function(){var t={value:!1,1:!1};this.setConfig("axes",t)},r.prototype.annotation=function(){var t=this.options.statistic,e=[];if(t&&t.visible){var n=this.renderStatistic();e.push(n)}var a=this.renderSideText(),o=e.concat(a);this.setConfig("annotations",o)},r.prototype.renderSideText=function(){var t=this.options,e=t.max,n=t.min,a=t.format,o=t.rangeSize,s=t.axis,u=12;return[n,e].map(function(h,p){return{type:"text",top:!0,position:["50%","50%"],content:a(h),style:(0,y.deepMix)({},s.label.style,{textAlign:"center"}),offsetX:p?o:-o,offsetY:u}})},r}(hd),US=Wg;An("fanGauge",Wg);var ZS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="fanGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=US.getDefaultOptions,r}(un),jg=ZS,Ug=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="meterGauge",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{axis:{visible:!0,offset:-10,tickCount:25,subTickCount:4,tickLine:{visible:!0,length:2,style:{stroke:"#aaa",lineWidth:1}}}})},r}(hd),KS=Ug;An("meterGauge",Ug);var $S=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="meterGauge",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=KS.getDefaultOptions,r}(un),Zg=$S,QS=v(85239),So=v.n(QS),zO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="donut",i.prototype.createLayers.call(this,e),So()(!1,'Please use "Donut" instead of "Ring" which was not recommended.')},r.getDefaultOptions=Ag.getDefaultOptions,r}(un),XO=null,HO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedColumn",i.prototype.createLayers.call(this,e),So()(!1,'Please use "GroupedColumn" instead of "GroupColumn" which was not recommended.')},r.getDefaultOptions=qv.getDefaultOptions,r}(un),VO=null,WO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedBar",i.prototype.createLayers.call(this,e),So()(!1,'Please use "GroupedBar" instead of "GroupBar" which was not recommended.')},r.getDefaultOptions=vh.getDefaultOptions,r}(un),jO=null,UO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedArea",i.prototype.createLayers.call(this,e),So()(!1,'Please use "PercentStackedArea" instead of "PercentageStackArea" which was not recommended.')},r.getDefaultOptions=vi.getDefaultOptions,r}(un),ZO=null,KO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedBar",i.prototype.createLayers.call(this,e),So()(!1,'Please use "PercentStackedBar" instead of "PercentageStackBar" which was not recommended.')},r.getDefaultOptions=yh.getDefaultOptions,r}(un),$O=null,QO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="percentStackedColumn",i.prototype.createLayers.call(this,e),So()(!1,'Please use "PercentStackedColumn" instead of "PercentageStackColumn" which was not recommended.')},r.getDefaultOptions=Hp.getDefaultOptions,r}(un),JO=null,qO=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedArea",i.prototype.createLayers.call(this,e),So()(!1,'Please use "StackedArea" instead of "StackArea" which was not recommended.')},r.getDefaultOptions=kn.getDefaultOptions,r}(un),tk=null,ek=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedBar",i.prototype.createLayers.call(this,e),So()(!1,'Please use "StackedBar" instead of "StackBar" which was not recommended.')},r.getDefaultOptions=El.getDefaultOptions,r}(un),rk=null,nk=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedColumn",i.prototype.createLayers.call(this,e),So()(!1,'Please use "StackedColumn" instead of "StackColumn" which was not recommended.')},r.getDefaultOptions=Dh.getDefaultOptions,r}(un),ik=null,JS=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{title:{visible:!1},description:{visible:!1},padding:[0,0,0,0],legend:{visible:!1},xAxis:{visible:!1},yAxis:{visible:!1},tooltip:{visible:!1}})},r.prototype.coord=function(){},r.prototype.addGeometry=function(){},r.prototype.annotation=function(){var t=this,e=this.options,n=[],a={line:{style:{lineWidth:1,stroke:"#66d6a8"}}};(0,y.each)(e.guideLine,function(o){var s=Ln("guideLine",{plot:t,cfg:(0,y.deepMix)({},a,o)});n.push(s)}),this.setConfig("annotations",n)},r}(qn),Vh=JS,qS=function(){function i(r){(0,y.assign)(this,r),this.init()}return i.prototype.destroy=function(){this.shape&&this.shape.destroy()},i.prototype.update=function(r,t,e){var n={};if((0,y.assign)(this,r),this.coord=this.view.geometries[0].coordinate,r.value){var a=this.coord.convert({x:0,y:this.value}).x,o=[1,0,0,0,1,0,a,0,1];n.matrix=o}if(r.style){var s=this.shape,u=s.attrs,h=(0,y.deepMix)({},u,r.style);n=(0,y.deepMix)({},h,n)}this.shape.stopAnimate(),this.shape.animate(n,t,e)},i.prototype.init=function(){this.coord=this.view.geometries[0].coordinate,this.container=this.view.foregroundGroup.addGroup();var r=this.coord.convert({x:0,y:this.value}).x,t=this.coord.center.y-this.progressSize/2-2,e=this.coord.center.y+this.progressSize/2+2,n=(0,y.deepMix)({},{stroke:"grey",lineWidth:1},this.style);this.shape=this.container.addShape("path",{attrs:(0,Q.__assign)({path:[["M",0,t],["L",0,e]]},n),name:"progress-marker"}),this.shape.move(r,0),this.canvas.draw()},i}(),Kg=qS,t2={progress:"interval"},e2=Tt(t2);(0,y.assign)(pt,e2);var r2={progress:"interval"},n2={interval:"progress"},$g=["#55A6F3","#E8EDF3"],Qg=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="progress",t.isEntered=!1,t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barSize:t.size?t.size:this.getSize(),barStyle:t.progressStyle,color:this.parseColorProps(t)||$g};t=(0,y.mix)(t,e)},r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.beforeInit=function(){var t=this.options.percent;if(!(0,y.isNumber)(t))throw new Error("Percent value is required, and the type of percent must be Number.")},r.prototype.update=function(t){var e=this.options;if((0,y.hasKey)(t,"percent")&&(e.percent=t.percent,this.changeData(this.processData())),t.style&&(this.styleUpdateAnimation(t.style),this.updateColorConfigByStyle(t.style)),t.color){var n=void 0;(0,y.isArray)(t.color)?(this.options.color=t.color,n=[{fill:t.color[0]},{fill:t.color[1]}]):(this.options.color[0]=t.color,n={fill:t.color}),this.styleUpdateAnimation(n)}t.marker&&(this.updateMarkers(t.marker),this.options.marker=t.marker)},r.prototype.destroy=function(){this.markers&&this.markers.length>0&&((0,y.each)(this.markers,function(t){t.destroy()}),this.markers=[]),i.prototype.destroy.call(this)},r.prototype.afterRender=function(){var t=this;this.options.marker&&!this.markers&&(this.markers=[],(0,y.each)(this.options.marker,function(s){var u=(0,y.mix)({canvas:t.canvas,view:t.view,progressSize:t.options.barSize},s),h=new Kg(u);t.markers.push(h)}));var e=this.view.geometries[0].container,n=e.getBBox(),a=e.addShape("rect",{attrs:{width:n.width,height:n.height,x:n.minX,y:n.minY,fill:"rgba(0,0,0,0)"}});this.canvas.draw(),a.on("mouseenter",function(s){t.isEntered=!0,t.view.emit("progress:mouseenter",s)}),a.on("mouseleave",function(s){t.isEntered=!1,t.view.emit("progress:mouseleave",s)});var o=this.canvas.get("container");o.addEventListener("mouseleave",function(s){t.isEntered&&(t.view.emit("progress:mouseleave",s),t.isEntered=!1)})},r.prototype.geometryParser=function(t,e){return t==="g2"?r2[e]:n2[e]},r.prototype.coord=function(){this.setConfig("coordinate",{actions:[["transpose"]]})},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.yField,t.xField],plot:this});e.adjust=[{type:"stack"}],(0,y.has)(t,"animation")&&(e.animate=t.animation),this.setConfig("geometry",e)},r.prototype.parseEvents=function(t){t?i.prototype.parseEvents.call(this,t):i.prototype.parseEvents.call(this,G)},r.prototype.parseColorProps=function(t){var e;if(t.color)if((0,y.isFunction)(t.color)?e=t.color(t.percent):e=t.color,(0,y.isString)(e)){var n=(0,y.clone)($g);return n[0]=e,n}else return e;return t.color},r.prototype.processData=function(){var t=this.options,e=[{type:"current",value:t.percent},{type:"rest",value:1-t.percent}];return e},r.prototype.updateMarkers=function(t){var e=t.length,n=this.getUpdateAnimationOptions();if((0,y.each)(this.markers,function(h,p){p>e-1?h.destroy():h.update(t[p],n.duration,n.easing)}),this.markers.length<e)for(var a=this.markers.length,o=a;o<e;o++){var s=(0,y.deepMix)({},{canvas:this.canvas,view:this.view,progressSize:this.options.barSize},t[o]),u=new Kg(s);this.markers.push(u)}},r.prototype.getSize=function(){var t=this.height;return t>=50?10:4},r.prototype.styleUpdateAnimation=function(t){var e=this.getUpdateAnimationOptions(),n=e.duration,a=e.easing,o=[],s=this.view,u=s.geometries;(0,y.each)(u,function(h){if(h.type==="interval"){var p=h.elements;(0,y.each)(p,function(b){o.push.apply(o,b.shape)})}}),(0,y.isArray)(t)?(0,y.each)(t,function(h,p){o[p].animate(h,n,a)}):o[0].animate(t,n,a)},r.prototype.getUpdateAnimationOptions=function(){var t=450,e="easeQuadInOut",n=this.options.animation;return n&&n.update&&(n.update.duration&&(t=n.update.duration),n.update.easing&&(e=n.update.easing)),{duration:t,easing:e}},r.prototype.updateColorConfigByStyle=function(t){var e=this;(0,y.isArray)(t)?(0,y.each)(t,function(n,a){n.fill&&(e.options.color[a]=n.fill)}):t.fill&&(this.options.color[0]=t.fill)},r}(Vh),Jg=Qg;An("progress",Qg);var i2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="progress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t,e){var n=this.layers[0];n.update(t,e)},r.getDefaultOptions=Jg.getDefaultOptions,r}(un),qg=i2,a2={ringProgress:"interval"},o2=Tt(a2);(0,y.assign)(pt,o2);var s2=["#55A6F3","#E8EDF3"],ty=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ringProgrsss",t}return r.prototype.processProps=function(){var t=this.options;t.data=this.processData();var e={padding:[0,0,0,0],xField:"value",yField:"1",stackField:"type",barStyle:t.progressStyle,color:this.parseColorProps(t)||s2};t=(0,y.mix)(t,e)},r.prototype.coord=function(){var t={type:"theta",cfg:{radius:1,innerRadius:this.getThickness(this.options.size)}};this.setConfig("coordinate",t)},r.prototype.annotation=function(){},r.prototype.addGeometry=function(){var t=this.options;this.ring=Ci("interval","main",{positionFields:[t.yField,t.xField],plot:this}),this.ring.adjust=[{type:"stack"}],this.setConfig("geometry",this.ring)},r.prototype.animation=function(){this.ring.animate={appear:{duration:1e3}}},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,W)},r.prototype.getThickness=function(t){var e=this.width,n=this.height,a=Math.min(e,n);return t?1-t/a:a>=60?1-20/a:1-10/a},r}(Jg),l2=ty;An("ringProgress",ty);var u2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="ringProgress",i.prototype.createLayers.call(this,e)},r.prototype.update=function(t){var e=this.layers[0];e.update(t)},r.getDefaultOptions=l2.getDefaultOptions,r}(un),ey=u2,h2={onColumnClick:"interval:click",onColumnDblclick:"interval:dblclick",onColumnMousemove:"interval:mousemove",onColumnMousedown:"interval:mousedown",onColumnMouseup:"interval:mouseup",onColumnMouseenter:"interval:mouseenter",onColumnMouseleave:"interval:mouseleave",onColumnContextmenu:"interval:contextmenu"};(0,y.assign)(pt,h2);var f2=.6,c2={column:"interval"},v2={interval:"column"},ry=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyColumn",t}return r.prototype.init=function(){this.processProps(),i.prototype.init.call(this)},r.prototype.geometryParser=function(t,e){return t==="g2"?c2[e]:v2[e]},r.prototype.scale=function(){var t=this.options,e={};e[t.xField]={type:"cat"},this.setConfig("scales",e)},r.prototype.addGeometry=function(){var t=this.options,e=Ci("interval","main",{positionFields:[t.xField,t.yField],plot:this});this.setConfig("geometry",e)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,$)},r.prototype.processProps=function(){var t={padding:[0,0,0,0],columnSize:this.getSize()};this.options=(0,y.mix)(this.options,t)},r.prototype.getSize=function(){var t=this.options,e=this.getColumnNum(t.data,t.xField),n=this.width;return n/e*f2},r.prototype.getColumnNum=function(t,e){var n=[];return(0,y.each)(t,function(a){var o=a[e];n.indexOf(o)<0&&n.push(o)}),n.length},r}(Vh),d2=ry;An("tinyColumn",ry);var p2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="tinyColumn",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=d2.getDefaultOptions,r}(un),ny=p2,g2={onAreaClick:"area:click",onAreaDblclick:"area:dblclick",onAreaMousemove:"area:mousemove",onAreaMousedown:"area:mousedown",onAreaMouseup:"area:mouseup",onAreaMouseenter:"area:mouseenter",onAreaMouseleave:"area:mouseleave",onAreaContextmenu:"area:contextmenu",onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,y.assign)(pt,g2);var y2={area:"area",line:"line"},iy=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyArea",t}return r.prototype.geometryParser=function(t,e){return y2[e]},r.prototype.addGeometry=function(){this.area=Ci("area","mini",{plot:this}),this.setConfig("geometry",this.area),this.line=Ci("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,H)},r}(Vh),m2=iy;An("tinyArea",iy);var x2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="tinyArea",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=m2.getDefaultOptions,r}(un),ay=x2,b2={onLineClick:"line:click",onLineDblclick:"line:dblclick",onLineMousemove:"line:mousemove",onLineMousedown:"line:mousedown",onLineMouseup:"line:mouseup",onLineMouseenter:"line:mouseenter",onLineMouseleave:"line:mouseleave",onLineContextmenu:"line:contextmenu"};(0,y.assign)(pt,b2);var w2={line:"line"},oy=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="tinyLine",t}return r.prototype.geometryParser=function(t,e){return w2[e]},r.prototype.addGeometry=function(){this.line=Ci("line","mini",{plot:this}),this.setConfig("geometry",this.line)},r.prototype.parseEvents=function(){i.prototype.parseEvents.call(this,j)},r}(Vh),S2=oy;An("tinyLine",oy);var C2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="tinyLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=S2.getDefaultOptions,r}(un),sy=C2,fd=v(41026),cd=5,M2=function(i){(0,Q.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.geomLayers=[],e.legends=[],e.requiredField=["xField","yField"],e.options=e.getOptions(t),e.initialOptions=(0,y.deepMix)({},t),e.themeController=new Zs,e}return r.getDefaultOptions=function(){return{title:{visible:!1,alignTo:"left",text:""},description:{visible:!1,text:"",alignTo:"left"}}},r.prototype.getOptions=function(t){var e=this.options||{},n=i.prototype.getOptions.call(this,t),a=this.constructor.getDefaultOptions(t);return(0,y.deepMix)({},n,a,e,t)},r.prototype.checkData=function(){for(var t=this,e,n,a=this.options,o=a.data,s=a.xField,u=a.yField,h=0;h<this.requiredField.length;h++){var p=this.requiredField[h];if(!(0,y.hasKey)(this.options,p))return!1}return!(!(0,y.isArray)(u)||u.length<2||!(0,y.isArray)(o)||o.length===0||((e=o[0])===null||e===void 0?void 0:e.length)===0&&((n=o[1])===null||n===void 0?void 0:n.length)===0||((0,y.each)(o,function(b,k){if(!(0,y.isArray)(b)||b.length===0){var R=t.getMockData(k);o[k]=R}}),!o[0][0][s]||!o[1][0][s]))},r.prototype.init=function(){i.prototype.init.call(this),this.theme=this.themeController.getTheme(this.options,this.type),this.drawTitle(),this.drawDescription()},r.prototype.updateConfig=function(t){this.doDestroy(),this.options=this.getOptions(t),this.processOptions(this.options)},r.prototype.changeData=function(t){t&&t.length<2||!(0,y.isArray)(t[0])||(0,y.each)(this.geomLayers,function(e,n){e.changeData(t[n])})},r.prototype.changeDataByIndex=function(t,e){if(!(0,y.isArray)(t[0])){var n=this.geomLayers[e];n.changeData(t)}},r.prototype.doDestroy=function(){(0,y.each)(this.geomLayers,function(t){t.doDestroy()}),this.geomLayers=[],(0,y.each)(this.legends,function(t){t.destroy()}),this.legends=[]},r.prototype.createLayer=function(t,e,n){var a=this.getViewRange(),o=new t((0,Q.__assign)({canvas:this.canvas,container:this.container,x:a.minX,y:a.minY,width:a.width,height:a.height,data:e},n));return this.geomLayers.push(o),o},r.prototype.getLeftYAxisMax=function(){var t=this.getScaleData(0),e=this.getScaleData(1);return t.min==0&&t.max===0?Math.max(e.max,0):t.max},r.prototype.yAxis=function(t){var e=this.getScaleData(0),n=this.options.yAxis,a=t===0?n.leftConfig:n.rightConfig,o=this.colors[t],s=(0,y.clone)(a),u={title:"stroke",line:"stroke",label:"fill",tickLine:"stroke"};a.visible&&a.colorMapping&&(0,y.each)(s,function(p,b){if(!(0,y.isString)(p)&&(0,y.hasKey)(u,b)){var k=u[b];p.style||(p.style={}),p.style[k]=o}}),a.visible||(s.title.visible=!1,s.tickLine.visible=!1,s.label.visible=!1,s.line.visible=!1,s.visible=!0);var h=this.getYAxisGlobalConfig();return t===0&&e.max===0&&e.min===0&&(s.max=this.getLeftYAxisMax()),(0,y.deepMix)({},h,s)},r.prototype.getTicks=function(){for(var t=this.options.yAxis,e=this.getScaleData(0),n=(0,Fe.getScale)("linear"),a=new n((0,y.deepMix)({},{min:0,max:this.getLeftYAxisMax(),nice:!0,values:e.values},{tickCount:t.tickCount})),o=a.ticks.length,s=t.max?a.max:this.getScaleData(1).max,u=s/(o-1),h=[],p=0;p<o;p++){var b=p*u;Number.isInteger(b)||(b=parseFloat(b.toFixed(1))),h.push(b)}return h},r.prototype.getScaleData=function(t){var e=this.options,n=e.data,a=e.yField,o=e.yAxis,s=[];(0,y.each)(n[t],function(p){s.push(p[a[t]])}),s.sort(function(p,b){return p-b});var u=s[0],h=o.max?o.max:s[s.length-1];return{min:u,max:h,values:s}},r.prototype.getDataByXField=function(t,e){var n=this.options,a=n.data,o=n.xField,s=a[e];return s.filter(function(u){return u[o]===t})},r.prototype.getYAxisGlobalConfig=function(){var t=this.options.yAxis,e=t.min,n=t.max,a=t.tickCount;return{min:e,max:n,tickCount:a}},r.prototype.adjustLayout=function(){var t=this,e,n,a=Di().bleeding;(0,y.isArray)(a)&&(0,y.each)(a,function(R,Y){typeof a[Y]=="function"&&(a[Y]=a[Y](t.options))});var o=this.getViewRange(),s=this.transfromPadding(this.geomLayers[0].options.padding),u=this.transfromPadding(this.geomLayers[1].options.padding),h=0,p,b;((e=this.options.legend)===null||e===void 0?void 0:e.visible)&&(p=this.legends[0].getLayoutBBox(),b=this.legends[1].getLayoutBBox(),h=p.height+cd*2);var k=s.map(function(R,Y){return Y===0?Math.max.apply(null,[R+h,u[Y]]):Math.max.apply(null,[R,u[Y]])});this.geomLayers[0].updateConfig({padding:k}),this.geomLayers[0].render(),this.geomLayers[1].updateConfig({padding:k}),this.geomLayers[1].render(),((n=this.options.legend)===null||n===void 0?void 0:n.visible)&&(this.legends[0].setLocation({x:a[3],y:o.minY+cd}),this.legends[1].setLocation({x:o.maxX-a[1]-b.width,y:o.minY+cd}))},r.prototype.transfromPadding=function(t){return typeof t=="string"||typeof t=="number"?[Number(t)]:t},r.prototype.legendFilter=function(t){var e=this,n=this.legends[t],a=n.get("group");a.on("click",function(){var o=n.get("items")[0];o.unchecked?(n.setItemState(o,"unchecked",!1),e.showLayer(t)):(n.setItemState(o,"unchecked",!0),e.hideLayer(t))})},r.prototype.hideLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!1),this.setGeometryVisibility(a,!1),this.canvas.draw()},r.prototype.showLayer=function(t){var e=this.geomLayers[t],n=this.options.yField[t],a=e.view,o=this.getYAxisContainer(a,n);o&&o.set("visible",!0),this.setGeometryVisibility(a,!0),this.canvas.draw()},r.prototype.setGeometryVisibility=function(t,e){(0,y.each)(t.geometries,function(n){var a=n.container,o=n.labelsContainer;a&&a.set("visible",e),o&&o.set("visible",e)})},r.prototype.getYAxisContainer=function(t,e){var n,a=t.controllers.filter(function(u){return(0,y.hasKey)(u,"axisContainer")})[0];if(a){var o=a,s=o.axisContainer.get("children");(0,y.each)(s,function(u){var h=u.get("component").get("field");h===e&&(n=u)})}return n},r.prototype.getUnCheckedValue=function(){var t=[];return(0,y.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,y.each)(n,function(a){t.push(a.name)})}),t},r.prototype.drawTitle=function(){var t=this.options,e=this.layerBBox;if(this.title&&(this.title.destroy(),this.title=null),ut(t.title)){var n=this.width,a=this.theme,o=new Sr({leftMargin:e.minX+a.title.padding[3],rightMargin:e.maxX-a.title.padding[1],topMargin:e.minY+a.title.padding[0],text:t.title.text,style:(0,y.mix)(a.title,t.title.style),wrapperWidth:n-a.title.padding[3]-a.title.padding[1],container:this.container.addGroup(),theme:a,index:ut(t.description)?0:1,plot:this,alignTo:t.title.alignTo,name:"title"});this.title=o}},r.prototype.drawDescription=function(){var t=this.options,e=this.layerBBox;if(this.description&&(this.description.destroy(),this.description=null),ut(t.description)){var n=this.width,a=this.theme,o=0;if(this.title){var s=this.title.getBBox();o+=s.minY+s.height,o+=a.description.padding[0]}else o+=e.minY+a.title.padding[0];var u=new Sr({leftMargin:e.minX+a.description.padding[3],topMargin:o,rightMargin:e.maxX-a.title.padding[1],text:t.description.text,style:(0,y.mix)(a.description,t.description.style),wrapperWidth:n-a.description.padding[3]-a.description.padding[1],container:this.container.addGroup(),theme:a,index:1,plot:this,alignTo:t.description.alignTo,name:"description"});this.description=u}},r.prototype.getViewRange=function(){this.layerBBox||(this.layerBBox=new at(this.x,this.y,this.width,this.height));var t=this.layerBBox.minX,e=this.layerBBox.maxX,n=this.layerBBox.minY,a=this.layerBBox.maxY,o=[this.title,this.description];return(0,y.each)(o,function(s){if(s){var u=s.position,h=s.getBBox(),p=h.minX,b=h.maxX,k=h.minY,R=h.maxY;R>=n&&R<=a&&u==="top"&&(n=R),k>=n&&k<=a&&u==="bottom"&&(a=k),b>t&&b<=e&&u==="left"&&(t=b),p>=t&&b<=e&&u==="right"&&(e=p)}}),new at(t,n,e-t,a-n)},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o={};return o[n]="null",o[a[t]]=0,[o]},r}(Pt),ly=M2,uy={lineSize:2,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},hy={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,offset:12}},fy=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dualLine",t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{legend:{visible:!0},yAxis:{leftConfig:hy,rightConfig:hy},lineConfigs:[(0,y.deepMix)({},uy,{color:"#5B8FF9"}),(0,y.deepMix)({},uy,{color:"#e76c5e"})]})},r.prototype.init=function(){var t=this;if(i.prototype.init.call(this),!!this.checkData()){var e=this.options,n=e.data,a=e.meta,o=e.xField,s=e.yField,u=e.xAxis,h=e.tooltip,p=e.lineConfigs,b=e.legend,k=e.events,R=e.customMeta;this.colors=[p[0].color,p[1].color];var Y=this.getYAxisGlobalConfig(),V=this.createLayer(Oo,n[0],(0,Q.__assign)({meta:a,xField:o,yField:s[0],xAxis:{visible:!1},yAxis:(0,y.deepMix)({},Y,{grid:{visible:!1},nice:!0},this.yAxis(0)),tooltip:{visible:!1},events:k},p[0]));V.render();var Z={};Z[s[1]]={ticks:this.getTicks()};var it=this.createLayer(Oo,n[1],(0,Q.__assign)({xField:o,yField:s[1],meta:R?a:(0,y.deepMix)({},a,Z),serieField:s[1],xAxis:u,yAxis:(0,y.deepMix)({},Y,{position:"right",nice:!1},this.yAxis(1)),tooltip:(0,y.deepMix)({},{showMarkers:!1,custom:{onChange:function(tt,_t){t.tooltip(tt,_t)}}},h),events:k},p[1]));it.render(),b.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.tooltip=function(t,e){var n=this.getUnCheckedValue();if(n.length===this.colors.length){t.style.display="none";return}else t.style.display="block";var a=this.options,o=a.yField,s=a.legend,u=(0,y.clone)(e.items[0]),h=this.getDataByXField(e.title,0)[0];h&&(0,y.findIndex)(e.items,function(p){return p.name===o[0]})<0&&e.items.push((0,Q.__assign)((0,Q.__assign)({},u),{mappingData:(0,y.deepMix)({},u.mappingData,{_origin:h}),data:h,name:o[0],value:h[o[0]],color:this.colors[0]})),s.visible&&(0,y.each)(this.legends,function(p,b){var k=p.get("items")[0];if(k.unchecked){var R=b===0?1:0;e.items.splice(R,1)}})},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),u=a;(0,y.each)(this.geomLayers,function(h,p){var b=(0,y.deepMix)({},{symbol:"circle",style:{r:4,fill:o[p]}},u.marker),k=[{name:n[p],unchecked:!1,marker:b}],R=new fd.Legend.Category({id:t.type,container:s,x:0,y:0,items:k,updateAutoRender:!0,itemBackground:null,itemName:u.text});R.init(),R.render(),t.legends.push(R)}),(0,y.each)(this.geomLayers,function(h,p){t.legendFilter(p)})},r}(ly),E2=fy;An("dualLine",fy);var A2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="dualLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=E2.getDefaultOptions,r}(un),cy=A2,T2={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},P2={color:"#5B8FF9"},vy={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},dy=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="columnLine",t.legends=[],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:vy,rightConfig:vy},lineConfig:T2,columnConfig:P2,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions;if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var s=Di(),u=s.colors,h=s.colors_20,p=this.getValueBySeriesField(),b=p.length>u.length?h:u,k=[];(0,y.each)(p,function(R,Y){k.push(b[Y+1])}),a.lineConfig.color=k}},r.prototype.init=function(){if(i.prototype.init.call(this),!!this.checkData()){var t=this.options,e=t.data,n=t.meta,a=t.xField,o=t.yField,s=t.lineSeriesField,u=t.legend,h=t.lineConfig,p=t.columnConfig,b=t.events,k=t.customMeta;this.colors=[p.color,h.color],this.drawColumn();var R={};R[o[1]]={ticks:this.getTicks()};var Y=this.createLayer(Oo,e[1],(0,Q.__assign)({xField:a,yField:o[1],seriesField:s,meta:k?n:(0,y.deepMix)({},n,R),xAxis:{visible:!1},yAxis:(0,y.deepMix)({},{position:"right",grid:{visible:!1},nice:!0},this.yAxis(1)),tooltip:{visible:!1},legend:{visible:!1},events:b},h));Y.render(),u.visible&&this.customLegend(),this.adjustLayout()}},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.xAxis,u=e.tooltip,h=e.columnConfig,p=e.meta,b=e.events,k=this.createLayer(Ts,n[0],(0,Q.__assign)({xField:a,yField:o[0],meta:p,xAxis:s,yAxis:(0,y.deepMix)({},{grid:{visible:!0},nice:!0},this.yAxis(0)),tooltip:(0,y.deepMix)({},{showMarkers:!1,custom:{onChange:function(R,Y){t.tooltip(R,Y)}}},u),events:b},h));k.render()},r.prototype.tooltip=function(t,e){var n=this,a=this.options,o=a.xField,s=a.yField,u=a.tooltip,h=(0,y.clone)(e.items[0]),p=this.getDataByXField(e.title,1),b=(0,y.get)(u,"formatter");if(p&&(0,y.each)(p,function(Z,it){var tt=n.geomLayers[1].options.seriesField,_t=tt?Z[tt]:s[1],It=b?b(Z[o],Z[s[1]],Z[tt]):{name:_t,value:Z[s[1]]};e.items.push((0,Q.__assign)((0,Q.__assign)((0,Q.__assign)((0,Q.__assign)({},h),{mappingData:(0,y.deepMix)({},h.mappingData,{_origin:p}),data:Z}),It),{color:(0,y.isArray)(n.colors[1])?n.colors[1][it]:n.colors[1]}))}),this.options.legend.visible){var k=this.getUnCheckedValue(),R=this.legends[0].get("items").length+this.legends[1].get("items").length;if(k.length===R){t.style.display="none";return}else t.style.display="block";var Y=[],V=[];(0,y.each)(e.items,function(Z){var it=Z.name;!(0,y.contains)(Y,it)&&!(0,y.contains)(k,it)&&(Y.push(it),V.push(Z))}),(0,y.each)(e.items,function(Z,it){it<V.length?e.items[it]=V[it]:e.items.pop()})}},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),u=a,h=["square","circle"];(0,y.each)(this.geomLayers,function(p,b){var k;if(p.options.seriesField){var R=t.getValueBySeriesField();k=t.createNormalLegend(R,h[b],o[b],u,s)}else k=t.createSingleLegend(n[b],h[b],o[b],u,s);t.legends.push(k)}),(0,y.each)(this.geomLayers,function(p,b){p.options.seriesField?t.multipleLegendFilter(b,p.options.seriesField):t.legendFilter(b)})},r.prototype.createSingleLegend=function(t,e,n,a,o){var s=(0,y.deepMix)({},{symbol:e,style:{r:4,fill:n}},a.marker),u=[{name:t,unchecked:!1,marker:s}],h=new fd.Legend.Category({id:this.type,container:o,x:0,y:0,items:u,updateAutoRender:!0,itemBackground:null,itemName:a.text});return h.init(),h.render(),h},r.prototype.createNormalLegend=function(t,e,n,a,o){var s=[];(0,y.each)(t,function(h,p){s.push({name:h,unchecked:!1,marker:{symbol:e,style:{r:4,fill:n[p]}}})});var u=new fd.Legend.Category({id:this.type,container:o,x:0,y:0,items:s,updateAutoRender:!0,itemBackground:null,itemName:a.text,offsetX:0});return u.init(),u.render(),u},r.prototype.multipleLegendFilter=function(t,e){var n=this,a=this.legends[t],o=[],s=a.get("group"),u=!1;s.on("click",function(h){var p=n.geomLayers[t].view,b=h.target.get("delegateObject").item;b.unchecked?(u===!0&&(n.showLayer(t),u=!1),(0,y.pull)(o,b.name),p.filter(b.value,function(k){return!(0,y.contains)(o,k)}),p.render(),a.setItemState(b,"unchecked",!1)):(a.setItemState(b,"unchecked",!0),o.push(b.name),o.length===n.legends[t].get("items").length?(n.hideLayer(t),u=!0):(p.filter(e,function(k){return!(0,y.contains)(o,k)}),p.render())),n.canvas.draw()})},r.prototype.getValueBySeriesField=function(){var t=this.options,e=t.lineSeriesField,n=t.data,a=n[1],o=[];return(0,y.each)(a,function(s){var u=s[e];(0,y.contains)(o,u)||o.push(u)}),o},r}(ly),vd=dy;An("columnLine",dy);var L2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="columnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=vd.getDefaultOptions,r}(un),py=L2,_2={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},I2={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},gy={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},yy=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnGroupField"],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,y.deepMix)({},gy,{colorMapping:!1}),rightConfig:gy},lineConfig:_2,columnConfig:I2,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this,a=n.options,o=n.initialOptions,s=this.getValueByGroupField();if(a.lineSeriesField&&(a.yAxis.rightConfig.colorMapping=!1,((t=o.lineConfig)===null||t===void 0?void 0:t.lineSize)||(a.lineConfig.lineSize=3),!((e=o.lineConfig)===null||e===void 0?void 0:e.color))){var u=Di(),h=u.colors,p=u.colors_20,b=this.getValueBySeriesField(),k=b.length>h.length?p:h,R=[],Y=s.length;(0,y.each)(b,function(Z,it){R.push(k[it+Y])}),a.lineConfig.color=R}var V=this.options.columnConfig.color;this.options.columnConfig.color=V.slice(0,s.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.columnGroupField,u=e.xAxis,h=e.tooltip,p=e.columnConfig,b=e.events,k=this.createLayer(qv,n[0],(0,Q.__assign)({xField:a,yField:o[0],groupField:s,xAxis:u,yAxis:(0,y.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,y.deepMix)({},h,{showMarkers:!1,custom:{onChange:function(R,Y){t.tooltip(R,Y)}}}),events:b},p));k.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),u=a,h=["square","circle"];(0,y.each)(this.geomLayers,function(p,b){var k;if(p.options.seriesField){var R=t.getValueBySeriesField();k=t.createNormalLegend(R,h[b],o[b],u,s)}else if(p.options.groupField){var R=t.getValueByGroupField();k=t.createNormalLegend(R,h[b],o[b],u,s)}else k=t.createSingleLegend(n[b],h[b],o[b],u,s);t.legends.push(k)}),(0,y.each)(this.geomLayers,function(p,b){p.options.seriesField?t.multipleLegendFilter(b,p.options.seriesField):p.options.groupField?t.multipleLegendFilter(b,p.options.groupField):t.legendFilter(b)})},r.prototype.getValueByGroupField=function(){var t=this.options,e=t.columnGroupField,n=t.data,a=n[0],o=[];return(0,y.each)(a,function(s){var u=s[e];(0,y.contains)(o,u)||o.push(u)}),o},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnGroupField,s={};s[n]="null_1",s[a[t]]=0,s[o]="null_a";var u={};return u[n]="null_1",u[a[t]]=1,u[o]="null_a",[s,u]},r}(vd),O2=yy;An("groupedColumnLine",yy);var k2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="groupedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=O2.getDefaultOptions,r}(un),my=k2,B2={color:"#f5bc32",lineSize:4,connectNull:!0,point:{visible:!1,size:3,shape:"circle",style:{stroke:"#fff"}},label:{visible:!1}},D2={color:["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E8684A","#6DC8EC","#9270CA","#FF9D4D","#269A99","#FF99C3"]},xy={visible:!0,colorMapping:!0,grid:{visible:!0},line:{visible:!1},tickLine:{visible:!1},label:{visible:!0,autoHide:!0,autoRotate:!1},title:{autoRotate:!0,visible:!1,spacing:12}},by=function(i){(0,Q.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="groupedColumnLine",t.requiredField=["xField","yField","columnStackField"],t}return r.getDefaultOptions=function(){return(0,y.deepMix)({},i.getDefaultOptions.call(this),{yAxis:{leftConfig:(0,y.deepMix)({},xy,{colorMapping:!1}),rightConfig:xy},lineConfig:B2,columnConfig:D2,legend:{visible:!0}})},r.prototype.beforeInit=function(){var t,e,n=this.getValueByStackField(),a=this,o=a.options,s=a.initialOptions;if(o.lineSeriesField&&(o.yAxis.rightConfig.colorMapping=!1,((t=s.lineConfig)===null||t===void 0?void 0:t.lineSize)||(o.lineConfig.lineSize=3),!((e=s.lineConfig)===null||e===void 0?void 0:e.color))){var u=Di(),h=u.colors,p=u.colors_20,b=this.getValueBySeriesField(),k=b.length>h.length?p:h,R=[],Y=n.length;(0,y.each)(b,function(Z,it){R.push(k[it+Y])}),o.lineConfig.color=R}var V=this.options.columnConfig.color;this.options.columnConfig.color=V.slice(0,n.length)},r.prototype.drawColumn=function(){var t=this,e=this.options,n=e.data,a=e.xField,o=e.yField,s=e.columnStackField,u=e.xAxis,h=e.tooltip,p=e.columnConfig,b=e.events,k=this.createLayer(Dh,n[0],(0,Q.__assign)({xField:a,yField:o[0],stackField:s,xAxis:u,yAxis:(0,y.deepMix)({},this.yAxis(0),{grid:{visible:!0},nice:!0}),legend:{visible:!1},tooltip:(0,y.deepMix)({},h,{showMarkers:!1,custom:{onChange:function(R,Y){t.tooltip(R,Y)}}}),events:b},p));k.render()},r.prototype.customLegend=function(){var t=this,e=this.options,n=e.yField,a=e.legend,o=this.colors,s=this.container.addGroup(),u=a,h=["square","circle"];(0,y.each)(this.geomLayers,function(p,b){var k;if(p.options.seriesField){var R=t.getValueBySeriesField();k=t.createNormalLegend(R,h[b],o[b],u,s)}else if(p.options.stackField){var R=t.getValueByStackField();k=t.createNormalLegend(R,h[b],o[b],u,s)}else k=t.createSingleLegend(n[b],h[b],o[b],u,s);t.legends.push(k)}),(0,y.each)(this.geomLayers,function(p,b){p.options.seriesField?t.multipleLegendFilter(b,p.options.seriesField):p.options.stackField?t.multipleLegendFilter(b,p.options.stackField):t.legendFilter(b)})},r.prototype.getValueByStackField=function(){var t=this.options,e=t.columnStackField,n=t.data,a=n[0],o=[];return(0,y.each)(a,function(s){var u=s[e];(0,y.contains)(o,u)||o.push(u)}),o},r.prototype.getUnCheckedValue=function(){var t=[];return(0,y.each)(this.legends,function(e){var n=e.getItemsByState("unchecked");(0,y.each)(n,function(a){t.push(a.name)})}),t},r.prototype.getMockData=function(t){var e=this.options,n=e.xField,a=e.yField,o=e.columnStackField,s={};s[n]="null_1",s[a[t]]=0,s[o]="null_a";var u={};return u[n]="null_1",u[a[t]]=1,u[o]="null_a",[s,u]},r}(vd),F2=by;An("stackedColumnLine",by);var R2=function(i){(0,Q.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.createLayers=function(t){var e=(0,y.deepMix)({},t);e.type="stackedColumnLine",i.prototype.createLayers.call(this,e)},r.getDefaultOptions=F2.getDefaultOptions,r}(un),wy=R2,N2=function(r){return r.charAt(0).toUpperCase()+r.slice(1).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},ak=function(r,t){return JSON.stringify(r)===JSON.stringify(t)},Y2=function(r,t){return new Set(r.concat(t)).size===r.length},G2=function(r,t){var e={}.toString;return e.call(r)==="[object "+t+"]"},z2=function(r){if(!r)return r;var t={};for(var e in r)t[e]=r[e];return t},Il={sameArray:Y2,camelCase:N2,isType:G2,clone:z2},X2=v(5672),H2=function(r){var t=document.createElement("div");return t.className="g2-tooltip eva-charts-tootip",X2.render(r,t),t},dd=H2;function Sy(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function V2(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Sy(Object(t),!0).forEach(function(e){W2(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Sy(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function W2(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}function In(i,r){var t=(0,st.useRef)(),e=(0,st.useRef)(null),n=function(){var u,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",p=arguments.length>1?arguments[1]:void 0;return(u=t.current)===null||u===void 0?void 0:u.canvas.cfg.el.toDataURL(h,p)},a=function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"image/png",p=arguments.length>2?arguments[2]:void 0;try{var b;u&&u.indexOf(".")===-1&&(u="".concat(u,".png"));var k=u;if(!k){var R,Y=r;k="".concat((Y==null||(R=Y.title)===null||R===void 0?void 0:R.text)||(i==null?void 0:i.name),".png")}var V=(b=t.current)===null||b===void 0?void 0:b.canvas.cfg.el.toDataURL(h,p),Z=document.createElement("a");Z.href=V,Z.download=k,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),Z=null}catch(it){console.log(it)}},o=function(){var u,h,p,b,k;if((u=r.statistic)===null||u===void 0?void 0:u.htmlContent){var R=r.statistic.htmlContent;r.statistic.htmlContent=function(){var V=R.apply(void 0,arguments);return Il.isType(V,"String")||Il.isType(V,"Number")||Il.isType(V,"HTMLDivElement")?V:dd(V)}}if(((h=r.tooltip)===null||h===void 0||(p=h.custom)===null||p===void 0?void 0:p.container)&&(r.tooltip.custom.container=dd(r.tooltip.custom.container)),(b=r.tooltip)===null||b===void 0||(k=b.custom)===null||k===void 0?void 0:k.customContent){var Y=r.tooltip.custom.customContent;r.tooltip.custom.customContent=function(V,Z){var it=Y(V,Z)||"";return Il.isType(it,"HTMLDivElement")?it:dd(it)}}};return(0,st.useEffect)(function(){t.current&&(r.onlyChangeData?t.current.changeData((r==null?void 0:r.data)||[]):(o(),t.current.updateConfig(r),t.current.render()))},[(r==null?void 0:r.memoData)?r.memoData:JSON.stringify(r)]),(0,st.useEffect)(function(){if(!e.current)return function(){return null};o();var s=new i(e.current,V2({},r));return s.__proto__.toDataURL=function(u,h){return n(u,h)},s.__proto__.downloadImage=function(u,h,p){return a(u,h,p)},s.render(),t.current=Il.clone(s),function(){return s.destroy()}},[]),{chart:t,container:e,toDataURL:n,downloadImage:a}}var j2=st.createContext({});function Wh(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wh=function(t){return typeof t}:Wh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wh(i)}function U2(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function Cy(i,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function Z2(i,r,t){return r&&Cy(i.prototype,r),t&&Cy(i,t),i}function K2(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&pd(i,r)}function pd(i,r){return pd=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},pd(i,r)}function $2(i){var r=q2();return function(){var e=jh(i),n;if(r){var a=jh(this).constructor;n=Reflect.construct(e,arguments,a)}else n=e.apply(this,arguments);return Q2(this,n)}}function Q2(i,r){return r&&(Wh(r)==="object"||typeof r=="function")?r:J2(i)}function J2(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function q2(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}function jh(i){return jh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(i)}var tC=function(i){K2(t,i);var r=$2(t);function t(){var e;return U2(this,t),e=r.apply(this,arguments),e.state={hasError:!1},e.renderError=function(n){switch(n){default:return st.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",n.message)}},e}return Z2(t,[{key:"render",value:function(){return this.state.hasError?this.renderError(this.state.error):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{hasError:!0,error:n}}},{key:"getDerivedStateFromProps",value:function(n,a){return a.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null}}]),t}(st.Component),Mn=tC,ok=j2.Provider;function eC(i,r){if(i==null)return{};var t=rC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function rC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var My=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=eC(i,["chartRef","style","className"]),s=In(E,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});My.defaultProps=E.getDefaultOptions();var nC=My;function iC(i,r){if(i==null)return{};var t=aC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function aC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Ey=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=iC(i,["chartRef","style","className"]),s=In(hh,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Ey.defaultProps=hh.getDefaultOptions();var oC=Ey;function sC(i,r){if(i==null)return{};var t=lC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function lC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Ay=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=sC(i,["chartRef","style","className"]),s=In(Dg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Ay.defaultProps=Dg.getDefaultOptions();var uC=Ay;function hC(i,r){if(i==null)return{};var t=fC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function fC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Ty=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=hC(i,["chartRef","style","className"]),s=In(Rg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Ty.defaultProps=Rg.getDefaultOptions();var cC=Ty;function vC(i,r){if(i==null)return{};var t=dC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function dC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var pC=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=vC(i,["chartRef","style","className"]),s=In(HS,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))}),gC=pC;function yC(i,r){if(i==null)return{};var t=mC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function mC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Py=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=yC(i,["chartRef","style","className"]),s=In(Ip,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Py.defaultProps=Ip.getDefaultOptions();var Ly=Py;function xC(i,r){if(i==null)return{};var t=bC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function bC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var _y=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=xC(i,["chartRef","style","className"]),s=In(py,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});_y.defaultProps=py.getDefaultOptions();var wC=_y;function SC(i,r){if(i==null)return{};var t=CC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function CC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Iy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=SC(i,["chartRef","style","className"]),s=In(qp,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Iy.defaultProps=qp.getDefaultOptions();var MC=Iy;function EC(i,r){if(i==null)return{};var t=AC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function AC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Oy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=EC(i,["chartRef","style","className"]),s=In(Tg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Oy.defaultProps=Tg.getDefaultOptions();var ky=Oy;function TC(i,r){if(i==null)return{};var t=PC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function PC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var By=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=TC(i,["chartRef","style","className"]),s=In(cy,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});By.defaultProps=cy.getDefaultOptions();var LC=By;function _C(i,r){if(i==null)return{};var t=IC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function IC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Dy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=_C(i,["chartRef","style","className"]),s=In(jg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Dy.defaultProps=jg.getDefaultOptions();var OC=Dy;function kC(i,r){if(i==null)return{};var t=BC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function BC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var DC=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=kC(i,["chartRef","style","className"]),s=In(Hb,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))}),FC=DC;function RC(i,r){if(i==null)return{};var t=NC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function NC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Fy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=RC(i,["chartRef","style","className"]),s=In(Vg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Fy.defaultProps=Vg.getDefaultOptions();var Ry=Fy;function YC(i,r){if(i==null)return{};var t=GC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function GC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Ny=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=YC(i,["chartRef","style","className"]),s=In(ph,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Ny.defaultProps=ph.getDefaultOptions();var zC=Ny;function XC(i,r){if(i==null)return{};var t=HC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function HC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Yy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=XC(i,["chartRef","style","className"]),s=In(kp,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Yy.defaultProps=kp.getDefaultOptions();var VC=Yy;function WC(i,r){if(i==null)return{};var t=jC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function jC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Gy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=WC(i,["chartRef","style","className"]),s=In(my,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Gy.defaultProps=my.getDefaultOptions();var UC=Gy;function ZC(i,r){if(i==null)return{};var t=KC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function KC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var zy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=ZC(i,["chartRef","style","className"]),s=In(vg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});zy.defaultProps=vg.getDefaultOptions();var $C=zy;function QC(i,r){if(i==null)return{};var t=JC(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function JC(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Xy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=QC(i,["chartRef","style","className"]),s=In(ng,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Xy.defaultProps=ng.getDefaultOptions();var qC=Xy;function tM(i,r){if(i==null)return{};var t=eM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function eM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Hy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=tM(i,["chartRef","style","className"]),s=In(Cg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Hy.defaultProps=Cg.getDefaultOptions();var rM=Hy;function nM(i,r){if(i==null)return{};var t=iM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function iM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Vy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=nM(i,["chartRef","style","className"]),s=In(Wu,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Vy.defaultProps=Wu.getDefaultOptions();var Wy=Vy;function aM(i,r){if(i==null)return{};var t=oM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function oM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var jy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=aM(i,["chartRef","style","className"]),s=In(wg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});jy.defaultProps=wg.getDefaultOptions();var Uy=jy;function sM(i,r){if(i==null)return{};var t=lM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function lM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Zy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=sM(i,["chartRef","style","className"]),s=In(Zg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Zy.defaultProps=Zg.getDefaultOptions();var uM=Zy;function hM(i,r){if(i==null)return{};var t=fM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function fM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Ky=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=hM(i,["chartRef","style","className"]),s=In(mi,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Ky.defaultProps=mi.getDefaultOptions();var cM=Ky;function vM(i,r){if(i==null)return{};var t=dM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function dM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var $y=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=vM(i,["chartRef","style","className"]),s=In(mh,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});$y.defaultProps=mh.getDefaultOptions();var pM=$y;function gM(i,r){if(i==null)return{};var t=yM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function yM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Qy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=gM(i,["chartRef","style","className"]),s=In(Vp,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Qy.defaultProps=Vp.getDefaultOptions();var mM=Qy;function xM(i,r){if(i==null)return{};var t=bM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function bM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var Jy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=xM(i,["chartRef","style","className"]),s=In($p,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});Jy.defaultProps=$p.getDefaultOptions();var wM=Jy;function SM(i,r){if(i==null)return{};var t=CM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function CM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var qy=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=SM(i,["chartRef","style","className"]),s=In(qg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});qy.defaultProps=qg.getDefaultOptions();var t0=qy;function MM(i,r){if(i==null)return{};var t=EM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function EM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var e0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=MM(i,["chartRef","style","className"]),s=In(pg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});e0.defaultProps=pg.getDefaultOptions();var r0=e0;function AM(i,r){if(i==null)return{};var t=TM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function TM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var n0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=AM(i,["chartRef","style","className"]),s=In(Eh,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});n0.defaultProps=Eh.getDefaultOptions();var PM=n0;function LM(i,r){if(i==null)return{};var t=_M(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function _M(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var i0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=LM(i,["chartRef","style","className"]),s=In(zp,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});i0.defaultProps=zp.getDefaultOptions();var IM=i0;function OM(i,r){if(i==null)return{};var t=kM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function kM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var a0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=OM(i,["chartRef","style","className"]),s=In(ey,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});a0.defaultProps=ey.getDefaultOptions();var o0=a0;function BM(i,r){if(i==null)return{};var t=DM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function DM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var s0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=BM(i,["chartRef","style","className"]),s=In(ag,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});s0.defaultProps=ag.getDefaultOptions();var FM=s0;function RM(i,r){if(i==null)return{};var t=NM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function NM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var l0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=RM(i,["chartRef","style","className"]),s=In(kg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});l0.defaultProps=kg.getDefaultOptions();var YM=l0;function GM(i,r){if(i==null)return{};var t=zM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function zM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var u0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=GM(i,["chartRef","style","className"]),s=In(cn,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});u0.defaultProps=cn.getDefaultOptions();var XM=u0;function HM(i,r){if(i==null)return{};var t=VM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function VM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var h0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=HM(i,["chartRef","style","className"]),s=In(Al,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});h0.defaultProps=Al.getDefaultOptions();var WM=h0;function jM(i,r){if(i==null)return{};var t=UM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function UM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var f0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=jM(i,["chartRef","style","className"]),s=In(Fp,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});f0.defaultProps=Fp.getDefaultOptions();var ZM=f0;function KM(i,r){if(i==null)return{};var t=$M(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function $M(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var c0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=KM(i,["chartRef","style","className"]),s=In(wy,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});c0.defaultProps=wy.getDefaultOptions();var QM=c0;function JM(i,r){if(i==null)return{};var t=qM(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function qM(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var v0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=JM(i,["chartRef","style","className"]),s=In(fg,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});v0.defaultProps=fg.getDefaultOptions();var tE=v0;function eE(i,r){if(i==null)return{};var t=rE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function rE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var d0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=eE(i,["chartRef","style","className"]),s=In(Cs,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});d0.defaultProps=Cs.getDefaultOptions();var nE=d0;function iE(i,r){if(i==null)return{};var t=aE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function aE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var p0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=iE(i,["chartRef","style","className"]),s=In(ay,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});p0.defaultProps=ay.getDefaultOptions();var g0=p0;function oE(i,r){if(i==null)return{};var t=sE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function sE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var y0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=oE(i,["chartRef","style","className"]),s=In(ny,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});y0.defaultProps=ny.getDefaultOptions();var m0=y0;function lE(i,r){if(i==null)return{};var t=uE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function uE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var x0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=lE(i,["chartRef","style","className"]),s=In(sy,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});x0.defaultProps=sy.getDefaultOptions();var hE=x0;function fE(i,r){if(i==null)return{};var t=cE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function cE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var b0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=fE(i,["chartRef","style","className"]),s=In(Qa,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});b0.defaultProps=Qa.getDefaultOptions();var vE=b0;function dE(i,r){if(i==null)return{};var t=pE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function pE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var w0=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=dE(i,["chartRef","style","className"]),s=In(_g,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))});w0.defaultProps=_g.getDefaultOptions();var gE=w0;function yE(i,r){if(i==null)return{};var t=mE(i,r),e,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,e)||(t[e]=i[e]))}return t}function mE(i,r){if(i==null)return{};var t={},e=Object.keys(i),n,a;for(a=0;a<e.length;a++)n=e[a],!(r.indexOf(n)>=0)&&(t[n]=i[n]);return t}var xE=(0,st.forwardRef)(function(i,r){var t=i.chartRef,e=i.style,n=e===void 0?{}:e,a=i.className,o=yE(i,["chartRef","style","className"]),s=In(Pb,o),u=s.chart,h=s.container;return(0,st.useEffect)(function(){t&&(t.current=u.current)},[u.current]),(0,st.useImperativeHandle)(r,function(){return{getChart:function(){return u.current}}}),st.createElement(Mn,null,st.createElement("div",{className:a,style:n,ref:h}))}),S0=xE,bE={i8:"3.8.5"},ii=v(91577),Ei=v(27533),wE={getDefaultCfg:function(){return{}},getEvents:function(){return{}},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(r){var t=this,e=this.events;this.graph=r,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!0),(0,ii.default)(e,function(n,a){r.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(r){var t=this.events;(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&r.get("canvas").set("draggable",!1),(0,ii.default)(t,function(e,n){r.off(n,e)})},get:function(r){return this[r]},set:function(r,t){return this[r]=t,this}},SE=function(){function i(){}return i.registerBehavior=function(r,t){if(!t)throw new Error("please specify handler for this behavior: "+r);var e=(0,Ei.d9)(wE);Object.assign(e,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var h={};u&&((0,Ei.S6)(u,function(p,b){h[b]=(0,Ei.Ko)(s,p)}),this.events=h)};n.prototype=e,i.types[r]=n},i.hasBehavior=function(r){return!!i.types[r]},i.getBehavior=function(r){return i.types[r]},i.types={},i}(),gd=SE,yd;(function(i){i.CLICK="click",i.DBLCLICK="dblclick",i.MOUSEDOWN="mousedown",i.MOUDEUP="mouseup",i.CONTEXTMENU="contextmenu",i.MOUSEENTER="mouseenter",i.MOUSEOUT="mouseout",i.MOUSEOVER="mouseover",i.MOUSEMOVE="mousemove",i.MOUSELEAVE="mouseleave",i.DRAGSTART="dragstart",i.DRAGEND="dragend",i.DRAG="drag",i.DRAGENTER="dragenter",i.DRAGLEAVE="dragleave",i.DRAGOVER="dragover",i.DRAGOUT="dragout",i.DDROP="drop",i.KEYUP="keyup",i.KEYDOWN="keydown",i.WHEEL="wheel",i.FOCUS="focus",i.BLUR="blur",i.TOUCHSTART="touchstart",i.TOUCHMOVE="touchmove",i.TOUCHEND="touchend",i.NODE_CONTEXTMENU="node:contextmenu",i.NODE_CLICK="node:click",i.NODE_DBLCLICK="node:dblclick",i.NODE_MOUSEDOWN="node:mousedown",i.NODE_MOUSEUP="node:mouseup",i.NODE_MOUSEENTER="node:mouseenter",i.NODE_MOUSELEAVE="node:mouseleave",i.NODE_MOUSEMOVE="node:mousemove",i.NODE_MOUSEOUT="node:mouseout",i.NODE_MOUSEOVER="node:mouseover",i.NODE_DROP="node:drop",i.NODE_DRAGOVER="node:dragover",i.NODE_DRAGENTER="node:dragenter",i.NODE_DRAGLEAVE="node:dragleave",i.NODE_DRAGSTART="node:dragstart",i.NODE_DRAG="node:drag",i.NODE_DRAGEND="node:dragend",i.COMBO_CONTEXTMENU="combo:contextmenu",i.COMBO_CLICK="combo:click",i.COMBO_DBLCLICK="combo:dblclick",i.COMBO_MOUSEDOWN="combo:mousedown",i.COMBO_MOUSEUP="combo:mouseup",i.COMBO_MOUSEENTER="combo:mouseenter",i.COMBO_MOUSELEAVE="combo:mouseleave",i.COMBO_MOUSEMOVE="combo:mousemove",i.COMBO_MOUSEOUT="combo:mouseout",i.COMBO_MOUSEOVER="combo:mouseover",i.COMBO_DROP="combo:drop",i.COMBO_DRAGOVER="combo:dragover",i.COMBO_DRAGENTER="combo:dragenter",i.COMBO_DRAGLEAVE="combo:dragleave",i.COMBO_DRAGSTART="combo:dragstart",i.COMBO_DRAG="combo:drag",i.COMBO_DRAGEND="combo:dragend",i.EDGE_CONTEXTMENU="edge:contextmenu",i.EDGE_CLICK="edge:click",i.EDGE_DBLCLICK="edge:dblclick",i.EDGE_MOUSEDOWN="edge:mousedown",i.EDGE_MOUSEUP="edge:mouseup",i.EDGE_MOUSEENTER="edge:mouseenter",i.EDGE_MOUSELEAVE="edge:mouseleave",i.EDGE_MOUSEMOVE="edge:mousemove",i.EDGE_MOUSEOUT="edge:mouseout",i.EDGE_MOUSEOVER="edge:mouseover",i.EDGE_DROP="edge:drop",i.EDGE_DRAGOVER="edge:dragover",i.EDGE_DRAGENTER="edge:dragenter",i.EDGE_DRAGLEAVE="edge:dragleave",i.CANVAS_CONTEXTMENU="canvas:contextmenu",i.CANVAS_CLICK="canvas:click",i.CANVAS_DBLCLICK="canvas:dblclick",i.CANVAS_MOUSEDOWN="canvas:mousedown",i.CANVAS_MOUSEUP="canvas:mouseup",i.CANVAS_MOUSEENTER="canvas:mouseenter",i.CANVAS_MOUSELEAVE="canvas:mouseleave",i.CANVAS_MOUSEMOVE="canvas:mousemove",i.CANVAS_MOUSEOUT="canvas:mouseout",i.CANVAS_MOUSEOVER="canvas:mouseover",i.CANVAS_DROP="canvas:drop",i.CANVAS_DRAGENTER="canvas:dragenter",i.CANVAS_DRAGLEAVE="canvas:dragleave",i.CANVAS_DRAGSTART="canvas:dragstart",i.CANVAS_DRAG="canvas:drag",i.CANVAS_DRAGEND="canvas:dragend",i.BEFORERENDER="beforerender",i.AFTERRENDER="afterrender",i.BEFOREADDITEM="beforeadditem",i.AFTERADDITEM="afteradditem",i.BEFOREREMOVEITEM="beforeremoveitem",i.AFTERREMOVEITEM="afterremoveitem",i.BEFOREUPDATEITEM="beforeupdateitem",i.AFTERUPDATEITEM="afterupdateitem",i.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",i.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",i.BEFOREITEMSTATECHANGE="beforeitemstatechange",i.AFTERITEMSTATECHANGE="afteritemstatechange",i.BEFOREITEMREFRESH="beforeitemrefresh",i.AFTERITEMREFRESH="afteritemrefresh",i.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",i.AFTERITEMSTATESCLEAR="afteritemstatesclear",i.BEFOREMODECHANGE="beforemodechange",i.AFTERMODECHANGE="aftermodechange",i.BEFORELAYOUT="beforelayout",i.AFTERLAYOUT="afterlayout",i.BEFORECREATEEDGE="beforecreateedge",i.AFTERCREATEEDGE="aftercreateedge",i.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",i.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",i.BEFOREGRAPHREFRESH="beforegraphrefresh",i.AFTERGRAPHREFRESH="aftergraphrefresh",i.BEFOREANIMATE="beforeanimate",i.AFTERANIMATE="afteranimate",i.BEFOREPAINT="beforepaint",i.AFTERPAINT="afterpaint",i.GRAPHSTATECHANGE="graphstatechange",i.AFTERACTIVATERELATIONS="afteractivaterelations",i.NODESELECTCHANGE="nodeselectchange",i.TOOLTIPCHANGE="tooltipchange",i.WHEELZOOM="wheelzoom",i.VIEWPORTCHANGE="viewportchange",i.DRAGNODEEND="dragnodeend",i.STACKCHANGE="stackchange"})(yd||(yd={}));var Zi=v(21429),to=v(83438),Ra=v(41820),ti=v(55535),he=v(21362),CE=v(60960),ME=function(i){(0,he.__extends)(r,i);function r(t,e){var n=i.call(this,t,e)||this;return n.item=e.item,n.canvasX=e.canvasX,n.canvasY=e.canvasY,n.wheelDelta=e.wheelDelta,n.detail=e.detail,n}return r}(CE.Z),md=function(r){var t=0,e=0,n=0,a=0;if((0,Ra.default)(r))t=e=n=a=r;else if((0,ti.default)(r)){var o=parseInt(r,10);t=e=n=a=o}else(0,Zi.default)(r)&&(t=r[0],n=(0,to.default)(r[1])?r[0]:r[1],a=(0,to.default)(r[2])?r[0]:r[2],e=(0,to.default)(r[3])?n:r[3]);return[t,n,a,e]},Uh=function(r){var t=new ME(r.type,r);return t.clientX=r.clientX,t.clientY=r.clientY,t.x=r.x,t.y=r.y,t.target=r.target,t.currentTarget=r.currentTarget,t.bubbles=!0,t.item=r.item,t},C0=function(r){if(!r)return!1;for(var t=9,e=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(r[n]!==e[n])return!0;return!1},Co=function(r){return Number.isNaN(Number(r))},M0=function(r){for(var t=Infinity,e=-Infinity,n=Infinity,a=-Infinity,o=0;o<r.length;o++){var s=r[o],u=s.getBBox(),h=u.minX,p=u.minY,b=u.maxX,k=u.maxY;h<t&&(t=h),p<n&&(n=p),b>e&&(e=b),k>a&&(a=k)}var R=Math.floor(t),Y=Math.floor(n),V=Math.ceil(e)-Math.floor(t),Z=Math.ceil(a)-Math.floor(n);return{x:R,y:Y,width:V,height:Z,minX:t,minY:n,maxX:e,maxY:a}},EE=function(r,t){t===void 0&&(t=15);for(var e=r.length,n=t*2,a=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o={},s=[],u={},h=0;h<e;h++){var p=r[h],b=p.source,k=p.target,R=b+"-"+k;if(!s[h]){o[R]||(o[R]=[]),s[h]=!0,o[R].push(p);for(var Y=0;Y<e;Y++)if(h!==Y){var V=r[Y],Z=V.source,it=V.target;s[Y]||(b===it&&k===Z?(o[R].push(V),s[Y]=!0,u[Z+"|"+it+"|"+(o[R].length-1)]=!0):b===Z&&k===it&&(o[R].push(V),s[Y]=!0))}}}for(var tt in o)for(var _t=o[tt],It=_t.length,Ht=0;Ht<It;Ht++){var le=_t[Ht];if(le.source===le.target){le.type="loop",le.loopCfg={position:a[Ht%8],dist:Math.floor(Ht/8)*20+50};continue}le.type="quadratic";var xe=(Ht%2==0?1:-1)*(u[le.source+"|"+le.target+"|"+Ht]?-1:1);It%2==1?le.curveOffset=xe*Math.ceil(Ht/2)*n:le.curveOffset=xe*(Math.floor(Ht/2)*n+t)}return r},E0=Math.abs,AE=10,TE=["shift","ctrl","alt","control"],PE={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",mousedown:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp",mouseup:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(r){var t=this.origin,e=+r.clientX,n=+r.clientY;if(!(Co(e)||Co(n))){var a=e-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:e,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),h=this.graph.get("canvas").getCanvasBBox();(h.minX<=s+this.scalableRange&&h.minX+a>s+this.scalableRange||h.maxX+this.scalableRange>=0&&h.maxX+this.scalableRange+a<0)&&(a=0),(h.minY<=u+this.scalableRange&&h.minY+o>u+this.scalableRange||h.maxY+this.scalableRange>=0&&h.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(a,o)}},onMouseDown:function(r){var t=this,e=r.originalEvent;if(!(e&&e.button!==0)&&!(r.name!==yd.TOUCHSTART&&window&&window.event&&typeof window!="undefined"&&!window.event.buttons&&!window.event.button)&&!(t.keydown||r.shape)&&(t.origin={x:r.clientX,y:r.clientY},t.dragging=!1,this.enableOptimize)){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");!u||u.forEach(function(tt){tt.hide()})}for(var h=n.getNodes(),p=0,b=h.length;p<b;p++)for(var k=h[p].getContainer(),R=k.get("children"),Y=0,V=R;Y<V.length;Y++){var Z=V[Y],it=Z.get("isKeyShape");it||Z.hide()}}},onMouseMove:function(r){var t=this.graph;if(!(this.keydown||r.shape)&&(r=Uh(r),!!this.origin)){if(this.dragging)r.type="drag",t.emit("canvas:drag",r);else{if(E0(this.origin.x-r.clientX)+E0(this.origin.y-r.clientY)<AE)return;this.shouldBegin.call(this,r)&&(r.type="dragstart",t.emit("canvas:dragstart",r),this.dragging=!0)}this.shouldUpdate.call(this,r)&&this.updateViewport(r)}},onMouseUp:function(r){var t=this.graph;if(!(this.keydown||r.shape)){if(this.enableOptimize){for(var e=t.getEdges(),n=0,a=e.length;n<a;n++){var o=e[n].get("group").get("children");!o||o.forEach(function(Z){Z.show()})}for(var s=t.getNodes(),u=0,h=s.length;u<h;u++)for(var p=s[u].getContainer(),b=p.get("children"),k=0,R=b;k<R.length;k++){var Y=R[k],V=Y.get("isKeyShape");V||Y.show()}}if(!this.dragging){this.origin=null;return}r=Uh(r),this.shouldEnd.call(this,r)&&this.updateViewport(r),r.type="dragend",t.emit("canvas:dragend",r),this.endDrag()}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(r){var t=this,e=r.key;!e||(TE.indexOf(e.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},LE=v(57491),Zh=v.n(LE),_E=v(29231),Kh=v.n(_E),$h=2,A0=.16,IE=.05,OE=.05,kE=.15,T0=5,P0=4,BE=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function L0(i,r,t){var e;return Math.round(i.h)>=60&&Math.round(i.h)<=240?e=t?Math.round(i.h)-$h*r:Math.round(i.h)+$h*r:e=t?Math.round(i.h)+$h*r:Math.round(i.h)-$h*r,e<0?e+=360:e>=360&&(e-=360),e}function _0(i,r,t){if(i.h===0&&i.s===0)return i.s;var e;return t?e=i.s-A0*r:r===P0?e=i.s+A0:e=i.s+IE*r,e>1&&(e=1),t&&r===T0&&e>.1&&(e=.1),e<.06&&(e=.06),Number(e.toFixed(2))}function I0(i,r,t){var e;return t?e=i.v+OE*r:e=i.v-kE*r,e>1&&(e=1),Number(e.toFixed(2))}function xd(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],e=Kh()(i),n=T0;n>0;n-=1){var a=e.toHsv(),o=Kh()({h:L0(a,n,!0),s:_0(a,n,!0),v:I0(a,n,!0)}).toHexString();t.push(o)}t.push(e.toHexString());for(var s=1;s<=P0;s+=1){var u=e.toHsv(),h=Kh()({h:L0(u,s),s:_0(u,s),v:I0(u,s)}).toHexString();t.push(h)}return r.theme==="dark"?BE.map(function(p){var b=p.index,k=p.opacity,R=Kh().mix(r.backgroundColor||"#141414",t[b],k*100).toHexString();return R}):t}var bd={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ia={},wd={};Object.keys(bd).forEach(function(i){ia[i]=xd(bd[i]),ia[i].primary=ia[i][5],wd[i]=xd(bd[i],{theme:"dark",backgroundColor:"#141414"}),wd[i].primary=wd[i][5]});var sk=ia.red,lk=ia.volcano,uk=ia.gold,hk=ia.orange,fk=ia.yellow,ck=ia.lime,vk=ia.green,dk=ia.cyan,pk=ia.blue,gk=ia.geekblue,yk=ia.purple,mk=ia.magenta,xk=ia.grey,eo=function(r,t,e){var n=Zh()(r),a=Zh()(t);return Zh()([(1-e)*n.color[0]+e*a.color[0],(1-e)*n.color[1]+e*a.color[1],(1-e)*n.color[2]+e*a.color[2]]).rgb()},O0=function(r,t,e,n){t===void 0&&(t="#fff"),e===void 0&&(e="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=eo(t,r,.05).rgb().toString(),o=eo(t,n,.02).rgb().toString(),s=eo(t,n,.05).rgb().toString(),u=eo(t,n,.1).rgb().toString(),h=eo(t,n,.2).rgb().toString(),p=eo(t,n,.3).rgb().toString(),b=xd(r,{theme:e,backgroundColor:t}),k=Zh()(r).hex().toLowerCase(),R=b.indexOf(k),Y=r;return R!==-1&&(Y=b[R+1]),{mainStroke:r,mainFill:eo(t,r,.1).rgb().toString(),activeStroke:r,activeFill:a,inactiveStroke:eo(t,r,.4).rgb().toString(),inactiveFill:a,selectedStroke:r,selectedFill:t,highlightStroke:Y,highlightFill:eo(t,r,.2).rgb().toString(),disableStroke:p,disableFill:s,edgeMainStroke:p,edgeActiveStroke:r,edgeInactiveStroke:h,edgeSelectedStroke:r,edgeHighlightStroke:r,edgeDisableStroke:u,comboMainStroke:p,comboMainFill:o,comboActiveStroke:r,comboActiveFill:a,comboInactiveStroke:p,comboInactiveFill:o,comboSelectedStroke:r,comboSelectedFill:o,comboHighlightStroke:Y,comboHighlightFill:o,comboDisableStroke:h,comboDisableFill:s}},DE="rgb(95, 149, 255)",FE="rgb(255, 255, 255)",k0="rgb(0, 0, 0)",Gn=O0(DE,FE),dr={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Gn.mainStroke,fill:Gn.mainFill},size:20,color:Gn.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Gn.activeFill,stroke:Gn.activeStroke}},nodeStateStyles:{active:{fill:Gn.activeFill,stroke:Gn.activeStroke,lineWidth:2,shadowColor:Gn.mainStroke,shadowBlur:10},selected:{fill:Gn.selectedFill,stroke:Gn.selectedStroke,lineWidth:4,shadowColor:Gn.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Gn.highlightFill,stroke:Gn.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Gn.inactiveFill,stroke:Gn.inactiveStroke,lineWidth:1},disable:{fill:Gn.disableFill,stroke:Gn.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:k0,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Gn.edgeMainStroke,lineAppendWidth:2},color:Gn.edgeMainStroke},edgeStateStyles:{active:{stroke:Gn.edgeActiveStroke,lineWidth:1},selected:{stroke:Gn.edgeSelectedStroke,lineWidth:2,shadowColor:Gn.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Gn.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Gn.edgeInactiveStroke,lineWidth:1},disable:{stroke:Gn.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:k0,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Gn.comboMainFill,lineWidth:1,stroke:Gn.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Gn.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Gn.comboActiveStroke,lineWidth:1,fill:Gn.comboActiveFill},selected:{stroke:Gn.comboSelectedStroke,lineWidth:2,fill:Gn.comboSelectedFill,shadowColor:Gn.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Gn.comboHighlightStroke,lineWidth:2,fill:Gn.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Gn.comboInactiveStroke,fill:Gn.comboInactiveFill,lineWidth:1},disable:{stroke:Gn.comboDisableStroke,fill:Gn.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},RE={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(r){if(!this.origin||!r||r.destroyed)return!1;var t=r.getType();return t==="combo"},onDragStart:function(r){var t=this;if(!!this.shouldBegin.call(this,r)){var e=r.item;if(!(!e||e.destroyed||e.hasLocked())){var n=e.getContainer();n.set("capture",!1);var a=r.target;if(a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var u=s.findAllByState("node",this.selectedState),h=e.get("id"),p=u.filter(function(k){var R=k.get("id");return h===R});p.length===0?this.targets.push(e):u.length>1?u.forEach(function(k){var R=k.hasLocked();R||t.targets.push(k)}):this.targets.push(e);var b=[];this.targets.forEach(function(k){b.push((0,Ei.d9)(k.getModel()))}),this.set("beforeDragNodes",b),this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}}},onDrag:function(r){var t=this;!this.origin||!this.shouldUpdate(this,r)||(this.get("enableDelegate")?this.updateDelegate(r):this.targets.map(function(e){t.update(e,r)}))},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){var t=r.item;if(t){var e=t.getContainer();e.set("capture",!0)}this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(r);var n=this.graph;if(n.get("enabledStack")){var a={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(o){a.after.nodes.push(o.getModel())}),n.pushStack("update",(0,Ei.d9)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(r){var t=r.item;if(!!this.validationCombo(t)){this.updatePositions(r);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&e.updateComboTree(a,n.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(r){var t=this.graph;!this.targets||this.targets.length===0||(this.updatePositions(r),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){var n=e.getModel();n.comboId&&t.updateComboTree(e)}))},onDropNode:function(r){if(!(!this.targets||this.targets.length===0)){var t=this,e=r.item;this.updatePositions(r);var n=t.graph,a=e.getModel().comboId;if(a){var o=n.findById(a);t.comboActiveState&&n.setItemState(o,t.comboActiveState,!1),this.targets.map(function(s){var u=s.getModel();a!==u.comboId&&n.updateComboTree(s,a)}),n.updateCombo(o)}else this.targets.map(function(s){var u=s.getModel();u.comboId&&n.updateComboTree(s)});n.emit("dragnodeend",{items:this.targets,targetItem:e})}},onDragEnter:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(r){var t=r.item;if(!!this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(r){var t=this;!this.targets||this.targets.length===0||this.get("enableDelegate")&&this.targets.map(function(e){return t.update(e,r)})},update:function(r,t){var e=this.origin,n=r.get("model"),a=r.get("id");this.point[a]||(this.point[a]={x:n.x||0,y:n.y||0});var o=t.x-e.x+this.point[a].x,s=t.y-e.y+this.point[a].y,u={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(r,u,!1):r.updatePosition(u)},updateDelegate:function(r){var t=this.graph;if(this.delegateRect){var k=r.x-this.origin.x+this.originPoint.minX,R=r.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:k,y:R})}else{var e=this.graph.get("group"),n=(0,Ei.b$)({},dr.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(r),o=a.x,s=a.y,u=a.width,h=a.height,p=a.minX,b=a.minY;this.originPoint={x:o,y:s,width:u,height:h,minX:p,minY:b},this.delegateRect=e.addShape("rect",{attrs:(0,he.__assign)({width:u,height:h,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(r){var t=this.graph,e=t.findAllByState("node",this.selectedState);e.length===0&&e.push(r.item);for(var n=Infinity,a=-Infinity,o=Infinity,s=-Infinity,u=0;u<e.length;u++){var h=e[u],p=h.getBBox(),b=p.minX,k=p.minY,R=p.maxX,Y=p.maxY;b<n&&(n=b),k<o&&(o=k),R>a&&(a=R),Y>s&&(s=Y)}var V=Math.floor(n),Z=Math.floor(o),it=Math.ceil(a)-Math.floor(n),tt=Math.ceil(s)-Math.floor(o);return{x:V,y:Z,width:it,height:tt,minX:n,minY:o}}},NE={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(r){var t=r.item,e=this.graph;if(this.item=t,!!this.shouldUpdate(r.item,{event:r,action:"activate"})){for(var n=this,a=this.activeState,o=this.inactiveState,s=e.getNodes(),u=e.getEdges(),h=s.length,p=u.length,b=0;b<h;b++){var k=s[b],R=k.hasState("selected");n.resetSelected&&R&&e.setItemState(k,"selected",!1),e.setItemState(k,a,!1),o&&e.setItemState(k,o,!0)}for(var b=0;b<p;b++){var Y=u[b];e.setItemState(Y,a,!1),o&&e.setItemState(Y,o,!0)}o&&e.setItemState(t,o,!1),e.setItemState(t,a,!0);for(var V=t.getEdges(),Z=V.length,b=0;b<Z;b++){var Y=V[b],it=void 0;Y.getSource()===t?it=Y.getTarget():it=Y.getSource(),o&&e.setItemState(it,o,!1),e.setItemState(it,a,!0),e.setItemState(Y,o,!1),e.setItemState(Y,a,!0),Y.toFront()}e.emit("afteractivaterelations",{item:r.item,action:"activate"})}},clearActiveState:function(r){var t=this,e=t.get("graph");if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){var n=this.activeState,a=this.inactiveState,o=e.get("autoPaint");e.setAutoPaint(!1);for(var s=e.getNodes(),u=e.getEdges(),h=s.length,p=u.length,b=0;b<h;b++){var k=s[b];e.clearItemStates(k,[n,a])}for(var b=0;b<p;b++){var R=u[b];e.clearItemStates(R,[n,a,"deactivate"])}e.paint(),e.setAutoPaint(o),e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}},clearAllItemStates:function(r){var t=this,e=t.graph;if(!!t.shouldUpdate(r.item,{event:r,action:"deactivate"})){for(var n=this.activeState,a=this.inactiveState,o=e.getNodes(),s=e.getEdges(),u=o.length,h=s.length,p=0;p<u;p++){var b=o[p];e.clearItemStates(b,[n,a])}for(var p=0;p<h;p++){var k=s[p];e.clearItemStates(k,[n,a,"deactivate"])}e.emit("afteractivaterelations",{item:r.item||t.get("item"),action:"deactivate"})}}},Qh=Math.min,B0=Math.max,D0=Math.abs,F0="shift",YE=["drag","shift","ctrl","alt","control"],GE={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:F0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return YE.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=F0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(r){var t=r.item,e=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:r.canvasX,y:r.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||this.updateBrush(r)},onMouseUp:function(r){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(r),this.dragging=!1)},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(r){var t=this,e=this,n=e.graph,a=e.originPoint,o=e.shouldUpdate,s=this.selectedState,u={x:r.x,y:r.y},h=n.getPointByCanvas(a.x,a.y),p=Qh(u.x,h.x),b=B0(u.x,h.x),k=Qh(u.y,h.y),R=B0(u.y,h.y),Y=[],V=[];n.getNodes().forEach(function(it){var tt=it.getBBox();if(tt.centerX>=p&&tt.centerX<=b&&tt.centerY>=k&&tt.centerY<=R&&o(it,"select")){Y.push(it);var _t=it.getModel();V.push(_t.id),n.setItemState(it,s,!0)}});var Z=[];this.includeEdges&&Y.forEach(function(it){var tt=it.getOutEdges();tt.forEach(function(_t){var It=_t.getModel(),Ht=It.source,le=It.target;V.includes(Ht)&&V.includes(le)&&o(_t,"select")&&(Z.push(_t),n.setItemState(_t,t.selectedState,!0))})}),this.selectedEdges=Z,this.selectedNodes=Y,this.onSelect&&this.onSelect(Y,Z),n.emit("nodeselectchange",{selectedItems:{nodes:Y,edges:Z},select:!0})},createBrush:function(){var r=this,t=r.graph.get("canvas").addShape("rect",{attrs:r.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,t},updateBrush:function(r){var t=this.originPoint;this.brush.attr({width:D0(r.canvasX-t.x),height:D0(r.canvasY-t.y),x:Qh(r.canvasX,t.x),y:Qh(r.canvasY,t.y)})},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},R0="shift",zE=["shift","ctrl","alt","control"],XE={getDefaultCfg:function(){return{multiple:!0,trigger:R0,selectedState:"selected"}},getEvents:function(){var r=this;return zE.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=R0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),r.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(r){var t=this,e=r.item;if(!(!e||e.destroyed)){var n=e.getType(),a=this,o=a.graph,s=a.keydown,u=a.multiple,h=a.shouldUpdate,p=a.shouldBegin;if(!!p.call(this,r)){if(!s||!u){var b=o.findAllByState(n,this.selectedState);(0,ii.default)(b,function(Y){Y!==e&&o.setItemState(Y,t.selectedState,!1)})}if(e.hasState(this.selectedState)){h.call(this,r)&&o.setItemState(e,this.selectedState,!1);var k=o.findAllByState("node",this.selectedState),R=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:k,combos:R},select:!1})}else{h.call(this,r)&&o.setItemState(e,this.selectedState,!0);var k=o.findAllByState("node",this.selectedState),R=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:e,selectedItems:{nodes:k,combos:R},select:!0})}}}},onCanvasClick:function(){var r=this,t=this.graph,e=t.findAllByState("node",this.selectedState);(0,ii.default)(e,function(a){t.setItemState(a,r.selectedState,!1)});var n=t.findAllByState("combo",this.selectedState);(0,ii.default)(n,function(a){t.setItemState(a,r.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},ga=v(25519);ga.translate=function(i,r,t){var e=new Array(9);return ga.fromTranslation(e,t),ga.multiply(i,e,r)},ga.rotate=function(i,r,t){var e=new Array(9);return ga.fromRotation(e,t),ga.multiply(i,e,r)},ga.scale=function(i,r,t){var e=new Array(9);return ga.fromScaling(e,t),ga.multiply(i,e,r)},ga.transform=function(i,r){for(var t=[].concat(i),e=0,n=r.length;e<n;e++){var a=r[e];switch(a[0]){case"t":ga.translate(t,t,[a[1],a[2]]);break;case"s":ga.scale(t,t,[a[1],a[2]]);break;case"r":ga.rotate(t,t,a[1]);break;default:break}}return t};var Mo=ga,ro=v(8554);ro.angle=function(i,r){var t=ro.dot(i,r)/(ro.length(i)*ro.length(r));return Math.acos((0,y.clamp)(t,-1,1))},ro.direction=function(i,r){return i[0]*r[1]-r[0]*i[1]},ro.angleTo=function(i,r,t){var e=ro.angle(i,r),n=ro.direction(i,r)>=0;return t?n?Math.PI*2-e:e:n?e:Math.PI*2-e},ro.vertical=function(i,r,t){return t?(i[0]=r[1],i[1]=-1*r[0]):(i[0]=-1*r[1],i[1]=r[0]),i};var di=ro,HE=v(54069),N0=HE,no=function(i,r){var t=i?(0,y.clone)(i):[1,0,0,0,1,0,0,0,1];return(0,y.each)(r,function(e){switch(e[0]){case"t":Mo.translate(t,t,[e[1],e[2]]);break;case"s":Mo.scale(t,t,[e[1],e[2]]);break;case"r":Mo.rotate(t,t,e[1]);break;case"m":Mo.multiply(t,t,e[1]);break;default:return!1}}),t},Y0=.05,VE={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.7,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var r=this.fixSelectedItems;return r.fixState||(r.fixState="selected"),r.fixAll&&(r.fixLineWidth=!0,r.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(r){var t=r.originalEvent.touches,e=t[0],n=t[1];r.preventDefault(),!!n&&(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(r){if(!!this.moveable){r.preventDefault();var t=r.originalEvent.touches,e=t[0],n=t[1];if(!!n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(R,Y){return Math.hypot(Y.x-R.x,Y.y-R.y)},o=a({x:e.pageX,y:e.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),h=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>h||s<u)){var p=this.graph.get("canvas"),b=p.getPointByClient(r.clientX,r.clientY);this.graph.zoomTo(s,{x:b.x,y:b.y}),this.graph.emit("wheelzoom",r)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(r){var t=this,e=this,n=e.graph,a=e.fixSelectedItems;if(!!this.shouldUpdate.call(this,r)){r.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(r.clientX,r.clientY),u=this.get("sensitivity"),h=n.getZoom(),p=h,b=h;r.wheelDelta<0?p=1-Y0*u:p=1/(1-Y0*u),b=h*p;var k=this.get("minZoom")||n.get("minZoom"),R=this.get("maxZoom")||n.get("maxZoom");if(!(b>R||b<k)){var Y=this.get("enableOptimize");if(Y){var V=this.get("optimizeZoom"),Z=this.get("optimized"),it=n.getNodes(),tt=n.getEdges(),_t=it.length,It=tt.length;if(!Z){for(var Ht=0;Ht<_t;Ht++){var le=it[Ht];if(!le.destroyed)for(var xe=le.get("group").get("children"),Ce=xe.length,me=0;me<Ce;me++){var Le=xe[me];!Le.destoryed&&!Le.get("isKeyShape")&&Le.hide()}}for(var Ye=0;Ye<It;Ye++)for(var Be=tt[Ye],xe=Be.get("group").get("children"),Ce=xe.length,me=0;me<Ce;me++){var Le=xe[me];Le.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var or=setTimeout(function(){var sn=n.getZoom(),wn=t.get("optimized");if(wn){t.set("optimized",!1);for(var Fn=0;Fn<_t;Fn++){var hi=it[Fn],jn=hi.get("group").get("children"),xi=jn.length;if(sn<V)hi.getKeyShape().show();else for(var Ai=0;Ai<xi;Ai++){var Wi=jn[Ai];Wi.get("visible")||Wi.show()}}for(var Qi=0;Qi<It;Qi++){var Bi=tt[Qi],jn=Bi.get("group").get("children"),xi=jn.length;if(sn<V)Bi.getKeyShape().show();else for(var Ai=0;Ai<xi;Ai++){var Wi=jn[Ai];Wi.get("visible")||Wi.show()}}}},500);this.set("timeout",or)}if(h<=1){var cr=void 0,ar=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){cr=n.findAllByState("node",a.fixState),ar=n.findAllByState("edge",a.fixState);for(var Cr=h/b,wr=cr.length,Mr=0;Mr<wr;Mr++){var le=cr[Mr],yr=le.getContainer(),mr=le.getModel(),zr=le.getOriginStyle(),Ur=le.getStateStyle(a.fixState),Xr=le.get("shapeFactory").getShape(mr.shape||mr.type).getStateStyle(a.fixState,le)[a.fixState];if(a.fixAll){if(b<=1){var Er=(0,y.clone)(yr.getMatrix());Er||(Er=[1,0,0,0,1,0,0,0,1]);var Zr=le.getModel(),ln=Zr.x,Yr=Zr.y;Mo.translate(Er,Er,[-ln,-Yr]),Mo.scale(Er,Er,[Cr,Cr]),Mo.translate(Er,Er,[ln,Yr]),yr.setMatrix(Er)}}else for(var xe=yr.get("children"),Ce=xe.length,me=0;me<Ce;me++){var Le=xe[me],Nr=void 0,nn=void 0;if(a.fixLabel){var yn=Le.get("type");if(yn==="text"){Nr=Le.attr("fontSize")||12;var Kr=Ur[Le.get("name")],ur=Xr[Le.get("name")],Tr=Kr?Kr.fontSize:12,an=ur?ur.fontSize:12,fn=Tr||an||12;if(b<=1&&Le.attr("fontSize",fn/b),nn)break}}if(a.fixLineWidth&&Le.get("isKeyShape")){nn=Le.attr("lineWidth")||0;var Jr=Ur.lineWidth||Xr.lineWidth||zr.lineWidth||0;if(b<=1&&Le.attr("lineWidth",Jr/b),Nr)break}}}for(var bn=ar.length,pn=0;pn<bn;pn++)for(var Be=ar[pn],yr=Be.getContainer(),xe=yr.get("children"),mr=Be.getModel(),Ur=Be.getStateStyle(a.fixState),Xr=Be.get("shapeFactory").getShape(mr.shape||mr.type).getStateStyle(a.fixState,Be)[a.fixState],Ce=xe.length,me=0;me<Ce;me++){var Le=xe[me],Nr=void 0,nn=void 0;if(a.fixLabel||a.fixAll){var yn=Le.get("type");if(yn==="text"){Nr=Le.attr("fontSize")||12;var Kr=Ur[Le.get("name")],ur=Xr[Le.get("name")],Tr=Kr?Kr.fontSize:12,an=ur?ur.fontSize:12,fn=Tr||an||12;if(b<=1&&Le.attr("fontSize",fn/b),nn)break}}if((a.fixLineWidth||a.fixAll)&&Le.get("isKeyShape")){nn=Le.attr("lineWidth")||0;var Jr=Ur.lineWidth||Xr.lineWidth||1;if(b<=1&&Le.attr("lineWidth",Jr/b),Nr)break}}}}n.zoomTo(b,{x:s.x,y:s.y}),n.emit("wheelzoom",r)}}}},ai=v(14141),ki=v(27295),G0={onMouseEnter:function(r){var t=r.item;this.currentTarget=t,this.showTooltip(r),this.graph.emit("tooltipchange",{item:r.item,action:"show"})},onMouseMove:function(r){if(!this.shouldUpdate(r)){this.hideTooltip();return}!this.currentTarget||r.item!==this.currentTarget||this.updatePosition(r)},onMouseLeave:function(r){!this.shouldEnd(r)||(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(r){var t=this.container;if(!(!r.item||r.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(r.item.get("model"),r);t.innerHTML=e,(0,ai.Z)(this.container,{visibility:"visible"}),this.updatePosition(r)}},hideTooltip:function(){(0,ai.Z)(this.container,{visibility:"hidden"})},updatePosition:function(r){var t=this.get("shouldBegin"),e=this,n=e.width,a=e.height,o=e.container,s=e.graph;if(!t(r)){(0,ai.Z)(o,{visibility:"hidden"});return}var u=s.getPointByClient(r.clientX,r.clientY),h=s.getCanvasByPoint(u.x,u.y),p=h.x,b=h.y,k=o.getBoundingClientRect();p>n/2?p-=k.width:p+=this.offset,b>a/2?b-=k.height:b+=this.offset;var R=p+"px",Y=b+"px";(0,ai.Z)(this.container,{left:R,top:Y,visibility:"visible"})},createTooltip:function(r){var t=r.get("el");t.style.position="relative";var e=(0,ki.Z)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),(0,ai.Z)(e,{position:"absolute",visibility:"visible"}),this.width=r.get("width"),this.height=r.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},WE=(0,he.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},G0),jE=(0,he.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},G0),Ki=v(8098),UE={getDefaultCfg:function(){return{delegate:!0,delegateStyle:{},delegateShapes:{},delegateShapeBBoxs:{}}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd","canvas:mouseleave":"onOutOfRange"}},onDragStart:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(!!n){var a=t.get("customGroupControll"),o=a.customGroup,s=o[n].nodeGroup;this.targetGroup=s,this.mouseOrigin={x:r.x,y:r.y};for(var u=t.save().groups,h=null,p=0;p<u.length;p++){var b=u[p];if(n===b.id){h=b.parentId;break}}if(h){var k=o[h].nodeGroup;a.setGroupStyle(k.get("keyShape"),"hover")}}},onDrag:function(r){!this.mouseOrigin||this.updateDelegate(r)},onDragEnd:function(r){var t=this.graph,e=r.target.get("groupId");if(this.delegateShapes[e]&&(this.delegateShapeBBox=this.delegateShapes[e].getBBox(),this.delegateShapes[e].remove(),delete this.delegateShapes[e]),!!this.delegateShapeBBox){var n=t.get("customGroupControll"),a=this.delegateShapeBBoxs[e];n.updateGroup(e,a,this.mouseOrigin),this.mouseOrigin=null,this.shapeOrigin=null,n.resetNodePoint(),this.delegateShapeBBox=null}},updateDelegate:function(r){var t=this.graph,e=r.target.get("groupId"),n=this.targetGroup.get("keyShape"),a=this.delegateShapes[e],o=n.getBBox(),s=n.get("type");if(a){var it=this,tt=it.mouseOrigin,_t=it.shapeOrigin,It=r.x-tt.x,Ht=r.y-tt.y,le=It+_t.x,xe=Ht+_t.y;a.attr({x:le,y:xe}),this.delegateShapeBBoxs[e]=a.getBBox()}else{var u=t.get("delegateGroup"),h=o.x,p=o.y,b=o.width,k=o.height,R=(0,he.__assign)({width:b,height:k},(0,Ki.default)({},dr.delegateStyle,this.delegateStyle));if(s==="circle"){var Y=b>k?b/2:k/2,V=h+Y,Z=p+Y;a=u.addShape("circle",{attrs:(0,he.__assign)({x:V,y:Z,r:Y},R),name:"circle-delegate-shape"}),this.shapeOrigin={x:V,y:Z}}else a=u.addShape("rect",{attrs:(0,he.__assign)({x:h,y:p},R),name:"rect-delegate-shape"}),this.shapeOrigin={x:h,y:p};this.delegateShapes[e]=a,this.delegateShapeBBoxs[e]=a.getBBox()}},onOutOfRange:function(r){var t=this,e=this.graph.get("canvas").get("el"),n=function a(o){o.target!==e&&(t.onDragEnd(r),document.body.removeEventListener("mouseup",a,!0))};this.mouseOrigin&&document.body.addEventListener("mouseup",n,!0)}},ZE=document.body,KE={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},maxMultiple:1.1,minMultiple:1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange",dragover:"onDragOver",dragleave:"onDragLeave"}},onDragOver:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var s=o.nodeGroup,u=s.get("keyShape");this.inGroupId=n,a.setGroupStyle(u,"hover")}}},onDragLeave:function(r){var t=this.graph,e=r.target,n=e.get("groupId");if(n&&this.origin){var a=t.get("customGroupControll"),o=a.getDeletageGroupById(n);if(o){var s=o.nodeGroup,u=s.get("keyShape");a.setGroupStyle(u,"default")}}n||(this.inGroupId=null)},onDragStart:function(r){var t=this.graph;if(!!this.shouldBegin.call(this,r)){var e=r.item;this.target=e;var n=e.getModel(),a=n.groupId;if(a){var o=t.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var u=s.nodeGroup,h=u.get("keyShape");o.setGroupStyle(h,"hover"),this.inGroupId=a}}this.origin={x:r.x,y:r.y},this.point={},this.originPoint={}}},onDrag:function(r){if(!!this.origin&&!!this.get("shouldUpdate").call(this,r)){this.update(this.target,r,!0);var t=r.item,e=this.graph,n=t.getModel(),a=n.groupId;if(a){var o=e.get("customGroupControll"),s=o.getDeletageGroupById(a);if(s){var u=s.nodeGroup,h=u.get("keyShape");this.inGroupId!==a?o.setGroupStyle(h,"default"):o.setGroupStyle(h,"hover")}}}},onDragEnd:function(r){if(!(!this.origin||!this.shouldEnd.call(this,r))){if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var t=this.target.get("delegateShape");t&&(t.remove(),this.target.set("delegateShape",null))}this.target&&this.update(this.target,r),this.point={},this.origin=null,this.originPoint={},this.target=null,this.setCurrentGroupStyle(r)}},setCurrentGroupStyle:function(r){var t=this.graph,e=r.item,n=e.getModel(),a=n.groupId,o=n.id,s=t.get("customGroupControll"),u=s.customGroup,h=t.get("groupNodes");if(this.inGroupId&&a){var p=u[a].nodeGroup;if(!p)return;var b=p.get("keyShape"),k=e.getBBox(),R=b.getBBox(),Y=k.centerX,V=k.centerY,Z=R.minX,it=R.minY,tt=R.maxX,_t=R.maxY;if(!(Y<tt*this.maxMultiple&&Y>Z*this.minMultiple&&V<_t*this.maxMultiple&&V>it*this.minMultiple)||this.inGroupId!==a){var It=h[a];h[a]=It.filter(function(xe){return xe!==o}),s.dynamicChangeGroupSize(r,p,b),delete n.groupId}if(this.inGroupId!==a){var Ht=u[this.inGroupId].nodeGroup;if(!Ht)return;var le=Ht.get("keyShape");h[this.inGroupId].indexOf(o)===-1&&h[this.inGroupId].push(o),n.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,Ht,le)}s.setGroupStyle(b,"default")}else if(this.inGroupId&&!a){var Ht=u[this.inGroupId].nodeGroup;if(!Ht)return;var b=Ht.get("keyShape");h[this.inGroupId].indexOf(o)===-1&&h[this.inGroupId].push(o),n.groupId=this.inGroupId,s.dynamicChangeGroupSize(r,Ht,b)}else if(!this.inGroupId&&a){Object.keys(h).forEach(function(me){var Le=h[me];h[me]=Le.filter(function(Ye){return Ye!==o})});var p=u[a].nodeGroup;if(!p)return;var b=p.get("keyShape");s.dynamicChangeGroupSize(r,p,b),delete n.groupId}this.inGroupId=null},onOutOfRange:function(r){var t=this,e=t.graph.get("canvas").get("el");function n(a){a.target!==e&&(r.item=t.target,t.onDragEnd(r),document.body.removeEventListener("mouseup",n,!0))}t.origin&&ZE.addEventListener("mouseup",n,!0)},update:function(r,t,e){var n=this.origin,a=r.get("model"),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;if(e){this.updateDelegate(t,s,u);return}var h={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(r,h):(r.updatePosition(h),this.graph.paint())},updateDelegate:function(r,t,e){var n=this.graph,a=r.item,o=n.get("groupType"),s=a.get("keyShape").getBBox();if(!this.shape){var u=n.get("delegateGroup"),h=(0,Ki.default)({},dr.delegateStyle,this.delegateStyle);this.target&&(this.shape=u.addShape("rect",{attrs:(0,he.__assign)({width:s.width,height:s.height,x:t-s.width/2,y:e-s.height/2},h),name:"delegate-shape"}),this.target.set("delegateShape",this.shape)),this.shape.set("capture",!1)}this.target&&(o==="circle"?this.shape.attr({x:t-s.width/2,y:e-s.height/2}):o==="rect"&&this.shape.attr({x:t,y:e}))}},z0="dblclick",$E=["click","dblclick"],QE={getDefaultCfg:function(){return{trigger:z0}},getEvents:function(){var r,t;return $E.includes(this.trigger)?t=this.trigger:(t=z0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r[""+t]="onGroupClick",r},onGroupClick:function(r){var t=r.target,e=this.graph,n=t.get("groupId");if(!!n){var a=e.get("customGroupControll");a.collapseExpandGroup(n)}}},X0="click",JE=["click","dblclick"],qE={getDefaultCfg:function(){return{trigger:X0,onChange:function(){}}},getEvents:function(){var r,t;return JE.includes(this.trigger)?t=this.trigger:(t=X0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["node:"+t]="onNodeClick",r.touchstart="onNodeClick",r},onNodeClick:function(r){var t=r.item,e=this.graph.findDataById(t.get("id"));if(!!e){var n=e.children;if(!(!n||n.length===0)){var a=!e.collapsed;if(!!this.shouldBegin(r,a)&&(e.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:r.item,collapsed:a}),!!this.shouldUpdate(r,a))){try{this.onChange(t,a)}catch(o){console.warn("G6 \u81EA 3.0.4 \u7248\u672C\u652F\u6301\u76F4\u63A5\u4ECE item.getModel() \u83B7\u53D6\u6E90\u6570\u636E(\u4E34\u65F6\u901A\u77E5\uFF0C\u5C06\u57283.2.0\u7248\u672C\u4E2D\u6E05\u9664)",o)}this.graph.layout()}}}}},tA=function i(r,t){if(t(r)!==!1&&r){var e=r.get("combos");if(e.length===0)return!1;(0,Ei.S6)(e,function(n){i(n,t)})}},eA={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(r){var t=r.item;if(!t||t.destroyed||!this.shouldUpdate(this,r))return!1;var e=t.getType();return e==="combo"},onDragStart:function(r){var t=this,e=this.graph,n=r.item;if(!!this.validationCombo(r)){this.targets=[];var a=e.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(u){var h=u.get("id");return o===h});s.length===0?this.targets.push(n):this.targets=a,this.activeState&&this.targets.map(function(u){var h=u.getModel();if(h.parentId){var p=e.findById(h.parentId);p&&e.setItemState(p,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:r.x,y:r.y},this.currentItemChildCombos=[],tA(n,function(u){if(u.destroyed)return!1;var h=u.getModel();return t.currentItemChildCombos.push(h.id),!0})}},onDrag:function(r){var t=this;if(!!this.origin&&!!this.validationCombo(r))if(this.enableDelegate)this.updateDelegate(r);else{if(this.activeState){var e=this.graph,n=r.item,a=n.getModel(),o=e.getCombos(),s=n.getBBox(),u=s.centerX,h=s.centerY,p=s.width,b=o.filter(function(k){var R=k.getModel();return a.parentId,R.id!==a.id&&!t.currentItemChildCombos.includes(R.id)});b.map(function(k){var R=k.getBBox(),Y=R.centerX,V=R.centerY,Z=R.width,it=u-Y,tt=h-V,_t=2*Math.sqrt(it*it+tt*tt);p+Z-_t>.8*p?e.setItemState(k,t.activeState,!0):e.setItemState(k,t.activeState,!1)})}(0,Ei.S6)(this.targets,function(k){t.updateCombo(k,r)})}},updatePositions:function(r){var t=this;this.enableDelegate&&(0,Ei.S6)(this.targets,function(e){t.updateCombo(e,r)})},onDrop:function(r){var t=this,e=r.item;if(!(!e||!this.targets||e.destroyed)){this.updatePositions(r);var n=this.graph,a=e.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id)):n.updateCombo(e)}),this.end(e,r),this.endComparison=!0}},onNodeDrop:function(r){var t=this;if(!(!this.targets||this.targets.length===0)){this.updatePositions(r);var e=this.graph,n=r.item,a=n.getModel().comboId,o;if(a){if(this.activeState){var s=e.findById(a);e.setItemState(s,this.activeState,!1)}this.targets.map(function(u){t.onlyChangeComboSize?e.updateCombo(u):a!==u.getID()&&(o=e.findById(a),a!==u.getModel().parentId&&e.updateComboTree(u,a))})}else this.targets.map(function(u){if(t.onlyChangeComboSize)e.updateCombo(u);else{var h=u.getModel();h.comboId&&e.updateComboTree(u)}});this.endComparison=!0,this.end(o,r)}},onDragEnter:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(r){if(!!this.origin&&!!this.validationCombo(r)){var t=r.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(r){if(!(!this.targets||this.targets.length===0)){var t=r.item;this.updatePositions(r);var e=this.getParentCombo(t.getModel().parentId),n=this.graph;e&&this.activeState&&n.setItemState(e,this.activeState,!1),this.end(void 0,r)}},end:function(r,t){var e=this;if(!!this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}r&&this.activeState&&n.setItemState(r,this.activeState,!1),r||this.targets.map(function(o){e.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(r,t){var e=this;if(t(r)!==!1&&r){var n=r.get("combos");(0,Ei.S6)(n,function(o){e.traverse(o,t)});var a=r.get("nodes");(0,Ei.S6)(a,function(o){e.traverse(o,t)})}},updateCombo:function(r,t){var e=this;this.traverse(r,function(n){return n.destroyed?!1:(e.updateSignleItem(n,t),!0)})},updateSignleItem:function(r,t){var e=this.origin,n=this.graph,a=r.getModel(),o=r.get("id");this.point[o]||(this.point[o]={x:a.x,y:a.y});var s=t.x-e.x+this.point[o].x,u=t.y-e.y+this.point[o].y;n.updateItem(r,{x:s,y:u})},getParentCombo:function(r){var t=this.graph;if(!!r){var e=t.findById(r);if(!!e)return e}},updateDelegate:function(r){var t=this.graph;if(this.delegateShape){var k=r.x-this.origin.x+this.originPoint.minX,R=r.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:R})}else{var e=t.get("delegateGroup"),n=null;this.targets.length>1?n=M0(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,h=n.minX,p=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:h,minY:p};var b=(0,he.__assign)((0,he.__assign)({},dr.delegateStyle),this.delegateStyle);this.delegateShape=e.addShape("rect",{attrs:(0,he.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},b),name:"combo-delegate-shape"})}}},H0="dblclick",rA=["click","dblclick"],nA={getDefaultCfg:function(){return{trigger:H0,relayout:!0}},getEvents:function(){var r,t;return rA.includes(this.trigger)?t=this.trigger:(t=H0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),r={},r["combo:"+t]="onComboClick",r},onComboClick:function(r){var t=r.item,e=this,n=e.graph,a=e.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;!s||(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},V0=function(r,t,e){return r>=t&&r<=e},Ol=function(r,t,e,n){var a=.001,o={x:e.x-r.x,y:e.y-r.y},s={x:t.x-r.x,y:t.y-r.y},u={x:n.x-e.x,y:n.y-e.y},h=s.x*u.y-s.y*u.x,p=h*h,b=s.x*s.x+s.y*s.y,k=u.x*u.x+u.y*u.y,R=null;if(p>a*b*k){var Y=(o.x*u.y-o.y*u.x)/h,V=(o.x*s.y-o.y*s.x)/h;V0(Y,0,1)&&V0(V,0,1)&&(R={x:r.x+Y*s.x,y:r.y+Y*s.y})}return R},W0=function(r,t){var e=r.x,n=r.y,a=r.width,o=r.height,s=e+a/2,u=n+o/2,h=[],p={x:s,y:u};h.push({x:e,y:n}),h.push({x:e+a,y:n}),h.push({x:e+a,y:n+o}),h.push({x:e,y:n+o}),h.push({x:e,y:n});for(var b=null,k=1;k<h.length&&(b=Ol(h[k-1],h[k],p,t),!b);k++);return b},j0=function(r,t){var e=r.x,n=r.y,a=r.r,o=t.x,s=t.y,u=o-e,h=s-n,p=Math.sqrt(u*u+h*h);if(p<a)return null;var b=Math.sign(u),k=Math.sign(h),R=Math.atan(h/u);return{x:e+Math.abs(a*Math.cos(R))*b,y:n+Math.abs(a*Math.sin(R))*k}},U0=function(r,t){var e=r.rx,n=r.ry,a=r.x,o=r.y,s=t.x-a,u=t.y-o,h=Math.atan2(u/n,s/e);return h<0&&(h+=2*Math.PI),{x:a+e*Math.cos(h),y:o+n*Math.sin(h)}},kl=function(r,t,e){e===void 0&&(e=1);var n=[r.x,r.y,e];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),N0.transformMat3(n,n,t),{x:n[0],y:n[1]}},Z0=function(r,t,e){e===void 0&&(e=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=Mo.invert([],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[r.x,r.y,e];return N0.transformMat3(a,a,n),{x:a[0],y:a[1]}},Sd=function(r,t,e){var n=r.x-t.x,a=r.y-t.y,o=r.x-e.x,s=r.y-e.y,u=(r.x*r.x-t.x*t.x-t.y*t.y+r.y*r.y)/2,h=(r.x*r.x-e.x*e.x-e.y*e.y+r.y*r.y)/2,p=a*o-n*s;return{x:-(s*u-a*h)/p,y:-(n*h-o*u)/p}},Bl=function(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.sqrt(e*e+n*n)},K0=function(r,t){var e=[];return r.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),e.push(a)}),e},Cd=function(r){for(var t=[],e=r.length,n=0;n<e;n+=1){t[n]=[];for(var a=0;a<e;a+=1)n===a?t[n][a]=0:r[n][a]===0||!r[n][a]?t[n][a]=Infinity:t[n][a]=r[n][a]}for(var o=0;o<e;o+=1)for(var n=0;n<e;n+=1)for(var a=0;a<e;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Md=function(r,t){var e=r.nodes,n=r.edges,a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){o[s.id]=u;var h=[];a.push(h)}),n&&n.forEach(function(s){var u=s.source,h=s.target,p=o[u],b=o[h];a[p][b]=1,t||(a[b][p]=1)}),a},$0=function(r,t){r.translate(t.x,t.y)},Q0=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=r.getCanvasBBox(),a=t.x-n.minX,o=t.y-n.minY,s=no(e,[["t",a,o]]);r.setMatrix(s)},iA=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=t;(0,Zi.default)(t)||(n=[t,t]),(0,Zi.default)(t)&&t.length===1&&(n=[t[0],t[0]]),e=no(e,[["s",n[0],n[1]]]),r.setMatrix(e)},aA=function(r,t){var e=r.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=no(e,[["r",t]]),r.setMatrix(e)},Jh=function(r,t,e){for(var n=[],a=0;a<r;a++)n[a]=0;return e.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function oA(i,r,t){return(t[0]-i[0])*(r[1]-i[1])==(r[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],r[0])<=t[0]&&t[0]<=Math.max(i[0],r[0])&&Math.min(i[1],r[1])<=t[1]&&t[1]<=Math.max(i[1],r[1])}var Dl=function(r,t,e){var n=!1,a=r.length,o=1e-6;function s(b){return Math.abs(b)<o?0:b<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var h=r[u],p=r[(u+1)%a];if(oA(h,p,[t,e]))return!0;s(h[1]-e)>0!=s(p[1]-e)>0&&s(t-(e-h[1])*(h[0]-p[0])/(h[1]-p[1])-h[0])<0&&(n=!n)}return n},J0=function(r,t){return!(t.minX>r.maxX||t.maxX<r.minX||t.minY>r.maxY||t.maxY<r.minY)},sA=function(r,t){var e=!1;return(0,y.each)(r,function(n){if(Ol(n.from,n.to,t.from,t.to))return e=!0,!1}),e},Ed=function(r,t){var e=function(k){var R=k.map(function(V){return V[0]}),Y=k.map(function(V){return V[1]});return{minX:Math.min.apply(null,R),maxX:Math.max.apply(null,R),minY:Math.min.apply(null,Y),maxY:Math.max.apply(null,Y)}},n=function(k){for(var R=[],Y=k.length,V=0;V<Y-1;V++){var Z=k[V],it=k[V+1];R.push({from:{x:Z[0],y:Z[1]},to:{x:it[0],y:it[1]}})}if(R.length>1){var tt=k[0],_t=k[Y-1];R.push({from:{x:_t[0],y:_t[1]},to:{x:tt[0],y:tt[1]}})}return R};if(r.length<2||t.length<2)return!1;var a=e(r),o=e(t);if(!J0(a,o))return!1;var s=!1;if((0,y.each)(t,function(b){if(Dl(r,b[0],b[1]))return s=!0,!1}),s||((0,y.each)(r,function(b){if(Dl(t,b[0],b[1]))return s=!0,!1}),s))return!0;var u=n(r),h=n(t),p=!1;return(0,y.each)(h,function(b){if(sA(u,b))return p=!0,!1}),p},as=function(){function i(r,t,e,n){this.x1=r,this.y1=t,this.x2=e,this.y2=n}return i.prototype.getBBox=function(){var r=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),e=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:r,y:t,minX:r,minY:t,maxX:e,maxY:n,width:e-r,height:n-t};return a},i}(),Ad=function(r,t){var e={top:[r.minX,r.minY,r.maxX,r.minY],left:[r.minX,r.minY,r.minX,r.maxY],bottom:[r.minX,r.maxY,r.maxX,r.maxY],right:[r.maxX,r.minY,r.maxX,r.maxY]};return e[t]},lA=function(r,t){var e=(t.x2-t.x1)*(r.y1-t.y1)-(t.y2-t.y1)*(r.x1-t.x1),n=(r.x2-r.x1)*(r.y1-t.y1)-(r.y2-r.y1)*(r.x1-t.x1),a=(t.y2-t.y1)*(r.x2-r.x1)-(t.x2-t.x1)*(r.y2-r.y1);if(a){var o=e/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},q0=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=0,o=[],s=0;s<4;s++){var u=Ad(n,e[s]),h=u[0],p=u[1],b=u[2],k=u[3];o[s]=Ol({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:h,y:p},{x:b,y:k}),o[s]&&(a+=1)}return[o,a]},Td=function(r,t){for(var e=["top","left","bottom","right"],n=r.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Ad(n,e[s]),h=u[0],p=u[1],b=u[2],k=u[3],R=lA(t,new as(h,p,b,k));R=Math.abs(R-.5),R>=0&&R<=1&&(o+=1,a=R<a?R:a)}return o===0?-1:a},tm=function(r){var t=0,e=0;if(r.length>0){for(var n=0,a=r;n<a.length;n++){var o=a[n];t+=o.x,e+=o.y}t/=r.length,e/=r.length}return{x:t,y:e}},qh=function(r,t){return Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)},em=function(r,t){var e=t.x1,n=t.y1,a=t.x2-e,o=t.y2-n,s=r.x-e,u=r.y-n,h=s*a+u*o,p;h<=0?p=0:(s=a-s,u=o-u,h=s*a+u*o,h<=0?p=0:p=h*h/(a*a+o*o));var b=s*s+u*u-p;return b<0&&(b=0),b},Pd=function(r,t,e){return e===void 0&&(e=.001),Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)<Math.pow(e,2)},rm=function(r,t){var e=r.x<t.x,n=r.x>t.x+t.width,a=r.y>t.y+t.height,o=r.y<t.y,s=e||n||a||o;if(!s)return 0;if(a&&!e&&!n)return Math.pow(t.y+t.height-r.y,2);if(o&&!e&&!n)return Math.pow(r.y-t.y,2);if(e&&!a&&!o)return Math.pow(t.x-r.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-r.x,2);var u=Math.min(Math.abs(t.x-r.x),Math.abs(t.x+t.width-r.x)),h=Math.min(Math.abs(t.y-r.y),Math.abs(t.y+t.height-r.y));return u*u+h*h},Ld=v(62029),uA=function(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,n){if(e.charAt(0)==="\\")return e.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},nm=function(r){var t=[];if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);for(var e=0,n=r;e<n.length;e++){var a=n[e],o=a.x,s=a.y;t.push(o),t.push(s)}var u=(0,Ld.catmullRom2Bezier)(t);return u.unshift(["M",r[0].x,r[0].y]),u},tf=function(r,t,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var a={x:(1-e)*r.x+e*t.x,y:(1-e)*r.y+e*t.y},o=[];di.normalize(o,[t.x-r.x,t.y-r.y]),o.length===0&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},im=function(r,t){var e=r.length;if(!e)return"";for(var n="",a="",o=0;o<e;o++){var s=r[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=uA(a,s)}return t&&(n+="Z"),n},ef=function(r){var t=[];return r.forEach(function(e){var n=e[0];if(n!=="A")for(var a=1;a<e.length;a=a+2)t.push([e[a],e[a+1]]);else{var o=e.length;t.push([e[o-2],e[o-1]])}}),t},_d=function(r){if(r.length<2)throw new Error("point length must largn than 2, now it's "+r.length);var t=r[0],e=r[1],n=r[r.length-1],a=r[r.length-2];r.unshift(n),r.unshift(a),r.push(t),r.push(e);for(var o=[],s=1;s<r.length-2;s+=1){var u=r[s-1].x,h=r[s-1].y,p=r[s].x,b=r[s].y,k=r[s+1].x,R=r[s+1].y,Y=s!==r.length-2?r[s+2].x:k,V=s!==r.length-2?r[s+2].y:R,Z=p+(k-u)/6,it=b+(R-h)/6,tt=k-(Y-p)/6,_t=R-(V-b)/6;o.push(["C",Z,it,tt,_t,k,R])}return o.unshift(["M",n.x,n.y]),o},am=function(r,t){return di.scale([],di.normalize([],r),t)},om=function(r,t){var e=[r[1]-t[1],t[0]-r[0]],n=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[e[0]/n,e[1]/n]},sm=function(r,t){return[t[0]-r[0],t[1]-r[1]]};function lm(i,r){var t=function(b){var k=[b[0][0],b[0][1]-r],R=[b[0][0],b[0][1]+r];return"M "+k+" A "+r+","+r+",0,0,0,"+R+" A "+r+","+r+",0,0,0,"+k},e=function(b){var k=di.scale([],om(b[0],b[1]),r),R=di.scale([],k,-1),Y=di.add([],b[0],k),V=di.add([],b[1],k),Z=di.add([],b[1],R),it=di.add([],b[0],R);return"M "+Y+" L "+V+" A "+[r,r,"0,0,0",Z].join(",")+" L "+it+" A "+[r,r,"0,0,0",Y].join(",")};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return e(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=di.scale([],om(o,s),r);n[a]=[di.add([],o,u),di.add([],s,u)]}var h="A "+[r,r,"0,0,0,"].join(",");return n=n.map(function(p,b){var k="";return b===0&&(k="M "+n[n.length-1][1]+" "),k+=h+p[0]+" L "+p[1],k}),n.join(" ")}function um(i,r){var t=i.length,e=function(p){var b=[p[0][0],p[0][1]-r],k=[p[0][0],p[0][1]+r];return"M "+b+" A "+[r,r,"0,0,0",k].join(",")+" A "+[r,r,"0,0,0",b].join(",")},n=function(p){var b=sm(p[0],p[1]),k=am(b,r),R=di.add([],p[0],di.scale([],k,-1)),Y=di.add([],p[1],k),V=1.2*r,Z=am(di.normalize([],b),V),it=di.scale([],Z,-1),tt=di.add([],R,it),_t=di.add([],Y,it),It=di.add([],R,Z);return"M "+R+" C "+[tt,_t,Y].join(",")+" S "+[It,R].join(",")+" Z"};if(!i||t<1)return"";if(t===1)return e(i);if(t===2)return n(i);for(var a=i.map(function(h,p){var b=i[(p+1)%t];return{p:h,v:di.normalize([],sm(h,b))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=di.normalize([],di.add([],a[s].v,di.scale([],a[o].v,-1)));a[o].p=di.add([],a[o].p,di.scale([],u,r))}return a.map(function(h){var p=h.p;return{x:p[0],y:p[1]}})}var hm="shift",hA=["drag","shift","ctrl","alt","control"],fA=function(r,t){var e,n=r.getKeyShape();if(r.get("type")==="path")e=ef(n.attr("path"));else{var a=n.getCanvasBBox();e=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return Ed(t,e)},cA={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:hm,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return hA.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=hm,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(r){var t=this.lasso,e=r.item;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:r.x,y:r.y},this.points.push(this.originPoint),t.show())},onDragMove:function(r){!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push({x:r.x,y:r.y}),this.updateLasso(r))},onDragEnd:function(r){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var r=this.points,t=[];return r.length&&(r.forEach(function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",r[0].x,r[0].y])),t},clearStates:function(){var r=this,t=r.graph,e=r.selectedState,n=t.findAllByState("node",e),a=t.findAllByState("edge",e);n.forEach(function(o){return t.setItemState(o,e,!1)}),a.forEach(function(o){return t.setItemState(o,e,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var r=this,t=this,e=t.graph,n=t.shouldUpdate,a=this.points.map(function(p){return[e.getCanvasByPoint(p.x,p.y).x,e.getCanvasByPoint(p.x,p.y).y]}),o=this.selectedState,s=[],u=[];e.getNodes().forEach(function(p){if(fA(p,a)&&n(p,"select")){s.push(p);var b=p.getModel();u.push(b.id),e.setItemState(p,o,!0)}});var h=[];this.includeEdges&&s.forEach(function(p){var b=p.getOutEdges();b.forEach(function(k){var R=k.getModel(),Y=R.source,V=R.target;u.includes(Y)&&u.includes(V)&&n(k,"select")&&(h.push(k),e.setItemState(k,r.selectedState,!0))})}),this.selectedEdges=h,this.selectedNodes=s,this.onSelect&&this.onSelect(s,h),e.emit("nodeselectchange",{selectedItems:{nodes:s,edges:h},select:!0})},createLasso:function(){var r=this,t=r.graph.get("delegateGroup").addShape("path",{attrs:(0,he.__assign)({path:[]},r.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.points=[],t},updateLasso:function(r){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(r){var t=r.key;!t||(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},fm="click",vA=["click","drag"],cm=void 0,dA=["shift","ctrl","control","alt","meta",void 0],pA={getDefaultCfg:function(){return{trigger:fm,key:cm,edgeConfig:{}}},getEvents:function(){var r=this;vA.indexOf(r.trigger.toLowerCase())>-1||(r.trigger=fm,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),r.key&&dA.indexOf(r.key.toLowerCase())===-1&&(r.trigger=cm,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return r.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:r.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),r.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item;(!e||e.getID()===t.source||e.getType()!=="node")&&t.cancelCreating({item:t.edge,x:r.x,y:r.y})}},onClick:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=r.item,n=t.graph,a=e.getModel();if(t.addingEdge&&t.edge){if(!t.shouldEnd.call(t,r))return;var o={target:a.id};t.source===a.id&&(o.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,o),n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin.call(t,r))return;t.edge=n.addItem("edge",(0,he.__assign)({source:a.id,target:a.id},t.edgeConfig),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(r){var t=this;if(!(t.key&&!t.keydown)){var e={x:r.x,y:r.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:e},!1)}},cancelCreating:function(r){var t=this;if(!(t.key&&!t.keydown)){var e=t.graph,n=r.item;if(t.addingEdge&&r.target&&r.target.isCanvas&&r.target.isCanvas()){e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1;return}if(t.addingEdge&&t.edge===n){var a=!0;if(!e.get("groupByTypes"))for(var o=r.x,s=r.y,u=e.getNodes(),h=u.length,p=0;p<h;p++){var b=u[p],k=b.getModel(),R=b.getBBox();if(o<=R.maxX&&o>=R.minX&&s<=R.maxY&&s>=R.minY){if(!t.shouldEnd.call(t,{x:r.x,y:r.y,canvasX:r.canvasX,canvasY:r.canvasY,clientX:r.clientX,clientY:r.clientY,item:b}))return;e.emit("beforecreateedge",{}),e.updateItem(t.edge,{target:k.id}),e.emit("aftercreateedge",{edge:t.edge}),a=!1;break}}a&&e.removeItem(t.edge,!1),t.edge=null,t.addingEdge=!1}}},onKeyDown:function(r){var t=this,e=r.key;!e||(e.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var r=this;r.addingEdge&&r.edge&&(r.graph.removeItem(r.edge,!1),r.addingEdge=!1,r.edge=null),this.keydown=!1}},vm="ctrl",gA=["shift","ctrl","alt","control"],yA="1",mA={getDefaultCfg:function(){return{trigger:vm,combinedKey:yA,functionName:"fitView",functionParams:[]}},getEvents:function(){return gA.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=vm,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(r){var t=r.key;if(!!t){var e=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===e||n==="control"&&e==="ctrl"||n==="ctrl"&&e==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},xA={"drag-canvas":PE,"zoom-canvas":VE,"drag-node":RE,"activate-relations":NE,"brush-select":GE,"click-select":XE,"lasso-select":cA,tooltip:WE,"edge-tooltip":jE,"drag-group":UE,"drag-node-with-group":KE,"collapse-expand-group":QE,"collapse-expand":qE,"drag-combo":eA,"collapse-expand-combo":nA,"create-edge":pA,"shortcuts-call":mA};(0,ii.default)(xA,function(i,r){gd.registerBehavior(r,i)});var dm=gd,os=v(5162),Fl=v(40169),Na=v(64916),pm=v(97395),bA=function(r){var t=(0,pm.default)(r.groups,"id"),e=(0,pm.default)(r.groups,"parentId"),n={};for(var a in e)if(!!a){var o=e[a],s=t[a];if(s&&o){var u=(0,he.__spreadArrays)(o,s);n[a]=u}else o&&(n[a]=o)}var h=(0,he.__assign)((0,he.__assign)({},t),n),p={};for(var b in h)if(!(!b||b==="undefined")){var o=h[b].map(function(V){return V.id});p[b]=o}var k={},R=function(V){if(!V||V==="undefined")return"continue";for(var Z=p[V],it=[],tt=0,_t=Z;tt<_t.length;tt++){var It=_t[tt],Ht=h[It].map(function(xe){return xe.id});it.push.apply(it,Ht)}var le=r.nodes?r.nodes.filter(function(xe){return it.indexOf(xe.groupId)>-1||it.indexOf(xe.parentId)>-1}).map(function(xe){return xe.id}):[];k[V]=le};for(var b in p)R(b);return k},wA=function(){function i(r){this.graph=r,this.destroyed=!1,this.modes=r.get("modes")||{default:[]},this.formatModes(),this.mode=r.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var r=this.modes;(0,ii.default)(r,function(t){(0,ii.default)(t,function(e,n){(0,ti.default)(e)&&(t[n]={type:e})})})},i.prototype.setBehaviors=function(r){var t=this.graph,e=this.modes[r],n=[],a;(0,ii.default)(e||[],function(o){var s=gd.getBehavior(o.type);!s||(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(r,t){return(0,ii.default)(t,function(e){r.indexOf(e)<0&&((0,ti.default)(e)&&(e={type:e}),r.push(e))}),r},i.filterBehaviors=function(r,t){var e=[];return r.forEach(function(n){var a="";(0,ti.default)(n)?a=n:a=n.type,t.indexOf(a)<0&&e.push(n)}),e},i.prototype.setMode=function(r){var t=this,e=t.modes,n=t.graph,a=r,o=e[a];!o||(n.emit("beforemodechange",{mode:r}),(0,ii.default)(this.currentBehaves,function(s){s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:r}),this.mode=r)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(r,t,e){var n=this,a;if((0,Zi.default)(r)?a=r:a=[r],(0,Zi.default)(t))return(0,ii.default)(t,function(s){n.modes[s]?e?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):e&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||e&&(this.modes[o]=a),e?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.setMode(this.mode),this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),SA=wA,CA=function(){function i(r){this.destroyed=!1,this.graph=r,this.destroyed=!1}return i.prototype.getViewCenter=function(){var r=this.getFormatPadding(),t=this.graph,e=this.graph.get("width"),n=t.get("height");return{x:(e-r[1]-r[3])/2+r[3],y:(n-r[0]-r[2])/2+r[0]}},i.prototype.fitCenter=function(){var r=this.graph,t=r.get("group");t.resetMatrix();var e=t.getCanvasBBox();if(!(e.width===0||e.height===0)){var n=this.getViewCenter(),a={x:e.x+e.width/2,y:e.y+e.height/2};r.translate(n.x-a.x,n.y-a.y)}},i.prototype.fitView=function(){var r=this.graph,t=this.getFormatPadding(),e=r.get("width"),n=r.get("height"),a=r.get("group");a.resetMatrix();var o=a.getCanvasBBox();if(!(o.width===0||o.height===0)){var s=this.getViewCenter(),u={x:o.x+o.width/2,y:o.y+o.height/2};r.translate(s.x-u.x,s.y-u.y);var h=(e-t[1]-t[3])/o.width,p=(n-t[0]-t[2])/o.height,b=h;h>p&&(b=p),r.zoom(b,s)}},i.prototype.getFormatPadding=function(){var r=this.graph.get("fitViewPadding");return md(r)},i.prototype.focusPoint=function(r,t,e){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-r.x)*s[0],h=(o.y-r.y)*s[4],p=0,b=0,k=0,R=0;this.graph.get("canvas").animate(function(Y){k=u*Y,R=h*Y,n.graph.translate(k-p,R-b),p=k,b=R},(0,he.__assign)({},e))}else this.graph.translate((o.x-r.x)*s[0],(o.y-r.y)*s[4])},i.prototype.getPointByCanvas=function(r,t){var e=this.graph.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var n=Z0({x:r,y:t},e);return n},i.prototype.getPointByClient=function(r,t){var e=this.graph.get("canvas"),n=e.getPointByClient(r,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(r,t){var e=this.graph.get("canvas"),n=this.getCanvasByPoint(r,t),a=e.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(r,t){var e=this.graph.get("group").getMatrix();return e||(e=[1,0,0,0,1,0,0,0,1]),kl({x:r,y:t},e)},i.prototype.focus=function(r,t,e){(0,ti.default)(r)&&(r=this.graph.findById(r));var n=r.get("group"),a=n.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r&&this.focusPoint({x:a[6],y:a[7]},t,e)},i.prototype.changeSize=function(r,t){var e=this.graph;if(!(0,Ra.default)(r)||!(0,Ra.default)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");e.set({width:r,height:t});var n=e.get("canvas");n.changeSize(r,t);var a=e.get("plugins");a.forEach(function(o){if(o.get("gridContainer")){var s=e.get("minZoom");(0,ai.Z)(o.get("container"),{width:r+"px",height:t+"px"}),(0,ai.Z)(o.get("gridContainer"),{width:r/s+"px",height:t/s+"px",left:0,top:0})}})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),MA=CA,Rl=v(52493),rf=v(78435),EA=function(){function i(r){this.preItem=null,this.graph=r,this.extendEvents=[],this.dragging=!1,this.destroyed=!1,this.initEvents()}return i.prototype.initEvents=function(){var r=this,t=r.graph,e=r.extendEvents,n=t.get("canvas"),a=n.get("el"),o=(0,rf.default)(this,"onCanvasEvents"),s=(0,rf.default)(this,"onExtendEvents"),u=(0,rf.default)(this,"onWheelEvent");n.on("*",o),this.canvasHandler=o,e.push((0,Rl.Z)(a,"DOMMouseScroll",u)),e.push((0,Rl.Z)(a,"mousewheel",u)),typeof window!="undefined"&&(e.push((0,Rl.Z)(window,"keydown",s)),e.push((0,Rl.Z)(window,"keyup",s)),e.push((0,Rl.Z)(window,"focus",s)))},i.getItemRoot=function(r){for(;r&&!r.get("item");)r=r.get("parent");return r},i.prototype.onCanvasEvents=function(r){var t=this.graph,e=t.get("canvas"),n=r.target,a=r.type;r.canvasX=r.x,r.canvasY=r.y;var o={x:r.canvasX,y:r.canvasY},s=t.get("group"),u=s.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),C0(u)&&(o=t.getPointByClient(r.clientX,r.clientY)),r.x=o.x,r.y=o.y,r.currentTarget=t,n===e){a==="mousemove"&&this.handleMouseMove(r,"canvas"),r.target=e,r.item=null,t.emit(a,r),t.emit("canvas:"+a,r);return}var h=i.getItemRoot(n);if(!h){t.emit(a,r);return}var p=h.get("item");if(!p.destroyed){var b=p.getType();if(r.target=n,r.item=p,r.canvasX===r.x&&r.canvasY===r.y){var k=t.getCanvasByPoint(r.x,r.y);r.canvasX=k.x,r.canvasY=k.y}t.emit(a,r),r.name&&!r.name.includes(":")?t.emit(b+":"+a,r):t.emit(r.name,r),a==="dragstart"&&(this.dragging=!0),a==="dragend"&&(this.dragging=!1),a==="mousemove"&&this.handleMouseMove(r,b)}},i.prototype.onExtendEvents=function(r){this.graph.emit(r.type,r)},i.prototype.onWheelEvent=function(r){(0,to.default)(r.wheelDelta)&&(r.wheelDelta=-r.detail),this.graph.emit("wheel",r)},i.prototype.handleMouseMove=function(r,t){var e=this,n=e.graph,a=e.preItem,o=n.get("canvas"),s=r.target===o?null:r.item;r=Uh(r),a&&a!==s&&!a.destroyed&&(r.item=a,this.emitCustomEvent(a.getType(),"mouseleave",r),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",r)),s&&a!==s&&(r.item=s,this.emitCustomEvent(t,"mouseenter",r),this.dragging&&this.emitCustomEvent(t,"dragenter",r)),this.preItem=s},i.prototype.emitCustomEvent=function(r,t,e){e.type=t,this.graph.emit(r+":"+t,e)},i.prototype.destroy=function(){var r=this,t=r.graph,e=r.canvasHandler,n=r.extendEvents,a=t.get("canvas");a.off("*",e),(0,ii.default)(n,function(o){o.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},i}(),AA=EA,gm=v(23098),ym=v(41367),mm=v(18092),TA=v(87293),PA={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,"0":.6,"1":.40099945068359377,"2":.6,"3":.6,"4":.6,"5":.6,"6":.6,"7":.5469985961914062,"8":.6,"9":.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Aa=Math.PI,Id=Math.sin,Od=Math.cos,Hi=Id(Aa/8),Vi=Od(Aa/8),nf=function(r,t){var e=r.getBBox(),n={x:e.minX,y:e.minY},a={x:e.maxX,y:e.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=kl(n,o),a=kl(a,o)}var s=n.x,u=n.y,h=a.x,p=a.y;return{x:s,y:u,minX:s,minY:u,maxX:h,maxY:p,width:h-s,height:p-u}},xm=function(r){var t=r.sourceNode||r.targetNode,e=t.get("group"),n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=r.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,h=s.position||dr.defaultLoopPosition,p=[n[6],n[7]],b=[r.startPoint.x,r.startPoint.y],k=[r.endPoint.x,r.endPoint.y],R=o.height/2,Y=o.height/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi;if(b[0]===k[0]&&b[1]===k[1]){switch(h){case"top":b=[p[0]-V,p[1]-Z],k=[p[0]+it,p[1]-tt];break;case"top-right":R=o.height/2,Y=o.width/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]+V,p[1]-Z],k=[p[0]+tt,p[1]-it];break;case"right":R=o.width/2,Y=o.width/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]+Z,p[1]-V],k=[p[0]+tt,p[1]+it];break;case"bottom-right":R=o.width/2,Y=o.height/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]+Z,p[1]+V],k=[p[0]+it,p[1]+tt];break;case"bottom":R=o.height/2,Y=o.height/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]+V,p[1]+Z],k=[p[0]-it,p[1]+tt];break;case"bottom-left":R=o.height/2,Y=o.width/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]-V,p[1]+Z],k=[p[0]-tt,p[1]+it];break;case"left":R=o.width/2,Y=o.width/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]-Z,p[1]+V],k=[p[0]-tt,p[1]-it];break;case"top-left":R=o.width/2,Y=o.height/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]-Z,p[1]-V],k=[p[0]-it,p[1]-tt];break;default:R=o.width/2,Y=o.width/2,V=R*Hi,Z=R*Vi,it=Y*Hi,tt=Y*Vi,b=[p[0]-V,p[1]-Z],k=[p[0]+it,p[1]-tt]}if(s.clockwise===!1){var _t=[b[0],b[1]];b=[k[0],k[1]],k=[_t[0],_t[1]]}}var It=[b[0]-p[0],b[1]-p[1]],Ht=(R+u)/R,le=(Y+u)/Y;s.clockwise===!1&&(Ht=(Y+u)/Y,le=(R+u)/R);var xe=di.scale([],It,Ht),Ce=[p[0]+xe[0],p[1]+xe[1]],me=[k[0]-p[0],k[1]-p[1]],Le=di.scale([],me,le),Ye=[p[0]+Le[0],p[1]+Le[1]];return r.startPoint={x:b[0],y:b[1]},r.endPoint={x:k[0],y:k[1]},r.controlPoints=[{x:Ce[0],y:Ce[1]},{x:Ye[0],y:Ye[1]}],r},af=function(r,t,e,n,a){var o=1e-4,s=[],u=r.getPoint(t);if(u===null)return{x:0,y:0,angle:0};if(t<o)s=r.getStartTangent().reverse();else if(t>1-o)s=r.getEndTangent();else{var h=r.getPoint(t+o);s.push([u.x,u.y]),s.push([h.x,h.y])}var p=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(p<0&&(p+=Aa*2),e&&(u.x+=Od(p)*e,u.y+=Id(p)*e),n){var b=p-Aa/2;p>1/2*Aa&&p<3*1/2*Aa&&(b-=Aa),u.x+=Od(b)*n,u.y+=Id(b)*n}var k={x:u.x,y:u.y,angle:p};return a?(p>1/2*Aa&&p<3*1/2*Aa&&(p-=Aa),(0,he.__assign)({rotate:p},k)):k},bm=function i(r,t){if(t(r)===!1)return!1;if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return!1}return!0},LA=function i(r,t){if(r&&r.children){for(var e=r.children.length-1;e>=0;e--)if(!i(r.children[e],t))return}return t(r)!==!1},aa=function(r,t){typeof t=="function"&&bm(r,t)},Ta=function(r,t){typeof t=="function"&&LA(r,t)},wm=function(r,t){var e=["V","TB","BT"],n={x:Infinity,y:Infinity},a={x:-Infinity,y:-Infinity},o="x",s="y";t&&e.indexOf(t)>=0&&(s="x",o="y");var u=0;aa(r,function(b){return u++,b.x>a.x&&(a.x=b.x),b.x<n.x&&(n.x=b.x),b.y>a.y&&(a.y=b.y),b.y<n.y&&(n.y=b.y),!0});var h=Aa*2/u,p=a[s]-n[s];return p===0||aa(r,function(b){var k=(b[s]-n[s])/p*(Aa*2-h)+h,R=Math.abs(o==="x"?b.x-r.x:b.y-r.y);return b.x=R*Math.cos(k),b.y=R*Math.sin(k),!0}),r},Sm=function(r,t){return t*(PA[r]||1)},Cm=function(r,t){var e=0,n=new RegExp("[\u4E00-\u9FA5]+");return r.split("").forEach(function(a){n.test(a)?e+=t:e+=Sm(a,t)}),[e,t]},kd=function(r,t){var e=[],n={},a={};r.forEach(function(s){a[s.id]=s}),r.forEach(function(s,u){var h=(0,y.clone)(s);h.itemType="combo",h.children=void 0,h.parentId===h.id?(console.warn("The parentId for combo "+h.id+" can not be the same as the combo's id"),delete h.parentId):h.parentId&&!a[h.parentId]&&(console.warn("The parent combo for combo "+h.id+" does not exist!"),delete h.parentId);var p=n[h.id];if(p){if(h.children=p.children,n[h.id]=h,p=h,!p.parentId){e.push(p);return}var b=n[p.parentId];if(b)b.children?b.children.push(h):b.children=[h];else{var k={id:p.parentId,children:[p]};n[p.parentId]=k,n[h.id]=h}return}if((0,y.isString)(s.parentId)){var R=n[s.parentId];if(R)R.children?R.children.push(h):R.children=[h],n[h.id]=h;else{var Y={id:s.parentId,children:[h]};n[Y.id]=Y,n[h.id]=h}}else e.push(h),n[h.id]=h});var o={};return(t||[]).forEach(function(s){o[s.id]=s;var u=n[s.comboId];if(u){var h={id:s.id,comboId:s.comboId};u.children?u.children.push(h):u.children=[h],h.itemType="node",n[s.id]=h}}),e.forEach(function(s){s.depth=0,bm(s,function(u){var h,p=n[u.id].itemType;p==="node"?h=n[u.comboId]:h=n[u.parentId],h?p==="node"?u.depth=h.depth+1:u.depth=h.depth+2:u.depth=0;var b=o[u.id];return b&&(b.depth=u.depth),!0})}),e},Bd=function(r,t,e){var n=r,a,o={root:{children:r}},s=!1,u="root";(r||[]).forEach(function(R){if(!s){if(R.id===t){a=R,R.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0;return}aa(R,function(Y){return o[Y.id]={children:Y.children},n=o[Y.parentId||Y.comboId||"root"].children,Y&&(Y.removed||t===Y.id)&&n?(u=Y.parentId||Y.comboId||"root",a=Y,Y.itemType==="combo"?a.parentId=e:a.comboId=e,s=!0,!1):!0})}}),n=o[u].children;var h=n?n.indexOf(a):-1;if(h>-1&&n.splice(h,1),s||(a={id:t,itemType:"node",comboId:e},o[t]={children:void 0}),t){var p=!1;if(e){var b=0;(r||[]).forEach(function(R){p||aa(R,function(Y){return e===Y.id?(p=!0,Y.children?Y.children.push(a):Y.children=[a],b=Y.depth,a.itemType==="node"?a.depth=b+2:a.depth=b+1,!1):!0})})}else(!e||!p)&&a.itemType!=="node"&&r.push(a);var k=a.depth;aa(a,function(R){return R.itemType==="node"?k+=2:k+=1,R.depth=k,!0})}return r},Dd=function(r,t){var e={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return!r||r.length===0||(r.forEach(function(n){var a=t.findById(n.id);if(!(!a||!a.isVisible())){a.set("bboxCanvasCache",void 0);var o=a.getCanvasBBox();o.x&&e.minX>o.minX&&(e.minX=o.minX),o.y&&e.minY>o.minY&&(e.minY=o.minY),o.x&&e.maxX<o.maxX&&(e.maxX=o.maxX),o.y&&e.maxY<o.maxY&&(e.maxY=o.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(n){(e[n]===Infinity||e[n]===-Infinity)&&(e[n]=void 0)})),e},_A=function(r){var t=r.group,e=r.height,n=r.width,a=r.x,o=r.y,s=t.get("canvas"),u=s.get("width"),h=s.get("height"),p={start:{x:0,y:0},end:{x:0,y:0}};return p.start.x=a/u,p.start.y=o/h,p.end.x=(a+n)/u,p.end.y=(o+e)/h,p};function of(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?of=function(t){return typeof t}:of=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(i)}function Mm(i){if(typeof i!="string")return i;var r=function(xe){if(typeof xe!="string")return xe;try{return JSON.parse(xe.trim())}catch(Ce){return xe.trim()}},t=r(i);if(typeof t!="string")return t;for(var e=function(xe){return xe[xe.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var xe=[],Ce=0;Ce<arguments.length;Ce++)xe[Ce]=arguments[Ce];return xe.some(function(me){return e(o)===me})},u=function(){return e(a)},h=null,p=0,b="";p<n.length;){var k=n[p],R=s('"',"'");if(!R&&!k.trim()){p+=1;continue}var Y=n[p-1]==="\\",V=s("}"),Z=s("]"),it=s(","),tt=u();if(R)if(e(o)===k&&!Y){o.pop();var _t=r(b);tt.push(_t),h=_t,b=""}else b+=k;else if(Z&&k===",")b&&(tt.push(r(b)),b="");else if(V&&k===":")o.push(","),b&&(tt.push(b),b="");else if(it&&k===",")b&&(tt.push(r(b)),b=""),o.pop();else if(k==="}"&&(V||it)){b&&(tt.push(r(b)),b=""),it&&o.pop();for(var It={},Ht=1;Ht<tt.length;Ht+=2)It[tt[Ht-1]]=tt[Ht];a.pop(),a.length&&e(a).push(It),o.pop(),h=It}else k==="]"&&Z?(b&&(tt.push(r(b)),b=""),a.pop(),a.length&&e(a).push(tt),o.pop(),h=tt):k==="{"?(a.push([]),o.push("}")):k==="["?(a.push([]),o.push("]")):k==='"'?o.push('"'):k==="'"?o.push("'"):b+=k;p+=1}return h||b}var IA=function(r){return r.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})},OA=function(r){return function(t){for(var e=r.length,n=[],a=0,o="";a<e;)if(r[a]==="{"&&r[a+1]==="{")n.push(o),o="",a+=2;else if(r[a]==="}"&&r[a+1]==="}"){if(n.length){var s=n.pop();o=(0,TA.default)(t,o,s.endsWith("=")?'"{'+o+'}"':o),n.push(s+o)}a+=2,o=""}else o+=r[a],a+=1;return n.push(o),n.map(function(u,h){return n[h-1]&&n[h-1].endsWith("=")?'"{'+u+'}"':u}).join("")}};function Em(i,r){var t={},e=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Em(s,r)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(e).forEach(function(s){var u=IA(s),h=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var p=Mm(h);t=(0,he.__assign)((0,he.__assign)({},t),p)}else a[u]=Mm(h)}catch(b){if(u==="style")throw b;a[u]=h}}),a.attrs=t,r&&r.style&&a.name&&of(r.style[a.name])==="object"&&(a.attrs=(0,he.__assign)((0,he.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=(0,he.__assign)((0,he.__assign)({},a.attrs),r.style)),n.length&&(a.children=n),a}function kA(i,r,t){var e=i.attrs,n=e===void 0?{}:e,a={x:r.x||0,y:r.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Cm(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,he.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Am(i,r){var t;r===void 0&&(r={x:0,y:0});var e=(0,he.__assign)({x:0,y:0,width:0,height:0},r);if((t=i.children)===null||t===void 0?void 0:t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,he.__assign)({},r);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key=(a.key||"root")+" -"+u+" ";var h=Am(i.children[u],s);if(h.bbox){var p=h.bbox;h.attrs.next==="inline"?s.x+=h.bbox.width:s.y+=h.bbox.height,p.width+p.x>e.width&&(e.width=p.width+p.x),p.height+p.y>e.height&&(e.height=p.height+p.y)}}}return i.bbox=kA(i,r,e),i.attrs=(0,he.__assign)((0,he.__assign)({},i.attrs),i.bbox),i}function Tm(i,r){var t,e,n,a,o=(i||{}).type,s=((r==null?void 0:r.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&r)return{action:"delete",val:r,type:o,key:s};if(i&&!r)return{action:"add",val:i,type:o};if(!i&&!r)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((e=r.children)===null||e===void 0?void 0:e.length)>0)for(var h=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=r.children)===null||a===void 0?void 0:a.length),p=r.children||[],b=i.children||[],k=0;k<h;k+=1)u.push(Tm(b[k],p[k]));var R=Object.keys(r.attrs),Y=Object.keys(i.attrs);return r.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:r,key:s,children:u}:R.filter(function(V){return V!=="children"}).some(function(V){return i.attrs[V]!==r.attrs[V]||!Y.includes(V)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Pm(i){var r={},t=function(n){var a=typeof i=="function"?i(n):i,o=OA(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],h=Am(Em(u,n));return s.remove(),h};return{draw:function(n,a){var o=t(n),s=a,u=function h(p){var b=p.attrs,k=b===void 0?{}:b,R=p.bbox,Y=p.type,V=p.children,Z=(0,he.__rest)(p,["attrs","bbox","type","children"]);if(p.type!=="group"){var it=a.addShape(p.type,(0,he.__assign)({attrs:k,origin:{bbox:R,type:Y,children:V}},Z));p.keyshape&&(s=it)}p.children&&p.children.forEach(function(tt){return h(tt)})};return u(o),r[n.id]=[o],s},update:function(n,a){r[n.id]||(r[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),h=r[n.id].pop(),p=Tm(u,h),b=function Y(V){var Z;V.type!=="group"&&o.addShape(V.type,{attrs:V.attrs}),((Z=V.children)===null||Z===void 0?void 0:Z.length)&&V.children.map(function(it){return Y(it)})},k=function Y(V){var Z,it=s.find(function(tt){return tt.attrs.key===V.attrs.key});it&&o.removeChild(it),((Z=V.children)===null||Z===void 0?void 0:Z.length)&&V.children.map(function(tt){return Y(tt)})},R=function Y(V){var Z=V.key;if(V.type!=="group"){var it=s.find(function(_t){return _t.attrs.key===Z});switch(V.action){case"change":if(it){var tt=V.val.keyshape?a.getOriginStyle():{};it.attr((0,he.__assign)((0,he.__assign)({},tt),V.val.attrs))}break;case"add":b(V.val);break;case"delete":k(V.val);break;case"restructure":k(V.formerTarget),b(V.nowTarget);break;default:break}}V.children&&V.children.forEach(function(_t){return Y(_t)})};R(p),r[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Fd={};function Lm(i){return Fd[i]||(Fd[i]=(0,y.upperFirst)(i)),Fd[i]}var BA={defaultShapeType:"defaultType",className:null,getShape:function(r){var t=this,e=t[r]||t[t.defaultShapeType];return e},draw:function(r,t,e){var n=this.getShape(r),a=n.draw(t,e);return n.afterDraw&&n.afterDraw(t,e,a),a},baseUpdate:function(r,t,e){var n=this.getShape(r);n.update&&n.update(t,e),n.afterUpdate&&n.afterUpdate(t,e)},setState:function(r,t,e,n){var a=this.getShape(r);a.setState(t,e,n)},shouldUpdate:function(r){var t=this.getShape(r);return!!t.update},getControlPoints:function(r,t){var e=this.getShape(r);return e.getControlPoints(t)},getAnchorPoints:function(r,t){var e=this.getShape(r);return e.getAnchorPoints(t)}},Rd={options:{},draw:function(r,t){return this.drawShape(r,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.options.anchorPoints,e=r.anchorPoints||t;return e}},sf=function(){function i(){}return i.registerFactory=function(r,t){var e=Lm(r),n=BA,a=(0,he.__assign)((0,he.__assign)({},n),t);return i[e]=a,a.className=e,a},i.getFactory=function(r){var t=Lm(r);return i[t]},i.registerNode=function(r,t,e){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Pm(t);a=(0,he.__assign)((0,he.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Pm(s);a=(0,he.__assign)((0,he.__assign)((0,he.__assign)({},n.getShape("single-node")),o),t)}else{var u=e?n.getShape(e):Rd;a=(0,he.__assign)((0,he.__assign)({},u),t)}return a.type=r,a.itemType="node",n[r]=a,a},i.registerEdge=function(r,t,e){var n=i.Edge,a=e?n.getShape(e):Rd,o=(0,he.__assign)((0,he.__assign)({},a),t);return o.type=r,o.itemType="edge",n[r]=o,o},i.registerCombo=function(r,t,e){var n=i.Combo,a=e?n.getShape(e):Rd,o=(0,he.__assign)((0,he.__assign)({},a),t);return o.type=r,o.itemType="combo",n[r]=o,o},i}(),Pi=sf;sf.registerFactory("node",{defaultShapeType:"circle"}),sf.registerFactory("edge",{defaultShapeType:"line"}),sf.registerFactory("combo",{defaultShapeType:"circle"});var Nd="bboxCache",Yd="bboxCanvasCache",DA=function(){function i(r){this._cfg={},this.destroyed=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),r);var e=this.get("model"),n=e.id,a=this.get("type");n||(n=(0,y.uniqueId)(a),this.get("model").id=n),this.set("id",n);var o=r.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=e.shape||e.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var h=u[s].options;if(h&&h.stateStyles){var p=this.get("styles")||e.stateStyles;p=(0,y.deepMix)({},h.stateStyles,p),this.set("styles",p)}}}return i.prototype.calculateBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=nf(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.calculateCanvasBBox=function(){var r=this.get("keyShape"),t=this.get("group"),e=nf(r,t);return e.x=e.minX,e.y=e.minY,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,e},i.prototype.drawInner=function(){var r=this,t=r.get("shapeFactory"),e=r.get("group"),n=r.get("model");e.clear();var a=n.visible;if(a!==void 0&&!a&&r.changeVisibility(a),!!t){r.updatePosition(n);var o=r.getShapeCfg(n),s=o.shape||o.type,u=t.draw(s,o,e);u&&(r.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(r){var t={},e=this.get("group"),n=e.get("children"),a=this.getKeyShape(),o=this;(0,y.each)(n,function(h){var p=h.get("name");if(p)t[p]=o.getShapeStyleByName(p);else{var b=a.get("name"),k=o.getShapeStyleByName();b?t[b]=k:Object.assign(t,k)}});var s=this.getOriginStyle(),u={};r?u=(0,y.deepMix)({},s,t,r.style,{labelCfg:r.labelCfg}):u=(0,y.deepMix)({},s,t),o.set("originStyle",u)},i.prototype.restoreStates=function(r,t){var e=this,n=e.get("states");(0,y.each)(n,function(a){r.setState(t,a,!0,e)})},i.prototype.init=function(){var r=Pi.getFactory(this.get("type"));this.set("shapeFactory",r)},i.prototype.get=function(r){return this._cfg[r]},i.prototype.set=function(r,t){(0,y.isPlainObject)(r)?this._cfg=(0,he.__assign)((0,he.__assign)({},this._cfg),r):this._cfg[r]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Nd,null),this.set(Yd,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(r){var t=this.get("group"),e=this.getKeyShape();if(r&&(e=t.find(function(a){return a.get("name")===r})),e){var n={};return(0,y.each)(e.attr(),function(a,o){o!=="img"&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(r){var t=this.get("styles");if(t){var e=r;return e.style=(0,he.__assign)((0,he.__assign)({},t),r.style),e}return r},i.prototype.getStateStyle=function(r){var t=this.get("styles"),e=t&&t[r];return e},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var r=this,t={};return(0,y.each)(r.getStates(),function(e){t=Object.assign(t,r.getStateStyle(e))}),t},i.prototype.setState=function(r,t){var e=this.get("states"),n=this.get("shapeFactory"),a=r,o=r;(0,y.isString)(t)&&(a=r+":"+t,o=r+":");var s=e;if((0,y.isBoolean)(t)){var u=e.indexOf(o);if(t){if(u>-1)return;e.push(a)}else u>-1&&e.splice(u,1)}else if((0,y.isString)(t)){var h=e.filter(function(k){return k.includes(o)});h.length>0&&this.clearStates(h),s=s.filter(function(k){return!k.includes(o)}),s.push(a),this.set("states",s)}if(n){var p=this.get("model"),b=p.shape||p.type;n.setState(b,r,t,this)}},i.prototype.clearStates=function(r){var t=this,e=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.shape||a.type;r||(r=e),(0,y.isString)(r)&&(r=[r]);var s=e.filter(function(u){return r.indexOf(u)===-1});t.set("states",s),r.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(r){var t=this.getStates();return t.indexOf(r)>=0},i.prototype.refresh=function(){var r=this.get("model");this.updatePosition(r),this.updateShape(),this.afterUpdate(),this.clearCache()},i.prototype.isOnlyMove=function(r){return!1},i.prototype.update=function(r){var t=this.get("model"),e=t.visible,n=r.visible;e!==n&&n!==void 0&&this.changeVisibility(n);var a={x:t.x,y:t.y};r.x=isNaN(r.x)?t.x:r.x,r.y=isNaN(r.y)?t.y:r.y;var o=this.get("styles");if(r.stateStyles){var s=r.stateStyles;(0,y.mix)(o,s),delete r.stateStyles}Object.assign(t,r);var u=this.isOnlyMove(r);u?this.updatePosition(r):((a.x!==r.x||a.y!==r.y)&&this.updatePosition(r),this.updateShape()),this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(){var r=this.get("shapeFactory"),t=this.get("model"),e=t.shape||t.type;if(r.shouldUpdate(e)&&e===this.get("currentShape")){var n=this.getShapeCfg(t);r.baseUpdate(e,n,this)}else this.draw();this.setOriginStyle(t),this.restoreStates(r,e)},i.prototype.updatePosition=function(r){var t=this.get("model"),e=(0,y.isNil)(r.x)?t.x:r.x,n=(0,y.isNil)(r.y)?t.y:r.y,a=this.get("group");(0,y.isNil)(e)||(0,y.isNil)(n)||(a.resetMatrix(),$0(a,{x:e,y:n}),t.x=e,t.y=n,this.clearCache())},i.prototype.getBBox=function(){var r=this.get(Nd);return r||(r=this.calculateBBox(),this.set(Nd,r)),r},i.prototype.getCanvasBBox=function(){var r=this.get(Yd);return r||(r=this.calculateCanvasBBox(),this.set(Yd,r)),r},i.prototype.toFront=function(){var r=this.get("group");r.toFront()},i.prototype.toBack=function(){var r=this.get("group");r.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(r){var t=this.get("group");r?t.show():t.hide(),this.set("visible",r)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(r){var t=this.get("group");t&&t.set("capture",r)},i.prototype.destroy=function(){if(!this.destroyed){var r=this.get("animate"),t=this.get("group");r&&t.stopAnimate(),this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),_m=DA,lf={source:"start",target:"end"},io="Node",Os="Point",FA="Anchor",RA=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},r.prototype.setEnd=function(t,e){var n=lf[t]+Os,a=t+io,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,y.isPlainObject)(e)?(this.set(n,e),this.set(a,null)):(e.addEdge(this),this.set(a,e),this.set(n,null))},r.prototype.getLinkPoint=function(t,e,n){var a=lf[t]+Os,o=t+io,s=this.get(a);if(!s){var u=this.get(o),h=t+FA,p=this.getPrePoint(t,n),b=e[h];(0,y.isNil)(b)||(s=u.getLinkPointByAnchor(b)),s=s||u.getLinkPoint(p),(0,y.isNil)(s.index)||this.set(t+"AnchorIndex",s.index)}return s},r.prototype.getPrePoint=function(t,e){if(e&&e.length){var n=t==="source"?0:e.length-1;return e[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},r.prototype.getEndPoint=function(t){var e=t+io,n=lf[t]+Os,a=this.get(e);return a?a.get("model"):this.get(n)},r.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.shape||t.type;return a.getControlPoints(o,{startPoint:e,endPoint:n})},r.prototype.getEndCenter=function(t){var e=t+io,n=lf[t]+Os,a=this.get(e);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},r.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},r.prototype.getShapeCfg=function(t){var e=this,n=e.get("linkCenter"),a=i.prototype.getShapeCfg.call(this,t);if(n)a.startPoint=e.getEndCenter("source"),a.endPoint=e.getEndCenter("target");else{var o=a.controlPoints||e.getControlPointsByCenter(a);a.startPoint=e.getLinkPoint("source",t,o),a.endPoint=e.getLinkPoint("target",t,o)}return a.sourceNode=e.get("sourceNode"),a.targetNode=e.get("targetNode"),a},r.prototype.getModel=function(){var t=this.get("model"),e=this.get("source"+io),n=this.get("target"+io);return e?delete t["source"+io]:t.source=this.get("start"+Os),n?delete t["target"+io]:t.target=this.get("end"+Os),!(0,y.isString)(t.source)&&!(0,y.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,y.isString)(t.target)&&!(0,y.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},r.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},r.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},r.prototype.getSource=function(){return this.get("source")},r.prototype.getTarget=function(){return this.get("target")},r.prototype.updatePosition=function(){},r.prototype.update=function(t){var e=this.get("model"),n=e.visible,a=t.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,y.mix)(o,s),delete t.stateStyles}Object.assign(e,t),this.updateShape(),this.afterUpdate(),this.clearCache()},r.prototype.destroy=function(){var t=this.get("source"+io),e=this.get("target"+io);t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),i.prototype.destroy.call(this)},r}(_m),NA=RA,Nl=v(7165),Gd="anchorPointsCache",YA="bboxCache",GA=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getNearestPoint=function(t,e){for(var n=0,a=t[0],o=Bl(t[0],e),s=0;s<t.length;s++){var u=t[s],h=Bl(u,e);h<o&&(a=u,o=h,n=s)}return a.anchorIndex=n,a},r.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("target")===t})},r.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(e){return e.get("source")===t})},r.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");if(t==="target"){var a=function(h){return h.getSource()===e};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(h){return h.getTarget()===e};return n.filter(o).map(function(u){return u.getSource()})}var s=function(h){return h.getSource()===e?h.getTarget():h.getSource()};return n.map(s)},r.prototype.getLinkPointByAnchor=function(t){var e=this.getAnchorPoints();return e[t]},r.prototype.getLinkPoint=function(t){var e=this.get("keyShape"),n=e.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=(u.maxX+u.minX)/2,s=(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var h=this.getAnchorPoints(),p;switch(n){case"circle":p=j0({x:o,y:s,r:u.width/2},t);break;case"ellipse":p=U0({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:p=W0(u,t)}var b=p;return h.length&&(b||(b=t),b=this.getNearestPoint(h,b)),b||(b={x:o,y:s}),b},r.prototype.getAnchorPoints=function(){var t=this.get(Gd);if(!t){t=[];var e=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.shape||a.type,u=e.getAnchorPoints(s,o)||[];(0,ii.default)(u,function(h,p){var b=(0,Nl.default)({x:n.minX+h[0]*n.width,y:n.minY+h[1]*n.height},h[2],{index:p});t.push(b)}),this.set(Gd,t)}return t},r.prototype.addEdge=function(t){this.get("edges").push(t)},r.prototype.lock=function(){this.set("locked",!0)},r.prototype.unlock=function(){this.set("locked",!1)},r.prototype.hasLocked=function(){return this.get("locked")},r.prototype.removeEdge=function(t){var e=this.getEdges(),n=e.indexOf(t);n>-1&&e.splice(n,1)},r.prototype.clearCache=function(){this.set(YA,null),this.set(Gd,null)},r.prototype.isOnlyMove=function(t){if(!t)return!1;var e=!(0,to.default)(t.x),n=!(0,to.default)(t.y),a=Object.keys(t);return a.length===1&&(e||n)||a.length===2&&e&&n},r}(_m),Im=GA,zA="bboxCache",Om="bboxCanvasCache",zd="sizeCache",XA="anchorPointsCache",HA=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},r.prototype.getShapeCfg=function(t){var e=this.get("styles"),n=this.get("bbox");if(e&&n){var a=t,o={r:Math.hypot(n.height,n.width)/2||dr.defaultCombo.size[0]/2,width:n.width||dr.defaultCombo.size[0],height:n.height||dr.defaultCombo.size[1]};a.style=(0,he.__assign)((0,he.__assign)((0,he.__assign)({},e),t.style),o);var s=t.padding||dr.defaultCombo.padding;return(0,Ra.default)(s)?(o.r+=s,o.width+=s*2,o.height+=s*2):(o.r+=s[0],o.width+=s[1]+s[3]||s[1]*2,o.height+=s[0]+s[2]||s[0]*2),this.set(zd,o),a}return t},r.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),n=nf(t,e);n.x=n.minX,n.y=n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(zd);if(a){var o=t.get("type");o==="circle"?(n.width=a.r*2,n.height=a.r*2):(n.width=a.width,n.height=a.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2}else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n},r.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},r.prototype.getNodes=function(){var t=this;return t.get("nodes")},r.prototype.getCombos=function(){var t=this;return t.get("combos")},r.prototype.addChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.addNode(t);break;case"combo":e.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.addCombo=function(t){var e=this;return e.get("combos").push(t),!0},r.prototype.addNode=function(t){var e=this;return e.get("nodes").push(t),!0},r.prototype.removeChild=function(t){var e=this,n=t.getType();switch(n){case"node":e.removeNode(t);break;case"combo":e.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},r.prototype.removeCombo=function(t){if(!!t){var e=this.getCombos(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.removeNode=function(t){if(!!t){var e=this.getNodes(),n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}},r.prototype.isOnlyMove=function(t){return!1},r.prototype.getBBox=function(){this.set(Om,null);var t=this.calculateCanvasBBox();return t},r.prototype.clearCache=function(){this.set(zA,null),this.set(Om,null),this.set(XA,null)},r.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set(zd,null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},r}(Im),VA=HA,uf="node",hf="edge",km="vedge",ff="combo",WA="default",Bm="Mapper",Eo="stateStyles",jA=Object.hasOwnProperty,UA=function(){function i(r){this.graph=r,this.destroyed=!1}return i.prototype.addItem=function(r,t){var e=this,n=this.graph,a=r===km?hf:r,o=n.get(a+"Group")||n.get("group"),s=(0,mm.default)(a),u=null,h=n.get(a+(0,mm.default)(Eo))||{},p=n.get(WA+s);t[Eo]&&(h=t[Eo]);var b=n.get(a+Bm);if(b){var k=b(t);k[Eo]&&(h=k[Eo],delete k[Eo]),t=(0,Ki.default)({},p,t,k)}else p&&(0,ii.default)(p,function(_t,It){jA.call(t,It)||((0,ym.default)(_t)?t[It]=(0,gm.default)(_t):t[It]=p[It])});if(t.shape&&!t.type&&console.warn("shape \u5B57\u6BB5\u5373\u5C06\u88AB\u5E9F\u5F03\uFF0C\u8BF7\u4F7F\u7528 type \u4EE3\u66FF"),n.emit("beforeadditem",{type:r,model:t}),r===hf||r===km){var R=void 0,Y=void 0;if(R=t.source,Y=t.target,R&&(0,ti.default)(R)&&(R=n.findById(R)),Y&&(0,ti.default)(Y)&&(Y=n.findById(Y)),!R||!Y){console.warn("The source or target node of edge "+t.id+" does not exist!");return}R.getType&&R.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(R)),Y.getType&&Y.getType()==="combo"&&(t.isComboEdge=!0,n.updateCombo(Y)),u=new NA({model:t,source:R,target:Y,styles:h,linkCenter:n.get("linkCenter"),group:o.addGroup()})}else if(r===uf)u=new Im({model:t,styles:h,group:o.addGroup()});else if(r===ff){var V=t.children,Z=Dd(V,n);t.x=Z.x||t.x||Math.random()*100,t.y=Z.y||t.y||Math.random()*100;var it=o.addGroup();it.setZIndex(t.depth),u=new VA({model:t,styles:h,bbox:Z,group:it});var tt=u.getModel();(V||[]).forEach(function(_t){var It=n.findById(_t.id);u.addChild(It),_t.depth=tt.depth+2}),t.collapsed&&setTimeout(function(){n.collapseCombo(u),e.updateCombo(u,[])},250)}if(u)return n.get(r+"s").push(u),n.get("itemMap")[u.get("id")]=u,n.emit("afteradditem",{item:u,model:t}),u},i.prototype.updateItem=function(r,t){var e=this.graph;if((0,ti.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n="";r.getType&&(n=r.getType());var a=e.get(n+Bm),o=r.getModel();if(a){var s=(0,Ki.default)({},o,t),u=a(s),h=(0,Ki.default)({},o,u,t);u[Eo]&&(r.set("styles",h[Eo]),delete h[Eo]),(0,ii.default)(h,function(R,Y){t[Y]=R})}else(0,ii.default)(t,function(R,Y){o[Y]&&(0,ym.default)(R)&&!(0,Zi.default)(R)&&(t[Y]=(0,he.__assign)((0,he.__assign)({},o[Y]),t[Y]))});if(e.emit("beforeupdateitem",{item:r,cfg:t}),n===hf){if(t.source){var p=t.source;(0,ti.default)(p)&&(p=e.findById(p)),r.setSource(p)}if(t.target){var b=t.target;(0,ti.default)(b)&&(b=e.findById(b)),r.setTarget(b)}}if(r.update(t),n===uf||n===ff){var k=r.getEdges();(0,ii.default)(k,function(R){R.refresh()})}e.emit("afterupdateitem",{item:r,cfg:t})}},i.prototype.updateCombo=function(r,t){var e=this.graph;if((0,ti.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=Dd(t,e);r.set("bbox",n),r.update({x:n.x,y:n.y});for(var a=r.getEdges()||[],o=a.length,s=0;s<o;s++){var u=a[s];u==null||u.refresh()}}},i.prototype.collapseCombo=function(r){var t=this.graph;(0,ti.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.hideItem(n)}),e.combos.forEach(function(n){t.hideItem(n)})},i.prototype.expandCombo=function(r){var t=this.graph;(0,ti.default)(r)&&(r=t.findById(r));var e=r.getChildren();e.nodes.forEach(function(n){t.showItem(n)}),e.combos.forEach(function(n){n.getModel().collapsed?n.show():t.showItem(n)})},i.prototype.removeItem=function(r){var t=this,e=this.graph;if((0,ti.default)(r)&&(r=e.findById(r)),!(!r||r.destroyed)){var n=(0,gm.default)(r.getModel());e.emit("beforeremoveitem",{item:n});var a="";r.getType&&(a=r.getType());var o=e.get(a+"s"),s=o.indexOf(r);if(s>-1&&o.splice(s,1),a===hf){var u=e.get("v"+a+"s"),h=u.indexOf(r);h>-1&&u.splice(h,1)}var p=r.get("id"),b=e.get("itemMap");delete b[p];var k=e.get("comboTrees"),R=r.get("id");if(a===uf){var Y=r.getModel().comboId;if(k){var V=k,Z=!1;k.forEach(function(le){Z||aa(le,function(xe){if(xe.id===R&&V){var Ce=V.indexOf(xe);return V.splice(Ce,1),Z=!0,!1}return V=xe.children,!0})})}for(var it=r.getEdges(),tt=it.length-1;tt>=0;tt--)e.removeItem(it[tt],!1);Y&&e.updateCombo(Y)}else if(a===ff){var _t=r.getModel().parentId,It,Ht=!1;(k||[]).forEach(function(xe){Ht||aa(xe,function(Ce){return Ce.id===R?(It=Ce,Ht=!0,!1):!0})}),It.removed=!0,It&&It.children&&It.children.forEach(function(xe){t.removeItem(xe.id)});for(var it=r.getEdges(),tt=it.length;tt>=0;tt--)e.removeItem(it[tt],!1);_t&&e.updateCombo(_t)}r.destroy(),e.emit("afterremoveitem",{item:n})}},i.prototype.setItemState=function(r,t,e){var n=this.graph,a=t;(0,ti.default)(e)&&(a=t+":"+e),!(r.hasState(a)===e||(0,ti.default)(e)&&r.hasState(a))&&(n.emit("beforeitemstatechange",{item:r,state:a,enabled:e}),r.setState(t,e),n.autoPaint(),n.emit("afteritemstatechange",{item:r,state:a,enabled:e}))},i.prototype.priorityState=function(r,t){var e=this.graph,n=r;(0,ti.default)(r)&&(n=e.findById(r)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(r,t){var e=this.graph;(0,ti.default)(r)&&(r=e.findById(r)),e.emit("beforeitemstatesclear",{item:r,states:t}),r.clearStates(t),e.emit("afteritemstatesclear",{item:r,states:t})},i.prototype.refreshItem=function(r){var t=this.graph;(0,ti.default)(r)&&(r=t.findById(r)),t.emit("beforeitemrefresh",{item:r}),r.refresh(),t.emit("afteritemrefresh",{item:r})},i.prototype.addCombos=function(r,t){var e=this,n=this.graph;(r||[]).forEach(function(o){Ta(o,function(s){var u;return t.forEach(function(h){h.id===s.id&&(h.children=s.children,h.depth=s.depth,u=h)}),u&&e.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(r,t){var e=this,n=this.graph;if((0,ti.default)(r)&&(r=n.findById(r)),!r){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:r,visible:t}),r.changeVisibility(t),r.getType&&r.getType()===uf){var a=r.getEdges();(0,ii.default)(a,function(p){t&&!(p.get("source").isVisible()&&p.get("target").isVisible())||e.changeItemVisibility(p,t)})}else if(r.getType&&r.getType()===ff){var o=n.get("comboTrees"),s=r.get("id"),u=[],h=!1;(o||[]).forEach(function(b){h||!b.children||b.children.length===0||aa(b,function(k){return k.id===s?(u=k.children,h=!0,!1):!0})}),u.forEach(function(b){var k=n.findById(b.id);e.changeItemVisibility(k,t)});var a=r.getEdges();(0,ii.default)(a,function(b){t&&!(b.get("source").isVisible()&&b.get("target").isVisible())||e.changeItemVisibility(b,t)})}return n.emit("afteritemvisibilitychange",{item:r,visible:t}),r},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),ZA=UA,Pa=function(){function i(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return i.prototype.init=function(r){var t=this;t.nodes=r.nodes||[],t.edges=r.edges||[],t.combos=r.combos||[]},i.prototype.execute=function(){},i.prototype.layout=function(r){var t=this;t.init(r),t.execute()},i.prototype.getDefaultCfg=function(){return{}},i.prototype.updateCfg=function(r){var t=this;(0,Nl.default)(t,r)},i.prototype.destroy=function(){var r=this;r.positions=null,r.nodes=null,r.edges=null,r.destroyed=!0},i}(),Dm={registerLayout:function(r,t,e){if(e===void 0&&(e=Pa),!t)throw new Error("please specify handler for this layout: "+r);var n=function(a){(0,he.__extends)(o,a);function o(s){var u=a.call(this)||this,h=u,p={},b=h.getDefaultCfg();return(0,Nl.default)(p,b,t,s),(0,ii.default)(p,function(k,R){h[R]=k}),u}return o}(e);Dm[r]=n}},Fm=Dm;function KA(i,r,t,e){i.forEach(function(n,a){i[a].children=[],i[a].parent=[]}),e?r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].parent.push(i[a].id)}):r.forEach(function(n){var a=0;n.source&&(a=t[n.source]);var o=0;n.target&&(o=t[n.target]),i[a].children.push(i[o].id),i[o].children.push(i[a].id)})}function $A(i,r,t){for(var e=t.length,n=0;n<e;n++)if(i.id===t[n].source&&r.id===t[n].target||r.id===t[n].source&&i.id===t[n].target)return!0;return!1}function QA(i,r){return i.degree<r.degree?-1:i.degree>r.degree?1:0}var JA=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.radius=null,t.startRadius=null,t.endRadius=null,t.startAngle=0,t.endAngle=2*Math.PI,t.clockwise=!0,t.divisions=1,t.ordering=null,t.angleRatio=1,t.nodes=[],t.edges=[],t.nodeMap={},t.degrees=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.radius,u=t.startRadius,h=t.endRadius,p=t.divisions,b=t.startAngle,k=t.endAngle,R=(k-b)/a,Y={};e.forEach(function(me,Le){Y[me.id]=Le}),t.nodeMap=Y;var V=Jh(e.length,Y,n);t.degrees=V,!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),!s&&!u&&!h?s=t.height>t.width?t.width/2:t.height/2:!u&&h?u=h:u&&!h&&(h=u);var Z=t.angleRatio,it=R*Z;t.astep=it;var tt=t.ordering,_t=[];tt==="topology"?_t=t.topologyOrdering():tt==="topology-directed"?_t=t.topologyOrdering(!0):tt==="degree"?_t=t.degreeOrdering():_t=e;for(var It=t.clockwise,Ht=Math.ceil(a/p),le=0;le<a;++le){var xe=s;!xe&&u!==null&&h!==null&&(xe=u+le*(h-u)/(a-1)),xe||(xe=10+le*100/(a-1));var Ce=b+le%Ht*it+2*Math.PI/p*Math.floor(le/Ht);It||(Ce=k-le%Ht*it-2*Math.PI/p*Math.floor(le/Ht)),_t[le].x=o[0]+Math.cos(Ce)*xe,_t[le].y=o[1]+Math.sin(Ce)*xe,_t[le].weight=V[le]}}},r.prototype.topologyOrdering=function(t){t===void 0&&(t=!1);var e=this,n=e.degrees,a=e.edges,o=e.nodes,s=(0,y.clone)(o),u=e.nodeMap,h=[s[0]],p=[o[0]],b=[],k=o.length;b[0]=!0,KA(s,a,u,t);var R=0;return s.forEach(function(Y,V){if(V!==0)if((V===k-1||n[V]!==n[V+1]||$A(h[R],Y,a))&&b[V]!==!0)h.push(Y),p.push(o[u[Y.id]]),b[V]=!0,R++;else{for(var Z=h[R].children,it=!1,tt=0;tt<Z.length;tt++){var _t=u[Z[tt]];if(n[_t]===n[V]&&b[_t]!==!0){h.push(s[_t]),p.push(o[u[s[_t].id]]),b[_t]=!0,it=!0;break}}for(var It=0;!it&&(b[It]||(h.push(s[It]),p.push(o[u[s[It].id]]),b[It]=!0,it=!0),It++,It!==k););}}),p},r.prototype.degreeOrdering=function(){var t=this,e=t.nodes,n=[],a=t.degrees;return e.forEach(function(o,s){o.degree=a[s],n.push(o)}),n.sort(QA),n},r}(Pa),qA=JA,tT=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeSize=30,t.minNodeSpacing=10,t.preventOverlap=!1,t.equidistant=!1,t.startAngle=3/2*Math.PI,t.clockwise=!0,t.sortBy="degree",t.nodes=[],t.edges=[],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=e.length,o=t.center;if(a!==0){if(a===1){e[0].x=o[0],e[0].y=o[1];return}var s=[],u;(0,Zi.default)(t.nodeSize)?u=Math.max(t.nodeSize[0],t.nodeSize[1]):u=t.nodeSize,e.forEach(function(Ce){s.push(Ce);var me=u;(0,Zi.default)(Ce.size)?me=Math.max(Ce.size[0],Ce.size[1]):(0,y.isNumber)(Ce.size)&&(me=Ce.size),u=Math.max(u,me)}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.clockwise=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise;var h={},p={};if(s.forEach(function(Ce,me){h[Ce.id]=Ce,p[Ce.id]=me}),(t.sortBy==="degree"||!(0,ti.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",!(0,y.isNumber)(e[0].degree))){var b=Jh(e.length,p,n);s.forEach(function(Ce,me){Ce.degree=b[me]})}s.sort(function(Ce,me){return me[t.sortBy]-Ce[t.sortBy]}),t.maxValueNode=s[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var k=[[]],R=k[0];s.forEach(function(Ce){if(R.length>0){var me=Math.abs(R[0][t.sortBy]-Ce[t.sortBy]);t.maxLevelDiff&&me>=t.maxLevelDiff&&(R=[],k.push(R))}R.push(Ce)});var Y=u+t.minNodeSpacing;if(!t.preventOverlap){var V=k.length>0&&k[0].length>1,Z=Math.min(t.width,t.height)/2-Y,it=Z/(k.length+(V?1:0));Y=Math.min(Y,it)}var tt=0;if(k.forEach(function(Ce){var me=t.sweep;me===void 0&&(me=2*Math.PI-2*Math.PI/Ce.length);var Le=Ce.dTheta=me/Math.max(1,Ce.length-1);if(Ce.length>1&&t.preventOverlap){var Ye=Math.cos(Le)-Math.cos(0),Be=Math.sin(Le)-Math.sin(0),or=Math.sqrt(Y*Y/(Ye*Ye+Be*Be));tt=Math.max(or,tt)}Ce.r=tt,tt+=Y}),t.equidistant){for(var _t=0,It=0,Ht=0;Ht<k.length;Ht++){var le=k[Ht],xe=le.r-It;_t=Math.max(_t,xe)}It=0,k.forEach(function(Ce,me){me===0&&(It=Ce.r),Ce.r=It,It+=_t})}k.forEach(function(Ce){var me=Ce.dTheta,Le=Ce.r;Ce.forEach(function(Ye,Be){var or=t.startAngle+(t.clockwise?1:-1)*me*Be;Ye.x=o[0]+Le*Math.cos(or),Ye.y=o[1]+Le*Math.sin(or)})})}},r}(Pa),eT=tT,rT=v(92546),Rm=v.n(rT),nT=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.rankdir="TB",t.nodesep=50,t.ranksep=50,t.controlPoints=!1,t.sortByCombo=!1,t}return r.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.nodeSize,a=t.rankdir;if(!!e){var o=t.edges||[],s=new(Rm()).graphlib.Graph,u;n?(0,Zi.default)(n)?u=function(){return n}:u=function(){return[n,n]}:u=function(R){return R.size?(0,Zi.default)(R.size)?R.size:[R.size,R.size]:[40,40]};var h=cf(t.nodesepFunc,t.nodesep,50),p=cf(t.ranksepFunc,t.ranksep,50);(a==="LR"||a==="RL")&&(h=cf(t.ranksepFunc,t.ranksep,50),p=cf(t.nodesepFunc,t.nodesep,50)),s.setDefaultEdgeLabel(function(){return{}}),s.setGraph(t),e.forEach(function(k){var R=u(k),Y=p(k),V=h(k),Z=R[0]+2*V,it=R[1]+2*Y;s.setNode(k.id,{width:Z,height:it})}),o.forEach(function(k){s.setEdge(k.source,k.target,{weight:k.weight||1})}),Rm().layout(s);var b;s.nodes().forEach(function(k){b=s.node(k);var R=e.findIndex(function(Y){return Y.id===k});e[R].x=b.x,e[R].y=b.y}),s.edges().forEach(function(k){b=s.edge(k);var R=o.findIndex(function(Y){return Y.source===k.v&&Y.target===k.w});t.controlPoints&&o[R].type!=="loop"&&o[R].shape!=="loop"&&(o[R].controlPoints=b.points.slice(1,b.points.length-1))}),t.sortByCombo&&t.sortLevel("comboId")}},r.prototype.sortLevel=function(t){var e=this,n=e.nodes,a={};n.forEach(function(o){a[o.y]||(a[o.y]={y:o.y,nodes:[]}),a[o.y].nodes.push(o)}),Object.keys(a).forEach(function(o){var s=a[o].nodes,u=s.length,h={};if(s.forEach(function(V){var Z=V.comboId;h[Z]||(h[Z]={x:0,y:0,count:0}),h[Z].x+=V.x,h[Z].y+=V.y,h[Z].count++}),Object.keys(h).forEach(function(V){h[V].x/=h[V].count,h[V].y/=h[V].count}),u!==1){var p=s.sort(function(V,Z){return V.x-Z.x}),b=p[0].x,k=p[u-1].x,R=(k-b)/(u-1),Y=s.sort(function(V,Z){var it=V[t]||"undefined",tt=Z[t]||"undefined";return it<tt?-1:it>tt?1:0});Y.forEach(function(V,Z){V.x=b+Z*R})}})},r}(Pa),iT=nT;function cf(i,r,t){var e;return i?e=i:(0,y.isNumber)(r)?e=function(){return r}:e=function(){return t},e}function aT(i){const r=+this._x.call(null,i),t=+this._y.call(null,i);return Nm(this.cover(r,t),r,t,i)}function Nm(i,r,t,e){if(isNaN(r)||isNaN(t))return i;var n,a=i._root,o={data:e},s=i._x0,u=i._y0,h=i._x1,p=i._y1,b,k,R,Y,V,Z,it,tt;if(!a)return i._root=o,i;for(;a.length;)if((V=r>=(b=(s+h)/2))?s=b:h=b,(Z=t>=(k=(u+p)/2))?u=k:p=k,n=a,!(a=a[it=Z<<1|V]))return n[it]=o,i;if(R=+i._x.call(null,a.data),Y=+i._y.call(null,a.data),r===R&&t===Y)return o.next=a,n?n[it]=o:i._root=o,i;do n=n?n[it]=new Array(4):i._root=new Array(4),(V=r>=(b=(s+h)/2))?s=b:h=b,(Z=t>=(k=(u+p)/2))?u=k:p=k;while((it=Z<<1|V)==(tt=(Y>=k)<<1|R>=b));return n[tt]=a,n[it]=o,i}function oT(i){var r,t,e=i.length,n,a,o=new Array(e),s=new Array(e),u=Infinity,h=Infinity,p=-Infinity,b=-Infinity;for(t=0;t<e;++t)isNaN(n=+this._x.call(null,r=i[t]))||isNaN(a=+this._y.call(null,r))||(o[t]=n,s[t]=a,n<u&&(u=n),n>p&&(p=n),a<h&&(h=a),a>b&&(b=a));if(u>p||h>b)return this;for(this.cover(u,h).cover(p,b),t=0;t<e;++t)Nm(this,o[t],s[t],i[t]);return this}function sT(i,r){if(isNaN(i=+i)||isNaN(r=+r))return this;var t=this._x0,e=this._y0,n=this._x1,a=this._y1;if(isNaN(t))n=(t=Math.floor(i))+1,a=(e=Math.floor(r))+1;else{for(var o=n-t||1,s=this._root,u,h;t>i||i>=n||e>r||r>=a;)switch(h=(r<e)<<1|i<t,u=new Array(4),u[h]=s,s=u,o*=2,h){case 0:n=t+o,a=e+o;break;case 1:t=n-o,a=e+o;break;case 2:n=t+o,e=a-o;break;case 3:t=n-o,e=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=t,this._y0=e,this._x1=n,this._y1=a,this}function lT(){var i=[];return this.visit(function(r){if(!r.length)do i.push(r.data);while(r=r.next)}),i}function uT(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ua(i,r,t,e,n){this.node=i,this.x0=r,this.y0=t,this.x1=e,this.y1=n}function hT(i,r,t){var e,n=this._x0,a=this._y0,o,s,u,h,p=this._x1,b=this._y1,k=[],R=this._root,Y,V;for(R&&k.push(new ua(R,n,a,p,b)),t==null?t=Infinity:(n=i-t,a=r-t,p=i+t,b=r+t,t*=t);Y=k.pop();)if(!(!(R=Y.node)||(o=Y.x0)>p||(s=Y.y0)>b||(u=Y.x1)<n||(h=Y.y1)<a))if(R.length){var Z=(o+u)/2,it=(s+h)/2;k.push(new ua(R[3],Z,it,u,h),new ua(R[2],o,it,Z,h),new ua(R[1],Z,s,u,it),new ua(R[0],o,s,Z,it)),(V=(r>=it)<<1|i>=Z)&&(Y=k[k.length-1],k[k.length-1]=k[k.length-1-V],k[k.length-1-V]=Y)}else{var tt=i-+this._x.call(null,R.data),_t=r-+this._y.call(null,R.data),It=tt*tt+_t*_t;if(It<t){var Ht=Math.sqrt(t=It);n=i-Ht,a=r-Ht,p=i+Ht,b=r+Ht,e=R.data}}return e}function fT(i){if(isNaN(p=+this._x.call(null,i))||isNaN(b=+this._y.call(null,i)))return this;var r,t=this._root,e,n,a,o=this._x0,s=this._y0,u=this._x1,h=this._y1,p,b,k,R,Y,V,Z,it;if(!t)return this;if(t.length)for(;;){if((Y=p>=(k=(o+u)/2))?o=k:u=k,(V=b>=(R=(s+h)/2))?s=R:h=R,r=t,!(t=t[Z=V<<1|Y]))return this;if(!t.length)break;(r[Z+1&3]||r[Z+2&3]||r[Z+3&3])&&(e=r,it=Z)}for(;t.data!==i;)if(n=t,!(t=t.next))return this;return(a=t.next)&&delete t.next,n?(a?n.next=a:delete n.next,this):r?(a?r[Z]=a:delete r[Z],(t=r[0]||r[1]||r[2]||r[3])&&t===(r[3]||r[2]||r[1]||r[0])&&!t.length&&(e?e[it]=t:this._root=t),this):(this._root=a,this)}function cT(i){for(var r=0,t=i.length;r<t;++r)this.remove(i[r]);return this}function vT(){return this._root}function dT(){var i=0;return this.visit(function(r){if(!r.length)do++i;while(r=r.next)}),i}function pT(i){var r=[],t,e=this._root,n,a,o,s,u;for(e&&r.push(new ua(e,this._x0,this._y0,this._x1,this._y1));t=r.pop();)if(!i(e=t.node,a=t.x0,o=t.y0,s=t.x1,u=t.y1)&&e.length){var h=(a+s)/2,p=(o+u)/2;(n=e[3])&&r.push(new ua(n,h,p,s,u)),(n=e[2])&&r.push(new ua(n,a,p,h,u)),(n=e[1])&&r.push(new ua(n,h,o,s,p)),(n=e[0])&&r.push(new ua(n,a,o,h,p))}return this}function gT(i){var r=[],t=[],e;for(this._root&&r.push(new ua(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var n=e.node;if(n.length){var a,o=e.x0,s=e.y0,u=e.x1,h=e.y1,p=(o+u)/2,b=(s+h)/2;(a=n[0])&&r.push(new ua(a,o,s,p,b)),(a=n[1])&&r.push(new ua(a,p,s,u,b)),(a=n[2])&&r.push(new ua(a,o,b,p,h)),(a=n[3])&&r.push(new ua(a,p,b,u,h))}t.push(e)}for(;e=t.pop();)i(e.node,e.x0,e.y0,e.x1,e.y1);return this}function yT(i){return i[0]}function mT(i){return arguments.length?(this._x=i,this):this._x}function xT(i){return i[1]}function bT(i){return arguments.length?(this._y=i,this):this._y}function Xd(i,r,t){var e=new Hd(r==null?yT:r,t==null?xT:t,NaN,NaN,NaN,NaN);return i==null?e:e.addAll(i)}function Hd(i,r,t,e,n,a){this._x=i,this._y=r,this._x0=t,this._y0=e,this._x1=n,this._y1=a,this._root=void 0}function Ym(i){for(var r={data:i.data},t=r;i=i.next;)t=t.next={data:i.data};return r}var ha=Xd.prototype=Hd.prototype;ha.copy=function(){var i=new Hd(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,t,e;if(!r)return i;if(!r.length)return i._root=Ym(r),i;for(t=[{source:r,target:i._root=new Array(4)}];r=t.pop();)for(var n=0;n<4;++n)(e=r.source[n])&&(e.length?t.push({source:e,target:r.target[n]=new Array(4)}):r.target[n]=Ym(e));return i},ha.add=aT,ha.addAll=oT,ha.cover=sT,ha.data=lT,ha.extent=uT,ha.find=hT,ha.remove=fT,ha.removeAll=cT,ha.root=vT,ha.size=dT,ha.visit=pT,ha.visitAfter=gT,ha.x=mT,ha.y=bT;function fa(i){return function(){return i}}function No(i){return(i()-.5)*1e-6}var wT={value:function(){}};function Gm(){for(var i=0,r=arguments.length,t={},e;i<r;++i){if(!(e=arguments[i]+"")||e in t||/[\s.]/.test(e))throw new Error("illegal type: "+e);t[e]=[]}return new vf(t)}function vf(i){this._=i}function ST(i,r){return i.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}vf.prototype=Gm.prototype={constructor:vf,on:function(r,t){var e=this._,n=ST(r+"",e),a,o=-1,s=n.length;if(arguments.length<2){for(;++o<s;)if((a=(r=n[o]).type)&&(a=CT(e[a],r.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(a=(r=n[o]).type)e[a]=zm(e[a],r.name,t);else if(t==null)for(a in e)e[a]=zm(e[a],r.name,null);return this},copy:function(){var r={},t=this._;for(var e in t)r[e]=t[e].slice();return new vf(r)},call:function(r,t){if((a=arguments.length-2)>0)for(var e=new Array(a),n=0,a,o;n<a;++n)e[n]=arguments[n+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(o=this._[r],n=0,a=o.length;n<a;++n)o[n].value.apply(t,e)},apply:function(r,t,e){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],a=0,o=n.length;a<o;++a)n[a].value.apply(t,e)}};function CT(i,r){for(var t=0,e=i.length,n;t<e;++t)if((n=i[t]).name===r)return n.value}function zm(i,r,t){for(var e=0,n=i.length;e<n;++e)if(i[e].name===r){i[e]=wT,i=i.slice(0,e).concat(i.slice(e+1));break}return t!=null&&i.push({name:r,value:t}),i}var MT=Gm,ks=0,Yl=0,Gl=0,Xm=1e3,df,zl,pf=0,ss=0,gf=0,Xl=typeof performance=="object"&&performance.now?performance:Date,Hm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Vm(){return ss||(Hm(ET),ss=Xl.now()+gf)}function ET(){ss=0}function Vd(){this._call=this._time=this._next=null}Vd.prototype=Wm.prototype={constructor:Vd,restart:function(i,r,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?Vm():+t)+(r==null?0:+r),!this._next&&zl!==this&&(zl?zl._next=this:df=this,zl=this),this._call=i,this._time=t,Wd()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Wd())}};function Wm(i,r,t){var e=new Vd;return e.restart(i,r,t),e}function AT(){Vm(),++ks;for(var i=df,r;i;)(r=ss-i._time)>=0&&i._call.call(null,r),i=i._next;--ks}function jm(){ss=(pf=Xl.now())+gf,ks=Yl=0;try{AT()}finally{ks=0,PT(),ss=0}}function TT(){var i=Xl.now(),r=i-pf;r>Xm&&(gf-=r,pf=i)}function PT(){for(var i,r=df,t,e=Infinity;r;)r._call?(e>r._time&&(e=r._time),i=r,r=r._next):(t=r._next,r._next=null,r=i?i._next=t:df=t);zl=i,Wd(e)}function Wd(i){if(!ks){Yl&&(Yl=clearTimeout(Yl));var r=i-ss;r>24?(i<Infinity&&(Yl=setTimeout(jm,i-Xl.now()-gf)),Gl&&(Gl=clearInterval(Gl))):(Gl||(pf=Xl.now(),Gl=setInterval(TT,Xm)),ks=1,Hm(jm))}}var LT=1664525,_T=1013904223,Um=4294967296;function IT(){var i=1;return function(){return(i=(LT*i+_T)%Um)/Um}}function OT(i){return i.x}function kT(i){return i.y}var BT=10,DT=Math.PI*(3-Math.sqrt(5));function Zm(i){var r,t=1,e=.001,n=1-Math.pow(e,1/300),a=0,o=.6,s=new Map,u=Wm(b),h=MT("tick","end"),p=IT();i==null&&(i=[]);function b(){k(),h.call("tick",r),t<e&&(u.stop(),h.call("end",r))}function k(V){var Z,it=i.length,tt;V===void 0&&(V=1);for(var _t=0;_t<V;++_t)for(t+=(a-t)*n,s.forEach(function(It){It(t)}),Z=0;Z<it;++Z)tt=i[Z],tt.fx==null?tt.x+=tt.vx*=o:(tt.x=tt.fx,tt.vx=0),tt.fy==null?tt.y+=tt.vy*=o:(tt.y=tt.fy,tt.vy=0);return r}function R(){for(var V=0,Z=i.length,it;V<Z;++V){if(it=i[V],it.index=V,it.fx!=null&&(it.x=it.fx),it.fy!=null&&(it.y=it.fy),isNaN(it.x)||isNaN(it.y)){var tt=BT*Math.sqrt(.5+V),_t=V*DT;it.x=tt*Math.cos(_t),it.y=tt*Math.sin(_t)}(isNaN(it.vx)||isNaN(it.vy))&&(it.vx=it.vy=0)}}function Y(V){return V.initialize&&V.initialize(i,p),V}return R(),r={tick:k,restart:function(){return u.restart(b),r},stop:function(){return u.stop(),r},nodes:function(Z){return arguments.length?(i=Z,R(),s.forEach(Y),r):i},alpha:function(Z){return arguments.length?(t=+Z,r):t},alphaMin:function(Z){return arguments.length?(e=+Z,r):e},alphaDecay:function(Z){return arguments.length?(n=+Z,r):+n},alphaTarget:function(Z){return arguments.length?(a=+Z,r):a},velocityDecay:function(Z){return arguments.length?(o=1-Z,r):1-o},randomSource:function(Z){return arguments.length?(p=Z,s.forEach(Y),r):p},force:function(Z,it){return arguments.length>1?(it==null?s.delete(Z):s.set(Z,Y(it)),r):s.get(Z)},find:function(Z,it,tt){var _t=0,It=i.length,Ht,le,xe,Ce,me;for(tt==null?tt=Infinity:tt*=tt,_t=0;_t<It;++_t)Ce=i[_t],Ht=Z-Ce.x,le=it-Ce.y,xe=Ht*Ht+le*le,xe<tt&&(me=Ce,tt=xe);return me},on:function(Z,it){return arguments.length>1?(h.on(Z,it),r):h.on(Z)}}}function Km(){var i,r,t,e,n=fa(-30),a,o=1,s=Infinity,u=.81;function h(R){var Y,V=i.length,Z=Xd(i,OT,kT).visitAfter(b);for(e=R,Y=0;Y<V;++Y)r=i[Y],Z.visit(k)}function p(){if(!!i){var R,Y=i.length,V;for(a=new Array(Y),R=0;R<Y;++R)V=i[R],a[V.index]=+n(V,R,i)}}function b(R){var Y=0,V,Z,it=0,tt,_t,It;if(R.length){for(tt=_t=It=0;It<4;++It)(V=R[It])&&(Z=Math.abs(V.value))&&(Y+=V.value,it+=Z,tt+=Z*V.x,_t+=Z*V.y);R.x=tt/it,R.y=_t/it}else{V=R,V.x=V.data.x,V.y=V.data.y;do Y+=a[V.data.index];while(V=V.next)}R.value=Y}function k(R,Y,V,Z){if(!R.value)return!0;var it=R.x-r.x,tt=R.y-r.y,_t=Z-Y,It=it*it+tt*tt;if(_t*_t/u<It)return It<s&&(it===0&&(it=No(t),It+=it*it),tt===0&&(tt=No(t),It+=tt*tt),It<o&&(It=Math.sqrt(o*It)),r.vx+=it*R.value*e/It,r.vy+=tt*R.value*e/It),!0;if(R.length||It>=s)return;(R.data!==r||R.next)&&(it===0&&(it=No(t),It+=it*it),tt===0&&(tt=No(t),It+=tt*tt),It<o&&(It=Math.sqrt(o*It)));do R.data!==r&&(_t=a[R.data.index]*e/It,r.vx+=it*_t,r.vy+=tt*_t);while(R=R.next)}return h.initialize=function(R,Y){i=R,t=Y,p()},h.strength=function(R){return arguments.length?(n=typeof R=="function"?R:fa(+R),p(),h):n},h.distanceMin=function(R){return arguments.length?(o=R*R,h):Math.sqrt(o)},h.distanceMax=function(R){return arguments.length?(s=R*R,h):Math.sqrt(s)},h.theta=function(R){return arguments.length?(u=R*R,h):Math.sqrt(u)},h}function FT(i,r){var t,e=1;i==null&&(i=0),r==null&&(r=0);function n(){var a,o=t.length,s,u=0,h=0;for(a=0;a<o;++a)s=t[a],u+=s.x,h+=s.y;for(u=(u/o-i)*e,h=(h/o-r)*e,a=0;a<o;++a)s=t[a],s.x-=u,s.y-=h}return n.initialize=function(a){t=a},n.x=function(a){return arguments.length?(i=+a,n):i},n.y=function(a){return arguments.length?(r=+a,n):r},n.strength=function(a){return arguments.length?(e=+a,n):e},n}function RT(i){return i.index}function $m(i,r){var t=i.get(r);if(!t)throw new Error("node not found: "+r);return t}function Qm(i){var r=RT,t=b,e,n=fa(30),a,o,s,u,h,p=1;i==null&&(i=[]);function b(Z){return 1/Math.min(s[Z.source.index],s[Z.target.index])}function k(Z){for(var it=0,tt=i.length;it<p;++it)for(var _t=0,It,Ht,le,xe,Ce,me,Le;_t<tt;++_t)It=i[_t],Ht=It.source,le=It.target,xe=le.x+le.vx-Ht.x-Ht.vx||No(h),Ce=le.y+le.vy-Ht.y-Ht.vy||No(h),me=Math.sqrt(xe*xe+Ce*Ce),me=(me-a[_t])/me*Z*e[_t],xe*=me,Ce*=me,le.vx-=xe*(Le=u[_t]),le.vy-=Ce*Le,Ht.vx+=xe*(Le=1-Le),Ht.vy+=Ce*Le}function R(){if(!!o){var Z,it=o.length,tt=i.length,_t=new Map(o.map(function(Ht,le){return[r(Ht,le,o),Ht]})),It;for(Z=0,s=new Array(it);Z<tt;++Z)It=i[Z],It.index=Z,typeof It.source!="object"&&(It.source=$m(_t,It.source)),typeof It.target!="object"&&(It.target=$m(_t,It.target)),s[It.source.index]=(s[It.source.index]||0)+1,s[It.target.index]=(s[It.target.index]||0)+1;for(Z=0,u=new Array(tt);Z<tt;++Z)It=i[Z],u[Z]=s[It.source.index]/(s[It.source.index]+s[It.target.index]);e=new Array(tt),Y(),a=new Array(tt),V()}}function Y(){if(!!o)for(var Z=0,it=i.length;Z<it;++Z)e[Z]=+t(i[Z],Z,i)}function V(){if(!!o)for(var Z=0,it=i.length;Z<it;++Z)a[Z]=+n(i[Z],Z,i)}return k.initialize=function(Z,it){o=Z,h=it,R()},k.links=function(Z){return arguments.length?(i=Z,R(),k):i},k.id=function(Z){return arguments.length?(r=Z,k):r},k.iterations=function(Z){return arguments.length?(p=+Z,k):p},k.strength=function(Z){return arguments.length?(t=typeof Z=="function"?Z:fa(+Z),Y(),k):t},k.distance=function(Z){return arguments.length?(n=typeof Z=="function"?Z:fa(+Z),V(),k):n},k}function NT(i){return i.x+i.vx}function YT(i){return i.y+i.vy}function Jm(i){var r,t,e,n=1,a=1;typeof i!="function"&&(i=fa(i==null?1:+i));function o(){for(var h,p=r.length,b,k,R,Y,V,Z,it=0;it<a;++it)for(b=Xd(r,NT,YT).visitAfter(s),h=0;h<p;++h)k=r[h],V=t[k.index],Z=V*V,R=k.x+k.vx,Y=k.y+k.vy,b.visit(tt);function tt(_t,It,Ht,le,xe){var Ce=_t.data,me=_t.r,Le=V+me;if(Ce){if(Ce.index>k.index){var Ye=R-Ce.x-Ce.vx,Be=Y-Ce.y-Ce.vy,or=Ye*Ye+Be*Be;or<Le*Le&&(Ye===0&&(Ye=No(e),or+=Ye*Ye),Be===0&&(Be=No(e),or+=Be*Be),or=(Le-(or=Math.sqrt(or)))/or*n,k.vx+=(Ye*=or)*(Le=(me*=me)/(Z+me)),k.vy+=(Be*=or)*Le,Ce.vx-=Ye*(Le=1-Le),Ce.vy-=Be*Le)}return}return It>R+Le||le<R-Le||Ht>Y+Le||xe<Y-Le}}function s(h){if(h.data)return h.r=t[h.data.index];for(var p=h.r=0;p<4;++p)h[p]&&h[p].r>h.r&&(h.r=h[p].r)}function u(){if(!!r){var h,p=r.length,b;for(t=new Array(p),h=0;h<p;++h)b=r[h],t[b.index]=+i(b,h,r)}}return o.initialize=function(h,p){r=h,e=p,u()},o.iterations=function(h){return arguments.length?(a=+h,o):a},o.strength=function(h){return arguments.length?(n=+h,o):n},o.radius=function(h){return arguments.length?(i=typeof h=="function"?h:fa(+h),u(),o):i},o}function GT(i){var r=fa(.1),t,e,n;typeof i!="function"&&(i=fa(i==null?0:+i));function a(s){for(var u=0,h=t.length,p;u<h;++u)p=t[u],p.vx+=(n[u]-p.x)*e[u]*s}function o(){if(!!t){var s,u=t.length;for(e=new Array(u),n=new Array(u),s=0;s<u;++s)e[s]=isNaN(n[s]=+i(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:fa(+s),o(),a):r},a.x=function(s){return arguments.length?(i=typeof s=="function"?s:fa(+s),o(),a):i},a}function zT(i){var r=fa(.1),t,e,n;typeof i!="function"&&(i=fa(i==null?0:+i));function a(s){for(var u=0,h=t.length,p;u<h;++u)p=t[u],p.vy+=(n[u]-p.y)*e[u]*s}function o(){if(!!t){var s,u=t.length;for(e=new Array(u),n=new Array(u),s=0;s<u;++s)e[s]=isNaN(n[s]=+i(t[s],s,t))?0:+r(t[s],s,t)}}return a.initialize=function(s){t=s,o()},a.strength=function(s){return arguments.length?(r=typeof s=="function"?s:fa(+s),o(),a):r},a.y=function(s){return arguments.length?(i=typeof s=="function"?s:fa(+s),o(),a):i},a}function XT(){function i(Er){return function(){return Er}}var r=function(Zr){return Zr.cluster},t=i(1),e=i(-1),n=i(100),a=i(.1),o=[0,0],s=[],u={},h=[],p=100,b=100,k={none:{x:0,y:0}},R=[],Y,V="force",Z=!0,it=.1;function tt(Er){if(!Z)return tt;Y.tick(),Ce();for(var Zr=0,ln=s.length,Yr=void 0,Nr=Er*it;Zr<ln;++Zr)Yr=s[Zr],Yr.vx+=(k[r(Yr)].x-Yr.x)*Nr,Yr.vy+=(k[r(Yr)].y-Yr.y)*Nr}function _t(){!s||It()}function It(){if(!(!s||!s.length)){if(r(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Er=Ht();Y=Zm(Er.nodes).force("x",GT(p).strength(.1)).force("y",zT(b).strength(.1)).force("collide",Jm(function(Zr){return Zr.r}).iterations(4)).force("charge",Km().strength(e)).force("links",Qm(Er.nodes.length?Er.links:[]).distance(n).strength(a)),R=Y.nodes(),Ce()}}function Ht(){var Er=[],Zr=[],ln={},Yr=[],Nr={},nn=[];return Nr=le(s),nn=xe(h),Yr=Object.keys(Nr),Yr.forEach(function(yn,Kr){var ur=Nr[yn];Er.push({id:yn,size:ur.count,r:Math.sqrt(ur.sumforceNodeSize/Math.PI)}),ln[yn]=Kr}),nn.forEach(function(yn){var Kr=ln[yn.source],ur=ln[yn.target];Kr!==void 0&&ur!==void 0&&Zr.push({source:Kr,target:ur,count:yn.count})}),{nodes:Er,links:Zr}}function le(Er){var Zr={};return Er.forEach(function(ln){var Yr=r(ln);Zr[Yr]||(Zr[Yr]={count:0,sumforceNodeSize:0})}),Er.forEach(function(ln){var Yr=r(ln),Nr=t(ln),nn=Zr[Yr];nn.count=nn.count+1,nn.sumforceNodeSize=nn.sumforceNodeSize+Math.PI*(Nr*Nr)*1.3,Zr[Yr]=nn}),Zr}function xe(Er){var Zr={},ln=[];Er.forEach(function(Nr){var nn=me(Nr),yn=0;Zr[nn]!==void 0&&(yn=Zr[nn]),yn+=1,Zr[nn]=yn});var Yr=Object.entries(Zr);return Yr.forEach(function(Nr){var nn=Nr[0],yn=Nr[1],Kr=nn.split("~")[0],ur=nn.split("~")[1];Kr!==void 0&&ur!==void 0&&ln.push({source:Kr,target:ur,count:yn})}),ln}function Ce(){return k={none:{x:0,y:0}},R.forEach(function(Er){k[Er.id]={x:Er.x-o[0],y:Er.y-o[1]}}),k}function me(Er){var Zr=r(u[Er.source]),ln=r(u[Er.target]);return Zr<=ln?Zr+"~"+ln:ln+"~"+Zr}function Le(Er){u={},Er.forEach(function(Zr){u[Zr.id]=Zr})}function Ye(Er){return arguments.length?(V=Er,_t(),tt):V}function Be(Er){return arguments.length?typeof Er=="string"?(r=function(ln){return ln[Er]},tt):(r=Er,tt):r}function or(Er){return arguments.length?(Z=Er,tt):Z}function cr(Er){return arguments.length?(it=Er,tt):it}function ar(Er){return arguments.length?(p=Er,tt):p}function Cr(Er){return arguments.length?(b=Er,tt):b}function wr(Er){return arguments.length?(Le(Er||[]),s=Er||[],tt):s}function Mr(Er){return arguments.length?(h=Er||[],_t(),tt):h}function yr(Er){return arguments.length?(typeof Er=="function"?t=Er:t=i(+Er),_t(),tt):t}function mr(Er){return arguments.length?(typeof Er=="function"?e=Er:e=i(+Er),_t(),tt):e}function zr(Er){return arguments.length?(typeof Er=="function"?n=Er:n=i(+Er),_t(),tt):n}function Ur(Er){return arguments.length?(typeof Er=="function"?a=Er:a=i(+Er),_t(),tt):a}function Xr(Er){return arguments.length?(o=Er,tt):o}return tt.initialize=function(Er){s=Er,_t()},tt.template=Ye,tt.groupBy=Be,tt.enableGrouping=or,tt.strength=cr,tt.centerX=ar,tt.centerY=Cr,tt.nodes=wr,tt.links=Mr,tt.forceNodeSize=yr,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=mr,tt.forceLinkDistance=zr,tt.forceLinkStrength=Ur,tt.offset=Xr,tt.getFocis=Ce,tt}var jd=v(91110),Ao={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK"},HT=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.nodeStrength=null,t.edgeStrength=null,t.preventOverlap=!1,t.clusterNodeStrength=null,t.clusterEdgeStrength=null,t.clusterEdgeDistance=null,t.clusterNodeSize=null,t.clusterFociStrength=null,t.linkDistance=50,t.alphaDecay=.028,t.alphaMin=.001,t.alpha=.3,t.collideStrength=1,t.workerEnabled=!1,t.tick=function(){},t.onLayoutEnd=function(){},t.onTick=function(){},t.ticking=void 0,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},r.prototype.init=function(t){var e=this;e.nodes=t.nodes||[];var n=t.edges||[];e.edges=n.map(function(a){var o={},s=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(function(u){s.indexOf(u)>-1||(o[u]=a[u])}),o}),e.ticking=!1},r.prototype.execute=function(t){var e=this,n=e.nodes,a=e.edges;if(!e.ticking){var o=e.forceSimulation,s=e.alphaMin,u=e.alphaDecay,h=e.alpha;if(o)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(a)),o.nodes(n),e.edgeForce.links(a)),e.preventOverlap&&e.overlapProcess(o),o.alpha(h).restart(),this.ticking=!0;else try{var p=Km();if(e.nodeStrength&&p.strength(e.nodeStrength),o=Zm().nodes(n),e.clustering){var b=XT();b.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),a&&b.links(a),n&&b.nodes(n),b.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=b,o.force("group",b)}if(o.force("center",FT(e.center[0],e.center[1])).force("charge",p).alpha(h).alphaDecay(u).alphaMin(s),e.preventOverlap&&e.overlapProcess(o),a){var k=Qm().id(function(V){return V.id}).links(a);e.edgeStrength&&k.strength(e.edgeStrength),e.linkDistance&&k.distance(e.linkDistance),e.edgeForce=k,o.force("link",k)}if(e.workerEnabled&&!jT()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!e.workerEnabled)o.on("tick",function(){e.tick()}).on("end",function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()}),e.ticking=!0;else{o.stop();for(var R=WT(o),Y=1;Y<=R;Y++)o.tick(),postMessage({type:Ao.TICK,currentTick:Y,totalTicks:R,nodes:n},void 0);e.ticking=!1}e.forceSimulation=o,e.ticking=!0}catch(V){e.ticking=!1,console.warn(V)}}},r.prototype.overlapProcess=function(t){var e=this,n=e.nodeSize,a=e.nodeSpacing,o,s,u=e.collideStrength;if((0,Ra.default)(a)?s=function(){return a}:(0,jd.default)(a)?s=a:s=function(){return 0},!n)o=function(R){if(R.size){if((0,Zi.default)(R.size)){var Y=R.size[0]>R.size[1]?R.size[0]:R.size[1];return Y/2+s(R)}return R.size/2+s(R)}return 10+s(R)};else if((0,jd.default)(n))o=function(R){var Y=n(R);return Y+s(R)};else if((0,Zi.default)(n)){var h=n[0]>n[1]?n[0]:n[1],p=h/2;o=function(R){return p+s(R)}}else if((0,Ra.default)(n)){var b=n/2;o=function(R){return b+s(R)}}else o=function(){return 10};t.force("collisionForce",Jm(o).strength(u))},r.prototype.updateCfg=function(t){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.forceSimulation=null,(0,Nl.default)(e,t)},r.prototype.destroy=function(){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.nodes=null,t.edges=null,t.destroyed=!0},r}(Pa),VT=HT;function WT(i){var r=i.alphaMin(),t=i.alphaTarget(),e=i.alpha(),n=Math.log((r-t)/(e-t))/Math.log(1-i.alphaDecay()),a=Math.ceil(n);return a}function jT(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}var UT=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=500,t.gravity=10,t.clustering=!1,t.clusterGravity=10,t.linkDistance=50,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.linkStrength=1,t.nodeStrength=30,t.preventOverlap=!1,t.collideStrength=1,t.optimizeRangeFactor=1,t.tick=function(){},t.nodes=[],t.edges=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}var a={},o={};e.forEach(function(s,u){a[s.id]=s,o[s.id]=u}),t.nodeMap=a,t.nodeIdxMap=o,t.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.velocityDecay,u=t.clustering,h;t.initVals(),u&&(h=t.getClusterMap());for(var p=function(Z){var it=[];e.forEach(function(tt,_t){it[_t]={x:0,y:0}}),t.applyCalculate(e,n,it),u&&t.applyClusterForce(h,it),e.forEach(function(tt,_t){!(0,y.isNumber)(tt.x)||!(0,y.isNumber)(tt.y)||(tt.x+=it[_t].x*s,tt.y+=it[_t].y*s)}),b.alpha+=(b.alphaTarget-b.alpha)*b.alphaDecay,t.tick()},b=this,k=0;k<a;k++)p(k);var R=[0,0];e.forEach(function(V){!(0,y.isNumber)(V.x)||!(0,y.isNumber)(V.y)||(R[0]+=V.x,R[1]+=V.y)}),R[0]/=e.length,R[1]/=e.length;var Y=[o[0]-R[0],o[1]-R[1]];e.forEach(function(V,Z){!(0,y.isNumber)(V.x)||!(0,y.isNumber)(V.y)||(V.x+=Y[0],V.y+=Y[1])})},r.prototype.initVals=function(){for(var t=this,e=t.edges,n={},a=0;a<e.length;++a)n[e[a].source]?n[e[a].source]++:n[e[a].source]=1,n[e[a].target]?n[e[a].target]++:n[e[a].target]=1;for(var o=[],a=0;a<e.length;++a)o[a]=n[e[a].source]/(n[e[a].source]+n[e[a].target]);this.bias=o;var s=t.nodeSize,u=t.nodeSpacing,h,p;if((0,y.isNumber)(u)?p=function(){return u}:(0,y.isFunction)(u)?p=u:p=function(){return 0},!s)h=function(Ht){if(Ht.size){if((0,y.isArray)(Ht.size)){var le=Ht.size[0]>Ht.size[1]?Ht.size[0]:Ht.size[1];return le/2+p(Ht)}return Ht.size/2+p(Ht)}return 10+p(Ht)};else if((0,y.isFunction)(s))h=function(Ht){var le=s(Ht);return le+p(Ht)};else if((0,y.isArray)(s)){var b=s[0]>s[1]?s[0]:s[1],k=b/2;h=function(Ht){return k+p(Ht)}}else if((0,y.isNumber)(s)){var R=s/2;h=function(Ht){return R+p(Ht)}}else h=function(){return 10};this.nodeSize=h;var Y=this.linkDistance,V;Y||(Y=50),(0,y.isNumber)(Y)&&(V=function(Ht){return Y}),this.linkDistance=V;var Z=this.linkStrength,it;Z||(Z=1),(0,y.isNumber)(Z)&&(it=function(Ht){return Z}),this.linkStrength=it;var tt=this.nodeStrength,_t;tt||(tt=30),(0,y.isNumber)(tt)&&(_t=function(Ht){return tt}),this.nodeStrength=_t},r.prototype.getClusterMap=function(){var t=this,e=t.nodes,n={};e.forEach(function(o){if(n[o.cluster]===void 0){var s={name:o.cluster,cx:0,cy:0,count:0};n[o.cluster]=s}var u=n[o.cluster];(0,y.isNumber)(o.x)&&(u.cx+=o.x),(0,y.isNumber)(o.y)&&(u.cy+=o.y),u.count++});for(var a in n)n[a].cx/=n[a].count,n[a].cy/=n[a].count;return n},r.prototype.applyClusterForce=function(t,e){var n=this,a=n.gravity,o=n.nodes,s=n.clusterGravity||a,u=this.alpha;o.forEach(function(p,b){if(!(!(0,y.isNumber)(p.x)||!(0,y.isNumber)(p.y))){var k=t[p.cluster],R=p.x-k.cx,Y=p.y-k.cy,V=Math.sqrt(R*R+Y*Y);e[b].x-=R*s*u/V,e[b].y-=Y*s*u/V}});for(var h in t)t[h].cx=0,t[h].cy=0,t[h].count=0;o.forEach(function(p){var b=t[p.cluster];(0,y.isNumber)(p.x)&&(b.cx+=p.x),(0,y.isNumber)(p.y)&&(b.cy+=p.y),b.count++});for(var h in t)t[h].cx/=t[h].count,t[h].cy/=t[h].count},r.prototype.applyCalculate=function(t,e,n){var a=this,o={};t.forEach(function(s,u){n[u]={x:0,y:0},t.forEach(function(h,p){if(!(u<p)){var b=s.x-h.x,k=s.y-h.y,R=b*b+k*k;R<1&&(R=Math.sqrt(R)),b===0&&(b=Math.random()*.01,R+=b*b),k===0&&(k=Math.random()*.01,R+=k*k);var Y=Math.sqrt(R);o[s.id+"-"+h.id]={vx:b,vy:k,vl:R,sqrtVl:Y},o[h.id+"-"+s.id]={vx:-b,vy:-k,vl:R,sqrtVl:Y}}})}),a.calRepulsive(t,n,o),a.calAttractive(e,n,o)},r.prototype.calRepulsive=function(t,e,n){var a=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,o=this.nodeStrength,s=this.alpha,u=this.collideStrength,h=this.preventOverlap,p=this.nodeSize;t.forEach(function(b,k){t.forEach(function(R,Y){if(k!==Y&&!(!(0,y.isNumber)(b.x)||!(0,y.isNumber)(R.x)||!(0,y.isNumber)(b.y)||!(0,y.isNumber)(R.y))){var V=n[b.id+"-"+R.id],Z=V.vl,it=V.vx,tt=V.vy;if(!(Z>a)&&(e[k].x+=it*o(R)*s/Z,e[k].y+=tt*o(R)*s/Z,h&&k<Y)){var _t=p(b),It=p(R),Ht=_t+It;if(Z<Ht*Ht){var le=n[b.id+"-"+R.id].sqrtVl,xe=(Ht-le)/le*u,Ce=It*It/(_t*_t+It*It),me=it*xe,Le=tt*xe;e[k].x+=me*Ce,e[k].y+=Le*Ce,Ce=1-Ce,e[Y].x-=me*Ce,e[Y].y-=Le*Ce}}}})})},r.prototype.calAttractive=function(t,e,n){var a=this,o=this.linkDistance,s=this.alpha,u=this.linkStrength,h=this.bias;t.forEach(function(p,b){if(!(!p.source||!p.target)){var k=a.nodeIdxMap[p.source],R=a.nodeIdxMap[p.target];if(k!==R){var Y=a.nodeMap[p.source],V=a.nodeMap[p.target];if(!(!(0,y.isNumber)(V.x)||!(0,y.isNumber)(Y.x)||!(0,y.isNumber)(V.y)||!(0,y.isNumber)(Y.y))){var Z=n[p.target+"-"+p.source],it=Z.vl,tt=Z.sqrtVl,_t=Z.vx,It=Z.vy,Ht=(tt-o(p))/tt*s*u(p),le=_t*Ht,xe=It*Ht,Ce=h[b];e[R].x-=le*Ce,e[R].y-=xe*Ce,e[k].x+=le*(1-Ce),e[k].y+=xe*(1-Ce)}}}})},r}(Pa),ZT=UT,KT=800,$T=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.gravity=10,t.speed=1,t.clustering=!1,t.clusterGravity=10,t.nodes=[],t.edges=[],t.width=300,t.height=300,t.nodeMap={},t.nodeIdxMap={},t}return r.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},r.prototype.execute=function(){var t=this,e=this,n=e.nodes,a=e.center;if(!(!n||n.length===0)){if(n.length===1){n[0].x=a[0],n[0].y=a[1];return}var o={},s={};n.forEach(function(u,h){(0,y.isNumber)(u.x)||(u.x=Math.random()*t.width),(0,y.isNumber)(u.y)||(u.y=Math.random()*t.height),o[u.id]=u,s[u.id]=h}),e.nodeMap=o,e.nodeIdxMap=s,e.run()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.edges,a=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var o=t.center,s=t.width/10,u=Math.sqrt(t.width*t.height/(e.length+1)),h=t.gravity,p=t.speed,b=t.clustering,k={};if(b){e.forEach(function(Z){if(k[Z.cluster]===void 0){var it={name:Z.cluster,cx:0,cy:0,count:0};k[Z.cluster]=it}var tt=k[Z.cluster];(0,y.isNumber)(Z.x)&&(tt.cx+=Z.x),(0,y.isNumber)(Z.y)&&(tt.cy+=Z.y),tt.count++});for(var R in k)k[R].cx/=k[R].count,k[R].cy/=k[R].count}for(var Y=function(it){var tt=[];if(e.forEach(function(Ht,le){tt[le]={x:0,y:0}}),t.applyCalculate(e,n,tt,u),b){var _t=t.clusterGravity||h;e.forEach(function(Ht,le){if(!(!(0,y.isNumber)(Ht.x)||!(0,y.isNumber)(Ht.y))){var xe=k[Ht.cluster],Ce=Math.sqrt((Ht.x-xe.cx)*(Ht.x-xe.cx)+(Ht.y-xe.cy)*(Ht.y-xe.cy)),me=u*_t;tt[le].x-=me*(Ht.x-xe.cx)/Ce,tt[le].y-=me*(Ht.y-xe.cy)/Ce}});for(var It in k)k[It].cx=0,k[It].cy=0,k[It].count=0;e.forEach(function(Ht){var le=k[Ht.cluster];(0,y.isNumber)(Ht.x)&&(le.cx+=Ht.x),(0,y.isNumber)(Ht.y)&&(le.cy+=Ht.y),le.count++});for(var It in k)k[It].cx/=k[It].count,k[It].cy/=k[It].count}e.forEach(function(Ht,le){if(!(!(0,y.isNumber)(Ht.x)||!(0,y.isNumber)(Ht.y))){var xe=.01*u*h;tt[le].x-=xe*(Ht.x-o[0]),tt[le].y-=xe*(Ht.y-o[1])}}),e.forEach(function(Ht,le){if(!(!(0,y.isNumber)(Ht.x)||!(0,y.isNumber)(Ht.y))){var xe=Math.sqrt(tt[le].x*tt[le].x+tt[le].y*tt[le].y);if(xe>0){var Ce=Math.min(s*(p/KT),xe);Ht.x+=tt[le].x/xe*Ce,Ht.y+=tt[le].y/xe*Ce}}})},V=0;V<a;V++)Y(V)},r.prototype.applyCalculate=function(t,e,n,a){var o=this;o.calRepulsive(t,n,a),o.calAttractive(e,n,a)},r.prototype.calRepulsive=function(t,e,n){t.forEach(function(a,o){e[o]={x:0,y:0},t.forEach(function(s,u){if(o!==u&&!(!(0,y.isNumber)(a.x)||!(0,y.isNumber)(s.x)||!(0,y.isNumber)(a.y)||!(0,y.isNumber)(s.y))){var h=a.x-s.x,p=a.y-s.y,b=h*h+p*p;if(b===0){b=1;var k=o>u?1:-1;h=.01*k,p=.01*k}var R=n*n/b;e[o].x+=h*R,e[o].y+=p*R}})})},r.prototype.calAttractive=function(t,e,n){var a=this;t.forEach(function(o){if(!(!o.source||!o.target)){var s=a.nodeIdxMap[o.source],u=a.nodeIdxMap[o.target];if(s!==u){var h=a.nodeMap[o.source],p=a.nodeMap[o.target];if(!(!(0,y.isNumber)(p.x)||!(0,y.isNumber)(h.x)||!(0,y.isNumber)(p.y)||!(0,y.isNumber)(h.y))){var b=p.x-h.x,k=p.y-h.y,R=Math.sqrt(b*b+k*k),Y=R*R/n;e[u].x-=b/R*Y,e[u].y-=k/R*Y,e[s].x+=b/R*Y,e[s].y+=k/R*Y}}}})},r}(Pa),QT=$T,JT=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.begin=[0,0],t.preventOverlap=!0,t.preventOverlapPadding=10,t.condense=!1,t.sortBy="degree",t.nodeSize=30,t.nodes=[],t.edges=[],t.center=[0,0],t.width=300,t.height=300,t.row=0,t.col=0,t.cellWidth=0,t.cellHeight=0,t.cellUsed={},t.id2manPos={},t}return r.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},r.prototype.execute=function(){var t=this,e=t.nodes,n=e.length,a=t.center;if(n!==0){if(n===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.edges,s=[];e.forEach(function(tt){s.push(tt)});var u={};if(s.forEach(function(tt,_t){u[tt.id]=_t}),(t.sortBy==="degree"||!(0,ti.default)(t.sortBy)||s[0][t.sortBy]===void 0)&&(t.sortBy="degree",Co(e[0].degree))){var h=Jh(s.length,u,o);s.forEach(function(tt,_t){tt.degree=h[_t]})}s.sort(function(tt,_t){return _t[t.sortBy]-tt[t.sortBy]}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var p=t.rows,b=t.cols!=null?t.cols:t.columns;if(t.cells=n,p!=null&&b!=null?(t.rows=p,t.cols=b):p!=null&&b==null?(t.rows=p,t.cols=Math.ceil(t.cells/t.rows)):p==null&&b!=null?(t.cols=b,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var k=t.small(),R=t.large();(k-1)*R>=t.cells?t.small(k-1):(R-1)*k>=t.cells&&t.large(R-1)}else for(;t.cols*t.rows<t.cells;){var k=t.small(),R=t.large();(R+1)*k>=t.cells?t.large(R+1):t.small(k+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&s.forEach(function(tt){(!tt.x||!tt.y)&&(tt.x=0,tt.y=0);var _t,It;(0,y.isArray)(tt.size)?(_t=tt.size[0],It=tt.size[1]):(0,y.isNumber)(tt.size)&&(_t=tt.size,It=tt.size),(_t===void 0||It===void 0)&&((0,y.isArray)(t.nodeSize)?(_t=t.nodeSize[0],It=t.nodeSize[1]):(0,y.isNumber)(t.nodeSize)?(_t=t.nodeSize,It=t.nodeSize):(_t=30,It=30));var Ht=t.preventOverlapPadding,le=_t+Ht,xe=It+Ht;t.cellWidth=Math.max(t.cellWidth,le),t.cellHeight=Math.max(t.cellHeight,xe)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var Y=0;Y<s.length;Y++){var V=s[Y],Z=void 0;if(t.position&&(Z=t.position(V)),Z&&(Z.row!==void 0||Z.col!==void 0)){var it={row:Z.row,col:Z.col};if(it.col===void 0)for(it.col=0;t.used(it.row,it.col);)it.col++;else if(it.row===void 0)for(it.row=0;t.used(it.row,it.col);)it.row++;t.id2manPos[V.id]=it,t.use(it.row,it.col)}t.getPos(V)}}},r.prototype.small=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.min(a,o);else{var s=Math.min(a,o);s===e.rows?e.rows=t:e.cols=t}return n},r.prototype.large=function(t){var e=this,n,a=e.rows||5,o=e.cols||5;if(t==null)n=Math.max(a,o);else{var s=Math.max(a,o);s===e.rows?e.rows=t:e.cols=t}return n},r.prototype.used=function(t,e){var n=this;return n.cellUsed["c-"+t+"-"+e]||!1},r.prototype.use=function(t,e){var n=this;n.cellUsed["c-"+t+"-"+e]=!0},r.prototype.moveToNextCell=function(){var t=this,e=t.cols||5;t.col++,t.col>=e&&(t.col=0,t.row++)},r.prototype.getPos=function(t){var e=this,n=e.begin,a=e.cellWidth,o=e.cellHeight,s,u,h=e.id2manPos[t.id];if(h)s=h.col*a+a/2+n[0],u=h.row*o+o/2+n[1];else{for(;e.used(e.row,e.col);)e.moveToNextCell();s=e.col*a+a/2+n[0],u=e.row*o+o/2+n[1],e.use(e.row,e.col),e.moveToNextCell()}t.x=s,t.y=u},r}(Pa),qT=JT,tP=v(87896),qm=v(37150),tx=v(403),yf=v(51548),mf=v(46893);const eP=Object.prototype.toString;function xf(i){return eP.call(i).endsWith("Array]")}function rP(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!xf(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],s=e+1;s<a;s++)i[s]>o&&(o=i[s]);return o}var nP=rP;function iP(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!xf(i))throw new TypeError("input must be an array");if(i.length===0)throw new TypeError("input must not be empty");var t=r.fromIndex,e=t===void 0?0:t,n=r.toIndex,a=n===void 0?i.length:n;if(e<0||e>=i.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>i.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=i[e],s=e+1;s<a;s++)i[s]<o&&(o=i[s]);return o}var aP=iP;function ex(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(xf(i)){if(i.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(r.output!==void 0){if(!xf(r.output))throw new TypeError("output option must be an array if specified");t=r.output}else t=new Array(i.length);var e=aP(i),n=nP(i);if(e===n)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=r.min,o=a===void 0?r.autoMinMax?e:0:a,s=r.max,u=s===void 0?r.autoMinMax?n:1:s;if(o>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-o)/(n-e),p=0;p<i.length;p++)t[p]=(i[p]-e)*h+o;return t}var bf=" ".repeat(2),rx=" ".repeat(4);function oP(){return nx(this)}function nx(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.maxRows,e=t===void 0?15:t,n=r.maxColumns,a=n===void 0?10:n,o=r.maxNumSize,s=o===void 0?8:o;return"".concat(i.constructor.name,` {
`).concat(bf,`[
`).concat(rx).concat(sP(i,e,a,s),`
`).concat(bf,`]
`).concat(bf,"rows: ").concat(i.rows,`
`).concat(bf,"columns: ").concat(i.columns,`
}`)}function sP(i,r,t,e){for(var n=i.rows,a=i.columns,o=Math.min(n,r),s=Math.min(a,t),u=[],h=0;h<o;h++){for(var p=[],b=0;b<s;b++)p.push(lP(i.get(h,b),e));u.push("".concat(p.join(" ")))}return s!==a&&(u[u.length-1]+=" ... ".concat(a-t," more columns")),o!==n&&u.push("... ".concat(n-r," more rows")),u.join(`
`.concat(rx))}function lP(i,r){var t=String(i);if(t.length<=r)return t.padEnd(r," ");var e=i.toPrecision(r-2);if(e.length<=r)return e;var n=i.toExponential(r-2),a=n.indexOf("e"),o=n.slice(a);return n.slice(0,r-o.length)+o}function uP(i,r){i.prototype.add=function(e){return typeof e=="number"?this.addS(e):this.addM(e)},i.prototype.addS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e);return this},i.prototype.addM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)+e.get(n,a));return this},i.add=function(e,n){var a=new r(e);return a.add(n)},i.prototype.sub=function(e){return typeof e=="number"?this.subS(e):this.subM(e)},i.prototype.subS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e);return this},i.prototype.subM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)-e.get(n,a));return this},i.sub=function(e,n){var a=new r(e);return a.sub(n)},i.prototype.subtract=i.prototype.sub,i.prototype.subtractS=i.prototype.subS,i.prototype.subtractM=i.prototype.subM,i.subtract=i.sub,i.prototype.mul=function(e){return typeof e=="number"?this.mulS(e):this.mulM(e)},i.prototype.mulS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e);return this},i.prototype.mulM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)*e.get(n,a));return this},i.mul=function(e,n){var a=new r(e);return a.mul(n)},i.prototype.multiply=i.prototype.mul,i.prototype.multiplyS=i.prototype.mulS,i.prototype.multiplyM=i.prototype.mulM,i.multiply=i.mul,i.prototype.div=function(e){return typeof e=="number"?this.divS(e):this.divM(e)},i.prototype.divS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e);return this},i.prototype.divM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)/e.get(n,a));return this},i.div=function(e,n){var a=new r(e);return a.div(n)},i.prototype.divide=i.prototype.div,i.prototype.divideS=i.prototype.divS,i.prototype.divideM=i.prototype.divM,i.divide=i.div,i.prototype.mod=function(e){return typeof e=="number"?this.modS(e):this.modM(e)},i.prototype.modS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e);return this},i.prototype.modM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)%e.get(n,a));return this},i.mod=function(e,n){var a=new r(e);return a.mod(n)},i.prototype.modulus=i.prototype.mod,i.prototype.modulusS=i.prototype.modS,i.prototype.modulusM=i.prototype.modM,i.modulus=i.mod,i.prototype.and=function(e){return typeof e=="number"?this.andS(e):this.andM(e)},i.prototype.andS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e);return this},i.prototype.andM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)&e.get(n,a));return this},i.and=function(e,n){var a=new r(e);return a.and(n)},i.prototype.or=function(e){return typeof e=="number"?this.orS(e):this.orM(e)},i.prototype.orS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e);return this},i.prototype.orM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)|e.get(n,a));return this},i.or=function(e,n){var a=new r(e);return a.or(n)},i.prototype.xor=function(e){return typeof e=="number"?this.xorS(e):this.xorM(e)},i.prototype.xorS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e);return this},i.prototype.xorM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)^e.get(n,a));return this},i.xor=function(e,n){var a=new r(e);return a.xor(n)},i.prototype.leftShift=function(e){return typeof e=="number"?this.leftShiftS(e):this.leftShiftM(e)},i.prototype.leftShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e);return this},i.prototype.leftShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)<<e.get(n,a));return this},i.leftShift=function(e,n){var a=new r(e);return a.leftShift(n)},i.prototype.signPropagatingRightShift=function(e){return typeof e=="number"?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},i.prototype.signPropagatingRightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e);return this},i.prototype.signPropagatingRightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>e.get(n,a));return this},i.signPropagatingRightShift=function(e,n){var a=new r(e);return a.signPropagatingRightShift(n)},i.prototype.rightShift=function(e){return typeof e=="number"?this.rightShiftS(e):this.rightShiftM(e)},i.prototype.rightShiftS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e);return this},i.prototype.rightShiftM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,this.get(n,a)>>>e.get(n,a));return this},i.rightShift=function(e,n){var a=new r(e);return a.rightShift(n)},i.prototype.zeroFillRightShift=i.prototype.rightShift,i.prototype.zeroFillRightShiftS=i.prototype.rightShiftS,i.prototype.zeroFillRightShiftM=i.prototype.rightShiftM,i.zeroFillRightShift=i.rightShift,i.prototype.not=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,~this.get(e,n));return this},i.not=function(e){var n=new r(e);return n.not()},i.prototype.abs=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.abs(this.get(e,n)));return this},i.abs=function(e){var n=new r(e);return n.abs()},i.prototype.acos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acos(this.get(e,n)));return this},i.acos=function(e){var n=new r(e);return n.acos()},i.prototype.acosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.acosh(this.get(e,n)));return this},i.acosh=function(e){var n=new r(e);return n.acosh()},i.prototype.asin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asin(this.get(e,n)));return this},i.asin=function(e){var n=new r(e);return n.asin()},i.prototype.asinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.asinh(this.get(e,n)));return this},i.asinh=function(e){var n=new r(e);return n.asinh()},i.prototype.atan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atan(this.get(e,n)));return this},i.atan=function(e){var n=new r(e);return n.atan()},i.prototype.atanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.atanh(this.get(e,n)));return this},i.atanh=function(e){var n=new r(e);return n.atanh()},i.prototype.cbrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cbrt(this.get(e,n)));return this},i.cbrt=function(e){var n=new r(e);return n.cbrt()},i.prototype.ceil=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.ceil(this.get(e,n)));return this},i.ceil=function(e){var n=new r(e);return n.ceil()},i.prototype.clz32=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.clz32(this.get(e,n)));return this},i.clz32=function(e){var n=new r(e);return n.clz32()},i.prototype.cos=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cos(this.get(e,n)));return this},i.cos=function(e){var n=new r(e);return n.cos()},i.prototype.cosh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.cosh(this.get(e,n)));return this},i.cosh=function(e){var n=new r(e);return n.cosh()},i.prototype.exp=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.exp(this.get(e,n)));return this},i.exp=function(e){var n=new r(e);return n.exp()},i.prototype.expm1=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.expm1(this.get(e,n)));return this},i.expm1=function(e){var n=new r(e);return n.expm1()},i.prototype.floor=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.floor(this.get(e,n)));return this},i.floor=function(e){var n=new r(e);return n.floor()},i.prototype.fround=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.fround(this.get(e,n)));return this},i.fround=function(e){var n=new r(e);return n.fround()},i.prototype.log=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log(this.get(e,n)));return this},i.log=function(e){var n=new r(e);return n.log()},i.prototype.log1p=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log1p(this.get(e,n)));return this},i.log1p=function(e){var n=new r(e);return n.log1p()},i.prototype.log10=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log10(this.get(e,n)));return this},i.log10=function(e){var n=new r(e);return n.log10()},i.prototype.log2=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.log2(this.get(e,n)));return this},i.log2=function(e){var n=new r(e);return n.log2()},i.prototype.round=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.round(this.get(e,n)));return this},i.round=function(e){var n=new r(e);return n.round()},i.prototype.sign=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sign(this.get(e,n)));return this},i.sign=function(e){var n=new r(e);return n.sign()},i.prototype.sin=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sin(this.get(e,n)));return this},i.sin=function(e){var n=new r(e);return n.sin()},i.prototype.sinh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sinh(this.get(e,n)));return this},i.sinh=function(e){var n=new r(e);return n.sinh()},i.prototype.sqrt=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.sqrt(this.get(e,n)));return this},i.sqrt=function(e){var n=new r(e);return n.sqrt()},i.prototype.tan=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tan(this.get(e,n)));return this},i.tan=function(e){var n=new r(e);return n.tan()},i.prototype.tanh=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.tanh(this.get(e,n)));return this},i.tanh=function(e){var n=new r(e);return n.tanh()},i.prototype.trunc=function(){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.trunc(this.get(e,n)));return this},i.trunc=function(e){var n=new r(e);return n.trunc()},i.pow=function(e,n){var a=new r(e);return a.pow(n)},i.prototype.pow=function(e){return typeof e=="number"?this.powS(e):this.powM(e)},i.prototype.powS=function(e){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e));return this},i.prototype.powM=function(e){if(e=r.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.set(n,a,Math.pow(this.get(n,a),e.get(n,a)));return this}}function Ya(i,r,t){var e=t?i.rows:i.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function Ga(i,r,t){var e=t?i.columns:i.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function Bs(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function Ds(i,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==i.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function hP(i,r,t){return{row:fP(i,r),column:cP(i,t)}}function fP(i,r){if(typeof r!="object")throw new TypeError("unexpected type for row indices");var t=r.some(function(e){return e<0||e>=i.rows});if(t)throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function cP(i,r){if(typeof r!="object")throw new TypeError("unexpected type for column indices");var t=r.some(function(e){return e<0||e>=i.columns});if(t)throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function ix(i,r,t,e,n){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Sf("startRow",r),Sf("endRow",t),Sf("startColumn",e),Sf("endColumn",n),r>t||e>n||r<0||r>=i.rows||t<0||t>=i.rows||e<0||e>=i.columns||n<0||n>=i.columns)throw new RangeError("Submatrix indices are out of range")}function wf(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=[],e=0;e<i;e++)t.push(r);return t}function Sf(i,r){if(typeof r!="number")throw new TypeError("".concat(i," must be a number"))}function Fs(i){if(i.isEmpty())throw new Error("Empty matrix has no elements to index")}function vP(i){for(var r=wf(i.rows),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]+=i.get(t,e);return r}function dP(i){for(var r=wf(i.columns),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]+=i.get(t,e);return r}function pP(i){for(var r=0,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r+=i.get(t,e);return r}function gP(i){for(var r=wf(i.rows,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[t]*=i.get(t,e);return r}function yP(i){for(var r=wf(i.columns,1),t=0;t<i.rows;++t)for(var e=0;e<i.columns;++e)r[e]*=i.get(t,e);return r}function mP(i){for(var r=1,t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)r*=i.get(t,e);return r}function xP(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<e;o++){for(var s=0,u=0,h=0,p=0;p<n;p++)h=i.get(o,p)-t[o],s+=h,u+=h*h;r?a.push((u-s*s/n)/(n-1)):a.push((u-s*s/n)/n)}return a}function bP(i,r,t){for(var e=i.rows,n=i.columns,a=[],o=0;o<n;o++){for(var s=0,u=0,h=0,p=0;p<e;p++)h=i.get(p,o)-t[o],s+=h,u+=h*h;r?a.push((u-s*s/e)/(e-1)):a.push((u-s*s/e)/e)}return a}function wP(i,r,t){for(var e=i.rows,n=i.columns,a=e*n,o=0,s=0,u=0,h=0;h<e;h++)for(var p=0;p<n;p++)u=i.get(h,p)-t,o+=u,s+=u*u;return r?(s-o*o/a)/(a-1):(s-o*o/a)/a}function SP(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[t])}function CP(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r[e])}function MP(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)-r)}function EP(i){for(var r=[],t=0;t<i.rows;t++){for(var e=0,n=0;n<i.columns;n++)e+=Math.pow(i.get(t,n),2)/(i.columns-1);r.push(Math.sqrt(e))}return r}function AP(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[t])}function TP(i){for(var r=[],t=0;t<i.columns;t++){for(var e=0,n=0;n<i.rows;n++)e+=Math.pow(i.get(n,t),2)/(i.rows-1);r.push(Math.sqrt(e))}return r}function PP(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r[e])}function LP(i){for(var r=i.size-1,t=0,e=0;e<i.columns;e++)for(var n=0;n<i.rows;n++)t+=Math.pow(i.get(n,e),2)/r;return Math.sqrt(t)}function _P(i,r){for(var t=0;t<i.rows;t++)for(var e=0;e<i.columns;e++)i.set(t,e,i.get(t,e)/r)}var Ni=function(){function i(){(0,yf.Z)(this,i)}return(0,mf.Z)(i,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);t++}return a}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,a=!0,o=!1;t<this.rows&&a;){for(e=0,o=!1;e<this.columns&&o===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>n?(o=!0,n=e):(a=!1,o=!0);for(var s=e+1;s<this.rows;s++)this.get(t,s)!==0&&(a=!1);t++}return a}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var a=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(a,n)&&(a=o);if(t.get(a,n)===0)n++;else{t.swapRows(e,a);for(var s=t.get(e,n),u=n;u<t.columns;u++)t.set(e,u,t.get(e,u)/s);for(var h=e+1;h<t.rows;h++){var p=t.get(h,n)/t.get(e,n);t.set(h,n,0);for(var b=n+1;b<t.columns;b++)t.set(h,b,t.get(h,b)-t.get(e,b)*p)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,a=n-1;a>=0;)if(t.maxRow(a)===0)a--;else{for(var o=0,s=!1;o<n&&s===!1;)t.get(a,o)===1?s=!0:o++;for(var u=0;u<a;u++)for(var h=t.get(u,o),p=o;p<e;p++){var b=t.get(u,p)-h*t.get(a,p);t.set(u,p,b)}a--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.rows,n=e===void 0?1:e,a=t.columns,o=a===void 0?1:a;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var s=new xn(this.rows*n,this.columns*o),u=0;u<n;u++)for(var h=0;h<o;h++)s.setSubMatrix(this,this.rows*u,this.columns*h);return s}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){Ya(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return xn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){Ya(this,t),e=Bs(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){Ya(this,t),Ya(this,e);for(var n=0;n<this.columns;n++){var a=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,a)}return this}},{key:"getColumn",value:function(t){Ga(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return xn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Ga(this,t),e=Ds(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Ga(this,t),Ga(this,e);for(var n=0;n<this.rows;n++){var a=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,a)}return this}},{key:"addRowVector",value:function(t){t=Bs(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Bs(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Bs(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Bs(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Ds(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Ds(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Ds(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Ds(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){Ya(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Ga(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){Fs(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)>t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){Fs(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)this.get(n,a)<t&&(t=this.get(n,a),e[0]=n,e[1]=a);return e}},{key:"maxRow",value:function(t){if(Ya(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){Ya(this,t),Fs(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)>e&&(e=this.get(t,a),n[1]=a);return n}},{key:"minRow",value:function(t){if(Ya(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){Ya(this,t),Fs(this);for(var e=this.get(t,0),n=[t,0],a=1;a<this.columns;a++)this.get(t,a)<e&&(e=this.get(t,a),n[1]=a);return n}},{key:"maxColumn",value:function(t){if(Ga(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Ga(this,t),Fs(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)>e&&(e=this.get(a,t),n[0]=a);return n}},{key:"minColumn",value:function(t){if(Ga(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Ga(this,t),Fs(this);for(var e=this.get(0,t),n=[0,t],a=1;a<this.rows;a++)this.get(a,t)<e&&(e=this.get(a,t),n[0]=a);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var n=0;n<this.rows;n++)for(var a=0;a<this.columns;a++)e=e+this.get(n,a)*this.get(n,a);return Math.sqrt(e)}else throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(t){i.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return n}},{key:"mmul",value:function(t){t=xn.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.columns,o=new xn(e,a),s=new Float64Array(n),u=0;u<a;u++){for(var h=0;h<n;h++)s[h]=t.get(h,u);for(var p=0;p<e;p++){for(var b=0,k=0;k<n;k++)b+=this.get(p,k)*s[k];o.set(p,u,b)}}return o}},{key:"strassen2x2",value:function(t){t=xn.checkMatrix(t);var e=new xn(2,2),n=this.get(0,0),a=t.get(0,0),o=this.get(0,1),s=t.get(0,1),u=this.get(1,0),h=t.get(1,0),p=this.get(1,1),b=t.get(1,1),k=(n+p)*(a+b),R=(u+p)*a,Y=n*(s-b),V=p*(h-a),Z=(n+o)*b,it=(u-n)*(a+s),tt=(o-p)*(h+b),_t=k+V-Z+tt,It=Y+Z,Ht=R+V,le=k-R+Y+it;return e.set(0,0,_t),e.set(0,1,It),e.set(1,0,Ht),e.set(1,1,le),e}},{key:"strassen3x3",value:function(t){t=xn.checkMatrix(t);var e=new xn(3,3),n=this.get(0,0),a=this.get(0,1),o=this.get(0,2),s=this.get(1,0),u=this.get(1,1),h=this.get(1,2),p=this.get(2,0),b=this.get(2,1),k=this.get(2,2),R=t.get(0,0),Y=t.get(0,1),V=t.get(0,2),Z=t.get(1,0),it=t.get(1,1),tt=t.get(1,2),_t=t.get(2,0),It=t.get(2,1),Ht=t.get(2,2),le=(n+a+o-s-u-b-k)*it,xe=(n-s)*(-Y+it),Ce=u*(-R+Y+Z-it-tt-_t+Ht),me=(-n+s+u)*(R-Y+it),Le=(s+u)*(-R+Y),Ye=n*R,Be=(-n+p+b)*(R-V+tt),or=(-n+p)*(V-tt),cr=(p+b)*(-R+V),ar=(n+a+o-u-h-p-b)*tt,Cr=b*(-R+V+Z-it-tt-_t+It),wr=(-o+b+k)*(it+_t-It),Mr=(o-k)*(it-It),yr=o*_t,mr=(b+k)*(-_t+It),zr=(-o+u+h)*(tt+_t-Ht),Ur=(o-h)*(tt-Ht),Xr=(u+h)*(-_t+Ht),Er=a*Z,Zr=h*It,ln=s*V,Yr=p*Y,Nr=k*Ht,nn=Ye+yr+Er,yn=le+me+Le+Ye+wr+yr+mr,Kr=Ye+Be+cr+ar+yr+zr+Xr,ur=xe+Ce+me+Ye+yr+zr+Ur,Tr=xe+me+Le+Ye+Zr,an=yr+zr+Ur+Xr+ln,fn=Ye+Be+or+Cr+wr+Mr+yr,Jr=wr+Mr+yr+mr+Yr,bn=Ye+Be+or+cr+Nr;return e.set(0,0,nn),e.set(0,1,yn),e.set(0,2,Kr),e.set(1,0,ur),e.set(1,1,Tr),e.set(1,2,an),e.set(2,0,fn),e.set(2,1,Jr),e.set(2,2,bn),e}},{key:"mmulStrassen",value:function(t){t=xn.checkMatrix(t);var e=this.clone(),n=e.rows,a=e.columns,o=t.rows,s=t.columns;a!==o&&console.warn("Multiplying ".concat(n," x ").concat(a," and ").concat(o," x ").concat(s," matrix: dimensions do not match."));function u(k,R,Y){var V=k.rows,Z=k.columns;if(V===R&&Z===Y)return k;var it=i.zeros(R,Y);return it=it.setSubMatrix(k,0,0),it}var h=Math.max(n,o),p=Math.max(a,s);e=u(e,h,p),t=u(t,h,p);function b(k,R,Y,V){if(Y<=512||V<=512)return k.mmul(R);Y%2==1&&V%2==1?(k=u(k,Y+1,V+1),R=u(R,Y+1,V+1)):Y%2==1?(k=u(k,Y+1,V),R=u(R,Y+1,V)):V%2==1&&(k=u(k,Y,V+1),R=u(R,Y,V+1));var Z=parseInt(k.rows/2,10),it=parseInt(k.columns/2,10),tt=k.subMatrix(0,Z-1,0,it-1),_t=R.subMatrix(0,Z-1,0,it-1),It=k.subMatrix(0,Z-1,it,k.columns-1),Ht=R.subMatrix(0,Z-1,it,R.columns-1),le=k.subMatrix(Z,k.rows-1,0,it-1),xe=R.subMatrix(Z,R.rows-1,0,it-1),Ce=k.subMatrix(Z,k.rows-1,it,k.columns-1),me=R.subMatrix(Z,R.rows-1,it,R.columns-1),Le=b(i.add(tt,Ce),i.add(_t,me),Z,it),Ye=b(i.add(le,Ce),_t,Z,it),Be=b(tt,i.sub(Ht,me),Z,it),or=b(Ce,i.sub(xe,_t),Z,it),cr=b(i.add(tt,It),me,Z,it),ar=b(i.sub(le,tt),i.add(_t,Ht),Z,it),Cr=b(i.sub(It,Ce),i.add(xe,me),Z,it),wr=i.add(Le,or);wr.sub(cr),wr.add(Cr);var Mr=i.add(Be,cr),yr=i.add(Ye,or),mr=i.sub(Le,Ye);mr.add(Be),mr.add(ar);var zr=i.zeros(2*wr.rows,2*wr.columns);return zr=zr.setSubMatrix(wr,0,0),zr=zr.setSubMatrix(Mr,wr.rows,0),zr=zr.setSubMatrix(yr,0,wr.columns),zr=zr.setSubMatrix(mr,wr.rows,wr.columns),zr.subMatrix(0,Y-1,0,V-1)}return b(e,t,h,p)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var s=new xn(this.rows,this.columns),u=0;u<this.rows;u++){var h=this.getRow(u);h.length>0&&ex(h,{min:n,max:o,output:h}),s.setRow(u,h)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="object")throw new TypeError("options must be an object");var e=t.min,n=e===void 0?0:e,a=t.max,o=a===void 0?1:a;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var s=new xn(this.rows,this.columns),u=0;u<this.columns;u++){var h=this.getColumn(u);h.length&&ex(h,{min:n,max:o,output:h}),s.setColumn(u,h)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var a=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,a)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var a=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,a)}return this}},{key:"kroneckerProduct",value:function(t){t=xn.checkMatrix(t);for(var e=this.rows,n=this.columns,a=t.rows,o=t.columns,s=new xn(e*a,n*o),u=0;u<e;u++)for(var h=0;h<n;h++)for(var p=0;p<a;p++)for(var b=0;b<o;b++)s.set(a*u+p,o*h+b,this.get(u,h)*t.get(p,b));return s}},{key:"kroneckerSum",value:function(t){if(t=xn.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,n=t.rows,a=this.kroneckerProduct(xn.eye(n,n)),o=xn.eye(e,e).kroneckerProduct(t);return a.add(o)}},{key:"transpose",value:function(){for(var t=new xn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ax,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ax,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,a){ix(this,t,e,n,a);for(var o=new xn(e-t+1,a-n+1),s=t;s<=e;s++)for(var u=n;u<=a;u++)o.set(s-t,u-n,this.get(s,u));return o}},{key:"subMatrixRow",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var a=new xn(t.length,n-e+1),o=0;o<t.length;o++)for(var s=e;s<=n;s++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));a.set(o,s-e,this.get(t[o],s))}return a}},{key:"subMatrixColumn",value:function(t,e,n){if(e===void 0&&(e=0),n===void 0&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var a=new xn(n-e+1,t.length),o=0;o<t.length;o++)for(var s=e;s<=n;s++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));a.set(s-e,o,this.get(s,t[o]))}return a}},{key:"setSubMatrix",value:function(t,e,n){if(t=xn.checkMatrix(t),t.isEmpty())return this;var a=e+t.rows-1,o=n+t.columns-1;ix(this,e,a,n,o);for(var s=0;s<t.rows;s++)for(var u=0;u<t.columns;u++)this.set(e+s,n+u,t.get(s,u));return this}},{key:"selection",value:function(t,e){for(var n=hP(this,t,e),a=new xn(t.length,e.length),o=0;o<n.row.length;o++)for(var s=n.row[o],u=0;u<n.column.length;u++){var h=n.column[u];a.set(o,u,this.get(s,h))}return a}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new xn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return vP(this);case"column":return dP(this);case void 0:return pP(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return gP(this);case"column":return yP(this);case void 0:return mP(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":{for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e}case"column":{for(var a=0;a<this.columns;a++)e[a]/=this.rows;return e}case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.unbiased,o=a===void 0?!0:a,s=n.mean,u=s===void 0?this.mean(t):s;if(typeof o!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return xP(this,o,u)}case"column":{if(!Array.isArray(u))throw new TypeError("mean must be an array");return bP(this,o,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return wP(this,o,u)}default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){typeof t=="object"&&(e=t,t=void 0);var n=this.variance(t,e);if(t===void 0)return Math.sqrt(n);for(var a=0;a<n.length;a++)n[a]=Math.sqrt(n[a]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e,a=n.center,o=a===void 0?this.mean(t):a;switch(t){case"row":{if(!Array.isArray(o))throw new TypeError("center must be an array");return SP(this,o),this}case"column":{if(!Array.isArray(o))throw new TypeError("center must be an array");return CP(this,o),this}case void 0:{if(typeof o!="number")throw new TypeError("center must be a number");return MP(this,o),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof t=="object"&&(e=t,t=void 0),typeof e!="object")throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":{if(n===void 0)n=EP(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return AP(this,n),this}case"column":{if(n===void 0)n=TP(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return PP(this,n),this}case void 0:{if(n===void 0)n=LP(this);else if(typeof n!="number")throw new TypeError("scale must be a number");return _P(this,n),this}default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return nx(this,t)}}],[{key:"from1DArray",value:function(t,e,n){var a=t*e;if(a!==n.length)throw new RangeError("data length does not match given dimensions");for(var o=new xn(t,e),s=0;s<t;s++)for(var u=0;u<e;u++)o.set(s,u,n[s*e+u]);return o}},{key:"rowVector",value:function(t){for(var e=new xn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new xn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new xn(t,e)}},{key:"ones",value:function(t,e){return new xn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");for(var a=n.random,o=a===void 0?Math.random:a,s=new xn(t,e),u=0;u<t;u++)for(var h=0;h<e;h++)s.set(u,h,o());return s}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n!="object")throw new TypeError("options must be an object");var a=n.min,o=a===void 0?0:a,s=n.max,u=s===void 0?1e3:s,h=n.random,p=h===void 0?Math.random:h;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(o>=u)throw new RangeError("min must be smaller than max");for(var b=u-o,k=new xn(t,e),R=0;R<t;R++)for(var Y=0;Y<e;Y++){var V=o+Math.round(p()*b);k.set(R,Y,V)}return k}},{key:"eye",value:function(t,e,n){e===void 0&&(e=t),n===void 0&&(n=1);for(var a=Math.min(t,e),o=this.zeros(t,e),s=0;s<a;s++)o.set(s,s,n);return o}},{key:"diag",value:function(t,e,n){var a=t.length;e===void 0&&(e=a),n===void 0&&(n=e);for(var o=Math.min(a,e,n),s=this.zeros(e,n),u=0;u<o;u++)s.set(u,u,t[u]);return s}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new xn(n,a),s=0;s<n;s++)for(var u=0;u<a;u++)o.set(s,u,Math.min(t.get(s,u),e.get(s,u)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,a=t.columns,o=new this(n,a),s=0;s<n;s++)for(var u=0;u<a;u++)o.set(s,u,Math.max(t.get(s,u),e.get(s,u)));return o}},{key:"checkMatrix",value:function(t){return i.isMatrix(t)?t:new xn(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),i}();Ni.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Ni.prototype[Symbol.for("nodejs.util.inspect.custom")]=oP);function ax(i,r){return i-r}Ni.random=Ni.rand,Ni.randomInt=Ni.randInt,Ni.diagonal=Ni.diag,Ni.prototype.diagonal=Ni.prototype.diag,Ni.identity=Ni.eye,Ni.prototype.negate=Ni.prototype.neg,Ni.prototype.tensorProduct=Ni.prototype.kroneckerProduct;var xn=function(i){(0,qm.Z)(t,i);var r=(0,tx.Z)(t);function t(e,n){var a;if((0,yf.Z)(this,t),a=r.call(this),t.isMatrix(e))return(0,tP.Z)(a,e.clone());if(Number.isInteger(e)&&e>=0)if(a.data=[],Number.isInteger(n)&&n>=0)for(var o=0;o<e;o++)a.data.push(new Float64Array(n));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(e)){var s=e;if(e=s.length,n=e?s[0].length:0,typeof n!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var u=0;u<e;u++){if(s[u].length!==n)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return a.rows=e,a.columns=n,a}return(0,mf.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}},{key:"removeRow",value:function(n){return Ya(this,n),this.data.splice(n,1),this.rows-=1,this}},{key:"addRow",value:function(n,a){return a===void 0&&(a=n,n=this.rows),Ya(this,n,!0),a=Float64Array.from(Bs(this,a)),this.data.splice(n,0,a),this.rows+=1,this}},{key:"removeColumn",value:function(n){Ga(this,n);for(var a=0;a<this.rows;a++){for(var o=new Float64Array(this.columns-1),s=0;s<n;s++)o[s]=this.data[a][s];for(var u=n+1;u<this.columns;u++)o[u-1]=this.data[a][u];this.data[a]=o}return this.columns-=1,this}},{key:"addColumn",value:function(n,a){typeof a=="undefined"&&(a=n,n=this.columns),Ga(this,n,!0),a=Ds(this,a);for(var o=0;o<this.rows;o++){for(var s=new Float64Array(this.columns+1),u=0;u<n;u++)s[u]=this.data[o][u];for(s[u++]=a[o];u<this.columns+1;u++)s[u]=this.data[o][u-1];this.data[o]=s}return this.columns+=1,this}}]),t}(Ni);uP(Ni,xn);var IP=function(i){(0,qm.Z)(t,i);var r=(0,tx.Z)(t);function t(e){var n;return(0,yf.Z)(this,t),n=r.call(this),n.data=e,n.rows=e.length,n.columns=e[0].length,n}return(0,mf.Z)(t,[{key:"set",value:function(n,a,o){return this.data[n][a]=o,this}},{key:"get",value:function(n,a){return this.data[n][a]}}]),t}(Ni);function Rs(i,r){var t=0;return Math.abs(i)>Math.abs(r)?(t=r/i,Math.abs(i)*Math.sqrt(1+t*t)):r!==0?(t=i/r,Math.abs(r)*Math.sqrt(1+t*t)):0}var ox=function(){function i(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,yf.Z)(this,i),r=IP.checkMatrix(r),r.isEmpty())throw new Error("Matrix must be non-empty");var e=r.rows,n=r.columns,a=t.computeLeftSingularVectors,o=a===void 0?!0:a,s=t.computeRightSingularVectors,u=s===void 0?!0:s,h=t.autoTranspose,p=h===void 0?!1:h,b=Boolean(o),k=Boolean(u),R=!1,Y;if(e<n)if(!p)Y=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Y=r.transpose(),e=Y.rows,n=Y.columns,R=!0;var V=b;b=k,k=V}else Y=r.clone();for(var Z=Math.min(e,n),it=Math.min(e+1,n),tt=new Float64Array(it),_t=new xn(e,Z),It=new xn(n,n),Ht=new Float64Array(n),le=new Float64Array(e),xe=new Float64Array(it),Ce=0;Ce<it;Ce++)xe[Ce]=Ce;for(var me=Math.min(e-1,n),Le=Math.max(0,Math.min(n-2,e)),Ye=Math.max(me,Le),Be=0;Be<Ye;Be++){if(Be<me){tt[Be]=0;for(var or=Be;or<e;or++)tt[Be]=Rs(tt[Be],Y.get(or,Be));if(tt[Be]!==0){Y.get(Be,Be)<0&&(tt[Be]=-tt[Be]);for(var cr=Be;cr<e;cr++)Y.set(cr,Be,Y.get(cr,Be)/tt[Be]);Y.set(Be,Be,Y.get(Be,Be)+1)}tt[Be]=-tt[Be]}for(var ar=Be+1;ar<n;ar++){if(Be<me&&tt[Be]!==0){for(var Cr=0,wr=Be;wr<e;wr++)Cr+=Y.get(wr,Be)*Y.get(wr,ar);Cr=-Cr/Y.get(Be,Be);for(var Mr=Be;Mr<e;Mr++)Y.set(Mr,ar,Y.get(Mr,ar)+Cr*Y.get(Mr,Be))}Ht[ar]=Y.get(Be,ar)}if(b&&Be<me)for(var yr=Be;yr<e;yr++)_t.set(yr,Be,Y.get(yr,Be));if(Be<Le){Ht[Be]=0;for(var mr=Be+1;mr<n;mr++)Ht[Be]=Rs(Ht[Be],Ht[mr]);if(Ht[Be]!==0){Ht[Be+1]<0&&(Ht[Be]=0-Ht[Be]);for(var zr=Be+1;zr<n;zr++)Ht[zr]/=Ht[Be];Ht[Be+1]+=1}if(Ht[Be]=-Ht[Be],Be+1<e&&Ht[Be]!==0){for(var Ur=Be+1;Ur<e;Ur++)le[Ur]=0;for(var Xr=Be+1;Xr<e;Xr++)for(var Er=Be+1;Er<n;Er++)le[Xr]+=Ht[Er]*Y.get(Xr,Er);for(var Zr=Be+1;Zr<n;Zr++)for(var ln=-Ht[Zr]/Ht[Be+1],Yr=Be+1;Yr<e;Yr++)Y.set(Yr,Zr,Y.get(Yr,Zr)+ln*le[Yr])}if(k)for(var Nr=Be+1;Nr<n;Nr++)It.set(Nr,Be,Ht[Nr])}}var nn=Math.min(n,e+1);if(me<n&&(tt[me]=Y.get(me,me)),e<nn&&(tt[nn-1]=0),Le+1<nn&&(Ht[Le]=Y.get(Le,nn-1)),Ht[nn-1]=0,b){for(var yn=me;yn<Z;yn++){for(var Kr=0;Kr<e;Kr++)_t.set(Kr,yn,0);_t.set(yn,yn,1)}for(var ur=me-1;ur>=0;ur--)if(tt[ur]!==0){for(var Tr=ur+1;Tr<Z;Tr++){for(var an=0,fn=ur;fn<e;fn++)an+=_t.get(fn,ur)*_t.get(fn,Tr);an=-an/_t.get(ur,ur);for(var Jr=ur;Jr<e;Jr++)_t.set(Jr,Tr,_t.get(Jr,Tr)+an*_t.get(Jr,ur))}for(var bn=ur;bn<e;bn++)_t.set(bn,ur,-_t.get(bn,ur));_t.set(ur,ur,1+_t.get(ur,ur));for(var pn=0;pn<ur-1;pn++)_t.set(pn,ur,0)}else{for(var sn=0;sn<e;sn++)_t.set(sn,ur,0);_t.set(ur,ur,1)}}if(k)for(var wn=n-1;wn>=0;wn--){if(wn<Le&&Ht[wn]!==0)for(var Fn=wn+1;Fn<n;Fn++){for(var hi=0,jn=wn+1;jn<n;jn++)hi+=It.get(jn,wn)*It.get(jn,Fn);hi=-hi/It.get(wn+1,wn);for(var xi=wn+1;xi<n;xi++)It.set(xi,Fn,It.get(xi,Fn)+hi*It.get(xi,wn))}for(var Ai=0;Ai<n;Ai++)It.set(Ai,wn,0);It.set(wn,wn,1)}for(var Wi=nn-1,Qi=0,Bi=Number.EPSILON;nn>0;){var rn=void 0,bi=void 0;for(rn=nn-2;rn>=-1&&rn!==-1;rn--){var Yi=Number.MIN_VALUE+Bi*Math.abs(tt[rn]+Math.abs(tt[rn+1]));if(Math.abs(Ht[rn])<=Yi||Number.isNaN(Ht[rn])){Ht[rn]=0;break}}if(rn===nn-2)bi=4;else{var Fi=void 0;for(Fi=nn-1;Fi>=rn&&Fi!==rn;Fi--){var ho=(Fi!==nn?Math.abs(Ht[Fi]):0)+(Fi!==rn+1?Math.abs(Ht[Fi-1]):0);if(Math.abs(tt[Fi])<=Bi*ho){tt[Fi]=0;break}}Fi===rn?bi=3:Fi===nn-1?bi=1:(bi=2,rn=Fi)}switch(rn++,bi){case 1:{var Gi=Ht[nn-2];Ht[nn-2]=0;for(var Kn=nn-2;Kn>=rn;Kn--){var Xn=Rs(tt[Kn],Gi),fi=tt[Kn]/Xn,gi=Gi/Xn;if(tt[Kn]=Xn,Kn!==rn&&(Gi=-gi*Ht[Kn-1],Ht[Kn-1]=fi*Ht[Kn-1]),k)for(var Ji=0;Ji<n;Ji++)Xn=fi*It.get(Ji,Kn)+gi*It.get(Ji,nn-1),It.set(Ji,nn-1,-gi*It.get(Ji,Kn)+fi*It.get(Ji,nn-1)),It.set(Ji,Kn,Xn)}break}case 2:{var us=Ht[rn-1];Ht[rn-1]=0;for(var za=rn;za<nn;za++){var Zl=Rs(tt[za],us),op=tt[za]/Zl,sp=us/Zl;if(tt[za]=Zl,us=-sp*Ht[za],Ht[za]=op*Ht[za],b)for(var Yo=0;Yo<e;Yo++)Zl=op*_t.get(Yo,za)+sp*_t.get(Yo,rn-1),_t.set(Yo,rn-1,-sp*_t.get(Yo,za)+op*_t.get(Yo,rn-1)),_t.set(Yo,za,Zl)}break}case 3:{var Kl=Math.max(Math.abs(tt[nn-1]),Math.abs(tt[nn-2]),Math.abs(Ht[nn-2]),Math.abs(tt[rn]),Math.abs(Ht[rn])),Ys=tt[nn-1]/Kl,n1=tt[nn-2]/Kl,zf=Ht[nn-2]/Kl,lp=tt[rn]/Kl,AO=Ht[rn]/Kl,hs=((n1+Ys)*(n1-Ys)+zf*zf)/2,Xf=Ys*zf*(Ys*zf),$l=0;(hs!==0||Xf!==0)&&(hs<0?$l=0-Math.sqrt(hs*hs+Xf):$l=Math.sqrt(hs*hs+Xf),$l=Xf/(hs+$l));for(var fs=(lp+Ys)*(lp-Ys)+$l,Gs=lp*AO,$n=rn;$n<nn-1;$n++){var ca=Rs(fs,Gs);ca===0&&(ca=Number.MIN_VALUE);var Xa=fs/ca,Ha=Gs/ca;if($n!==rn&&(Ht[$n-1]=ca),fs=Xa*tt[$n]+Ha*Ht[$n],Ht[$n]=Xa*Ht[$n]-Ha*tt[$n],Gs=Ha*tt[$n+1],tt[$n+1]=Xa*tt[$n+1],k)for(var Go=0;Go<n;Go++)ca=Xa*It.get(Go,$n)+Ha*It.get(Go,$n+1),It.set(Go,$n+1,-Ha*It.get(Go,$n)+Xa*It.get(Go,$n+1)),It.set(Go,$n,ca);if(ca=Rs(fs,Gs),ca===0&&(ca=Number.MIN_VALUE),Xa=fs/ca,Ha=Gs/ca,tt[$n]=ca,fs=Xa*Ht[$n]+Ha*tt[$n+1],tt[$n+1]=-Ha*Ht[$n]+Xa*tt[$n+1],Gs=Ha*Ht[$n+1],Ht[$n+1]=Xa*Ht[$n+1],b&&$n<e-1)for(var zo=0;zo<e;zo++)ca=Xa*_t.get(zo,$n)+Ha*_t.get(zo,$n+1),_t.set(zo,$n+1,-Ha*_t.get(zo,$n)+Xa*_t.get(zo,$n+1)),_t.set(zo,$n,ca)}Ht[nn-2]=fs,Qi=Qi+1;break}case 4:{if(tt[rn]<=0&&(tt[rn]=tt[rn]<0?-tt[rn]:0,k))for(var Hf=0;Hf<=Wi;Hf++)It.set(Hf,rn,-It.get(Hf,rn));for(;rn<Wi&&!(tt[rn]>=tt[rn+1]);){var Ql=tt[rn];if(tt[rn]=tt[rn+1],tt[rn+1]=Ql,k&&rn<n-1)for(var zs=0;zs<n;zs++)Ql=It.get(zs,rn+1),It.set(zs,rn+1,It.get(zs,rn)),It.set(zs,rn,Ql);if(b&&rn<e-1)for(var Xs=0;Xs<e;Xs++)Ql=_t.get(Xs,rn+1),_t.set(Xs,rn+1,_t.get(Xs,rn)),_t.set(Xs,rn,Ql);rn++}Qi=0,nn--;break}}}if(R){var TO=It;It=_t,_t=TO}this.m=e,this.n=n,this.s=tt,this.U=_t,this.V=It}return(0,mf.Z)(i,[{key:"solve",value:function(t){for(var e=t,n=this.threshold,a=this.s.length,o=xn.zeros(a,a),s=0;s<a;s++)Math.abs(this.s[s])<=n?o.set(s,s,0):o.set(s,s,1/this.s[s]);for(var u=this.U,h=this.rightSingularVectors,p=h.mmul(o),b=h.rows,k=u.rows,R=xn.zeros(b,k),Y=0;Y<b;Y++)for(var V=0;V<k;V++){for(var Z=0,it=0;it<a;it++)Z+=p.get(Y,it)*u.get(V,it);R.set(Y,V,Z)}return R.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(xn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,a=t.columns,o=new xn(n,this.s.length),s=0;s<n;s++)for(var u=0;u<a;u++)Math.abs(this.s[u])>e&&o.set(s,u,t.get(s,u)/this.s[u]);for(var h=this.U,p=h.rows,b=h.columns,k=new xn(n,p),R=0;R<n;R++)for(var Y=0;Y<p;Y++){for(var V=0,Z=0;Z<b;Z++)V+=o.get(R,Z)*h.get(Y,Z);k.set(R,Y,V)}return k}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,a=0,o=n.length;a<o;a++)n[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return xn.diag(this.s)}}]),i}(),OP=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.linkDistance=50,t.scaledDistances=null,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges,a=n===void 0?[]:n,o=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=o[0],e[0].y=o[1];return}var s=t.linkDistance,u=Md({nodes:e,edges:a},!1),h=Cd(u);t.handleInfinity(h);var p=K0(h,s);t.scaledDistances=p;var b=t.runMDS();t.positions=b,b.forEach(function(k,R){e[R].x=k[0]+o[0],e[R].y=k[1]+o[1]})}},r.prototype.runMDS=function(){var t=this,e=2,n=t.scaledDistances,a=xn.mul(xn.pow(n,2),-.5),o=a.mean("row"),s=a.mean("column"),u=a.mean();a.add(u).subRowVector(o).subColumnVector(s);var h=new ox(a),p=xn.sqrt(h.diagonalMatrix).diagonal();return h.leftSingularVectors.toJSON().map(function(b){return xn.mul([b],[p]).toJSON()[0].splice(0,e)})},r.prototype.handleInfinity=function(t){var e=-999999;t.forEach(function(n){n.forEach(function(a){a!==Infinity&&e<a&&(e=a)})}),t.forEach(function(n,a){n.forEach(function(o,s){o===Infinity&&(t[a][s]=e)})})},r}(Pa),kP=OP,BP=function(){function i(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}return i.prototype.layout=function(){var r=this,t=r.dimension,e=r.distances,n=r.linkDistance;try{var a=xn.mul(xn.pow(e,2),-.5),o=a.mean("row"),s=a.mean("column"),u=a.mean();a.add(u).subRowVector(o).subColumnVector(s);var h=new ox(a),p=xn.sqrt(h.diagonalMatrix).diagonal();return h.leftSingularVectors.toJSON().map(function(V){return xn.mul([V],[p]).toJSON()[0].splice(0,t)})}catch(V){for(var b=[],k=0;k<e.length;k++){var R=Math.random()*n,Y=Math.random()*n;b.push([R,Y])}return b}},i}(),DP=BP,FP=800,RP=function(){function i(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}return i.prototype.layout=function(){var r=this,t=r.positions,e=[],n=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var o=0;o<n;o++)t.forEach(function(s,u){e[u]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return t},i.prototype.getRepulsion=function(){var r=this,t=r.positions,e=r.nodes,n=r.disp,a=r.k,o=r.radii||[];t.forEach(function(s,u){n[u]={x:0,y:0},t.forEach(function(h,p){if(u!==p&&o[u]===o[p]){var b=s[0]-h[0],k=s[1]-h[1],R=Math.sqrt(b*b+k*k);if(R===0){R=1;var Y=u>p?1:-1;b=.01*Y,k=.01*Y}if(R<r.nodeSizeFunc(e[u])/2+r.nodeSizeFunc(e[p])/2){var V=a*a/R;n[u].x+=b/R*V,n[u].y+=k/R*V}}})})},i.prototype.updatePositions=function(){var r=this,t=r.positions,e=r.disp,n=r.speed,a=r.strictRadial,o=r.focusID,s=r.maxDisplace||r.width/10;a&&e.forEach(function(h,p){var b=t[p][0]-t[o][0],k=t[p][1]-t[o][1],R=Math.sqrt(b*b+k*k),Y=k/R,V=-b/R,Z=Math.sqrt(h.x*h.x+h.y*h.y),it=Math.acos((Y*h.x+V*h.y)/Z);it>Math.PI/2&&(it-=Math.PI/2,Y*=-1,V*=-1);var tt=Math.cos(it)*Z;h.x=Y*tt,h.y=V*tt});var u=r.radii;t.forEach(function(h,p){if(p!==o){var b=Math.sqrt(e[p].x*e[p].x+e[p].y*e[p].y);if(b>0&&p!==o){var k=Math.min(s*(n/FP),b);if(h[0]+=e[p].x/b*k,h[1]+=e[p].y/b*k,a){var R=h[0]-t[o][0],Y=h[1]-t[o][1],V=Math.sqrt(R*R+Y*Y);R=R/V*u[p],Y=Y/V*u[p],h[0]=t[o][0]+R,h[1]=t[o][1]+Y}}}})},i}(),NP=RP;function YP(i){for(var r=i.length,t=i[0].length,e=[],n=0;n<r;n++){for(var a=[],o=0;o<t;o++)i[n][o]!==0?a.push(1/(i[n][o]*i[n][o])):a.push(0);e.push(a)}return e}function GP(i,r){var t=-1;return i.forEach(function(e,n){e.id===r&&(t=n)}),t}function sx(i,r){return Math.sqrt((i[0]-r[0])*(i[0]-r[0])+(i[1]-r[1])*(i[1]-r[1]))}var zP=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=1e3,t.focusNode=null,t.unitRadius=null,t.linkDistance=50,t.preventOverlap=!1,t.strictRadial=!0,t.maxPreventOverlapIteration=200,t.sortStrength=10,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges||[],a=t.center;if(!(!e||e.length===0)){if(e.length===1){e[0].x=a[0],e[0].y=a[1];return}var o=t.linkDistance,s=null;if((0,ti.default)(t.focusNode)){for(var u=!1,h=0;h<e.length;h++)e[h].id===t.focusNode&&(s=e[h],t.focusNode=s,u=!0,h=e.length);u||(s=null)}else s=t.focusNode;s||(s=e[0],t.focusNode=s);var p=GP(e,s.id);t.focusIndex=p;var b=Md({nodes:e,edges:n},!1),k=Cd(b),R=t.maxToFocus(k,p);t.handleInfinity(k,p,R+1),t.distances=k;var Y=k[p];!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var V=t.width||500,Z=t.height||500,it=V-a[0]>a[0]?a[0]:V-a[0],tt=Z-a[1]>a[1]?a[1]:Z-a[1];it===0&&(it=V/2),tt===0&&(tt=Z/2);var _t=tt>it?it:tt,It=Math.max.apply(Math,Y),Ht=[];Y.forEach(function(Mr,yr){t.unitRadius||(t.unitRadius=_t/It),Ht[yr]=Mr*t.unitRadius}),t.radii=Ht;var le=t.eIdealDisMatrix();t.eIdealDistances=le;var xe=YP(le);t.weights=xe;var Ce=new DP({distances:le,linkDistance:o}),me=Ce.layout();me.forEach(function(Mr){Co(Mr[0])&&(Mr[0]=Math.random()*o),Co(Mr[1])&&(Mr[1]=Math.random()*o)}),t.positions=me,me.forEach(function(Mr,yr){e[yr].x=Mr[0]+a[0],e[yr].y=Mr[1]+a[1]}),me.forEach(function(Mr){Mr[0]-=me[p][0],Mr[1]-=me[p][1]}),t.run();var Le=t.preventOverlap,Ye=t.nodeSize,Be,or=t.strictRadial;if(Le){var cr=t.nodeSpacing,ar;(0,Ra.default)(cr)?ar=function(){return cr}:(0,jd.default)(cr)?ar=cr:ar=function(){return 0},Ye?(0,Zi.default)(Ye)?Be=function(yr){var mr=Ye[0]>Ye[1]?Ye[0]:Ye[1];return mr+ar(yr)}:Be=function(yr){return Ye+ar(yr)}:Be=function(yr){if(yr.size){if((0,Zi.default)(yr.size)){var mr=yr.size[0]>yr.size[1]?yr.size[0]:yr.size[1];return mr+ar(yr)}return yr.size+ar(yr)}return 10+ar(yr)};var Cr={nodeSizeFunc:Be,adjMatrix:b,positions:me,radii:Ht,height:Z,width:V,strictRadial:or,focusID:p,iterations:t.maxPreventOverlapIteration||200,k:me.length/4.5,nodes:e},wr=new NP(Cr);me=wr.layout()}me.forEach(function(Mr,yr){e[yr].x=Mr[0]+a[0],e[yr].y=Mr[1]+a[1]})}},r.prototype.run=function(){for(var t=this,e=t.maxIteration,n=t.positions||[],a=t.weights||[],o=t.eIdealDistances||[],s=t.radii||[],u=0;u<=e;u++){var h=u/e;t.oneIteration(h,n,s,o,a)}},r.prototype.oneIteration=function(t,e,n,a,o){var s=this,u=1-t,h=s.focusIndex;e.forEach(function(p,b){var k=sx(p,[0,0]),R=k===0?0:1/k;if(b!==h){var Y=0,V=0,Z=0;e.forEach(function(tt,_t){if(b!==_t){var It=sx(p,tt),Ht=It===0?0:1/It,le=a[_t][b];Z+=o[b][_t],Y+=o[b][_t]*(tt[0]+le*(p[0]-tt[0])*Ht),V+=o[b][_t]*(tt[1]+le*(p[1]-tt[1])*Ht)}});var it=n[b]===0?0:1/n[b];Z*=u,Z+=t*it*it,Y*=u,Y+=t*it*p[0]*R,p[0]=Y/Z,V*=u,V+=t*it*p[1]*R,p[1]=V/Z}})},r.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,a=t.linkDistance,o=t.radii||[],s=t.unitRadius||50,u=[];return n&&n.forEach(function(h,p){var b=[];h.forEach(function(k,R){if(p===R)b.push(0);else if(o[p]===o[R])if(t.sortBy==="data")b.push(k*(Math.abs(p-R)*t.sortStrength)/(o[p]/s));else if(t.sortBy){var Y=e[p][t.sortBy]||0,V=e[R][t.sortBy]||0;(0,ti.default)(Y)&&(Y=Y.charCodeAt(0)),(0,ti.default)(V)&&(V=V.charCodeAt(0)),b.push(k*(Math.abs(Y-V)*t.sortStrength)/(o[p]/s))}else b.push(k*a/(o[p]/s));else{var Z=(a+s)/2;b.push(k*Z)}}),u.push(b)}),u},r.prototype.handleInfinity=function(t,e,n){for(var a=t.length,o=0;o<a;o++)if(t[e][o]===Infinity){t[e][o]=n,t[o][e]=n;for(var s=0;s<a;s++)t[o][s]!==Infinity&&t[e][s]===Infinity&&(t[e][s]=n+t[o][s],t[s][e]=n+t[o][s])}for(var o=0;o<a;o++)if(o!==e){for(var s=0;s<a;s++)if(t[o][s]===Infinity){var u=Math.abs(t[e][o]-t[e][s]);u=u===0?1:u,t[o][s]=u}}},r.prototype.maxToFocus=function(t,e){for(var n=0,a=0;a<t[e].length;a++)t[e][a]!==Infinity&&(n=t[e][a]>n?t[e][a]:n);return n},r}(Pa),XP=zP,HP=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.width=300,t.height=300,t}return r.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},r.prototype.execute=function(){var t=this,e=t.nodes,n=.9,a=t.center;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),e&&e.forEach(function(o){o.x=(Math.random()-.5)*n*t.width+a[0],o.y=(Math.random()-.5)*n*t.height+a[1]})},r}(Pa),VP=HP,WP=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.center=[0,0],t.maxIteration=100,t.gravity=10,t.comboGravity=10,t.linkDistance=10,t.alpha=1,t.alphaMin=.001,t.alphaDecay=1-Math.pow(t.alphaMin,1/300),t.alphaTarget=0,t.velocityDecay=.6,t.edgeStrength=.2,t.nodeStrength=30,t.preventOverlap=!1,t.preventNodeOverlap=!1,t.preventComboOverlap=!1,t.collideStrength=void 0,t.nodeCollideStrength=void 0,t.comboCollideStrength=void 0,t.optimizeRangeFactor=1,t.onTick=function(){},t.onLayoutEnd=function(){},t.depthAttractiveForceScale=.5,t.depthRepulsiveForceScale=2,t.nodes=[],t.edges=[],t.combos=[],t.comboTrees=[],t.width=300,t.height=300,t.bias=[],t.nodeMap={},t.oriComboMap={},t.nodeIdxMap={},t.comboMap={},t.previousLayouted=!1,t}return r.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},r.prototype.execute=function(){var t=this,e=t.nodes,n=t.center;if(t.comboTree={id:"comboTreeRoot",depth:-1,children:t.comboTrees},!(!e||e.length===0)){if(e.length===1){e[0].x=n[0],e[0].y=n[1];return}t.initVals(),t.run(),t.onLayoutEnd()}},r.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var a=t.center,o=t.velocityDecay,s=t.comboMap;t.previousLayouted||t.initPos(s);for(var u=function(R){var Y=[];e.forEach(function(V,Z){Y[Z]={x:0,y:0}}),t.applyCalculate(Y),t.applyComboCenterForce(Y),e.forEach(function(V,Z){!(0,y.isNumber)(V.x)||!(0,y.isNumber)(V.y)||(V.x+=Y[Z].x*o,V.y+=Y[Z].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},h=0;h<n;h++)u(h);var p=[0,0];e.forEach(function(k){!(0,y.isNumber)(k.x)||!(0,y.isNumber)(k.y)||(p[0]+=k.x,p[1]+=k.y)}),p[0]/=e.length,p[1]/=e.length;var b=[a[0]-p[0],a[1]-p[1]];e.forEach(function(k,R){!(0,y.isNumber)(k.x)||!(0,y.isNumber)(k.y)||(k.x+=b[0],k.y+=b[1])}),t.combos.forEach(function(k){var R=s[k.id];R&&R.empty&&(k.x=R.cx||k.x,k.y=R.cy||k.y)}),t.previousLayouted=!0},r.prototype.initVals=function(){var t=this,e=t.edges,n=t.nodes,a=t.combos,o={},s={},u={};n.forEach(function(ar,Cr){s[ar.id]=ar,u[ar.id]=Cr}),t.nodeMap=s,t.nodeIdxMap=u;var h={};a.forEach(function(ar){h[ar.id]=ar}),t.oriComboMap=h,t.comboMap=t.getComboMap();var p=t.preventOverlap;t.preventComboOverlap=t.preventComboOverlap||p,t.preventNodeOverlap=t.preventNodeOverlap||p;var b=t.collideStrength;b&&(t.comboCollideStrength=b,t.nodeCollideStrength=b);for(var k=0;k<e.length;++k)o[e[k].source]?o[e[k].source]++:o[e[k].source]=1,o[e[k].target]?o[e[k].target]++:o[e[k].target]=1;for(var R=[],k=0;k<e.length;++k)R[k]=o[e[k].source]/(o[e[k].source]+o[e[k].target]);this.bias=R;var Y=t.nodeSize,V=t.nodeSpacing,Z,it;if((0,y.isNumber)(V)?it=function(){return V}:(0,y.isFunction)(V)?it=V:it=function(){return 0},this.nodeSpacing=it,!Y)Z=function(Cr){if(Cr.size){if((0,y.isArray)(Cr.size)){var wr=Cr.size[0]>Cr.size[1]?Cr.size[0]:Cr.size[1];return wr/2}return Cr.size/2}return 10};else if((0,y.isFunction)(Y))Z=function(Cr){return Y(Cr)};else if((0,y.isArray)(Y)){var tt=Y[0]>Y[1]?Y[0]:Y[1],_t=tt/2;Z=function(Cr){return _t}}else{var It=Y/2;Z=function(Cr){return It}}this.nodeSize=Z;var Ht=t.comboSpacing,le;(0,y.isNumber)(Ht)?le=function(){return Ht}:(0,y.isFunction)(Ht)?le=Ht:le=function(){return 0},this.comboSpacing=le;var xe=t.comboPadding,Ce;(0,y.isNumber)(xe)?Ce=function(){return xe}:(0,y.isArray)(xe)?Ce=function(){return Math.max.apply(null,xe)}:(0,y.isFunction)(xe)?Ce=xe:Ce=function(){return 0},this.comboPadding=Ce;var me=this.linkDistance,Le;me||(me=10),(0,y.isNumber)(me)?Le=function(Cr){return me}:Le=me,this.linkDistance=Le;var Ye=this.edgeStrength,Be;Ye||(Ye=1),(0,y.isNumber)(Ye)?Be=function(Cr){return Ye}:Be=Ye,this.edgeStrength=Be;var or=this.nodeStrength,cr;or||(or=30),(0,y.isNumber)(or)?cr=function(Cr){return or}:cr=or,this.nodeStrength=cr},r.prototype.initPos=function(t){var e=this,n=e.nodes;n.forEach(function(a,o){if(a.comboId){var s=t[a.comboId];a.x=s.cx+100/(o+1),a.y=s.cy+100/(o+1)}else a.x=100/(o+1),a.y=100/(o+1)})},r.prototype.getComboMap=function(){var t=this,e=t.nodeMap,n=t.nodeIdxMap,a=t.comboTrees,o=t.oriComboMap,s={};return(a||[]).forEach(function(u){var h=[];Ta(u,function(p){if(p.itemType==="node"||!o[p.id])return!0;if(s[p.id]===void 0){var b={name:p.id,cx:0,cy:0,count:0,depth:t.oriComboMap[p.id].depth,children:[]};s[p.id]=b}var k=p.children;k&&k.forEach(function(tt){if(!s[tt.id]&&!e[tt.id])return!0;h.push(tt)});var R=s[p.id];if(R.cx=0,R.cy=0,h.length===0){R.empty=!0;var Y=o[p.id],V=Object.keys(e).length,Z=p.id+"-visual-child-"+V,it={id:Z,x:Y.x,y:Y.y,depth:R.depth+1,itemType:"node"};t.nodes.push(it),e[Z]=it,n[Z]=V,R.cx=Y.x,R.cy=Y.y,h.push(it)}return h.forEach(function(tt){if(R.count++,tt.itemType!=="node"){var _t=s[tt.id];(0,y.isNumber)(_t.cx)&&(R.cx+=_t.cx),(0,y.isNumber)(_t.cy)&&(R.cy+=_t.cy);return}var It=e[tt.id];!It||((0,y.isNumber)(It.x)&&(R.cx+=It.x),(0,y.isNumber)(It.y)&&(R.cy+=It.y))}),R.cx/=R.count,R.cy/=R.count,R.children=h,!0})}),s},r.prototype.applyComboCenterForce=function(t){var e=this,n=e.gravity,a=e.comboGravity||n,o=this.alpha,s=e.comboTrees,u=e.nodeIdxMap,h=e.nodeMap,p=e.comboMap;(s||[]).forEach(function(b){Ta(b,function(k){if(k.itemType==="node")return!0;var R=p[k.id];if(!R)return!0;var Y=p[k.id],V=(Y.depth+1)*.5,Z=Y.cx,it=Y.cy;return Y.cx=0,Y.cy=0,Y.children.forEach(function(tt){if(tt.itemType!=="node"){var _t=p[tt.id];_t&&(0,y.isNumber)(_t.cx)&&(Y.cx+=_t.cx),_t&&(0,y.isNumber)(_t.cy)&&(Y.cy+=_t.cy);return}var It=h[tt.id],Ht=It.x-Z||.005,le=It.y-it||.005,xe=Math.sqrt(Ht*Ht+le*le),Ce=u[It.id],me=a*o/xe*V;t[Ce].x-=Ht*me,t[Ce].y-=le*me,(0,y.isNumber)(It.x)&&(Y.cx+=It.x),(0,y.isNumber)(It.y)&&(Y.cy+=It.y)}),Y.cx/=Y.count,Y.cy/=Y.count,!0})})},r.prototype.applyCalculate=function(t){var e=this,n=e.comboMap,a=e.nodes,o={};a.forEach(function(u,h){a.forEach(function(p,b){if(!(h<b)){var k=u.x-p.x||.005,R=u.y-p.y||.005,Y=k*k+R*R,V=Math.sqrt(Y);Y<1&&(Y=V),o[u.id+"-"+p.id]={vx:k,vy:R,vl2:Y,vl:V},o[p.id+"-"+u.id]={vx:-k,vy:-R,vl2:Y,vl:V}}})}),e.updateComboSizes(n),e.calRepulsive(t,o),e.calAttractive(t,o);var s=e.preventComboOverlap;s&&e.comboNonOverlapping(t,n)},r.prototype.updateComboSizes=function(t){var e=this,n=e.comboTrees,a=e.nodeMap,o=e.nodeSize,s=e.comboSpacing,u=e.comboPadding;(n||[]).forEach(function(h){var p=[];Ta(h,function(b){if(b.itemType==="node")return!0;var k=t[b.id];if(!!k){var R=b.children;R&&R.forEach(function(Z){!t[Z.id]&&!a[Z.id]||p.push(Z)}),k.minX=Infinity,k.minY=Infinity,k.maxX=-Infinity,k.maxY=-Infinity,p.forEach(function(Z){if(Z.itemType!=="node")return!0;var it=a[Z.id];if(!it)return!0;var tt=o(it),_t=it.x-tt,It=it.y-tt,Ht=it.x+tt,le=it.y+tt;k.minX>_t&&(k.minX=_t),k.minY>It&&(k.minY=It),k.maxX<Ht&&(k.maxX=Ht),k.maxY<le&&(k.maxY=le)});var Y=e.oriComboMap[b.id].size||dr.defaultCombo.size;(0,y.isArray)(Y)&&(Y=Y[0]);var V=Math.max(k.maxX-k.minX,k.maxY-k.minY,Y);return k.r=V/2+s(k)/2+u(k),!0}})})},r.prototype.comboNonOverlapping=function(t,e){var n=this,a=n.comboTree,o=n.comboCollideStrength,s=n.nodeIdxMap,u=n.nodeMap;Ta(a,function(h){if(!(!e[h.id]&&!u[h.id]&&h.id!=="comboTreeRoot")){var p=h.children;return p&&p.length>1&&p.forEach(function(b,k){if(b.itemType!=="node"){var R=e[b.id];!R||p.forEach(function(Y,V){if(!(k<=V)&&Y.itemType!=="node"){var Z=e[Y.id];if(!!Z){var it=R.cx-Z.cx||.005,tt=R.cy-Z.cy||.005,_t=it*it+tt*tt,It=R.r,Ht=Z.r,le=It+Ht,xe=Ht*Ht,Ce=It*It;if(_t<le*le){var me=b.children;if(!me||me.length===0)return;var Le=Y.children;if(!Le||Le.length===0)return;var Ye=Math.sqrt(_t),Be=(le-Ye)/Ye*o,or=it*Be,cr=tt*Be,ar=xe/(Ce+xe),Cr=1-ar;me.forEach(function(wr){if(wr.itemType==="node"&&!!u[wr.id]){var Mr=s[wr.id];Le.forEach(function(yr){if(yr.itemType==="node"&&!!u[yr.id]){var mr=s[yr.id];t[Mr].x+=or*ar,t[Mr].y+=cr*ar,t[mr].x-=or*Cr,t[mr].y-=cr*Cr}})}})}}}})}}),!0}})},r.prototype.calRepulsive=function(t,e){var n=this,a=n.nodes,o=n.width*n.optimizeRangeFactor,s=n.nodeStrength,u=n.alpha,h=n.nodeCollideStrength,p=n.preventNodeOverlap,b=n.nodeSize,k=n.nodeSpacing,R=n.depthRepulsiveForceScale,Y=n.center;a.forEach(function(V,Z){if(!(!V.x||!V.y)){if(Y){var it=n.gravity,tt=V.x-Y[0]||.005,_t=V.y-Y[1]||.005,It=Math.sqrt(tt*tt+_t*_t);t[Z].x-=tt*it*u/It,t[Z].y-=_t*it*u/It}a.forEach(function(Ht,le){if(Z!==le&&!(!Ht.x||!Ht.y)){var xe=e[V.id+"-"+Ht.id],Ce=xe.vl2,me=xe.vl;if(!(me>o)){var Le=e[V.id+"-"+Ht.id],Ye=Le.vx,Be=Le.vy,or=Math.abs(Ht.depth-V.depth)+1||1;Ht.comboId!==V.comboId&&or++;var cr=or?Math.pow(R,or):1,ar=s(Ht)*u/Ce*cr;if(t[Z].x+=Ye*ar,t[Z].y+=Be*ar,Z<le&&p){var Cr=b(V)+k(V),wr=b(Ht)+k(Ht),Mr=Cr+wr;if(Ce<Mr*Mr){var yr=(Mr-me)/me*h,mr=wr*wr,zr=mr/(Cr*Cr+mr),Ur=Ye*yr,Xr=Be*yr;t[Z].x+=Ur*zr,t[Z].y+=Xr*zr,zr=1-zr,t[le].x-=Ur*zr,t[le].y-=Xr*zr}}}}})}})},r.prototype.calAttractive=function(t,e){var n=this,a=n.edges,o=n.linkDistance,s=n.alpha,u=n.edgeStrength,h=n.bias,p=n.depthAttractiveForceScale;a.forEach(function(b,k){if(!(!b.source||!b.target||b.source===b.target)){var R=n.nodeIdxMap[b.source],Y=n.nodeIdxMap[b.target],V=n.nodeMap[b.source],Z=n.nodeMap[b.target],it=Math.abs(V.depth-Z.depth);V.comboId===Z.comboId&&(it=it/2);var tt=it?Math.pow(p,it):1;if(V.comboId!==Z.comboId&&tt===1?tt=p/2:V.comboId===Z.comboId&&(tt=2),!(!(0,y.isNumber)(Z.x)||!(0,y.isNumber)(V.x)||!(0,y.isNumber)(Z.y)||!(0,y.isNumber)(V.y))){var _t=e[b.target+"-"+b.source],It=_t.vl,Ht=_t.vx,le=_t.vy,xe=(It-o(b))/It*s*u(b)*tt,Ce=Ht*xe,me=le*xe,Le=h[k];t[Y].x-=Ce*Le,t[Y].y-=me*Le,t[R].x+=Ce*(1-Le),t[R].y+=me*(1-Le)}}})},r}(Pa),jP=WP,UP={circular:qA,concentric:eT,dagre:iT,force:VT,g6force:ZT,comboForce:jP,fruchterman:QT,grid:qT,mds:kP,radial:XP,random:VP};(0,ii.default)(UP,function(i,r){Fm.registerLayout(r,{},i)});var Hl=Fm,Ud=self;function ZP(i){var r=i.data.type;return r===Ao.RUN}function KP(i){var r=i.data.type;switch(r){case Ao.RUN:{var t=i.data,e=t.nodes,n=t.edges,a=t.layoutCfg,o=a===void 0?{}:a,s=o.type,u=Hl[s];if(!u){Ud.postMessage({type:Ao.ERROR,message:"layout "+s+" not found"});break}var h=new u(o);h.init({nodes:e,edges:n}),h.execute(),Ud.postMessage({type:Ao.END,nodes:e}),h.destroy();break}default:break}}Ud.onmessage=function(i){ZP(i)&&KP(i)};var $P=null;function Cf(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cf=function(t){return typeof t}:Cf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(i)}var QP=function(r){return setTimeout(r,16)},JP=function(r){return clearTimeout(r)},Mf={requestAnimationFrame:function(r){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||QP;return t(r)},cancelAnimationFrame:function(r){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||JP;return t(r)}},qP=function(){function i(r){this.graph=r,this.layoutCfg=r.get("layout")||{},this.layoutType=this.layoutCfg.type,this.worker=null,this.workerData={},this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new $P,this.worker)},i.prototype.stopWorker=function(){var r=this.workerData;!this.worker||(this.worker.terminate(),this.worker=null,r.requestId&&(Mf.cancelAnimationFrame(r.requestId),r.requestId=null),r.requestId2&&(Mf.cancelAnimationFrame(r.requestId2),r.requestId2=null))},i.prototype.getLayoutType=function(){return this.layoutCfg.type},i.prototype.layout=function(r){var t=this.graph;this.data=this.setDataFromGraph();var e=this.data.nodes;if(!e)return!1;var n=t.get("width"),a=t.get("height"),o={};Object.assign(o,{width:n,height:a,center:[n/2,a/2]},this.layoutCfg),this.layoutCfg=o;var s=!!this.layoutType,u=this.layoutMethod;u&&u.destroy(),t.emit("beforelayout");var h=this.initPositions(o.center,e);if(this.stopWorker(),o.workerEnabled&&this.layoutWithWorker(this.data,r))return!0;if(this.layoutType==="force"||this.layoutType==="g6force"){var p=o.onTick,b=function(){p&&p(),t.refreshPositions()};o.tick=b;var k=o.onLayoutEnd;o.onLayoutEnd=function(){k&&k(),t.emit("afterlayout")}}else this.layoutType==="comboForce"&&(o.comboTrees=t.get("comboTrees"));var R=!1;if(this.layoutType!==void 0){try{u=new Hl[this.layoutType](o)}catch(it){return console.warn("The layout method: "+this.layoutType+" does not exist! Please specify it first."),!1}if(R=u.enableTick,R){var Y=o.onTick,V=o.onLayoutEnd,b=function(){Y&&Y(),t.refreshPositions()};u.tick=b;var Z=function(){V&&V(),t.emit("afterlayout")};u.onLayoutEnd=Z}u.init(this.data),s&&u.execute(),this.layoutMethod=u}return(s||!h)&&this.layoutType!=="force"&&!R&&(t.emit("afterlayout"),this.refreshLayout()),!1},i.prototype.layoutWithWorker=function(r,t){var e=this,n=r.nodes,a=r.edges,o=this,s=o.layoutCfg,u=o.graph,h=this.getWorker(),p=this.workerData;if(!h)return!1;p.requestId=null,p.requestId2=null,p.currentTick=null,p.currentTickData=null;var b=eL(s,function(k){return typeof k!="function"});return h.postMessage({type:Ao.RUN,nodes:n,edges:a,layoutCfg:b}),h.onmessage=function(k){e.handleWorkerMessage(k,r,t)},!0},i.prototype.handleWorkerMessage=function(r,t,e){var n=this,a=n.graph,o=n.workerData,s=n.layoutCfg,u=r.data,h=u.type,p=function(){s.onTick&&s.onTick()},b=function(){s.onLayoutEnd&&s.onLayoutEnd(),a.emit("afterlayout")};switch(h){case Ao.TICK:o.currentTick=u.currentTick,o.currentTickData=u,o.requestId||(o.requestId=Mf.requestAnimationFrame(function(){Zd(t,u),a.refreshPositions(),p(),u.currentTick===1&&e&&e(),u.currentTick===u.totalTicks?b():o.currentTick===u.totalTicks&&(o.requestId2=Mf.requestAnimationFrame(function(){Zd(t,o.currentTickData),a.refreshPositions(),o.requestId2=null,p(),b()})),o.requestId=null}));break;case Ao.END:o.currentTick==null&&(Zd(t,u),this.refreshLayout(),e&&e(),a.emit("afterlayout"));break;case Ao.ERROR:break;default:break}},i.prototype.refreshLayout=function(){var r=this.graph;r.get("animate")?r.positionsAnimate():r.refreshPositions()},i.prototype.updateLayoutCfg=function(r){var t=this,e=t.graph,n=t.layoutMethod;if(this.layoutType=r.type,!n){console.warn("You did not assign any layout type and the graph has no previous layout method!");return}this.data=this.setDataFromGraph(),this.stopWorker(),!(r.workerEnabled&&this.layoutWithWorker(this.data,null))&&(n.init(this.data),n.updateCfg(r),e.emit("beforelayout"),n.execute(),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout())},i.prototype.changeLayout=function(r){var t=this,e=t.graph,n=t.layoutMethod;this.layoutType=r,this.layoutCfg=e.get("layout")||{},this.layoutCfg.type=r,n&&n.destroy(),this.layout()},i.prototype.changeData=function(){var r=this.layoutMethod;r&&r.destroy(),this.layout()},i.prototype.destroyLayout=function(){var r=this,t=r.layoutMethod,e=r.graph;t&&t.destroy(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},i.prototype.setDataFromGraph=function(){var r=[],t=[],e=[],n=this.graph.getNodes(),a=this.graph.getEdges(),o=this.graph.getCombos();n.forEach(function(u){if(!!u.isVisible()){var h=u.getModel();r.push(h)}}),a.forEach(function(u){if(!(u.destroyed||!u.isVisible())){var h=u.getModel();h.isComboEdge||t.push(h)}}),o.forEach(function(u){if(!(u.destroyed||!u.isVisible())){var h=u.getModel();e.push(h)}});var s={nodes:r,edges:t,combos:e};return s},i.prototype.relayout=function(r){var t=this,e=t.graph,n=t.layoutMethod,a=t.layoutCfg;if(r){this.data=this.setDataFromGraph();var o=this.data.nodes;if(!o)return!1;this.initPositions(a.center,o),n.init(this.data)}this.layoutType==="force"&&(n.ticking=!1,n.forceSimulation.stop()),e.emit("beforelayout"),n.execute(r),this.layoutType!=="force"&&!n.enableTick&&e.emit("afterlayout"),this.refreshLayout()},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var r=this.graph,t=r.get("data"),e=t.nodes;if(!(e[0].x===void 0||e[0].x===null||Co(e[0].x))){var n=[0,0];e.forEach(function(a){n[0]+=a.x,n[1]+=a.y}),n[0]/=e.length,n[1]/=e.length,e.forEach(function(a){a.x-=n[0],a.y-=n[1]})}},i.prototype.initPositions=function(r,t){var e=this.graph;if(!t)return!1;var n=!0,a=e.get("width")*.85,o=e.get("height")*.85,s=t.length,u=Math.ceil(Math.sqrt(s)*(a/o)),h=Math.ceil(s/u),p=a/(u-1),b=o/(h-1);(!isFinite(p)||!p)&&(p=0),(!isFinite(b)||!p)&&(b=0);var k=r[0]-a/2,R=r[1]-o/2;return t.forEach(function(Y,V){Co(Y.x)&&(n=!1,Y.x=V%u*p+k),Co(Y.y)&&(n=!1,Y.y=Math.floor(V/u)*b+R)}),n},i.prototype.destroy=function(){var r=this.layoutMethod;this.graph=null,r&&r.destroy();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0},i}(),tL=qP;function Zd(i,r){var t=i.nodes,e=r.nodes;t.forEach(function(n,a){n.x=e[a].x,n.y=e[a].y})}function eL(i,r){var t={};return i&&Cf(i)==="object"?(Object.keys(i).forEach(function(e){i.hasOwnProperty(e)&&r(i[e])&&(t[e]=i[e])}),t):i}var ls=null,rL=function(){function i(r){this.graph=r,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return i.checkCache=function(r,t,e){if(!!e[t]){var n=e[t].indexOf(r);n>=0&&e[t].splice(n,1)}},i.cacheState=function(r,t,e){e[t]||(e[t]=[]),e[t].push(r)},i.prototype.updateState=function(r,t,e){var n=this,a=i.checkCache,o=i.cacheState;if(!r.destroyed){var s=this.cachedStates,u=s.enabled,h=s.disabled;e?(a(r,t,h),o(r,t,u)):(a(r,t,u),o(r,t,h)),ls&&clearTimeout(ls),ls=setTimeout(function(){ls=null,n.updateGraphStates()},16)}},i.prototype.updateStates=function(r,t,e){var n=this;(0,ti.default)(t)?this.updateState(r,t,e):t.forEach(function(a){n.updateState(r,a,e)})},i.prototype.updateGraphStates=function(){var r=this.graph.get("states"),t=this.cachedStates;(0,ii.default)(t.disabled,function(e,n){r[n]&&(r[n]=r[n].filter(function(a){return e.indexOf(a)<0&&!e.destroyed}))}),(0,ii.default)(t.enabled,function(e,n){if(!r[n])r[n]=e;else{var a={};r[n].forEach(function(o){o.destroyed||(a[o.get("id")]=!0)}),e.forEach(function(o){if(!o.destroyed){var s=o.get("id");a[s]||(a[s]=!0,r[n].push(o))}})}}),this.graph.emit("graphstatechange",{states:r}),this.cachedStates={enabled:{},disabled:{}}},i.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ls&&clearTimeout(ls),ls=null,this.destroyed=!0},i}(),nL=rL,Kd=null,iL=function(){function i(r){this.graph=r;var t=r.get("groupStyle");this.styles=(0,Ki.default)({},i.getDefaultCfg(),t),this.customGroup={},this.delegateInGroup={},this.nodePoint=[],this.destroyed=!1}return i.getDefaultCfg=function(){return{default:{lineWidth:1,stroke:"#A3B1BF",strokeOpacity:.9,fill:"#F3F9FF",fillOpacity:.8,opacity:.8,disCoefficient:.6,minDis:30,maxDis:30},hover:{stroke:"#faad14",fill:"#ffe58f",fillOpacity:.3,opacity:.3,lineWidth:3},collapse:{r:30,width:80,height:40,stroke:"#A3B1BF",lineWidth:3,fill:"#F3F9FF",offsetX:-15,offsetY:5},icon:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",operatorBtn:{collapse:{img:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",width:16,height:16},expand:{width:16,height:16,img:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg"}},visible:!1}},i.prototype.create=function(r,t,e,n,a,o){e===void 0&&(e="circle"),n===void 0&&(n=0),a===void 0&&(a=!1),o===void 0&&(o={});var s=this.graph,u=s.get("customGroup"),h=u.get("children").map(function(Xr){return Xr.get("id")});if(h.indexOf(r)>-1){console.warn("\u5DF2\u7ECF\u5B58\u5728ID\u4E3A "+r+" \u7684\u5206\u7EC4\uFF0C\u8BF7\u91CD\u65B0\u8BBE\u7F6E\u5206\u7EC4ID\uFF01");return}var p=u.addGroup({id:r,zIndex:n}),b=this.styles.default,k=this.calculationGroupPosition(t),R=k.x,Y=k.y,V=k.width,Z=k.height,it=k.maxX,tt=this.getGroupPadding(r),_t=s.get("groupBBoxs");_t[r]={x:R,y:Y,width:V,height:Z,maxX:it};var It=null;if(a){var Ht=s.get("groups");t.forEach(function(Xr){var Er=s.findById(Xr),Zr=Er.getModel();Zr.groupId||(Zr.groupId=r)}),Ht.find(function(Xr){return Xr.id===r})||(Ht.push({id:r,title:o}),s.set({groups:Ht}))}var le=s.get("groups").filter(function(Xr){return Xr.id===r});le&&le.length>0&&(It=le[0].title);var xe=0,Ce=0,me=null;if(e==="circle"){var Le=V>Z?V/2:Z/2,Ye=(V+2*R)/2,Be=(Z+2*Y)/2,or=Le+tt;me=p.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:Ye,y:Be,r:or}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"circle-group-shape"}),xe=Ye,Ce=Be-or,this.setDeletageGroupByStyle(r,p,{width:V,height:Z,x:Ye,y:Be,r:or})}else{var cr=tt*b.disCoefficient;me=p.addShape("rect",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R-cr,y:Y-cr,width:V+cr*2,height:Z+cr*2}),draggable:!0,capture:!0,zIndex:n,groupId:r,name:"rect-group-shape"}),xe=R-cr+15,Ce=Y-cr+15,this.setDeletageGroupByStyle(r,p,{x:R-cr,y:Y-cr,width:V+cr,height:Z+cr,btnOffset:it-3})}if(It){var ar=It.offsetX,Cr=ar===void 0?0:ar,wr=It.offsetY,Mr=wr===void 0?0:wr,yr=It.text,mr=yr===void 0?It:yr,zr=(0,he.__rest)(It,["offsetX","offsetY","text"]),Ur=p.addShape("text",{attrs:(0,he.__assign)({text:mr,stroke:"#444",x:xe+Cr,y:Ce+Mr},zr),className:"group-title",name:"group-title-shape"});Ur.set("capture",!1)}p.set("keyShape",me),s.get("groupNodes")[r]=t},i.prototype.setGroupStyle=function(r,t){if(!(!r||r.get("destroyed"))){var e={},n=this.styles,a=n.hover,o=n.default;(0,ti.default)(t)?t==="default"?e=(0,Ki.default)({},o):t==="hover"&&(e=(0,Ki.default)({},a)):e=(0,Ki.default)({},o,t),Object.keys(e).forEach(function(s){r.attr(s,e[s])})}},i.prototype.calculationGroupPosition=function(r,t){if(t===void 0&&(t={x:100,y:100}),r.length===0)return{x:t.x,y:t.y,width:100,height:100};var e=this.graph,n=Infinity,a=-Infinity,o=Infinity,s=-Infinity;r.forEach(function(k){var R=(0,ti.default)(k)?e.findById(k):k,Y=R.getBBox(),V=Y.minX,Z=Y.minY,it=Y.maxX,tt=Y.maxY;V<n&&(n=V),Z<o&&(o=Z),it>a&&(a=it),tt>s&&(s=tt)});var u=Math.floor(n),h=Math.floor(o),p=Math.ceil(a)-u,b=Math.ceil(s)-h;return{x:u,y:h,width:p,height:b,maxX:Math.ceil(a)}},i.prototype.flatToTree=function(r,t,e){t===void 0&&(t="id"),e===void 0&&(e="parentId");var n="children",a=[],o=[];return r.forEach(function(s){a[s[t]]=s}),r.forEach(function(s){var u=a[s[e]];u?(u[n]=u[n]||[],u[n].push(s)):o.push(s)}),o},i.prototype.getGroupPadding=function(r){var t=this.graph,e=this.styles.default,n=t.get("groups"),a=n.filter(function(p){return p.parentId===r}),o=1;a.length>0&&(Kd||(Kd=this.flatToTree(n)),aa(Kd[0],function(p){if(p.parentId===r&&p.children)return o+=p.children.length,!0}));var s=n.filter(function(p){return p.id===r&&!p.parentId});s.length>0&&(o+=1);var u=n.filter(function(p){return p.parentId===r}).length>0,h=u?e.maxDis+(o>1?o/2:1)*30:e.minDis;return h},i.prototype.setDeletageGroupByStyle=function(r,t,e){var n=e.width,a=e.height,o=e.x,s=e.y,u=e.r,h=e.btnOffset,p=this.customGroup[r];if(!p)this.customGroup[r]={nodeGroup:t,groupStyle:{width:n,height:a,x:o,y:s,r:u,btnOffset:h}};else{var b=p.groupStyle,k=(0,Ki.default)({},b,e);this.customGroup[r]={nodeGroup:t,groupStyle:k}}},i.prototype.getDeletageGroupById=function(r){return this.customGroup[r]},i.prototype.collapseExpandGroup=function(r){var t=this.getDeletageGroupById(r),e=t.nodeGroup,n=e.get("hasHidden");n?(e.set("hasHidden",!1),this.expandGroup(r)):(e.set("hasHidden",!0),this.collapseGroup(r))},i.prototype.setGroupTmpNode=function(r,t){var e=this.graph,n=e.get("groupNodes"),a=e.get("groups");n[r].indexOf(t)<0&&n[r].push(t);var o=a.filter(function(u){return u.id===r}),s=null;o.length>0&&(s=o[0].parentId),s&&this.setGroupTmpNode(s,t)},i.prototype.collapseGroup=function(r){var t=this,e=this.getDeletageGroupById(r),n=e.nodeGroup,a=this.styles.collapse,o=this.graph,s=o.get("groupType"),u=o.get("groupNodes")[r],h=n.get("keyShape"),p=a.r,b=a.width,k=a.height,R=a.offsetX,Y=a.offsetY,V=(0,he.__rest)(a,["r","width","height","offsetX","offsetY"]);Object.keys(V).forEach(function(xe){h.attr(xe,V[xe])});var Z={groupId:r,id:r+"-custom-node",x:h.attr("x"),y:h.attr("y"),style:{r:p},type:"circle"},it=n.find(function(xe){return xe.get("className")==="group-title"});s==="circle"?(h.animate({r:p},{duration:500,easing:"easeCubic"}),it&&it.attr({x:h.attr("x")+R,y:h.attr("y")+Y})):s==="rect"&&(h.animate({width:b,height:k},{duration:500,easing:"easeCubic"}),it&&it.attr({x:h.attr("x")+10,y:h.attr("y")+k/2+5}),Z={groupId:r,id:r+"-custom-node",x:h.attr("x")+b/2,y:h.attr("y")+k/2,size:[b,k],type:"rect"});var tt=o.getEdges(),_t=tt.filter(function(xe){var Ce=xe.getModel();return!u.includes(Ce.source)&&u.includes(Ce.target)}),It=tt.filter(function(xe){var Ce=xe.getModel();return u.includes(Ce.source)&&!u.includes(Ce.target)}),Ht=tt.filter(function(xe){var Ce=xe.getModel();return u.includes(Ce.source)&&u.includes(Ce.target)});if(u.forEach(function(xe){var Ce=o.findById(xe),me=Ce.getModel(),Le=me.groupId;if(Le&&Le!==r){var Ye=t.getDeletageGroupById(Le),Be=Ye.nodeGroup;Be.hide()}Ce.hide()}),Ht.forEach(function(xe){var Ce=xe.getSource(),me=xe.getTarget();Ce.isVisible()&&me.isVisible()?xe.show():xe.hide()}),_t.length>0||It.length>0){var le=o.add("node",Z);le.set("capture",!1),le.hide(),this.delegateInGroup[r]={delegateNode:le},this.setGroupTmpNode(r,r+"-custom-node"),this.updateEdgeInGroupLinks(r,_t,It)}},i.prototype.updateEdgeInGroupLinks=function(r,t,e){var n=this.graph,a={};t.map(function(s){var u=s.getModel(),h=s.get("id"),p=u.target;return a[h]=p,n.updateItem(s,{target:r+"-custom-node"}),!0});var o={};e.map(function(s){var u=s.getModel(),h=s.get("id"),p=u.source;return o[h]=p,n.updateItem(s,{source:r+"-custom-node"}),!0}),this.delegateInGroup[r]=(0,Ki.default)({sourceOutTargetInEdges:t,sourceInTargetOutEdges:e,edgesOuts:a,edgesIn:o},this.delegateInGroup[r])},i.prototype.expandGroup=function(r){var t=this,e=this.graph,n=e.get("groupType"),a=e.get("groupNodes")[r],o=a.filter(function(wr){return wr.indexOf("custom-node")===-1}),s=this.calculationGroupPosition(o),u=s.width,h=s.height,p=this.getDeletageGroupById(r).nodeGroup,b=p.get("keyShape"),k=this.styles,R=k.default,Y=k.collapse;Object.keys(R).forEach(function(wr){b.attr(wr,R[wr])});var V=p.find(function(wr){return wr.get("className")==="group-title"}),Z=this.getGroupPadding(r);if(n==="circle"){var it=u>h?u/2:h/2;b.animate({r:it+Z},{duration:500,easing:"easeCubic"})}else if(n==="rect"){var tt=Y.width,_t=Y.height;b.animate({width:tt+u+Z*R.disCoefficient*2,height:_t+h+Z*R.disCoefficient*2},{duration:500,easing:"easeCubic"})}if(V){var It=null,Ht=e.get("groups").filter(function(wr){return wr.id===r});Ht&&Ht.length>0&&(It=Ht[0].title);var le=It.offsetX,xe=le===void 0?0:le,Ce=It.offsetY,me=Ce===void 0?0:Ce;n==="circle"?V.animate({x:b.attr("x")+xe,y:b.attr("y")-b.attr("r")+me},{duration:600,easing:"easeCubic"}):n==="rect"&&V.animate({x:b.attr("x")+(15+xe),y:b.attr("y")+(15+me)},{duration:600,easing:"easeCubic"})}setTimeout(function(){a.forEach(function(yr){var mr=e.findById(yr),zr=mr.getModel(),Ur=zr.groupId;if(Ur&&Ur!==r){var Xr=t.getDeletageGroupById(Ur),Er=Xr.nodeGroup;Er.show();var Zr=Er.get("hasHidden");Zr||mr.show()}else mr.show()});var wr=e.getEdges(),Mr=wr.filter(function(yr){var mr=yr.getModel();return a.includes(mr.source)||a.includes(mr.target)});Mr.forEach(function(yr){var mr=yr.getSource(),zr=yr.getTarget();mr.isVisible()&&zr.isVisible()&&yr.show()})},300);var Le=this.delegateInGroup[r];if(Le){var Ye=Le.sourceOutTargetInEdges,Be=Le.sourceInTargetOutEdges,or=Le.edgesOuts,cr=Le.edgesIn,ar=Le.delegateNode;Ye.map(function(wr){var Mr=wr.get("id"),yr=or[Mr];return e.updateItem(wr,{target:yr}),!0}),Be.map(function(wr){var Mr=wr.get("id"),yr=cr[Mr];return e.updateItem(wr,{source:yr}),!0});var Cr=ar.getModel();this.deleteTmpNode(r,Cr.id),e.remove(ar),delete this.delegateInGroup[r]}},i.prototype.deleteTmpNode=function(r,t){var e=this.graph,n=e.get("groups"),a=e.get("groupNodes")[r],o=a.indexOf(t);a.splice(o,1);var s=n.filter(function(h){return h.id===r}),u=null;s.length>0&&(u=s[0].parentId),u&&this.deleteTmpNode(u,t)},i.prototype.remove=function(r){var t=this.graph,e=this.getDeletageGroupById(r);if(!!e){var n=e.nodeGroup,a=t.get("groupNodes"),o=a[r];o.forEach(function(R){var Y=t.findById(R),V=Y.getModel(),Z=V.groupId;!Z||r===Z&&(delete V.groupId,t.updateItem(Y,V))}),n.destroy(),delete this.customGroup[r];var s=t.get("groups");if(s.length>0){var u=s.filter(function(R){return R.id!==r});t.set("groups",u)}for(var h=null,p=null,b=0;b<s.length;b++){var k=s[b];if(r===k.id){h=k.parentId,p=k;break}}p&&delete p.parentId,delete a[r],h&&(a[h]=a[h].filter(function(R){return!o.includes(R)}))}},i.prototype.updateGroup=function(r,t,e){var n=this.graph,a=n.get("groupType");this.updateItemInGroup(r,t,e);for(var o=n.save().groups,s=null,u=null,h=0;h<o.length;h++){var p=o[h];if(r===p.id){s=p.parentId,u=p;break}}if(s){var b=this.getDeletageGroupById(s).nodeGroup,k=b.get("keyShape");this.setGroupStyle(k,"default");var R=k.getBBox(),Y=R.minX,V=R.minY,Z=R.maxX,it=R.maxY,tt=this.getDeletageGroupById(r).nodeGroup,_t=tt.get("keyShape"),It=_t.getBBox(),Ht=It.x,le=It.y;if(!(Ht<Z&&Ht>Y&&le<it&&le>V)){delete u.parentId;var xe=n.get("groupNodes"),Ce=xe[r],me=xe[s];xe[s]=me.filter(function(Yr){return Ce.indexOf(Yr)===-1});var Le=this.calculationGroupPosition(xe[s]),Ye=Le.x,Be=Le.y,or=Le.width,cr=Le.height,ar=this.getGroupPadding(s),Cr=b.find(function(Yr){return Yr.get("className")==="group-title"}),wr=0,Mr=0;if(a==="circle"){var yr=or>cr?or/2:cr/2,mr=Ye,zr=Be;k.attr({r:yr+ar,x:mr,y:zr}),wr=mr,Mr=zr-k.attr("r")}else if(a==="rect"){var Ur=this.styles.default,Xr=ar*Ur.disCoefficient;k.attr({x:Ye-Xr,y:Be-Xr}),wr=Ye-Xr+15,Mr=Be-Xr+15}if(Cr){var Er=u.title,Zr=0,ln=0;Er&&(Zr=Er.offsetX,ln=Er.offsetY),Cr.attr({x:wr+Zr,y:Mr+ln})}}}},i.prototype.updateItemInGroup=function(r,t,e){var n=this,a=this.graph,o=a.get("groupType"),s=a.get("groupNodes"),u=s[r],h=this.getDeletageGroupById(r).nodeGroup,p=h.getBBox(),b=[];u.forEach(function(k,R){var Y=a.findById(k),V=Y.getModel(),Z=V.groupId;Z&&!b.includes(Z)&&b.push(Z),n.nodePoint[R]||(n.nodePoint[R]={x:V.x,y:V.y});var it=t.x-p.x+n.nodePoint[R].x,tt=t.y-p.y+n.nodePoint[R].y;n.nodePoint[R]={x:it,y:tt},a.updateItem(Y,{x:it,y:tt})}),b.includes(r)||b.push(r),b.forEach(function(k){var R=n.getDeletageGroupById(k).nodeGroup,Y=R.get("keyShape"),V=s[k].filter(function(cr){return cr.indexOf("custom-node")===-1}),Z=n.calculationGroupPosition(V,t),it=Z.x,tt=Z.y,_t=Z.width,It=Z.height,Ht=0,le=0;if(o==="circle"){var xe=(_t+2*it)/2,Ce=(It+2*tt)/2;Y.attr({x:xe,y:Ce}),Ht=xe,le=Ce-Y.attr("r")}else if(o==="rect"){var me=R.get("hasHidden"),Le=n.getGroupPadding(k),Ye={},Be=n.styles.default,or=Le*Be.disCoefficient;Ht=it-or+15,le=tt-or+15,me?(Ye={x:it-or,y:tt-or},le=le+10):Ye={x:it-or,y:tt-or,width:_t+or*2,height:It+or*2},Y.attr(Ye)}n.updateGroupTitle(R,k,Ht,le)})},i.prototype.updateGroupTitle=function(r,t,e,n){var a=this.graph,o=r.find(function(b){return b.get("className")==="group-title"});if(o){var s=null,u=a.get("groups").filter(function(b){return b.id===t});u&&u.length>0&&(s=u[0].title);var h=0,p=0;s&&(h=s.offsetX||0,p=s.offsetY||0),o.attr({x:e+h,y:n+p})}},i.prototype.dynamicChangeGroupSize=function(r,t,e){var n=r.item,a=n.getModel(),o=a.groupId,s=this.graph,u=s.get("groupType"),h=s.get("groupNodes"),p=h[o];if(p.length===0){delete h[o];var b=s.get("groups");s.set("groups",b.filter(function(me){return me.id!==o})),t.remove()}else{var k=this.calculationGroupPosition(p),R=k.x,Y=k.y,V=k.width,Z=k.height,it=this.getGroupPadding(o),tt=0,_t=0;if(u==="circle"){var It=V>Z?V/2:Z/2,Ht=(V+2*R)/2,le=(Z+2*Y)/2;e.attr({r:It+it,x:Ht,y:le}),tt=Ht,_t=le-e.attr("r")}else if(u==="rect"){var xe=this.styles.default,Ce=it*xe.disCoefficient;e.attr({x:R-Ce,y:Y-Ce,width:V+Ce*2,height:Z+Ce*2}),tt=R-Ce+15,_t=Y-Ce+15}this.updateGroupTitle(t,o,tt,_t)}this.setGroupStyle(e,"default")},i.prototype.resetNodePoint=function(){this.nodePoint.length=0},i.prototype.destroy=function(){this.graph=null,this.styles={},this.customGroup={},this.delegateInGroup={},this.resetNodePoint(),this.destroyed=!0},i}(),aL=iL,oL=function(r){var t={};return r.getNodes().forEach(function(e){t[e.getID()]={degree:0,inDegree:0,outDegree:0}}),r.getEdges().forEach(function(e){t[e.getSource().getID()].degree++,t[e.getSource().getID()].outDegree++,t[e.getTarget().getID()].degree++,t[e.getTarget().getID()].inDegree++}),t},lx=oL,sL=function(){function i(r){this.compare=r||i.defaultCompareFunction}return i.defaultCompareFunction=function(r,t){return r===t?0:r<t?-1:1},i.prototype.equal=function(r,t){return this.compare(r,t)===0},i.prototype.lessThan=function(r,t){return this.compare(r,t)<0},i.prototype.greaterThan=function(r,t){return this.compare(r,t)>0},i.prototype.lessThanOrEqual=function(r,t){return this.lessThan(r,t)||this.equal(r,t)},i.prototype.greaterThanOrEqual=function(r,t){return this.greaterThan(r,t)||this.equal(r,t)},i.prototype.reverse=function(){var r=this.compare;this.compare=function(t,e){return r(e,t)}},i}(),lL=sL,ux=function(){function i(r,t){t===void 0&&(t=null),this.value=r,this.next=t}return i.prototype.toString=function(r){return r?r(this.value):""+this.value},i}(),uL=function(){function i(r){r===void 0&&(r=null),this.head=null,this.tail=null,this.compare=new lL(r)}return i.prototype.prepend=function(r){var t=new ux(r,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(r){var t=new ux(r);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(r){if(!this.head)return null;for(var t=null;this.head&&this.compare.equal(this.head.value,r);)t=this.head,this.head=this.head.next;var e=this.head;if(e!==null)for(;e.next;)this.compare.equal(e.next.value,r)?(t=e.next,e.next=e.next.next):e=e.next;return this.compare.equal(this.tail.value,r)&&(this.tail=e),t},i.prototype.find=function(r){var t=r.value,e=t===void 0?void 0:t,n=r.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||e!==void 0&&this.compare.equal(o.value,e))return o;o=o.next}return null},i.prototype.deleteTail=function(){var r=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,r;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,r},i.prototype.deleteHead=function(){if(!this.head)return null;var r=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),r},i.prototype.fromArray=function(r){var t=this;return r.forEach(function(e){return t.append(e)}),this},i.prototype.toArray=function(){for(var r=[],t=this.head;t;)r.push(t),t=t.next;return r},i.prototype.reverse=function(){for(var r=this.head,t=null,e=null;r;)e=r.next,r.next=t,t=r,r=e;this.tail=this.head,this.head=t},i.prototype.toString=function(r){return r===void 0&&(r=void 0),this.toArray().map(function(t){return t.toString(r)}).toString()},i}(),hx=uL,hL=function(){function i(r){r===void 0&&(r=10),this.linkedList=new hx,this.maxStep=r}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(r){this.linkedList.prepend(r),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(r){return r.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),fx=hL,fL=function(r,t){var e=r.getNodes(),n=r.getEdges(),a=[],o={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){o[s.getID()]=u;var h=[];a.push(h)}),n&&n.forEach(function(s){var u=s.getModel(),h=u.source,p=u.target,b=o[h],k=o[p];a[b][k]=1,t||(a[k][b]=1)}),a},Ef=fL,cL=function(r,t){var e=r.get("adjMatrix");e||(e=Ef(r,t));for(var n=[],a=e.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:e[o][s]===0||!e[o][s]?n[o][s]=Infinity:n[o][s]=e[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},cx=cL,vx=function(r,t,e){return(r.y-e.y)*(t.x-e.x)-(r.x-e.x)*(t.y-e.y)},dx=function(r){var t=r.map(function(s){return{x:s.getModel().x,y:s.getModel().y}});t.sort(function(s,u){return s.x===u.x?s.y-u.y:s.x-u.x});for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&vx(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var a=[],n=t.length-1;n>=0;n--){for(;a.length>=2&&vx(a[a.length-2],a[a.length-1],t[n])<=0;)a.pop();a.push(t[n])}a.pop(),e.pop();var o=e.concat(a);return o},vL={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function dL(i,r,t){var e=!1,n=function(u,h){return r.cells[u+h*r.width]},a=function(u,h){var p=0;return n(u-1,h-1)>=t&&(p+=1),n(u,h-1)>t&&(p+=2),n(u-1,h)>t&&(p+=4),n(u,h)>t&&(p+=8),p},o=function(u,h){for(var p=u,b=h,k,R,Y=0;Y<r.width*r.height;Y++){if(k=p,R=b,i.findIndex(function(Z){return Z.x===p&&Z.y===b})>-1){if(!(i[0].x!==p||i[0].y!==b))return!0}else i.push({x:p,y:b});var V=a(p,b);switch(V){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:p++;break;case 12:case 14:case 4:p--;break;case 6:k===0&&(R===-1?p-=1:p+=1);break;case 1:case 13:case 5:b--;break;case 9:k===1&&(R===0?b-=1:b+=1);break;case 10:case 8:case 11:b++;break;default:return console.warn("Marching squares invalid state: "+V),!0}}};this.march=function(){for(var s=0;s<r.width&&!e;s+=1)for(var u=0;u<r.height&&!e;u+=1)n(s,u)>t&&a(s,u)!==15&&(e=o(s,u));return e}}var pL=function(r,t,e){var n=Math.ceil(r/e),a=Math.ceil(t/e),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},gL=function(r,t,e){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:r.getModel().x,y:r.getModel().y},u={x:o.getModel().x,y:o.getModel().y},h=qh(s,u),p=new as(s.x,s.y,u.x,u.y),b=e.reduce(function(k,R){return Td(R,p)>0?k+1:k},0);h*Math.pow(b+1,2)<a&&(n=o,a=h*Math.pow(b+1,2))}),n},px=function(r,t){var e=Number.POSITIVE_INFINITY,n=null;return r.forEach(function(a){var o=Td(a,t);o>=0&&o<e&&(n=a,e=o)}),n},yL=function(r,t,e,n){var a=[],o=[];o.push(r);for(var s=!0,u=0,h=function(R,Y){var V=!1;return Y.forEach(function(Z){V||(Pd(R,{x:Z.x1,y:Z.y1})||Pd(R,{x:Z.x2,y:Z.y2}))&&(V=!0)}),V},p=function(R,Y){for(var V=0,Z=Y;V<Z.length;V++){var it=Z[V],tt=it.getBBox(),_t=[[tt.x,tt.y],[tt.x+tt.width,tt.y],[tt.x,tt.y+tt.height],[tt.x+tt.width,tt.y+tt.height]];if(Dl(_t,R.x,R.y))return!0}return!1};s&&u<e;){s=!1;for(var b=function(){var R=o.pop(),Y=px(t,R);if(Y){var V=q0(Y,R),Z=V[0],it=V[1];if(it===2){var tt=function(It){for(var Ht=n,le=gx(Y,Ht,Z,It),xe=h(le,o)||h(le,a),Ce=p(le,t);!xe&&Ce&&Ht>=1;)Ht/=1.5,le=gx(Y,Ht,Z,It),xe=h(le,o)||h(le,a),Ce=p(le,t);le&&!xe&&(!It||!Ce)&&(o.push(new as(R.x1,R.y1,le.x,le.y)),o.push(new as(le.x,le.y,R.x2,R.y2)),s=!0)};tt(!0),s||tt(!1)}}s||a.push(R),u+=1};!s&&o.length;)b()}for(;o.length;)a.push(o.pop());return a};function mL(i,r,t,e,n){var a=gL(i,t,r);if(a===null)return[];var o=function(b){for(var k=[];b.length>0;){var R=b.pop();if(b.length===0){k.push(R);break}var Y=b.pop(),V=new as(R.x1,R.y1,Y.x2,Y.y2),Z=px(r,V);Z?(k.push(R),b.push(Y)):b.push(V)}return k},s=new as(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=yL(s,r,e,n),h=o(u);return h}var xL=function(r,t,e){var n=Object.assign(vL,e),a=tm(r.map(function(tt){return{x:tt.getModel().x,y:tt.getModel().y}}));r=r.sort(function(tt,_t){return qh({x:tt.getModel().x,y:tt.getModel().y},a)-qh({x:_t.getModel().x,y:_t.getModel().y},a)});var o=[],s=[];r.forEach(function(tt){var _t=mL(tt,t,o,n.maxRoutingIterations,n.morphBuffer);_t.forEach(function(It){s.push(It)}),o.push(tt)});for(var u=bL(r,s,n.nodeR0),h=pL(u.width,u.height,n.pixelGroupSize),p=[],b=[],k=0;k<n.maxMarchingIterations;k++)if(wL(r,t,s,u,h,n),p=[],b=[],!!new dL(p,h,n.threshold).march()){var R=p.map(function(tt){return{x:Math.round(tt.x*n.pixelGroupSize+u.minX),y:Math.round(tt.y*n.pixelGroupSize+u.minY)}});if(R){var Y=R.length;if(n.skip>1)for(Y=Math.floor(R.length/n.skip);Y<3&&n.skip>1;)n.skip-=1,Y=Math.floor(R.length/n.skip);for(var V=0,Z=0;Z<Y;Z+=1,V+=n.skip)b.push({x:R[V].x,y:R[V].y})}var it=function(){for(var _t=0,It=r;_t<It.length;_t++){var Ht=It[_t],le=b.map(function(xe){return[xe.x,xe.y]});if(!Dl(le,Ht.getBBox().centerX,Ht.getBBox().centerY))return!1}return!0};if(b&&it())return b;if(n.threshold*=.9,k<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return b};function bL(i,r,t){var e={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),r.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];e.minX=(s.minX<e.minX?s.minX:e.minX)-t,e.minY=(s.minY<e.minY?s.minY:e.minY)-t,e.maxX=(s.maxX>e.maxX?s.maxX:e.maxX)+t,e.maxY=(s.maxY>e.maxY?s.maxY:e.maxY)+t}return e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.x=e.minX,e.y=e.minY,e}function wL(i,r,t,e,n,a){function o(R,Y){var V=Math.floor((R-Y)/a.pixelGroupSize);return V<0?0:V}function s(R,Y){return R*a.pixelGroupSize+Y}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),h=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),p=function(Y,V){var Z=Math.min(o(Y.minX,V+e.minX),n.width),it=Math.min(o(Y.minY,V+e.minY),n.height),tt=Math.min(o(Y.maxX,-V+e.minX),n.width),_t=Math.min(o(Y.maxY,-V+e.minY),n.height);return[Z,it,tt,_t]},b=function(Y,V){for(var Z=Y.getBBox(),it=p(Z,a.nodeR1),tt=it[0],_t=it[1],It=it[2],Ht=it[3],le=_t;le<Ht;le+=1)for(var xe=tt;xe<It;xe+=1)if(!(V<0&&n[xe+le*n.width]<=0)){var Ce=s(xe,e.minX),me=s(le,e.minY),Le=rm({x:Ce,y:me},{x:Z.minX,y:Z.minY,width:Z.width,height:Z.height});if(Le<Math.pow(a.nodeR1,2)){var Ye=Math.sqrt(Le)-a.nodeR1;n.cells[xe+le*n.width]+=V*Ye*Ye}}},k=function(Y,V){for(var Z=Y.getBBox(),it=p(Z,a.edgeR1),tt=it[0],_t=it[1],It=it[2],Ht=it[3],le=_t;le<Ht;le+=1)for(var xe=tt;xe<It;xe+=1)if(!(V<0&&n.cells[xe+le*n.width]<=0)){var Ce=s(xe,e.minX),me=s(le,e.minY),Le=em({x:Ce,y:me},Y);if(Le<Math.pow(a.edgeR1,2)){var Ye=Math.sqrt(Le)-a.edgeR1;n.cells[xe+le*n.width]+=V*Ye*Ye}}};a.nodeInfluenceFactor&&i.forEach(function(R){b(R,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(R){k(R,a.edgeInfluenceFactor/h)}),a.negativeNodeInfluenceFactor&&r.forEach(function(R){b(R,a.negativeNodeInfluenceFactor/u)})}function gx(i,r,t,e){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],h={topLeft:{x:n.minX-r,y:n.minY-r},topRight:{x:n.maxX+r,y:n.minY-r},bottomLeft:{x:n.minX-r,y:n.maxY+r},bottomRight:{x:n.maxX+r,y:n.maxY+r}},p=n.height*n.width;function b(Y,V){return n.width*((Y.y-n.minY+(V.y-n.minY))*.5)}if(o){if(a)return e?h.topLeft:h.bottomRight;if(s)return e?h.bottomLeft:h.topRight;var k=b(o,u);return k<p*.5?o.y>u.y?e?h.topLeft:h.bottomRight:e?h.topRight:h.bottomLeft:o.y<u.y?e?h.bottomLeft:h.topRight:e?h.bottomRight:h.topLeft}if(u){if(a)return e?h.topRight:h.bottomLeft;if(s)return e?h.bottomRight:h.topLeft}var R=b(a,s);return R<p*.5?a.x>s.x?e?h.topLeft:h.bottomRight:e?h.bottomLeft:h.topRight:a.x<s.x?e?h.topRight:h.bottomLeft:e?h.bottomRight:h.topLeft}var SL=function(){function i(r,t){this.cfg=(0,y.deepMix)(this.getDefaultCfg(),t),this.graph=r,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(e){return(0,y.isString)(e)?r.findById(e):e}),this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,y.isString)(e)?r.findById(e):e}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var r=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+r:10+r,this.cfg.bubbleCfg={nodeR0:this.padding-r,nodeR1:this.padding-r,morphBuffer:this.padding-r}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(r,t){var e,n,a;switch(this.type){case"round-convex":e=dx(r),a=lm(e.map(function(o){return[o.x,o.y]}),this.padding),n=(0,Ld.parsePathString)(a);break;case"smooth-convex":e=dx(r),a=um(e.map(function(o){return[o.x,o.y]}),this.padding),n=e.length>=2&&_d(a);break;case"bubble":e=xL(r,t,this.cfg.bubbleCfg),n=e.length>=2&&_d(e);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,he.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},i.prototype.addMember=function(r){if(!!r){(0,y.isString)(r)&&(r=this.graph.findById(r)),this.members.push(r);var t=this.nonMembers.indexOf(r);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(r){if(!!r){(0,y.isString)(r)&&(r=this.graph.findById(r)),this.nonMembers.push(r);var t=this.members.indexOf(r);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(r){if(!!r){(0,y.isString)(r)&&(r=this.graph.findById(r));var t=this.members.indexOf(r);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(r){if(!!r){(0,y.isString)(r)&&(r=this.graph.findById(r));var t=this.nonMembers.indexOf(r);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(r,t){var e=this;this.group.findById(this.id).remove(),r&&(this.members=r.map(function(n){return(0,y.isString)(n)?e.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,y.isString)(n)?e.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(r){var t=this.group.findById(this.id);t.attr((0,he.__assign)({},r))},i.prototype.updateCfg=function(r){var t=this;this.cfg=(0,y.deepMix)(this.cfg,r),this.id=this.cfg.id,this.group=this.cfg.group,r.members&&(this.members=this.cfg.members.map(function(e){return(0,y.isString)(e)?t.graph.findById(e):e})),r.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(e){return(0,y.isString)(e)?t.graph.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(r){var t=this,e;(0,y.isString)(r)?e=this.graph.findById(r):e=r;var n,a=e.getKeyShape();if(e.get("type")==="path")n=ef(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),Ed(n,ef(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),CL=SL,ML="node",EL="svg",AL=function(i){(0,he.__extends)(r,i);function r(t){var e=i.call(this)||this;return e.cfg=(0,y.deepMix)(e.getDefaultCfg(),t),e.init(),e.animating=!1,e.destroyed=!1,e.cfg.enabledStack&&(e.undoStack=new fx(e.cfg.maxStep),e.redoStack=new fx(e.cfg.maxStep)),e}return r.prototype.init=function(){this.initCanvas();var t=new AA(this),e=new MA(this),n=new SA(this),a=new ZA(this),o=new tL(this),s=new nL(this),u=new aL(this);this.set({eventController:t,viewController:e,modeController:n,itemController:a,layoutController:o,stateController:s,customGroupControll:u}),this.initPlugin()},r.prototype.initCanvas=function(){var t=this.get("container");if((0,y.isString)(t)&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=this.get("width"),n=this.get("height"),a=this.get("renderer"),o;if(a===EL)o=new Fl.Z({container:t,width:e,height:n});else{var s={container:t,width:e,height:n},u=this.get("pixelRatio");u&&(s.pixelRatio=u),o=new os.Z(s)}this.set("canvas",o),this.initGroups()},r.prototype.initPlugin=function(){var t=this;(0,y.each)(t.get("plugins"),function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)})},r.prototype.initGroups=function(){var t=this.get("canvas"),e=this.get("canvas").get("el"),n=e.id,a=t.addGroup({id:n+"-root",className:dr.rootContainerClassName});if(this.get("groupByTypes")){var o=a.addGroup({id:n+"-edge",className:dr.edgeContainerClassName}),s=a.addGroup({id:n+"-node",className:dr.nodeContainerClassName}),u=a.addGroup({id:n+"-combo",className:dr.comboContainerClassName}),h=a.addGroup({id:n+"-group",className:dr.customGroupContainerClassName});h.toBack(),u.toBack(),this.set({nodeGroup:s,edgeGroup:o,customGroup:h,comboGroup:u})}var p=a.addGroup({id:n+"-delegate",className:dr.delegateContainerClassName});this.set({delegateGroup:p}),this.set("group",a)},r.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,groupType:"circle",groupBBoxs:{},groupNodes:{},groups:[],groupStyle:{},enabledStack:!1,maxStep:10,tooltips:[]}},r.prototype.set=function(t,e){return(0,y.isPlainObject)(t)?this.cfg=(0,he.__assign)((0,he.__assign)({},this.cfg),t):this.cfg[t]=e,this},r.prototype.get=function(t){return this.cfg[t]},r.prototype.getGroup=function(){return this.get("group")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.getMinZoom=function(){return this.get("minZoom")},r.prototype.setMinZoom=function(t){return this.set("minZoom",t)},r.prototype.getMaxZoom=function(){return this.get("maxZoom")},r.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},r.prototype.getWidth=function(){return this.get("width")},r.prototype.getHeight=function(){return this.get("height")},r.prototype.clearItemStates=function(t,e){(0,y.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e||(e=t.get("states")),n.clearItemStates(t,e);var a=this.get("stateController");a.updateStates(t,e,!1)},r.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},r.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},r.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},r.prototype.findById=function(t){return this.get("itemMap")[t]},r.prototype.find=function(t,e){var n,a=this.get(t+"s");return(0,y.each)(a,function(o,s){if(e(o,s))return n=o,n}),n},r.prototype.findAll=function(t,e){var n=[];return(0,y.each)(this.get(t+"s"),function(a,o){e(a,o)&&n.push(a)}),n},r.prototype.findAllByState=function(t,e){return this.findAll(t,function(n){return n.hasState(e)})},r.prototype.translate=function(t,e){var n=this.get("group"),a=(0,y.clone)(n.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),Na.wO.translate(a,a,[t,e]),n.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:n.getMatrix()}),this.autoPaint()},r.prototype.moveTo=function(t,e){var n=this.get("group");Q0(n,{x:t,y:e}),this.emit("viewportchange",{action:"move",matrix:n.getMatrix()})},r.prototype.fitView=function(t){t&&this.set("fitViewPadding",t);var e=this.get("viewController");e.fitView(),this.autoPaint()},r.prototype.fitCenter=function(){var t=this.get("viewController");t.fitCenter(),this.autoPaint()},r.prototype.addBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!0),this},r.prototype.removeBehaviors=function(t,e){var n=this.get("modeController");return n.manipulateBehaviors(t,e,!1),this},r.prototype.zoom=function(t,e){var n=this.get("group"),a=(0,y.clone)(n.getMatrix()),o=this.get("minZoom"),s=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),e?(Na.wO.translate(a,a,[-e.x,-e.y]),Na.wO.scale(a,a,[t,t]),Na.wO.translate(a,a,[e.x,e.y])):Na.wO.scale(a,a,[t,t]),!(o&&a[0]<o||s&&a[0]>s)&&(n.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},r.prototype.zoomTo=function(t,e){var n=t/this.getZoom();this.zoom(n,e)},r.prototype.focusItem=function(t,e,n){var a=this.get("viewController"),o=!1;e?o=!0:e===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},r.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},r.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},r.prototype.getPointByClient=function(t,e){var n=this.get("viewController");return n.getPointByClient(t,e)},r.prototype.getClientByPoint=function(t,e){var n=this.get("viewController");return n.getClientByPoint(t,e)},r.prototype.getPointByCanvas=function(t,e){var n=this.get("viewController");return n.getPointByCanvas(t,e)},r.prototype.getCanvasByPoint=function(t,e){var n=this.get("viewController");return n.getCanvasByPoint(t,e)},r.prototype.showItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},h={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],h.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],h.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],h.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:h})}},r.prototype.hideItem=function(t,e){e===void 0&&(e=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},h={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],h.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],h.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],h.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:h})}},r.prototype.refreshItem=function(t){var e=this.get("itemController");e.refreshItem(t)},r.prototype.setAutoPaint=function(t){var e=this;e.set("autoPaint",t);var n=e.get("canvas");n.set("autoDraw",t)},r.prototype.remove=function(t,e){e===void 0&&(e=!0),this.removeItem(t,e)},r.prototype.removeItem=function(t,e){e===void 0&&(e=!0);var n=t;if((0,y.isString)(t)&&(n=this.findById(t)),!n&&(0,y.isString)(t)){console.warn("The item to be removed does not exist!");var a=this.get("customGroupControll");a.remove(t)}else if(n){var o="";if(n.getType&&(o=n.getType()),e&&this.get("enabledStack")){var s=(0,he.__assign)((0,he.__assign)({},n.getModel()),{itemType:o}),u={};switch(o){case"node":{u.nodes=[s],u.edges=[];for(var h=n.getEdges(),p=h.length-1;p>=0;p--)u.edges.push((0,he.__assign)((0,he.__assign)({},h[p].getModel()),{itemType:"edge"}));break}case"edge":u.edges=[s];break;case"combo":u.combos=[s];break;default:break}this.pushStack("delete",{before:u,after:{}})}var b=this.get("itemController");if(b.removeItem(t),o==="combo"){var k=Bd(this.get("comboTrees"));this.set("comboTrees",k)}}},r.prototype.addItem=function(t,e,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController");if(t==="group"){var u=e.groupId,h=e.nodes,p=e.type,b=e.zIndex,k=e.title,R=k;return(0,y.isString)(k)&&(R={text:k}),this.get("customGroupControll").create(u,h,p,b,!0,R)}if(e.id&&this.findById(e.id)){console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","");return}var Y,V=this.get("comboTrees");if(V||(V=[]),t==="combo"){var Z=this.get("itemMap"),it=!1;if(V.forEach(function(Le){it||Ta(Le,function(Ye){if(e.parentId===Ye.id){it=!0;var Be=(0,he.__assign)({id:e.id,depth:Ye.depth+2},e);Ye.children?Ye.children.push(Be):Ye.children=[Be],e.depth=Be.depth,Y=s.addItem(t,e)}var or=Z[Ye.id];return it&&or&&or.getType&&or.getType()==="combo"&&s.updateCombo(or,Ye.children),!0})}),!it){var tt=(0,he.__assign)({id:e.id,depth:0},e);e.depth=tt.depth,V.push(tt),Y=s.addItem(t,e)}this.set("comboTrees",V)}else if(t==="node"&&(0,y.isString)(e.comboId)&&V){var _t=this.findById(e.comboId);if(_t&&_t.getType&&_t.getType()!=="combo"){console.warn("'"+e.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");return}Y=s.addItem(t,e);var It=this.get("itemMap"),Ht=!1,le=!1;(V||[]).forEach(function(Le){le||Ht||Ta(Le,function(Ye){if(Ye.id===e.id)return le=!0,!1;if(e.comboId===Ye.id&&!le){Ht=!0;var Be=(0,y.clone)(e);Be.itemType="node",Ye.children?Ye.children.push(Be):Ye.children=[Be],e.depth=Ye.depth+1}return Ht&&It[Ye.id].getType&&It[Ye.id].getType()==="combo"&&s.updateCombo(It[Ye.id],Ye.children),!0})})}else Y=s.addItem(t,e);if(t==="node"&&e.comboId||t==="combo"&&e.parentId){var _t=this.findById(e.comboId||e.parentId);_t&&_t.addChild(Y)}var xe=this.get("combos");if(xe&&xe.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var Ce=(0,he.__assign)((0,he.__assign)({},Y.getModel()),{itemType:t}),me={};switch(t){case"node":me.nodes=[Ce];break;case"edge":me.edges=[Ce];break;case"combo":me.combos=[Ce];break;default:break}this.pushStack("add",{before:{},after:me})}return Y},r.prototype.add=function(t,e,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,e,n,a)},r.prototype.updateItem=function(t,e,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,y.isString)(t)?s=this.findById(t):s=t;var u=(0,y.clone)(s.getModel()),h="";s.getType&&(h=s.getType());var p=(0,he.__spreadArrays)(s.getStates());if(h==="combo"&&(0,y.each)(p,function(Y){return a.setItemState(s,Y,!1)}),o.updateItem(s,e),h==="combo"&&(0,y.each)(p,function(Y){return a.setItemState(s,Y,!0)}),n&&this.get("enabledStack")){var b={nodes:[],edges:[],combos:[]},k={nodes:[],edges:[],combos:[]},R=(0,he.__assign)({id:u.id},e);switch(h){case"node":b.nodes.push(u),k.nodes.push(R);break;case"edge":b.edges.push(u),k.edges.push(R);break;case"combo":b.combos.push(u),k.combos.push(R);break;default:break}h==="node"&&b.nodes.push(u),this.pushStack("update",{before:b,after:k})}},r.prototype.update=function(t,e,n){n===void 0&&(n=!0),this.updateItem(t,e,n)},r.prototype.setItemState=function(t,e,n){(0,y.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,e,n);var o=this.get("stateController");(0,y.isString)(n)?o.updateState(t,e+":"+n,!0):o.updateState(t,e,n)},r.prototype.priorityState=function(t,e){var n=this.get("itemController");n.priorityState(t,e)},r.prototype.data=function(t){this.set("data",t)},r.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o,u=e.combos,h=u===void 0?[]:u;if(this.clear(),this.emit("beforerender"),(0,y.each)(a,function(tt){t.add("node",tt,!1,!1)}),h&&h.length!==0){var p=kd(h,a);this.set("comboTrees",p),t.addCombos(h)}(0,y.each)(s,function(tt){t.add("edge",tt,!1,!1)});var b=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var k=t.get("layoutController");k.layout(R)||R();function R(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",b)}if(!this.get("groupByTypes"))if(h&&h.length!==0)this.sortCombos();else if(e.nodes&&e.edges&&e.nodes.length<e.edges.length){var Y=this.getNodes();Y.forEach(function(tt){tt.toFront()})}else{var V=this.getEdges();V.forEach(function(tt){tt.toBack()})}if(e.nodes){var Z=e.nodes.filter(function(tt){return tt.groupId});if(Z.length>0){var it=t.get("groupType");this.renderCustomGroup(e,it)}}this.get("enabledStack")&&this.pushStack("render")},r.prototype.read=function(t){this.data(t),this.render()},r.prototype.diffItems=function(t,e,n){var a=this,o,s=this.get("itemMap");(0,y.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===ML){var h=o.getContainer().getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:h[6],y:h[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);e[t+"s"].push(o)})},r.prototype.changeData=function(t,e){e===void 0&&(e=!0);var n=this;if(!t)return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.save(),after:t}),this.set("comboSorted",!1),this.getNodes().map(function(V){return n.clearItemStates(V)}),this.getEdges().map(function(V){return n.clearItemStates(V)});var a=this.get("canvas"),o=a.get("localRefresh");a.set("localRefresh",!1),n.get("data")||(n.data(t),n.render());var s=this.get("itemMap"),u={nodes:[],edges:[]},h=t.combos;if(h){var p=kd(h,t.nodes);this.set("comboTrees",p)}this.diffItems("node",u,t.nodes),(0,y.each)(s,function(V,Z){s[Z].getModel().depth=0,!(V.getType&&V.getType()==="edge")&&(V.getType&&V.getType()==="combo"?(delete s[Z],V.destroy()):u.nodes.indexOf(V)<0&&(delete s[Z],n.remove(V,!1)))});for(var b=this.getCombos(),k=b.length,R=k-1;R>=0;R--)b[R].destroyed&&b.splice(R,1);h&&(n.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",u,t.edges),(0,y.each)(s,function(V,Z){V.getType&&(V.getType()==="node"||V.getType()==="combo")||u.edges.indexOf(V)<0&&(delete s[Z],n.remove(V,!1))}),this.set({nodes:u.nodes,edges:u.edges});var Y=this.get("layoutController");return Y.changeData(),n.get("animate")&&!Y.getLayoutType()?n.positionsAnimate():n.autoPaint(),setTimeout(function(){a.set("localRefresh",o)},16),this},r.prototype.addCombos=function(t){var e=this,n=e.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},r.prototype.createCombo=function(t,e){var n=this;this.set("comboSorted",!1);var a="",o;if(!!t){if((0,y.isString)(t))a=t,o={id:t};else{if(a=t.id,!a){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}o=t}var s=e.map(function(h){var p=n.findById(h),b="";p.getType&&(b=p.getType());var k={id:p.getID(),itemType:b};return b==="combo"?k.parentId=a:b==="node"&&(k.comboId=a),k});o.children=s,this.addItem("combo",o,!1),this.set("comboSorted",!1);var u=this.get("comboTrees");(u||[]).forEach(function(h){Ta(h,function(p){return p.id===a?(p.itemType="combo",p.children=s,!1):!0})}),u&&this.sortCombos()}},r.prototype.uncombo=function(t){var e=this,n,a=this,o=t;if((0,y.isString)(t)&&(o=this.findById(t)),!o||o.getType&&o.getType()!=="combo"){console.warn("The item is not a combo!");return}var s=o.getModel().parentId,u=a.get("comboTrees");u||(u=[]);var h=this.get("itemMap"),p=o.get("id"),b,k=[],R=this.get("combos"),Y=this.findById(s);if(u.forEach(function(Z){b||Ta(Z,function(it){var tt;if(it.id===p){b=it;var _t=o.getEdges();_t.forEach(function(Ht){e.removeItem(Ht,!1)});var It=R.indexOf(t);R.splice(It,1),delete h[p],o.destroy()}if(s&&b&&it.id===s){Y.removeCombo(o),k=it.children;var It=k.indexOf(b);return It!==-1&&k.splice(It,1),(tt=b.children)===null||tt===void 0||tt.forEach(function(le){var xe=e.findById(le.id),Ce=xe.getModel();xe.getType&&xe.getType()==="combo"?(le.parentId=s,delete le.comboId,Ce.parentId=s,delete Ce.comboId):xe.getType&&xe.getType()==="node"&&(le.comboId=s,Ce.comboId=s),Y.addChild(xe),k.push(le)}),!1}return!0})}),!s&&b){var V=u.indexOf(b);u.splice(V,1),(n=b.children)===null||n===void 0||n.forEach(function(Z){Z.parentId=void 0;var it=e.findById(Z.id).getModel();it.parentId=void 0,Z.itemType!=="node"&&u.push(Z)})}},r.prototype.updateCombos=function(){var t=this,e=this,n=this.get("comboTrees"),a=e.get("itemController"),o=e.get("itemMap");(n||[]).forEach(function(s){Ta(s,function(u){if(!u)return!0;var h=o[u.id];if(h&&h.getType&&h.getType()==="combo"){var p=(0,he.__spreadArrays)(h.getStates());(0,y.each)(p,function(b){return t.setItemState(h,b,!1)}),a.updateCombo(h,u.children),(0,y.each)(p,function(b){return t.setItemState(h,b,!0)})}return!0})}),e.sortCombos()},r.prototype.updateCombo=function(t){var e=this,n=this,a=t,o;if((0,y.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),h=n.get("itemMap");(s||[]).forEach(function(p){Ta(p,function(b){if(!b)return!0;var k=h[b.id];if(o===b.id&&k&&k.getType&&k.getType()==="combo"){var R=(0,he.__spreadArrays)(k.getStates());(0,y.each)(R,function(Y){k.getStateStyle(Y)&&e.setItemState(k,Y,!1)}),u.updateCombo(k,b.children),(0,y.each)(R,function(Y){k.getStateStyle(Y)&&e.setItemState(k,Y,!0)}),o&&(o=b.parentId)}return!0})})},r.prototype.updateComboTree=function(t,e){var n=this;this.set("comboSorted",!1);var a;(0,y.isString)(t)?a=n.findById(t):a=t;var o=a.getModel(),s=o.comboId||o.parentId;if(e&&a.getType&&a.getType()==="combo"){var u=this.get("comboTrees"),h=!0,p;if((u||[]).forEach(function(V){p||aa(V,function(Z){if(!p)return Z.id===a.getID()&&(p=Z),!0})}),aa(p,function(V){return V.id===e?(h=!1,!1):!0}),!h){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(o.parentId||o.comboId){var b=this.findById(o.parentId||o.comboId);b&&b.removeChild(a)}var k="";if(a.getType&&(k=a.getType()),k==="combo"?o.parentId=e:k==="node"&&(o.comboId=e),e){var R=this.findById(e);R&&R.addChild(a)}if(s){var R=this.findById(s);R&&R.removeChild(a)}var Y=Bd(this.get("comboTrees"),o.id,e);this.set("comboTrees",Y),this.updateCombos()},r.prototype.renderCustomGroup=function(t,e){var n=this,a=t.groups,o=t.nodes,s=o===void 0?[]:o,u=10;if(a){this.set({groups:a});var k=bA(t);Object.keys(k).forEach(function(Y){var V=k[Y];n.get("customGroupControll").create(Y,V,e,u),u--});var R=this.get("customGroup");R.sort()}else{var h=s.filter(function(Y){return Y.groupId}),p=[],b=(0,y.groupBy)(h,"groupId");Object.keys(b).forEach(function(Y){var V=b[Y].map(function(Z){return Z.id});n.get("customGroupControll").create(Y,V,e,u),u--,p.find(function(Z){return Z.id===Y})||p.push({id:Y})}),this.set({groups:p})}},r.prototype.save=function(){var t=[],e=[],n=[];return(0,y.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,y.each)(this.get("edges"),function(a){e.push(a.getModel())}),(0,y.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:e,combos:n,groups:this.get("groups")}},r.prototype.changeSize=function(t,e){var n=this.get("viewController");return n.changeSize(t,e),this},r.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var e=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,y.each)(e,function(o){o.refresh()}),(0,y.each)(n,function(o){o.refresh()}),(0,y.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},r.prototype.getNodes=function(){return this.get("nodes")},r.prototype.getEdges=function(){return this.get("edges")},r.prototype.getCombos=function(){return this.get("combos")},r.prototype.getComboChildren=function(t){if((0,y.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},r.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),n=e.onFrame,a=t.getNodes(),o=a.map(function(u){var h=u.getModel();return{id:h.id,x:h.x,y:h.y}});t.isAnimating()&&t.stopAnimate();var s=t.get("canvas");s.animate(function(u){(0,y.each)(o,function(h){var p=t.findById(h.id);if(!(!p||p.destroyed)){var b=p.get("originAttrs"),k=p.get("model");if(!b){var R=p.getContainer().getMatrix();R||(R=[1,0,0,0,1,0,0,0,1]),b={x:R[6],y:R[7]},p.set("originAttrs",b)}if(n){var Y=n(p,u,h,b);p.set("model",Object.assign(k,Y))}else k.x=b.x+(h.x-b.x)*u,k.y=b.y+(h.y-b.y)*u}}),t.refreshPositions()},{duration:e.duration,easing:e.easing,callback:function(){(0,y.each)(a,function(h){h.set("originAttrs",null)}),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},r.prototype.refreshPositions=function(){var t=this;t.emit("beforegraphrefreshposition");var e=t.get("nodes"),n=t.get("edges"),a=t.get("vedges"),o=t.get("combos"),s,u={};(0,y.each)(e,function(h){s=h.getModel();var p=h.get("originAttrs");p&&s.x===p.x&&s.y===p.y||(h.updatePosition({x:s.x,y:s.y}),u[s.id]=!0,s.comboId&&(u[s.comboId]=!0))}),o&&o.length!==0&&t.updateCombos(),(0,y.each)(n,function(h){var p=h.getSource().getModel(),b=h.getTarget().getModel();(u[p.id]||u[b.id]||h.getModel().isComboEdge)&&h.refresh()}),(0,y.each)(a,function(h){h.refresh()}),t.emit("aftergraphrefreshposition"),t.autoPaint()},r.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},r.prototype.isAnimating=function(){return this.animating},r.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},r.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},r.prototype.setMode=function(t){var e=this.get("modeController");return e.setMode(t),this},r.prototype.clear=function(){var t=this.get("canvas");return t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},r.prototype.toDataURL=function(t,e){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),h=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),p=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",h);p.replaceChild(u,p.documentElement);var b=new XMLSerializer().serializeToString(p);s="data:image/svg+xml;charset=utf8,"+encodeURIComponent(b)}else{var k=void 0,R=o.getContext("2d"),Y=this.get("width"),V=this.get("height"),Z=void 0;if(e){var it=window.devicePixelRatio;k=R.getImageData(0,0,Y*it,V*it),Z=R.globalCompositeOperation,R.globalCompositeOperation="destination-over",R.fillStyle=e,R.fillRect(0,0,Y,V)}s=o.toDataURL(t),e&&(R.clearRect(0,0,Y,V),R.putImageData(k,0,0),R.globalCompositeOperation=Z)}return s},r.prototype.toFullDataURL=function(t,e,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),h=(0,ki.Z)('<id="virtual-image"></div>'),p=n?n.backgroundColor:void 0,b=n?n.padding:void 0;b?(0,y.isNumber)(b)&&(b=[b,b,b,b]):b=[0,0,0,0];var k=o+b[0]+b[2],R=s+b[1]+b[3],Y={container:h,height:k,width:R,quickHit:!0},V=u==="svg"?new Fl.Z(Y):new os.Z(Y),Z=this.get("group"),it=Z.clone(),tt=(0,y.clone)(it.getMatrix());tt||(tt=[1,0,0,0,1,0,0,0,1]);var _t=(a.maxX+a.minX)/2,It=(a.maxY+a.minY)/2;Na.wO.translate(tt,tt,[-_t,-It]),Na.wO.translate(tt,tt,[s/2+b[3],o/2+b[0]]),it.resetMatrix(),it.setMatrix(tt),V.add(it);var Ht=V.get("el"),le="";e||(e="image/png"),setTimeout(function(){if(u==="svg"){var xe=Ht.cloneNode(!0),Ce=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),me=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ce);me.replaceChild(xe,me.documentElement);var Le=new XMLSerializer().serializeToString(me);le="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Le)}else{var Ye=void 0,Be=Ht.getContext("2d"),or=void 0;if(p){var cr=window.devicePixelRatio;Ye=Be.getImageData(0,0,R*cr,k*cr),or=Be.globalCompositeOperation,Be.globalCompositeOperation="destination-over",Be.fillStyle=p,Be.fillRect(0,0,R,k)}le=Ht.toDataURL(e),p&&(Be.clearRect(0,0,R,k),Be.putImageData(Ye,0,0),Be.globalCompositeOperation=or)}t==null||t(le)},16)},r.prototype.downloadFullImage=function(t,e,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,h=this.get("renderer"),p=(0,ki.Z)('<id="virtual-image"></div>'),b=n?n.backgroundColor:void 0,k=n?n.padding:void 0;k?(0,y.isNumber)(k)&&(k=[k,k,k,k]):k=[0,0,0,0];var R=s+k[0]+k[2],Y=u+k[1]+k[3],V={container:p,height:R,width:Y},Z=h==="svg"?new Fl.Z(V):new os.Z(V),it=this.get("group"),tt=it.clone(),_t=(0,y.clone)(tt.getMatrix());_t||(_t=[1,0,0,0,1,0,0,0,1]);var It=(o.maxX+o.minX)/2,Ht=(o.maxY+o.minY)/2;Na.wO.translate(_t,_t,[-It,-Ht]),Na.wO.translate(_t,_t,[u/2+k[3],s/2+k[0]]),tt.resetMatrix(),tt.setMatrix(_t),Z.add(tt);var le=Z.get("el");e||(e="image/png"),setTimeout(function(){var xe="";if(h==="svg"){var Ce=le.cloneNode(!0),me=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Le=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",me);Le.replaceChild(Ce,Le.documentElement);var Ye=new XMLSerializer().serializeToString(Le);xe="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Ye)}else{var Be=void 0,or=le.getContext("2d"),cr=void 0;if(b){var ar=window.devicePixelRatio;Be=or.getImageData(0,0,Y*ar,R*ar),cr=or.globalCompositeOperation,or.globalCompositeOperation="destination-over",or.fillStyle=b,or.fillRect(0,0,Y,R)}xe=le.toDataURL(e),b&&(or.clearRect(0,0,Y,R),or.putImageData(Be,0,0),or.globalCompositeOperation=cr)}var Cr=document.createElement("a"),wr=(t||"graph")+(h==="svg"?".svg":"."+e.split("/")[1]);a.dataURLToImage(xe,h,Cr,wr);var Mr=document.createEvent("MouseEvents");Mr.initEvent("click",!1,!1),Cr.dispatchEvent(Mr)},16)},r.prototype.downloadImage=function(t,e,n){var a=this,o=this;o.isAnimating()&&o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();e||(e="image/png");var h=(t||"graph")+(u==="svg"?".svg":e.split("/")[1]),p=document.createElement("a");setTimeout(function(){var b=o.toDataURL(e,n);a.dataURLToImage(b,u,p,h);var k=document.createEvent("MouseEvents");k.initEvent("click",!1,!1),p.dispatchEvent(k)},16)},r.prototype.dataURLToImage=function(t,e,n,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&e!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var h=atob(o[1]),p=h.length,b=new Uint8Array(p);p--;)b[p]=h.charCodeAt(p);var k=new Blob([b],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(k,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(k)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},r.prototype.updateLayout=function(t){var e=this.get("layoutController"),n;(0,y.isString)(t)?(n=t,t={type:n}):n=t.type;var a=this.get("layout"),o=a?a.type:void 0;if(!n||o===n){var s={};Object.assign(s,a,t),s.type=o||"random",this.set("layout",s),e.updateLayoutCfg(s)}else this.set("layout",t),e.changeLayout(n)},r.prototype.destroyLayout=function(){var t=this.get("layoutController");t.destroyLayout()},r.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");if(!!e){if(e.workerEnabled){t.layout();return}t.layoutMethod?t.relayout(!0):t.layout()}},r.prototype.collapseCombo=function(t){var e=this;if((0,y.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.collapseCombo(t),n.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],u=[],h=this.get("comboTrees"),p=!1,b={};(h||[]).forEach(function(Y){b[Y.id]=Y}),(h||[]).forEach(function(Y){p||aa(Y,function(V){if(p&&b[V.id])return!1;if(n.parentId===V.id?(b={},V.children.forEach(function(it){b[it.id]=it})):n.id===V.id&&(p=!0),p){var Z=e.findById(V.id);Z&&Z.getType&&Z.getType()==="combo"&&(s=s.concat(Z.getNodes()),u=u.concat(Z.getCombos()))}return!0})});var k={},R=[];o.forEach(function(Y){if(!(Y.isVisible()&&!Y.getModel().isVEdge)){var V=Y.getSource(),Z=Y.getTarget();if((s.includes(V)||u.includes(V))&&!s.includes(Z)&&!u.includes(Z)||V.getModel().id===n.id){var it=Y.getModel();if(it.isVEdge){e.removeItem(Y,!1);return}for(var tt=Z.getModel();!Z.isVisible();){if(Z=e.findById(tt.parentId||tt.comboId),!Z||!tt.parentId&&!tt.comboId)return;tt=Z.getModel()}var _t=tt.id;if(k[n.id+"-"+_t]){k[n.id+"-"+_t]+=it.size||1;return}var It=e.addItem("vedge",{source:n.id,target:_t,isVEdge:!0},!1);k[n.id+"-"+_t]=it.size||1,R.push(It)}else if(!s.includes(V)&&!u.includes(V)&&(s.includes(Z)||u.includes(Z))||Z.getModel().id===n.id){var it=Y.getModel();if(it.isVEdge){e.removeItem(Y,!1);return}for(var Ht=V.getModel();!V.isVisible();){if(V=e.findById(Ht.parentId||Ht.comboId),!V||!Ht.parentId&&!Ht.comboId)return;Ht=V.getModel()}var le=Ht.id;if(k[le+"-"+n.id]){k[le+"-"+n.id]+=it.size||1;return}var It=e.addItem("vedge",{target:n.id,source:le,isVEdge:!0},!1);k[le+"-"+n.id]=it.size||1,R.push(It)}}}),R.forEach(function(Y){var V=Y.getModel();e.updateItem(Y,{size:k[V.source+"-"+V.target]},!1)})},r.prototype.expandCombo=function(t){var e=this;if((0,y.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}var n=t.getModel(),a=this.get("itemController");a.expandCombo(t),n.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],u=[],h=this.get("comboTrees"),p=!1,b={};(h||[]).forEach(function(Y){b[Y.id]=Y}),(h||[]).forEach(function(Y){p||aa(Y,function(V){if(p&&b[V.id])return!1;if(n.parentId===V.id?(b={},V.children.forEach(function(it){b[it.id]=it})):n.id===V.id&&(p=!0),p){var Z=e.findById(V.id);Z&&Z.getType&&Z.getType()==="combo"&&(s=s.concat(Z.getNodes()),u=u.concat(Z.getCombos()))}return!0})});var k={},R={};o.forEach(function(Y){if(!(Y.isVisible()&&!Y.getModel().isVEdge)){var V=Y.getSource(),Z=Y.getTarget(),it=V.get("id"),tt=Z.get("id");if((s.includes(V)||u.includes(V))&&!s.includes(Z)&&!u.includes(Z)||it===n.id){if(Y.getModel().isVEdge){e.removeItem(Y,!1);return}for(var _t=Z.getModel();!Z.isVisible();){if(Z=e.findById(_t.comboId||_t.parentId),!Z||!_t.parentId&&!_t.comboId)return;_t=Z.getModel()}tt=_t.id;for(var It=V.getModel();!V.isVisible();){if(V=e.findById(It.comboId||It.parentId),!V||!It.parentId&&!It.comboId)return;if(It.comboId===n.id||It.parentId===n.id)break;It=V.getModel()}if(it=It.id,tt){var Ht=it+"-"+tt;if(k[Ht]){k[Ht]+=Y.getModel().size||1,e.updateItem(R[Ht],{size:k[Ht]},!1);return}var le=e.addItem("vedge",{source:it,target:tt,isVEdge:!0},!1);k[Ht]=Y.getModel().size||1,R[Ht]=le}}else if(!s.includes(V)&&!u.includes(V)&&(s.includes(Z)||u.includes(Z))||tt===n.id){if(Y.getModel().isVEdge){e.removeItem(Y,!1);return}for(var It=V.getModel();!V.isVisible();){if(V=e.findById(It.comboId||It.parentId),!V||!It.parentId&&!It.comboId)return;It=V.getModel()}it=It.id;for(var _t=Z.getModel();!Z.isVisible();){if(Z=e.findById(_t.comboId||_t.parentId),!Z||!_t.parentId&&!_t.comboId)return;if(_t.comboId===n.id||_t.parentId===n.id)break;_t=Z.getModel()}if(tt=_t.id,it){var Ht=it+"-"+tt;if(k[Ht]){k[Ht]+=Y.getModel().size||1,e.updateItem(R[Ht],{size:k[Ht]},!1);return}var le=e.addItem("vedge",{target:tt,source:it,isVEdge:!0},!1);k[Ht]=Y.getModel().size||1,R[Ht]=le}}else(s.includes(V)||u.includes(V))&&(s.includes(Z)||u.includes(Z))&&V.isVisible()&&Z.isVisible()&&Y.show()}})},r.prototype.collapseExpandCombo=function(t){if((0,y.isString)(t)&&(t=this.findById(t)),!(t.getType&&t.getType()!=="combo")){for(var e=t.getModel(),n=this.findById(e.parentId);n;){var a=n.getModel();if(a.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),n=void 0;return}n=this.findById(a.parentId)}var o=e.collapsed;o?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},r.prototype.collapseGroup=function(t){var e=this.get("customGroupControll");e.collapseGroup(t)},r.prototype.expandGroup=function(t){var e=this.get("customGroupControll");e.expandGroup(t)},r.prototype.addPlugin=function(t){var e=this;t.destroyed||(e.get("plugins").push(t),t.initPlugin(e))},r.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);n>=0&&(t.destroyPlugin(),e.splice(n,1))},r.prototype.sortCombos=function(){var t=this,e=this.get("comboSorted");if(!e){this.set("comboSorted",!0);var n=[],a={},o=this.get("comboTrees");(o||[]).forEach(function(u){aa(u,function(h){return n[h.depth]?n[h.depth].push(h.id):n[h.depth]=[h.id],a[h.id]=h.depth,!0})});var s=this.getEdges().concat(this.get("vedges"));(s||[]).forEach(function(u){var h=u.getModel(),p=a[h.source]||0,b=a[h.target]||0,k=Math.max(p,b);n[k]?n[k].push(h.id):n[k]=[h.id]}),n.forEach(function(u){if(!(!u||!u.length))for(var h=u.length-1;h>=0;h--){var p=t.findById(u[h]);p==null||p.toFront()}})}},r.prototype.getNeighbors=function(t,e){var n=t;return(0,y.isString)(t)&&(n=this.findById(t)),n.getNeighbors(e)},r.prototype.getNodeDegree=function(t,e){e===void 0&&(e=void 0);var n=t;(0,y.isString)(t)&&(n=this.findById(t));var a=this.get("degrees");a||(a=lx(this)),this.set("degees",a);var o=a[n.getID()],s;switch(e){case"in":s=o.inDegree;break;case"out":s=o.outDegree;break;case"all":s=o;break;default:s=o.degree;break}return s},r.prototype.getUndoStack=function(){return this.undoStack},r.prototype.getRedoStack=function(){return this.redoStack},r.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},r.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},r.prototype.pushStack=function(t,e,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=e?(0,y.clone)(e):{before:{},after:(0,y.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})},r.prototype.getAdjMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=Ef(this,e),this.set("adjMatrix",n)),n},r.prototype.getShortestPathMatrix=function(t,e){t===void 0&&(t=!0),e===void 0&&(e=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=Ef(this,e),this.set("adjMatrix",n)),(!a||!t)&&(a=cx(this,e),this.set("shortestPathMatrix",a)),a},r.prototype.destroy=function(){this.clear(),this.clearStack(),(0,y.each)(this.get("plugins"),function(o){o.destroyPlugin()});var t=this.get("tooltips");if(t)for(var e=0;e<t.length;e++){var n=t[e];if(!!n){var a=n.parentElement;!a||a.removeChild(n)}}this.get("eventController").destroy(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("layoutController").destroy(),this.get("customGroupControll").destroy(),this.get("canvas").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},r.prototype.createHull=function(t){var e=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),e||(e=this.get("group").addGroup({id:"hullGroup"}),e.toBack(),this.set("hullGroup",e)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=e.addGroup({id:t.id+"-container"}),o=new CL(this,(0,he.__assign)((0,he.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},r.prototype.getHulls=function(){return this.get("hullMap")},r.prototype.getHullById=function(t){return this.get("hullMap")[t]},r.prototype.removeHull=function(t){var e;(0,y.isString)(t)?e=this.getHullById(t):e=t;var n=this.get("hullMap");delete n[e.id],e.destroy()},r.prototype.setImageWaterMarker=function(t,e){t===void 0&&(t=dr.waterMarkerImage);var n=this.get("container");(0,y.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,y.deepMix)({},dr.imageWaterMarkerConfig,e),s=o.width,u=o.height,h=o.compatible,p=o.image;if(!a){var b={container:n,width:s,height:u,capture:!1},k=this.get("pixelRatio");k&&(b.pixelRatio=k),a=new os.Z(b),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var R=a.get("context"),Y=p.rotate,V=p.x,Z=p.y;R.rotate(-Y*Math.PI/180);var it=new Image;it.crossOrigin="anonymous",it.src=t,it.onload=function(){if(R.drawImage(it,V,Z,p.width,p.height),R.rotate(Y*Math.PI/180),h)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var tt=document.querySelector(".g6-graph-watermarker");tt||(tt=document.createElement("div"),tt.className="g6-graph-watermarker"),tt.className="g6-graph-watermarker",a.destroyed||(tt.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",n.appendChild(tt))}}},r.prototype.setTextWaterMarker=function(t,e){var n=this.get("container");(0,y.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,y.deepMix)({},dr.textWaterMarkerConfig,e),s=o.width,u=o.height,h=o.compatible,p=o.text;if(!a){var b={container:n,width:s,height:u,capture:!1},k=this.get("pixelRatio");k&&(b.pixelRatio=k),a=new os.Z(b),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var R=a.get("context"),Y=p.rotate,V=p.fill,Z=p.fontFamily,it=p.fontSize,tt=p.baseline,_t=p.x,It=p.y,Ht=p.lineHeight;R.rotate(-Y*Math.PI/180),R.font=it+"px "+Z,R.fillStyle=V,R.textBaseline=tt;for(var le=t.length-1;le>=0;le--)R.fillText(t[le],_t,It+le*Ht);if(R.rotate(Y*Math.PI/180),h)n.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var xe=document.querySelector(".g6-graph-watermarker");xe||(xe=document.createElement("div"),xe.className="g6-graph-watermarker"),xe.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",n.appendChild(xe)}},r}(qt.default),yx=AL,TL=v(62114),mx=v.n(TL),PL=function(i){(0,he.__extends)(r,i);function r(t){var e=i.call(this,t)||this;return e.layoutAnimating=!1,e.set("removeList",[]),e.set("layoutMethod",e.getLayout()),e}return r.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var n=mx()[t.type](e,t);return wm(n),n}:function(e){return mx()[t.type](e,t)}):null},r.indexOfChild=function(t,e){var n=-1;return(0,Ei.S6)(t,function(a,o){if(e===a.id)return n=o,!1}),n},r.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},r.prototype.innerAddChild=function(t,e,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(e){if(s.set("parent",e),n){var u=e.get("originAttrs");if(u)s.set("originAttrs",u);else{var h=e.getModel();s.set("originAttrs",{x:h.x,y:h.y})}}var p=e.get("children");p?p.push(s):e.set("children",[s]),a.addItem("edge",{source:e,target:s,id:e.get("id")+":"+s.get("id")},!1)}return(0,Ei.S6)(t.children||[],function(b){a.innerAddChild(b,s,n)}),a.emit("afteraddchild",{item:s,parent:e}),s},r.prototype.innerUpdateChild=function(t,e,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,e,n);return}(0,Ei.S6)(t.children||[],function(Y){a.innerUpdateChild(Y,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var h=s.length-1;h>=0;h--){var p=s[h].getModel();r.indexOfChild(t.children||[],p.id)===-1&&(a.innerRemoveChild(p.id,{x:t.x,y:t.y},n),s.splice(h,1))}}var b,k;o.get("originAttrs")&&(b=o.get("originAttrs").x,k=o.get("originAttrs").y);var R=o.getModel();n&&o.set("originAttrs",{x:R.x,y:R.y}),o.set("model",t.data),(b!==t.x||k!==t.y)&&o.updatePosition({x:t.x,y:t.y})},r.prototype.innerRemoveChild=function(t,e,n){var a=this,o=a.findById(t);if(!!o)if((0,Ei.S6)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,e,n)}),n){var s=o.getModel();o.set("to",e),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o)},r.prototype.changeData=function(t){var e=this;this.getNodes().map(function(n){return e.clearItemStates(n)}),this.getEdges().map(function(n){return e.clearItemStates(n)}),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},r.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var e=this;e.updateLayout(t)},r.prototype.updateLayout=function(t){var e=this;if(!t){console.warn("layout cannot be null");return}e.set("layout",t),e.set("layoutMethod",e.getLayout()),e.layout()},r.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var e=this;e.layout(t)},r.prototype.layout=function(t){var e=this,n=e.get("data"),a=e.get("layoutMethod"),o=a(n,e.get("layout")),s=e.get("animate");if(e.emit("beforerefreshlayout",{data:n,layoutData:o}),e.emit("beforelayout"),e.innerUpdateChild(o,void 0,s),t){var u=e.get("viewController");u.fitView()}s?e.layoutAnimate(o):(e.refresh(),e.paint()),e.emit("afterrefreshlayout",{data:n,layoutData:o}),e.emit("afterlayout")},r.prototype.addChild=function(t,e){var n=this;n.emit("beforeaddchild",{model:t,parent:e}),(0,Ei.HD)(e)||(e=e.get("id"));var a=n.findDataById(e);a&&(a.children||(a.children=[]),a.children.push(t),n.changeData())},r.prototype.updateChild=function(t,e){var n=this;if(!e||!n.findById(e)){n.changeData(t);return}var a=n.findById(e).getModel(),o=n.findById(t.id);if(a.children||(a.children=[]),!o)a.children.push(t);else{var s=r.indexOfChild(a.children,t.id);a.children[s]=t}n.changeData()},r.prototype.removeChild=function(t){var e=this,n=e.findById(t);if(!!n){var a=n.get("parent");if(a&&!a.destroyed){var o=e.findDataById(a.get("id")),s=o&&o.children||[],u=n.getModel(),h=r.indexOfChild(s,u.id);s.splice(h,1)}e.changeData()}},r.prototype.findDataById=function(t,e){var n=this;if(e||(e=n.get("data")),t===e.id)return e;var a=null;return(0,Ei.S6)(e.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},r.prototype.layoutAnimate=function(t,e){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){aa(t,function(s){var u=n.findById(s.id);if(u){var h=u.get("originAttrs"),p=u.get("model");if(h||(h={x:p.x,y:p.y},u.set("originAttrs",h)),e){var b=e(u,o,h,t);u.set("model",Object.assign(p,b))}else p.x=h.x+(s.x-h.x)*o,p.y=h.y+(s.y-h.y)*o}return!0}),(0,Ei.S6)(n.get("removeList"),function(s){var u=s.getModel(),h=s.get("originAttrs"),p=s.get("to");u.x=h.x+(p.x-h.x)*o,u.y=h.y+(p.y-h.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,Ei.S6)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,Ei.S6)(n.get("removeList"),function(s){n.removeItem(s)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},r.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},r.prototype.isLayoutAnimating=function(){return this.layoutAnimating},r.prototype.render=function(){var t=this,e=t.get("data");if(!e)throw new Error("data must be defined first");t.clear(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},r.prototype.save=function(){return this.get("data")},r}(yx),LL=PL,_L="-shape",xx="-label",Af=["startArrow","endArrow"],$d="-label-bg",Qd={options:{},itemType:"",type:"",getCustomConfig:function(r){return{}},getOptions:function(r){return(0,y.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(r)||{},r)},draw:function(r,t){var e=this.drawShape(r,t);if(e.set("className",this.itemType+_L),r.label){var n=this.drawLabel(r,t);n.set("className",this.itemType+xx)}return e},afterDraw:function(r,t,e){},drawShape:function(r,t){return null},drawLabel:function(r,t){var e=this.getOptions(r).labelCfg,n=e||{},a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape"});if(o){var u=s.getBBox(),h=s.getMatrix();if(h||(h=[1,0,0,0,1,0,0,0,1]),a.rotateCenter)switch(a.rotateCenter){case"center":h=no(h,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":h=no(h,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":h=no(h,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:h=no(h,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else h=no(h,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(h)}if(a.background){var p=this.drawLabelBg(r,t,s),b=this.itemType+$d;p.set("classname",b),s.toFront()}return s},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,y.mix)({},n,r.labelCfg),o=this.getLabelBgStyleByPosition(e,r,a,t),s=t.addShape("rect",{name:"text-bg-shape",attrs:o});return s},getLabelStyleByPosition:function(r,t,e){return{text:r.label}},getLabelBgStyleByPosition:function(r,t,e,n){return{}},getLabelStyle:function(r,t,e){var n=this.getLabelStyleByPosition(r,t,e),a=this.itemType+"Label",o=dr[a]?dr[a].style:null,s=(0,he.__assign)((0,he.__assign)((0,he.__assign)({},o),n),t.style);return s},getShapeStyle:function(r){return r.style},update:function(r,t){this.updateShapeStyle(r,t),this.updateLabel(r,t)},updateShapeStyle:function(r,t){var e=t.getContainer(),n=t.getKeyShape(),a=(0,y.mix)({},n.attr(),r.style),o=function(h){var p,b=a[h];if((0,y.isPlainObject)(b)){var k=e.find(function(R){return R.get("name")===h});k&&k.attr(b)}else n.attr((p={},p[h]=b,p))};for(var s in a)o(s)},updateLabel:function(r,t){var e=t.getContainer(),n=this.getOptions({}).labelCfg,a=this.itemType+xx,o=e.find(function(It){return It.get("className")===a}),s=this.itemType+$d,u=e.find(function(It){return It.get("classname")===s});if(r.label||r.label==="")if(o){var p={};t.getModel&&(p=t.getModel().labelCfg);var b=(0,y.deepMix)({},n,p,r.labelCfg),k=this.getLabelStyleByPosition(r,b,e),R=r.labelCfg?r.labelCfg.style:void 0,Y=b.style&&b.style.background,V=(0,he.__assign)((0,he.__assign)((0,he.__assign)({},o.attr()),k),R),Z=V.rotate;if(delete V.rotate,Z){var it=[1,0,0,0,1,0,0,0,1];it=no(it,[["t",-V.x,-V.y],["r",Z],["t",V.x,V.y]]),o.resetMatrix(),o.attr((0,he.__assign)((0,he.__assign)({},V),{matrix:it}))}else o.resetMatrix(),o.attr(V);if(!u)V.background&&(u=this.drawLabelBg(r,e,o),u.set("classname",s),o.toFront());else if(V.background){var tt=this.getLabelBgStyleByPosition(o,r,b,e),_t=(0,he.__assign)((0,he.__assign)({},tt),Y);u.resetMatrix(),Z&&u.rotateAtStart(Z),u.attr(_t)}else e.removeChild(u)}else{var h=this.drawLabel(r,e);h.set("className",a)}},afterUpdate:function(r,t){},setState:function(r,t,e){var n,a,o=e.get("keyShape");if(!!o){var s=e.getType(),u=(0,y.isBoolean)(t)?r:r+":"+t,h=this.getStateStyle(u,e),p=e.getStateStyle(u);if(!(!p&&!h)){var b=(0,y.mix)({},p||h),k=e.getContainer();if(t){var R=function(Be){var or,cr=b[Be];if((0,y.isPlainObject)(cr)&&!Af.includes(Be)){var ar=k.find(function(Cr){return Cr.get("name")===Be});ar&&ar.attr(cr)}else o.attr((or={},or[Be]=cr,or))};for(var Y in b)R(Y)}else{var V=(0,y.clone)(e.getCurrentStatesStyle()),Z=e.getModel(),it=(0,y.mix)({},Z.style,(0,y.clone)(e.getOriginStyle())),tt=o.get("name"),_t=o.attr(),It={},Ht=function(Be){var or=b[Be];if((0,y.isPlainObject)(or)&&!Af.includes(Be)){var cr=k.find(function(wr){return wr.get("name")===Be});if(cr){var ar=cr.attr();(0,y.each)(or,function(wr,Mr){(ar[Mr]||ar[Mr]===0)&&delete ar[Mr]}),It[Be]=ar}}else{var Cr={x:1,y:1,cx:1,cy:1};_t[Be]&&!Cr[Be]&&delete _t[Be]}};for(var le in b)Ht(le);tt?It[tt]=_t:(0,y.mix)(It,_t);for(var Y in V){var xe=V[Y];(!(0,y.isPlainObject)(xe)||Af.includes(Y))&&(tt?((0,y.mix)(it[tt],(a={},a[Y]=xe,a)),delete it[Y]):(0,y.mix)(it,(n={},n[Y]=xe,n)),delete V[Y])}var Ce={};(0,y.deepMix)(Ce,it,It,V);var me=function(Be){var or,cr,ar=Ce[Be];if((0,y.isPlainObject)(ar)&&!Af.includes(Be)){var Cr=k.find(function(wr){return wr.get("name")===Be});Cr&&Cr.attr(ar)}else s==="combo"?tt||o.attr((or={},or[Be]=ar,or)):o.attr((cr={},cr[Be]=ar,cr))};for(var Le in Ce)me(Le)}}}},getStateStyle:function(r,t){var e=t.getModel(),n=t.getType(),a=this.getOptions(e),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,h=e.stateStyles?e.stateStyles[r]:o&&o[r];return n==="combo"?(0,y.clone)(h):(0,y.mix)({},u,h)},getControlPoints:function(r){return r.controlPoints},getAnchorPoints:function(r){var t=this.getOptions(r).anchorPoints;return t}},IL={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:dr.nodeLabel.offset,getSize:function(r){var t=r.size||this.getOptions({}).size||dr.defaultNode.size;return(0,y.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,y.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:r.label};var n=t.offset;(0,y.isNil)(n)&&(n=this.offset);var a=this.getSize(r),o=a[0],s=a[1],u;switch(e){case"top":u={x:0,y:0-s/2-n,textBaseline:"bottom"};break;case"bottom":u={x:0,y:s/2+n,textBaseline:"top"};break;case"left":u={x:0-o/2-n,y:0,textAlign:"right"};break;default:u={x:o/2+n,y:0,textAlign:"left"};break}return u.text=r.label,u},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=md(o.padding),u=a.width+s[1]+s[3],h=a.height+s[0]+s[2],p=e.offset;(0,y.isNil)(p)&&(p=this.offset);var b;return b={x:a.minX-s[3],y:a.minY-s[0]},b=(0,he.__assign)((0,he.__assign)((0,he.__assign)({},b),o),{width:u,height:h}),b},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"node-shape"});return a},updateLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=t.find(function(xe){return xe.get("className")==="link-point-left"}),a=t.find(function(xe){return xe.get("className")==="link-point-right"}),o=t.find(function(xe){return xe.get("className")==="link-point-top"}),s=t.find(function(xe){return xe.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=e);var h=(0,y.mix)({},u,r.linkPoints),p=h.fill,b=h.stroke,k=h.lineWidth,R=h.size/2;R||(R=h.r);var Y=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},V=Y.left,Z=Y.right,it=Y.top,tt=Y.bottom,_t=this.getSize(r),It=_t[0],Ht=_t[1],le={r:R,fill:p,stroke:b,lineWidth:k};n?!V&&V!==void 0?n.remove():n.attr((0,he.__assign)((0,he.__assign)({},le),{x:-It/2,y:0})):V&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},le),{x:-It/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(!Z&&Z!==void 0&&a.remove(),a.attr((0,he.__assign)((0,he.__assign)({},le),{x:It/2,y:0}))):Z&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},le),{x:It/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),o?(!it&&it!==void 0&&o.remove(),o.attr((0,he.__assign)((0,he.__assign)({},le),{x:0,y:-Ht/2}))):it&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},le),{x:0,y:-Ht/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?!tt&&tt!==void 0?s.remove():s.attr((0,he.__assign)((0,he.__assign)({},le),{x:0,y:Ht/2})):tt&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},le),{x:0,y:Ht/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(r,t,e,n){var a=t.get("keyShape");a.attr((0,he.__assign)({},e)),this.updateLabel(r,t),n&&this.updateIcon(r,t)},updateIcon:function(r,t){var e=this,n=t.getContainer(),a=this.getOptions(r).icon,o=(r.icon?r.icon:{show:void 0}).show,s=n.find(function(k){return k.get("className")===e.type+"-icon"});if(s)if(o||o===void 0){var u=(0,y.mix)({},s.attr(),a),h=u.width,p=u.height;s.attr((0,he.__assign)((0,he.__assign)({},u),{x:-h/2,y:-p/2}))}else s.remove();else if(o){var h=a.width,p=a.height;n.addShape("image",{attrs:(0,he.__assign)((0,he.__assign)({},a),{x:-h/2,y:-p/2}),className:this.type+"-icon",name:this.type+"-icon"});var b=n.find(function(Y){return Y.get("className")==="node-label"});b&&b.toFront()}}},OL=(0,he.__assign)((0,he.__assign)({},Qd),IL);Pi.registerNode("single-node",OL);var Tf="edge-shape";function kL(i){var r=i;return i==="start"?r="end":i==="end"&&(r="start"),r}var BL={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:dr.defaultEdge.size,style:{x:0,y:0,stroke:dr.defaultEdge.style.stroke,lineAppendWidth:dr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:dr.edgeLabel.style.fill,fontSize:dr.edgeLabel.style.fontSize}},stateStyles:(0,he.__assign)({},dr.edgeStateStyles)},getPath:function(r){var t=[];return(0,y.each)(r,function(e,n){n===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,y.mix)({},t,e,r.style),a=r.size||dr.defaultEdge.size;r=this.getPathPoints(r);var o=r.startPoint,s=r.endPoint,u=this.getControlPoints(r),h=[o];u&&(h=h.concat(u)),h.push(s);var p=this.getPath(h),b=(0,y.mix)({},dr.defaultEdge.style,{stroke:dr.defaultEdge.color,lineWidth:a,path:p},n);return b},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(it){return it.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,u=r.endPoint,h=this.getControlPoints(r),p=[s];h&&(p=p.concat(h)),p.push(u);var b=(0,y.mix)({},n,a.attr(),r.style),k=r.sourceNode,R=r.targetNode,Y={radius:b.radius};h||(Y={source:k,target:R,offset:b.offset,radius:b.radius});var V=this.getPath(p,Y),Z=(0,y.mix)(n,a.attr(),{lineWidth:o,path:V},r.style);a&&a.attr(Z)},getLabelStyleByPosition:function(r,t,e){var n=t.position||this.labelPosition,a={},o=e&&e.find(function(k){return k.get("className")===Tf}),s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,h=t.refY||this.refY;if(r.startPoint.x===r.endPoint.x&&r.startPoint.y===r.endPoint.y)return a.x=r.startPoint.x+u,a.y=r.startPoint.y+h,a.text=r.label,a;var p=(0,y.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate,b=af(o,s,u,h,p);return a.x=b.x,a.y=b.y,a.rotate=b.rotate,a.textAlign=this._getTextAlign(n,b.angle),a.text=r.label,a},getLabelBgStyleByPosition:function(r,t,e,n){if(!r)return{};var a=r.getBBox(),o=e.style&&e.style.background;if(!o)return{};var s=o.padding,u=a.width+s[1]+s[3],h=a.height+s[0]+s[2],p=e.position||this.labelPosition,b=(0,he.__assign)((0,he.__assign)({},o),{width:u,height:h,x:a.minX-s[2],y:a.minY-s[0],rotate:0}),k=(0,y.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,R=n&&n.find(function(_t){return _t.get("className")===Tf}),Y;p==="start"?Y=0:p==="end"?Y=1:Y=.5;var V=e.refX||this.refX,Z=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return b.x=t.startPoint.x+V,b.y=t.startPoint.y+Z,b;var it=af(R,Y,V-u/2,Z+h/2,k),tt=it.angle;return tt>1/2*Math.PI&&tt<3*1/2*Math.PI&&(it=af(R,Y,V+u/2,Z+h/2,k)),k&&(b.x=it.x,b.y=it.y),b.rotate=it.rotate,b},_getTextAlign:function(r,t){var e="center";return t?(t=t%(Math.PI*2),r!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?e=r:e=kL(r)),e):r},getControlPoints:function(r){return r.controlPoints},getPathPoints:function(r){return r},drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("path",{className:Tf,name:Tf,attrs:e});return n},drawLabel:function(r,t){var e=this.options.labelCfg,n=(0,y.deepMix)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},e,r.labelCfg),a=this.getLabelStyle(r,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape"});if(o&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(r,t,s),h=this.itemType+$d;u.set("classname",h),s.toFront()}return s},drawLabelBg:function(r,t,e){var n=this.options.labelCfg,a=(0,y.deepMix)({},n,r.labelCfg),o=this.getLabelStyle(r,a,t),s=o.rotate,u=this.getLabelBgStyleByPosition(e,r,a,t);delete u.rotate;var h=t.addShape("rect",{name:"text-bg-shape",attrs:u});return s&&h.rotateAtStart(s),h}},DL=(0,he.__assign)((0,he.__assign)({},Qd),BL);Pi.registerEdge("single-edge",DL),Pi.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Pi.registerEdge("spline",{getPath:function(r){var t=nm(r);return t}},"single-edge"),Pi.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(r){var t=r.startPoint,e=r.endPoint,n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},a,o;if(r.controlPoints!==void 0){if(o=r.controlPoints[0],a=Sd(t,o,e),t.x<=e.x&&t.y>e.y?this.clockwise=a.x>o.x?0:1:t.x<=e.x&&t.y<e.y?this.clockwise=a.x>o.x?1:0:t.x>e.x&&t.y<=e.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)==(e.x-t.x)/(e.y-t.y))return[]}else{r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),(0,Zi.default)(r.curveOffset)&&(r.curveOffset=r.curveOffset[0]),r.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:e.x-t.x,y:e.y-t.y},u=Math.atan2(s.y,s.x);o={x:r.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:r.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Sd(t,o,e)}var h=Bl(t,a),p=[{x:h,y:h}];return p},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),r.length===2?t.push(["L",r[1].x,r[1].y]):t.push(["A",r[1].x,r[1].y,0,0,this.clockwise,r[2].x,r[2].y]),t}},"single-edge"),Pi.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(r){var t=r.controlPoints;if(!t||!t.length){var e=r.startPoint,n=r.endPoint;r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,Zi.default)(this.curveOffset)&&(r.curveOffset=r.curveOffset[0]),(0,Zi.default)(this.curvePosition)&&(r.curvePosition=r.curveOffset[0]);var a=tf(e,n,r.curvePosition,r.curveOffset);t=[a]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["Q",r[1].x,r[1].y,r[2].x,r[2].y]),t}},"single-edge"),Pi.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(r){var t=r.controlPoints;if(r.curveOffset===void 0&&(r.curveOffset=this.curveOffset),r.curvePosition===void 0&&(r.curvePosition=this.curvePosition),(0,Ra.default)(r.curveOffset)&&(r.curveOffset=[r.curveOffset,-r.curveOffset]),(0,Ra.default)(r.curvePosition)&&(r.curvePosition=[r.curvePosition,1-r.curvePosition]),!t||!t.length||t.length<2){var e=r.startPoint,n=r.endPoint,a=tf(e,n,r.curvePosition[0],r.curveOffset[0]),o=tf(e,n,r.curvePosition[1],r.curveOffset[1]);t=[a,o]}return t},getPath:function(r){var t=[];return t.push(["M",r[0].x,r[0].y]),t.push(["C",r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y]),t}},"single-edge"),Pi.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,Ra.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:t.x,y:(e.y-t.y)*this.curvePosition[0]+t.y},a={x:e.x,y:(e.y-t.y)*this.curvePosition[1]+t.y},o=[n,a];return o}},"cubic"),Pi.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],getControlPoints:function(r){var t=r.startPoint,e=r.endPoint;r.curvePosition!==void 0&&(this.curvePosition=r.curvePosition),(0,Ra.default)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]);var n={x:(e.x-t.x)*this.curvePosition[0]+t.x,y:t.y},a={x:(e.x-t.x)*this.curvePosition[1]+t.x,y:e.y},o=[n,a];return o}},"cubic"),Pi.registerEdge("loop",{getPathPoints:function(r){return xm(r)},getControlPoints:function(r){return r.controlPoints},afterDraw:function(r){r.controlPoints=void 0},afterUpdate:function(r){r.controlPoints=void 0}},"cubic");var FL={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:dr.comboLabel.refX,refY:dr.comboLabel.refY,options:{style:{stroke:dr.defaultCombo.style.stroke,fill:dr.defaultCombo.style.fill,lineWidth:dr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dr.comboLabel.style.fill,fontSize:dr.comboLabel.style.fontSize}},stateStyles:(0,he.__assign)({},dr.comboStateStyles)},getSize:function(r){var t=(0,y.clone)(r.size||this.options.size||dr.defaultCombo.size);return(0,y.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,y.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,y.isArray)(a)&&(a=a[0]);var o=t.refX,s=t.refY;(0,y.isNil)(o)&&(o=this.refX),(0,y.isNil)(s)&&(s=this.refY);var u=this.getSize(r),h=Math.max(n.r,u[0]/2)||u[0]/2,p=h+a,b;switch(e){case"top":b={x:0,y:-p-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":b={x:0,y:p+s,textBaseline:"bottom",textAlign:"center"};break;case"left":b={x:-p+o,y:0,textAlign:"left"};break;case"center":b={x:0,y:0,text:r.label,textAlign:"center"};break;default:b={x:p+o,y:0,textAlign:"right"};break}return b.text=r.label,b},drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r),a=t.addShape(e,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,he.__assign)({},e)),this.updateLabel(r,t)}},RL=(0,he.__assign)((0,he.__assign)({},Qd),FL);Pi.registerCombo("single-combo",RL),Pi.registerCombo("circle",{options:{size:[dr.defaultCombo.size[0],dr.defaultCombo.size[0]],padding:dr.defaultCombo.padding[0],animate:!0,style:{stroke:dr.defaultCombo.style.stroke,fill:dr.defaultCombo.style.fill,lineWidth:dr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dr.comboLabel.style.fill,fontSize:dr.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,he.__assign)({},dr.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r);delete e.height,delete e.width;var n=t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,y.isArray)(e)&&(e=e[0]);var n={stroke:r.color},a=(0,y.mix)({},t,n,r.style),o=this.getSize(r),s;!(0,y.isNumber)(a.r)||isNaN(a.r)?s=o[0]/2||dr.defaultCombo.style.r:s=Math.max(a.r,o[0]/2)||o[0]/2,a.r=s+e;var u=(0,he.__assign)({x:0,y:0},a);return r.style?r.style.r=s:r.style={r:s},u},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,y.isArray)(n)&&(n=n[0]);var a=(0,y.clone)(r.style),o=Math.max(a.r,e[0]/2)||e[0]/2;a.r=o+n;var s=t.get("sizeCache");s&&(s.r=a.r);var u={stroke:r.color},h=t.get("keyShape"),p=(0,y.mix)({},h.attr(),u,a);r.style?r.style.r=o:r.style={r:o},this.updateShape(r,t,p,!0)}},"single-combo"),Pi.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:dr.defaultCombo.style.stroke,fill:dr.defaultCombo.style.fill,lineWidth:dr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dr.comboLabel.style.fill,fontSize:dr.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,he.__assign)({},dr.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(r,t){var e=t.position||this.labelPosition,n=r.style,a=r.padding||this.options.padding;(0,y.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,y.isNil)(o)&&(o=this.refX),(0,y.isNil)(s)&&(s=this.refY);var u=n.width/2+a[3],h=n.height/2+a[0],p;switch(e){case"top":p={x:0-u+o,y:0-h+s,textBaseline:"top",textAlign:"left"};break;case"bottom":p={x:0,y:h+s,textBaseline:"bottom",textAlign:"center"};break;case"left":p={x:0-u+s,y:0,textAlign:"left"};break;case"center":p={x:0,y:0,text:r.label,textAlign:"center"};break;default:p={x:u+o,y:0,textAlign:"right"};break}return p.text=r.label,p},getShapeStyle:function(r){var t=this.options.style,e=r.padding||this.options.padding;(0,y.isNumber)(e)&&(e=[e,e,e,e]);var n={stroke:r.color},a=(0,y.mix)({},t,n,r.style),o=this.getSize(r),s,u;!(0,y.isNumber)(a.width)||isNaN(a.width)?s=o[0]||dr.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,y.isNumber)(a.height)||isNaN(a.height)?u=o[1]||dr.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1];var h=-s/2-e[3],p=-u/2-e[0];a.width=s+e[1]+e[3],a.height=u+e[0]+e[2];var b=(0,he.__assign)({x:h,y:p},a);return r.style?(r.style.width=s,r.style.height=u):r.style={width:s,height:u},b},update:function(r,t){var e=this.getSize(r),n=r.padding||this.options.padding;(0,y.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,y.clone)(r.style),o=Math.max(a.width,e[0])||e[0],s=Math.max(a.height,e[1])||e[1];a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var u=t.get("sizeCache");u&&(u.width=a.width,u.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var h={stroke:r.color},p=t.get("keyShape"),b=(0,y.mix)({},p.attr(),h,a);r.style?(r.style.width=o,r.style.height=s):r.style={width:o,height:s},this.updateShape(r,t,b,!1)},updateShape:function(r,t,e){var n=t.get("keyShape"),a=r.animate===void 0?this.options.animate:r.animate;a&&n.animate?n.animate(e,{duration:200,easing:"easeLinear"}):n.attr((0,he.__assign)({},e)),this.updateLabel(r,t)}},"single-combo"),Pi.registerNode("circle",{options:{size:dr.defaultNode.size,style:{x:0,y:0,stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=(0,Ki.default)({},n,r.icon),s=t.addShape("circle",{attrs:a,className:this.type+"-keyShape",draggable:!0}),u=o.width,h=o.height,p=o.show;return p&&t.addShape("image",{attrs:(0,he.__assign)({x:-u/2,y:-h/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(r,t),s},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.bottom,h=n.size,p=n.r,b=(0,he.__rest)(n,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0]/2;o&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:-R,y:0,r:h/2||p||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R,y:0,r:h/2||p||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:-R,r:h/2||p||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:R,r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,Ki.default)({},t,e),a=this.getSize(r),o=a[0]/2,s=(0,he.__assign)({x:0,y:0,r:o},n);return s},update:function(r,t){var e=t.getContainer(),n=this.getSize(r),a={stroke:r.color,r:n[0]/2},o=t.get("keyShape"),s=(0,Ki.default)({},o.attr(),a,r.style);this.updateShape(r,t,s,!0),this.updateLinkPoints(r,e)}},"single-node"),Pi.registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r),n=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(r,t),n},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.bottom,h=n.size,p=n.r,b=(0,he.__rest)(n,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0],Y=k[1];o&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:-R/2,y:0,r:h/2||p||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R/2,y:0,r:h/2||p||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:-Y/2,r:h/2||p||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:Y/2,r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],s=n.height||a[1],u=(0,he.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o=t.get("keyShape");r.size||(a[0]=o.attr("width")||n.width,a[1]=o.attr("height")||n.height);var s={stroke:r.color,x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]},u=(0,y.mix)({},n,o.attr(),s);u=(0,y.mix)(u,r.style),this.updateShape(r,t,u,!1),this.updateLinkPoints(r,e)}},"single-node"),Pi.registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=n.width,u=n.height,h=n.show;if(h)var p=t.addShape("image",{attrs:(0,he.__assign)({x:-s/2,y:-u/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.bottom,h=n.size,p=n.r,b=(0,he.__rest)(n,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0]/2,Y=k[1]/2;o&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:-R,y:0,r:h/2||p||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R,y:0,r:h/2||p||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:-Y,r:h/2||p||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:Y,r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getSize(r),o=a[0]/2,s=a[1]/2,u=(0,he.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getSize(r),o={stroke:r.color,rx:a[0]/2,ry:a[1]/2},s=t.get("keyShape"),u=(0,y.mix)({},n,s.attr(),o);u=(0,y.mix)(u,r.style),this.updateShape(r,t,u,!0),this.updateLinkPoints(r,e)}},"single-node"),Pi.registerNode("diamond",{options:{size:[80,80],style:{stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=n.width,u=n.height,h=n.show;if(h)var p=t.addShape("image",{attrs:(0,he.__assign)({x:-s/2,y:-u/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.bottom,h=n.size,p=n.r,b=(0,he.__rest)(n,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0],Y=k[1];o&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:-R/2,y:0,r:h/2||p||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R/2,y:0,r:h/2||p||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:-Y/2,r:h/2||p||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:Y/2,r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(r){var t=this.getSize(r),e=t[0],n=t[1],a=[["M",0,-n/2],["L",e/2,0],["L",0,n/2],["L",-e/2,0],["Z"]];return a},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getPath(r),o=(0,he.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),u=(0,y.mix)({},n,s.attr(),o);u=(0,y.mix)(u,r.style),this.updateShape(r,t,u,!0),this.updateLinkPoints(r,e)}},"single-node"),Pi.registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(r,t){var e=this.getOptions(r),n=e.icon,a=n===void 0?{}:n,o=e.direction,s=this.getShapeStyle(r),u=r.direction||o,h=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),p=a.width,b=a.height,k=a.show,R=a.offset;if(k){var Y=-p/2,V=-b/2;(u==="up"||u==="down")&&(V+=R),(u==="left"||u==="right")&&(Y+=R),t.addShape("image",{attrs:(0,he.__assign)({x:Y,y:V},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(r,t),h},drawLinkPoints:function(r,t){var e=this.getOptions(r),n=e.linkPoints,a=n===void 0?{}:n,o=e.direction,s=r.direction||o,u=a.top,h=a.left,p=a.right,b=a.bottom,k=a.size,R=a.r,Y=(0,he.__rest)(a,["top","left","right","bottom","size","r"]),V=this.getSize(r),Z=V[0];if(h){var it=null,tt=Z*Math.sin(1/3*Math.PI),_t=Z*Math.sin(1/3*Math.PI);s==="up"?it=[-_t,tt]:s==="down"?it=[-_t,-tt]:s==="left"&&(it=[-_t,_t-tt]),it&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Y),{x:it[0],y:it[1],r:k/2||R||5}),className:"link-point-left",name:"link-point-left"})}if(p){var It=null,tt=Z*Math.sin(1/3*Math.PI),_t=Z*Math.sin(1/3*Math.PI);s==="up"?It=[_t,tt]:s==="down"?It=[_t,-tt]:s==="right"&&(It=[_t,_t-tt]),It&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Y),{x:It[0],y:It[1],r:k/2||R||5}),className:"link-point-right",name:"link-point-right"})}if(u){var Ht=null,tt=Z*Math.sin(1/3*Math.PI),_t=Z*Math.sin(1/3*Math.PI);s==="up"?Ht=[_t-tt,-tt]:s==="left"?Ht=[_t,-tt]:s==="right"&&(Ht=[-_t,-tt]),Ht&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Y),{x:Ht[0],y:Ht[1],r:k/2||R||5}),className:"link-point-top",name:"link-point-top"})}if(b){var le=null,tt=Z*Math.sin(1/3*Math.PI),_t=Z*Math.sin(1/3*Math.PI);s==="down"?le=[-_t+tt,tt]:s==="left"?le=[_t,tt]:s==="right"&&(le=[-_t,tt]),le&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Y),{x:le[0],y:le[1],r:k/2||R||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(r){var t=this.getOptions(r).direction,e=r.direction||t,n=this.getSize(r),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return e==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:e==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:e==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getPath(r),o=(0,he.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),u=(0,y.mix)({},n,s.attr(),o);u=(0,y.mix)(u,r.style),this.updateShape(r,t,u,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}),n=e.linkPoints,a=e.direction,o=r.direction||a,s=t.find(function(Cr){return Cr.get("className")==="link-point-left"}),u=t.find(function(Cr){return Cr.get("className")==="link-point-right"}),h=t.find(function(Cr){return Cr.get("className")==="link-point-top"}),p=t.find(function(Cr){return Cr.get("className")==="link-point-bottom"}),b=n,k=s||u||h||p;k&&(b=k.attr());var R=(0,y.mix)({},b,r.linkPoints),Y=R.fill,V=R.stroke,Z=R.lineWidth,it=R.size/2;it||(it=R.r);var tt=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},_t=tt.left,It=tt.right,Ht=tt.top,le=tt.bottom,xe=this.getSize(r),Ce=xe[0],me={r:it,fill:Y,stroke:V,lineWidth:Z},Le=null,Ye=Ce*Math.sin(1/3*Math.PI),Be=Ce*Math.sin(1/3*Math.PI);o==="up"?Le=[-Be,Ye]:o==="down"?Le=[-Be,-Ye]:o==="left"&&(Le=[-Be,Be-Ye]),Le&&(s?!_t&&_t!==void 0?s.remove():s.attr((0,he.__assign)((0,he.__assign)({},me),{x:Le[0],y:Le[1]})):_t&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},me),{x:Le[0],y:Le[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var or=null;o==="up"?or=[Be,Ye]:o==="down"?or=[Be,-Ye]:o==="right"&&(or=[Be,Be-Ye]),or&&(u?!It&&It!==void 0?u.remove():u.attr((0,he.__assign)((0,he.__assign)({},me),{x:or[0],y:or[1]})):It&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},me),{x:or[0],y:or[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var cr=null;o==="up"?cr=[Be-Ye,-Ye]:o==="left"?cr=[Be,-Ye]:o==="right"&&(cr=[-Be,-Ye]),cr&&(h?!Ht&&Ht!==void 0?h.remove():h.attr((0,he.__assign)((0,he.__assign)({},me),{x:cr[0],y:cr[1]})):Ht&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},me),{x:cr[0],y:cr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var ar=null;o==="down"?ar=[-Be+Ye,Ye]:o==="left"?ar=[Be,Ye]:o==="right"&&(ar=[-Be,Ye]),ar&&(p?!le&&le!==void 0?p.remove():p.attr((0,he.__assign)((0,he.__assign)({},me),{x:ar[0],y:ar[1]})):le&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},me),{x:ar[0],y:ar[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Pi.registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:dr.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(r,t){var e=this.getOptions(r).preRect,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=this.getSize(r),s=o[0],u=o[1],h=t.addShape("rect",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),p=n.show,b=(0,he.__rest)(n,["show"]);return p&&t.addShape("rect",{attrs:(0,he.__assign)({x:-s/2,y:-u/2,height:u},b),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(r,t),this.drawStateIcon(r,t),this.drawLinkPoints(r,t),h},drawLogoIcon:function(r,t){var e=this.getOptions(r).logoIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var s=n.width,u=n.height,h=n.x,p=n.y,b=n.offset,k=(0,he.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:h||-o/2+s+b,y:p||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(r,t){var e=this.getOptions(r).stateIcon,n=e===void 0?{}:e,a=this.getSize(r),o=a[0];if(n.show){var s=n.width,u=n.height,h=n.x,p=n.y,b=n.offset,k=(0,he.__rest)(n,["width","height","x","y","offset"]);t.addShape("image",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:h||o/2-s+b,y:p||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.bottom,h=n.size,p=n.r,b=(0,he.__rest)(n,["top","left","right","bottom","size","r"]),k=this.getSize(r),R=k[0],Y=k[1];o&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:-R/2,y:0,r:h/2||p||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:R/2,y:0,r:h/2||p||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:-Y/2,r:h/2||p||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},b),{x:0,y:Y/2,r:h/2||p||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(r,t){var e=this.getOptions(r),n=e.labelCfg,a=n===void 0?{}:n,o=e.logoIcon,s=o===void 0?{}:o,u=e.descriptionCfg,h=u===void 0?{}:u,p=this.getSize(r),b=p[0],k=null,R=s.show,Y=s.width,V=-b/2+a.offset;R&&(V=-b/2+Y+a.offset);var Z=a.style,it=h.style,tt=h.paddingTop;return(0,y.isString)(r.description)?(k=t.addShape("text",{attrs:(0,he.__assign)((0,he.__assign)({},Z),{x:V,y:-5,text:r.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:(0,he.__assign)((0,he.__assign)({},it),{x:V,y:17+(tt||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0})):k=t.addShape("text",{attrs:(0,he.__assign)((0,he.__assign)({},Z),{x:V,y:7,text:r.label}),draggable:!0}),k},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getSize(r),o=n.width||a[0],s=n.height||a[1],u=(0,he.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(r,t){var e=this.getOptions(r),n=e.style,a=n===void 0?{}:n,o=e.labelCfg,s=o===void 0?{}:o,u=e.descriptionCfg,h=u===void 0?{}:u,p=this.getSize(r),b=p[0],k=p[1],R=t.get("keyShape");R.attr((0,he.__assign)((0,he.__assign)({},a),{x:-b/2,y:-k/2,width:b,height:k}));var Y=t.getContainer(),V=Y.find(function(ln){return ln.get("className")==="rect-logo-icon"}),Z=V?V.attr():{},it=(0,y.mix)({},Z,r.logoIcon),tt=it.width;tt===void 0&&(tt=this.options.logoIcon.width);var _t=r.logoIcon?r.logoIcon.show:void 0,It=s.offset,Ht=-b/2+tt+It;!_t&&_t!==void 0&&(Ht=-b/2+It);var le=Y.find(function(ln){return ln.get("className")==="node-label"}),xe=Y.find(function(ln){return ln.get("className")==="rect-description"});if(r.label)if(!le)Y.addShape("text",{attrs:(0,he.__assign)((0,he.__assign)({},s.style),{x:Ht,y:r.description?-5:7,text:r.label}),className:"node-label",name:"node-label",draggable:!0});else{var Ce=r.labelCfg?r.labelCfg.style:{},me=(0,y.mix)({},le.attr(),Ce);r.label&&(me.text=r.label),me.x=Ht,(0,y.isString)(r.description)&&(me.y=-5),xe&&(xe.resetMatrix(),xe.attr({x:Ht})),le.resetMatrix(),le.attr(me)}if((0,y.isString)(r.description)){var Le=h.paddingTop;if(!xe)Y.addShape("text",{attrs:(0,he.__assign)((0,he.__assign)({},h.style),{x:Ht,y:17+(Le||0),text:r.description}),className:"rect-description",name:"rect-description",draggable:!0});else{var Ce=r.descriptionCfg?r.descriptionCfg.style:{},Ye=(0,y.mix)({},xe.attr(),Ce);(0,y.isString)(r.description)&&(Ye.text=r.description),Ye.x=Ht,xe.resetMatrix(),xe.attr((0,he.__assign)((0,he.__assign)({},Ye),{y:17+(Le||0)}))}}var Be=Y.find(function(ln){return ln.get("className")==="pre-rect"});if(Be){var or=(0,y.mix)({},Be.attr(),r.preRect);Be.attr((0,he.__assign)((0,he.__assign)({},or),{x:-b/2,y:-k/2,height:k}))}if(V)if(!_t&&_t!==void 0)V.remove();else{var cr=it.width,ar=it.height,Cr=it.x,wr=it.y,Mr=it.offset,yr=(0,he.__rest)(it,["width","height","x","y","offset"]);V.attr((0,he.__assign)((0,he.__assign)({},yr),{x:Cr||-b/2+cr+Mr,y:wr||-ar/2,width:cr,height:ar}))}else _t&&this.drawLogoIcon(r,Y);var mr=Y.find(function(ln){return ln.get("className")==="rect-state-icon"}),zr=mr?mr.attr():{},Ur=(0,y.mix)({},zr,r.stateIcon);if(mr){!Ur.show&&Ur.show!==void 0&&mr.remove();var Xr=Ur.width,ar=Ur.height,Cr=Ur.x,wr=Ur.y,Er=Ur.offset,Zr=(0,he.__rest)(Ur,["width","height","x","y","offset"]);mr.attr((0,he.__assign)((0,he.__assign)({},Zr),{x:Cr||b/2-Xr+Er,y:wr||-ar/2,width:Xr,height:ar}))}else Ur.show&&this.drawStateIcon(r,Y);this.updateLinkPoints(r,Y)}},"single-node"),Pi.registerNode("star",{options:{size:60,style:{stroke:dr.defaultNode.style.stroke,fill:dr.defaultNode.style.fill,lineWidth:dr.defaultNode.style.lineWidth},labelCfg:{style:{fill:dr.nodeLabel.style.fill,fontSize:dr.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:dr.defaultNode.linkPoints.size,lineWidth:dr.defaultNode.linkPoints.lineWidth,fill:dr.defaultNode.linkPoints.fill,stroke:dr.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,he.__assign)({},dr.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(r,t){var e=this.getOptions(r).icon,n=e===void 0?{}:e,a=this.getShapeStyle(r),o=t.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=n.width,u=n.height,h=n.show;if(h)var p=t.addShape("image",{attrs:(0,he.__assign)({x:-s/2,y:-u/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(r,t),o},drawLinkPoints:function(r,t){var e=this.getOptions(r).linkPoints,n=e===void 0?{}:e,a=n.top,o=n.left,s=n.right,u=n.leftBottom,h=n.rightBottom,p=n.size,b=n.r,k=(0,he.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),R=this.getSize(r),Y=R[0];if(s){var V=Math.cos((18+72*0)/180*Math.PI)*Y,Z=Math.sin((18+72*0)/180*Math.PI)*Y;t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:V,y:-Z,r:p/2||b||5}),className:"link-point-right",name:"link-point-right"})}if(a){var V=Math.cos((18+72*1)/180*Math.PI)*Y,Z=Math.sin((18+72*1)/180*Math.PI)*Y;t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:V,y:-Z,r:p/2||b||5}),className:"link-point-top",name:"link-point-top"})}if(o){var V=Math.cos((18+72*2)/180*Math.PI)*Y,Z=Math.sin((18+72*2)/180*Math.PI)*Y;t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:V,y:-Z,r:p/2||b||5}),className:"link-point-left",name:"link-point-left"})}if(u){var V=Math.cos((18+72*3)/180*Math.PI)*Y,Z=Math.sin((18+72*3)/180*Math.PI)*Y;t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:V,y:-Z,r:p/2||b||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(h){var V=Math.cos((18+72*4)/180*Math.PI)*Y,Z=Math.sin((18+72*4)/180*Math.PI)*Y;t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},k),{x:V,y:-Z,r:p/2||b||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(r){for(var t=this.getSize(r),e=t[0],n=e*3/8,a=r.innerR||n,o=[],s=0;s<5;s++){var u=Math.cos((18+72*s)/180*Math.PI)*e,h=Math.sin((18+72*s)/180*Math.PI)*e,p=Math.cos((54+72*s)/180*Math.PI)*a,b=Math.sin((54+72*s)/180*Math.PI)*a;s===0?o.push(["M",u,-h]):o.push(["L",u,-h]),o.push(["L",p,-b])}return o.push(["Z"]),o},getShapeStyle:function(r){var t=this.getOptions(r).style,e={stroke:r.color},n=(0,y.mix)({},t,e),a=this.getPath(r),o=(0,he.__assign)({path:a},n);return o},update:function(r,t){var e=t.getContainer(),n=this.getOptions({}).style,a=this.getPath(r),o={stroke:r.color,path:a},s=t.get("keyShape"),u=(0,y.mix)({},n,s.attr(),o);u=(0,y.mix)(u,r.style),this.updateShape(r,t,u,!0),this.updateLinkPoints(r,e)},updateLinkPoints:function(r,t){var e=this.getOptions({}).linkPoints,n=t.find(function(Ye){return Ye.get("className")==="link-point-left"}),a=t.find(function(Ye){return Ye.get("className")==="link-point-right"}),o=t.find(function(Ye){return Ye.get("className")==="link-point-top"}),s=t.find(function(Ye){return Ye.get("className")==="link-point-left-bottom"}),u=t.find(function(Ye){return Ye.get("className")==="link-point-right-bottom"}),h=e,p=n||a||o||s||u;p&&(h=p.attr());var b=(0,y.mix)({},h,r.linkPoints),k=b.fill,R=b.stroke,Y=b.lineWidth,V=b.size/2;V||(V=b.r);var Z=r.linkPoints?r.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},it=Z.left,tt=Z.right,_t=Z.top,It=Z.leftBottom,Ht=Z.rightBottom,le=this.getSize(r),xe=le[0],Ce={r:V,fill:k,stroke:R,lineWidth:Y},me=Math.cos((18+72*0)/180*Math.PI)*xe,Le=Math.sin((18+72*0)/180*Math.PI)*xe;a?!tt&&tt!==void 0?a.remove():a.attr((0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le})):tt&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),me=Math.cos((18+72*1)/180*Math.PI)*xe,Le=Math.sin((18+72*1)/180*Math.PI)*xe,o?!_t&&_t!==void 0?o.remove():o.attr((0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le})):_t&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),me=Math.cos((18+72*2)/180*Math.PI)*xe,Le=Math.sin((18+72*2)/180*Math.PI)*xe,n?!it&&it!==void 0?n.remove():n.attr((0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le})):it&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),me=Math.cos((18+72*3)/180*Math.PI)*xe,Le=Math.sin((18+72*3)/180*Math.PI)*xe,s?!It&&It!==void 0?s.remove():s.attr((0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le})):It&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),me=Math.cos((18+72*4)/180*Math.PI)*xe,Le=Math.sin((18+72*4)/180*Math.PI)*xe,u?!Ht&&Ht!==void 0?s.remove():u.attr((0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le})):Ht&&t.addShape("circle",{attrs:(0,he.__assign)((0,he.__assign)({},Ce),{x:me,y:-Le}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node"),Pi.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(r,t){var e=this.shapeType,n=this.getShapeStyle(r);delete n.fill;var a=t.addShape(e,{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(r,a),a},drawClip:function(r,t){var e=this.getOptions(r).clipCfg;if(!!e.show){var n=e.type,a=e.x,o=e.y,s=e.style;if(n==="circle"){var u=e.r;t.setClip({type:"circle",attrs:(0,he.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var h=e.width,p=e.height,b=a-h/2,k=o-p/2;t.setClip({type:"rect",attrs:(0,he.__assign)({x:b,y:k,width:h,height:p},s)})}else if(n==="ellipse"){var R=e.rx,Y=e.ry;t.setClip({type:"ellipse",attrs:(0,he.__assign)({x:a,y:o,rx:R,ry:Y},s)})}else if(n==="polygon"){var V=e.points;t.setClip({type:"polygon",attrs:(0,he.__assign)({points:V},s)})}else if(n==="path"){var Z=e.path;t.setClip({type:"path",attrs:(0,he.__assign)({path:Z},s)})}}},getShapeStyle:function(r){var t=this.getOptions(r).style,e=this.getSize(r),n=this.getOptions(r).img,a=e[0],o=e[1];t&&(a=t.width||e[0],o=t.height||e[1]);var s=(0,he.__assign)({x:-a/2,y:-o/2,width:a,height:o,img:n},t);return s},updateShapeStyle:function(r,t){var e=t.getContainer(),n=this.itemType+"-shape",a=e.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(r);a&&a.attr(o)}},"single-node");function Pf(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pf=function(t){return typeof t}:Pf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(i)}var Lf=function(r){var t=r.x,e=r.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},NL=function(r){r===void 0&&(r=[]);var t=[],e=[];r.forEach(function(u){t.push(u.x),e.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,e),s=Math.max.apply(Math,e);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},bx=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},Jd=function(r){var t=[],e={};return r.forEach(function(n){var a=n.x+"-"+n.y;n.id=a,e[a]=n}),(0,y.each)(e,function(n){t.push(n)}),t},_f=function(r){return r=Jd(r),r},wx=function(r,t){return[r,{x:r.x,y:t.y},t]},If=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},YL=function(r,t){var e=Math.abs(r.x-t.centerX),n=Math.abs(r.y-t.centerY);return e/t.width>n/t.height},qd=function(r,t){var e=YL(t,r);return e?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},tp=function(r,t){var e=Math.min(r.minX,t.minX),n=Math.min(r.minY,t.minY),a=Math.max(r.maxX,t.maxX),o=Math.max(r.maxY,t.maxY);return{centerX:(e+a)/2,centerY:(n+o)/2,minX:e,minY:n,maxX:a,maxY:o,height:o-n,width:a-e}},ep=function(r){var t=r.minX,e=r.minY,n=r.maxX,a=r.maxY;return[{x:t,y:e},{x:n,y:e},{x:n,y:a},{x:t,y:a}]},Of=function(r,t){var e=r.x,n=r.y;return e<t.minX||e>t.maxX||n<t.minY||n>t.maxY},GL=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},zL=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},XL=function(r,t){return GL(r,t.x).concat(zL(r,t.y))},Vl=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},HL=function(r,t){var e=-2,n=0;return t.forEach(function(a){a&&(r.x===a.x&&(n+=e),r.y===a.y&&(n+=e))}),n},Sx=function(r,t,e,n,a){return Vl(r,t)+Vl(r,e)+HL(r,[t,e,n,a])},VL=function i(r,t,e,n,a){a===void 0&&(a=0),r.unshift(t[n]),e[n]&&e[n]!==n&&a<=100&&i(r,t,e,e[n],a+1)},WL=function(r,t){var e=r.indexOf(t);e>-1&&r.splice(e,1)},kf=function(r,t,e,n){var a=t.x-r.x,o=t.y-r.y,s=n.x-e.x,u=n.y-e.y,h=(-o*(r.x-e.x)+a*(r.y-e.y))/(-s*o+a*u),p=(s*(r.y-e.y)-u*(r.x-e.x))/(-s*o+a*u);return h>=0&&h<=1&&p>=0&&p<=1},rp=function(r,t,e){if(e.width===0&&e.height===0)return!1;var n=ep(e),a=n[0],o=n[1],s=n[2],u=n[3];return kf(r,t,a,o)||kf(r,t,a,u)||kf(r,t,o,s)||kf(r,t,s,u)},jL=function(r,t,e,n){var a=[];return r.forEach(function(o){o!==t&&(o.x===t.x||o.y===t.y)&&!rp(o,t,e)&&!rp(o,t,n)&&a.push(o)}),Jd(a)},UL=function(r,t,e,n,a,o,s){var u=[],h=[t],p={},b={},k={};b[t.id]=0,k[t.id]=Sx(t,e,t);var R={};r.forEach(function(Z){R[Z.id]=Z});for(var Y=function(){var it,tt=Infinity;if(h.forEach(function(It){k[It.id]<tt&&(tt=k[It.id],it=It)}),it===e){var _t=[];return VL(_t,R,p,e.id),{value:_t}}WL(h,it),u.push(it),jL(r,it,n,a).forEach(function(It){if(u.indexOf(It)===-1){h.indexOf(It)===-1&&h.push(It);var Ht=k[it.id]+Vl(it,It);b[It.id]&&Ht>=b[It.id]||(p[It.id]=it.id,b[It.id]=Ht,k[It.id]=b[It.id]+Sx(It,e,t,o,s))}})};h.length;){var V=Y();if(Pf(V)==="object")return V.value}return[t,e]},ZL=function(r,t,e){return!(r.x===t.x&&t.x===e.x||r.y===t.y&&t.y===e.y)},KL=function(r,t,e,n){var a=Vl(r,t),o=Vl(e,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-r.x),y:t.y-n/a*(t.y-r.y)},u={x:t.x-n/o*(t.x-e.x),y:t.y-n/o*(t.y-e.y)};return[s,u]},Cx=function(r,t){var e=[],n=r[0];return e.push("M"+n.x+" "+n.y),r.forEach(function(a,o){var s=r[o+1],u=r[o+2];if(s&&u)if(ZL(a,s,u)){var h=KL(a,s,u,t),p=h[0],b=h[1];e.push("L"+p.x+" "+p.y),e.push("Q"+s.x+" "+s.y+" "+b.x+" "+b.y),e.push("L"+b.x+" "+b.y)}else e.push("L"+s.x+" "+s.y);else s&&e.push("L"+s.x+" "+s.y)}),e.join("")},$L=function(r,t,e,n,a){var o,s;if(!e||!e.getType())o=Lf(r);else if(e.getType()==="combo"){var u=e.getKeyShape();o=u.getCanvasBBox()||Lf(r),o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=e.getBBox();if(!n||!n.getType())s=Lf(t);else if(n.getType()==="combo"){var h=n.getKeyShape();s=h.getCanvasBBox()||Lf(t),s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=n&&n.getBBox();if(bx(o,s))return _f(wx(r,t));var p=If(o,a),b=If(s,a);if(bx(p,b))return _f(wx(r,t));var k=qd(p,r),R=qd(b,t),Y=NL([k,R]),V=tp(p,b),Z=tp(p,Y),it=tp(b,Y),tt=[];tt=tt.concat(ep(Z)),tt=tt.concat(ep(it));var _t={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[Y,Z,it].forEach(function(Ht){tt=tt.concat(XL(Ht,_t).filter(function(le){return Of(le,p)&&Of(le,b)}))}),[{x:k.x,y:R.y},{x:R.x,y:k.y}].forEach(function(Ht){Of(Ht,p)&&Of(Ht,b)&&tt.push(Ht)}),tt.unshift(k),tt.push(R),tt=Jd(tt);var It=UL(tt,k,R,o,s,r,t);return It.unshift(r),It.push(t),_f(It)};function Bf(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bf=function(t){return typeof t}:Bf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(i)}var QL=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},JL=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},qL=function(r,t){return[r,t]},t_=function(r,t,e,n,a){return _f($L(r,t,e,n,a.offset))},e_={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:QL,fallbackRoute:t_},bk={maxAllowedDirectionChange:45,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:JL,fallbackRoute:qL},Sa=function(r,t){var e=Math.floor(r/t);return e<0?0:e},r_=function(r,t,e){var n={};return r.forEach(function(a){if(a)for(var o=If(a.getBBox(),e),s=Sa(o.minX,t);s<=Sa(o.maxX,t);s+=1)for(var u=Sa(o.minY,t);u<=Sa(o.maxY,t);u+=1){var h=s+"-"+u;n[h]=!0}}),n},np=function(r,t){var e=t.x-r.x,n=t.y-r.y;if(!e&&!n)return 0;var a=(360+Math.atan2(n,e)*180/Math.PI)%360;return a},Mx=function(r,t){var e=Math.abs(r-t);return e>180?360-e:e},Ex=function(r,t,e){for(var n=Infinity,a=0,o=t.length;a<o;a++){var s=e(r,t[a]);s<n&&(n=s)}return n},Ax=function(r,t,e){var n=[];if(!t)return n;var a=e.directions,o=e.offset,s=t.getBBox(),u=If(t.getBBox(),o);for(var h in u)u[h]=Sa(u[h],e.gridSize);var p=r.x>Sa(s.minX,e.gridSize)&&r.x<Sa(s.maxX,e.gridSize)&&r.y>Sa(s.minY,e.gridSize)&&r.y<Sa(s.maxY,e.gridSize);if(p)for(var b=0,k=a;b<k.length;b++)for(var R=k[b],Y=[[{x:u.minX,y:u.minY},{x:u.maxX,y:u.minY}],[{x:u.minX,y:u.minY},{x:u.minX,y:u.maxY}],[{x:u.maxX,y:u.minY},{x:u.maxX,y:u.maxY}],[{x:u.minX,y:u.maxY},{x:u.maxX,y:u.maxY}]],h=0;h<4;h++){var V=Y[h],Z=Ol(r,{x:r.x+R.stepX*u.width,y:r.y+R.stepY*u.height},V[0],V[1]);Z&&!rp(r,Z,t.getBBox())&&(Z.id=Z.x+"-"+Z.y,n.push(Z))}else{var Z=qd(u,r);Z.id=Z.x+"-"+Z.y,n.push(Z)}return n},Tx=function(r,t,e,n,a){var o=(0,Ki.default)(e_,a);o.obstacles=o.obstacles||[];var s=r_(o.obstacles.concat([e,n]),o.gridSize,o.offset),u={x:Sa(r.x,o.gridSize),y:Sa(r.y,o.gridSize)},h={x:Sa(t.x,o.gridSize),y:Sa(t.y,o.gridSize)};r.id=u.x+"-"+u.y,t.id=h.x+"-"+h.y;var p=Ax(u,e,o),b=Ax(h,n,o);p.forEach(function(Ce){delete s[Ce.id]}),b.forEach(function(Ce){delete s[Ce.id]});for(var k={},R={},Y={},V={},Z={},it=0;it<p.length;it++){var tt=p[it];k[tt.id]=tt,V[tt.id]=0,Z[tt.id]=Ex(tt,b,o.distFunc)}for(var _t=function(me,Le){var Ye=np(me,Le),Be;if(Y[me.id]){var cr=np({x:parseFloat(Y[me.id].split("-")[0]),y:parseFloat(Y[me.id].split("-")[1])},me);Be=Mx(cr,Ye)}else{var or=np(u,me);Be=Mx(or,Ye)}return Be},It=function(me){var Le=[t],Ye={x:parseFloat(me.split("-")[0]),y:parseFloat(me.split("-")[1]),id:me};for(_t(Ye,h)&&Le.unshift({x:Ye.x===h.x?t.x:Ye.x*o.gridSize,y:Ye.y===h.y?t.y:Ye.y*o.gridSize});Y[me]&&Y[me]!==me;){var Be={x:parseFloat(me.split("-")[0]),y:parseFloat(me.split("-")[1]),id:me},or=Y[me],cr={x:parseFloat(or.split("-")[0]),y:parseFloat(or.split("-")[1]),id:or},ar=_t(cr,Be);ar&&Le.unshift({x:cr.x===Be.x?Le[0].x:cr.x*o.gridSize,y:cr.y===Be.y?Le[0].y:cr.y*o.gridSize}),me=or}var Cr={x:parseFloat(me.split("-")[0]),y:parseFloat(me.split("-")[1]),id:me};return Le[0].x=Cr.x===u.x?r.x:Le[0].x,Le[0].y=Cr.y===u.y?r.y:Le[0].y,Le.unshift(r),Le},Ht=o.maximumLoops,le=function(){var me,Le=Infinity;for(var Ye in k)Z[Ye]<=Le&&(Le=Z[Ye],me=k[Ye]);if(!me)return"break";if(b.findIndex(function(yr){return yr.x===me.x&&yr.y===me.y})>-1){var Be=It(me.id);return{value:Be}}delete k[me.id],R[me.id]=!0;for(var or=0;or<o.directions.length;or++){var cr=o.directions[or],ar={x:me.x+cr.stepX,y:me.y+cr.stepY,id:me.x+cr.stepX+"-"+(me.y+cr.stepY)};if(!R[ar.id]){var Cr=_t(me,ar);if(!(Cr>o.maxAllowedDirectionChange)&&!s[ar.id]){k[ar.id]||(k[ar.id]=ar);var wr=o.distFunc(me,ar)+(isNaN(o.penalties[Cr])?o.gridSize:o.penalties[Cr]),Mr=V[me.id]+wr;V[ar.id]&&Mr>=V[ar.id]||(Y[ar.id]=me.id,V[ar.id]=Mr,Z[ar.id]=Mr+Ex(ar,b,o.distFunc))}}}Ht-=1};Object.keys(k).length>0&&Ht>0;){var xe=le();if(Bf(xe)==="object")return xe.value;if(xe==="break")break}return o.fallbackRoute(r,t,e,n,o)};Pi.registerEdge("polyline",{options:{color:dr.defaultEdge.color,size:dr.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:dr.defaultEdge.style.stroke,lineAppendWidth:dr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:dr.edgeLabel.style.fill,fontSize:dr.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:1e3,gridSize:10},stateStyles:(0,he.__assign)({},dr.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(r,t){var e=this.getShapeStyle(r);e.radius===0&&delete e.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e});return n},getShapeStyle:function(r){var t=this.options.style,e={stroke:r.color},n=(0,y.mix)({},t,e,r.style);r=this.getPathPoints(r),this.radius=n.radius,this.offset=n.offset;var a=r.startPoint,o=r.endPoint,s=this.getControlPoints(r),u=[a];s&&(u=u.concat(s)),u.push(o);var h=r.sourceNode,p=r.targetNode,b=n.radius,k=this.options.routeCfg;k.offset=n.offset;var R=this.getPath(u,h,p,b,k);((0,y.isArray)(R)&&R.length<=1||(0,y.isString)(R)&&R.indexOf("L")===-1)&&(R="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(R="M0 0, L0 0");var Y=(0,y.mix)({},dr.defaultEdge.style,n,{lineWidth:r.size,path:R});return Y},updateShapeStyle:function(r,t){var e=t.getContainer(),n={stroke:r.color},a=e.find(function(tt){return tt.get("className")==="edge-shape"})||t.getKeyShape(),o=r.size;r=this.getPathPoints(r);var s=r.startPoint,u=r.endPoint,h=this.getControlPoints(r),p=[s];h&&(p=p.concat(h)),p.push(u);var b=(0,y.mix)({},n,a.attr(),r.style),k=r.sourceNode,R=r.targetNode,Y=b.radius,V=this.options.routeCfg;V.offset=b.offset;var Z=this.getPath(p,k,R,Y,V);((0,y.isArray)(Z)&&Z.length<=1||(0,y.isString)(Z)&&Z.indexOf("L")===-1)&&(Z="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(Z="M0 0, L0 0");var it=(0,y.mix)(n,a.attr(),{lineWidth:o,path:Z},r.style);a&&a.attr(it)},getPath:function(r,t,e,n,a){var o=a.offset;if(!o||r.length>2){if(n)return Cx(r,n);var s=[];return(0,y.each)(r,function(b,k){k===0?s.push(["M",b.x,b.y]):s.push(["L",b.x,b.y])}),s}var u;if(n){u=Tx(r[0],r[r.length-1],t,e,a);var h=Cx(u,n);return h}u=Tx(r[0],r[r.length-1],t,e,a);var p=im(u);return p}},"single-edge");var n_={triangle:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+" L "+(n+t)+","+r/2+" Z";return a},vee:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=20),e===void 0&&(e=0);var n=e*2,a="M "+n+",0 L "+(n+t)+",-"+r/2+`
        L `+(n+2*t/3)+",0 L "+(n+t)+","+r/2+" Z";return a},circle:function(r,t){r===void 0&&(r=5),t===void 0&&(t=0);var e=t*2,n="M "+e+`, 0
            a `+r+","+r+" 0 1,0 "+r*2+`,0
            a `+r+","+r+" 0 1,0 "+-r*2+",0";return n},rect:function(r,t,e){r===void 0&&(r=10),t===void 0&&(t=10),e===void 0&&(e=0);var n=e*2,a="M "+n+","+-r/2+` 
        L `+(n+t)+","+-r/2+` 
        L `+(n+t)+","+r/2+` 
        L `+n+","+r/2+" Z";return a},diamond:function(r,t,e){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=0);var n=e*2,a="M "+n+`,0 
        L `+(n+t/2)+","+-r/2+` 
        L `+(n+t)+`,0 
        L `+(n+t/2)+","+r/2+" Z";return a},triangleRect:function(r,t,e,n,a,o){r===void 0&&(r=15),t===void 0&&(t=15),e===void 0&&(e=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,h="M "+s+",0 L "+(s+t)+",-"+r/2+" L "+(s+t)+","+r/2+` Z
            M `+u+", -"+e/2+`
            L `+(u+n)+" -"+e/2+`
            L `+(u+n)+" "+e/2+`
            L `+u+" "+e/2+`
            Z`;return h}},i_={collapse:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r+e-4,t]]},expand:function(r,t,e){return[["M",r-e,t],["a",e,e,0,1,0,e*2,0],["a",e,e,0,1,0,-e*2,0],["M",r-e+4,t],["L",r-e+2*e-4,t],["M",r-e+e,t-e+4],["L",r,t+e-4]]},upTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t+a],["L",r+n,t+a],["L",r,t-e],["Z"]]},downTriangle:function(r,t,e){var n=e*Math.cos(Math.PI/6),a=e*Math.sin(Math.PI/6);return[["M",r-n,t-a],["L",r+n,t-a],["L",r,t+e],["Z"]]}},Ns=Pi,a_={mat3:Na.wO,mix:Nl.default,deepMix:Ki.default,transform:Na.vs},o_=(0,he.__assign)((0,he.__assign)((0,he.__assign)((0,he.__assign)((0,he.__assign)((0,he.__assign)({},a_),nt),Gt),Ft),mt),rt),s_=o_,l_=function(){function i(r){this._cfgs=(0,Ki.default)(this.getDefaultCfgs(),r),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(r){var t=this;t.set("graph",r);var e=t.getEvents(),n={};(0,ii.default)(e,function(a,o){var s=(0,rf.default)(t,a);n[o]=s,r.on(o,s)}),this._events=n,this.init()},i.prototype.init=function(){},i.prototype.getEvents=function(){return{}},i.prototype.get=function(r){return this._cfgs[r]},i.prototype.set=function(r,t){this._cfgs[r]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var r=this.get("graph"),t=this._events;(0,ii.default)(t,function(e,n){r.off(n,e)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),ao=l_,Px="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",u_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{img:Px}},r.prototype.init=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("container"),a=t.get("canvas").get("el"),o=t.get("width"),s=t.get("height"),u=this.get("img")||Px,h=(0,ki.Z)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),p=(0,ki.Z)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+u+`;
        user-select: none
        '></div>`);h.appendChild(p),(0,ai.Z)(h,{width:o+"px",height:s+"px",left:n.offsetLeft+"px",top:n.offsetTop+"px"}),(0,ai.Z)(p,{width:o/e+"px",height:s/e+"px",left:"0px",top:"0px"}),n.insertBefore(h,a),this.set("container",h),this.set("gridContainer",p)},r.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},r.prototype.updateGrid=function(t){var e=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a="matrix("+n[0]+", "+n[1]+", "+n[3]+", "+n[4]+", 0, 0)";(0,ai.Z)(e,{transform:a})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){var t=this.get("graph"),e=t.get("container"),n=this.get("container");e.removeChild(n)},r}(ao),h_=u_,f_=v(34508),ip=v.n(f_);ip()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var c_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},r.prototype.init=function(){var t=this.get("className"),e=(0,ki.Z)("<div class="+(t||"g6-component-contextmenu")+"></div>");(0,ai.Z)(e,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),n.appendChild(e),this.set("menu",e)},r.prototype.onMenuShow=function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),!!t.item){var n=this.get("shouldBegin");if(!!n(t)){var a=this.get("itemTypes");if(t.item&&t.item.getType&&a.indexOf(t.item.getType())===-1){e.onMenuHide();return}if(!!t.item){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),h=s(t,u);(0,ti.default)(h)?o.innerHTML=h:o.innerHTML=h.outerHTML,this.removeMenuEventListener();var p=this.get("handleMenuClick");if(p){var b=function(xe){p(xe.target,t.item,u)};this.set("handleMenuClickWrapper",b),o.addEventListener("click",b)}var k=u.get("width"),R=u.get("height"),Y=o.getBoundingClientRect(),V=this.get("offsetX")||0,Z=this.get("offsetY")||0,it=u.getContainer().offsetTop,tt=u.getContainer().offsetLeft,_t=t.canvasX+tt+V,It=t.canvasY+it+Z;_t+Y.width>k&&(_t=t.canvasX-Y.width-V+tt),It+Y.height>R&&(It=t.canvasY-Y.height-Z+it),(0,ai.Z)(o,{top:It+"px",left:_t+"px",visibility:"visible"});var Ht=function(xe){e.onMenuHide()};document.body.addEventListener("click",Ht),this.set("handler",Ht)}}}},r.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},r.prototype.onMenuHide=function(){var t=this.get("menu");t&&(0,ai.Z)(t,{visibility:"hidden"}),this.removeMenuEventListener()},r.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(ao),v_=c_,Lx=Math.max,d_="default",p_="keyShape",g_="delegate",_x="svg",y_=function(i){(0,he.__extends)(r,i);function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.handleUpdateCanvas=(0,y.debounce)(function(e){var n=t;n.destroyed||n.updateCanvas()},100,!1),t}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.size,a=e.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=(0,ki.Z)(`
      <div
        class=`+e.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          border: 2px solid #1980ff'
        draggable=true>
      </div>`),h=0,p=0,b=!1,k=0,R=0,Y=0,V=0,Z=0,it=0;u.addEventListener("dragstart",function(tt){if(tt.dataTransfer){var _t=new Image;_t.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",tt.dataTransfer.setDragImage(_t,0,0),tt.dataTransfer.setData("text","view-port-minimap")}if(e.refresh=!1,tt.target===u){var It=u.style;k=parseInt(It.left,10),R=parseInt(It.top,10),Y=parseInt(It.width,10),V=parseInt(It.height,10),!(Y>n[0]||V>n[1])&&(it=a.getZoom(),Z=t.get("ratio"),b=!0,h=tt.clientX,p=tt.clientY)}},!1),u.addEventListener("drag",function(tt){if(!(!b||(0,to.default)(tt.clientX)||(0,to.default)(tt.clientY))){var _t=h-tt.clientX,It=p-tt.clientY;(k-_t<0||k-_t+Y>=n[0])&&(_t=0),(R-It<0||R-It+V>=n[1])&&(It=0),k-=_t,R-=It,(0,ai.Z)(u,{left:k+"px",top:R+"px"}),a.translate(_t*it/Z,It*it/Z),h=tt.clientX,p=tt.clientY}},!1),u.addEventListener("dragend",function(){b=!1,e.refresh=!0},!1),this.set("viewport",u),s.appendChild(u)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("dx"),n=this.get("dy"),a=this.get("totaldx"),o=this.get("totaldy"),s=this.get("graph"),u=this.get("size"),h=s.get("width"),p=s.get("height"),b=s.getPointByCanvas(0,0),k=s.getPointByCanvas(h,p),R=this.get("viewport");R||this.initViewport();var Y=s.getZoom(),V=(k.x-b.x)*t,Z=(k.y-b.y)*t,it=b.x*t+a,tt=b.y*t+o,_t=it+V,It=tt+Z;it<0&&(V+=it,it=0),_t>u[0]&&(V=V-(_t-u[0])),tt<0&&(Z+=tt,tt=0),It>u[1]&&(Z=Z-(It-u[1])),this.set("ratio",t);var Ht=it+"px",le=tt+"px";(0,ai.Z)(R,{left:Ht,top:le,width:V+"px",height:Z+"px"})}},r.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),n=t.get("group");if(!n.destroyed){var a=n.clone();a.resetMatrix(),e.clear(),e.add(a);var o=t.get("renderer");o===_x&&this.updateVisible(a)}},r.prototype.updateVisible=function(t){var e=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),e.updateVisible(a)})}},r.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph;(0,ii.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,ii.default)(e.getNodes(),function(n){t.updateOneNodeKeyShape(n)}),this.clearDestroyedShapes()},r.prototype.updateOneNodeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox(),u=t.get("keyShape").clone(),h=u.attr(),p={x:s.centerX,y:s.centerY};o?p=Object.assign(h,p):(o=u,n.add(o));var b=o.get("type");(b==="rect"||b==="image")&&(p.x=s.minX,p.y=s.minY),o.attr(p),t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph;(0,ii.default)(e.getEdges(),function(n){t.updateOneEdgeKeyShape(n)}),(0,ii.default)(e.getNodes(),function(n){t.updateOneNodeDelegateShape(n)}),this.clearDestroyedShapes()},r.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(!(!e||e.length===0))for(var n=e.length-1;n>=0;n--){var a=t[e[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[e[n]])}},r.prototype.updateOneEdgeKeyShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("itemMap")||{},o=a[t.get("id")];if(o){var s=t.get("keyShape").attr("path");o.attr("path",s)}else o=t.get("keyShape").clone(),n.add(o),o.toBack();t.isVisible()||o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},r.prototype.updateOneNodeDelegateShape=function(t){var e=this.get("canvas"),n=e.get("children")[0]||e.addGroup(),a=this.get("delegateStyle"),o=this.get("itemMap")||{},s=o[t.get("id")],u=t.getBBox();if(s){var h={x:u.minX,y:u.minY,width:u.width,height:u.height};s.attr(h)}else s=n.addShape("rect",{attrs:(0,he.__assign)({x:u.minX,y:u.minY,width:u.width,height:u.height},a),name:"minimap-node-shape"});t.isVisible()||s.hide(),s.exist=!0,o[t.get("id")]=s,this.set("itemMap",o)},r.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=(0,ki.Z)("<div class='"+a+"' style='width: "+n[0]+"px; height: "+n[1]+"px; overflow: hidden'></div>");(0,ti.default)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):e.get("container").appendChild(s),t.set("container",s);var u=(0,ki.Z)('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u);var h,p=e.get("renderer");p===_x?h=new Fl.Z({container:u,width:n[0],height:n[1]}):h=new os.Z({container:u,width:n[0],height:n[1]}),t.set("canvas",h),t.updateCanvas()},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case d_:this.updateGraphShapes();break;case p_:this.updateKeyShapes();break;case g_:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(!!u){u.resetMatrix();var h=u.getCanvasBBox(),p=e.get("canvas").getBBox(),b=p.width,k=p.height;Number.isFinite(h.width)&&(b=Lx(h.width,b),k=Lx(h.height,k)),b+=2*s,k+=2*s;var R=Math.min(n[0]/b,n[1]/k),Y=[1,0,0,0,1,0,0,0,1],V=0,Z=0;Number.isFinite(h.minX)&&(V=-h.minX),Number.isFinite(h.minY)&&(Z=-h.minY);var it=(n[0]-(b-2*s)*R)/2,tt=(n[1]-(k-2*s)*R)/2;Y=no(Y,[["t",V,Z],["s",R,R],["t",it,tt]]),u.setMatrix(Y),this.set("ratio",R),this.set("totaldx",it+V*R),this.set("totaldy",tt+Z*R),this.set("dx",it),this.set("dy",tt),this.updateViewport()}}}}},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},r}(ao),m_=y_;function oo(i,r,t){var e=i.x-r.x,n=i.y-r.y;return!t||Math.abs(e)>t||Math.abs(n)>t?Math.sqrt(e*e+n*n):t}function x_(i,r){return i.x*r.x+i.y*r.y}function Ix(i,r){var t=(r.source.y-r.target.y)/(r.source.x-r.target.x),e=(t*t*r.source.x+t*(i.y-r.source.y)+i.x)/(t*t+1),n=t*(e-r.source.x)+r.source.y;return{x:e,y:n}}var b_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},r.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick"),n=function(){e&&e(),t.refreshPositions()};this.set("tick",n)},r.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(It){(It.x===null||!It.y===null||It.x===void 0||!It.y===void 0)&&(s=!0),o[It.id]=It}),s)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",o);var u=e.get("divisions"),h=e.get("divRate"),p=e.divideEdges(u);e.set("edgePoints",p);var b=e.getEdgeBundles();e.set("edgeBundles",b);for(var k=e.get("cycles"),R=e.get("iterations"),Y=e.get("iterRate"),V=e.get("lambda"),Z=0;Z<k;Z++){for(var it=function(Ht){var le=[];n.forEach(function(xe,Ce){if(xe.source!==xe.target){var me=o[xe.source],Le=o[xe.target];le[Ce]=e.getEdgeForces({source:me,target:Le},Ce,u,V);for(var Ye=0;Ye<u+1;Ye++)p[Ce][Ye].x+=le[Ce][Ye].x,p[Ce][Ye].y+=le[Ce][Ye].y}})},tt=0;tt<R;tt++)it(tt);V=V/2,u*=h,R*=Y,p=e.divideEdges(u),e.set("edgePoints",p)}n.forEach(function(It,Ht){It.source!==It.target&&(It.shape="polyline",It.type="polyline",It.controlPoints=p[Ht].slice(1,p[Ht].length-1))});var _t=e.get("graph");_t.refresh()}},r.prototype.updateBundling=function(t){var e=this,n=t.data;if(n&&e.set("data",n),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach(function(o){e.set(o,t[o])}),t.onTick){var a=this.get("graph");e.set("tick",function(){t.onTick(),a.refresh()})}e.bundling(n)},r.prototype.divideEdges=function(t){var e=this,n=e.get("data").edges,a=e.get("nodeIdMap"),o=e.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){(!o[u]||o[u]===void 0)&&(o[u]=[]);var h=a[s.source],p=a[s.target];if(t===1)o[u].push({x:h.x,y:h.y}),o[u].push({x:.5*(h.x+p.x),y:.5*(h.y+p.y)}),o[u].push({x:p.x,y:p.y});else{var b=0;!o[u]||o[u]===[]?b=oo({x:h.x,y:h.y},{x:p.x,y:p.y}):b=e.getEdgeLength(o[u]);var k=b/(t+1),R=k,Y=[{x:h.x,y:h.y}];o[u].forEach(function(V,Z){if(Z!==0){for(var it=oo(V,o[u][Z-1]);it>R;){var tt=R/it,_t={x:o[u][Z-1].x,y:o[u][Z-1].y};_t.x+=tt*(V.x-o[u][Z-1].x),_t.y+=tt*(V.y-o[u][Z-1].y),Y.push(_t),it-=R,R=k}R-=it}}),Y.push({x:p.x,y:p.y}),o[u]=Y}}),o},r.prototype.getEdgeLength=function(t){var e=0;return t.forEach(function(n,a){a!==0&&(e+=oo(n,t[a-1]))}),e},r.prototype.getEdgeBundles=function(){var t=this,e=t.get("data"),n=e.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,h){(!s[h]||s[h]===void 0)&&(s[h]=[])}),n.forEach(function(u,h){var p=o[u.source],b=o[u.target];n.forEach(function(k,R){if(!(R<=h)){var Y=o[k.source],V=o[k.target],Z=t.getBundleScore({source:p,target:b},{source:Y,target:V});Z>=a&&(s[h].push(R),s[R].push(h))}})}),s},r.prototype.getBundleScore=function(t,e){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=oo({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=oo({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y});var a=n.getAngleScore(t,e),o=n.getScaleScore(t,e),s=n.getPositionScore(t,e),u=n.getVisibilityScore(t,e);return a*o*s*u},r.prototype.getAngleScore=function(t,e){var n=x_({x:t.vx,y:t.vy},{x:e.vx,y:e.vy});return n/(t.length*e.length)},r.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2,a=2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n);return a},r.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},s=oo(a,o);return n/(n+s)},r.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),a=this.getEdgeVisibility(e,t);return n<a?n:a},r.prototype.getEdgeVisibility=function(t,e){var n=Ix(e.source,t),a=Ix(e.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*oo(o,s)/oo(n,a))},r.prototype.getEdgeForces=function(t,e,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),h=u/(oo(t.source,t.target)*(n+1)),p=[{x:0,y:0}],b=1;b<n;b++){var k={x:0,y:0},R=o.getSpringForce({pre:s[e][b-1],cur:s[e][b],next:s[e][b+1]},h),Y=o.getElectrostaticForce(b,e);k.x=a*(R.x+Y.x),k.y=a*(R.y+Y.y),p.push(k)}return p.push({x:0,y:0}),p},r.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=e,a*=e,{x:n,y:a}},r.prototype.getElectrostaticForce=function(t,e){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[e],h={x:0,y:0};return u.forEach(function(p){var b={x:s[p][t].x-s[e][t].x,y:s[p][t].y-s[e][t].y};if(Math.abs(b.x)>a||Math.abs(b.y)>a){var k=oo(s[p][t],s[e][t]),R=1/k;h.x+=b.x*R,h.y+=b.y*R}}),h},r.prototype.isTicking=function(){return this.get("ticking")},r.prototype.getSimulation=function(){return this.get("forceSimulation")},r.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},r}(ao),w_=b_,Df=.05,Ox={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},S_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,Ei.d9)(Ox),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},r.prototype.init=function(){var t=this,e=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",e*e);var n=t.get("d");t.set("molecularParam",(n+1)*e)},r.prototype.createDelegate=function(t){var e=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){e.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Df:a=1/(1-Df);var h=e.get("maxR"),p=e.get("minR"),b=e.get("r");(b>(h||n.get("height"))&&a>1||b<(p||n.get("height")*.05)&&a<1)&&(a=1),b*=a,e.set("r",b),e.set("r2",b*b);var k=e.get("d");e.set("molecularParam",(k+1)*b),e.set("delegateCenterDiff",void 0),e.magnify(t,u)}},r.prototype.scaleRByDrag=function(t){var e=this;if(!!t){var n=e.get("dragPrePos"),a=e.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-Df:o=1/(1-Df);var u=e.get("maxR"),h=e.get("minR"),p=e.get("r");(p>(u||a.get("height"))&&o>1||p<(h||a.get("height")*.05)&&o<1)&&(o=1),p*=o,e.set("r",p),e.set("r2",p*p);var b=e.get("d");e.set("molecularParam",(b+1)*p),e.magnify(t,s),e.set("dragPrePos",{x:t.x,y:t.y})}},r.prototype.scaleDByWheel=function(t){var e=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=e.get("d"),o=a+n,s=e.get("maxD"),u=e.get("minD");if(o<s&&o>u){e.set("d",o);var h=e.get("r");e.set("molecularParam",(o+1)*h);var p=e.get("delegate"),b=p?{x:p.attr("x"),y:p.attr("y")}:void 0;e.set("delegateCenterDiff",void 0),e.magnify(t,b)}}},r.prototype.scaleDByDrag=function(t){var e=this,n=e.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=e.get("d"),s=o+a,u=e.get("maxD"),h=e.get("minD");if(s<u&&s>h){e.set("d",s);var p=e.get("r");e.set("molecularParam",(s+1)*p),e.magnify(t)}e.set("dragPrePos",{x:t.x,y:t.y})},r.prototype.magnify=function(t,e){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),h=n.get("r"),p=n.get("r2"),b=n.get("d"),k=n.get("molecularParam"),R=a.getNodes(),Y=R.length,V=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(V=n.get("cacheCenter"));var Z=n.get("delegateCenterDiff");Z&&(V.x+=Z.x,V.y+=Z.y),n.updateDelegate(V,h);for(var it=0;it<Y;it++){var tt=R[it].getModel(),_t=tt.x,It=tt.y;if(!(isNaN(_t)||isNaN(It))){var Ht=(_t-V.x)*(_t-V.x)+(It-V.y)*(It-V.y);if(!isNaN(Ht)&&Ht<p&&Ht!==0){var le=Math.sqrt(Ht),xe=k*le/(b*le+h),Ce=(_t-V.x)/le,me=(It-V.y)/le;if(tt.x=Ce*xe+V.x,tt.y=me*xe+V.y,s[tt.id]||(s[tt.id]={x:_t,y:It,texts:[]}),o.push(tt),u&&2*le<h)for(var Le=R[it],Ye=Le.getContainer(),Be=Ye.getChildren(),or=Be.length,cr=0;cr<or;cr++){var ar=Be[cr];ar.get("type")==="text"&&(s[tt.id].texts.push({visible:ar.get("visible"),shape:ar}),ar.set("visible",!0))}}}}a.refreshPositions()},r.prototype.restoreCache=function(){for(var t=this,e=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=e.length,o=0;o<a;o++){var s=e[o],u=s.id,h=n[u];s.x=h.x,s.y=h.y;for(var p=h.texts.length,b=0;b<p;b++){var k=h.texts[b];k.shape.set("visible",k.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,h=t.minR,p=t.maxR,b=t.scaleDBy,k=t.scaleRBy;isNaN(t.r)||(e.set("r",n),e.set("r2",n*n)),isNaN(a)||e.set("d",a),isNaN(u)||e.set("maxD",u),isNaN(s)||e.set("minD",s),isNaN(p)||e.set("maxR",p),isNaN(h)||e.set("minR",h);var R=e.get("d"),Y=e.get("r");if(e.set("molecularParam",(R+1)*Y),(o==="mousemove"||o==="click"||o==="drag")&&e.set("trigger",o),b==="drag"||b==="wheel"||b==="unset"){e.set("scaleDBy",b),e.get("delegate").remove(),e.get("delegate").destroy();var V=e.get("dPercentText");V&&(V.remove(),V.destroy())}if(k==="drag"||k==="wheel"||k==="unset"){e.set("scaleRBy",k),e.get("delegate").remove(),e.get("delegate").destroy();var V=e.get("dPercentText");V&&(V.remove(),V.destroy())}},r.prototype.updateDelegate=function(t,e){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),h=a.get("delegateStyle")||Ox;s=u.addShape("circle",{attrs:(0,he.__assign)({r:e/1.5,x:t.x,y:t.y},h),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(Y){a.scaleRByWheel(Y)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(Y){a.set("dragging",!0),a.set("cacheCenter",{x:Y.x,y:Y.y}),a.set("dragPrePos",{x:Y.x,y:Y.y})}),s.on("drag",function(Y){a.scaleRByDrag(Y)}),s.on("dragend",function(Y){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(Y){n.scaleDByWheel(Y)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(Y){a.set("dragging",!0),a.set("cacheCenter",{x:Y.x,y:Y.y}),a.set("dragPrePos",{x:Y.x,y:Y.y})}),s.on("drag",function(Y){n.scaleDByDrag(Y)}),s.on("dragend",function(Y){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:e/1.5});if(a.get("showDPercent")){var p=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),b=a.get("dPercentText"),k=t.y+e/1.5+16;if(!b||b.destroyed){var R=o.get("group");b=R.addShape("text",{attrs:{text:p+"%",x:t.x,y:k,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",b)}else b.attr({text:p+"%",x:t.x,y:k})}a.set("delegate",s)},r.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(ao),C_=S_;ip()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var M_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `}}},r.prototype.init=function(){var t=this,e=this.get("graph"),n=this.get("getContent"),a=n(e),o=a;(0,Ei.HD)(a)&&(o=(0,ki.Z)(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),u.appendChild(o),this.set("toolBar",o);var h=this.get("handleClick");o.addEventListener("click",function(b){var k=b.path.filter(function(Y){return Y.nodeName==="LI"});if(k.length!==0){var R=k[0].getAttribute("code");!R||(h?h(R,e):t.handleDefaultOperator(R,e))}});var p=this.get("position");p&&(0,ai.Z)(o,{top:p.y+"px",left:p.x+"px"}),this.bindUndoRedo()},r.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!e||!n||!a||!o||t.on("stackchange",function(s){var u=s.undoStack,h=s.redoStack,p=u.length,b=h.length;p===1?(e.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),n.removeAttribute("style")),b===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))})},r.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action;t.pushStack(a,(0,Ei.d9)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){var p=t.findById(h.id);h.visible?t.showItem(p,!1):t.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){t.updateItem(h.id,h,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){var p=h.itemType;delete h.itemType,t.addItem(p,h,!1)})});break}case"add":Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){t.removeItem(h.id,!1)})});break;default:}}}},r.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(!(!e||e.length===0)){var n=e.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,Ei.d9)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){var p=t.findById(h.id);h.visible?t.showItem(p,!1):t.hideItem(p,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){t.updateItem(h.id,h,!1)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(s){t.removeItem(s.id,!1)}),o.nodes&&o.nodes.forEach(function(s){t.removeItem(s.id,!1)}),o.combos&&o.combos.forEach(function(s){t.removeItem(s.id,!1)});break;case"add":{Object.keys(o).forEach(function(s){var u=o[s];!u||u.forEach(function(h){var p=h.itemType;delete h.itemType,t.addItem(p,h,!1)})});break}default:}}}},r.prototype.handleDefaultOperator=function(t,e){var n=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":{var a=1+.05*5;if(a*n>5)return;e.zoomTo(n*1.1);break}case"zoomIn":{var o=1-.05*5;if(o*n<.3)return;e.zoomTo(n*.9);break}case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20]);break;default:}},r.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},r}(ao),E_=M_;ip()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var A_=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"]}},r.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},r.prototype.init=function(){var t=this.get("className")||"g6-component-tooltip",e=(0,ki.Z)("<div class="+t+"></div>"),n=this.get("container");n||(n=this.get("graph").get("container")),(0,ai.Z)(e,{position:"absolute",visibility:"hidden"}),n.appendChild(e),this.set("tooltip",e)},r.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!(t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},r.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&e.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},r.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},r.prototype.showTooltip=function(t){if(!!t.item){var e=this.get("itemTypes");if(!(t.item.getType&&e.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,ti.default)(o)?n.innerHTML=o:n.innerHTML=o.outerHTML,this.updatePosition(t)}}},r.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&(0,ai.Z)(t,{visibility:"hidden"})},r.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),n=this.get("tooltip");if(!e(t)){(0,ai.Z)(n,{visibility:"hidden"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,h=this.get("offsetY")||0,p=a.getPointByClient(t.clientX,t.clientY),b=a.getCanvasByPoint(p.x,p.y),k=b.x,R=b.y;k+=u,R+=h;var Y=n.getBoundingClientRect();k+Y.width>o&&(k=k-Y.width-u),R+Y.height>s&&(R=R-Y.height-h),(0,ai.Z)(n,{left:k+"px",top:R+"px",visibility:"visible"})},r.prototype.hide=function(){this.onMouseLeave()},r.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},r}(ao),T_=A_,kx=v(2005);function P_(i){return(0,y.map)(i,function(r,t){var e=t===0?"M":"L",n=r[0],a=r[1];return[e,n,a]})}function Bx(i){return P_(i)}function L_(i){if(i.length<=2)return Bx(i);var r=[];(0,y.each)(i,function(o){(0,y.isEqual)(o,r.slice(r.length-2))||r.push(o[0],o[1])});var t=Ld.catmullRom2Bezier(r,!1),e=(0,y.head)(i),n=e[0],a=e[1];return t.unshift(["M",n,a]),t}function __(i,r,t,e){e===void 0&&(e=!0);var n=new Fe.Linear({values:i}),a=new Fe.Category({values:(0,y.map)(i,function(s,u){return u})}),o=(0,y.map)(i,function(s,u){return[a.scale(u)*r,t-n.scale(s)*t]});return e?L_(o):Bx(o)}function I_(i,r,t){for(var e=new Fe.Linear({values:i}),n=new Fe.Category({values:(0,y.map)(i,function(b,k){return k})}),a=(0,y.map)(i,function(b,k){return[n.scale(k)*r,t-e.scale(b)*t]}),o=[],s=0;s<a.length;s++){var u=a[s],h={x:u[0],y:u[1],y0:t,size:5},p=B_(h);o.push.apply(o,p)}return D_(o)}function O_(i,r){var t=new Fe.Linear({values:i}),e=Math.max(0,t.min);return r-t.scale(e)*r}function k_(i,r,t,e){var n=(0,he.__spreadArrays)(i),a=O_(e,t);return n.push(["L",r,a]),n.push(["L",0,a]),n.push(["Z"]),n}function B_(i){var r=i.x,t=i.y,e=i.y0,n=i.size,a,o;(0,kx.isArray)(t)?(a=t[0],o=t[1]):(a=e,o=t);var s,u;(0,kx.isArray)(r)?(s=r[0],u=r[1]):(s=r-n/2,u=r+n/2);var h=[{x:s,y:a},{x:s,y:o}];return h.push({x:u,y:o},{x:u,y:a}),h}function D_(i,r){r===void 0&&(r=!0);var t=[],e=i[0];t.push(["M",e.x,e.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return r&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}var wk={opacity:.5},F_={stroke:"#C5C5C5",strokeOpacity:.85},R_={fill:"#CACED4",opacity:.85},N_=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.width,s=o===void 0?200:o,u=r.height,h=u===void 0?26:u,p=r.smooth,b=p===void 0?!0:p,k=r.isArea,R=k===void 0?!1:k,Y=r.data,V=Y===void 0?[]:Y,Z=r.lineStyle,it=r.areaStyle,tt=r.group,_t=r.interval,It=_t===void 0?null:_t;this.group=tt,this.x=e,this.y=a,this.width=s,this.height=h,this.data=V,this.smooth=b,this.isArea=R,this.lineStyle=Object.assign({},F_,Z),this.areaStyle=Object.assign({},R_,it),this.intervalConfig=It,this.renderLine()}return i.prototype.renderLine=function(){var r=this,t=r.x,e=r.y,n=r.width,a=r.height,o=r.data,s=r.smooth,u=r.isArea,h=r.backgroundStyle,p=r.lineStyle,b=r.areaStyle,k=this.group.addGroup({name:"trend-group"});if(o){var R=__(o,n,a,s);if(k.addShape("path",{attrs:(0,he.__assign)({path:R},p)}),u){var Y=k_(R,n,a,o);k.addShape("path",{attrs:(0,he.__assign)({path:Y},b)})}}this.intervalConfig&&k.addShape("path",{attrs:(0,he.__assign)({path:I_(this.intervalConfig.data,n,a)},this.intervalConfig.style)}),k.move(t,e)},i.prototype.destory=function(){this.group.destroy()},i}(),Y_=N_,G_={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},z_={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},X_=function(){function i(r){var t=r.group,e=r.name,n=r.type,a=r.x,o=a===void 0?0:a,s=r.y,u=s===void 0?0:s,h=r.width,p=h===void 0?2:h,b=r.height,k=b===void 0?24:b,R=r.style,Y=R===void 0?{}:R;this.group=t,this.name=e,this.handleType=n,this.x=o,this.y=u,this.width=p,this.height=k,n==="trend"?this.style=(0,he.__assign)((0,he.__assign)({},G_),Y):n==="simple"&&(this.style=(0,he.__assign)((0,he.__assign)({},z_),Y)),this.renderHandle()}return i.prototype.setX=function(r){this.setXY(r,void 0)},i.prototype.setY=function(r){this.setXY(void 0,r)},i.prototype.setXY=function(r,t){(0,y.isNumber)(r)&&(this.x=r),(0,y.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var r=this,t=r.width,e=r.height,n=r.style,a=r.name,o=n.fill,s=n.stroke,u=n.radius,h=n.opacity,p=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:s,radius:u,opacity:h,cursor:p},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:h,cursor:p},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:s,radius:u,opacity:h,cursor:p},name:a+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:u,opacity:h,cursor:p},name:a+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:s,radius:u,opacity:h,cursor:p},name:a+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.name;this.handleGroup.on(t+"-handler:mouseenter",function(){var e=r.style.highLightFill;r.background.attr("fill",e)}),this.handleGroup.on(t+"-handler:mouseleave",function(){var e=r.style.fill;r.background.attr("fill",e)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Dx=X_,H_=function(){function i(r){this.config=(0,y.deepMix)({},r),this.init()}return i.prototype.update=function(r){this.config=(0,y.deepMix)({},this.config,r),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var r=this.config,t=r.group,e=r.style;this.circle=t.addShape("circle",{attrs:(0,he.__assign)({x:this.config.x,y:this.config.y,r:this.config.r},e)}),this.startMarker=t.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=t.addGroup();var n=1/4*this.config.r,a=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n*2.5,height:a,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-(1/4+1/8)*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-a/2,width:n,height:a,fill:"#ccc"},name:"playPauseBtn"})},i.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var r=1/4*this.config.r,t=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-(1/4+1/8)*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-t/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",t),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-t/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",t)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},i.prototype.getStartMarkerPath=function(){var r=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-r/Math.sqrt(3)/2,this.config.y-r/2],["L",this.config.x+r/Math.sqrt(3),this.config.y],["L",this.config.x-r/Math.sqrt(3)/2,this.config.y+r/2]]},i}(),V_=H_,W_="#ccc",j_="green",U_={fill:"#607889",stroke:"#607889"},Z_={fill:"#fff"},K_={fill:"green"},$_={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},Wl=110,so=50,Q_=function(){function i(r){this.controllerCfg=(0,y.deepMix)({},$_,r),this.group=r.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r+e,t],["L",r,t+e]]},i.prototype.getPreMarkerPath=function(r,t,e){return[["M",r,t-e],["L",r-e,t],["L",r,t+e]]},i.prototype.renderPlayButton=function(){var r=this.controllerCfg,t=r.width,e=r.height,n=r.x,a=r.y,o=r.hiddleToggle,s=r.fill,u=s===void 0?W_:s,h=r.stroke,p=h===void 0?j_:h,b=r.playBtnStyle,k=b===void 0?U_:b,R=r.preBtnStyle,Y=R===void 0?Z_:R,V=r.nextBtnStyle,Z=V===void 0?K_:V,it=e/2-5,tt=a+10,_t=this.group.addShape("rect",{attrs:{x:n,y:tt,width:t,height:e,stroke:p,fill:u},name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:tt,r:it}):this.playButton=new V_({group:this.group,x:t/2,y:tt+it+5,r:it,isPlay:this.isPlay,style:k}),this.group.addShape("path",{attrs:(0,he.__assign)({path:this.getPreMarkerPath(t/2-5*it,tt+it+5,it*.5)},Y),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,he.__assign)({path:this.getPreMarkerPath(t/2-4.5*it,tt+it+5,it*.5)},Y),name:"preStepBtn"}),this.group.addShape("path",{attrs:(0,he.__assign)({path:this.getNextMarkerPath(t/2+5*it,tt+it+5,it*.5)},Z),name:"nextStepBtn"}),this.group.addShape("path",{attrs:(0,he.__assign)({path:this.getNextMarkerPath(t/2+4.5*it,tt+it+5,it*.5)},Z),name:"nextStepBtn"}),_t.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent()},i.prototype.renderSpeedBtn=function(){var r=this.controllerCfg,t=r.y,e=r.width,n=r.hiddleToggle,a=this.group.addGroup({name:"speed-group"});this.speedGroup=a;for(var o=1,s=[],u=9,h=0;h<5;h++){var p=t+15+h*(h+1)+o;a.addShape("rect",{attrs:{x:e-(n?so:Wl),y:p,width:15,height:2,fill:"#ccc"},speed:u,name:"speed-rect"}),this.speedAxisY.push(p),s.push(u),u=u-2,o++}for(var h=0;h<4;h++)a.addShape("rect",{attrs:{x:e-(n?so:Wl),y:this.speedAxisY[h]+2,width:15,height:2*h+1,fill:"#fff",opacity:.3},speed:s[h]-1,name:"speed-rect"});this.speedText=a.addShape("text",{attrs:{x:e-(n?so:Wl)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc"}}),this.speedPoint=a.addShape("path",{attrs:{path:this.getPath(e-(n?so:Wl),this.speedAxisY[4]),fill:"#ccc"}})},i.prototype.getPath=function(r,t){return[["M",r,t],["L",r-12,t-6],["L",r-12,t+6],["Z"]]},i.prototype.renderToggleTime=function(){var r=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:r-so,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",r-so+3,this.speedAxisY[1]+6],["L",r-so+7,this.speedAxisY[1]+10],["L",r-so+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:"\u5355\u4E00\u65F6\u95F4",x:r-so+20,y:this.speedAxisY[1]+15,fill:"#ccc"}})},i.prototype.bindEvent=function(){var r=this,t=this.controllerCfg,e=t.width,n=t.hiddleToggle;this.speedGroup.on("speed-rect:click",function(a){r.speedPoint.attr("path",r.getPath(e-(n?so:Wl),a.y)),r.currentSpeed=a.target.get("speed"),r.speedText.attr("text",r.currentSpeed+".0X"),r.group.emit("timebarConfigChanged",{speed:r.currentSpeed,type:r.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(a){var o=a.target.get("isChecked");o?(r.checkedIcon.hide(),r.checkedText.attr("text","\u5355\u4E00\u65F6\u95F4"),r.currentType="range"):(r.checkedIcon.show(),r.checkedText.attr("text","\u65F6\u95F4\u8303\u56F4"),r.currentType="single"),a.target.set("isChecked",!o),r.group.emit("timebarConfigChanged",{type:r.currentType,speed:r.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Fx=Q_,Rx="timelinestart",Nx="timelineend",lo="valueChange",Ff="timebarConfigChanged",Rf="playPauseBtn",Nf="nextStepBtn",Yf="preStepBtn",J_={fill:"#416180",opacity:.05},q_={fill:"#416180",opacity:.15,radius:5},tI={fill:"#5B8FF9",opacity:.3,cursor:"move"},ap=2,eI={width:ap,height:24},rI={textBaseline:"middle",fill:"#000",opacity:.45},nI=function(){function i(r){var t=this;this.prevX=0,this.onMouseDown=function(mr){return function(zr){t.currentHandler=mr;var Ur=zr.originalEvent;Ur.stopPropagation(),Ur.preventDefault(),t.prevX=(0,y.get)(Ur,"touches.0.pageX",Ur.pageX);var Xr=t.canvas.get("container");Xr.addEventListener("mousemove",t.onMouseMove),Xr.addEventListener("mouseup",t.onMouseUp),Xr.addEventListener("mouseleave",t.onMouseUp),Xr.addEventListener("touchmove",t.onMouseMove),Xr.addEventListener("touchend",t.onMouseUp),Xr.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(mr){mr.stopPropagation(),mr.preventDefault();var zr=(0,y.get)(mr,"touches.0.pageX",mr.pageX),Ur=zr-t.prevX,Xr=t.adjustOffsetRange(Ur/t.width);t.updateStartEnd(Xr),t.updateUI(),t.prevX=zr},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var mr=t.canvas.get("container");mr&&(mr.removeEventListener("mousemove",t.onMouseMove),mr.removeEventListener("mouseup",t.onMouseUp),mr.removeEventListener("mouseleave",t.onMouseUp),mr.removeEventListener("touchmove",t.onMouseMove),mr.removeEventListener("touchend",t.onMouseUp),mr.removeEventListener("touchcancel",t.onMouseUp))};var e=r.x,n=e===void 0?0:e,a=r.y,o=a===void 0?0:a,s=r.width,u=s===void 0?100:s,h=r.height,p=r.padding,b=p===void 0?10:p,k=r.trendCfg,R=r.controllerCfg,Y=R===void 0?{speed:1}:R,V=r.backgroundStyle,Z=V===void 0?{}:V,it=r.foregroundStyle,tt=it===void 0?{}:it,_t=r.handlerStyle,It=_t===void 0?{}:_t,Ht=r.textStyle,le=Ht===void 0?{}:Ht,xe=r.start,Ce=xe===void 0?0:xe,me=r.end,Le=me===void 0?1:me,Ye=r.minText,Be=Ye===void 0?"":Ye,or=r.maxText,cr=or===void 0?"":or,ar=r.group,Cr=r.graph,wr=r.canvas,Mr=r.ticks,yr=r.type;this.graph=Cr,this.canvas=wr,this.group=ar,this.timeBarType=yr,this.x=n,this.y=o,this.width=u,this.height=h,this.padding=b,this.ticks=Mr,this.trendCfg=k,this.controllerCfg=Y,this.currentSpeed=Y.speed,yr==="trend"?this.backgroundStyle=(0,he.__assign)((0,he.__assign)({},J_),Z):yr==="simple"&&(this.backgroundStyle=(0,he.__assign)((0,he.__assign)({},q_),Z)),this.foregroundStyle=(0,he.__assign)((0,he.__assign)({},tI),tt),this.handlerStyle=(0,he.__assign)((0,he.__assign)({},eI),It),this.textStyle=(0,he.__assign)((0,he.__assign)({},rI),le),this.currentMode="range",this.start=Ce,this.end=Le,this.minText=Be,this.maxText=cr,this.renderSlider()}return i.prototype.update=function(r){var t=r.x,e=r.y,n=r.width,a=r.height,o=r.minText,s=r.maxText,u=r.start,h=r.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(h,0)),(0,y.assign)(this,{x:t,y:e,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(r,t){this.minTextShape.attr("text",r),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var r=this,t=this,e=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,y.size)((0,y.get)(this.trendCfg,"data"))){var o=new Y_((0,he.__assign)((0,he.__assign)({x:this.x,y:this.y,width:e,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:(0,he.__assign)({x:0,y:0,width:e,height:n},this.backgroundStyle)});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:(0,he.__assign)({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:(0,he.__assign)({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1},this.textStyle),capture:!1})):(this.minTextShape=u.addShape("text",{attrs:(0,he.__assign)({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:(0,he.__assign)({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:(0,he.__assign)({x:0,y:this.y,height:n},this.foregroundStyle)});var h=(0,y.get)(this.handlerStyle,"width",2),p=(0,y.get)(this.handlerStyle,"height",24),b=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Dx((0,he.__assign)({name:"minHandlerShape",group:b,type:a,x:this.x,y:this.y,width:h,height:p,cursor:"ew-resize"},this.handlerStyle));var k=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Dx((0,he.__assign)({name:"maxHandlerShape",group:k,type:a,x:this.x,y:this.y,width:h,height:p,cursor:"ew-resize"},this.handlerStyle));var R=this.ticks,Y=e/(R.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(Z){Z.destroy()});var V=-Infinity;this.textList=R.map(function(Z,it){r.tickPosList.push(r.x+it*Y);var tt=r.group.addShape("text",{attrs:{x:r.x+it*Y,y:r.y+n+5,text:Z,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),_t=r.group.addShape("line",{attrs:{x1:r.x+it*Y,y1:r.y+n+2,x2:r.x+it*Y,y2:r.y+n+6,lineWidth:1,stroke:"#ccc"}}),It=tt.getBBox();return It.minX>V?(tt.show(),_t.show(),V=It.minX+It.width+10):(tt.hide(),_t.hide()),tt}),this.controllerBtnGroup=new Fx({group:this.group,x:this.x,y:this.y+n+25,width:e,height:40}),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},i.prototype.bindEvents=function(){var r=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var e=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),e.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on(Rf+":click",function(){r.isPlay=!r.isPlay,r.currentHandler=r.maxHandlerShape,r.changePlayStatus()}),this.group.on(Nf+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(.01),r.updateUI()}),this.group.on(Yf+":click",function(){r.currentHandler=r.maxHandlerShape,r.updateStartEnd(-.01),r.updateUI()}),this.group.on(Ff,function(n){var a=n.type,o=n.speed;r.currentSpeed=o,r.currentMode=a,a==="single"?(r.minHandlerShape.hide(),r.foregroundShape.hide(),r.minTextShape.hide()):a==="range"&&(r.minHandlerShape.show(),r.foregroundShape.show(),r.minTextShape.show())})},i.prototype.adjustTickIndex=function(r){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=r&&r<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-r)<Math.abs(r-this.tickPosList[t+1])?t:t+1},i.prototype.adjustOffsetRange=function(r){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,e=1-this.start;return Math.min(e,Math.max(t,r))}case this.maxHandlerShape:{var t=0-this.end,e=1-this.end;return Math.min(e,Math.max(t,r))}case this.foregroundShape:{var t=0-this.start,e=1-this.end;return Math.min(e,Math.max(t,r))}default:return 0}},i.prototype.updateStartEnd=function(r){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=r,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=r,this.end+=r,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;default:break}},i.prototype.updateUI=function(){var r=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.start*this.width,e=this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",e-t);var n=(0,y.get)(this.handlerStyle,"width",ap);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,e]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,y.each)(o,function(u,h){return r.minTextShape.attr(h,u)}),this.maxHandlerShape.setX(e-n/2),(0,y.each)(s,function(u,h){return r.maxTextShape.attr(h,u)}),this.currentMode==="range"?this.graph.emit(lo,{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit(lo,{value:[this.end,this.end]})},i.prototype.dodgeText=function(r){var t,e,n=2,a=(0,y.get)(this.handlerStyle,"width",ap),o=this.minTextShape,s=this.maxTextShape,u=r[0],h=r[1],p=!1;u>h&&(t=[h,u],u=t[0],h=t[1],e=[s,o],o=e[0],s=e[1],p=!0);var b=o.getBBox(),k=s.getBBox(),R=null,Y=null;return this.timeBarType==="trend"?(R=b.width>u-n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},Y=k.width>this.width-h-n?{x:h-a/2-n,textAlign:"right"}:{x:h+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(R=b.width>u-n?{x:u+a/2+n,textAlign:"center"}:{x:u-a/2-n,textAlign:"center"},Y=k.width>this.width-h-n?{x:h-a/2-n,textAlign:"center"}:{x:h+a/2+n,textAlign:"center"}),p?[Y,R]:[R,Y]},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r,e=t.ticks,n=t.width,a=r.currentSpeed,o=n/e.length,s=o/((10-a)*1e3/60),u=r.adjustOffsetRange(s/r.width);r.updateStartEnd(u),r.updateUI(),r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Rx,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(Nx,null))},i.prototype.destory=function(){this.graph.off(lo);var r=this.group,t=r.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var e=r.find(function(n){return n.get("name")==="maxHandlerShape"});e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),r.off(Rf+":click"),r.off(Nf+":click"),r.off(Yf+":click"),r.off(Ff),r.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),iI=nI,Sk={opacity:.5,fill:"#000"},Ck={opacity:.5,fill:"#000",r:5},Mk={fill:"#fff",fontSize:12},aI=function(){function i(r){var t=r.x,e=t===void 0?0:t,n=r.y,a=n===void 0?0:n,o=r.container,s=r.text,u=r.padding,h=u===void 0?[4,4,4,4]:u,p=r.className,b=p===void 0?"g6-component-timebar-tooltip":p,k=r.backgroundColor,R=k===void 0?"#000":k,Y=r.textColor,V=Y===void 0?"#fff":Y,Z=r.opacity,it=Z===void 0?.8:Z,tt=r.fontSize,_t=tt===void 0?12:tt;this.container=o,this.className=b,this.backgroundColor=R,this.textColor=V,this.x=e,this.y=a,this.text=s,this.padding=h,this.opacity=it,this.fontSize=_t,this.render()}return i.prototype.render=function(){var r=this,t=r.className,e=r.x,n=r.y,a=r.backgroundColor,o=r.textColor,s=r.text,u=r.padding,h=r.opacity,p=r.fontSize,b=r.container,k=(0,ki.Z)("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+h+'"></div>');(0,y.isString)(b)&&(b=document.getElementById(b)),b.appendChild(k),r.parentHeight=b.offsetHeight,r.parentWidth=b.offsetWidth,(0,ai.Z)(k,{visibility:"hidden",top:0,left:0});var R=(0,ki.Z)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+a+"; font-size: "+p+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+o+"; padding: "+u[0]+"px "+u[1]+"px "+u[2]+"px "+u[3]+"px'></div>");R.innerHTML=s,k.appendChild(R),r.backgroundDOM=R;var Y=(0,ki.Z)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+a+"'></div>");k.appendChild(Y),r.arrowDOM=Y,r.container=k},i.prototype.show=function(r){var t=this,e=r.text,n=r.x,a=r.y,o=r.clientX,s=r.clientY;t.backgroundDOM.innerHTML=e;var u=t.backgroundDOM.offsetWidth,h=t.backgroundDOM.offsetHeight,p=t.arrowDOM.offsetWidth,b=t.arrowDOM.offsetHeight;(0,ai.Z)(t.container,{top:-h-b+"px",left:n+"px",visibility:"visible"}),(0,ai.Z)(t.backgroundDOM,{marginLeft:-u/2+"px"}),(0,ai.Z)(t.arrowDOM,{marginLeft:-p/2+"px",top:h+"px"});var k=n-u/2,R=n+u/2;k<0?(0,ai.Z)(t.backgroundDOM,{marginLeft:-u/2-k+"px"}):R>t.parentWidth&&(0,ai.Z)(t.backgroundDOM,{marginLeft:-u/2-R+t.parentWidth+12+"px"})},i.prototype.hide=function(){(0,ai.Z)(this.container,{top:0,left:0,visibility:"hidden"})},i}(),oI=aI,sI={fill:"#5B8FF9"},lI={fill:"#e6e8e9"},uI=function(){function i(r){this.frameCount=0;var t=r.graph,e=r.canvas,n=r.group,a=r.width,o=r.height,s=r.padding,u=r.data,h=r.start,p=r.end,b=r.x,k=b===void 0?0:b,R=r.y,Y=R===void 0?0:R,V=r.tickLabelFormatter,Z=r.selectedTickStyle,it=Z===void 0?sI:Z,tt=r.unselectedTickStyle,_t=tt===void 0?lI:tt,It=r.tooltipBackgroundColor,Ht=r.tooltipFomatter;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=e,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=h,this.end=p,this.tickLabelFormatter=V,this.selectedTickStyle=it,this.unselectedTickStyle=_t,this.x=k,this.y=Y,this.tooltipBackgroundColor=It,this.tooltipFomatter=Ht,this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var r=this,t=r.width,e=r.height,n=r.padding,a=r.data,o=r.start,s=r.end,u=r.tickLabelFormatter,h=r.selectedTickStyle,p=r.unselectedTickStyle,b=t-2*n,k=10,R=4,Y=3*n+R+k,V=e-Y-2*n,Z=2,it=a.length,tt=(b-Z*(it-1))/it;this.tickWidth=tt;var _t=this.sliceGroup,It=[],Ht=[],le=Math.round(it*o),xe=Math.round(it*s);this.startTickRectId=le,this.endTickRectId=xe,a.forEach(function(me,Le){var Ye=Le>=le&&Le<=xe,Be=Ye?h:p,or=_t.addShape("rect",{attrs:(0,he.__assign)({x:n+Le*(tt+Z),y:n,width:tt,height:V},Be),draggable:!0,name:"tick-rect-"+Le}),cr=_t.addShape("rect",{attrs:{x:n+Le*tt+Z*(2*Le-1)/2,y:n,width:Le===0||Le===it-1?tt+Z/2:tt+Z,height:V,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+Le});cr.toFront();var ar=or.getBBox(),Cr=(ar.minX+ar.maxX)/2;It.push({rect:or,pickRect:cr,value:me.date,x:Cr,y:ar.minY});var wr;if(u?(wr=u(me),!(0,y.isString)(wr)&&wr&&(wr=me.date)):Le%Math.round(it/10)==0&&(wr=me.date),wr){Ht.push(wr);var Mr=ar.maxY+n*2;_t.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Cr,y1:Mr,x2:Cr,y2:Mr+R}});var yr=Mr+R+n,mr=_t.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Cr,y:yr,textAlign:"center",text:wr,textBaseline:"top",fontSize:10},capture:!1}),zr=mr.getBBox();zr.maxX>t?mr.attr("textAlign","right"):zr.minX<0&&mr.attr("textAlign","left")}}),this.tickRects=It;var Ce=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Fx({group:Ce,x:this.x,y:this.y+e+5,width:t,height:40,hiddleToggle:!0,speed:this.currentSpeed})},i.prototype.initEvent=function(){var r=this,t=this.sliceGroup;t.on("click",function(p){var b=p.target;if(!(b.get("type")!=="rect"||!b.get("name"))){var k=parseInt(b.get("name").split("-")[2],10);if(!isNaN(k)){var R=r.tickRects,Y=r.unselectedTickStyle;R.forEach(function(tt){tt.rect.attr(Y)});var V=r.selectedTickStyle;R[k].rect.attr(V),r.startTickRectId=k,r.endTickRectId=k;var Z=R.length,it=k/Z;r.graph.emit(lo,{value:[it,it]})}}}),t.on("dragstart",function(p){var b=r.tickRects,k=r.unselectedTickStyle;b.forEach(function(tt){tt.rect.attr(k)});var R=p.target,Y=parseInt(R.get("name").split("-")[2],10),V=r.selectedTickStyle;b[Y].rect.attr(V),r.startTickRectId=Y;var Z=b.length,it=Y/Z;r.graph.emit(lo,{value:[it,it]}),r.dragging=!0}),t.on("dragover",function(p){if(!!r.dragging&&p.target.get("type")==="rect"){for(var b=parseInt(p.target.get("name").split("-")[2],10),k=r.startTickRectId,R=r.tickRects,Y=r.selectedTickStyle,V=r.unselectedTickStyle,Z=0;Z<R.length;Z++){var it=Z>=k&&Z<=b?Y:V;R[Z].rect.attr(it)}var tt=R.length;r.endTickRectId=b;var _t=k/tt,It=b/tt;r.graph.emit(lo,{value:[_t,It]})}}),t.on("drop",function(p){if(!!r.dragging&&(r.dragging=!1,p.target.get("type")==="rect")){var b=r.startTickRectId,k=parseInt(p.target.get("name").split("-")[2],10);if(!(k<b)){var R=r.selectedTickStyle,Y=r.tickRects;Y[k].rect.attr(R),r.endTickRectId=k;var V=Y.length,Z=b/V,it=k/V;r.graph.emit(lo,{value:[Z,it]})}}});var e=this,n=e.tooltipBackgroundColor,a=e.tooltipFomatter,o=e.canvas,s=new oI({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(p){var b=p.pickRect;b.on("mouseenter",function(k){var R=k.target;if(R.get("type")==="rect"){var Y=parseInt(R.get("name").split("-")[2],10),V=o.getClientByPoint(u[Y].x,u[Y].y);s.show({x:u[Y].x,y:u[Y].y,clientX:V.x,clientY:V.y,text:a?a(u[Y].value):u[Y].value})}}),b.on("mouseleave",function(k){s.hide()})});var h=this.group;h.on(Rf+":click",function(){r.isPlay=!r.isPlay,r.changePlayStatus()}),h.on(Nf+":click",function(){r.updateStartEnd(1)}),h.on(Yf+":click",function(){r.updateStartEnd(-1)}),h.on(Ff,function(p){var b=p.type,k=p.speed;r.currentSpeed=k})},i.prototype.changePlayStatus=function(r){r===void 0&&(r=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Rx,null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),r&&this.graph.emit(Nx,null))},i.prototype.startPlay=function(){var r=this;return window.requestAnimationFrame(function(){var t=r.currentSpeed;r.frameCount%(60/t)==0&&(r.frameCount=0,r.updateStartEnd(1)),r.frameCount++,r.isPlay&&(r.playHandler=r.startPlay())})},i.prototype.updateStartEnd=function(r){var t=this,e=this.tickRects,n=e.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(r>0?t.endTickRectId++:(e[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)e[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(e[t.endTickRectId]){e[t.endTickRectId].rect.attr(o);var h=t.startTickRectId/n,p=t.endTickRectId/n;this.graph.emit(lo,{value:[h,p]})}},i.prototype.destory=function(){this.graph.off(lo);var r=this.sliceGroup;r.off("click"),r.off("dragstart"),r.off("dragover"),r.off("drop"),this.tickRects.forEach(function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")}),this.tickRects.length=0,r.off(Rf+":click"),r.off(Nf+":click"),r.off(Yf+":click"),r.off(Ff),this.sliceGroup.destroy()},i}(),hI=uI,fI=8,cI=26,vI=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]}}},r.prototype.initContainer=function(){var t=this.get("graph"),e=this._cfgs,n=e.width,a=e.height,o=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container"),h;s?h=s:(h=(0,ki.Z)("<div class='"+o+"'></div>"),(0,ai.Z)(h,{position:"relative"})),u.appendChild(h),this.set("timeBarContainer",h);var p,b=t.get("renderer");b==="SVG"?p=new Fl.Z({container:h,width:n,height:a}):p=new os.Z({container:h,width:n,height:a}),this.set("canvas",p)},r.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent()},r.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,n=t.x,a=t.y,o=t.padding,s=t.type,u=t.trend,h=t.slider,p=t.controllerCfg,b=u.data,k=(0,he.__rest)(u,["data"]),R=e-2*o,Y=s==="trend"?cI:fI,V=this.get("graph"),Z=this.get("timeBarGroup"),it=this.get("canvas"),tt=null;if(s==="trend"||s==="simple")tt=new iI((0,he.__assign)((0,he.__assign)({graph:V,canvas:it,group:Z,type:s,x:n+o,y:s==="trend"?a+o:a+o+15,width:R,height:Y,padding:o,trendCfg:(0,he.__assign)((0,he.__assign)({},k),{data:b.map(function(It){return It.value})})},h),{ticks:b.map(function(It){return It.date}),handlerStyle:(0,he.__assign)((0,he.__assign)({},h.handlerStyle),{height:h.height||Y}),controllerCfg:p}));else if(s==="tick"){var _t=this._cfgs.tick;tt=new hI((0,he.__assign)({graph:V,canvas:it,group:Z,x:n+o,y:a+o},_t))}this.set("timebar",tt)},r.prototype.filterData=function(t){var e=t.value,n=null,a=this._cfgs.type;if(a==="trend"||a==="simple"?n=this._cfgs.trend.data:a==="tick"&&(n=this._cfgs.tick.data),!n||n.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var o=this.get("rangeChange"),s=this.get("graph"),u=Math.round(n.length*e[0]),h=Math.round(n.length*e[1]);h=h>=n.length?n.length-1:h;var p=n[u].date,b=n[h].date;if(a!=="tick"){var k=this.get("timebar");k.setText(p,b)}if(o)o(s,p,b);else{var R=s.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=R);var Y=this.cacheGraphData.nodes.filter(function(it){return it.date>=p&&it.date<=b}),V=Y.map(function(it){return it.id}),Z=this.cacheGraphData.edges.filter(function(it){return V.includes(it.source)&&V.includes(it.target)});s.changeData({nodes:Y,edges:Z})}},r.prototype.initEvent=function(){var t=this,e=0,n=0,a=this._cfgs.type;!a||a==="trend"||a==="simple"?(e=this._cfgs.slider.start,n=this._cfgs.slider.end):a==="tick"&&(e=this._cfgs.tick.start,n=this._cfgs.tick.end);var o=this.get("graph");o.on("afterrender",function(){t.filterData({value:[e,n]})}),o.on(lo,function(s){t.filterData(s)})},r.prototype.destroy=function(){var t=this.get("timebar");t&&t.destory&&t.destory(),i.prototype.destroy.call(this);var e=this.get("timeBarContainer");if(e){var n=this.get("container");n||(n=this.get("graph").get("container")),n.removeChild(e)}},r}(ao),dI=vI;function pI(i,r){var t,e;if(i.naturalWidth)t=i.naturalWidth,e=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){r==null||r(n.width,n.height)}}return[t,e]}var gI=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},r.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},r.prototype.disableRefresh=function(){this.set("refresh",!1)},r.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},r.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},r.prototype.initViewport=function(){var t=this,e=this._cfgs,n=e.graph;if(!this.destroyed){var a=this.get("container"),o=(0,ki.Z)("<div class="+e.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),s=0,u=0,h=!1,p=0,b=0,k=0,R=0,Y=0,V=0;a.addEventListener("mousedown",function(Z){if(e.refresh=!1,Z.target===o){var it=o.style;k=parseInt(it.width,10),R=parseInt(it.height,10);var tt=t.get("width"),_t=t.get("height");k>tt||R>_t||(V=n.getZoom(),Y=t.get("ratio"),h=!0,s=Z.clientX,u=Z.clientY)}},!1),a.addEventListener("mousemove",function(Z){if(!(!h||(0,to.default)(Z.clientX)||(0,to.default)(Z.clientY))){var it=t.get("width"),tt=t.get("height"),_t=o.style;p=parseInt(_t.left,10),b=parseInt(_t.top,10),k=parseInt(_t.width,10),R=parseInt(_t.height,10);var It=s-Z.clientX,Ht=u-Z.clientY;p-It<0?It=p:p-It+k>=it&&(It=0),b-Ht<0?Ht=b:b-Ht+R>=tt&&(Ht=0),p-=It,b-=Ht,(0,ai.Z)(o,{left:p+"px",top:b+"px"}),n.translate(It*V/Y,Ht*V/Y),s=Z.clientX,u=Z.clientY}},!1),a.addEventListener("mouseleave",function(){h=!1,e.refresh=!0},!1),a.addEventListener("mouseup",function(){h=!1,e.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},r.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,h=a.getGroup(),p=h.getCanvasBBox(),b=[(p.minX+p.maxX)/2,(p.minY+p.maxY)/2],k=[p.maxX-p.minX,p.maxY-p.minY],R={centerX:b[0],centerY:b[1],width:0,height:0,minX:0,minY:0};p[0]/p[1]>u?(R.width=k[0],R.height=R.width/u):(R.height=k[1],R.width=R.height*u),R.minX=b[0]-R.width/2,R.minY=b[1]-R.height/2;var Y=h.getMatrix();Y||(Y=[1,0,0,0,1,0,0,0,1]);var V=Mo.invert([],Y),Z=kl({x:R.minX,y:R.minY},V),it=a.getCanvasByPoint(Z.x,Z.y),tt=this.get("viewport");tt||this.initViewport();var _t=o/R.width,It=_t*e,Ht=_t*n,le=e*-it.x/R.width,xe=n*-it.y/R.height,Ce=le+It,me=xe+Ht;le<0&&(It+=le,le=0),Ce>e&&(It=It-(Ce-e)),xe<0&&(Ht+=xe,xe=0),me>n&&(Ht=Ht-(me-n)),this.set("ratio",t);var Le=le+"px",Ye=xe+"px";(0,ai.Z)(tt,{left:Le,top:Ye,width:It+"px",height:Ht+"px"})}},r.prototype.init=function(){this.initContainer()},r.prototype.initContainer=function(){var t=this,e=t.get("graph"),n=e.get("width"),a=e.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),h=t.get("width"),p=t.get("height");!h&&!p&&(h=200),h?(p=o*h,t.set("height",p)):(h=1/o*p,t.set("width",h));var b=(0,ki.Z)("<div class='"+s+"' style='width: "+h+"px; height: "+p+"px; overflow: hidden; position: relative;'></div>");(0,ti.default)(u)&&(u=document.getElementById(u)),u?u.appendChild(b):e.get("container").appendChild(b),t.set("container",b);var k=(0,ki.Z)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');b.appendChild(k);var R=(0,ki.Z)('<span style="display: table-cell; vertical-align: middle; "></span>');k.appendChild(R),t.set("containerDOM",k),t.set("containerSpan",R);var Y=(0,ki.Z)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');t.set("imgDOM",Y),t.updateImgSize(),R.appendChild(Y),t.updateCanvas()},r.prototype.updateImgSize=function(){var t=this,e=t.get("imgDOM"),n=t.get("width"),a=t.get("height");e.onload=function(){var o=pI(e);o[0]>o[1]?e.width=n:e.height=a}},r.prototype.updateCanvas=function(){var t=this.get("refresh");if(!!t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=e.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},r.prototype.getViewport=function(){return this.get("viewport")},r.prototype.getContainer=function(){return this.get("container")},r.prototype.updateGraphImg=function(t){var e=this,n=e.get("imgDOM");n.remove(),e.set("graphImg",t);var a=(0,ki.Z)('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');e.set("imgDOM",a),a.src=t,e.updateImgSize();var o=e.get("containerSpan");o.appendChild(a),e.updateCanvas()},r.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},r}(ao),yI=gI,Yx=.05,Gx={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},mI=function(i){(0,he.__extends)(r,i);function r(){return i!==null&&i.apply(this,arguments)||this}return r.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,Ei.d9)(Gx),showLabel:"edge",scaleRBy:"wheel"}},r.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},r.prototype.init=function(){var t=this,e=t.get("showLabel"),n=e==="node"||e==="both",a=e==="edge"||e==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},r.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");(!n||n.destroyed)&&(e.filter(t),n=e.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){e.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){e.scaleRByWheel(a)}))},r.prototype.scaleRByWheel=function(t){var e=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=e.get("graph"),a,o=e.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Yx:a=1/(1-Yx);var h=e.get("maxR"),p=e.get("minR"),b=e.get("r");(b>(h||n.get("height"))&&a>1||b<(p||n.get("height")*.05)&&a<1)&&(a=1),b*=a,e.set("r",b),e.filter(t)}},r.prototype.filter=function(t){var e=this,n=e.get("graph"),a=n.getNodes(),o={},s=e.get("r"),u=e.get("type"),h={x:t.x,y:t.y};e.updateDelegate(h,s);var p=e.get("shouldShow"),b=e.get("vShapes");b&&b.forEach(function(it){it.remove(),it.destroy()}),b=[],a.forEach(function(it){var tt=it.getModel(),_t=tt.x,It=tt.y;Bl({x:_t,y:It},h)<s&&(o[tt.id]=it)});var k=n.getEdges(),R=[];k.forEach(function(it){var tt=it.getModel(),_t=tt.source,It=tt.target;p(tt)&&(u==="only-source"||u==="one"?o[_t]&&!o[It]&&R.push(it):u==="only-target"||u==="one"?o[It]&&!o[_t]&&R.push(it):u==="both"&&o[_t]&&o[It]&&R.push(it))});var Y=e.get("showNodeLabel"),V=e.get("showEdgelabel"),Z=n.get("group");R.forEach(function(it){var tt=it.get("group").get("children");tt.forEach(function(_t){var It=_t.get("type"),Ht=Z.addShape(It,{attrs:_t.attr()});b.push(Ht),Y&&It==="text"&&Ht.set("visible",!0)})}),Object.keys(o).forEach(function(it){var tt=o[it],_t=tt.get("group").clone();if(Z.add(_t),b.push(_t),V)for(var It=_t.get("children"),Ht=0;Ht<It.length;Ht++){var le=It[Ht];le.get("type")==="text"&&le.set("visible",!0)}}),e.set("vShapes",b)},r.prototype.updateParams=function(t){var e=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,h=t.showLabel,p=t.shouldShow;if(isNaN(t.r)||e.set("r",n),isNaN(s)||e.set("maxR",s),isNaN(o)||e.set("minR",o),(a==="mousemove"||a==="click")&&e.set("trigger",a),u==="wheel"||u==="unset"){e.set("scaleRBy",u),e.get("delegate").remove(),e.get("delegate").destroy();var b=e.get("dPercentText");b&&(b.remove(),b.destroy())}(h==="node"||h==="both")&&e.set("showNodeLabel",!0),(h==="edge"||h==="both")&&e.set("showEdgeLabel",!0),p&&e.set("shouldShow",p)},r.prototype.updateDelegate=function(t,e){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||Gx;o=s.addShape("circle",{attrs:(0,he.__assign)({r:e,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(h){n.scaleRByWheel(h)})}else o.attr({x:t.x,y:t.y,r:e});n.set("delegate",o)},r.prototype.clear=function(){var t=this,e=t.get("vShapes");e&&e.forEach(function(a){a.remove(),a.destroy()}),e=[],t.set("vShapes",e);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},r.prototype.destroy=function(){this.clear()},r}(ao),xI=mI,oa={Menu:v_,Grid:h_,Minimap:m_,Bundling:w_,ToolBar:E_,Tooltip:T_,Fisheye:C_,TimeBar:dI,ImageMinimap:yI,EdgeFilterLens:xI};function bI(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next;return n[o.get("id")]?!1:(n[o.get("id")]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}function zx(i,r,t,e){e.enter({current:r,previous:t}),i.getNeighbors(r,"target").forEach(function(n){e.allowTraversal({previous:t,current:r,next:n})&&zx(i,n,r,e)}),e.leave({current:r,previous:t})}function Xx(i,r,t){var e=null,n=i.findById(r);zx(i,n,e,bI(t))}var wI=function(){function i(){this.linkedList=new hx}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(r){this.linkedList.append(r)},i.prototype.dequeue=function(){var r=this.linkedList.deleteHead();return r?r.value:null},i.prototype.toString=function(r){return this.linkedList.toString(r)},i}(),SI=wI;function CI(i){i===void 0&&(i={});var r=i,t=function(){},e=function(){var n={};return function(a){var o=a.next,s=o.get("id");return n[s]?!1:(n[s]=!0,!0)}}();return r.allowTraversal=i.allowTraversal||e,r.enter=i.enter||t,r.leave=i.leave||t,r}var MI=function(r,t,e){var n=CI(e),a=new SI,o=r.findById(t);a.enqueue(o);for(var s=null,u=function(){var p=a.dequeue();n.enter({current:p,previous:s}),r.getNeighbors(p,"target").forEach(function(b){n.allowTraversal({previous:s,current:p,next:b})&&a.enqueue(b)}),n.leave({current:p,previous:s}),s=p};!a.isEmpty();)u()},EI=MI;function AI(i){for(var r=[],t={},e=[],n=function u(h){e.push(h),t[h.get("id")]=!0;for(var p=h.getNeighbors(),b=0;b<p.length;++b){var k=p[b];t[k.get("id")]||u(k)}},a=0;a<i.length;a++){var o=i[a];if(!t[o.get("id")]){n(o);for(var s=[];e.length>0;)s.push(e.pop());r.push(s)}}return r}function Hx(i){for(var r=[],t={},e={},n={},a=[],o=0,s=function b(k){e[k.get("id")]=o,n[k.get("id")]=o,o+=1,r.push(k),t[k.get("id")]=!0;for(var R=k.getNeighbors("target").filter(function(tt){return i.indexOf(tt)>-1}),Y=0;Y<R.length;Y++){var V=R[Y];!e[V.get("id")]&&e[V.get("id")]!==0?(b(V),n[k.get("id")]=Math.min(n[k.get("id")],n[V.get("id")])):t[V.get("id")]&&(n[k.get("id")]=Math.min(n[k.get("id")],e[V.get("id")]))}if(n[k.get("id")]===e[k.get("id")]){for(var Z=[];r.length>0;){var it=r.pop();if(t[it.get("id")]=!1,Z.push(it),it===k)break}Z.length>0&&a.push(Z)}},u=0,h=i;u<h.length;u++){var p=h[u];!e[p.get("id")]&&e[p.get("id")]!==0&&s(p)}return a}function Vx(i,r){var t=r===void 0?i.get("directed"):r,e=i.getNodes();return t?Hx(e):AI(e)}var TI=function(r){var t=null,e={},n={},a={},o={};r.getNodes().forEach(function(h){n[h.getID()]=h});for(var s={enter:function(p){var b=p.current,k=p.previous;if(a[b.getID()]){t={};for(var R=b,Y=k;Y.getID()!==b.getID();)t[R.getID()]=Y,R=Y,Y=e[Y.getID()];t[R.getID()]=Y}else a[b.getID()]=b,delete n[b.getID()],e[b.getID()]=k},leave:function(p){var b=p.current;o[b.getID()]=b,delete a[b.getID()]},allowTraversal:function(p){var b=p.next;return t?!1:!o[b.getID()]}};Object.keys(n).length;){var u=Object.keys(n)[0];Xx(r,u,s)}return t},Wx=function(r,t,e){var n,a,o;e===void 0&&(e=!0);for(var s=[],u=Vx(r,!1),h=0,p=u;h<p.length;h++){var b=p[h];if(!!b.length)for(var k=b[0],R=k.get("id"),Y=[k],V=(n={},n[R]=k,n),Z=(a={},a[R]=new Set,a);Y.length>0;)for(var it=Y.pop(),tt=it.get("id"),_t=it.getNeighbors(),It=0;It<_t.length;It+=1){var Ht=_t[It],le=Ht.get("id");if(le===tt)s.push((o={},o[Ht.getID()]=it,o));else if(!(le in Z))V[le]=it,Y.push(Ht),Z[le]=new Set([it]);else if(!Z[tt].has(Ht)){for(var xe=!0,Ce=[Ht,it],me=V[tt];Z[le].size&&!Z[le].has(me)&&(Ce.push(me),me!==V[me.getID()]);)me=V[me.getID()];if(Ce.push(me),t&&e?(xe=!1,Ce.findIndex(function(Be){return t.indexOf(Be.get("id"))>-1})>-1&&(xe=!0)):t&&!e&&Ce.findIndex(function(Be){return t.indexOf(Be.get("id"))>-1})>-1&&(xe=!1),xe){for(var Le={},Ye=1;Ye<Ce.length;Ye+=1)Le[Ce[Ye-1].getID()]=Ce[Ye];Ce.length&&(Le[Ce[Ce.length-1].getID()]=Ce[0]),s.push(Le)}Z[le].add(it)}}}return s},jx=function(r,t,e){e===void 0&&(e=!0);for(var n=[],a=new Set,o=[],s=[],u={},h={},p=function(Le){for(var Ye=[Le];Ye.length>0;){var Be=Ye.pop();a.has(Be)&&(a.delete(Be),o[Be.get("id")].forEach(function(or){Ye.push(or)}),o[Be.get("id")].clear())}},b=function me(Le,Ye,Be){var or=!1;if(t&&e===!1&&t.indexOf(Le.get("id"))>-1)return or;n.push(Le),a.add(Le);for(var cr=Be[Le.getID()],ar=0;ar<cr.length;ar+=1){var Cr=u[cr[ar]];if(Cr===Ye){for(var wr={},Mr=1;Mr<n.length;Mr+=1)wr[n[Mr-1].getID()]=n[Mr];n.length&&(wr[n[n.length-1].getID()]=n[0]),s.push(wr),or=!0}else a.has(Cr)||me(Cr,Ye,Be)&&(or=!0)}if(or)p(Le);else for(var ar=0;ar<cr.length;ar+=1){var Cr=u[cr[ar]];o[Cr.get("id")].has(Le)||o[Cr.get("id")].add(Le)}return n.pop(),or},k=r.getNodes(),R=0;R<k.length;R+=1){var Y=k[R],V=Y.getID();h[V]=R,u[R]=Y}if(t&&e)for(var R=0;R<t.length;R++){var V=t[R];h[k[R].getID()]=h[V],h[V]=0,u[0]=r.findById(V),u[h[k[R].getID()]]=k[R]}for(var Z=function(Le){for(var Ye,Be,or=Infinity,cr=0;cr<Le.length;cr+=1)for(var ar=Le[cr],Cr=0;Cr<ar.length;Cr++){var wr=h[ar[Cr].getID()];wr<or&&(or=wr,Be=cr)}for(var Mr=Le[Be],yr=[],cr=0;cr<Mr.length;cr+=1){var mr=Mr[cr];yr[mr.getID()]=[];for(var zr=0,Ur=mr.getNeighbors("target").filter(function(Zr){return Mr.indexOf(Zr)>-1});zr<Ur.length;zr++){var Xr=Ur[zr];Xr===mr&&!(e===!1&&t.indexOf(mr.getId())>-1)?s.push((Ye={},Ye[mr.getID()]=mr,Ye)):yr[mr.getID()].push(h[Xr.getID()])}}return{component:Mr,adjList:yr,minIdx:or}},it=0;it<k.length;){var tt=k.filter(function(me){return h[me.getID()]>=it}),_t=Hx(tt).filter(function(me){return me.length>1});if(_t.length===0)break;var It=Z(_t),Ht=It.minIdx,le=It.adjList,xe=It.component;if(xe.length>1){xe.forEach(function(me){o[me.get("id")]=new Set});var Ce=u[Ht];if(t&&e&&t.indexOf(Ce.get("id"))===-1)return s;b(Ce,Ce,le),it=Ht+1}else break}return s},PI=function(r,t,e,n){return n===void 0&&(n=!0),t===void 0&&(t=r.get("directed")),t?jx(r,e,n):Wx(r,e,n)},LI=TI,_I=function(r,t,e,n){var a=r.getNodes(),o=[],s={},u={},h={};a.forEach(function(Z,it){var tt=Z.getID();o.push(tt),u[tt]=Infinity,tt===t&&(u[tt]=0)});for(var p=a.length,b=function(it){var tt=II(u,a,s),_t=tt.get("id");if(s[_t]=!0,u[_t]===Infinity)return"continue";var It=[];e?It=tt.getOutEdges():It=tt.getEdges(),It.forEach(function(Ht){var le=Ht.getTarget().getID(),xe=Ht.getSource().getID(),Ce=le===_t?xe:le,me=n&&Ht.getModel()[n]?Ht.getModel()[n]:1;u[Ce]>u[tt.get("id")]+me&&(u[Ce]=u[tt.get("id")]+me,h[Ce]=tt.get("id"))})},k=0;k<p;k++)b(k);var R={};for(var Y in u){R[Y]=[Y];for(var V=h[Y];V!==void 0;)R[Y].unshift(V),V=h[V]}return{length:u,path:R}};function II(i,r,t){for(var e=Infinity,n,a=0;a<r.length;a++){var o=r[a].get("id");!t[o]&&i[o]<=e&&(e=i[o],n=r[a])}return n}var OI=_I,kI=function(r,t,e,n,a){(0,y.isString)(t)&&(t=r.findById(t)),(0,y.isString)(e)&&(e=r.findById(e));var o=OI(r,t.get("id"),n,a),s=o.length,u=o.path;return{length:s[e.get("id")],path:u[e.get("id")]}},BI=function(r,t,e,n){var a;if((0,y.isString)(t)&&(t=r.findById(t)),(0,y.isString)(e)&&(e=r.findById(e)),n===void 0&&(n=r.get("directed")),t===e)return[[t.get("id")]];var o=[t],s=(a={},a[t.get("id")]=!0,a),u=[],h=[],p=n?t.getNeighbors("target"):t.getNeighbors();for(u.push(p);o.length>0&&u.length>0;){var b=u[u.length-1];if(b.length){var k=b.shift();k&&(o.push(k),s[k.get("id")]=!0,p=n?k.getNeighbors("target"):k.getNeighbors(),u.push(p.filter(function(V){return!s[V.get("id")]})))}else{var R=o.pop();s[R.get("id")]=!1,u.pop();continue}if(o[o.length-1]===e){var Y=o.map(function(Z){return Z.get("id")});h.push(Y);var R=o.pop();s[R.get("id")]=!1,u.pop()}}return h},DI=function(){function i(r){this.count=r.length,this.parent={};for(var t=0,e=r;t<e.length;t++){var n=e[t];this.parent[n]=n}}return i.prototype.find=function(r){for(;this.parent[r]!==r;)r=this.parent[r];return r},i.prototype.union=function(r,t){var e=this.find(r),n=this.find(t);e!==n&&(e<n?(this.parent[t]!==t&&this.union(this.parent[t],r),this.parent[t]=this.parent[r]):(this.parent[r]!==r&&this.union(this.parent[r],t),this.parent[r]=this.parent[t]))},i.prototype.connected=function(r,t){return this.find(r)===this.find(t)},i}(),FI=DI,RI=function(r,t){return r-t},NI=function(){function i(r){r===void 0&&(r=RI),this.compareFn=r,this.list=[]}return i.prototype.getLeft=function(r){return 2*r+1},i.prototype.getRight=function(r){return 2*r+2},i.prototype.getParent=function(r){return r===0?null:Math.floor((r-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var r=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),r},i.prototype.insert=function(r){if(r!==null){this.list.push(r);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(r){for(var t=this.getParent(r);r&&r>0&&this.compareFn(this.list[t],this.list[r])>0;){var e=this.list[t];this.list[t]=this.list[r],this.list[r]=e,r=t,t=this.getParent(r)}},i.prototype.moveDown=function(r){var t,e=r,n=this.getLeft(r),a=this.getRight(r),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[e],this.list[n])>0?e=n:a!==null&&a<o&&this.compareFn(this.list[e],this.list[a])>0&&(e=a),r!==e&&(t=[this.list[e],this.list[r]],this.list[r]=t[0],this.list[e]=t[1],this.moveDown(e))},i}(),YI=NI,GI=function(r,t){var e=[],n=r.getNodes();if(n.length===0)return e;var a=n[0],o=new Set;o.add(a);var s=function(R,Y){return t?R.getModel()[t]-Y.getModel()[t]:0},u=new YI(s);for(a.getEdges().forEach(function(k){u.insert(k)});!u.isEmpty();){var h=u.delMin(),p=h.getSource(),b=h.getTarget();o.has(p)&&o.has(b)||(e.push(h),o.has(p)||(o.add(p),p.getEdges().forEach(function(k){u.insert(k)})),o.has(b)||(o.add(b),b.getEdges().forEach(function(k){u.insert(k)})))}return e},Ux=function(r,t){var e=[];if(r.getNodes().length===0)return e;var n=r.getEdges().map(function(h){return h});t&&n.sort(function(h,p){return h.getModel()[t]-p.getModel()[t]});for(var a=new FI(r.getNodes().map(function(h){return h.get("id")}));n.length>0;){var o=n.shift(),s=o.getSource().get("id"),u=o.getTarget().get("id");a.connected(s,u)||(e.push(o),a.union(s,u))}return e};function zI(i,r,t){var e={prim:GI,kruskal:Ux};return t?e[t](i,r):Ux(i,r)}var XI=function(r,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var n=1,a=0,o=1e3,s=r.getNodes(),u=s.length,h,p={},b={},k=0;k<u;++k){var R=s[k],Y=R.get("id");p[Y]=1/u,b[Y]=1/u}for(;o>0&&n>t;){a=0;for(var k=0;k<u;++k){var R=s[k],Y=R.get("id");if(h=0,r.getNodeDegree(R,"in")===0)p[Y]=0;else{for(var V=R.getNeighbors("source"),Z=0;Z<V.length;++Z){var it=V[Z],tt=r.getNodeDegree(it,"out");tt>0&&(h+=b[it.get("id")]/tt)}p[Y]=e*h,a+=p[Y]}}a=(1-a)/u,n=0;for(var k=0;k<u;++k){var R=s[k],Y=R.get("id");h=p[Y]+a,n+=Math.abs(h-b[Y]),b[Y]=h}o-=1}return b},HI=XI,Ek=Ns.registerNode,Ak=Ns.registerEdge,Tk=Ns.registerCombo,Pk=dm.registerBehavior,Lk=Hl.registerLayout,_k=oa.Minimap,Ik=oa.Grid,Ok=oa.Bundling,kk=oa.Menu,VI=oa.Fisheye,Bk=oa.ToolBar,Dk=oa.Tooltip,WI=oa.TimeBar,jI=oa.ImageMinimap,UI=oa.EdgeFilterLens,$i={version:bE.i8,Graph:yx,TreeGraph:LL,Util:s_,registerNode:Ns.registerNode,registerEdge:Ns.registerEdge,registerCombo:Ns.registerCombo,registerBehavior:dm.registerBehavior,registerLayout:Hl.registerLayout,Layout:Hl,Global:dr,Minimap:oa.Minimap,Grid:oa.Grid,Bundling:oa.Bundling,Menu:oa.Menu,ToolBar:oa.ToolBar,Tooltip:oa.Tooltip,TimeBar:WI,Fisheye:VI,ImageMinimap:jI,EdgeFilterLens:UI,Algorithm:gt,Arrow:n_,Marker:i_};function Zx(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function uo(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Zx(Object(t),!0).forEach(function(e){ZI(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Zx(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function ZI(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}$i.registerNode("card-node",{draw:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a=Object.assign({radius:2,fill:"#fff"},a),e=a.stroke||"#5B8FF9";var o=a.radius||0,s=t.addShape("rect",{attrs:uo({x:-n[0]/2,y:-n[1]/2,width:n[0],height:n[1],stroke:e},a),name:"main-box",draggable:!0}),u=r.title||r.label,h,p=r&&r.labelCfg&&r.labelCfg.style?r.labelCfg.style:{};if(u){var b=Object.assign({fill:"#fff"},p);h=t.addShape("text",{attrs:uo(uo({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+2,text:u},b),{},{fill:"#fff"}),name:"title"})}var k=h?h.getBBox():{height:n[1]/2},R=t.addShape("rect",{attrs:{x:-n[0]/2,y:-n[1]/2,width:n[0],height:k.height+4,fill:e,radius:[o,o,0,0]},name:"title-rect",draggable:!0});h&&h.toFront();var Y;r.children&&(Y=t.addShape("marker",{attrs:{x:n[0]/2,y:0,r:6,cursor:"pointer",symbol:r.collapsed?$i.Marker.expand:$i.Marker.collapse,stroke:e,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var V=r&&r.description?r.description:void 0,Z=R.getBBox(),it;if(V&&(it=t.addShape("text",{attrs:uo({textBaseline:"top",x:-n[0]/2+8,y:-n[1]/2+Z.height+8,text:V},p),name:"description"})),it){var tt,_t=it.getBBox(),It=Z.height+16+_t.height,Ht=n[0]>_t.width+16?n[0]:_t.width+16;s.attr({width:Ht,height:It}),R==null||R.attr("width",Ht),(tt=Y)===null||tt===void 0||tt.attr({x:Ht-n[0]/2,y:It/2-n[1]/2})}return s},update:void 0},"single-node"),$i.registerNode("round-rect",{drawShape:function(r,t){var e=r&&r.color?r.color:"#5B8FF9",n=r&&r.size?r.size:[100,30];typeof n=="number"&&(n=[n,n]);var a=r&&r.style?r.style:{};a.stroke&&(e=a.stroke);var o=a&&a.fill?a.fill:"#fff";a=Object.assign({width:n[0],height:n[1],radius:n[1]/2,fill:o,lineWidth:1.2,stroke:e},a);var s=t.addShape("rect",{attrs:uo({x:-n[0]/2,y:-n[1]/2},a),name:"rect-shape"});return t.addShape("circle",{attrs:{x:-n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape"}),t.addShape("circle",{attrs:{x:n[0]/2,y:0,r:3,fill:a.stroke},name:"circle-shape2"}),s},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(r,t){var e=t.getContainer(),n=e.get("children"),a=n[0],o=n[1],s=n[2],u=r.style&&r.style.stroke?r.style.stroke:"#5B8FF9";u&&(a.attr("stroke",u),o.attr("fill",u),s.attr("fill",u))}},"single-node");var KI=function(r){$i.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(e,n){var a=this.getShapeStyle(e),o=e.labelCfg,s=o===void 0?{}:o,u=n.addShape("rect",{attrs:uo(uo({},a),{},{x:0,y:0})}),h={fill:"#e6fffb"},p="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return e.leftIcon&&(h=Object.assign({},h,e.leftIcon.style),p=e.leftIcon.img),n.addShape("rect",{attrs:uo({x:1,y:1,width:38,height:a.height-2},h)}),n.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:p},name:"image-shape"}),r.enableEdit&&(n.addShape("marker",{attrs:{x:a.width/3,y:a.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:$i.Marker.expand},name:"add-item"}),n.addShape("marker",{attrs:{x:a.width*2/3,y:a.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:$i.Marker.collapse},name:"remove-item"})),e.label&&n.addShape("text",{attrs:uo(uo({},s.style),{},{text:e.label,x:a.width/2,y:a.height/1.5})}),u}},"rect")};$i.registerEdge("fund-polyline",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=n.y-e.y,o=a!==0?500/Math.abs(a):0,s=16,u=a<0?s:-s,h={x:e.x+o,y:n.y+u},p={x:h.x+s,y:n.y},b={x:(h.x-e.x)*(n.y-e.y)/(h.y-e.y)+e.x,y:n.y},k=[["M",e.x,e.y],["L",h.x,h.y],["Q",b.x,b.y,p.x,p.y],["L",n.x,n.y]];a===0&&(k=[["M",e.x,e.y],["L",n.x,n.y]]);var R=r||{},Y=R.style,V=t.addShape("path",{attrs:{path:k,stroke:Y.stroke||r.colorMap&&r.colorMap[r.dataType]?r.colorMap[r.dataType]:"#5B8FF9",lineWidth:Y.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Z=0,it=8,tt;if(r.label&&(tt=t.addShape("text",{attrs:{text:r.label,x:p.x+Z,y:n.y-it-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),r.dataType){var _t=tt?tt.getBBox():{height:0};t.addShape("text",{attrs:{text:r.dataType,x:p.x+Z,y:n.y-it-_t.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return r.subLabel&&t.addShape("text",{attrs:{text:r.subLabel,x:p.x+Z,y:n.y+it+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),V},update:void 0},"single-edge"),$i.registerEdge("flow-line",{draw:function(r,t){var e=r.startPoint,n=r.endPoint,a=r.style,o=a===void 0?{}:a,s=t.addShape("path",{attrs:{stroke:o.stroke,endArrow:o.endArrow,path:[["M",e.x,e.y],["L",e.x,(e.y+n.y)/2],["L",n.x,(e.y+n.y)/2],["L",n.x,n.y]]}});return s}});function Kx(i,r){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(i);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,e)}return t}function $I(i){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Kx(Object(t),!0).forEach(function(e){QI(i,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Kx(Object(t)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(t,e))})}return i}function QI(i,r,t){return r in i?Object.defineProperty(i,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[r]=t,i}var JI={show:!1,size:[150,100],type:"keyShape"},jl=function(r,t,e){var n,a;return e&&e.current&&(n=e.current.offsetWidth,a=e.current.offsetHeight||500),console.log("graph size",n,a,t,r,e,e.current),!r&&!n||!t&&!a?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[r||n||500,t||a||500]},Ul=function(r,t){if(!(!t||t.destroyed)&&r&&r.show){var e=Object.assign(JI,r),n=new $i.Minimap($I({},e));return t.addPlugin(n),n}};function Gf(i,r,t){var e=(0,st.useRef)(),n=r.data,a=r.nodeStyle,o=r.nodeAnchorPoints,s=r.nodeType,u=r.edgeType,h=r.edgeStyle,p=r.width,b=r.height,k=r.layout,R=r.minimapCfg,Y=r.behaviors,V=r.nodeLabelCfg,Z=r.edgeLabelCfg,it;return(0,st.useEffect)(function(){i&&!i.destroyed&&(i.changeData(n),i.layout())},[n]),(0,st.useEffect)(function(){i&&!i.destroyed&&i.getNodes().forEach(function(tt){i.updateItem(tt,{type:s,style:a,anchorPoints:o,labelCfg:V})})},[a,o,s]),(0,st.useEffect)(function(){i&&!i.destroyed&&i.getEdges().forEach(function(tt){i.updateItem(tt,{type:u,style:h,labelCfg:Z})})},[h,u]),(0,st.useEffect)(function(){if(i&&!i.destroyed){var tt=jl(p,b,t);i.changeSize(tt[0],tt[1])}},[t,p,b]),(0,st.useEffect)(function(){i&&!i.destroyed&&i.updateLayout(k)},[k]),(0,st.useEffect)(function(){if(!(!R||!i||i.destroyed))if(R.show)it=Ul(R,i),it&&it.updateCanvas();else{var tt=i.get("plugins")[0];tt&&i.removePlugin(tt)}},[R]),(0,st.useEffect)(function(){if(i&&!i.destroyed){var tt=i.get("modes"),_t=tt.default,It=[];_t.forEach(function(Ht){(0,y.isObject)(Ht)?It.push(Ht.type):(0,y.isString)(Ht)&&It.push(Ht)}),i.removeBehaviors(It,"default"),i.addBehaviors(Y,"default")}},[Y]),(0,st.useEffect)(function(){if(e.current=i,i&&!i.destroyed)return function(){i.destroy(),i=void 0}},[]),{graphHook:e}}var $x={hover:{stroke:"#1890ff",lineWidth:2}},qI={fill:"#91d5ff",stroke:"#40a9ff",radius:5},tO={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},eO={type:"compactBox",direction:"TB",getId:function(r){return r.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},Qx={style:{fill:"#000",fontSize:12}},ri,rO=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,u=s===void 0?"rect":s,h=r.edgeType,p=h===void 0?"flow-line":h,b=r.collapseExpand,k=b===void 0?!1:b,R=r.nodeSize,Y=R===void 0?[120,40]:R,V=r.nodeLabelCfg,Z=V===void 0?Qx:V,it=r.edgeLabelCfg,tt=it===void 0?Qx:it,_t=r.layout,It=_t===void 0?eO:_t,Ht=r.enableEdit,le=Ht===void 0?!1:Ht,xe=r.minimapCfg,Ce=r.nodeStyle,me=Ce===void 0?qI:Ce,Le=r.edgeStyle,Ye=Le===void 0?tO:Le,Be=r.nodeStateStyles,or=Be===void 0?$x:Be,cr=r.edgeStateStyles,ar=cr===void 0?$x:cr,Cr=r.handleNodeClick,wr=r.handleEdgeClick,Mr=r.handleNodeHover,yr=r.handleNodeUnHover,mr=r.handleEdgeHover,zr=r.handleEdgeUnHover,Ur=r.handleCanvasClick,Xr=r.graphRef,Er={data:t,className:e,style:n,width:a,height:o,nodeType:u,edgeType:p,collapseExpand:k,nodeSize:Y,nodeLabelCfg:Z,edgeLabelCfg:tt,layout:It,enableEdit:le,minimapCfg:xe,nodeStyle:me,edgeStyle:Ye,nodeStateStyles:or,edgeStateStyles:ar,handleNodeClick:Cr,handleEdgeClick:wr,handleNodeHover:Mr,handleNodeUnHover:yr,handleEdgeHover:mr,handleEdgeUnHover:zr,handleCanvasClick:Ur,graphRef:Xr},Zr=st.useRef(null);return Gf(ri,Er,Zr),(0,st.useEffect)(function(){var ln=jl(a,o,Zr);return(!ri||ri.destroyed)&&(u==="icon-node"&&KI({enableEdit:le}),ri=new $i.TreeGraph({container:Zr.current,width:ln[0],height:ln[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:u,size:Y,style:me,labelCfg:Z},defaultEdge:{type:p,style:Ye,labelCfg:tt},nodeStateStyles:or,edgeStateStyles:ar,layout:It}),Xr&&(Xr.current=ri)),Ul(xe,ri),ri.data(t),ri.render(),ri.fitView(),k&&ri.addBehaviors({type:"collapse-expand",onChange:function(Nr,nn){if(!Nr)return!1;var yn=Nr.get("model").data;return yn.collapsed=nn,!0}},"default"),ri.on("node:mouseenter",function(Yr){var Nr=Yr.item;ri.setItemState(Nr,"hover",!0),Mr&&Mr(Nr,ri)}),ri.on("node:mouseleave",function(Yr){var Nr=Yr.item;ri.setItemState(Nr,"hover",!1),yr&&yr(Nr,ri)}),ri.on("node:click",function(Yr){var Nr=Yr.item,nn=Yr.target,yn=nn.get("type"),Kr=nn.get("name");if(yn==="marker"){var ur=Nr.getModel();if(Kr==="add-item"){ur.children||(ur.children=[]);var Tr=Math.random().toString(36).slice(-8);ur.children.push({id:Tr,label:Tr}),ri.updateChild(ur,ur.id)}else Kr==="remove-item"&&ri.removeChild(ur.id)}else Cr&&Cr(Nr,ri)}),ri.on("edge:mouseenter",function(Yr){var Nr=Yr.item;ri.setItemState(Nr,"hover",!0),mr&&mr(Nr,ri)}),ri.on("edge:mouseleave",function(Yr){var Nr=Yr.item;ri.setItemState(Nr,"hover",!1),zr&&zr(Nr,ri)}),ri.on("edge:click",function(Yr){var Nr=Yr.item;wr&&wr(Nr,ri)}),ri.on("canvas:click",function(Yr){Ur&&Ur(ri)}),function(){return ri.destroy()}},[]),st.createElement(Mn,null,st.createElement("div",{className:e,style:n,ref:Zr}))},nO=rO,Jx={hover:{stroke:"#1890ff",lineWidth:2}},iO=[120,40],aO={stroke:"#40a9ff"},oO=[[.5,0],[.5,1]],sO={stroke:"#91d5ff",endArrow:{path:$i.Arrow.vee(10,10),fill:"#91d5ff"}},lO={type:"dagre",rankdir:"TB",nodesepFunc:function(r){return 0},ranksepFunc:function(r){return 0},controlPoints:!0},qx={style:{fill:"#000",fontSize:12}},pi,uO=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,u=s===void 0?"modelRect":s,h=r.edgeType,p=h===void 0?"polyline":h,b=r.behaviors,k=b===void 0?["zoom-canvas","drag-canvas"]:b,R=r.nodeSize,Y=R===void 0?iO:R,V=r.nodeLabelCfg,Z=V===void 0?qx:V,it=r.edgeLabelCfg,tt=it===void 0?qx:it,_t=r.nodeAnchorPoints,It=_t===void 0?oO:_t,Ht=r.layout,le=Ht===void 0?lO:Ht,xe=r.minimapCfg,Ce=r.nodeStyle,me=Ce===void 0?aO:Ce,Le=r.edgeStyle,Ye=Le===void 0?sO:Le,Be=r.nodeStateStyles,or=Be===void 0?Jx:Be,cr=r.edgeStateStyles,ar=cr===void 0?Jx:cr,Cr=r.handleEdgeClick,wr=r.handleEdgeHover,Mr=r.handleEdgeUnHover,yr=r.handleNodeClick,mr=r.handleNodeHover,zr=r.handleNodeUnHover,Ur=r.handleCanvasClick,Xr=r.graphRef,Er={data:t,className:e,style:n,width:a,height:o,nodeType:u,edgeType:p,behaviors:k,nodeSize:Y,nodeLabelCfg:Z,edgeLabelCfg:tt,nodeAnchorPoints:It,layout:le,minimapCfg:xe,nodeStyle:me,edgeStyle:Ye,nodeStateStyles:or,edgeStateStyles:ar,handleEdgeClick:Cr,handleEdgeHover:wr,handleEdgeUnHover:Mr,handleNodeClick:yr,handleNodeHover:mr,handleNodeUnHover:zr,handleCanvasClick:Ur,graphRef:Xr},Zr=st.useRef(null);return Gf(pi,Er,Zr),(0,st.useEffect)(function(){var ln=jl(a,o,Zr);return(!pi||pi.destroyed)&&(pi=new $i.Graph({container:Zr.current,width:ln[0],height:ln[1],modes:{default:k},defaultNode:{type:u,size:Y,style:me,anchorPoints:It,labelCfg:Z},defaultEdge:{type:p,style:Ye,labelCfg:tt},nodeStateStyles:or,edgeStateStyles:ar,layout:le}),Xr&&(Xr.current=pi)),Ul(xe,pi),pi.data(t),pi.render(),pi.fitView(),pi.on("edge:mouseenter",function(Yr){var Nr=Yr.item;pi.setItemState(Nr,"hover",!0),wr&&wr(Nr,pi)}),pi.on("node:mouseenter",function(Yr){var Nr=Yr.item;pi.setItemState(Nr,"hover",!1),mr&&mr(Nr,pi)}),pi.on("edge:mouseleave",function(Yr){var Nr=Yr.item;pi.setItemState(Nr,"hover",!1),Mr&&Mr(Nr,pi)}),pi.on("node:mouseleave",function(Yr){var Nr=Yr.item;pi.setItemState(Nr,"hover",!1),zr&&zr(Nr,pi)}),pi.on("edge:click",function(Yr){var Nr=Yr.item;Cr&&Cr(Nr,pi)}),pi.on("node:click",function(Yr){var Nr=Yr.item;yr&&yr(Nr,pi)}),pi.on("canvas:click",function(Yr){Ur&&Ur(pi)}),function(){return pi.destroy()}},[]),st.createElement(Mn,null,st.createElement("div",{className:e,style:n,ref:Zr}))},hO=uO,t1={hover:{stroke:"#1890ff",lineWidth:2}},fO=[150,30],cO={stroke:"#72CC4A",fill:"#f00"},vO=[[.5,0],[.5,1]],dO={stroke:"#91d5ff",endArrow:{path:$i.Arrow.vee(10,10),fill:"#91d5ff"}},pO={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},e1={style:{fill:"#000000A6",fontSize:10}},ui,gO=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,u=s===void 0?"round-rect":s,h=r.edgeType,p=h===void 0?"fund-polyline":h,b=r.behaviors,k=b===void 0?["zoom-canvas","drag-canvas"]:b,R=r.nodeSize,Y=R===void 0?fO:R,V=r.nodeLabelCfg,Z=V===void 0?e1:V,it=r.edgeLabelCfg,tt=it===void 0?e1:it,_t=r.nodeAnchorPoints,It=_t===void 0?vO:_t,Ht=r.layout,le=Ht===void 0?pO:Ht,xe=r.minimapCfg,Ce=r.nodeStyle,me=Ce===void 0?cO:Ce,Le=r.edgeStyle,Ye=Le===void 0?dO:Le,Be=r.nodeStateStyles,or=Be===void 0?t1:Be,cr=r.edgeStateStyles,ar=cr===void 0?t1:cr,Cr=r.colorMap,wr=Cr===void 0?{}:Cr,Mr=r.handleEdgeClick,yr=r.handleEdgeHover,mr=r.handleEdgeUnHover,zr=r.handleNodeClick,Ur=r.handleNodeHover,Xr=r.handleNodeUnHover,Er=r.handleCanvasClick,Zr=r.graphRef,ln=st.useRef(null),Yr={data:t,className:e,style:n,width:a,height:o,nodeType:u,edgeType:p,behaviors:k,nodeSize:Y,nodeLabelCfg:Z,edgeLabelCfg:tt,nodeAnchorPoints:It,layout:le,minimapCfg:xe,nodeStyle:me,edgeStyle:Ye,nodeStateStyles:or,edgeStateStyles:ar,colorMap:wr,handleEdgeClick:Mr,handleEdgeHover:yr,handleEdgeUnHover:mr,handleNodeClick:zr,handleNodeHover:Ur,handleNodeUnHover:Xr,handleCanvasClick:Er,graphRef:Zr};return Gf(ui,Yr,ln),(0,st.useEffect)(function(){var Nr=jl(a,o,ln);(!ui||ui.destroyed)&&(ui=new $i.Graph({container:ln.current,width:Nr[0],height:Nr[1],modes:{default:k},defaultNode:{type:u,size:Y,style:me,anchorPoints:It,labelCfg:Z},defaultEdge:{type:p,style:Ye,colorMap:wr,labelCfg:tt},nodeStateStyles:or,edgeStateStyles:ar,layout:le}),Zr&&(Zr.current=ui)),Ul(xe,ui),ui.data(t),ui.render();var nn=ui.getEdges();return nn.forEach(function(yn){var Kr=yn.getKeyShape(),ur=Kr.attr("stroke"),Tr=yn.getTarget();Tr.update({style:{stroke:ur}})}),ui.fitView(),ui.on("edge:mouseenter",function(yn){var Kr=yn.item;ui.setItemState(Kr,"hover",!0),yr&&yr(Kr,ui)}),ui.on("edge:mouseleave",function(yn){var Kr=yn.item;ui.setItemState(Kr,"hover",!1),mr&&mr(Kr,ui)}),ui.on("edge:click",function(yn){var Kr=yn.item;Mr&&Mr(Kr,ui)}),ui.on("node:mouseenter",function(yn){var Kr=yn.item;ui.setItemState(Kr,"hover",!1),Ur&&Ur(Kr,ui)}),ui.on("node:mouseleave",function(yn){var Kr=yn.item;ui.setItemState(Kr,"hover",!1),Xr&&Xr(Kr,ui)}),ui.on("node:click",function(yn){var Kr=yn.item;zr&&zr(Kr,ui)}),ui.on("canvas:click",function(yn){Er&&Er(ui)}),function(){return ui.destroy()}},[]),st.createElement(Mn,null,st.createElement("div",{className:e,style:n,ref:ln}))},yO=gO,r1={hover:{stroke:"#1890ff",lineWidth:2}},mO=[120,40],xO={stroke:"#40a9ff"},bO=[[0,.5],[1,.5]],wO={stroke:"#ccc",endArrow:{path:$i.Arrow.vee(10,10),fill:"#ccc"}},SO={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(r){return 100}},CO={style:{fill:"#000",fontSize:12}},oi,MO=function(r){var t=r.data,e=r.className,n=r.style,a=r.width,o=r.height,s=r.nodeType,u=s===void 0?"card-node":s,h=r.edgeType,p=h===void 0?"cubic-horizontal":h,b=r.behaviors,k=b===void 0?["zoom-canvas","drag-canvas"]:b,R=r.nodeSize,Y=R===void 0?mO:R,V=r.nodeLabelCfg,Z=V===void 0?CO:V,it=r.nodeAnchorPoints,tt=it===void 0?bO:it,_t=r.layout,It=_t===void 0?SO:_t,Ht=r.minimapCfg,le=r.nodeStyle,xe=le===void 0?xO:le,Ce=r.edgeStyle,me=Ce===void 0?wO:Ce,Le=r.nodeStateStyles,Ye=Le===void 0?r1:Le,Be=r.edgeStateStyles,or=Be===void 0?r1:Be,cr=r.collapseExpand,ar=cr===void 0?!0:cr,Cr=r.handleEdgeClick,wr=r.handleEdgeHover,Mr=r.handleEdgeUnHover,yr=r.handleNodeClick,mr=r.handleNodeHover,zr=r.handleNodeUnHover,Ur=r.handleCanvasClick,Xr=r.graphRef,Er=st.useRef(null),Zr={data:t,className:e,style:n,width:a,height:o,nodeType:u,edgeType:p,behaviors:k,nodeSize:Y,nodeLabelCfg:Z,nodeAnchorPoints:tt,layout:It,minimapCfg:Ht,nodeStyle:xe,edgeStyle:me,nodeStateStyles:Ye,edgeStateStyles:or,collapseExpand:ar,handleEdgeClick:Cr,handleEdgeHover:wr,handleEdgeUnHover:Mr,handleNodeClick:yr,handleNodeHover:mr,handleNodeUnHover:zr,handleCanvasClick:Ur,graphRef:Xr};return Gf(oi,Zr,Er),(0,st.useEffect)(function(){var ln=jl(a,o,Er);return(!oi||oi.destroyed)&&(oi=new $i.TreeGraph({container:Er.current,width:ln[0],height:ln[1],modes:{default:k},defaultNode:{type:u,size:Y,style:xe,anchorPoints:tt,labelCfg:Z},defaultEdge:{type:p,style:me},nodeStateStyles:Ye,edgeStateStyles:or,layout:It}),Xr&&(Xr.current=oi)),Ul(Ht,oi),oi.data(t),oi.render(),oi.fitView(),ar&&oi.on("node:click",function(Yr){var Nr=Yr.item;Yr.target.get("name")==="collapse-icon"?(oi.updateItem(Nr,{collapsed:!Nr.getModel().collapsed}),oi.layout()):yr&&yr(Nr,oi)}),oi.on("edge:mouseenter",function(Yr){var Nr=Yr.item;oi.setItemState(Nr,"hover",!0),wr&&wr(Nr,oi)}),oi.on("edge:mouseleave",function(Yr){var Nr=Yr.item;oi.setItemState(Nr,"hover",!1),Mr&&Mr(Nr,oi)}),oi.on("edge:click",function(Yr){var Nr=Yr.item;Cr&&Cr(Nr,oi)}),oi.on("node:mouseenter",function(Yr){var Nr=Yr.item;oi.setItemState(Nr,"hover",!1),mr&&mr(Nr,oi)}),oi.on("node:mouseleave",function(Yr){var Nr=Yr.item;oi.setItemState(Nr,"hover",!1),zr&&zr(Nr,oi)}),oi.on("canvas:click",function(Yr){Ur&&Ur(oi)}),function(){return oi.destroy()}},[]),st.createElement(Mn,null,st.createElement("div",{className:e,style:n,ref:Er}))},EO=MO,Fk={Area:nC,Bar:oC,Bubble:uC,Bullet:cC,Calendar:gC,Column:Ly,ColumnLine:wC,DensityHeatmap:MC,Donut:ky,DualLine:LC,FanGauge:OC,Funnel:FC,Gauge:Ry,GroupedBar:zC,GroupedColumn:VC,GroupedColumnLine:UC,GroupedRose:$C,Heatmap:qC,Histogram:rM,Line:Wy,Liquid:Uy,MeterGauge:uM,PercentStackedArea:cM,PercentStackedBar:pM,PercentStackedColumn:mM,Pie:wM,Progress:t0,Radar:r0,RangeBar:PM,RangeColumn:IM,RingProgress:o0,Rose:FM,Scatter:YM,StackedArea:XM,StackedBar:WM,StackedColumn:ZM,StackedColumnLine:QM,StackedRose:tE,StepLine:nE,TinyArea:g0,TinyColumn:m0,TinyLine:hE,Treemap:vE,Waterfall:gE,WordCloud:S0,OrganizationTreeGraph:nO,DagreGraph:hO,IndentedTree:EO,DagreFundFlowGraph:yO,G2:Ro}},67988:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(69626),F=function(){function L(O){var _=O.xField,P=O.yField,A=O.adjustNames,x=A===void 0?["x","y"]:A;this.adjustNames=x,this.xField=_,this.yField=P}return L.prototype.isAdjust=function(O){return this.adjustNames.indexOf(O)>=0},L.prototype.getAdjustRange=function(O,_,P){var A=this.yField,x=P.indexOf(_),C=P.length,w,M;return!A&&this.isAdjust("y")?(w=0,M=1):C>1?(w=P[x===0?0:x-1],M=P[x===C-1?C-1:x+1],x!==0?w+=(_-w)/2:w-=(M-_)/2,x!==C-1?M-=(M-_)/2:M+=(_-P[C-2])/2):(w=_===0?0:_-.5,M=_===0?1:_+.5),{pre:w,next:M}},L.prototype.adjustData=function(O,_){var P=this,A=this.getDimValues(_);d.each(O,function(x,C){d.each(A,function(w,M){P.adjustDim(M,w,x,C)})})},L.prototype.groupData=function(O,_){return d.each(O,function(P){P[_]===void 0&&(P[_]=c.DEFAULT_Y)}),d.groupBy(O,_)},L.prototype.adjustDim=function(O,_,P,A){},L.prototype.getDimValues=function(O){var _=this,P=_.xField,A=_.yField,x={},C=[];if(P&&this.isAdjust("x")&&C.push(P),A&&this.isAdjust("y")&&C.push(A),C.forEach(function(M){x[M]=d.valuesOfKey(O,M).sort(function(S,I){return S-I})}),!A&&this.isAdjust("y")){var w="y";x[w]=[c.DEFAULT_Y,1]}return x},L}();T.default=F},69626:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.GAP=T.DODGE_RATIO=T.MARGIN_RATIO=T.DEFAULT_Y=void 0,T.DEFAULT_Y=0,T.MARGIN_RATIO=1/2,T.DODGE_RATIO=1/2,T.GAP=.05},87023:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Adjust=T.registerAdjust=T.getAdjust=void 0;var d=v(32447),c=v(67988);T.Adjust=c.default;var F={},L=function(_){return F[_.toLowerCase()]};T.getAdjust=L;var O=function(_,P){if(L(_))throw new Error("Adjust type '"+_+"' existed.");F[_.toLowerCase()]=P};T.registerAdjust=O,d.__exportStar(v(21721),T)},21721:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0})},88806:function(xt,T,v){"use strict";v.r(T),v.d(T,{Attribute:function(){return L},Color:function(){return A},Opacity:function(){return C},Position:function(){return M},Scale:function(){return G.Scale},Shape:function(){return I},Size:function(){return N},getAttribute:function(){return $},registerAttribute:function(){return H}});var d=v(26169),c=function(j,nt){return(0,d.isString)(nt)?nt:j.invert(j.scale(nt))},F=function(){function j(nt){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(nt)}return j.prototype.mapping=function(){for(var nt=this,rt=[],mt=0;mt<arguments.length;mt++)rt[mt]=arguments[mt];var Ft=rt.map(function(Gt,gt){return nt._toOriginParam(Gt,nt.scales[gt])});return this.callback.apply(this,Ft)},j.prototype.getLinearValue=function(nt){var rt=this.values.length-1,mt=Math.floor(rt*nt),Ft=rt*nt-mt,Gt=this.values[mt],gt=mt===rt?Gt:this.values[mt+1];return Gt+(gt-Gt)*Ft},j.prototype.getNames=function(){for(var nt=this.scales,rt=this.names,mt=Math.min(nt.length,rt.length),Ft=[],Gt=0;Gt<mt;Gt+=1)Ft.push(rt[Gt]);return Ft},j.prototype.getFields=function(){return this.scales.map(function(nt){return nt.field})},j.prototype.getScale=function(nt){return this.scales[this.names.indexOf(nt)]},j.prototype.defaultCallback=function(){for(var nt=this,rt=[],mt=0;mt<arguments.length;mt++)rt[mt]=arguments[mt];return rt.length===0?this.values:rt.map(function(Ft,Gt){var gt=nt.scales[Gt];return gt.type==="identity"?gt.values[0]:nt._getAttributeValue(gt,Ft)})},j.prototype._parseCfg=function(nt){var rt=this,mt=nt.type,Ft=mt===void 0?"base":mt,Gt=nt.names,gt=Gt===void 0?[]:Gt,st=nt.scales,Xt=st===void 0?[]:st,Q=nt.values,qt=Q===void 0?[]:Q,y=nt.callback;this.type=Ft,this.scales=Xt,this.values=qt,this.names=gt,this.callback=function(){for(var Yt=[],K=0;K<arguments.length;K++)Yt[K]=arguments[K];if(y){var ht=y.apply(void 0,Yt);if(!(0,d.isNil)(ht))return[ht]}return rt.defaultCallback.apply(rt,Yt)}},j.prototype._getAttributeValue=function(nt,rt){if(nt.isCategory&&!this.linear){var mt=nt.translate(rt);return this.values[mt%this.values.length]}var Ft=nt.scale(rt);return this.getLinearValue(Ft)},j.prototype._toOriginParam=function(nt,rt){return rt.isLinear?nt:(0,d.isArray)(nt)?nt.map(function(mt){return c(rt,mt)}):c(rt,nt)},j}(),L=F,O=v(32447),_=v(87892),P=function(j){(0,O.__extends)(nt,j);function nt(rt){var mt=j.call(this,rt)||this;return mt.type="color",mt.names=["color"],(0,d.isString)(mt.values)&&(mt.linear=!0),mt.gradient=_.default.gradient(mt.values),mt}return nt.prototype.getLinearValue=function(rt){return this.gradient(rt)},nt}(L),A=P,x=function(j){(0,O.__extends)(nt,j);function nt(rt){var mt=j.call(this,rt)||this;return mt.type="opacity",mt.names=["opacity"],mt}return nt}(L),C=x,w=function(j){(0,O.__extends)(nt,j);function nt(rt){var mt=j.call(this,rt)||this;return mt.names=["x","y"],mt.type="position",mt}return nt.prototype.mapping=function(rt,mt){var Ft=this.scales,Gt=Ft[0],gt=Ft[1];return(0,d.isNil)(rt)||(0,d.isNil)(mt)?[]:[(0,d.isArray)(rt)?rt.map(function(st){return Gt.scale(st)}):Gt.scale(rt),(0,d.isArray)(mt)?mt.map(function(st){return gt.scale(st)}):gt.scale(mt)]},nt}(L),M=w,S=function(j){(0,O.__extends)(nt,j);function nt(rt){var mt=j.call(this,rt)||this;return mt.type="shape",mt.names=["shape"],mt}return nt.prototype.getLinearValue=function(rt){var mt=Math.round((this.values.length-1)*rt);return this.values[mt]},nt}(L),I=S,B=function(j){(0,O.__extends)(nt,j);function nt(rt){var mt=j.call(this,rt)||this;return mt.type="size",mt.names=["size"],mt}return nt}(L),N=B,G=v(15856),W={},$=function(j){return W[j.toLowerCase()]},H=function(j,nt){if($(j))throw new Error("Attribute type '"+j+"' existed.");W[j.toLowerCase()]=nt};H("Color",A),H("Opacity",C),H("Position",M),H("Shape",I),H("Size",N)},59572:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=function(L,O){return d.isString(O)?O:L.invert(L.scale(O))},F=function(){function L(O){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(O)}return L.prototype.mapping=function(){for(var O=this,_=[],P=0;P<arguments.length;P++)_[P]=arguments[P];var A=_.map(function(x,C){return O._toOriginParam(x,O.scales[C])});return this.callback.apply(this,A)},L.prototype.getLinearValue=function(O){var _=this.values.length-1,P=Math.floor(_*O),A=_*O-P,x=this.values[P],C=P===_?x:this.values[P+1];return x+(C-x)*A},L.prototype.getNames=function(){for(var O=this.scales,_=this.names,P=Math.min(O.length,_.length),A=[],x=0;x<P;x+=1)A.push(_[x]);return A},L.prototype.getFields=function(){return this.scales.map(function(O){return O.field})},L.prototype.getScale=function(O){return this.scales[this.names.indexOf(O)]},L.prototype.defaultCallback=function(){for(var O=this,_=[],P=0;P<arguments.length;P++)_[P]=arguments[P];return _.length===0?this.values:_.map(function(A,x){var C=O.scales[x];return C.type==="identity"?C.values[0]:O._getAttributeValue(C,A)})},L.prototype._parseCfg=function(O){var _=this,P=O.type,A=P===void 0?"base":P,x=O.names,C=x===void 0?[]:x,w=O.scales,M=w===void 0?[]:w,S=O.values,I=S===void 0?[]:S,B=O.callback;this.type=A,this.scales=M,this.values=I,this.names=C,this.callback=function(){for(var N=[],G=0;G<arguments.length;G++)N[G]=arguments[G];if(B){var W=B.apply(void 0,N);if(!d.isNil(W))return[W]}return _.defaultCallback.apply(_,N)}},L.prototype._getAttributeValue=function(O,_){if(O.isCategory&&!this.linear){var P=O.translate(_);return this.values[P%this.values.length]}var A=O.scale(_);return this.getLinearValue(A)},L.prototype._toOriginParam=function(O,_){return _.isLinear?O:d.isArray(O)?O.map(function(P){return c(_,P)}):c(_,O)},L}();T.default=F},68193:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(32447),c=v(59572);T.Attribute=c.default;var F={},L=function(_){return F[_.toLowerCase()]};T.getAttribute=L;var O=function(_,P){if(L(_))throw new Error("Attribute type '"+_+"' existed.");F[_.toLowerCase()]=P};T.registerAttribute=O,d.__exportStar(v(78800),T)},78800:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(15856);T.Scale=d.Scale},87892:function(xt,T,v){"use strict";v.r(T);var d=v(26169),c=/rgba?\(([\s.,0-9]+)\)/,F=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,L=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,O=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,_=function(G){return/^[r,R,L,l]{1}[\s]*\(/.test(G)},P=function(){var G=document.createElement("i");return G.title="Web Colour Picker",G.style.display="none",document.body.appendChild(G),G},A=function(G,W,$,H){return G[H]+(W[H]-G[H])*$};function x(G){return"#"+w(G[0])+w(G[1])+w(G[2])}var C=function(G){return[parseInt(G.substr(1,2),16),parseInt(G.substr(3,2),16),parseInt(G.substr(5,2),16)]},w=function(G){var W=Math.round(G).toString(16);return W.length===1?"0"+W:W},M=function(G,W){var $=isNaN(Number(W))||W<0?0:W>1?1:Number(W),H=G.length-1,j=Math.floor(H*$),nt=H*$-j,rt=G[j],mt=j===H?rt:G[j+1];return x([A(rt,mt,nt,0),A(rt,mt,nt,1),A(rt,mt,nt,2)])},S,I=function(G){if(G[0]==="#"&&G.length===7)return G;S||(S=P()),S.style.color=G;var W=document.defaultView.getComputedStyle(S,"").getPropertyValue("color"),$=c.exec(W),H=$[1].split(/\s*,\s*/).map(function(j){return Number(j)});return W=x(H),W},B=function(G){var W=(0,d.isString)(G)?G.split("-"):G,$=(0,d.map)(W,function(H){return C(H.indexOf("#")===-1?I(H):H)});return function(H){return M($,H)}},N=function(G){if(_(G)){var W,$=void 0;if(G[0]==="l"){var H=F.exec(G),j=+H[1]+90;$=H[2],W="linear-gradient("+j+"deg, "}else if(G[0]==="r"){W="radial-gradient(";var H=L.exec(G);$=H[4]}var nt=$.match(O);return(0,d.each)(nt,function(rt,mt){var Ft=rt.split(":");W+=Ft[1]+" "+Ft[0]*100+"%",mt!==nt.length-1&&(W+=", ")}),W+=")",W}return G};T.default={rgb2arr:C,gradient:B,toRGB:(0,d.memoize)(I),toCSSGradient:N}},41026:function(xt,T,v){"use strict";v.r(T),v.d(T,{Annotation:function(){return d},Axis:function(){return _},Component:function(){return bt},Crosshair:function(){return P},Grid:function(){return A},GroupComponent:function(){return ut},HtmlComponent:function(){return Ri},Legend:function(){return x},Scrollbar:function(){return Zo},Slider:function(){return da},Tooltip:function(){return w}});var d={};v.r(d),v.d(d,{Arc:function(){return $r},DataMarker:function(){return Pe},DataRegion:function(){return Ue},Image:function(){return ce},Line:function(){return gn},Region:function(){return ci},RegionFilter:function(){return rr},Text:function(){return vn}});var c={};v.r(c),v.d(c,{ellipsisHead:function(){return ie},ellipsisMiddle:function(){return Oe},ellipsisTail:function(){return be},getDefault:function(){return Rt}});var F={};v.r(F),v.d(F,{equidistance:function(){return pe},getDefault:function(){return kr},reserveBoth:function(){return ve},reserveFirst:function(){return Fr},reserveLast:function(){return jr}});var L={};v.r(L),v.d(L,{fixedAngle:function(){return tr},getDefault:function(){return je},unfixedAngle:function(){return pr}});var O={};v.r(O),v.d(O,{autoEllipsis:function(){return c},autoHide:function(){return F},autoRotate:function(){return L}});var _={};v.r(_),v.d(_,{Base:function(){return fe},Circle:function(){return Vr},Line:function(){return Hr}});var P={};v.r(P),v.d(P,{Base:function(){return Pn},Circle:function(){return zn},Html:function(){return ot},Line:function(){return On}});var A={};v.r(A),v.d(A,{Base:function(){return Mt},Circle:function(){return de},Line:function(){return Ge}});var x={};v.r(x),v.d(x,{Base:function(){return qe},Category:function(){return Pr},Continuous:function(){return Dr}});var C={};v.r(C),v.d(C,{CONTAINER_CLASS:function(){return Dn},CROSSHAIR_X:function(){return qi},CROSSHAIR_Y:function(){return dn},LIST_CLASS:function(){return Ln},LIST_ITEM_CLASS:function(){return _n},MARKER_CLASS:function(){return Jn},NAME_CLASS:function(){return Qn},TITLE_CLASS:function(){return Yn},VALUE_CLASS:function(){return Ii}});var w={};v.r(w),v.d(w,{Html:function(){return va}});var M=v(32447),S=v(26169),I=v(58992);function B(ue,wt,X){var et=new I.default(wt,X);et.target=ue,et.propagationPath.push(ue),ue.emitDelegation(wt,et);for(var dt=ue.getParent();dt;)dt.emitDelegation(wt,et),et.propagationPath.push(dt),dt=dt.getParent()}var N=v(50669),G=v(7124),W=[1,0,0,0,1,0,0,0,1];function $(ue,wt,X){if(X===void 0&&(X=W),!wt)return null;var et=N.transform(X,[["t",-ue.x,-ue.y],["r",wt],["t",ue.x,ue.y]]);return et}function H(ue,wt){return!ue.x&&!ue.y?null:N.transform(wt||W,[["t",ue.x,ue.y]])}function j(ue){var wt=[1,0,0],X=[0,0,0];return vec3.transformMat3(X,wt,ue),Math.atan2(X[1],X[0])}function nt(ue,wt){var X=[0,0];return G.transformMat3(X,wt,ue),X}function rt(ue,wt){var X=nt(ue,[wt.minX,wt.minY]),et=nt(ue,[wt.maxX,wt.minY]),dt=nt(ue,[wt.minX,wt.maxY]),Ot=nt(ue,[wt.maxX,wt.maxY]),Qt=Math.min(X[0],et[0],dt[0],Ot[0]),se=Math.max(X[0],et[0],dt[0],Ot[0]),Me=Math.min(X[1],et[1],dt[1],Ot[1]),Te=Math.max(X[1],et[1],dt[1],Ot[1]);return{x:Qt,y:Me,minX:Qt,minY:Me,maxX:se,maxY:Te,width:se-Qt,height:Te-Me}}function mt(ue,wt,X,et){if(wt){var dt=$({x:X,y:et},wt,ue.getMatrix());ue.setMatrix(dt)}}function Ft(ue,wt,X){var et=H({x:wt,y:X});ue.attr("matrix",et)}function Gt(ue){var wt=0,X=0,et=0,dt=0;return(0,S.isNumber)(ue)?wt=X=et=dt=ue:(0,S.isArray)(ue)&&(wt=ue[0],et=(0,S.isNil)(ue[1])?ue[0]:ue[1],dt=(0,S.isNil)(ue[2])?ue[0]:ue[2],X=(0,S.isNil)(ue[3])?et:ue[3]),[wt,et,dt,X]}function gt(ue){for(var wt=ue.childNodes,X=wt.length,et=X-1;et>=0;et--)ue.removeChild(wt[et])}function st(ue,wt){return!!ue.className.match(new RegExp("(\\s|^)"+wt+"(\\s|$)"))}function Xt(ue){var wt=ue.start,X=ue.end,et=Math.min(wt.x,X.x),dt=Math.min(wt.y,X.y),Ot=Math.max(wt.x,X.x),Qt=Math.max(wt.y,X.y);return{x:et,y:dt,minX:et,minY:dt,maxX:Ot,maxY:Qt,width:Ot-et,height:Qt-dt}}function Q(ue){var wt=ue.map(function(se){return se.x}),X=ue.map(function(se){return se.y}),et=Math.min.apply(Math,wt),dt=Math.min.apply(Math,X),Ot=Math.max.apply(Math,wt),Qt=Math.max.apply(Math,X);return{x:et,y:dt,minX:et,minY:dt,maxX:Ot,maxY:Qt,width:Ot-et,height:Qt-dt}}function qt(ue,wt,X,et){return{x:ue,y:wt,width:X,height:et,minX:ue,minY:wt,maxX:ue+X,maxY:wt+et}}function y(ue,wt,X){return(1-X)*ue+wt*X}function Yt(ue,wt,X){return{x:ue.x+Math.cos(X)*wt,y:ue.y+Math.sin(X)*wt}}function K(ue,wt){var X=wt.x-ue.x,et=wt.y-ue.y;return Math.sqrt(X*X+et*et)}var ht=function(ue){return new Promise(function(wt){setTimeout(wt,ue)})},J=function(ue,wt){return[ue,wt].includes(Infinity)?Math.abs(ue)===Math.abs(wt):Math.abs(ue-wt)<Math.pow(Number.EPSILON,.5)};function At(ue,wt){var X=Math.max(ue.minX,wt.minX),et=Math.max(ue.minY,wt.minY),dt=Math.min(ue.maxX,wt.maxX),Ot=Math.min(ue.maxY,wt.maxY);return qt(X,et,dt-X,Ot-et)}function Vt(ue,wt){var X=Math.min(ue.minX,wt.minX),et=Math.min(ue.minY,wt.minY),dt=Math.max(ue.maxX,wt.maxX),Ot=Math.max(ue.maxY,wt.maxY);return qt(X,et,dt-X,Ot-et)}function pt(ue){var wt=ue.getClip(),X=wt&&wt.getBBox(),et;if(!ue.isGroup())et=ue.getBBox();else{var dt=Infinity,Ot=-Infinity,Qt=Infinity,se=-Infinity,Me=ue.getChildren();Me.length>0?(0,S.each)(Me,function(Te){if(Te.get("visible")){if(Te.isGroup()&&Te.get("children").length===0)return!0;var Ne=pt(Te),Je=Te.applyToMatrix([Ne.minX,Ne.minY,1]),sr=Te.applyToMatrix([Ne.minX,Ne.maxY,1]),gr=Te.applyToMatrix([Ne.maxX,Ne.minY,1]),Ir=Te.applyToMatrix([Ne.maxX,Ne.maxY,1]),tn=Math.min(Je[0],sr[0],gr[0],Ir[0]),Qr=Math.max(Je[0],sr[0],gr[0],Ir[0]),En=Math.min(Je[1],sr[1],gr[1],Ir[1]),Bn=Math.max(Je[1],sr[1],gr[1],Ir[1]);tn<dt&&(dt=tn),Qr>Ot&&(Ot=Qr),En<Qt&&(Qt=En),Bn>se&&(se=Bn)}}):(dt=0,Ot=0,Qt=0,se=0),et=qt(dt,Qt,Ot-dt,se-Qt)}return X?At(et,X):et}function Lt(ue,wt){if(!(!ue.getClip()&&!wt.getClip())){var X=wt.getClip();if(!X){ue.setClip(null);return}var et={type:X.get("type"),attrs:X.attr()};ue.setClip(et)}}function Tt(ue){return ue+"px"}function kt(ue,wt,X,et){var dt=K(ue,wt),Ot=et/dt,Qt=0;return X==="start"?Qt=0-Ot:X==="end"&&(Qt=1+Ot),{x:y(ue.x,wt.x,Qt),y:y(ue.y,wt.y,Qt)}}var jt=v(23443),Wt={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},zt=function(ue){(0,M.__extends)(wt,ue);function wt(X){var et=ue.call(this,X)||this;return et.initCfg(),et}return wt.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},wt.prototype.clear=function(){},wt.prototype.update=function(X){var et=this,dt=this.get("defaultCfg");(0,S.each)(X,function(Ot,Qt){var se=et.get(Qt),Me=Ot;se!==Ot&&((0,S.isObject)(Ot)&&dt[Qt]&&(Me=(0,S.deepMix)({},dt[Qt],Ot)),et.set(Qt,Me))}),this.updateInner(X),this.afterUpdate(X)},wt.prototype.updateInner=function(X){},wt.prototype.afterUpdate=function(X){(0,S.hasKey)(X,"visible")&&(X.visible?this.show():this.hide()),(0,S.hasKey)(X,"capture")&&this.setCapture(X.capture)},wt.prototype.getLayoutBBox=function(){return this.getBBox()},wt.prototype.getLocationType=function(){return this.get("locationType")},wt.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},wt.prototype.setOffset=function(X,et){this.update({offsetX:X,offsetY:et})},wt.prototype.setLocation=function(X){var et=(0,M.__assign)({},X);this.update(et)},wt.prototype.getLocation=function(){var X=this,et={},dt=this.get("locationType"),Ot=Wt[dt];return(0,S.each)(Ot,function(Qt){et[Qt]=X.get(Qt)}),et},wt.prototype.isList=function(){return!1},wt.prototype.isSlider=function(){return!1},wt.prototype.init=function(){},wt.prototype.initCfg=function(){var X=this,et=this.get("defaultCfg");(0,S.each)(et,function(dt,Ot){var Qt=X.get(Ot);if((0,S.isObject)(Qt)){var se=(0,S.deepMix)({},dt,Qt);X.set(Ot,se)}})},wt}(jt.Base),bt=zt,at="update_status",ft=["visible","tip","delegateObject"],Pt=["container","group","shapesMap","isRegister","isUpdating","destroyed"],q=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},wt.prototype.remove=function(){this.clear();var X=this.get("group");X.remove()},wt.prototype.clear=function(){var X=this.get("group");X.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},wt.prototype.getChildComponentById=function(X){var et=this.getElementById(X),dt=et&&et.get("component");return dt},wt.prototype.getElementById=function(X){return this.get("shapesMap")[X]},wt.prototype.getElementByLocalId=function(X){var et=this.getElementId(X);return this.getElementById(et)},wt.prototype.getElementsByName=function(X){var et=[];return(0,S.each)(this.get("shapesMap"),function(dt){dt.get("name")===X&&et.push(dt)}),et},wt.prototype.getContainer=function(){return this.get("container")},wt.prototype.updateInner=function(X){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},wt.prototype.render=function(){var X=this.get("offScreenGroup");X||(X=this.offScreenRender());var et=this.get("group");this.updateElements(X,et),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},wt.prototype.show=function(){var X=this.get("group");X.show(),this.set("visible",!0)},wt.prototype.hide=function(){var X=this.get("group");X.hide(),this.set("visible",!1)},wt.prototype.setCapture=function(X){var et=this.get("group");et.set("capture",X),this.set("capture",X)},wt.prototype.destroy=function(){this.removeEvent(),this.remove(),ue.prototype.destroy.call(this)},wt.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},wt.prototype.getLayoutBBox=function(){var X=this.get("group"),et=this.getInnerLayoutBBox(),dt=X.getTotalMatrix();return dt&&(et=rt(dt,et)),et},wt.prototype.on=function(X,et,dt){var Ot=this.get("group");return Ot.on(X,et,dt),this},wt.prototype.off=function(X,et){var dt=this.get("group");return dt&&dt.off(X,et),this},wt.prototype.emit=function(X,et){var dt=this.get("group");dt.emit(X,et)},wt.prototype.init=function(){ue.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},wt.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},wt.prototype.delegateEmit=function(X,et){var dt=this.get("group");et.target=dt,dt.emit(X,et),B(dt,X,et)},wt.prototype.createOffScreenGroup=function(){var X=this.get("group"),et=X.getGroupBase(),dt=new et({delegateObject:this.getDelegateObject()});return dt},wt.prototype.applyOffset=function(){var X=this.get("offsetX"),et=this.get("offsetY");this.moveElementTo(this.get("group"),{x:X,y:et})},wt.prototype.initGroup=function(){var X=this.get("container");this.set("group",X.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},wt.prototype.offScreenRender=function(){this.clearOffScreenCache();var X=this.createOffScreenGroup();return this.renderInner(X),this.set("offScreenGroup",X),this.set("offScreenBBox",pt(X)),X},wt.prototype.addGroup=function(X,et){this.appendDelegateObject(X,et);var dt=X.addGroup(et);return this.get("isRegister")&&this.registerElement(dt),dt},wt.prototype.addShape=function(X,et){this.appendDelegateObject(X,et);var dt=X.addShape(et);return this.get("isRegister")&&this.registerElement(dt),dt},wt.prototype.addComponent=function(X,et){var dt=et.id,Ot=et.component,Qt=(0,M.__rest)(et,["id","component"]),se=new Ot((0,M.__assign)((0,M.__assign)({},Qt),{id:dt,container:X,updateAutoRender:this.get("updateAutoRender")}));return se.init(),se.render(),this.get("isRegister")&&this.registerElement(se.get("group")),se},wt.prototype.initEvent=function(){},wt.prototype.removeEvent=function(){var X=this.get("group");X.off()},wt.prototype.getElementId=function(X){var et=this.get("id"),dt=this.get("name");return et+"-"+dt+"-"+X},wt.prototype.registerElement=function(X){var et=X.get("id");this.get("shapesMap")[et]=X},wt.prototype.unregisterElement=function(X){var et=X.get("id");delete this.get("shapesMap")[et]},wt.prototype.moveElementTo=function(X,et){var dt=H(et);X.attr("matrix",dt)},wt.prototype.addAnimation=function(X,et,dt){var Ot=et.attr("opacity");(0,S.isNil)(Ot)&&(Ot=1),et.attr("opacity",0),et.animate({opacity:Ot},dt)},wt.prototype.removeAnimation=function(X,et,dt){et.animate({opacity:0},dt)},wt.prototype.updateAnimation=function(X,et,dt,Ot){et.animate(dt,Ot)},wt.prototype.updateElements=function(X,et){var dt=this,Ot=this.get("animate"),Qt=this.get("animateOption"),se=X.getChildren().slice(0),Me;(0,S.each)(se,function(Te){var Ne=Te.get("id"),Je=dt.getElementById(Ne),sr=Te.get("name");if(Je)if(Te.get("isComponent")){var gr=Te.get("component"),Ir=Je.get("component"),tn=(0,S.pick)(gr.cfg,(0,S.difference)((0,S.keys)(gr.cfg),Pt));Ir.update(tn),Je.set(at,"update")}else{var Qr=dt.getReplaceAttrs(Je,Te);Ot&&Qt.update?dt.updateAnimation(sr,Je,Qr,Qt.update):Je.attr(Qr),Te.isGroup()&&dt.updateElements(Te,Je),(0,S.each)(ft,function(Zt){Je.set(Zt,Te.get(Zt))}),Lt(Je,Te),Me=Je,Je.set(at,"update")}else{et.add(Te);var En=et.getChildren();if(En.splice(En.length-1,1),Me){var Bn=En.indexOf(Me);En.splice(Bn+1,0,Te)}else En.unshift(Te);if(dt.registerElement(Te),Te.set(at,"add"),Te.get("isComponent")){var gr=Te.get("component");gr.set("container",et)}else Te.isGroup()&&dt.registerNewGroup(Te);if(Me=Te,Ot){var Nn=dt.get("isInit")?Qt.appear:Qt.enter;Nn&&dt.addAnimation(sr,Te,Nn)}}})},wt.prototype.clearUpdateStatus=function(X){var et=X.getChildren();(0,S.each)(et,function(dt){dt.set(at,null)})},wt.prototype.clearOffScreenCache=function(){var X=this.get("offScreenGroup");X&&X.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},wt.prototype.getDelegateObject=function(){var X,et=this.get("name"),dt=(X={},X[et]=this,X.component=this,X);return dt},wt.prototype.appendDelegateObject=function(X,et){var dt=X.get("delegateObject");et.delegateObject||(et.delegateObject={}),(0,S.mix)(et.delegateObject,dt)},wt.prototype.getReplaceAttrs=function(X,et){var dt=X.attr(),Ot=et.attr();return(0,S.each)(dt,function(Qt,se){Ot[se]===void 0&&(Ot[se]=void 0)}),Ot},wt.prototype.registerNewGroup=function(X){var et=this,dt=X.getChildren();(0,S.each)(dt,function(Ot){et.registerElement(Ot),Ot.set(at,"add"),Ot.isGroup()&&et.registerNewGroup(Ot)})},wt.prototype.deleteElements=function(){var X=this,et=this.get("shapesMap"),dt=[];(0,S.each)(et,function(se,Me){!se.get(at)||se.destroyed?dt.push([Me,se]):se.set(at,null)});var Ot=this.get("animate"),Qt=this.get("animateOption");(0,S.each)(dt,function(se){var Me=se[0],Te=se[1];if(!Te.destroyed){var Ne=Te.get("name");if(Ot&&Qt.leave){var Je=(0,S.mix)({callback:function(){X.removeElement(Te)}},Qt.leave);X.removeAnimation(Ne,Te,Je)}else X.removeElement(Te)}delete et[Me]})},wt.prototype.removeElement=function(X){if(X.get("isGroup")){var et=X.get("component");et&&et.destroy()}X.remove()},wt}(bt),ut=q,Et="\u2026";function Nt(ue){for(var wt=0,X=0;X<ue.length;X++)wt+=ee(ue,X);return wt}function ee(ue,wt){return ue.charCodeAt(wt)>0&&ue.charCodeAt(wt)<128?1:2}function ge(ue,wt,X){X===void 0&&(X="tail");var et=ue.length,dt="";if(X==="tail"){for(var Ot=0,Qt=0;Ot<wt;){var se=ee(ue,Qt);if(Ot+se<=wt)dt+=ue[Qt],Ot+=ee(ue,Qt),Qt++;else break}dt+=Et}else if(X==="head"){for(var Ot=0,Qt=et-1;Ot<wt;){var se=ee(ue,Qt);if(Ot+se<=wt)dt+=ue[Qt],Ot+=ee(ue,Qt),Qt--;else break}dt=Et+dt}else{for(var Me="",Te="",Ot=0,Ne=0,Je=et-1;Ot<wt;){var sr=ee(ue,Ne),gr=!1;sr+Ot<=wt&&(Me+=ue[Ne],Ne++,Ot+=sr,gr=!0);var Ir=ee(ue,Je);if(Ir+Ot<=wt&&(Te=ue[Je]+Te,Ot+=Ir,Je--,gr=!0),!gr)break}dt=Me+Et+Te}return dt}var De="\u2026",er=2;function Re(ue){var wt=0;return(0,S.each)(ue,function(X){var et=X.getBBox(),dt=et.width;wt<dt&&(wt=dt)}),wt}function Ke(ue,wt){var X=wt.getCanvasBBox();return ue?X.width:X.height}function hr(ue,wt){return ue.getBBox().width<wt}function Sr(ue,wt,X,et){et===void 0&&(et="tail");var dt=wt.attr("text"),Ot=Ke(ue,wt),Qt=Nt(dt),se=!1;if(X<Ot){var Me=Math.floor(X/Ot*Qt)-er,Te=void 0;Me>=0?Te=ge(dt,Me,et):Te=De,Te&&(wt.attr("text",Te),se=!0)}return se?wt.set("tip",dt):wt.set("tip",null),se}function Rr(ue,wt){var X=wt.x,et=wt.y,dt=wt.content,Ot=wt.style,Qt=wt.id,se=wt.name,Me=wt.rotate,Te=wt.maxLength,Ne=wt.autoEllipsis,Je=wt.isVertical,sr=wt.ellipsisPosition,gr=wt.background,Ir=ue.addGroup({id:Qt+"-group",name:se+"-group",attrs:{x:X,y:et}}),tn=Ir.addShape({type:"text",id:Qt,name:se,attrs:(0,M.__assign)({x:0,y:0,text:dt},Ot)}),Qr=Gt((0,S.get)(gr,"padding",0));if(Te&&Ne){var En=Te-(Qr[1]+Qr[3]);Sr(!Je,tn,En,sr)}if(gr){var Bn=(0,S.get)(gr,"style",{}),Nn=tn.getCanvasBBox(),Zt=Nn.minX,we=Nn.minY,_e=Nn.width,Ve=Nn.height,lr=Ir.addShape("rect",{id:Qt+"-bg",name:Qt+"-bg",attrs:(0,M.__assign)({x:Zt-Qr[3],y:we-Qr[0],width:_e+Qr[1]+Qr[3],height:Ve+Qr[0]+Qr[2]},Bn)});lr.toBack()}Ft(Ir,X,et),mt(Ir,Me,X,et)}var vr={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4},en=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:vr.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:vr.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:vr.lineColor,lineWidth:1}}}})},wt.prototype.renderInner=function(X){this.renderLine(X),this.get("text")&&this.renderLabel(X)},wt.prototype.renderLine=function(X){var et=this.get("start"),dt=this.get("end"),Ot=this.get("style");this.addShape(X,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,M.__assign)({x1:et.x,y1:et.y,x2:dt.x,y2:dt.y},Ot)})},wt.prototype.getLabelPoint=function(X,et,dt){var Ot;return dt==="start"?Ot=0:dt==="center"?Ot=.5:(0,S.isString)(dt)&&dt.indexOf("%")!==-1?Ot=parseInt(dt,10)/100:(0,S.isNumber)(dt)?Ot=dt:Ot=1,(Ot>1||Ot<0)&&(Ot=1),{x:y(X.x,et.x,Ot),y:y(X.y,et.y,Ot)}},wt.prototype.renderLabel=function(X){var et=this.get("text"),dt=this.get("start"),Ot=this.get("end"),Qt=et.position,se=et.content,Me=et.style,Te=et.offsetX,Ne=et.offsetY,Je=et.autoRotate,sr=et.maxLength,gr=et.autoEllipsis,Ir=et.ellipsisPosition,tn=et.background,Qr=et.isVertical,En=Qr===void 0?!1:Qr,Bn=this.getLabelPoint(dt,Ot,Qt),Nn=Bn.x+Te,Zt=Bn.y+Ne,we={id:this.getElementId("line-text"),name:"annotation-line-text",x:Nn,y:Zt,content:se,style:Me,maxLength:sr,autoEllipsis:gr,ellipsisPosition:Ir,background:tn,isVertical:En};if(Je){var _e=[Ot.x-dt.x,Ot.y-dt.y];we.rotate=Math.atan2(_e[1],_e[0])}Rr(X,we)},wt}(ut),gn=en,hn=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:vr.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:vr.fontFamily}}})},wt.prototype.setLocation=function(X){this.set("x",X.x),this.set("y",X.y),this.resetLocation()},wt.prototype.renderInner=function(X){var et=this.getLocation(),dt=et.x,Ot=et.y,Qt=this.get("content"),se=this.get("style"),Me=this.getElementId("text"),Te=this.get("name")+"-text",Ne=this.get("maxLength"),Je=this.get("autoEllipsis"),sr=this.get("isVertical"),gr=this.get("ellipsisPosition"),Ir=this.get("background"),tn=this.get("rotate"),Qr={id:Me,name:Te,x:dt,y:Ot,content:Qt,style:se,maxLength:Ne,autoEllipsis:Je,isVertical:sr,ellipsisPosition:gr,background:Ir,rotate:tn};Rr(X,Qr)},wt.prototype.resetLocation=function(){var X=this.getElementByLocalId("text-group");if(X){var et=this.getLocation(),dt=et.x,Ot=et.y,Qt=this.get("rotate");Ft(X,dt,Ot),mt(X,Qt,dt,Ot)}},wt}(ut),vn=hn,Wn=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},wt.prototype.renderInner=function(X){this.renderArc(X)},wt.prototype.getArcPath=function(){var X=this.getLocation(),et=X.center,dt=X.radius,Ot=X.startAngle,Qt=X.endAngle,se=Yt(et,dt,Ot),Me=Yt(et,dt,Qt),Te=Qt-Ot>Math.PI?1:0,Ne=[["M",se.x,se.y]];if(Qt-Ot==Math.PI*2){var Je=Yt(et,dt,Ot+Math.PI);Ne.push(["A",dt,dt,0,Te,1,Je.x,Je.y]),Ne.push(["A",dt,dt,0,Te,1,Me.x,Me.y])}else Ne.push(["A",dt,dt,0,Te,1,Me.x,Me.y]);return Ne},wt.prototype.renderArc=function(X){var et=this.getArcPath(),dt=this.get("style");this.addShape(X,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,M.__assign)({path:et},dt)})},wt}(ut),$r=Wn,wi=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:vr.regionColor,opacity:.4}}})},wt.prototype.renderInner=function(X){this.renderRegion(X)},wt.prototype.renderRegion=function(X){var et=this.get("start"),dt=this.get("end"),Ot=this.get("style"),Qt=Xt({start:et,end:dt});this.addShape(X,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.__assign)({x:Qt.x,y:Qt.y,width:Qt.width,height:Qt.height},Ot)})},wt}(ut),ci=wi,oe=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},wt.prototype.renderInner=function(X){this.renderImage(X)},wt.prototype.getImageAttrs=function(){var X=this.get("start"),et=this.get("end"),dt=this.get("style"),Ot=Xt({start:X,end:et}),Qt=this.get("src");return(0,M.__assign)({x:Ot.x,y:Ot.y,img:Qt,width:Ot.width,height:Ot.height},dt)},wt.prototype.renderImage=function(X){this.addShape(X,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},wt}(ut),ce=oe,Ee=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:vr.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:vr.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:vr.fontFamily}}}})},wt.prototype.renderInner=function(X){(0,S.get)(this.get("line"),"display")&&this.renderLine(X),(0,S.get)(this.get("text"),"display")&&this.renderText(X),(0,S.get)(this.get("point"),"display")&&this.renderPoint(X),this.get("autoAdjust")&&this.autoAdjust(X)},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},wt.prototype.renderPoint=function(X){var et=this.getShapeAttrs().point;this.addShape(X,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:et})},wt.prototype.renderLine=function(X){var et=this.getShapeAttrs().line;this.addShape(X,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:et})},wt.prototype.renderText=function(X){var et=this.getShapeAttrs().text,dt=et.x,Ot=et.y,Qt=et.text,se=(0,M.__rest)(et,["x","y","text"]),Me=this.get("text"),Te=Me.background,Ne=Me.maxLength,Je=Me.autoEllipsis,sr=Me.isVertival,gr=Me.ellipsisPosition,Ir={x:dt,y:Ot,id:this.getElementId("text"),name:"annotation-text",content:Qt,style:se,background:Te,maxLength:Ne,autoEllipsis:Je,isVertival:sr,ellipsisPosition:gr};Rr(X,Ir)},wt.prototype.autoAdjust=function(X){var et=this.get("direction"),dt=this.get("x"),Ot=this.get("y"),Qt=(0,S.get)(this.get("line"),"length",0),se=this.get("coordinateBBox"),Me=X.getBBox(),Te=Me.minX,Ne=Me.maxX,Je=Me.minY,sr=Me.maxY,gr=X.findById(this.getElementId("text-group")),Ir=X.findById(this.getElementId("text")),tn=X.findById(this.getElementId("line"));if(!!se){if(gr){if(dt+Te<=se.minX){var Qr=se.minX-(dt+Te);Ft(gr,gr.attr("x")+Qr,gr.attr("y"))}if(dt+Ne>=se.maxX){var Qr=dt+Ne-se.maxX;Ft(gr,gr.attr("x")-Qr,gr.attr("y"))}}if(et==="upward"&&Ot+Je<=se.minY||et!=="upward"&&Ot+sr>=se.maxY){var En=void 0,Bn=void 0;et==="upward"&&Ot+Je<=se.minY?(En="top",Bn=1):(En="bottom",Bn=-1),Ir.attr("textBaseline",En),tn&&tn.attr("path",[["M",0,0],["L",0,Qt*Bn]]),Ft(gr,gr.attr("x"),(Qt+2)*Bn)}}},wt.prototype.getShapeAttrs=function(){var X=(0,S.get)(this.get("line"),"display"),et=(0,S.get)(this.get("point"),"style",{}),dt=(0,S.get)(this.get("line"),"style",{}),Ot=(0,S.get)(this.get("text"),"style",{}),Qt=this.get("direction"),se=X?(0,S.get)(this.get("line"),"length",0):0,Me=Qt==="upward"?-1:1;return{point:(0,M.__assign)({x:0,y:0},et),line:(0,M.__assign)({path:[["M",0,0],["L",0,se*Me]]},dt),text:(0,M.__assign)({x:0,y:(se+2)*Me,text:(0,S.get)(this.get("text"),"content",""),textBaseline:Qt==="upward"?"bottom":"top"},Ot)}},wt}(ut),Pe=Ee,Fe=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:vr.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:vr.textColor,fontFamily:vr.fontFamily}}}})},wt.prototype.renderInner=function(X){var et=(0,S.get)(this.get("region"),"style",{}),dt=(0,S.get)(this.get("text"),"style",{}),Ot=this.get("lineLength")||0,Qt=this.get("points");if(!!Qt.length){var se=Q(Qt),Me=[];Me.push(["M",Qt[0].x,se.minY-Ot]),Qt.forEach(function(Ne){Me.push(["L",Ne.x,Ne.y])}),Me.push(["L",Qt[Qt.length-1].x,Qt[Qt.length-1].y-Ot]),this.addShape(X,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,M.__assign)({path:Me},et)});var Te=(0,M.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(se.minX+se.maxX)/2,y:se.minY-Ot},this.get("text"));Rr(X,Te)}},wt}(ut),Ue=Fe,Qe=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},wt.prototype.renderInner=function(X){var et=this,dt=this.get("start"),Ot=this.get("end"),Qt=this.addGroup(X,{id:this.getElementId("region-filter"),capture:!1});(0,S.each)(this.get("shapes"),function(Me,Te){var Ne=Me.get("type"),Je=(0,S.clone)(Me.attr());et.adjustShapeAttrs(Je),et.addShape(Qt,{id:et.getElementId("shape-"+Ne+"-"+Te),capture:!1,type:Ne,attrs:Je})});var se=Xt({start:dt,end:Ot});Qt.setClip({type:"rect",attrs:{x:se.minX,y:se.minY,width:se.width,height:se.height}})},wt.prototype.adjustShapeAttrs=function(X){var et=this.get("color");X.fill&&(X.fill=X.fillStyle=et),X.stroke=X.strokeStyle=et},wt}(ut),rr=Qe;function We(ue,wt,X){var et=wt+"Style",dt=null;return(0,S.each)(X,function(Ot,Qt){ue[Qt]&&Ot[et]&&(dt||(dt={}),(0,S.mix)(dt,Ot[et]))}),dt}var fr=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:vr.lineColor}},tickLine:{style:{lineWidth:1,stroke:vr.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:vr.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:vr.textColor,textBaseline:"middle",fontFamily:vr.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:vr.textColor,textBaseline:"middle",fontFamily:vr.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:vr.uncheckedColor}}}}})},wt.prototype.renderInner=function(X){this.get("line")&&this.drawLine(X),this.drawTicks(X),this.get("title")&&this.drawTitle(X)},wt.prototype.isList=function(){return!0},wt.prototype.getItems=function(){return this.get("ticks")},wt.prototype.setItems=function(X){this.update({ticks:X})},wt.prototype.updateItem=function(X,et){(0,S.mix)(X,et),this.clear(),this.render()},wt.prototype.clearItems=function(){var X=this.getElementByLocalId("label-group");X&&X.clear()},wt.prototype.setItemState=function(X,et,dt){X[et]=dt,this.updateTickStates(X)},wt.prototype.hasState=function(X,et){return!!X[et]},wt.prototype.getItemStates=function(X){var et=this.get("tickStates"),dt=[];return(0,S.each)(et,function(Ot,Qt){X[Qt]&&dt.push(Qt)}),dt},wt.prototype.clearItemsState=function(X){var et=this,dt=this.getItemsByState(X);(0,S.each)(dt,function(Ot){et.setItemState(Ot,X,!1)})},wt.prototype.getItemsByState=function(X){var et=this,dt=this.getItems();return(0,S.filter)(dt,function(Ot){return et.hasState(Ot,X)})},wt.prototype.getSidePoint=function(X,et){var dt=this,Ot=dt.getSideVector(et,X);return{x:X.x+Ot[0],y:X.y+Ot[1]}},wt.prototype.getTextAnchor=function(X){var et;return(0,S.isNumberEqual)(X[0],0)?et="center":X[0]>0?et="start":X[0]<0&&(et="end"),et},wt.prototype.processOverlap=function(X){},wt.prototype.drawLine=function(X){var et=this.getLinePath(),dt=this.get("line");this.addShape(X,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,S.mix)({path:et},dt.style)})},wt.prototype.getTickLineItems=function(X){var et=this,dt=[],Ot=this.get("tickLine"),Qt=Ot.alignTick,se=Ot.length,Me=1,Te=X.length;return Te>=2&&(Me=X[1].value-X[0].value),(0,S.each)(X,function(Ne){var Je=Ne.point;Qt||(Je=et.getTickPoint(Ne.value-Me/2));var sr=et.getSidePoint(Je,se);dt.push({startPoint:Je,tickValue:Ne.value,endPoint:sr,tickId:Ne.id,id:"tickline-"+Ne.id})}),dt},wt.prototype.getSubTickLineItems=function(X){var et=[],dt=this.get("subTickLine"),Ot=dt.count,Qt=X.length;if(Qt>=2)for(var se=0;se<Qt-1;se++)for(var Me=X[se],Te=X[se+1],Ne=0;Ne<Ot;Ne++){var Je=(Ne+1)/(Ot+1),sr=(1-Je)*Me.tickValue+Je*Te.tickValue,gr=this.getTickPoint(sr),Ir=this.getSidePoint(gr,dt.length);et.push({startPoint:gr,endPoint:Ir,tickValue:sr,id:"sub-"+Me.id+"-"+Ne})}return et},wt.prototype.getTickLineAttrs=function(X,et){var dt=this.get(et).style,Ot=X.startPoint,Qt=X.endPoint,se=(0,S.mix)({x1:Ot.x,y1:Ot.y,x2:Qt.x,y2:Qt.y},dt);return se},wt.prototype.drawTick=function(X,et,dt){this.addShape(et,{type:"line",id:this.getElementId(X.id),name:"axis-"+dt,attrs:this.getTickLineAttrs(X,dt)})},wt.prototype.drawTickLines=function(X){var et=this,dt=this.get("ticks"),Ot=this.get("subTickLine"),Qt=this.getTickLineItems(dt),se=this.addGroup(X,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),Me=this.get("tickLine");if((0,S.each)(Qt,function(Ne){if(Me.displayWithLabel){var Je=et.getElementId("label-"+Ne.tickId);X.findById(Je)&&et.drawTick(Ne,se,"tickLine")}else et.drawTick(Ne,se,"tickLine")}),Ot){var Te=this.getSubTickLineItems(Qt);(0,S.each)(Te,function(Ne){et.drawTick(Ne,se,"subTickLine")})}},wt.prototype.processTicks=function(){var X=this,et=this.get("ticks");(0,S.each)(et,function(dt){dt.point=X.getTickPoint(dt.value),(0,S.isNil)(dt.id)&&(dt.id=dt.name)})},wt.prototype.drawTicks=function(X){var et=this;this.processTicks(),this.get("label")&&this.drawLabels(X),this.get("tickLine")&&this.drawTickLines(X);var dt=this.get("ticks");(0,S.each)(dt,function(Ot){et.applyTickStates(Ot,X)})},wt.prototype.getLabelAttrs=function(X,et){var dt=this.get("label"),Ot=dt.offset,Qt=dt.style,se=dt.rotate,Me=dt.formatter,Te=this.getSidePoint(X.point,Ot),Ne=this.getSideVector(Ot,Te),Je=Me?Me(X.name,X,et):X.name,sr=(0,S.mix)({x:Te.x,y:Te.y,text:Je,textAlign:this.getTextAnchor(Ne)},Qt);return se&&(sr.matrix=$(Te,se)),sr},wt.prototype.drawLabels=function(X){var et=this,dt=this.get("ticks"),Ot=this.addGroup(X,{name:"axis-label-group",id:this.getElementId("label-group")});(0,S.each)(dt,function(Qt,se){et.addShape(Ot,{type:"text",name:"axis-label",id:et.getElementId("label-"+Qt.id),attrs:et.getLabelAttrs(Qt,se),delegateObject:{tick:Qt,item:Qt,index:se}})}),this.processOverlap(Ot)},wt.prototype.getTitleAttrs=function(){var X=this.get("title"),et=X.style,dt=X.position,Ot=X.offset,Qt=X.spacing,se=Qt===void 0?0:Qt,Me=X.autoRotate,Te=et.fontSize,Ne=.5;dt==="start"?Ne=0:dt==="end"&&(Ne=1);var Je=this.getTickPoint(Ne),sr=this.getSidePoint(Je,Ot||se+Te/2),gr=(0,S.mix)({x:sr.x,y:sr.y,text:X.text},et),Ir=X.rotate,tn=Ir;if((0,S.isNil)(Ir)&&Me){var Qr=this.getAxisVector(Je),En=[1,0];tn=N.angleTo(Qr,En,!0)}if(tn){var Bn=$(sr,tn);gr.matrix=Bn}return gr},wt.prototype.drawTitle=function(X){this.addShape(X,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},wt.prototype.applyTickStates=function(X,et){var dt=this.getItemStates(X);if(dt.length){var Ot=this.get("tickStates"),Qt=this.getElementId("label-"+X.id),se=et.findById(Qt);if(se){var Me=We(X,"label",Ot);Me&&se.attr(Me)}var Te=this.getElementId("tickline-"+X.id),Ne=et.findById(Te);if(Ne){var Je=We(X,"tickLine",Ot);Je&&Ne.attr(Je)}}},wt.prototype.updateTickStates=function(X){var et=this.getItemStates(X),dt=this.get("tickStates"),Ot=this.get("label"),Qt=this.getElementByLocalId("label-"+X.id),se=this.get("tickLine"),Me=this.getElementByLocalId("tickline-"+X.id);if(et.length){if(Qt){var Te=We(X,"label",dt);Te&&Qt.attr(Te)}if(Me){var Ne=We(X,"tickLine",dt);Ne&&Me.attr(Ne)}}else Qt&&Qt.attr(Ot.style),Me&&Me.attr(se.style)},wt}(ut),fe=fr;function re(ue,wt,X,et){var dt=wt.getChildren(),Ot=!1;return(0,S.each)(dt,function(Qt){var se=Sr(ue,Qt,X,et);Ot=Ot||se}),Ot}function Rt(){return be}function ie(ue,wt,X){return re(ue,wt,X,"head")}function be(ue,wt,X){return re(ue,wt,X,"tail")}function Oe(ue,wt,X){return re(ue,wt,X,"middle")}function ze(ue){var wt=ue.attr("matrix");return wt&&wt[0]!==1}function ke(ue,wt,X,et,dt){dt===void 0&&(dt=!1);var Ot=!1;if(ue)Ot=Math.abs(X.y-et.y)<X.height;else if(wt){var Qt=dt?et.height:X.height;Ot=Math.abs(X.x-et.x)<Qt}else{var se=dt?et.width:X.width;Ot=Math.abs(X.x-et.x)<se}return Ot}function Ze(ue,wt,X){var et=wt.getChildren().slice();if(!et.length)return!1;var dt=!1;X&&et.reverse();for(var Ot=et.length,Qt=et[0],se=ze(Qt),Me=Qt.getBBox(),Te=1;Te<Ot;Te++){var Ne=et[Te],Je=Ne.getBBox(),sr=ke(ue,se,Me,Je,X);sr?(Ne.hide(),dt=!0):Me=Je}return dt}function kr(){return pe}function Fr(ue,wt){return Ze(ue,wt,!1)}function jr(ue,wt){return Ze(ue,wt,!0)}function ve(ue,wt){var X=wt.getChildren().slice();if(X.length<=2)return!1;for(var et=!1,dt=X.length,Ot=X[0],Qt=X[dt-1],se=ze(Ot),Me=Ot.getBBox(),Te=Ot,Ne=1;Ne<dt-1;Ne++){var Je=X[Ne],sr=Je.getBBox(),gr=ke(ue,se,Me,sr);gr?(Je.hide(),et=!0):(Me=sr,Te=Je)}var Ir=Qt.getBBox(),tn=ke(ue,se,Me,Ir);return tn&&(Te.hide(),et=!0),et}function pe(ue,wt){var X=wt.getChildren().slice();if(X.length<2)return!1;var et=!1,dt=X[0],Ot=dt.getBBox(),Qt=X[1],se=ze(dt),Me=X.length,Te=0;if(ue){var Ne=Math.abs(Qt.attr("y")-dt.attr("y"));Te=Ot.height/Ne}else if(se){var Ne=Math.abs(Qt.attr("x")-dt.attr("x"));Te=Ot.width/Ne}else{var Je=Re(X),Ne=Math.abs(Qt.attr("x")-dt.attr("x"));Te=Je/Ne}if(Te>1){Te=Math.ceil(Te);for(var sr=0;sr<Me;sr++)sr%Te!=0&&(X[sr].hide(),et=!0)}return et}function Se(ue,wt){(0,S.each)(ue,function(X){var et=X.attr("x"),dt=X.attr("y"),Ot=$({x:et,y:dt},wt);X.attr("matrix",Ot)})}function Xe(ue,wt,X,et){var dt=wt.getChildren();if(!dt.length||!ue&&dt.length<2)return!1;var Ot=Re(dt),Qt=!1;if(ue)Qt=!!X&&Ot>X;else{var se=Math.abs(dt[1].attr("x")-dt[0].attr("x"));Qt=Ot>se}if(Qt){var Me=et(X,Ot);Se(dt,Me)}return Qt}function je(){return tr}function tr(ue,wt,X){return Xe(ue,wt,X,function(){return ue?vr.verticalAxisRotate:vr.horizontalAxisRotate})}function pr(ue,wt,X){return Xe(ue,wt,X,function(et,dt){if(!et)return ue?vr.verticalAxisRotate:vr.horizontalAxisRotate;if(ue)return-Math.acos(et/dt);var Ot=0;return et>dt?Ot=Math.PI/4:(Ot=Math.asin(et/dt),Ot>Math.PI/4&&(Ot=Math.PI/4)),Ot})}var Ar=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"line",locationType:"region",start:null,end:null})},wt.prototype.getLinePath=function(){var X=this.get("start"),et=this.get("end"),dt=[];return dt.push(["M",X.x,X.y]),dt.push(["L",et.x,et.y]),dt},wt.prototype.getInnerLayoutBBox=function(){var X=this.get("start"),et=this.get("end"),dt=ue.prototype.getInnerLayoutBBox.call(this),Ot=Math.min(X.x,et.x,dt.x),Qt=Math.min(X.y,et.y,dt.y),se=Math.max(X.x,et.x,dt.maxX),Me=Math.max(X.y,et.y,dt.maxY);return{x:Ot,y:Qt,minX:Ot,minY:Qt,maxX:se,maxY:Me,width:se-Ot,height:Me-Qt}},wt.prototype.isVertical=function(){var X=this.get("start"),et=this.get("end");return(0,S.isNumberEqual)(X.x,et.x)},wt.prototype.isHorizontal=function(){var X=this.get("start"),et=this.get("end");return(0,S.isNumberEqual)(X.y,et.y)},wt.prototype.getTickPoint=function(X){var et=this,dt=et.get("start"),Ot=et.get("end"),Qt=Ot.x-dt.x,se=Ot.y-dt.y;return{x:dt.x+Qt*X,y:dt.y+se*X}},wt.prototype.getSideVector=function(X){var et=this.getAxisVector(),dt=G.normalize([0,0],et),Ot=this.get("verticalFactor"),Qt=[dt[1],dt[0]*-1];return G.scale([0,0],Qt,X*Ot)},wt.prototype.getAxisVector=function(){var X=this.get("start"),et=this.get("end");return[et.x-X.x,et.y-X.y]},wt.prototype.processOverlap=function(X){var et=this,dt=this.isVertical(),Ot=this.isHorizontal();if(!(!dt&&!Ot)){var Qt=this.get("label"),se=this.get("title"),Me=this.get("verticalLimitLength"),Te=Qt.offset,Ne=Me,Je=0,sr=0;se&&(Je=se.style.fontSize,sr=se.spacing),Ne&&(Ne=Ne-Te-sr-Je);var gr=this.get("overlapOrder");if((0,S.each)(gr,function(Qr){Qt[Qr]&&et.autoProcessOverlap(Qr,Qt[Qr],X,Ne)}),se){var Ir=X.getBBox(),tn=dt?Ir.width:Ir.height;(0,S.isNil)(se.offset)&&(se.offset=Te+tn+sr+Je/2)}}},wt.prototype.autoProcessOverlap=function(X,et,dt,Ot){var Qt=this,se=this.isVertical(),Me=!1,Te=O[X];if(et===!0?Me=Te.getDefault()(se,dt,Ot):(0,S.isFunction)(et)?Me=et(se,dt,Ot):Te[et]&&(Me=Te[et](se,dt,Ot)),X==="autoRotate"){if(Me){var Ne=dt.getChildren(),Je=this.get("verticalFactor");(0,S.each)(Ne,function(gr){var Ir=gr.attr("textAlign");if(Ir==="center"){var tn=Je>0?"end":"start";gr.attr("textAlign",tn)}})}}else if(X==="autoHide"){var sr=dt.getChildren().slice(0);(0,S.each)(sr,function(gr){gr.get("visible")||(Qt.get("isRegister")&&Qt.unregisterElement(gr),gr.remove())})}},wt}(fe),Hr=Ar,Br=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},wt.prototype.getLinePath=function(){var X=this.get("center"),et=X.x,dt=X.y,Ot=this.get("radius"),Qt=Ot,se=this.get("startAngle"),Me=this.get("endAngle"),Te=[];if(Math.abs(Me-se)===Math.PI*2)Te=[["M",et,dt-Qt],["A",Ot,Qt,0,1,1,et,dt+Qt],["A",Ot,Qt,0,1,1,et,dt-Qt],["Z"]];else{var Ne=this.getCirclePoint(se),Je=this.getCirclePoint(Me),sr=Math.abs(Me-se)>Math.PI?1:0,gr=se>Me?0:1;Te=[["M",et,dt],["L",Ne.x,Ne.y],["A",Ot,Qt,0,sr,gr,Je.x,Je.y],["L",et,dt]]}return Te},wt.prototype.getTickPoint=function(X){var et=this.get("startAngle"),dt=this.get("endAngle"),Ot=et+(dt-et)*X;return this.getCirclePoint(Ot)},wt.prototype.getSideVector=function(X,et){var dt=this.get("center"),Ot=[et.x-dt.x,et.y-dt.y],Qt=this.get("verticalFactor"),se=G.length(Ot);return G.scale(Ot,Ot,Qt*X/se),Ot},wt.prototype.getAxisVector=function(X){var et=this.get("center"),dt=[X.x-et.x,X.y-et.y];return[dt[1],-1*dt[0]]},wt.prototype.getCirclePoint=function(X,et){var dt=this.get("center");return et=et||this.get("radius"),{x:dt.x+Math.cos(X)*et,y:dt.y+Math.sin(X)*et}},wt}(fe),Vr=Br,Tn=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:vr.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:vr.textColor,textAlign:"center",textBaseline:"middle",fontFamily:vr.fontFamily}},textBackground:{padding:5,style:{stroke:vr.lineColor}}}})},wt.prototype.renderInner=function(X){this.get("line")&&this.renderLine(X),this.get("text")&&(this.renderText(X),this.renderBackground(X))},wt.prototype.renderText=function(X){var et=this.get("text"),dt=et.style,Ot=et.autoRotate,Qt=et.content;if(!(0,S.isNil)(Qt)){var se=this.getTextPoint(),Me=null;if(Ot){var Te=this.getRotateAngle();Me=$(se,Te)}this.addShape(X,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,M.__assign)((0,M.__assign)((0,M.__assign)({},se),{text:Qt,matrix:Me}),dt)})}},wt.prototype.renderLine=function(X){var et=this.getLinePath(),dt=this.get("line"),Ot=dt.style;this.addShape(X,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,M.__assign)({path:et},Ot)})},wt.prototype.renderBackground=function(X){var et=this.getElementId("text"),dt=X.findById(et),Ot=this.get("textBackground");if(Ot&&dt){var Qt=dt.getBBox(),se=Gt(Ot.padding),Me=Ot.style,Te=this.addShape(X,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,M.__assign)({x:Qt.x-se[3],y:Qt.y-se[0],width:Qt.width+se[1]+se[3],height:Qt.height+se[0]+se[2],matrix:dt.attr("matrix")},Me)});Te.toBack()}},wt}(ut),Pn=Tn,ni=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"line",locationType:"region",start:null,end:null})},wt.prototype.getRotateAngle=function(){var X=this.getLocation(),et=X.start,dt=X.end,Ot=this.get("text").position,Qt=Math.atan2(dt.y-et.y,dt.x-et.x),se=Ot==="start"?Qt-Math.PI/2:Qt+Math.PI/2;return se},wt.prototype.getTextPoint=function(){var X=this.getLocation(),et=X.start,dt=X.end,Ot=this.get("text"),Qt=Ot.position,se=Ot.offset;return kt(et,dt,Qt,se)},wt.prototype.getLinePath=function(){var X=this.getLocation(),et=X.start,dt=X.end;return[["M",et.x,et.y],["L",dt.x,dt.y]]},wt}(Pn),On=ni,si=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},wt.prototype.getRotateAngle=function(){var X=this.getLocation(),et=X.startAngle,dt=X.endAngle,Ot=this.get("text").position,Qt=Ot==="start"?et+Math.PI/2:dt-Math.PI/2;return Qt},wt.prototype.getTextPoint=function(){var X=this.get("text"),et=X.position,dt=X.offset,Ot=this.getLocation(),Qt=Ot.center,se=Ot.radius,Me=Ot.startAngle,Te=Ot.endAngle,Ne=et==="start"?Me:Te,Je=this.getRotateAngle()-Math.PI,sr=Yt(Qt,se,Ne),gr=Math.cos(Je)*dt,Ir=Math.sin(Je)*dt;return{x:sr.x+gr,y:sr.y+Ir}},wt.prototype.getLinePath=function(){var X=this.getLocation(),et=X.center,dt=X.radius,Ot=X.startAngle,Qt=X.endAngle,se=null;if(Qt-Ot==Math.PI*2){var Me=et.x,Te=et.y;se=[["M",Me,Te-dt],["A",dt,dt,0,1,1,Me,Te+dt],["A",dt,dt,0,1,1,Me,Te-dt],["Z"]]}else{var Ne=Yt(et,dt,Ot),Je=Yt(et,dt,Qt),sr=Math.abs(Qt-Ot)>Math.PI?1:0,gr=Ot>Qt?0:1;se=[["M",Ne.x,Ne.y],["A",dt,dt,0,sr,gr,Je.x,Je.y]]}return se},wt}(Pn),zn=si,Ti=v(50344),Hn=v(53918),Un=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},wt.prototype.getContainer=function(){return this.get("container")},wt.prototype.show=function(){var X=this.get("container");X.style.display="",this.set("visible",!0)},wt.prototype.hide=function(){var X=this.get("container");X.style.display="none",this.set("visible",!1)},wt.prototype.setCapture=function(X){var et=this.getContainer(),dt=X?"auto":"none";et.style.pointerEvents=dt,this.set("capture",X)},wt.prototype.getBBox=function(){var X=this.getContainer(),et=parseFloat(X.style.left)||0,dt=parseFloat(X.style.top)||0;return qt(et,dt,X.clientWidth,X.clientHeight)},wt.prototype.clear=function(){var X=this.get("container");gt(X)},wt.prototype.destroy=function(){this.removeEvent(),this.removeDom(),ue.prototype.destroy.call(this)},wt.prototype.init=function(){ue.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},wt.prototype.initCapture=function(){this.setCapture(this.get("capture"))},wt.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},wt.prototype.initDom=function(){},wt.prototype.initContainer=function(){var X=this.get("container");if((0,S.isNil)(X)){X=this.createDom();var et=this.get("parent");(0,S.isString)(et)&&(et=document.getElementById(et),this.set("parent",et)),et.appendChild(X),this.set("container",X)}else(0,S.isString)(X)&&(X=document.getElementById(X),this.set("container",X));this.get("parent")||this.set("parent",X.parentNode)},wt.prototype.resetStyles=function(){var X=this.get("domStyles"),et=this.get("defaultStyles");X?X=(0,S.deepMix)({},et,X):X=et,this.set("domStyles",X)},wt.prototype.applyStyles=function(){var X=this.get("domStyles");if(!!X){var et=this.getContainer();this.applyChildrenStyles(et,X);var dt=this.get("containerClassName");if(dt&&st(et,dt)){var Ot=X[dt];(0,Hn.Z)(et,Ot)}}},wt.prototype.applyChildrenStyles=function(X,et){(0,S.each)(et,function(dt,Ot){var Qt=X.getElementsByClassName(Ot);(0,S.each)(Qt,function(se){(0,Hn.Z)(se,dt)})})},wt.prototype.applyStyle=function(X,et){var dt=this.get("domStyles");(0,Hn.Z)(et,dt[X])},wt.prototype.createDom=function(){var X=this.get("containerTpl");return(0,Ti.Z)(X)},wt.prototype.initEvent=function(){},wt.prototype.removeDom=function(){var X=this.get("container");X&&X.parentNode.removeChild(X)},wt.prototype.removeEvent=function(){},wt.prototype.updateInner=function(X){(0,S.hasKey)(X,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},wt.prototype.resetPosition=function(){},wt}(bt),Ri=Un,Jt="g2-crosshair",Dt=Jt+"-line",yt=Jt+"-text",Ct,ct=(Ct={},Ct[""+Jt]={position:"relative"},Ct[""+Dt]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},Ct[""+yt]={position:"absolute",color:vr.textColor,fontFamily:vr.fontFamily},Ct),vt=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+Jt+'"></div>',crosshairTpl:'<div class="'+Dt+'"></div>',textTpl:'<span class="'+yt+'">{content}</span>',domStyles:null,containerClassName:Jt,defaultStyles:ct,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},wt.prototype.render=function(){this.resetText(),this.resetPosition()},wt.prototype.initCrossHair=function(){var X=this.getContainer(),et=this.get("crosshairTpl"),dt=(0,Ti.Z)(et);X.appendChild(dt),this.applyStyle(Dt,dt),this.set("crosshairEl",dt)},wt.prototype.getTextPoint=function(){var X=this.getLocation(),et=X.start,dt=X.end,Ot=this.get("text"),Qt=Ot.position,se=Ot.offset;return kt(et,dt,Qt,se)},wt.prototype.resetText=function(){var X=this.get("text"),et=this.get("textEl");if(X){var dt=X.content;if(!et){var Ot=this.getContainer(),Qt=(0,S.substitute)(this.get("textTpl"),X);et=(0,Ti.Z)(Qt),Ot.appendChild(et),this.applyStyle(yt,et),this.set("textEl",et)}et.innerHTML=dt}else et&&et.remove()},wt.prototype.isVertical=function(X,et){return X.x===et.x},wt.prototype.resetPosition=function(){var X=this.get("crosshairEl");X||(this.initCrossHair(),X=this.get("crosshairEl"));var et=this.get("start"),dt=this.get("end"),Ot=Math.min(et.x,dt.x),Qt=Math.min(et.y,dt.y);this.isVertical(et,dt)?(0,Hn.Z)(X,{width:"1px",height:Tt(Math.abs(dt.y-et.y))}):(0,Hn.Z)(X,{height:"1px",width:Tt(Math.abs(dt.x-et.x))}),(0,Hn.Z)(X,{top:Tt(Qt),left:Tt(Ot)}),this.alignText()},wt.prototype.alignText=function(){var X=this.get("textEl");if(X){var et=this.get("text").align,dt=X.clientWidth,Ot=this.getTextPoint();switch(et){case"center":Ot.x=Ot.x-dt/2;break;case"right":Ot.x=Ot.x-dt;case"left":break}(0,Hn.Z)(X,{top:Tt(Ot.y),left:Tt(Ot.x)})}},wt.prototype.updateInner=function(X){(0,S.hasKey)(X,"text")&&this.resetText(),ue.prototype.updateInner.call(this,X)},wt}(Ri),ot=vt,St=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:vr.lineColor}}}})},wt.prototype.getLineType=function(){var X=this.get("line")||this.get("defaultCfg").line;return X.type},wt.prototype.renderInner=function(X){this.drawGrid(X)},wt.prototype.getAlternatePath=function(X,et){var dt=this.getGridPath(X),Ot=et.slice(0).reverse(),Qt=this.getGridPath(Ot,!0),se=this.get("closed");return se?dt=dt.concat(Qt):(Qt[0][0]="L",dt=dt.concat(Qt),dt.push(["Z"])),dt},wt.prototype.getPathStyle=function(){return this.get("line").style},wt.prototype.drawGrid=function(X){var et=this,dt=this.get("line"),Ot=this.get("items"),Qt=this.get("alternateColor"),se=null;(0,S.each)(Ot,function(Me,Te){var Ne=Me.id||Te;if(dt){var Je=et.getPathStyle(),sr=et.getElementId("line-"+Ne),gr=et.getGridPath(Me.points);et.addShape(X,{type:"path",name:"grid-line",id:sr,attrs:(0,S.mix)({path:gr},Je)})}if(Qt&&Te>0){var Ir=et.getElementId("region-"+Ne),tn=Te%2==0;if((0,S.isString)(Qt))tn&&et.drawAlternateRegion(Ir,X,se.points,Me.points,Qt);else{var Qr=tn?Qt[1]:Qt[0];et.drawAlternateRegion(Ir,X,se.points,Me.points,Qr)}}se=Me})},wt.prototype.drawAlternateRegion=function(X,et,dt,Ot,Qt){var se=this.getAlternatePath(dt,Ot);this.addShape(et,{type:"path",id:X,name:"grid-region",attrs:{path:se,fill:Qt}})},wt}(ut),Mt=St;function te(ue,wt,X,et){var dt=X-ue,Ot=et-wt;return Math.sqrt(dt*dt+Ot*Ot)}var ne=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"circle",center:null,closed:!0})},wt.prototype.getGridPath=function(X,et){var dt=this.getLineType(),Ot=this.get("closed"),Qt=[];if(X.length)if(dt==="circle"){var se=this.get("center"),Me=X[0],Te=te(se.x,se.y,Me.x,Me.y),Ne=et?0:1;Ot?(Qt.push(["M",se.x,se.y-Te]),Qt.push(["A",Te,Te,0,0,Ne,se.x,se.y+Te]),Qt.push(["A",Te,Te,0,0,Ne,se.x,se.y-Te]),Qt.push(["Z"])):(0,S.each)(X,function(Je,sr){sr===0?Qt.push(["M",Je.x,Je.y]):Qt.push(["A",Te,Te,0,0,Ne,Je.x,Je.y])})}else(0,S.each)(X,function(Je,sr){sr===0?Qt.push(["M",Je.x,Je.y]):Qt.push(["L",Je.x,Je.y])}),Ot&&Qt.push(["Z"]);return Qt},wt}(Mt),de=ne,He=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"line"})},wt.prototype.getGridPath=function(X){var et=[];return(0,S.each)(X,function(dt,Ot){Ot===0?et.push(["M",dt.x,dt.y]):et.push(["L",dt.x,dt.y])}),et},wt}(Mt),Ge=He,Ie=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},wt.prototype.getLayoutBBox=function(){var X=ue.prototype.getLayoutBBox.call(this),et=this.get("x"),dt=this.get("y"),Ot=this.get("offsetX"),Qt=this.get("offsetY"),se=this.get("maxWidth"),Me=this.get("maxHeight"),Te=et+Ot,Ne=dt+Qt,Je=X.maxX-Te,sr=X.maxY-Ne;return se&&(Je=Math.min(Je,se)),Me&&(sr=Math.min(sr,Me)),qt(Te,Ne,Je,sr)},wt.prototype.setLocation=function(X){this.set("x",X.x),this.set("y",X.y),this.resetLocation()},wt.prototype.resetLocation=function(){var X=this.get("x"),et=this.get("y"),dt=this.get("offsetX"),Ot=this.get("offsetY");this.moveElementTo(this.get("group"),{x:X+dt,y:et+Ot})},wt.prototype.applyOffset=function(){this.resetLocation()},wt.prototype.getDrawPoint=function(){return this.get("currentPoint")},wt.prototype.setDrawPoint=function(X){return this.set("currentPoint",X)},wt.prototype.renderInner=function(X){this.resetDraw(),this.get("title")&&this.drawTitle(X),this.drawLegendContent(X),this.get("background")&&this.drawBackground(X)},wt.prototype.drawBackground=function(X){var et=this.get("background"),dt=X.getBBox(),Ot=Gt(et.padding),Qt=(0,M.__assign)({x:0,y:0,width:dt.width+Ot[1]+Ot[3],height:dt.height+Ot[0]+Ot[2]},et.style),se=this.addShape(X,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:Qt});se.toBack()},wt.prototype.drawTitle=function(X){var et=this.get("currentPoint"),dt=this.get("title"),Ot=dt.spacing,Qt=dt.style,se=dt.text,Me=this.addShape(X,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,M.__assign)({text:se,x:et.x,y:et.y},Qt)}),Te=Me.getBBox();this.set("currentPoint",{x:et.x,y:Te.maxY+Ot})},wt.prototype.resetDraw=function(){var X=this.get("background"),et={x:0,y:0};if(X){var dt=Gt(X.padding);et.x=dt[3],et.y=dt[0]}this.set("currentPoint",et)},wt}(ut),qe=Ie,xr=function(ue){(0,M.__extends)(wt,ue);function wt(){var X=ue!==null&&ue.apply(this,arguments)||this;return X.currentPageIndex=1,X.totalPagesCnt=1,X.pageWidth=0,X.pageHeight=0,X.startX=0,X.startY=0,X.onNavigationBack=function(){var et=X.getElementByLocalId("item-group");if(X.currentPageIndex>1){X.currentPageIndex-=1,X.updateNavigation();var dt=X.getCurrentNavigationMatrix();X.get("animate")?et.animate({matrix:dt},100):et.attr({matrix:dt})}},X.onNavigationAfter=function(){var et=X.getElementByLocalId("item-group");if(X.currentPageIndex<X.totalPagesCnt){X.currentPageIndex+=1,X.updateNavigation();var dt=X.getCurrentNavigationMatrix();X.get("animate")?et.animate({matrix:dt},100):et.attr({matrix:dt})}},X}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"legend",type:"category",itemSpacing:24,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:vr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:vr.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:vr.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:vr.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:vr.uncheckedColor},markerStyle:{fill:vr.uncheckedColor,stroke:vr.uncheckedColor}},inactive:{nameStyle:{fill:vr.uncheckedColor},markerStyle:{opacity:.2}}}}})},wt.prototype.isList=function(){return!0},wt.prototype.getItems=function(){return this.get("items")},wt.prototype.setItems=function(X){this.update({items:X})},wt.prototype.updateItem=function(X,et){(0,S.mix)(X,et),this.clear(),this.render()},wt.prototype.clearItems=function(){var X=this.getElementByLocalId("item-group");X&&X.clear()},wt.prototype.setItemState=function(X,et,dt){X[et]=dt;var Ot=this.getElementByLocalId("item-"+X.id);if(Ot){var Qt=this.getItems(),se=Qt.indexOf(X),Me=this.createOffScreenGroup(),Te=this.drawItem(X,se,this.getItemHeight(),Me);this.updateElements(Te,Ot),this.clearUpdateStatus(Ot)}},wt.prototype.hasState=function(X,et){return!!X[et]},wt.prototype.getItemStates=function(X){var et=this.get("itemStates"),dt=[];return(0,S.each)(et,function(Ot,Qt){X[Qt]&&dt.push(Qt)}),dt},wt.prototype.clearItemsState=function(X){var et=this,dt=this.getItemsByState(X);(0,S.each)(dt,function(Ot){et.setItemState(Ot,X,!1)})},wt.prototype.getItemsByState=function(X){var et=this,dt=this.getItems();return(0,S.filter)(dt,function(Ot){return et.hasState(Ot,X)})},wt.prototype.drawLegendContent=function(X){this.processItems(),this.drawItems(X)},wt.prototype.processItems=function(){var X=this.get("items");(0,S.each)(X,function(et){et.id||(et.id=et.name)})},wt.prototype.drawItems=function(X){var et=this,dt=this.addGroup(X,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),Ot=this.addGroup(dt,{id:this.getElementId("item-group"),name:"legend-item-group"}),Qt=this.getItemHeight(),se=this.get("itemWidth"),Me=this.get("itemSpacing"),Te=this.get("currentPoint"),Ne=Te.x,Je=Te.y,sr=this.get("layout"),gr=this.get("items"),Ir=!1,tn=0,Qr=this.get("maxWidth"),En=this.get("maxHeight");(0,S.each)(gr,function(Bn,Nn){var Zt=et.drawItem(Bn,Nn,Qt,Ot),we=Zt.getBBox(),_e=se||we.width;_e>tn&&(tn=_e),sr==="horizontal"?(Qr&&Qr<Te.x+_e-Ne&&(Ir=!0,Te.x=Ne,Te.y+=Qt),et.moveElementTo(Zt,Te),Te.x+=_e+Me):(En&&En<Te.y+Qt-Je&&(Ir=!0,Te.x+=tn+Me,Te.y=Je,tn=0),et.moveElementTo(Zt,Te),Te.y+=Qt)}),Ir&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=Ne,this.startY=Je,this.adjustNavigation(X,Ot))},wt.prototype.getItemHeight=function(){var X=this.get("itemHeight");if(!X){var et=this.get("itemName");et&&(X=et.style.fontSize+8)}return X},wt.prototype.drawMarker=function(X,et,dt,Ot){var Qt=(0,M.__assign)((0,M.__assign)((0,M.__assign)({x:0,y:Ot/2},et.style),{symbol:(0,S.get)(dt.marker,"symbol","circle")}),(0,S.get)(dt.marker,"style",{})),se=this.addShape(X,{type:"marker",id:this.getElementId("item-"+dt.id+"-marker"),name:"legend-item-marker",attrs:Qt}),Me=se.getBBox();se.attr("x",Me.width/2);var Te=se.attr(),Ne=Te.stroke,Je=Te.fill;return Ne&&se.set("isStroke",!0),Je&&se.set("isFill",!0),se},wt.prototype.drawItemText=function(X,et,dt,Ot,Qt,se,Me){var Te=dt.formatter,Ne=(0,M.__assign)({x:se,y:Qt/2,text:Te?Te(Ot[et],Ot,Me):Ot[et]},dt.style);return this.addShape(X,{type:"text",id:this.getElementId("item-"+Ot.id+"-"+et),name:"legend-item-"+et,attrs:Ne})},wt.prototype.drawItem=function(X,et,dt,Ot){var Qt="item-"+X.id,se=this.addGroup(Ot,{name:"legend-item-container",id:this.getElementId("item-container-"+Qt),delegateObject:{item:X,index:et}}),Me=this.addGroup(se,{name:"legend-item",id:this.getElementId(Qt),delegateObject:{item:X,index:et}}),Te=this.get("marker"),Ne=this.get("itemName"),Je=this.get("itemValue"),sr=this.get("itemBackground"),gr=this.getLimitItemWidth(),Ir=0;if(Te){var tn=this.drawMarker(Me,Te,X,dt);Ir=tn.getBBox().maxX+Te.spacing}if(Ne){var Qr=this.drawItemText(Me,"name",Ne,X,dt,Ir,et);gr&&Sr(!0,Qr,(0,S.clamp)(gr-Ir,0,gr)),Ir=Qr.getBBox().maxX+Ne.spacing}if(Je){var En=this.drawItemText(Me,"value",Je,X,dt,Ir,et);gr&&(Je.alignRight?(En.attr({textAlign:"right",x:gr}),Sr(!0,En,(0,S.clamp)(gr-Ir,0,gr),"head")):Sr(!0,En,(0,S.clamp)(gr-Ir,0,gr)))}if(sr){var Bn=Me.getBBox(),Nn=this.addShape(Me,{type:"rect",name:"legend-item-background",id:this.getElementId(Qt+"-background"),attrs:(0,M.__assign)({x:0,y:0,width:Bn.width,height:dt},sr.style)});Nn.toBack()}return this.applyItemStates(X,Me),Me},wt.prototype.adjustNavigation=function(X,et){var dt=this,Ot=this.startX,Qt=this.startY,se=this.get("layout"),Me=et.findAll(function(_e){return _e.get("name")==="legend-item"}),Te=this.get("maxWidth"),Ne=this.get("maxHeight"),Je=this.get("itemWidth"),sr=this.get("itemSpacing"),gr=this.getItemHeight(),Ir=this.drawNavigation(X,se,"00/00",12),tn=Ir.getBBox(),Qr={x:Ot,y:Qt},En=1,Bn=0,Nn=0,Zt=0;if(se==="horizontal")this.pageHeight=gr,(0,S.each)(Me,function(_e){var Ve=_e.getBBox(),lr=Je||Ve.width;(Bn&&Bn<Qr.x+lr+sr||Te<Qr.x+lr+sr+tn.width)&&(En===1&&(Bn=Qr.x+sr,dt.pageWidth=Bn,dt.moveElementTo(Ir,{x:Te-sr-tn.width-tn.minX,y:Qr.y+gr/2-tn.height/2-tn.minY})),En+=1,Qr.x=Ot,Qr.y+=gr),dt.moveElementTo(_e,Qr),_e.getParent().setClip({type:"rect",attrs:{x:Qr.x,y:Qr.y,width:lr+sr,height:gr}}),Qr.x+=lr+sr});else{(0,S.each)(Me,function(_e){var Ve=_e.getBBox();Ve.width>Nn&&(Nn=Ve.width)}),Zt=Nn,Nn+=sr,Te&&(Nn=Math.min(Te,Nn),Zt=Math.min(Te,Zt)),this.pageWidth=Nn,this.pageHeight=Ne-Math.max(tn.height,gr);var we=Math.floor(this.pageHeight/gr);(0,S.each)(Me,function(_e,Ve){Ve!==0&&Ve%we==0&&(En+=1,Qr.x+=Nn,Qr.y=Qt),dt.moveElementTo(_e,Qr),_e.getParent().setClip({type:"rect",attrs:{x:Qr.x,y:Qr.y,width:Nn,height:gr}}),Qr.y+=gr}),this.totalPagesCnt=En,this.moveElementTo(Ir,{x:Ot+Zt/2-tn.width/2-tn.minX,y:Ne-tn.height-tn.minY})}this.pageHeight&&this.pageWidth&&et.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=En,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(Ir),et.attr("matrix",this.getCurrentNavigationMatrix())},wt.prototype.drawNavigation=function(X,et,dt,Ot){var Qt={x:0,y:0},se=this.addGroup(X,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),Me=this.drawArrow(se,Qt,"navigation-arrow-left",et==="horizontal"?"up":"left",Ot);Me.on("click",this.onNavigationBack);var Te=Me.getBBox();Qt.x+=Te.width+2;var Ne=this.addShape(se,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:Qt.x,y:Qt.y+Ot/2,text:dt,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),Je=Ne.getBBox();Qt.x+=Je.width+2;var sr=this.drawArrow(se,Qt,"navigation-arrow-right",et==="horizontal"?"down":"right",Ot);return sr.on("click",this.onNavigationAfter),se},wt.prototype.updateNavigation=function(X){var et=this.currentPageIndex+"/"+this.totalPagesCnt,dt=X?X.getChildren()[1]:this.getElementByLocalId("navigation-text"),Ot=X?X.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),Qt=X?X.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),se=dt.getBBox();dt.attr("text",et);var Me=dt.getBBox();dt.attr("x",dt.attr("x")-(Me.width-se.width)/2),Ot.attr("opacity",this.currentPageIndex===1?.45:1),Ot.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),Qt.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),Qt.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},wt.prototype.drawArrow=function(X,et,dt,Ot,Qt){var se=et.x,Me=et.y,Te={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Ne=this.addShape(X,{type:"path",id:this.getElementId(dt),name:dt,attrs:{path:[["M",se+Qt/2,Me],["L",se,Me+Qt],["L",se+Qt,Me+Qt],["Z"]],fill:"#000",cursor:"pointer"}});return Ne.attr("matrix",$({x:se+Qt/2,y:Me+Qt/2},Te[Ot])),Ne},wt.prototype.getCurrentNavigationMatrix=function(){var X=this,et=X.currentPageIndex,dt=X.pageWidth,Ot=X.pageHeight,Qt=this.get("layout"),se=Qt==="horizontal"?{x:0,y:Ot*(1-et)}:{x:dt*(1-et),y:0};return H(se)},wt.prototype.applyItemStates=function(X,et){var dt=this.getItemStates(X),Ot=dt.length>0;if(Ot){var Qt=et.getChildren(),se=this.get("itemStates");(0,S.each)(Qt,function(Me){var Te=Me.get("name"),Ne=Te.split("-")[2],Je=We(X,Ne,se);Je&&(Me.attr(Je),Ne==="marker"&&!(Me.get("isStroke")&&Me.get("isFill"))&&(Me.get("isStroke")&&Me.attr("fill",null),Me.get("isFill")&&Me.attr("stroke",null)))})}},wt.prototype.getLimitItemWidth=function(){var X=this.get("itemWidth"),et=this.get("maxItemWidth");return et?X&&(et=X<=et?X:et):X&&(et=X),et},wt}(qe),Pr=xr,Wr=1.4,Lr=.4,br=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:vr.textColor,textBaseline:"middle",fontFamily:vr.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:vr.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},wt.prototype.isSlider=function(){return!0},wt.prototype.getValue=function(){return this.getCurrentValue()},wt.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},wt.prototype.setRange=function(X,et){this.update({min:X,max:et})},wt.prototype.setValue=function(X){var et=this.getValue();this.set("value",X);var dt=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(dt),this.delegateEmit("valuechanged",{originValue:et,value:X})},wt.prototype.initEvent=function(){var X=this.get("group");this.bindSliderEvent(X),this.bindRailEvent(X),this.bindTrackEvent(X)},wt.prototype.drawLegendContent=function(X){this.drawRail(X),this.drawLabels(X),this.fixedElements(X),this.resetTrack(X),this.resetTrackClip(X),this.get("slidable")&&this.resetHandlers(X)},wt.prototype.bindSliderEvent=function(X){this.bindHandlersEvent(X)},wt.prototype.bindHandlersEvent=function(X){var et=this;X.on("legend-handler-min:drag",function(dt){var Ot=et.getValueByCanvasPoint(dt.x,dt.y),Qt=et.getCurrentValue(),se=Qt[1];se<Ot&&(se=Ot),et.setValue([Ot,se])}),X.on("legend-handler-max:drag",function(dt){var Ot=et.getValueByCanvasPoint(dt.x,dt.y),Qt=et.getCurrentValue(),se=Qt[0];se>Ot&&(se=Ot),et.setValue([se,Ot])})},wt.prototype.bindRailEvent=function(X){},wt.prototype.bindTrackEvent=function(X){var et=this,dt=null;X.on("legend-track:dragstart",function(Ot){dt={x:Ot.x,y:Ot.y}}),X.on("legend-track:drag",function(Ot){if(!!dt){var Qt=et.getValueByCanvasPoint(dt.x,dt.y),se=et.getValueByCanvasPoint(Ot.x,Ot.y),Me=et.getCurrentValue(),Te=Me[1]-Me[0],Ne=et.getRange(),Je=se-Qt;Je<0?Me[0]+Je>Ne.min?et.setValue([Me[0]+Je,Me[1]+Je]):et.setValue([Ne.min,Ne.min+Te]):Je>0&&(Je>0&&Me[1]+Je<Ne.max?et.setValue([Me[0]+Je,Me[1]+Je]):et.setValue([Ne.max-Te,Ne.max])),dt={x:Ot.x,y:Ot.y}}}),X.on("legend-track:dragend",function(Ot){dt=null})},wt.prototype.drawLabels=function(X){this.drawLabel("min",X),this.drawLabel("max",X)},wt.prototype.drawLabel=function(X,et){var dt=this.get("label"),Ot=dt.style,Qt=dt.align,se=this.get(X),Me=this.getLabelAlignAttrs(X,Qt),Te="label-"+X;this.addShape(et,{type:"text",id:this.getElementId(Te),name:"legend-label-"+X,attrs:(0,M.__assign)((0,M.__assign)({x:0,y:0,text:se},Ot),Me)})},wt.prototype.getLabelAlignAttrs=function(X,et){var dt=this.isVertical(),Ot="center",Qt="middle";return dt?(Ot="start",et!=="rail"?X==="min"?Qt="top":Qt="bottom":Qt="top"):et!=="rail"?(Qt="top",X==="min"?Ot="start":Ot="end"):(Ot="start",Qt="middle"),{textAlign:Ot,textBaseline:Qt}},wt.prototype.getRailPath=function(X,et,dt,Ot){var Qt=this.get("rail"),se=Qt.size,Me=Qt.defaultLength,Te=Qt.type,Ne=this.isVertical(),Je=Me,sr=dt,gr=Ot;sr||(sr=Ne?se:Je),gr||(gr=Ne?Je:se);var Ir=[];return Te==="color"?(Ir.push(["M",X,et]),Ir.push(["L",X+sr,et]),Ir.push(["L",X+sr,et+gr]),Ir.push(["L",X,et+gr]),Ir.push(["Z"])):(Ir.push(["M",X+sr,et]),Ir.push(["L",X+sr,et+gr]),Ir.push(["L",X,et+gr]),Ir.push(["Z"])),Ir},wt.prototype.drawRail=function(X){var et=this.get("rail"),dt=et.style;this.addShape(X,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,M.__assign)({path:this.getRailPath(0,0)},dt)})},wt.prototype.getTrackColor=function(X){var et=X.length;if(!et)return null;if(et===1)return X[0];var dt;this.isVertical()?dt="l(90)":dt="l(0)";for(var Ot=0;Ot<et;Ot++){var Qt=Ot/(et-1);dt+=" "+Qt+":"+X[Ot]}return dt},wt.prototype.getTrackPath=function(X){var et=this.getRailShape(X),dt=et.attr("path");return(0,S.clone)(dt)},wt.prototype.getClipTrackAttrs=function(X){var et=this.getCurrentValue(),dt=et[0],Ot=et[1],Qt=this.getRailBBox(X),se=this.getPointByValue(dt,X),Me=this.getPointByValue(Ot,X),Te=this.isVertical(),Ne,Je,sr,gr;return Te?(Ne=Qt.minX,Je=se.y,sr=Qt.width,gr=Me.y-se.y):(Ne=se.x,Je=Qt.minY,sr=Me.x-se.x,gr=Qt.height),{x:Ne,y:Je,width:sr,height:gr}},wt.prototype.getTrackAttrs=function(X){var et=this.get("track"),dt=this.get("colors"),Ot=this.getTrackPath(X);return(0,S.mix)({path:Ot,fill:this.getTrackColor(dt)},et.style)},wt.prototype.resetTrackClip=function(X){var et=X||this.get("group"),dt=this.getElementId("track"),Ot=et.findById(dt),Qt=Ot.getClip(),se=this.getClipTrackAttrs(X);Qt?Qt.attr(se):Ot.setClip({type:"rect",attrs:se})},wt.prototype.resetTrack=function(X){var et=this.getElementId("track"),dt=X.findById(et),Ot=this.getTrackAttrs(X);dt?dt.attr(Ot):this.addShape(X,{type:"path",id:et,draggable:this.get("slidable"),name:"legend-track",attrs:Ot})},wt.prototype.getPointByValue=function(X,et){var dt=this.getRange(),Ot=dt.min,Qt=dt.max,se=(X-Ot)/(Qt-Ot),Me=this.getRailBBox(et),Te=this.isVertical(),Ne={x:0,y:0};return Te?(Ne.x=Me.minX+Me.width/2,Ne.y=y(Me.minY,Me.maxY,se)):(Ne.x=y(Me.minX,Me.maxX,se),Ne.y=Me.minY+Me.height/2),Ne},wt.prototype.getRailShape=function(X){var et=X||this.get("group");return et.findById(this.getElementId("rail"))},wt.prototype.getRailBBox=function(X){var et=this.getRailShape(X),dt=et.getBBox();return dt},wt.prototype.getRailCanvasBBox=function(){var X=this.get("group"),et=X.findById(this.getElementId("rail")),dt=et.getCanvasBBox();return dt},wt.prototype.isVertical=function(){return this.get("layout")==="vertical"},wt.prototype.getValueByCanvasPoint=function(X,et){var dt=this.getRange(),Ot=dt.min,Qt=dt.max,se=this.getRailCanvasBBox(),Me=this.isVertical(),Te=this.get("step"),Ne;Me?Ne=(et-se.minY)/se.height:Ne=(X-se.minX)/se.width;var Je=y(Ot,Qt,Ne);if(Te){var sr=Math.round((Je-Ot)/Te);Je=Ot+sr*Te}return Je>Qt&&(Je=Qt),Je<Ot&&(Je=Ot),Je},wt.prototype.getCurrentValue=function(){var X=this.get("value");return X||(X=[this.get("min"),this.get("max")]),X},wt.prototype.resetHandlers=function(X){var et=this.getCurrentValue(),dt=et[0],Ot=et[1];this.resetHandler(X,"min",dt),this.resetHandler(X,"max",Ot)},wt.prototype.getHandlerPath=function(X,et){var dt=this.isVertical(),Ot=[],Qt=X.size,se=et.x,Me=et.y,Te=Qt*Wr,Ne=Qt/2,Je=Qt/6;if(dt){var sr=se+Te*Lr;Ot.push(["M",se,Me]),Ot.push(["L",sr,Me+Ne]),Ot.push(["L",se+Te,Me+Ne]),Ot.push(["L",se+Te,Me-Ne]),Ot.push(["L",sr,Me-Ne]),Ot.push(["Z"]),Ot.push(["M",sr,Me+Je]),Ot.push(["L",se+Te-2,Me+Je]),Ot.push(["M",sr,Me-Je]),Ot.push(["L",se+Te-2,Me-Je])}else{var gr=Me+Te*Lr;Ot.push(["M",se,Me]),Ot.push(["L",se-Ne,gr]),Ot.push(["L",se-Ne,Me+Te]),Ot.push(["L",se+Ne,Me+Te]),Ot.push(["L",se+Ne,gr]),Ot.push(["Z"]),Ot.push(["M",se-Je,gr]),Ot.push(["L",se-Je,Me+Te-2]),Ot.push(["M",se+Je,gr]),Ot.push(["L",se+Je,Me+Te-2])}return Ot},wt.prototype.resetHandler=function(X,et,dt){var Ot=this.getPointByValue(dt,X),Qt=this.get("handler"),se=this.getHandlerPath(Qt,Ot),Me=this.getElementId("handler-"+et),Te=X.findById(Me),Ne=this.isVertical();Te?Te.attr("path",se):this.addShape(X,{type:"path",name:"legend-handler-"+et,draggable:!0,id:Me,attrs:(0,M.__assign)((0,M.__assign)({path:se},Qt.style),{cursor:Ne?"ns-resize":"ew-resize"})})},wt.prototype.fixedElements=function(X){var et=X.findById(this.getElementId("rail")),dt=X.findById(this.getElementId("label-min")),Ot=X.findById(this.getElementId("label-max")),Qt=this.getDrawPoint();this.isVertical()?this.fixedVertail(dt,Ot,et,Qt):this.fixedHorizontal(dt,Ot,et,Qt)},wt.prototype.fitRailLength=function(X,et,dt,Ot){var Qt=this.isVertical(),se=Qt?"height":"width",Me=this.get("label"),Te=Me.align,Ne=Me.spacing,Je=this.get("max"+(0,S.upperFirst)(se));if(Je){var sr=Te==="rail"?dt[se]+X[se]+et[se]+Ne*2:dt[se],gr=sr-Je;gr>0&&this.changeRailLength(Ot,se,dt[se]-gr)}},wt.prototype.changeRailLength=function(X,et,dt){var Ot=X.getBBox(),Qt;et==="height"?Qt=this.getRailPath(Ot.x,Ot.y,Ot.width,dt):Qt=this.getRailPath(Ot.x,Ot.y,dt,Ot.height),X.attr("path",Qt)},wt.prototype.changeRailPosition=function(X,et,dt){var Ot=X.getBBox(),Qt=this.getRailPath(et,dt,Ot.width,Ot.height);X.attr("path",Qt)},wt.prototype.fixedHorizontal=function(X,et,dt,Ot){var Qt=this.get("label"),se=Qt.align,Me=Qt.spacing,Te=dt.getBBox(),Ne=X.getBBox(),Je=et.getBBox(),sr=Te.height;this.fitRailLength(Ne,Je,Te,dt),Te=dt.getBBox(),se==="rail"?(X.attr({x:Ot.x,y:Ot.y+sr/2}),this.changeRailPosition(dt,Ot.x+Ne.width+Me,Ot.y),et.attr({x:Ot.x+Ne.width+Te.width+Me*2,y:Ot.y+sr/2})):se==="top"?(X.attr({x:Ot.x,y:Ot.y}),et.attr({x:Ot.x+Te.width,y:Ot.y}),this.changeRailPosition(dt,Ot.x,Ot.y+Ne.height+Me)):(this.changeRailPosition(dt,Ot.x,Ot.y),X.attr({x:Ot.x,y:Ot.y+Te.height+Me}),et.attr({x:Ot.x+Te.width,y:Ot.y+Te.height+Me}))},wt.prototype.fixedVertail=function(X,et,dt,Ot){var Qt=this.get("label"),se=Qt.align,Me=Qt.spacing,Te=dt.getBBox(),Ne=X.getBBox(),Je=et.getBBox();if(this.fitRailLength(Ne,Je,Te,dt),Te=dt.getBBox(),se==="rail")X.attr({x:Ot.x,y:Ot.y}),this.changeRailPosition(dt,Ot.x,Ot.y+Ne.height+Me),et.attr({x:Ot.x,y:Ot.y+Ne.height+Te.height+Me*2});else if(se==="right")X.attr({x:Ot.x+Te.width+Me,y:Ot.y}),this.changeRailPosition(dt,Ot.x,Ot.y),et.attr({x:Ot.x+Te.width+Me,y:Ot.y+Te.height});else{var sr=Math.max(Ne.width,Je.width);X.attr({x:Ot.x,y:Ot.y}),this.changeRailPosition(dt,Ot.x+sr+Me,Ot.y),et.attr({x:Ot.x,y:Ot.y+Te.height})}},wt}(qe),Dr=br,Sn=v(87892),Dn="g2-tooltip",Yn="g2-tooltip-title",Ln="g2-tooltip-list",_n="g2-tooltip-list-item",Jn="g2-tooltip-marker",Ii="g2-tooltip-value",Qn="g2-tooltip-name",qi="g2-tooltip-crosshair-x",dn="g2-tooltip-crosshair-y",Si,Zn=(Si={},Si[""+Dn]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:vr.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},Si[""+Yn]={marginBottom:"4px"},Si[""+Ln]={margin:"0px",listStyleType:"none",padding:"0px"},Si[""+_n]={listStyleType:"none",marginBottom:"4px"},Si[""+Jn]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},Si[""+Ii]={display:"inline-block",float:"right",marginLeft:"30px"},Si[""+qi]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Si[""+dn]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},Si);function ya(ue,wt,X,et,dt){var Ot={left:ue<dt.x,right:ue+X>dt.x+dt.width,top:wt<dt.y,bottom:wt+et>dt.y+dt.height};return Ot}function La(ue,wt,X,et,dt,Ot){var Qt=ue,se=wt;switch(Ot){case"left":Qt=ue-et-X,se=wt-dt/2;break;case"right":Qt=ue+X,se=wt-dt/2;break;case"top":Qt=ue-et/2,se=wt-dt-X;break;case"bottom":Qt=ue-et/2,se=wt+X;break;default:Qt=ue+X,se=wt-dt-X;break}return{x:Qt,y:se}}function Va(ue,wt,X,et,dt,Ot,Qt){var se=La(ue,wt,X,et,dt,Ot);if(Qt){var Me=ya(se.x,se.y,et,dt,Qt);Ot==="auto"?(Me.right&&(se.x=Math.max(0,ue-et-X)),Me.top&&(se.y=Math.max(0,wt-dt-X))):Ot==="top"||Ot==="bottom"?(Me.left&&(se.x=Qt.x),Me.right&&(se.x=Qt.x+Qt.width-et),Ot==="top"&&Me.top&&(se.y=wt+X),Ot==="bottom"&&Me.bottom&&(se.y=wt-dt-X)):(Me.top&&(se.y=Qt.y),Me.bottom&&(se.y=Qt.y+Qt.height-dt),Ot==="left"&&Me.left&&(se.x=ue+X),Ot==="right"&&Me.right&&(se.x=ue-et-X))}return se}function ji(ue,wt){var X=!1;return(0,S.each)(wt,function(et){if((0,S.hasKey)(ue,et))return X=!0,!1}),X}var ma=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+Dn+'"><div class="'+Yn+'"></div><ul class="'+Ln+'"></ul></div>',itemTpl:'<li class="'+_n+`" data-index={index}>
          <span class="`+Jn+`" style="background:{color}"></span>
          <span class="`+Qn+`">{name}</span>:
          <span class="`+Ii+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+qi+'"></div>',yCrosshairTpl:'<div class="'+dn+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:Dn,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:Zn})},wt.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},wt.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},wt.prototype.show=function(){var X=this.getContainer();!X||this.destroyed||(this.set("visible",!0),(0,Hn.Z)(X,{visibility:"visible"}),this.setCrossHairsVisible(!0))},wt.prototype.hide=function(){var X=this.getContainer();!X||this.destroyed||(this.set("visible",!1),(0,Hn.Z)(X,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},wt.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},wt.prototype.setLocation=function(X){this.set("x",X.x),this.set("y",X.y),this.resetPosition()},wt.prototype.setCrossHairsVisible=function(X){var et=X?"":"none",dt=this.get("xCrosshairDom"),Ot=this.get("yCrosshairDom");dt&&(0,Hn.Z)(dt,{display:et}),Ot&&(0,Hn.Z)(Ot,{display:et})},wt.prototype.initContainer=function(){if(ue.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var X=this.getHtmlContentNode();this.get("parent").appendChild(X),this.set("container",X),this.resetStyles(),this.applyStyles()}},wt.prototype.updateInner=function(X){this.get("customContent")?this.renderCustomContent():(ji(X,["title","showTitle"])&&this.resetTitle(),(0,S.hasKey)(X,"items")&&this.renderItems()),ue.prototype.updateInner.call(this,X)},wt.prototype.initDom=function(){this.cacheDoms()},wt.prototype.removeDom=function(){ue.prototype.removeDom.call(this),this.clearCrosshairs()},wt.prototype.resetPosition=function(){var X=this.get("x"),et=this.get("y"),dt=this.get("offset"),Ot=this.getOffset(),Qt=Ot.offsetX,se=Ot.offsetY,Me=this.get("position"),Te=this.get("region"),Ne=this.getContainer(),Je=this.getBBox(),sr=Je.width,gr=Je.height,Ir;Te&&(Ir=Xt(Te));var tn=Va(X,et,dt,sr,gr,Me,Ir);(0,Hn.Z)(Ne,{left:Tt(tn.x+Qt),top:Tt(tn.y+se)}),this.resetCrosshairs()},wt.prototype.renderCustomContent=function(){var X=this.getHtmlContentNode(),et=this.get("parent"),dt=this.get("container");dt&&dt.parentNode===et?et.replaceChild(X,dt):et.appendChild(X),this.set("container",X),this.resetStyles(),this.applyStyles()},wt.prototype.getHtmlContentNode=function(){var X,et=this.get("customContent");if(et){var dt=et(this.get("title"),this.get("items"));(0,S.isElement)(dt)?X=dt:X=(0,Ti.Z)(dt)}return X},wt.prototype.cacheDoms=function(){var X=this.getContainer(),et=X.getElementsByClassName(Yn)[0],dt=X.getElementsByClassName(Ln)[0];this.set("titleDom",et),this.set("listDom",dt)},wt.prototype.resetTitle=function(){var X=this.get("title"),et=this.get("showTitle");et&&X?this.setTitle(X):this.setTitle("")},wt.prototype.setTitle=function(X){var et=this.get("titleDom");et&&(et.innerText=X)},wt.prototype.resetCrosshairs=function(){var X=this.get("crosshairsRegion"),et=this.get("crosshairs");if(!X||!et)this.clearCrosshairs();else{var dt=Xt(X),Ot=this.get("xCrosshairDom"),Qt=this.get("yCrosshairDom");et==="x"?(this.resetCrosshair("x",dt),Qt&&(Qt.remove(),this.set("yCrosshairDom",null))):et==="y"?(this.resetCrosshair("y",dt),Ot&&(Ot.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",dt),this.resetCrosshair("y",dt)),this.setCrossHairsVisible(this.get("visible"))}},wt.prototype.resetCrosshair=function(X,et){var dt=this.checkCrosshair(X),Ot=this.get(X);X==="x"?(0,Hn.Z)(dt,{left:Tt(Ot),top:Tt(et.y),height:Tt(et.height)}):(0,Hn.Z)(dt,{top:Tt(Ot),left:Tt(et.x),width:Tt(et.width)})},wt.prototype.checkCrosshair=function(X){var et=X+"CrosshairDom",dt=X+"CrosshairTpl",Ot="CROSSHAIR_"+X.toUpperCase(),Qt=C[Ot],se=this.get(et),Me=this.get("parent");return se||(se=(0,Ti.Z)(this.get(dt)),this.applyStyle(Qt,se),Me.appendChild(se),this.set(et,se)),se},wt.prototype.renderItems=function(){this.clearItemDoms();var X=this.get("items"),et=this.get("itemTpl"),dt=this.get("listDom");dt&&((0,S.each)(X,function(Ot){var Qt=Sn.default.toCSSGradient(Ot.color),se=(0,M.__assign)((0,M.__assign)({},Ot),{color:Qt}),Me=(0,S.substitute)(et,se),Te=(0,Ti.Z)(Me);dt.appendChild(Te)}),this.applyChildrenStyles(dt,this.get("domStyles")))},wt.prototype.clearItemDoms=function(){this.get("listDom")&&gt(this.get("listDom"))},wt.prototype.clearCrosshairs=function(){var X=this.get("xCrosshairDom"),et=this.get("yCrosshairDom");X&&X.remove(),et&&et.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},wt}(Ri),va=ma,_a={opacity:0},ta={stroke:"#C5C5C5",strokeOpacity:.85},sa={fill:"#CACED4",opacity:.85},ea=v(62029),xa=v(15856);function Ca(ue){return(0,S.map)(ue,function(wt,X){var et=X===0?"M":"L",dt=wt[0],Ot=wt[1];return[et,dt,Ot]})}function ba(ue){return Ca(ue)}function fo(ue){if(ue.length<=2)return ba(ue);var wt=[];(0,S.each)(ue,function(Qt){(0,S.isEqual)(Qt,wt.slice(wt.length-2))||wt.push(Qt[0],Qt[1])});var X=(0,ea.catmullRom2Bezier)(wt,!1),et=(0,S.head)(ue),dt=et[0],Ot=et[1];return X.unshift(["M",dt,Ot]),X}function Xo(ue,wt,X,et){et===void 0&&(et=!0);var dt=new xa.Linear({values:ue}),Ot=new xa.Category({values:(0,S.map)(ue,function(se,Me){return Me})}),Qt=(0,S.map)(ue,function(se,Me){return[Ot.scale(Me)*wt,X-dt.scale(se)*X]});return et?fo(Qt):ba(Qt)}function co(ue,wt,X){var et=(0,M.__spreadArrays)(ue);return et.push(["L",wt,0]),et.push(["L",0,X]),et.push(["Z"]),et}var vo=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:_a,lineStyle:ta,areaStyle:sa})},wt.prototype.renderInner=function(X){var et=this.cfg,dt=et.width,Ot=et.height,Qt=et.data,se=et.smooth,Me=et.isArea,Te=et.backgroundStyle,Ne=et.lineStyle,Je=et.areaStyle;this.addShape(X,{id:this.getElementId("background"),type:"rect",attrs:(0,M.__assign)({x:0,y:0,width:dt,height:Ot},Te)});var sr=Xo(Qt,dt,Ot,se);if(this.addShape(X,{id:this.getElementId("line"),type:"path",attrs:(0,M.__assign)({path:sr},Ne)}),Me){var gr=co(sr,dt,Ot);this.addShape(X,{id:this.getElementId("area"),type:"path",attrs:(0,M.__assign)({path:gr},Je)})}},wt.prototype.applyOffset=function(){var X=this.cfg,et=X.x,dt=X.y;this.moveElementTo(this.get("group"),{x:et,y:dt})},wt}(ut),Wa=null,wa={fill:"#416180",opacity:.05},cs={fill:"#5B8FF9",opacity:.15,cursor:"move"},po=10,Ho={width:po,height:24},Vo={textBaseline:"middle",fill:"#000",opacity:.45},Wo="sliderchange",To={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},go=function(ue){(0,M.__extends)(wt,ue);function wt(){return ue!==null&&ue.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"handler",x:0,y:0,width:10,height:24,style:To})},wt.prototype.renderInner=function(X){var et=this.cfg,dt=et.width,Ot=et.height,Qt=et.style,se=Qt.fill,Me=Qt.stroke,Te=Qt.radius,Ne=Qt.opacity,Je=Qt.cursor;this.addShape(X,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:dt,height:Ot,fill:se,stroke:Me,radius:Te,opacity:Ne,cursor:Je}});var sr=1/3*dt,gr=2/3*dt,Ir=1/4*Ot,tn=3/4*Ot;this.addShape(X,{id:this.getElementId("line-left"),type:"line",attrs:{x1:sr,y1:Ir,x2:sr,y2:tn,stroke:Me,cursor:Je}}),this.addShape(X,{id:this.getElementId("line-right"),type:"line",attrs:{x1:gr,y1:Ir,x2:gr,y2:tn,stroke:Me,cursor:Je}})},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.bindEvents=function(){var X=this;this.get("group").on("mouseenter",function(){var et=X.get("style").highLightFill;X.getElementByLocalId("background").attr("fill",et),X.draw()}),this.get("group").on("mouseleave",function(){var et=X.get("style").fill;X.getElementByLocalId("background").attr("fill",et),X.draw()})},wt.prototype.draw=function(){var X=this.get("container").get("canvas");X&&X.draw()},wt}(ut),jo=null,da=function(ue){(0,M.__extends)(wt,ue);function wt(){var X=ue!==null&&ue.apply(this,arguments)||this;return X.onMouseDown=function(et){return function(dt){X.currentTarget=et;var Ot=dt.originalEvent;Ot.stopPropagation(),Ot.preventDefault(),X.prevX=(0,S.get)(Ot,"touches.0.pageX",Ot.pageX),X.prevY=(0,S.get)(Ot,"touches.0.pageY",Ot.pageY);var Qt=X.getContainerDOM();Qt.addEventListener("mousemove",X.onMouseMove),Qt.addEventListener("mouseup",X.onMouseUp),Qt.addEventListener("mouseleave",X.onMouseUp),Qt.addEventListener("touchmove",X.onMouseMove),Qt.addEventListener("touchend",X.onMouseUp),Qt.addEventListener("touchcancel",X.onMouseUp)}},X.onMouseMove=function(et){var dt=X.cfg.width,Ot=[X.get("start"),X.get("end")];et.stopPropagation(),et.preventDefault();var Qt=(0,S.get)(et,"touches.0.pageX",et.pageX),se=(0,S.get)(et,"touches.0.pageY",et.pageY),Me=Qt-X.prevX,Te=X.adjustOffsetRange(Me/dt);X.updateStartEnd(Te),X.updateUI(X.getElementByLocalId("foreground"),X.getElementByLocalId("minText"),X.getElementByLocalId("maxText")),X.prevX=Qt,X.prevY=se,X.draw(),X.emit(Wo,[X.get("start"),X.get("end")].sort()),X.delegateEmit("valuechanged",{originValue:Ot,value:[X.get("start"),X.get("end")]})},X.onMouseUp=function(){X.currentTarget&&(X.currentTarget=void 0);var et=X.getContainerDOM();et&&(et.removeEventListener("mousemove",X.onMouseMove),et.removeEventListener("mouseup",X.onMouseUp),et.removeEventListener("mouseleave",X.onMouseUp),et.removeEventListener("touchmove",X.onMouseMove),et.removeEventListener("touchend",X.onMouseUp),et.removeEventListener("touchcancel",X.onMouseUp))},X}return wt.prototype.setRange=function(X,et){this.set("minLimit",X),this.set("maxLimit",et);var dt=this.get("start"),Ot=this.get("end"),Qt=(0,S.clamp)(dt,X,et),se=(0,S.clamp)(Ot,X,et);!this.get("isInit")&&(dt!==Qt||Ot!==se)&&this.setValue([Qt,se])},wt.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},wt.prototype.setValue=function(X){var et=this.getRange();if((0,S.isArray)(X)&&X.length===2){var dt=[this.get("start"),this.get("end")];this.update({start:(0,S.clamp)(X[0],et.min,et.max),end:(0,S.clamp)(X[1],et.min,et.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:dt,value:X})}},wt.prototype.getValue=function(){return[this.get("start"),this.get("end")]},wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:wa,foregroundStyle:cs,handlerStyle:Ho,textStyle:Vo}})},wt.prototype.update=function(X){var et=X.start,dt=X.end,Ot=(0,M.__assign)({},X);(0,S.isNil)(et)||(Ot.start=(0,S.clamp)(et,0,1)),(0,S.isNil)(dt)||(Ot.end=(0,S.clamp)(dt,0,1)),ue.prototype.update.call(this,Ot),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},wt.prototype.init=function(){this.set("start",(0,S.clamp)(this.get("start"),0,1)),this.set("end",(0,S.clamp)(this.get("end"),0,1)),ue.prototype.init.call(this)},wt.prototype.renderInner=function(X){var et=this.cfg,dt=et.start,Ot=et.end,Qt=et.width,se=et.height,Me=et.trendCfg,Te=Me===void 0?{}:Me,Ne=et.minText,Je=et.maxText,sr=et.backgroundStyle,gr=sr===void 0?{}:sr,Ir=et.foregroundStyle,tn=Ir===void 0?{}:Ir,Qr=et.textStyle,En=Qr===void 0?{}:Qr,Bn=et.handlerStyle,Nn=Bn===void 0?{}:Bn,Zt=dt*Qt,we=Ot*Qt;(0,S.size)((0,S.get)(Te,"data"))&&this.addComponent(X,(0,M.__assign)({component:vo,id:this.getElementId("trend"),x:0,y:0,width:Qt,height:se},Te)),this.addShape(X,{id:this.getElementId("background"),type:"rect",attrs:(0,M.__assign)({x:0,y:0,width:Qt,height:se},gr)});var _e=this.addShape(X,{id:this.getElementId("minText"),type:"text",attrs:(0,M.__assign)({y:se/2,textAlign:"right",text:Ne,silent:!1},En)}),Ve=this.addShape(X,{id:this.getElementId("maxText"),type:"text",attrs:(0,M.__assign)({y:se/2,textAlign:"left",text:Je,silent:!1},En)}),lr=this.addShape(X,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,M.__assign)({y:0,height:se},tn)}),Or=(0,S.get)(Nn,"height",24);this.minHandler=this.addComponent(X,(0,M.__assign)({component:go,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(se-Or)/2,width:Qt,height:Or,cursor:"ew-resize"},Nn)),this.maxHandler=this.addComponent(X,(0,M.__assign)({component:go,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(se-Or)/2,width:Qt,height:Or,cursor:"ew-resize"},Nn)),this.updateUI(lr,_e,Ve)},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.updateUI=function(X,et,dt){var Ot=this.cfg,Qt=Ot.start,se=Ot.end,Me=Ot.width,Te=Ot.minText,Ne=Ot.maxText,Je=Ot.handlerStyle,sr=Qt*Me,gr=se*Me;X.attr("x",sr),X.attr("width",gr-sr);var Ir=(0,S.get)(Je,"width",po);et.attr("text",Te),dt.attr("text",Ne);var tn=this._dodgeText([sr,gr],et,dt),Qr=tn[0],En=tn[1];this.minHandler&&(this.minHandler.update({x:sr-Ir/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,S.each)(Qr,function(Bn,Nn){return et.attr(Nn,Bn)}),this.maxHandler&&(this.maxHandler.update({x:gr-Ir/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,S.each)(En,function(Bn,Nn){return dt.attr(Nn,Bn)})},wt.prototype.bindEvents=function(){var X=this.get("group");X.on("handler-min:mousedown",this.onMouseDown("minHandler")),X.on("handler-min:touchstart",this.onMouseDown("minHandler")),X.on("handler-max:mousedown",this.onMouseDown("maxHandler")),X.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var et=X.findById(this.getElementId("foreground"));et.on("mousedown",this.onMouseDown("foreground")),et.on("touchstart",this.onMouseDown("foreground"))},wt.prototype.adjustOffsetRange=function(X){var et=this.cfg,dt=et.start,Ot=et.end;switch(this.currentTarget){case"minHandler":{var Qt=0-dt,se=1-dt;return Math.min(se,Math.max(Qt,X))}case"maxHandler":{var Qt=0-Ot,se=1-Ot;return Math.min(se,Math.max(Qt,X))}case"foreground":{var Qt=0-dt,se=1-Ot;return Math.min(se,Math.max(Qt,X))}}},wt.prototype.updateStartEnd=function(X){var et=this.cfg,dt=et.start,Ot=et.end;switch(this.currentTarget){case"minHandler":dt+=X;break;case"maxHandler":Ot+=X;break;case"foreground":dt+=X,Ot+=X;break}this.set("start",dt),this.set("end",Ot)},wt.prototype._dodgeText=function(X,et,dt){var Ot,Qt,se=this.cfg,Me=se.handlerStyle,Te=se.width,Ne=2,Je=(0,S.get)(Me,"width",po),sr=X[0],gr=X[1],Ir=!1;sr>gr&&(Ot=[gr,sr],sr=Ot[0],gr=Ot[1],Qt=[dt,et],et=Qt[0],dt=Qt[1],Ir=!0);var tn=et.getBBox(),Qr=dt.getBBox(),En=tn.width>sr-Ne?{x:sr+Je/2+Ne,textAlign:"left"}:{x:sr-Je/2-Ne,textAlign:"right"},Bn=Qr.width>Te-gr-Ne?{x:gr-Je/2-Ne,textAlign:"right"}:{x:gr+Je/2+Ne,textAlign:"left"};return Ir?[Bn,En]:[En,Bn]},wt.prototype.draw=function(){var X=this.get("container"),et=X&&X.get("canvas");et&&et.draw()},wt.prototype.getContainerDOM=function(){var X=this.get("container"),et=X&&X.get("canvas");return et&&et.get("container")},wt}(ut),Po=null,zi=v(54240),Lo={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},Uo={default:Lo,hover:{thumbColor:"rgba(0,0,0,0.2)"}},Zo=function(ue){(0,M.__extends)(wt,ue);function wt(){var X=ue!==null&&ue.apply(this,arguments)||this;return X.clearEvents=S.noop,X.onStartEvent=function(et){return function(dt){X.isMobile=et,dt.originalEvent.preventDefault();var Ot=et?(0,S.get)(dt.originalEvent,"touches.0.clientX"):dt.clientX,Qt=et?(0,S.get)(dt.originalEvent,"touches.0.clientY"):dt.clientY;X.startPos=X.cfg.isHorizontal?Ot:Qt,X.bindLaterEvent()}},X.bindLaterEvent=function(){var et=X.getContainerDOM(),dt=[];X.isMobile?dt=[(0,zi.Z)(et,"touchmove",X.onMouseMove),(0,zi.Z)(et,"touchend",X.onMouseUp),(0,zi.Z)(et,"touchcancel",X.onMouseUp)]:dt=[(0,zi.Z)(et,"mousemove",X.onMouseMove),(0,zi.Z)(et,"mouseup",X.onMouseUp),(0,zi.Z)(et,"mouseleave",X.onMouseUp)],X.clearEvents=function(){dt.forEach(function(Ot){Ot.remove()})}},X.onMouseMove=function(et){var dt=X.cfg,Ot=dt.isHorizontal,Qt=dt.thumbOffset;et.preventDefault();var se=X.isMobile?(0,S.get)(et,"touches.0.clientX"):et.clientX,Me=X.isMobile?(0,S.get)(et,"touches.0.clientY"):et.clientY,Te=Ot?se:Me,Ne=Te-X.startPos;X.startPos=Te,X.updateThumbOffset(Qt+Ne)},X.onMouseUp=function(et){et.preventDefault(),X.clearEvents()},X.onTrackClick=function(et){var dt=X.cfg,Ot=dt.isHorizontal,Qt=dt.x,se=dt.y,Me=dt.thumbLen,Te=X.getContainerDOM(),Ne=Te.getBoundingClientRect(),Je=et.clientX,sr=et.clientY,gr=Ot?Je-Ne.left-Qt-Me/2:sr-Ne.top-se-Me/2,Ir=X.validateRange(gr);X.updateThumbOffset(Ir)},X.onThumbMouseOver=function(){var et=X.cfg.theme.hover.thumbColor;X.getElementByLocalId("thumb").attr("stroke",et),X.draw()},X.onThumbMouseOut=function(){var et=X.cfg.theme.default.thumbColor;X.getElementByLocalId("thumb").attr("stroke",et),X.draw()},X}return wt.prototype.setRange=function(X,et){this.set("minLimit",X),this.set("maxLimit",et);var dt=this.getValue(),Ot=(0,S.clamp)(dt,X,et);dt!==Ot&&!this.get("isInit")&&this.setValue(Ot)},wt.prototype.getRange=function(){var X=this.get("minLimit")||0,et=this.get("maxLimit")||1;return{min:X,max:et}},wt.prototype.setValue=function(X){var et=this.getRange(),dt=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,S.clamp)(X,et.min,et.max)}),this.delegateEmit("valuechange",{originalValue:dt,value:this.getValue()})},wt.prototype.getValue=function(){return(0,S.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},wt.prototype.getDefaultCfg=function(){var X=ue.prototype.getDefaultCfg.call(this);return(0,M.__assign)((0,M.__assign)({},X),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:Uo})},wt.prototype.renderInner=function(X){this.renderTrackShape(X),this.renderThumbShape(X)},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.renderTrackShape=function(X){var et=this.cfg,dt=et.trackLen,Ot=et.theme,Qt=Ot===void 0?{default:{}}:Ot,se=Qt.default,Me=se.lineCap,Te=se.trackColor,Ne=se.size,Je=this.get("isHorizontal")?{x1:0+Ne/2,y1:Ne/2,x2:dt-Ne/2,y2:Ne/2,lineWidth:Ne,stroke:Te,lineCap:Me}:{x1:Ne/2,y1:0+Ne/2,x2:Ne/2,y2:dt-Ne/2,lineWidth:Ne,stroke:Te,lineCap:Me};return this.addShape(X,{id:this.getElementId("track"),name:"track",type:"line",attrs:Je})},wt.prototype.renderThumbShape=function(X){var et=this.cfg,dt=et.thumbOffset,Ot=et.thumbLen,Qt=et.theme,se=Qt===void 0?{default:{}}:Qt,Me=se.default,Te=Me.size,Ne=Me.lineCap,Je=Me.thumbColor,sr=this.get("isHorizontal")?{x1:dt+Te/2,y1:Te/2,x2:dt+Ot-Te/2,y2:Te/2,lineWidth:Te,stroke:Je,lineCap:Ne,cursor:"default"}:{x1:Te/2,y1:dt+Te/2,x2:Te/2,y2:dt+Ot-Te/2,lineWidth:Te,stroke:Je,lineCap:Ne,cursor:"default"};return this.addShape(X,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:sr})},wt.prototype.bindEvents=function(){var X=this.get("group");X.on("mousedown",this.onStartEvent(!1)),X.on("mouseup",this.onMouseUp),X.on("touchstart",this.onStartEvent(!0)),X.on("touchend",this.onMouseUp);var et=X.findById(this.getElementId("track"));et.on("click",this.onTrackClick);var dt=X.findById(this.getElementId("thumb"));dt.on("mouseover",this.onThumbMouseOver),dt.on("mouseout",this.onThumbMouseOut)},wt.prototype.getContainerDOM=function(){var X=this.get("container"),et=X&&X.get("canvas");return et&&et.get("container")},wt.prototype.validateRange=function(X){var et=this.cfg,dt=et.thumbLen,Ot=et.trackLen,Qt=X;return X+dt>Ot?Qt=Ot-dt:X+dt<dt&&(Qt=0),Qt},wt.prototype.draw=function(){var X=this.get("container"),et=X&&X.get("canvas");et&&et.draw()},wt.prototype.updateThumbOffset=function(X){var et=this.cfg,dt=et.thumbOffset,Ot=et.isHorizontal,Qt=et.thumbLen,se=et.size,Me=this.validateRange(X);if(Me!==dt){var Te=this.getElementByLocalId("thumb");Ot?Te.attr({x1:Me+se/2,x2:Me+Qt-se/2}):Te.attr({y1:Me+se/2,y2:Me+Qt-se/2}),this.emitOffsetChange(Me)}},wt.prototype.emitOffsetChange=function(X){var et=this.cfg,dt=et.thumbOffset,Ot=et.trackLen,Qt=et.thumbLen;this.cfg.thumbOffset=X,this.emit("scrollchange",{thumbOffset:X,ratio:(0,S.clamp)(X/(Ot-Qt),0,1)}),this.delegateEmit("valuechange",{originalValue:dt,value:X})},wt}(ut)},11627:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(32447),c=v(23443),F=v(26169),L={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},O=function(_){d.__extends(P,_);function P(A){var x=_.call(this,A)||this;return x.initCfg(),x}return P.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},P.prototype.clear=function(){},P.prototype.update=function(A){var x=this,C=this.get("defaultCfg");F.each(A,function(w,M){var S=x.get(M),I=w;S!==w&&(F.isObject(w)&&C[M]&&(I=F.deepMix({},C[M],w)),x.set(M,I))}),this.updateInner(A),this.afterUpdate(A)},P.prototype.updateInner=function(A){},P.prototype.afterUpdate=function(A){F.hasKey(A,"visible")&&(A.visible?this.show():this.hide()),F.hasKey(A,"capture")&&this.setCapture(A.capture)},P.prototype.getLayoutBBox=function(){return this.getBBox()},P.prototype.getLocationType=function(){return this.get("locationType")},P.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},P.prototype.setOffset=function(A,x){this.update({offsetX:A,offsetY:x})},P.prototype.setLocation=function(A){var x=d.__assign({},A);this.update(x)},P.prototype.getLocation=function(){var A=this,x={},C=this.get("locationType"),w=L[C];return F.each(w,function(M){x[M]=A.get(M)}),x},P.prototype.isList=function(){return!1},P.prototype.isSlider=function(){return!1},P.prototype.init=function(){},P.prototype.initCfg=function(){var A=this,x=this.get("defaultCfg");F.each(x,function(C,w){var M=A.get(w);if(F.isObject(M)){var S=F.deepMix({},C,M);A.set(w,S)}})},P}(c.Base);T.default=O},7093:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(32447),c=v(44609),F=v(26169),L=v(20033),O=v(11627),_=function(P){d.__extends(A,P);function A(){return P!==null&&P.apply(this,arguments)||this}return A.prototype.getDefaultCfg=function(){var x=P.prototype.getDefaultCfg.call(this);return d.__assign(d.__assign({},x),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},A.prototype.getContainer=function(){return this.get("container")},A.prototype.show=function(){var x=this.get("container");x.style.display="",this.set("visible",!0)},A.prototype.hide=function(){var x=this.get("container");x.style.display="none",this.set("visible",!1)},A.prototype.setCapture=function(x){var C=this.getContainer(),w=x?"auto":"none";C.style.pointerEvents=w,this.set("capture",x)},A.prototype.getBBox=function(){var x=this.getContainer(),C=parseFloat(x.style.left)||0,w=parseFloat(x.style.top)||0;return L.createBBox(C,w,x.clientWidth,x.clientHeight)},A.prototype.clear=function(){var x=this.get("container");L.clearDom(x)},A.prototype.destroy=function(){this.removeEvent(),this.removeDom(),P.prototype.destroy.call(this)},A.prototype.init=function(){P.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},A.prototype.initCapture=function(){this.setCapture(this.get("capture"))},A.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},A.prototype.initDom=function(){},A.prototype.initContainer=function(){var x=this.get("container");if(F.isNil(x)){x=this.createDom();var C=this.get("parent");F.isString(C)&&(C=document.getElementById(C),this.set("parent",C)),C.appendChild(x),this.set("container",x)}else F.isString(x)&&(x=document.getElementById(x),this.set("container",x));this.get("parent")||this.set("parent",x.parentNode)},A.prototype.resetStyles=function(){var x=this.get("domStyles"),C=this.get("defaultStyles");x?x=F.deepMix({},C,x):x=C,this.set("domStyles",x)},A.prototype.applyStyles=function(){var x=this.get("domStyles");if(!!x){var C=this.getContainer();this.applyChildrenStyles(C,x);var w=this.get("containerClassName");if(w&&L.hasClass(C,w)){var M=x[w];c.modifyCSS(C,M)}}},A.prototype.applyChildrenStyles=function(x,C){F.each(C,function(w,M){var S=x.getElementsByClassName(M);F.each(S,function(I){c.modifyCSS(I,w)})})},A.prototype.applyStyle=function(x,C){var w=this.get("domStyles");c.modifyCSS(C,w[x])},A.prototype.createDom=function(){var x=this.get("containerTpl");return c.createDom(x)},A.prototype.initEvent=function(){},A.prototype.removeDom=function(){var x=this.get("container");x&&x.parentNode.removeChild(x)},A.prototype.removeEvent=function(){},A.prototype.updateInner=function(x){F.hasKey(x,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},A.prototype.resetPosition=function(){},A}(O.default);T.default=_},44414:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CROSSHAIR_Y=T.CROSSHAIR_X=T.NAME_CLASS=T.VALUE_CLASS=T.MARKER_CLASS=T.LIST_ITEM_CLASS=T.LIST_CLASS=T.TITLE_CLASS=T.CONTAINER_CLASS=void 0,T.CONTAINER_CLASS="g2-tooltip",T.TITLE_CLASS="g2-tooltip-title",T.LIST_CLASS="g2-tooltip-list",T.LIST_ITEM_CLASS="g2-tooltip-list-item",T.MARKER_CLASS="g2-tooltip-marker",T.VALUE_CLASS="g2-tooltip-value",T.NAME_CLASS="g2-tooltip-name",T.CROSSHAIR_X="g2-tooltip-crosshair-x",T.CROSSHAIR_Y="g2-tooltip-crosshair-y"},98906:function(xt,T,v){"use strict";var d;Object.defineProperty(T,"__esModule",{value:!0});var c=v(59618),F=v(44414);T.default=(d={},d[""+F.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:c.default.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},d[""+F.TITLE_CLASS]={marginBottom:"4px"},d[""+F.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},d[""+F.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},d[""+F.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},d[""+F.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},d[""+F.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},d[""+F.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},d)},12946:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(32447),F=v(87892),L=v(44609),O=v(26169),_=v(7093),P=v(20033),A=v(44414),x=v(98906),C=v(99850);function w(S,I){var B=!1;return O.each(I,function(N){if(O.hasKey(S,N))return B=!0,!1}),B}var M=function(S){c.__extends(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I.prototype.getDefaultCfg=function(){var B=S.prototype.getDefaultCfg.call(this);return c.__assign(c.__assign({},B),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+A.CONTAINER_CLASS+'"><div class="'+A.TITLE_CLASS+'"></div><ul class="'+A.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+A.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+A.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+A.NAME_CLASS+`">{name}</span>:
          <span class="`+A.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+A.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+A.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:A.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:x.default})},I.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},I.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},I.prototype.show=function(){var B=this.getContainer();!B||this.destroyed||(this.set("visible",!0),L.modifyCSS(B,{visibility:"visible"}),this.setCrossHairsVisible(!0))},I.prototype.hide=function(){var B=this.getContainer();!B||this.destroyed||(this.set("visible",!1),L.modifyCSS(B,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},I.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},I.prototype.setLocation=function(B){this.set("x",B.x),this.set("y",B.y),this.resetPosition()},I.prototype.setCrossHairsVisible=function(B){var N=B?"":"none",G=this.get("xCrosshairDom"),W=this.get("yCrosshairDom");G&&L.modifyCSS(G,{display:N}),W&&L.modifyCSS(W,{display:N})},I.prototype.initContainer=function(){if(S.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var B=this.getHtmlContentNode();this.get("parent").appendChild(B),this.set("container",B),this.resetStyles(),this.applyStyles()}},I.prototype.updateInner=function(B){this.get("customContent")?this.renderCustomContent():(w(B,["title","showTitle"])&&this.resetTitle(),O.hasKey(B,"items")&&this.renderItems()),S.prototype.updateInner.call(this,B)},I.prototype.initDom=function(){this.cacheDoms()},I.prototype.removeDom=function(){S.prototype.removeDom.call(this),this.clearCrosshairs()},I.prototype.resetPosition=function(){var B=this.get("x"),N=this.get("y"),G=this.get("offset"),W=this.getOffset(),$=W.offsetX,H=W.offsetY,j=this.get("position"),nt=this.get("region"),rt=this.getContainer(),mt=this.getBBox(),Ft=mt.width,Gt=mt.height,gt;nt&&(gt=P.regionToBBox(nt));var st=C.getAlignPoint(B,N,G,Ft,Gt,j,gt);L.modifyCSS(rt,{left:P.toPx(st.x+$),top:P.toPx(st.y+H)}),this.resetCrosshairs()},I.prototype.renderCustomContent=function(){var B=this.getHtmlContentNode(),N=this.get("parent"),G=this.get("container");G&&G.parentNode===N?N.replaceChild(B,G):N.appendChild(B),this.set("container",B),this.resetStyles(),this.applyStyles()},I.prototype.getHtmlContentNode=function(){var B,N=this.get("customContent");if(N){var G=N(this.get("title"),this.get("items"));O.isElement(G)?B=G:B=L.createDom(G)}return B},I.prototype.cacheDoms=function(){var B=this.getContainer(),N=B.getElementsByClassName(A.TITLE_CLASS)[0],G=B.getElementsByClassName(A.LIST_CLASS)[0];this.set("titleDom",N),this.set("listDom",G)},I.prototype.resetTitle=function(){var B=this.get("title"),N=this.get("showTitle");N&&B?this.setTitle(B):this.setTitle("")},I.prototype.setTitle=function(B){var N=this.get("titleDom");N&&(N.innerText=B)},I.prototype.resetCrosshairs=function(){var B=this.get("crosshairsRegion"),N=this.get("crosshairs");if(!B||!N)this.clearCrosshairs();else{var G=P.regionToBBox(B),W=this.get("xCrosshairDom"),$=this.get("yCrosshairDom");N==="x"?(this.resetCrosshair("x",G),$&&($.remove(),this.set("yCrosshairDom",null))):N==="y"?(this.resetCrosshair("y",G),W&&(W.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",G),this.resetCrosshair("y",G)),this.setCrossHairsVisible(this.get("visible"))}},I.prototype.resetCrosshair=function(B,N){var G=this.checkCrosshair(B),W=this.get(B);B==="x"?L.modifyCSS(G,{left:P.toPx(W),top:P.toPx(N.y),height:P.toPx(N.height)}):L.modifyCSS(G,{top:P.toPx(W),left:P.toPx(N.x),width:P.toPx(N.width)})},I.prototype.checkCrosshair=function(B){var N=B+"CrosshairDom",G=B+"CrosshairTpl",W="CROSSHAIR_"+B.toUpperCase(),$=A[W],H=this.get(N),j=this.get("parent");return H||(H=L.createDom(this.get(G)),this.applyStyle($,H),j.appendChild(H),this.set(N,H)),H},I.prototype.renderItems=function(){this.clearItemDoms();var B=this.get("items"),N=this.get("itemTpl"),G=this.get("listDom");G&&(O.each(B,function(W){var $=F.default.toCSSGradient(W.color),H=c.__assign(c.__assign({},W),{color:$}),j=O.substitute(N,H),nt=L.createDom(j);G.appendChild(nt)}),this.applyChildrenStyles(G,this.get("domStyles")))},I.prototype.clearItemDoms=function(){this.get("listDom")&&P.clearDom(this.get("listDom"))},I.prototype.clearCrosshairs=function(){var B=this.get("xCrosshairDom"),N=this.get("yCrosshairDom");B&&B.remove(),N&&N.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},I}(_.default);T.Z=M},99850:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getAlignPoint=T.getPointByPosition=T.getOutSides=void 0;function v(F,L,O,_,P){var A={left:F<P.x,right:F+O>P.x+P.width,top:L<P.y,bottom:L+_>P.y+P.height};return A}T.getOutSides=v;function d(F,L,O,_,P,A){var x=F,C=L;switch(A){case"left":x=F-_-O,C=L-P/2;break;case"right":x=F+O,C=L-P/2;break;case"top":x=F-_/2,C=L-P-O;break;case"bottom":x=F-_/2,C=L+O;break;default:x=F+O,C=L-P-O;break}return{x,y:C}}T.getPointByPosition=d;function c(F,L,O,_,P,A,x){var C=d(F,L,O,_,P,A);if(x){var w=v(C.x,C.y,_,P,x);A==="auto"?(w.right&&(C.x=Math.max(0,F-_-O)),w.top&&(C.y=Math.max(0,L-P-O))):A==="top"||A==="bottom"?(w.left&&(C.x=x.x),w.right&&(C.x=x.x+x.width-_),A==="top"&&w.top&&(C.y=L+O),A==="bottom"&&w.bottom&&(C.y=L-P-O)):(w.top&&(C.y=x.y),w.bottom&&(C.y=x.y+x.height-P),A==="left"&&w.left&&(C.x=F+O),A==="right"&&w.right&&(C.x=F-_-O))}return C}T.getAlignPoint=c},82614:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.propagationDelegate=void 0;var d=v(58992);function c(F,L,O){var _=new d.default(L,O);_.target=F,_.propagationPath.push(F),F.emitDelegation(L,_);for(var P=F.getParent();P;)P.emitDelegation(L,_),_.propagationPath.push(P),P=P.getParent()}T.propagationDelegate=c},59618:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},20033:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getTextPoint=T.toPx=T.updateClip=T.getBBoxWithClip=T.mergeBBox=T.intersectBBox=T.near=T.wait=T.distance=T.getCirclePoint=T.getValueByPercent=T.createBBox=T.pointsToBBox=T.regionToBBox=T.hasClass=T.clearDom=T.formatPadding=void 0;var d=v(26169);function c(G){var W=0,$=0,H=0,j=0;return d.isNumber(G)?W=$=H=j=G:d.isArray(G)&&(W=G[0],H=d.isNil(G[1])?G[0]:G[1],j=d.isNil(G[2])?G[0]:G[2],$=d.isNil(G[3])?H:G[3]),[W,H,j,$]}T.formatPadding=c;function F(G){for(var W=G.childNodes,$=W.length,H=$-1;H>=0;H--)G.removeChild(W[H])}T.clearDom=F;function L(G,W){return!!G.className.match(new RegExp("(\\s|^)"+W+"(\\s|$)"))}T.hasClass=L;function O(G){var W=G.start,$=G.end,H=Math.min(W.x,$.x),j=Math.min(W.y,$.y),nt=Math.max(W.x,$.x),rt=Math.max(W.y,$.y);return{x:H,y:j,minX:H,minY:j,maxX:nt,maxY:rt,width:nt-H,height:rt-j}}T.regionToBBox=O;function _(G){var W=G.map(function(mt){return mt.x}),$=G.map(function(mt){return mt.y}),H=Math.min.apply(Math,W),j=Math.min.apply(Math,$),nt=Math.max.apply(Math,W),rt=Math.max.apply(Math,$);return{x:H,y:j,minX:H,minY:j,maxX:nt,maxY:rt,width:nt-H,height:rt-j}}T.pointsToBBox=_;function P(G,W,$,H){return{x:G,y:W,width:$,height:H,minX:G,minY:W,maxX:G+$,maxY:W+H}}T.createBBox=P;function A(G,W,$){return(1-$)*G+W*$}T.getValueByPercent=A;function x(G,W,$){return{x:G.x+Math.cos($)*W,y:G.y+Math.sin($)*W}}T.getCirclePoint=x;function C(G,W){var $=W.x-G.x,H=W.y-G.y;return Math.sqrt($*$+H*H)}T.distance=C,T.wait=function(G){return new Promise(function(W){setTimeout(W,G)})},T.near=function(G,W){return[G,W].includes(Infinity)?Math.abs(G)===Math.abs(W):Math.abs(G-W)<Math.pow(Number.EPSILON,.5)};function w(G,W){var $=Math.max(G.minX,W.minX),H=Math.max(G.minY,W.minY),j=Math.min(G.maxX,W.maxX),nt=Math.min(G.maxY,W.maxY);return P($,H,j-$,nt-H)}T.intersectBBox=w;function M(G,W){var $=Math.min(G.minX,W.minX),H=Math.min(G.minY,W.minY),j=Math.max(G.maxX,W.maxX),nt=Math.max(G.maxY,W.maxY);return P($,H,j-$,nt-H)}T.mergeBBox=M;function S(G){var W=G.getClip(),$=W&&W.getBBox(),H;if(!G.isGroup())H=G.getBBox();else{var j=Infinity,nt=-Infinity,rt=Infinity,mt=-Infinity,Ft=G.getChildren();Ft.length>0?d.each(Ft,function(Gt){if(Gt.get("visible")){if(Gt.isGroup()&&Gt.get("children").length===0)return!0;var gt=S(Gt),st=Gt.applyToMatrix([gt.minX,gt.minY,1]),Xt=Gt.applyToMatrix([gt.minX,gt.maxY,1]),Q=Gt.applyToMatrix([gt.maxX,gt.minY,1]),qt=Gt.applyToMatrix([gt.maxX,gt.maxY,1]),y=Math.min(st[0],Xt[0],Q[0],qt[0]),Yt=Math.max(st[0],Xt[0],Q[0],qt[0]),K=Math.min(st[1],Xt[1],Q[1],qt[1]),ht=Math.max(st[1],Xt[1],Q[1],qt[1]);y<j&&(j=y),Yt>nt&&(nt=Yt),K<rt&&(rt=K),ht>mt&&(mt=ht)}}):(j=0,nt=0,rt=0,mt=0),H=P(j,rt,nt-j,mt-rt)}return $?w(H,$):H}T.getBBoxWithClip=S;function I(G,W){if(!(!G.getClip()&&!W.getClip())){var $=W.getClip();if(!$){G.setClip(null);return}var H={type:$.get("type"),attrs:$.attr()};G.setClip(H)}}T.updateClip=I;function B(G){return G+"px"}T.toPx=B;function N(G,W,$,H){var j=C(G,W),nt=H/j,rt=0;return $==="start"?rt=0-nt:$==="end"&&(rt=1+nt),{x:A(G.x,W.x,rt),y:A(G.y,W.y,rt)}}T.getTextPoint=N},14533:function(xt,T,v){"use strict";v.r(T),v.d(T,{Coordinate:function(){return P},getCoordinate:function(){return N},registerCoordinate:function(){return G}});var d=v(21362),c=v(92541),F=v(58198),L=v(50669),O=v(26169),_=function(){function W($){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var H=$.start,j=$.end,nt=$.matrix,rt=nt===void 0?[1,0,0,0,1,0,0,0,1]:nt,mt=$.isTransposed,Ft=mt===void 0?!1:mt;this.start=H,this.end=j,this.matrix=rt,this.originalMatrix=(0,d.__spreadArray)([],rt),this.isTransposed=Ft}return W.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},W.prototype.update=function($){(0,O.assign)(this,$),this.initial()},W.prototype.convertDim=function($,H){var j,nt=this[H],rt=nt.start,mt=nt.end;return this.isReflect(H)&&(j=[mt,rt],rt=j[0],mt=j[1]),rt+$*(mt-rt)},W.prototype.invertDim=function($,H){var j,nt=this[H],rt=nt.start,mt=nt.end;return this.isReflect(H)&&(j=[mt,rt],rt=j[0],mt=j[1]),($-rt)/(mt-rt)},W.prototype.applyMatrix=function($,H,j){j===void 0&&(j=0);var nt=this.matrix,rt=[$,H,j];return c.transformMat3(rt,rt,nt),rt},W.prototype.invertMatrix=function($,H,j){j===void 0&&(j=0);var nt=this.matrix,rt=F.invert([0,0,0,0,0,0,0,0,0],nt),mt=[$,H,j];return rt&&c.transformMat3(mt,mt,rt),mt},W.prototype.convert=function($){var H=this.convertPoint($),j=H.x,nt=H.y,rt=this.applyMatrix(j,nt,1);return{x:rt[0],y:rt[1]}},W.prototype.invert=function($){var H=this.invertMatrix($.x,$.y,1);return this.invertPoint({x:H[0],y:H[1]})},W.prototype.rotate=function($){var H=this.matrix,j=this.center;return L.leftTranslate(H,H,[-j.x,-j.y]),L.leftRotate(H,H,$),L.leftTranslate(H,H,[j.x,j.y]),this},W.prototype.reflect=function($){return $==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},W.prototype.scale=function($,H){var j=this.matrix,nt=this.center;return L.leftTranslate(j,j,[-nt.x,-nt.y]),L.leftScale(j,j,[$,H]),L.leftTranslate(j,j,[nt.x,nt.y]),this},W.prototype.translate=function($,H){var j=this.matrix;return L.leftTranslate(j,j,[$,H]),this},W.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},W.prototype.getCenter=function(){return this.center},W.prototype.getWidth=function(){return this.width},W.prototype.getHeight=function(){return this.height},W.prototype.getRadius=function(){return this.radius},W.prototype.isReflect=function($){return $==="x"?this.isReflectX:this.isReflectY},W.prototype.resetMatrix=function($){this.matrix=$||(0,d.__spreadArray)([],this.originalMatrix)},W}(),P=_,A=function(W){(0,d.__extends)($,W);function $(H){var j=W.call(this,H)||this;return j.isRect=!0,j.type="cartesian",j.initial(),j}return $.prototype.initial=function(){W.prototype.initial.call(this);var H=this.start,j=this.end;this.x={start:H.x,end:j.x},this.y={start:H.y,end:j.y}},$.prototype.convertPoint=function(H){var j,nt=H.x,rt=H.y;return this.isTransposed&&(j=[rt,nt],nt=j[0],rt=j[1]),{x:this.convertDim(nt,"x"),y:this.convertDim(rt,"y")}},$.prototype.invertPoint=function(H){var j,nt=this.invertDim(H.x,"x"),rt=this.invertDim(H.y,"y");return this.isTransposed&&(j=[rt,nt],nt=j[0],rt=j[1]),{x:nt,y:rt}},$}(P),x=A,C=v(7124),w=function(W){(0,d.__extends)($,W);function $(H){var j=W.call(this,H)||this;j.isHelix=!0,j.type="helix";var nt=H.startAngle,rt=nt===void 0?1.25*Math.PI:nt,mt=H.endAngle,Ft=mt===void 0?7.25*Math.PI:mt,Gt=H.innerRadius,gt=Gt===void 0?0:Gt,st=H.radius;return j.startAngle=rt,j.endAngle=Ft,j.innerRadius=gt,j.radius=st,j.initial(),j}return $.prototype.initial=function(){W.prototype.initial.call(this);var H=(this.endAngle-this.startAngle)/(2*Math.PI)+1,j=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(j=j*this.radius),this.d=Math.floor(j*(1-this.innerRadius)/H),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*j,end:this.innerRadius*j+this.d*.99}},$.prototype.convertPoint=function(H){var j,nt=H.x,rt=H.y;this.isTransposed&&(j=[rt,nt],nt=j[0],rt=j[1]);var mt=this.convertDim(nt,"x"),Ft=this.a*mt,Gt=this.convertDim(rt,"y");return{x:this.center.x+Math.cos(mt)*(Ft+Gt),y:this.center.y+Math.sin(mt)*(Ft+Gt)}},$.prototype.invertPoint=function(H){var j,nt=this.d+this.y.start,rt=C.subtract([0,0],[H.x,H.y],[this.center.x,this.center.y]),mt=L.angleTo(rt,[1,0],!0),Ft=mt*this.a;C.length(rt)<Ft&&(Ft=C.length(rt));var Gt=Math.floor((C.length(rt)-Ft)/nt);mt=2*Gt*Math.PI+mt;var gt=this.a*mt,st=C.length(rt)-gt;st=(0,O.isNumberEqual)(st,0)?0:st;var Xt=this.invertDim(mt,"x"),Q=this.invertDim(st,"y");return Xt=(0,O.isNumberEqual)(Xt,0)?0:Xt,Q=(0,O.isNumberEqual)(Q,0)?0:Q,this.isTransposed&&(j=[Q,Xt],Xt=j[0],Q=j[1]),{x:Xt,y:Q}},$}(P),M=w,S=function(W){(0,d.__extends)($,W);function $(H){var j=W.call(this,H)||this;j.isPolar=!0,j.type="polar";var nt=H.startAngle,rt=nt===void 0?-Math.PI/2:nt,mt=H.endAngle,Ft=mt===void 0?Math.PI*3/2:mt,Gt=H.innerRadius,gt=Gt===void 0?0:Gt,st=H.radius;return j.startAngle=rt,j.endAngle=Ft,j.innerRadius=gt,j.radius=st,j.initial(),j}return $.prototype.initial=function(){for(W.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var H=this.getOneBox(),j=H.maxX-H.minX,nt=H.maxY-H.minY,rt=Math.abs(H.minX)/j,mt=Math.abs(H.minY)/nt,Ft;this.height/nt>this.width/j?(Ft=this.width/j,this.circleCenter={x:this.center.x-(.5-rt)*this.width,y:this.center.y-(.5-mt)*Ft*nt}):(Ft=this.height/nt,this.circleCenter={x:this.center.x-(.5-rt)*Ft*j,y:this.center.y-(.5-mt)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Ft*this.radius:(this.radius<=0||this.radius>Ft)&&(this.polarRadius=Ft):this.polarRadius=Ft,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},$.prototype.getRadius=function(){return this.polarRadius},$.prototype.convertPoint=function(H){var j,nt=this.getCenter(),rt=H.x,mt=H.y;return this.isTransposed&&(j=[mt,rt],rt=j[0],mt=j[1]),rt=this.convertDim(rt,"x"),mt=this.convertDim(mt,"y"),{x:nt.x+Math.cos(rt)*mt,y:nt.y+Math.sin(rt)*mt}},$.prototype.invertPoint=function(H){var j,nt=this.getCenter(),rt=[H.x-nt.x,H.y-nt.y],mt=this,Ft=mt.startAngle,Gt=mt.endAngle;this.isReflect("x")&&(j=[Gt,Ft],Ft=j[0],Gt=j[1]);var gt=[1,0,0,0,1,0,0,0,1];L.leftRotate(gt,gt,Ft);var st=[1,0,0];c.transformMat3(st,st,gt);var Xt=[st[0],st[1]],Q=L.angleTo(Xt,rt,Gt<Ft);(0,O.isNumberEqual)(Q,Math.PI*2)&&(Q=0);var qt=C.length(rt),y=Q/(Gt-Ft);y=Gt-Ft>0?y:-y;var Yt=this.invertDim(qt,"y"),K={x:0,y:0};return K.x=this.isTransposed?Yt:y,K.y=this.isTransposed?y:Yt,K},$.prototype.getCenter=function(){return this.circleCenter},$.prototype.getOneBox=function(){var H=this.startAngle,j=this.endAngle;if(Math.abs(j-H)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var nt=[0,Math.cos(H),Math.cos(j)],rt=[0,Math.sin(H),Math.sin(j)],mt=Math.min(H,j);mt<Math.max(H,j);mt+=Math.PI/18)nt.push(Math.cos(mt)),rt.push(Math.sin(mt));return{minX:Math.min.apply(Math,nt),maxX:Math.max.apply(Math,nt),minY:Math.min.apply(Math,rt),maxY:Math.max.apply(Math,rt)}},$}(P),I=S,B={},N=function(W){return B[W.toLowerCase()]},G=function(W,$){B[W.toLowerCase()]=$};G("rect",x),G("cartesian",x),G("polar",I),G("helix",M)},54240:function(xt,T,v){"use strict";v.d(T,{Z:function(){return d}});function d(c,F,L){if(c){if(typeof c.addEventListener=="function")return c.addEventListener(F,L,!1),{remove:function(){c.removeEventListener(F,L,!1)}};if(typeof c.attachEvent=="function")return c.attachEvent("on"+F,L),{remove:function(){c.detachEvent("on"+F,L)}}}}},50344:function(xt,T,v){"use strict";v.d(T,{Z:function(){return _}});var d,c,F,L;function O(){d=document.createElement("table"),c=document.createElement("tr"),F=/^\s*<(\w+|!)[^>]*>/,L={tr:document.createElement("tbody"),tbody:d,thead:d,tfoot:d,td:c,th:c,"*":document.createElement("div")}}function _(P){d||O();var A=F.test(P)&&RegExp.$1;(!A||!(A in L))&&(A="*");var x=L[A];P=P.replace(/(^\s*)|(\s*$)/g,""),x.innerHTML=""+P;var C=x.childNodes[0];return x.removeChild(C),C}},60748:function(xt,T,v){"use strict";v.d(T,{Z:function(){return c}});var d=v(92679);function c(F,L){var O=(0,d.Z)(F,"height",L);return O==="auto"&&(O=F.offsetHeight),parseFloat(O)}},33506:function(xt,T,v){"use strict";v.d(T,{Z:function(){return F}});var d=v(92679),c=v(60748);function F(L,O){var _=(0,c.Z)(L,O),P=parseFloat((0,d.Z)(L,"borderTopWidth"))||0,A=parseFloat((0,d.Z)(L,"paddingTop"))||0,x=parseFloat((0,d.Z)(L,"paddingBottom"))||0,C=parseFloat((0,d.Z)(L,"borderBottomWidth"))||0,w=parseFloat((0,d.Z)(L,"marginTop"))||0,M=parseFloat((0,d.Z)(L,"marginBottom"))||0;return _+P+C+A+x+w+M}},66362:function(xt,T,v){"use strict";v.d(T,{Z:function(){return F}});var d=v(92679),c=v(12265);function F(L,O){var _=(0,c.Z)(L,O),P=parseFloat((0,d.Z)(L,"borderLeftWidth"))||0,A=parseFloat((0,d.Z)(L,"paddingLeft"))||0,x=parseFloat((0,d.Z)(L,"paddingRight"))||0,C=parseFloat((0,d.Z)(L,"borderRightWidth"))||0,w=parseFloat((0,d.Z)(L,"marginRight"))||0,M=parseFloat((0,d.Z)(L,"marginLeft"))||0;return _+P+C+A+x+M+w}},92679:function(xt,T,v){"use strict";v.d(T,{Z:function(){return d}});function d(c,F,L){var O;try{O=window.getComputedStyle?window.getComputedStyle(c,null)[F]:c.style[F]}catch(_){}finally{O=O===void 0?L:O}return O}},12265:function(xt,T,v){"use strict";v.d(T,{Z:function(){return c}});var d=v(92679);function c(F,L){var O=(0,d.Z)(F,"width",L);return O==="auto"&&(O=F.offsetWidth),parseFloat(O)}},44609:function(xt,T,v){"use strict";v.r(T),v.d(T,{addEventListener:function(){return d.Z},createDom:function(){return c.Z},getHeight:function(){return F.Z},getOuterHeight:function(){return L.Z},getOuterWidth:function(){return O.Z},getRatio:function(){return _},getStyle:function(){return P.Z},getWidth:function(){return A.Z},modifyCSS:function(){return x.Z}});var d=v(54240),c=v(50344),F=v(60748),L=v(33506),O=v(66362);function _(){return window.devicePixelRatio?window.devicePixelRatio:2}var P=v(92679),A=v(12265),x=v(53918)},53918:function(xt,T,v){"use strict";v.d(T,{Z:function(){return d}});function d(c,F){if(c)for(var L in F)F.hasOwnProperty(L)&&(c.style[L]=F[L]);return c}},52493:function(xt,T){"use strict";var v;v={value:!0};function d(c,F,L){if(c){if(typeof c.addEventListener=="function")return c.addEventListener(F,L,!1),{remove:function(){c.removeEventListener(F,L,!1)}};if(typeof c.attachEvent=="function")return c.attachEvent("on"+F,L),{remove:function(){c.detachEvent("on"+F,L)}}}}T.Z=d},27295:function(xt,T){"use strict";var v;v={value:!0};var d,c,F,L;function O(){d=document.createElement("table"),c=document.createElement("tr"),F=/^\s*<(\w+|!)[^>]*>/,L={tr:document.createElement("tbody"),tbody:d,thead:d,tfoot:d,td:c,th:c,"*":document.createElement("div")}}function _(P){d||O();var A=F.test(P)&&RegExp.$1;(!A||!(A in L))&&(A="*");var x=L[A];P=P.replace(/(^\s*)|(\s*$)/g,""),x.innerHTML=""+P;var C=x.childNodes[0];return x.removeChild(C),C}T.Z=_},14141:function(xt,T){"use strict";var v;v={value:!0};function d(c,F){if(c)for(var L in F)F.hasOwnProperty(L)&&(c.style[L]=F[L]);return c}T.Z=d},95472:function(xt,T,v){"use strict";v.r(T);var d="*",c=function(){function F(){this._events={}}return F.prototype.on=function(L,O,_){return this._events[L]||(this._events[L]=[]),this._events[L].push({callback:O,once:!!_}),this},F.prototype.once=function(L,O){return this.on(L,O,!0),this},F.prototype.emit=function(L){for(var O=this,_=[],P=1;P<arguments.length;P++)_[P-1]=arguments[P];var A=this._events[L]||[],x=this._events[d]||[],C=function(w){for(var M=w.length,S=0;S<M;S++)if(!!w[S]){var I=w[S],B=I.callback,N=I.once;N&&(w.splice(S,1),w.length===0&&delete O._events[L],M--,S--),B.apply(O,_)}};C(A),C(x)},F.prototype.off=function(L,O){if(!L)this._events={};else if(!O)delete this._events[L];else{for(var _=this._events[L]||[],P=_.length,A=0;A<P;A++)_[A].callback===O&&(_.splice(A,1),P--,A--);_.length===0&&delete this._events[L]}return this},F.prototype.getEvents=function(){return this._events},F}();T.default=c},23443:function(xt,T,v){"use strict";v.r(T),v.d(T,{AbstractCanvas:function(){return On},AbstractGroup:function(){return zn},AbstractShape:function(){return Hn},Base:function(){return er},Event:function(){return Tt},PathUtil:function(){return d},version:function(){return Ri}});var d={};v.r(d),v.d(d,{catmullRomToBezier:function(){return P},fillPath:function(){return y},fillPathByDiff:function(){return J},formatPath:function(){return pt},intersection:function(){return st},parsePathArray:function(){return B},parsePathString:function(){return _},pathToAbsolute:function(){return x},pathToCurve:function(){return S},rectPath:function(){return j}});var c=v(26169),F=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,L=new RegExp("([a-z])["+F+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+F+"]*,?["+F+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+F+"]*,?["+F+"]*","ig"),_=function(Jt){if(!Jt)return null;if((0,c.isArray)(Jt))return Jt;var Dt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},yt=[];return String(Jt).replace(L,function(Ct,ct,vt){var ot=[],St=ct.toLowerCase();if(vt.replace(O,function(Mt,te){te&&ot.push(+te)}),St==="m"&&ot.length>2&&(yt.push([ct].concat(ot.splice(0,2))),St="l",ct=ct==="m"?"l":"L"),St==="o"&&ot.length===1&&yt.push([ct,ot[0]]),St==="r")yt.push([ct].concat(ot));else for(;ot.length>=Dt[St]&&(yt.push([ct].concat(ot.splice(0,Dt[St]))),!!Dt[St]););return Jt}),yt},P=function(Jt,Dt){for(var yt=[],Ct=0,ct=Jt.length;ct-2*!Dt>Ct;Ct+=2){var vt=[{x:+Jt[Ct-2],y:+Jt[Ct-1]},{x:+Jt[Ct],y:+Jt[Ct+1]},{x:+Jt[Ct+2],y:+Jt[Ct+3]},{x:+Jt[Ct+4],y:+Jt[Ct+5]}];Dt?Ct?ct-4===Ct?vt[3]={x:+Jt[0],y:+Jt[1]}:ct-2===Ct&&(vt[2]={x:+Jt[0],y:+Jt[1]},vt[3]={x:+Jt[2],y:+Jt[3]}):vt[0]={x:+Jt[ct-2],y:+Jt[ct-1]}:ct-4===Ct?vt[3]=vt[2]:Ct||(vt[0]={x:+Jt[Ct],y:+Jt[Ct+1]}),yt.push(["C",(-vt[0].x+6*vt[1].x+vt[2].x)/6,(-vt[0].y+6*vt[1].y+vt[2].y)/6,(vt[1].x+6*vt[2].x-vt[3].x)/6,(vt[1].y+6*vt[2].y-vt[3].y)/6,vt[2].x,vt[2].y])}return yt},A=function(Jt,Dt,yt,Ct,ct){var vt=[];if(ct===null&&Ct===null&&(Ct=yt),Jt=+Jt,Dt=+Dt,yt=+yt,Ct=+Ct,ct!==null){var ot=Math.PI/180,St=Jt+yt*Math.cos(-Ct*ot),Mt=Jt+yt*Math.cos(-ct*ot),te=Dt+yt*Math.sin(-Ct*ot),ne=Dt+yt*Math.sin(-ct*ot);vt=[["M",St,te],["A",yt,yt,0,+(ct-Ct>180),0,Mt,ne]]}else vt=[["M",Jt,Dt],["m",0,-Ct],["a",yt,Ct,0,1,1,0,2*Ct],["a",yt,Ct,0,1,1,0,-2*Ct],["z"]];return vt},x=function(Jt){if(Jt=_(Jt),!Jt||!Jt.length)return[["M",0,0]];var Dt=[],yt=0,Ct=0,ct=0,vt=0,ot=0,St,Mt;Jt[0][0]==="M"&&(yt=+Jt[0][1],Ct=+Jt[0][2],ct=yt,vt=Ct,ot++,Dt[0]=["M",yt,Ct]);for(var te=Jt.length===3&&Jt[0][0]==="M"&&Jt[1][0].toUpperCase()==="R"&&Jt[2][0].toUpperCase()==="Z",ne=void 0,de=void 0,He=ot,Ge=Jt.length;He<Ge;He++){if(Dt.push(ne=[]),de=Jt[He],St=de[0],St!==St.toUpperCase())switch(ne[0]=St.toUpperCase(),ne[0]){case"A":ne[1]=de[1],ne[2]=de[2],ne[3]=de[3],ne[4]=de[4],ne[5]=de[5],ne[6]=+de[6]+yt,ne[7]=+de[7]+Ct;break;case"V":ne[1]=+de[1]+Ct;break;case"H":ne[1]=+de[1]+yt;break;case"R":Mt=[yt,Ct].concat(de.slice(1));for(var Ie=2,qe=Mt.length;Ie<qe;Ie++)Mt[Ie]=+Mt[Ie]+yt,Mt[++Ie]=+Mt[Ie]+Ct;Dt.pop(),Dt=Dt.concat(P(Mt,te));break;case"O":Dt.pop(),Mt=A(yt,Ct,de[1],de[2]),Mt.push(Mt[0]),Dt=Dt.concat(Mt);break;case"U":Dt.pop(),Dt=Dt.concat(A(yt,Ct,de[1],de[2],de[3])),ne=["U"].concat(Dt[Dt.length-1].slice(-2));break;case"M":ct=+de[1]+yt,vt=+de[2]+Ct;break;default:for(var Ie=1,qe=de.length;Ie<qe;Ie++)ne[Ie]=+de[Ie]+(Ie%2?yt:Ct)}else if(St==="R")Mt=[yt,Ct].concat(de.slice(1)),Dt.pop(),Dt=Dt.concat(P(Mt,te)),ne=["R"].concat(de.slice(-2));else if(St==="O")Dt.pop(),Mt=A(yt,Ct,de[1],de[2]),Mt.push(Mt[0]),Dt=Dt.concat(Mt);else if(St==="U")Dt.pop(),Dt=Dt.concat(A(yt,Ct,de[1],de[2],de[3])),ne=["U"].concat(Dt[Dt.length-1].slice(-2));else for(var xr=0,Pr=de.length;xr<Pr;xr++)ne[xr]=de[xr];if(St=St.toUpperCase(),St!=="O")switch(ne[0]){case"Z":yt=+ct,Ct=+vt;break;case"H":yt=ne[1];break;case"V":Ct=ne[1];break;case"M":ct=ne[ne.length-2],vt=ne[ne.length-1];break;default:yt=ne[ne.length-2],Ct=ne[ne.length-1]}}return Dt},C=function(Jt,Dt,yt,Ct){return[Jt,Dt,yt,Ct,yt,Ct]},w=function(Jt,Dt,yt,Ct,ct,vt){var ot=1/3,St=2/3;return[ot*Jt+St*yt,ot*Dt+St*Ct,ot*ct+St*yt,ot*vt+St*Ct,ct,vt]},M=function(Jt,Dt,yt,Ct,ct,vt,ot,St,Mt,te){yt===Ct&&(yt+=1);var ne=Math.PI*120/180,de=Math.PI/180*(+ct||0),He=[],Ge,Ie,qe,xr,Pr,Wr=function(ea,xa,Ca){var ba=ea*Math.cos(Ca)-xa*Math.sin(Ca),fo=ea*Math.sin(Ca)+xa*Math.cos(Ca);return{x:ba,y:fo}};if(te)Ie=te[0],qe=te[1],xr=te[2],Pr=te[3];else{Ge=Wr(Jt,Dt,-de),Jt=Ge.x,Dt=Ge.y,Ge=Wr(St,Mt,-de),St=Ge.x,Mt=Ge.y,Jt===St&&Dt===Mt&&(St+=1,Mt+=1);var Lr=(Jt-St)/2,br=(Dt-Mt)/2,Dr=Lr*Lr/(yt*yt)+br*br/(Ct*Ct);Dr>1&&(Dr=Math.sqrt(Dr),yt=Dr*yt,Ct=Dr*Ct);var Sn=yt*yt,Dn=Ct*Ct,Yn=(vt===ot?-1:1)*Math.sqrt(Math.abs((Sn*Dn-Sn*br*br-Dn*Lr*Lr)/(Sn*br*br+Dn*Lr*Lr)));xr=Yn*yt*br/Ct+(Jt+St)/2,Pr=Yn*-Ct*Lr/yt+(Dt+Mt)/2,Ie=Math.asin(((Dt-Pr)/Ct).toFixed(9)),qe=Math.asin(((Mt-Pr)/Ct).toFixed(9)),Ie=Jt<xr?Math.PI-Ie:Ie,qe=St<xr?Math.PI-qe:qe,Ie<0&&(Ie=Math.PI*2+Ie),qe<0&&(qe=Math.PI*2+qe),ot&&Ie>qe&&(Ie=Ie-Math.PI*2),!ot&&qe>Ie&&(qe=qe-Math.PI*2)}var Ln=qe-Ie;if(Math.abs(Ln)>ne){var _n=qe,Jn=St,Ii=Mt;qe=Ie+ne*(ot&&qe>Ie?1:-1),St=xr+yt*Math.cos(qe),Mt=Pr+Ct*Math.sin(qe),He=M(St,Mt,yt,Ct,ct,0,ot,Jn,Ii,[qe,_n,xr,Pr])}Ln=qe-Ie;var Qn=Math.cos(Ie),qi=Math.sin(Ie),dn=Math.cos(qe),Si=Math.sin(qe),Zn=Math.tan(Ln/4),ya=4/3*yt*Zn,La=4/3*Ct*Zn,Va=[Jt,Dt],ji=[Jt+ya*qi,Dt-La*Qn],ma=[St+ya*Si,Mt-La*dn],va=[St,Mt];if(ji[0]=2*Va[0]-ji[0],ji[1]=2*Va[1]-ji[1],te)return[ji,ma,va].concat(He);He=[ji,ma,va].concat(He).join().split(",");for(var _a=[],ta=0,sa=He.length;ta<sa;ta++)_a[ta]=ta%2?Wr(He[ta-1],He[ta],de).y:Wr(He[ta],He[ta+1],de).x;return _a},S=function(Jt,Dt){var yt=x(Jt),Ct=Dt&&x(Dt),ct={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},vt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ot=[],St=[],Mt="",te="",ne,de=function(Lr,br,Dr){var Sn,Dn;if(!Lr)return["C",br.x,br.y,br.x,br.y,br.x,br.y];switch(!(Lr[0]in{T:1,Q:1})&&(br.qx=br.qy=null),Lr[0]){case"M":br.X=Lr[1],br.Y=Lr[2];break;case"A":Lr=["C"].concat(M.apply(0,[br.x,br.y].concat(Lr.slice(1))));break;case"S":Dr==="C"||Dr==="S"?(Sn=br.x*2-br.bx,Dn=br.y*2-br.by):(Sn=br.x,Dn=br.y),Lr=["C",Sn,Dn].concat(Lr.slice(1));break;case"T":Dr==="Q"||Dr==="T"?(br.qx=br.x*2-br.qx,br.qy=br.y*2-br.qy):(br.qx=br.x,br.qy=br.y),Lr=["C"].concat(w(br.x,br.y,br.qx,br.qy,Lr[1],Lr[2]));break;case"Q":br.qx=Lr[1],br.qy=Lr[2],Lr=["C"].concat(w(br.x,br.y,Lr[1],Lr[2],Lr[3],Lr[4]));break;case"L":Lr=["C"].concat(C(br.x,br.y,Lr[1],Lr[2]));break;case"H":Lr=["C"].concat(C(br.x,br.y,Lr[1],br.y));break;case"V":Lr=["C"].concat(C(br.x,br.y,br.x,Lr[1]));break;case"Z":Lr=["C"].concat(C(br.x,br.y,br.X,br.Y));break;default:break}return Lr},He=function(Lr,br){if(Lr[br].length>7){Lr[br].shift();for(var Dr=Lr[br];Dr.length;)ot[br]="A",Ct&&(St[br]="A"),Lr.splice(br++,0,["C"].concat(Dr.splice(0,6)));Lr.splice(br,1),ne=Math.max(yt.length,Ct&&Ct.length||0)}},Ge=function(Lr,br,Dr,Sn,Dn){Lr&&br&&Lr[Dn][0]==="M"&&br[Dn][0]!=="M"&&(br.splice(Dn,0,["M",Sn.x,Sn.y]),Dr.bx=0,Dr.by=0,Dr.x=Lr[Dn][1],Dr.y=Lr[Dn][2],ne=Math.max(yt.length,Ct&&Ct.length||0))};ne=Math.max(yt.length,Ct&&Ct.length||0);for(var Ie=0;Ie<ne;Ie++){yt[Ie]&&(Mt=yt[Ie][0]),Mt!=="C"&&(ot[Ie]=Mt,Ie&&(te=ot[Ie-1])),yt[Ie]=de(yt[Ie],ct,te),ot[Ie]!=="A"&&Mt==="C"&&(ot[Ie]="C"),He(yt,Ie),Ct&&(Ct[Ie]&&(Mt=Ct[Ie][0]),Mt!=="C"&&(St[Ie]=Mt,Ie&&(te=St[Ie-1])),Ct[Ie]=de(Ct[Ie],vt,te),St[Ie]!=="A"&&Mt==="C"&&(St[Ie]="C"),He(Ct,Ie)),Ge(yt,Ct,ct,vt,Ie),Ge(Ct,yt,vt,ct,Ie);var qe=yt[Ie],xr=Ct&&Ct[Ie],Pr=qe.length,Wr=Ct&&xr.length;ct.x=qe[Pr-2],ct.y=qe[Pr-1],ct.bx=parseFloat(qe[Pr-4])||ct.x,ct.by=parseFloat(qe[Pr-3])||ct.y,vt.bx=Ct&&(parseFloat(xr[Wr-4])||vt.x),vt.by=Ct&&(parseFloat(xr[Wr-3])||vt.y),vt.x=Ct&&xr[Wr-2],vt.y=Ct&&xr[Wr-1]}return Ct?[yt,Ct]:yt},I=/,?([a-z]),?/gi,B=function(Jt){return Jt.join(",").replace(I,"$1")},N=function(Jt,Dt,yt,Ct,ct){var vt=-3*Dt+9*yt-9*Ct+3*ct,ot=Jt*vt+6*Dt-12*yt+6*Ct;return Jt*ot-3*Dt+3*yt},G=function(Jt,Dt,yt,Ct,ct,vt,ot,St,Mt){Mt===null&&(Mt=1),Mt=Mt>1?1:Mt<0?0:Mt;for(var te=Mt/2,ne=12,de=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],He=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Ge=0,Ie=0;Ie<ne;Ie++){var qe=te*de[Ie]+te,xr=N(qe,Jt,yt,ct,ot),Pr=N(qe,Dt,Ct,vt,St),Wr=xr*xr+Pr*Pr;Ge+=He[Ie]*Math.sqrt(Wr)}return te*Ge},W=function(Jt,Dt,yt,Ct,ct,vt,ot,St){for(var Mt=[],te=[[],[]],ne,de,He,Ge,Ie=0;Ie<2;++Ie){if(Ie===0?(de=6*Jt-12*yt+6*ct,ne=-3*Jt+9*yt-9*ct+3*ot,He=3*yt-3*Jt):(de=6*Dt-12*Ct+6*vt,ne=-3*Dt+9*Ct-9*vt+3*St,He=3*Ct-3*Dt),Math.abs(ne)<1e-12){if(Math.abs(de)<1e-12)continue;Ge=-He/de,Ge>0&&Ge<1&&Mt.push(Ge);continue}var qe=de*de-4*He*ne,xr=Math.sqrt(qe);if(!(qe<0)){var Pr=(-de+xr)/(2*ne);Pr>0&&Pr<1&&Mt.push(Pr);var Wr=(-de-xr)/(2*ne);Wr>0&&Wr<1&&Mt.push(Wr)}}for(var Lr=Mt.length,br=Lr,Dr;Lr--;)Ge=Mt[Lr],Dr=1-Ge,te[0][Lr]=Dr*Dr*Dr*Jt+3*Dr*Dr*Ge*yt+3*Dr*Ge*Ge*ct+Ge*Ge*Ge*ot,te[1][Lr]=Dr*Dr*Dr*Dt+3*Dr*Dr*Ge*Ct+3*Dr*Ge*Ge*vt+Ge*Ge*Ge*St;return te[0][br]=Jt,te[1][br]=Dt,te[0][br+1]=ot,te[1][br+1]=St,te[0].length=te[1].length=br+2,{min:{x:Math.min.apply(0,te[0]),y:Math.min.apply(0,te[1])},max:{x:Math.max.apply(0,te[0]),y:Math.max.apply(0,te[1])}}},$=function(Jt,Dt,yt,Ct,ct,vt,ot,St){if(!(Math.max(Jt,yt)<Math.min(ct,ot)||Math.min(Jt,yt)>Math.max(ct,ot)||Math.max(Dt,Ct)<Math.min(vt,St)||Math.min(Dt,Ct)>Math.max(vt,St))){var Mt=(Jt*Ct-Dt*yt)*(ct-ot)-(Jt-yt)*(ct*St-vt*ot),te=(Jt*Ct-Dt*yt)*(vt-St)-(Dt-Ct)*(ct*St-vt*ot),ne=(Jt-yt)*(vt-St)-(Dt-Ct)*(ct-ot);if(!!ne){var de=Mt/ne,He=te/ne,Ge=+de.toFixed(2),Ie=+He.toFixed(2);if(!(Ge<+Math.min(Jt,yt).toFixed(2)||Ge>+Math.max(Jt,yt).toFixed(2)||Ge<+Math.min(ct,ot).toFixed(2)||Ge>+Math.max(ct,ot).toFixed(2)||Ie<+Math.min(Dt,Ct).toFixed(2)||Ie>+Math.max(Dt,Ct).toFixed(2)||Ie<+Math.min(vt,St).toFixed(2)||Ie>+Math.max(vt,St).toFixed(2)))return{x:de,y:He}}}},H=function(Jt,Dt,yt){return Dt>=Jt.x&&Dt<=Jt.x+Jt.width&&yt>=Jt.y&&yt<=Jt.y+Jt.height},j=function(Jt,Dt,yt,Ct,ct){if(ct)return[["M",+Jt+ +ct,Dt],["l",yt-ct*2,0],["a",ct,ct,0,0,1,ct,ct],["l",0,Ct-ct*2],["a",ct,ct,0,0,1,-ct,ct],["l",ct*2-yt,0],["a",ct,ct,0,0,1,-ct,-ct],["l",0,ct*2-Ct],["a",ct,ct,0,0,1,ct,-ct],["z"]];var vt=[["M",Jt,Dt],["l",yt,0],["l",0,Ct],["l",-yt,0],["z"]];return vt.parsePathArray=B,vt},nt=function(Jt,Dt,yt,Ct){return Jt===null&&(Jt=Dt=yt=Ct=0),Dt===null&&(Dt=Jt.y,yt=Jt.width,Ct=Jt.height,Jt=Jt.x),{x:Jt,y:Dt,width:yt,w:yt,height:Ct,h:Ct,x2:Jt+yt,y2:Dt+Ct,cx:Jt+yt/2,cy:Dt+Ct/2,r1:Math.min(yt,Ct)/2,r2:Math.max(yt,Ct)/2,r0:Math.sqrt(yt*yt+Ct*Ct)/2,path:j(Jt,Dt,yt,Ct),vb:[Jt,Dt,yt,Ct].join(" ")}},rt=function(Jt,Dt){return Jt=nt(Jt),Dt=nt(Dt),H(Dt,Jt.x,Jt.y)||H(Dt,Jt.x2,Jt.y)||H(Dt,Jt.x,Jt.y2)||H(Dt,Jt.x2,Jt.y2)||H(Jt,Dt.x,Dt.y)||H(Jt,Dt.x2,Dt.y)||H(Jt,Dt.x,Dt.y2)||H(Jt,Dt.x2,Dt.y2)||(Jt.x<Dt.x2&&Jt.x>Dt.x||Dt.x<Jt.x2&&Dt.x>Jt.x)&&(Jt.y<Dt.y2&&Jt.y>Dt.y||Dt.y<Jt.y2&&Dt.y>Jt.y)},mt=function(Jt,Dt,yt,Ct,ct,vt,ot,St){(0,c.isArray)(Jt)||(Jt=[Jt,Dt,yt,Ct,ct,vt,ot,St]);var Mt=W.apply(null,Jt);return nt(Mt.min.x,Mt.min.y,Mt.max.x-Mt.min.x,Mt.max.y-Mt.min.y)},Ft=function(Jt,Dt,yt,Ct,ct,vt,ot,St,Mt){var te=1-Mt,ne=Math.pow(te,3),de=Math.pow(te,2),He=Mt*Mt,Ge=He*Mt,Ie=ne*Jt+de*3*Mt*yt+te*3*Mt*Mt*ct+Ge*ot,qe=ne*Dt+de*3*Mt*Ct+te*3*Mt*Mt*vt+Ge*St,xr=Jt+2*Mt*(yt-Jt)+He*(ct-2*yt+Jt),Pr=Dt+2*Mt*(Ct-Dt)+He*(vt-2*Ct+Dt),Wr=yt+2*Mt*(ct-yt)+He*(ot-2*ct+yt),Lr=Ct+2*Mt*(vt-Ct)+He*(St-2*vt+Ct),br=te*Jt+Mt*yt,Dr=te*Dt+Mt*Ct,Sn=te*ct+Mt*ot,Dn=te*vt+Mt*St,Yn=90-Math.atan2(xr-Wr,Pr-Lr)*180/Math.PI;return{x:Ie,y:qe,m:{x:xr,y:Pr},n:{x:Wr,y:Lr},start:{x:br,y:Dr},end:{x:Sn,y:Dn},alpha:Yn}},Gt=function(Jt,Dt,yt){var Ct=mt(Jt),ct=mt(Dt);if(!rt(Ct,ct))return yt?0:[];for(var vt=G.apply(0,Jt),ot=G.apply(0,Dt),St=~~(vt/8),Mt=~~(ot/8),te=[],ne=[],de={},He=yt?0:[],Ge=0;Ge<St+1;Ge++){var Ie=Ft.apply(0,Jt.concat(Ge/St));te.push({x:Ie.x,y:Ie.y,t:Ge/St})}for(var Ge=0;Ge<Mt+1;Ge++){var Ie=Ft.apply(0,Dt.concat(Ge/Mt));ne.push({x:Ie.x,y:Ie.y,t:Ge/Mt})}for(var Ge=0;Ge<St;Ge++)for(var qe=0;qe<Mt;qe++){var xr=te[Ge],Pr=te[Ge+1],Wr=ne[qe],Lr=ne[qe+1],br=Math.abs(Pr.x-xr.x)<.001?"y":"x",Dr=Math.abs(Lr.x-Wr.x)<.001?"y":"x",Sn=$(xr.x,xr.y,Pr.x,Pr.y,Wr.x,Wr.y,Lr.x,Lr.y);if(Sn){if(de[Sn.x.toFixed(4)]===Sn.y.toFixed(4))continue;de[Sn.x.toFixed(4)]=Sn.y.toFixed(4);var Dn=xr.t+Math.abs((Sn[br]-xr[br])/(Pr[br]-xr[br]))*(Pr.t-xr.t),Yn=Wr.t+Math.abs((Sn[Dr]-Wr[Dr])/(Lr[Dr]-Wr[Dr]))*(Lr.t-Wr.t);Dn>=0&&Dn<=1&&Yn>=0&&Yn<=1&&(yt?He+=1:He.push({x:Sn.x,y:Sn.y,t1:Dn,t2:Yn}))}}return He},gt=function(Jt,Dt,yt){Jt=S(Jt),Dt=S(Dt);for(var Ct,ct,vt,ot,St,Mt,te,ne,de,He,Ge=yt?0:[],Ie=0,qe=Jt.length;Ie<qe;Ie++){var xr=Jt[Ie];if(xr[0]==="M")Ct=St=xr[1],ct=Mt=xr[2];else{xr[0]==="C"?(de=[Ct,ct].concat(xr.slice(1)),Ct=de[6],ct=de[7]):(de=[Ct,ct,Ct,ct,St,Mt,St,Mt],Ct=St,ct=Mt);for(var Pr=0,Wr=Dt.length;Pr<Wr;Pr++){var Lr=Dt[Pr];if(Lr[0]==="M")vt=te=Lr[1],ot=ne=Lr[2];else{Lr[0]==="C"?(He=[vt,ot].concat(Lr.slice(1)),vt=He[6],ot=He[7]):(He=[vt,ot,vt,ot,te,ne,te,ne],vt=te,ot=ne);var br=Gt(de,He,yt);if(yt)Ge+=br;else{for(var Dr=0,Sn=br.length;Dr<Sn;Dr++)br[Dr].segment1=Ie,br[Dr].segment2=Pr,br[Dr].bez1=de,br[Dr].bez2=He;Ge=Ge.concat(br)}}}}}return Ge},st=function(Jt,Dt){return gt(Jt,Dt)};function Xt(Jt,Dt){var yt=[],Ct=[];function ct(vt,ot){if(vt.length===1)yt.push(vt[0]),Ct.push(vt[0]);else{for(var St=[],Mt=0;Mt<vt.length-1;Mt++)Mt===0&&yt.push(vt[0]),Mt===vt.length-2&&Ct.push(vt[Mt+1]),St[Mt]=[(1-ot)*vt[Mt][0]+ot*vt[Mt+1][0],(1-ot)*vt[Mt][1]+ot*vt[Mt+1][1]];ct(St,ot)}}return Jt.length&&ct(Jt,Dt),{left:yt,right:Ct.reverse()}}function Q(Jt,Dt,yt){var Ct=[[Jt[1],Jt[2]]];yt=yt||2;var ct=[];Dt[0]==="A"?(Ct.push(Dt[6]),Ct.push(Dt[7])):Dt[0]==="C"?(Ct.push([Dt[1],Dt[2]]),Ct.push([Dt[3],Dt[4]]),Ct.push([Dt[5],Dt[6]])):Dt[0]==="S"||Dt[0]==="Q"?(Ct.push([Dt[1],Dt[2]]),Ct.push([Dt[3],Dt[4]])):Ct.push([Dt[1],Dt[2]]);for(var vt=Ct,ot=1/yt,St=0;St<yt-1;St++){var Mt=ot/(1-ot*St),te=Xt(vt,Mt);ct.push(te.left),vt=te.right}ct.push(vt);var ne=ct.map(function(de){var He=[];return de.length===4&&(He.push("C"),He=He.concat(de[2])),de.length>=3&&(de.length===3&&He.push("Q"),He=He.concat(de[1])),de.length===2&&He.push("L"),He=He.concat(de[de.length-1]),He});return ne}var qt=function(Jt,Dt,yt){if(yt===1)return[[].concat(Jt)];var Ct=[];if(Dt[0]==="L"||Dt[0]==="C"||Dt[0]==="Q")Ct=Ct.concat(Q(Jt,Dt,yt));else{var ct=[].concat(Jt);ct[0]==="M"&&(ct[0]="L");for(var vt=0;vt<=yt-1;vt++)Ct.push(ct)}return Ct},y=function(Jt,Dt){if(Jt.length===1)return Jt;var yt=Jt.length-1,Ct=Dt.length-1,ct=yt/Ct,vt=[];if(Jt.length===1&&Jt[0][0]==="M"){for(var ot=0;ot<Ct-yt;ot++)Jt.push(Jt[0]);return Jt}for(var ot=0;ot<Ct;ot++){var St=Math.floor(ct*ot);vt[St]=(vt[St]||0)+1}var Mt=vt.reduce(function(te,ne,de){return de===yt?te.concat(Jt[yt]):te.concat(qt(Jt[de],Jt[de+1],ne))},[]);return Mt.unshift(Jt[0]),(Dt[Ct]==="Z"||Dt[Ct]==="z")&&Mt.push("Z"),Mt},Yt=function(Jt,Dt){if(Jt.length!==Dt.length)return!1;var yt=!0;return(0,c.each)(Jt,function(Ct,ct){if(Ct!==Dt[ct])return yt=!1,!1}),yt};function K(Jt,Dt,yt){var Ct=null,ct=yt;return Dt<ct&&(ct=Dt,Ct="add"),Jt<ct&&(ct=Jt,Ct="del"),{type:Ct,min:ct}}var ht=function(Jt,Dt){var yt=Jt.length,Ct=Dt.length,ct,vt,ot=0;if(yt===0||Ct===0)return null;for(var St=[],Mt=0;Mt<=yt;Mt++)St[Mt]=[],St[Mt][0]={min:Mt};for(var te=0;te<=Ct;te++)St[0][te]={min:te};for(var Mt=1;Mt<=yt;Mt++){ct=Jt[Mt-1];for(var te=1;te<=Ct;te++){vt=Dt[te-1],Yt(ct,vt)?ot=0:ot=1;var ne=St[Mt-1][te].min+1,de=St[Mt][te-1].min+1,He=St[Mt-1][te-1].min+ot;St[Mt][te]=K(ne,de,He)}}return St},J=function(Jt,Dt){var yt=ht(Jt,Dt),Ct=Jt.length,ct=Dt.length,vt=[],ot=1,St=1;if(yt[Ct][ct].min!==Ct){for(var Mt=1;Mt<=Ct;Mt++){var te=yt[Mt][Mt].min;St=Mt;for(var ne=ot;ne<=ct;ne++)yt[Mt][ne].min<te&&(te=yt[Mt][ne].min,St=ne);ot=St,yt[Mt][ot].type&&vt.push({index:Mt-1,type:yt[Mt][ot].type})}for(var Mt=vt.length-1;Mt>=0;Mt--)ot=vt[Mt].index,vt[Mt].type==="add"?Jt.splice(ot,0,[].concat(Jt[ot])):Jt.splice(ot,1)}Ct=Jt.length;var de=ct-Ct;if(Ct<ct)for(var Mt=0;Mt<de;Mt++)Jt[Ct-1][0]==="z"||Jt[Ct-1][0]==="Z"?Jt.splice(Ct-2,0,Jt[Ct-2]):Jt.push(Jt[Ct-1]),Ct+=1;return Jt};function At(Jt,Dt,yt){for(var Ct=[].concat(Jt),ct,vt=1/(yt+1),ot=Vt(Dt)[0],St=1;St<=yt;St++)vt*=St,ct=Math.floor(Jt.length*vt),ct===0?Ct.unshift([ot[0]*vt+Jt[ct][0]*(1-vt),ot[1]*vt+Jt[ct][1]*(1-vt)]):Ct.splice(ct,0,[ot[0]*vt+Jt[ct][0]*(1-vt),ot[1]*vt+Jt[ct][1]*(1-vt)]);return Ct}function Vt(Jt){var Dt=[];switch(Jt[0]){case"M":Dt.push([Jt[1],Jt[2]]);break;case"L":Dt.push([Jt[1],Jt[2]]);break;case"A":Dt.push([Jt[6],Jt[7]]);break;case"Q":Dt.push([Jt[3],Jt[4]]),Dt.push([Jt[1],Jt[2]]);break;case"T":Dt.push([Jt[1],Jt[2]]);break;case"C":Dt.push([Jt[5],Jt[6]]),Dt.push([Jt[1],Jt[2]]),Dt.push([Jt[3],Jt[4]]);break;case"S":Dt.push([Jt[3],Jt[4]]),Dt.push([Jt[1],Jt[2]]);break;case"H":Dt.push([Jt[1],Jt[1]]);break;case"V":Dt.push([Jt[1],Jt[1]]);break;default:}return Dt}var pt=function(Jt,Dt){if(Jt.length<=1)return Jt;for(var yt,Ct=0;Ct<Dt.length;Ct++)if(Jt[Ct][0]!==Dt[Ct][0])switch(yt=Vt(Jt[Ct]),Dt[Ct][0]){case"M":Jt[Ct]=["M"].concat(yt[0]);break;case"L":Jt[Ct]=["L"].concat(yt[0]);break;case"A":Jt[Ct]=[].concat(Dt[Ct]),Jt[Ct][6]=yt[0][0],Jt[Ct][7]=yt[0][1];break;case"Q":if(yt.length<2)if(Ct>0)yt=At(yt,Jt[Ct-1],1);else{Jt[Ct]=Dt[Ct];break}Jt[Ct]=["Q"].concat(yt.reduce(function(ct,vt){return ct.concat(vt)},[]));break;case"T":Jt[Ct]=["T"].concat(yt[0]);break;case"C":if(yt.length<3)if(Ct>0)yt=At(yt,Jt[Ct-1],2);else{Jt[Ct]=Dt[Ct];break}Jt[Ct]=["C"].concat(yt.reduce(function(ct,vt){return ct.concat(vt)},[]));break;case"S":if(yt.length<2)if(Ct>0)yt=At(yt,Jt[Ct-1],1);else{Jt[Ct]=Dt[Ct];break}Jt[Ct]=["S"].concat(yt.reduce(function(ct,vt){return ct.concat(vt)},[]));break;default:Jt[Ct]=Dt[Ct]}return Jt},Lt=function(){function Jt(Dt,yt){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=Dt,this.name=Dt,this.originalEvent=yt,this.timeStamp=yt.timeStamp}return Jt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},Jt.prototype.stopPropagation=function(){this.propagationStopped=!0},Jt.prototype.toString=function(){var Dt=this.type;return"[Event (type="+Dt+")]"},Jt.prototype.save=function(){},Jt.prototype.restore=function(){},Jt}(),Tt=Lt,kt=v(21362),jt=v(95472),Wt=v(83438),zt=v(91110),bt=v(55535),at=v(41367),ft=v(21429),Pt=v(7165),q=v(91577),ut=v(18092);function Et(Jt,Dt){var yt=Jt.indexOf(Dt);yt!==-1&&Jt.splice(yt,1)}var Nt=typeof window!="undefined"&&typeof window.document!="undefined";function ee(Jt,Dt){if(Jt.isCanvas())return!0;for(var yt=Dt.getParent(),Ct=!1;yt;){if(yt===Jt){Ct=!0;break}yt=yt.getParent()}return Ct}function ge(Jt){return Jt.cfg.visible&&Jt.cfg.capture}var De=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(yt){var Ct=Jt.call(this)||this;Ct.destroyed=!1;var ct=Ct.getDefaultCfg();return Ct.cfg=(0,Pt.default)(ct,yt),Ct}return Dt.prototype.getDefaultCfg=function(){return{}},Dt.prototype.get=function(yt){return this.cfg[yt]},Dt.prototype.set=function(yt,Ct){this.cfg[yt]=Ct},Dt.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},Dt}(jt.default),er=De,Re=v(1517),Ke=v(50669);function hr(Jt,Dt){var yt=[],Ct=Jt[0],ct=Jt[1],vt=Jt[2],ot=Jt[3],St=Jt[4],Mt=Jt[5],te=Jt[6],ne=Jt[7],de=Jt[8],He=Dt[0],Ge=Dt[1],Ie=Dt[2],qe=Dt[3],xr=Dt[4],Pr=Dt[5],Wr=Dt[6],Lr=Dt[7],br=Dt[8];return yt[0]=He*Ct+Ge*ot+Ie*te,yt[1]=He*ct+Ge*St+Ie*ne,yt[2]=He*vt+Ge*Mt+Ie*de,yt[3]=qe*Ct+xr*ot+Pr*te,yt[4]=qe*ct+xr*St+Pr*ne,yt[5]=qe*vt+xr*Mt+Pr*de,yt[6]=Wr*Ct+Lr*ot+br*te,yt[7]=Wr*ct+Lr*St+br*ne,yt[8]=Wr*vt+Lr*Mt+br*de,yt}function Sr(Jt,Dt){var yt=[],Ct=Dt[0],ct=Dt[1];return yt[0]=Jt[0]*Ct+Jt[3]*ct+Jt[6],yt[1]=Jt[1]*Ct+Jt[4]*ct+Jt[7],yt}function Rr(Jt){var Dt=[],yt=Jt[0],Ct=Jt[1],ct=Jt[2],vt=Jt[3],ot=Jt[4],St=Jt[5],Mt=Jt[6],te=Jt[7],ne=Jt[8],de=ne*ot-St*te,He=-ne*vt+St*Mt,Ge=te*vt-ot*Mt,Ie=yt*de+Ct*He+ct*Ge;return Ie?(Ie=1/Ie,Dt[0]=de*Ie,Dt[1]=(-ne*Ct+ct*te)*Ie,Dt[2]=(St*Ct-ct*ot)*Ie,Dt[3]=He*Ie,Dt[4]=(ne*yt-ct*Mt)*Ie,Dt[5]=(-St*yt+ct*vt)*Ie,Dt[6]=Ge*Ie,Dt[7]=(-te*yt+Ct*Mt)*Ie,Dt[8]=(ot*yt-Ct*vt)*Ie,Dt):null}var vr="matrix",en=["zIndex","capture","visible","type"],gn=["repeat"],hn=":",vn="*";function Wn(Jt){for(var Dt=[],yt=0;yt<Jt.length;yt++)(0,c.isArray)(Jt[yt])?Dt.push([].concat(Jt[yt])):Dt.push(Jt[yt]);return Dt}function $r(Jt,Dt){var yt={},Ct=Dt.attrs;for(var ct in Jt)yt[ct]=Ct[ct];return yt}function wi(Jt,Dt){var yt={},Ct=Dt.attr();return(0,c.each)(Jt,function(ct,vt){gn.indexOf(vt)===-1&&!(0,c.isEqual)(Ct[vt],ct)&&(yt[vt]=ct)}),yt}function ci(Jt,Dt){if(Dt.onFrame)return Jt;var yt=Dt.startTime,Ct=Dt.delay,ct=Dt.duration,vt=Object.prototype.hasOwnProperty;return(0,c.each)(Jt,function(ot){yt+Ct<ot.startTime+ot.delay+ot.duration&&ct>ot.delay&&(0,c.each)(Dt.toAttrs,function(St,Mt){vt.call(ot.toAttrs,Mt)&&(delete ot.toAttrs[Mt],delete ot.fromAttrs[Mt])})}),Jt}var oe=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(yt){var Ct=Jt.call(this,yt)||this;Ct.attrs={};var ct=Ct.getDefaultAttrs();return(0,c.mix)(ct,yt.attrs),Ct.attrs=ct,Ct.initAttrs(ct),Ct.initAnimate(),Ct}return Dt.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},Dt.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},Dt.prototype.onCanvasChange=function(yt){},Dt.prototype.initAttrs=function(yt){},Dt.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},Dt.prototype.isGroup=function(){return!1},Dt.prototype.getParent=function(){return this.get("parent")},Dt.prototype.getCanvas=function(){return this.get("canvas")},Dt.prototype.attr=function(){for(var yt,Ct=[],ct=0;ct<arguments.length;ct++)Ct[ct]=arguments[ct];var vt=Ct[0],ot=Ct[1];if(!vt)return this.attrs;if((0,c.isObject)(vt)){for(var St in vt)this.setAttr(St,vt[St]);return this.afterAttrsChange(vt),this}return Ct.length===2?(this.setAttr(vt,ot),this.afterAttrsChange((yt={},yt[vt]=ot,yt)),this):this.attrs[vt]},Dt.prototype.isClipped=function(yt,Ct){var ct=this.getClip();return ct&&!ct.isHit(yt,Ct)},Dt.prototype.setAttr=function(yt,Ct){var ct=this.attrs[yt];ct!==Ct&&(this.attrs[yt]=Ct,this.onAttrChange(yt,Ct,ct))},Dt.prototype.onAttrChange=function(yt,Ct,ct){yt==="matrix"&&this.set("totalMatrix",null)},Dt.prototype.afterAttrsChange=function(yt){this.onCanvasChange("attr")},Dt.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},Dt.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},Dt.prototype.setZIndex=function(yt){this.set("zIndex",yt);var Ct=this.getParent();return Ct&&Ct.sort(),this},Dt.prototype.toFront=function(){var yt=this.getParent();if(!!yt){var Ct=yt.getChildren(),ct=this.get("el"),vt=Ct.indexOf(this);Ct.splice(vt,1),Ct.push(this),this.onCanvasChange("zIndex")}},Dt.prototype.toBack=function(){var yt=this.getParent();if(!!yt){var Ct=yt.getChildren(),ct=this.get("el"),vt=Ct.indexOf(this);Ct.splice(vt,1),Ct.unshift(this),this.onCanvasChange("zIndex")}},Dt.prototype.remove=function(yt){yt===void 0&&(yt=!0);var Ct=this.getParent();Ct?(Et(Ct.getChildren(),this),Ct.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),yt&&this.destroy()},Dt.prototype.resetMatrix=function(){this.attr(vr,this.getDefaultMatrix()),this.onCanvasChange("matrix")},Dt.prototype.getMatrix=function(){return this.attr(vr)},Dt.prototype.setMatrix=function(yt){this.attr(vr,yt),this.onCanvasChange("matrix")},Dt.prototype.getTotalMatrix=function(){var yt=this.get("totalMatrix");if(!yt){var Ct=this.attr("matrix"),ct=this.get("parentMatrix");ct&&Ct?yt=hr(ct,Ct):yt=Ct||ct,this.set("totalMatrix",yt)}return yt},Dt.prototype.applyMatrix=function(yt){var Ct=this.attr("matrix"),ct=null;yt&&Ct?ct=hr(yt,Ct):ct=Ct||yt,this.set("totalMatrix",ct),this.set("parentMatrix",yt)},Dt.prototype.getDefaultMatrix=function(){return null},Dt.prototype.applyToMatrix=function(yt){var Ct=this.attr("matrix");return Ct?Sr(Ct,yt):yt},Dt.prototype.invertFromMatrix=function(yt){var Ct=this.attr("matrix");if(Ct){var ct=Rr(Ct);if(ct)return Sr(ct,yt)}return yt},Dt.prototype.setClip=function(yt){var Ct=this.getCanvas(),ct=null;if(yt){var vt=this.getShapeBase(),ot=(0,c.upperFirst)(yt.type),St=vt[ot];St&&(ct=new St({type:yt.type,isClipShape:!0,attrs:yt.attrs,canvas:Ct}))}return this.set("clipShape",ct),this.onCanvasChange("clip"),ct},Dt.prototype.getClip=function(){var yt=this.cfg.clipShape;return yt||null},Dt.prototype.clone=function(){var yt=this,Ct=this.attrs,ct={};(0,c.each)(Ct,function(St,Mt){(0,c.isArray)(Ct[Mt])?ct[Mt]=Wn(Ct[Mt]):ct[Mt]=Ct[Mt]});var vt=this.constructor,ot=new vt({attrs:ct});return(0,c.each)(en,function(St){ot.set(St,yt.get(St))}),ot},Dt.prototype.destroy=function(){var yt=this.destroyed;yt||(this.attrs={},Jt.prototype.destroy.call(this))},Dt.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},Dt.prototype.animate=function(){for(var yt=[],Ct=0;Ct<arguments.length;Ct++)yt[Ct]=arguments[Ct];this.set("animating",!0);var ct=this.get("timeline");ct||(ct=this.get("canvas").get("timeline"),this.set("timeline",ct));var vt=this.get("animations")||[];ct.timer||ct.initTimer();var ot=yt[0],St=yt[1],Mt=yt[2],te=Mt===void 0?"easeLinear":Mt,ne=yt[3],de=ne===void 0?c.noop:ne,He=yt[4],Ge=He===void 0?0:He,Ie,qe,xr,Pr,Wr;(0,c.isFunction)(ot)?(Ie=ot,ot={}):(0,c.isObject)(ot)&&ot.onFrame&&(Ie=ot.onFrame,qe=ot.repeat),(0,c.isObject)(St)?(Wr=St,St=Wr.duration,te=Wr.easing||"easeLinear",Ge=Wr.delay||0,qe=Wr.repeat||qe||!1,de=Wr.callback||c.noop,xr=Wr.pauseCallback||c.noop,Pr=Wr.resumeCallback||c.noop):((0,c.isNumber)(de)&&(Ge=de,de=null),(0,c.isFunction)(te)?(de=te,te="easeLinear"):te=te||"easeLinear");var Lr=wi(ot,this),br={fromAttrs:$r(Lr,this),toAttrs:Lr,duration:St,easing:te,repeat:qe,callback:de,pauseCallback:xr,resumeCallback:Pr,delay:Ge,startTime:ct.getTime(),id:(0,c.uniqueId)(),onFrame:Ie,pathFormatted:!1};vt.length>0?vt=ci(vt,br):ct.addAnimator(this),vt.push(br),this.set("animations",vt),this.set("_pause",{isPaused:!1})},Dt.prototype.stopAnimate=function(yt){var Ct=this;yt===void 0&&(yt=!0);var ct=this.get("animations");(0,c.each)(ct,function(vt){yt&&(vt.onFrame?Ct.attr(vt.onFrame(1)):Ct.attr(vt.toAttrs)),vt.callback&&vt.callback()}),this.set("animating",!1),this.set("animations",[])},Dt.prototype.pauseAnimate=function(){var yt=this.get("timeline"),Ct=this.get("animations"),ct=yt.getTime();return(0,c.each)(Ct,function(vt){vt._paused=!0,vt._pauseTime=ct,vt.pauseCallback&&vt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:ct}),this},Dt.prototype.resumeAnimate=function(){var yt=this.get("timeline"),Ct=yt.getTime(),ct=this.get("animations"),vt=this.get("_pause").pauseTime;return(0,c.each)(ct,function(ot){ot.startTime=ot.startTime+(Ct-vt),ot._paused=!1,ot._pauseTime=null,ot.resumeCallback&&ot.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",ct),this},Dt.prototype.emitDelegation=function(yt,Ct){var ct=this,vt=Ct.propagationPath,ot=this.getEvents(),St;yt==="mouseenter"?St=Ct.fromShape:yt==="mouseleave"&&(St=Ct.toShape);for(var Mt=function(He){var Ge=vt[He],Ie=Ge.get("name");if(Ie){if((Ge.isGroup()||Ge.isCanvas&&Ge.isCanvas())&&St&&ee(Ge,St))return"break";(0,c.isArray)(Ie)?(0,c.each)(Ie,function(qe){ct.emitDelegateEvent(Ge,qe,Ct)}):te.emitDelegateEvent(Ge,Ie,Ct)}},te=this,ne=0;ne<vt.length;ne++){var de=Mt(ne);if(de==="break")break}},Dt.prototype.emitDelegateEvent=function(yt,Ct,ct){var vt=this.getEvents(),ot=Ct+hn+ct.type;(vt[ot]||vt[vn])&&(ct.name=ot,ct.currentTarget=yt,ct.delegateTarget=this,ct.delegateObject=yt.get("delegateObject"),this.emit(ot,ct))},Dt.prototype.translate=function(yt,Ct){yt===void 0&&(yt=0),Ct===void 0&&(Ct=0);var ct=this.getMatrix(),vt=Ke.transform(ct,[["t",yt,Ct]]);return this.setMatrix(vt),this},Dt.prototype.move=function(yt,Ct){var ct=this.attr("x")||0,vt=this.attr("y")||0;return this.translate(yt-ct,Ct-vt),this},Dt.prototype.moveTo=function(yt,Ct){return this.move(yt,Ct)},Dt.prototype.scale=function(yt,Ct){var ct=this.getMatrix(),vt=Ke.transform(ct,[["s",yt,Ct||yt]]);return this.setMatrix(vt),this},Dt.prototype.rotate=function(yt){var Ct=this.getMatrix(),ct=Ke.transform(Ct,[["r",yt]]);return this.setMatrix(ct),this},Dt.prototype.rotateAtStart=function(yt){var Ct=this.attr(),ct=Ct.x,vt=Ct.y,ot=this.getMatrix(),St=Ke.transform(ot,[["t",-ct,-vt],["r",yt],["t",ct,vt]]);return this.setMatrix(St),this},Dt.prototype.rotateAtPoint=function(yt,Ct,ct){var vt=this.getMatrix(),ot=Ke.transform(vt,[["t",-yt,-Ct],["r",ct],["t",yt,Ct]]);return this.setMatrix(ot),this},Dt}(er),ce=oe,Ee={},Pe="_INDEX";function Fe(Jt){Jt.isGroup()?(Jt.isEntityGroup()||Jt.get("children").length)&&Jt.onCanvasChange("add"):Jt.onCanvasChange("add")}function Ue(Jt,Dt){if(Jt.set("canvas",Dt),Jt.isGroup()){var yt=Jt.get("children");yt.length&&yt.forEach(function(Ct){Ue(Ct,Dt)})}}function Qe(Jt,Dt){if(Jt.set("timeline",Dt),Jt.isGroup()){var yt=Jt.get("children");yt.length&&yt.forEach(function(Ct){Qe(Ct,Dt)})}}function rr(Jt,Dt){var yt=Jt.getChildren();return yt.indexOf(Dt)>=0}function We(Jt,Dt,yt){yt===void 0&&(yt=!0),yt?Dt.destroy():(Dt.set("parent",null),Dt.set("canvas",null)),Et(Jt.getChildren(),Dt)}function fr(Jt){return function(Dt,yt){var Ct=Jt(Dt,yt);return Ct===0?Dt[Pe]-yt[Pe]:Ct}}var fe=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(){return Jt!==null&&Jt.apply(this,arguments)||this}return Dt.prototype.isCanvas=function(){return!1},Dt.prototype.getBBox=function(){var yt=Infinity,Ct=-Infinity,ct=Infinity,vt=-Infinity,ot=[],St=[],Mt=this.getChildren().filter(function(ne){return ne.get("visible")&&(!ne.isGroup()||ne.isGroup()&&ne.getChildren().length>0)});Mt.length>0?((0,q.default)(Mt,function(ne){var de=ne.getBBox();ot.push(de.minX,de.maxX),St.push(de.minY,de.maxY)}),yt=Math.min.apply(null,ot),Ct=Math.max.apply(null,ot),ct=Math.min.apply(null,St),vt=Math.max.apply(null,St)):(yt=0,Ct=0,ct=0,vt=0);var te={x:yt,y:ct,minX:yt,minY:ct,maxX:Ct,maxY:vt,width:Ct-yt,height:vt-ct};return te},Dt.prototype.getCanvasBBox=function(){var yt=Infinity,Ct=-Infinity,ct=Infinity,vt=-Infinity,ot=[],St=[],Mt=this.getChildren().filter(function(ne){return ne.get("visible")&&(!ne.isGroup()||ne.isGroup()&&ne.getChildren().length>0)});Mt.length>0?((0,q.default)(Mt,function(ne){var de=ne.getCanvasBBox();ot.push(de.minX,de.maxX),St.push(de.minY,de.maxY)}),yt=Math.min.apply(null,ot),Ct=Math.max.apply(null,ot),ct=Math.min.apply(null,St),vt=Math.max.apply(null,St)):(yt=0,Ct=0,ct=0,vt=0);var te={x:yt,y:ct,minX:yt,minY:ct,maxX:Ct,maxY:vt,width:Ct-yt,height:vt-ct};return te},Dt.prototype.getDefaultCfg=function(){var yt=Jt.prototype.getDefaultCfg.call(this);return yt.children=[],yt},Dt.prototype.onAttrChange=function(yt,Ct,ct){if(Jt.prototype.onAttrChange.call(this,yt,Ct,ct),yt==="matrix"){var vt=this.getTotalMatrix();this._applyChildrenMarix(vt)}},Dt.prototype.applyMatrix=function(yt){var Ct=this.getTotalMatrix();Jt.prototype.applyMatrix.call(this,yt);var ct=this.getTotalMatrix();ct!==Ct&&this._applyChildrenMarix(ct)},Dt.prototype._applyChildrenMarix=function(yt){var Ct=this.getChildren();(0,q.default)(Ct,function(ct){ct.applyMatrix(yt)})},Dt.prototype.addShape=function(){for(var yt=[],Ct=0;Ct<arguments.length;Ct++)yt[Ct]=arguments[Ct];var ct=yt[0],vt=yt[1];(0,at.default)(ct)?vt=ct:vt.type=ct;var ot=Ee[vt.type];ot||(ot=(0,ut.default)(vt.type),Ee[vt.type]=ot);var St=this.getShapeBase(),Mt=new St[ot](vt);return this.add(Mt),Mt},Dt.prototype.addGroup=function(){for(var yt=[],Ct=0;Ct<arguments.length;Ct++)yt[Ct]=arguments[Ct];var ct=yt[0],vt=yt[1],ot;if((0,zt.default)(ct))vt?ot=new ct(vt):ot=new ct({parent:this});else{var St=ct||{},Mt=this.getGroupBase();ot=new Mt(St)}return this.add(ot),ot},Dt.prototype.getCanvas=function(){var yt;return this.isCanvas()?yt=this:yt=this.get("canvas"),yt},Dt.prototype.getShape=function(yt,Ct,ct){if(!ge(this))return null;var vt=this.getChildren(),ot;if(this.isCanvas())ot=this._findShape(vt,yt,Ct,ct);else{var St=[yt,Ct,1];St=this.invertFromMatrix(St),this.isClipped(St[0],St[1])||(ot=this._findShape(vt,St[0],St[1],ct))}return ot},Dt.prototype._findShape=function(yt,Ct,ct,vt){for(var ot=null,St=yt.length-1;St>=0;St--){var Mt=yt[St];if(ge(Mt)&&(Mt.isGroup()?ot=Mt.getShape(Ct,ct,vt):Mt.isHit(Ct,ct)&&(ot=Mt)),ot)break}return ot},Dt.prototype.add=function(yt){var Ct=this.getCanvas(),ct=this.getChildren(),vt=this.get("timeline"),ot=yt.getParent();ot&&We(ot,yt,!1),yt.set("parent",this),Ct&&Ue(yt,Ct),vt&&Qe(yt,vt),ct.push(yt),Fe(yt),this._applyElementMatrix(yt)},Dt.prototype._applyElementMatrix=function(yt){var Ct=this.getTotalMatrix();Ct&&yt.applyMatrix(Ct)},Dt.prototype.getChildren=function(){return this.get("children")},Dt.prototype.sort=function(){var yt=this.getChildren();(0,q.default)(yt,function(Ct,ct){return Ct[Pe]=ct,Ct}),yt.sort(fr(function(Ct,ct){return Ct.get("zIndex")-ct.get("zIndex")})),this.onCanvasChange("sort")},Dt.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var yt=this.getChildren(),Ct=yt.length-1;Ct>=0;Ct--)yt[Ct].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},Dt.prototype.destroy=function(){this.get("destroyed")||(this.clear(),Jt.prototype.destroy.call(this))},Dt.prototype.getFirst=function(){return this.getChildByIndex(0)},Dt.prototype.getLast=function(){var yt=this.getChildren();return this.getChildByIndex(yt.length-1)},Dt.prototype.getChildByIndex=function(yt){var Ct=this.getChildren();return Ct[yt]},Dt.prototype.getCount=function(){var yt=this.getChildren();return yt.length},Dt.prototype.contain=function(yt){var Ct=this.getChildren();return Ct.indexOf(yt)>-1},Dt.prototype.removeChild=function(yt,Ct){Ct===void 0&&(Ct=!0),this.contain(yt)&&yt.remove(Ct)},Dt.prototype.findAll=function(yt){var Ct=[],ct=this.getChildren();return(0,q.default)(ct,function(vt){yt(vt)&&Ct.push(vt),vt.isGroup()&&(Ct=Ct.concat(vt.findAll(yt)))}),Ct},Dt.prototype.find=function(yt){var Ct=null,ct=this.getChildren();return(0,q.default)(ct,function(vt){if(yt(vt)?Ct=vt:vt.isGroup()&&(Ct=vt.find(yt)),Ct)return!1}),Ct},Dt.prototype.findById=function(yt){return this.find(function(Ct){return Ct.get("id")===yt})},Dt.prototype.findByClassName=function(yt){return this.find(function(Ct){return Ct.get("className")===yt})},Dt.prototype.findAllByName=function(yt){return this.findAll(function(Ct){return Ct.get("name")===yt})},Dt}(ce),re=fe,Rt=v(7802),ie=v(99868),be=v(45257),Oe=v(39751),ze=function(Jt){return["fill","stroke","fillStyle","strokeStyle"].includes(Jt)},ke=function(Jt){return/^[r,R,L,l]{1}[\s]*\(/.test(Jt)},Ze=[1,0,0,0,1,0,0,0,1];function kr(Jt,Dt,yt){var Ct={},ct=Dt.fromAttrs,vt=Dt.toAttrs;if(!Jt.destroyed){var ot;for(var St in vt)if(!(0,c.isEqual)(ct[St],vt[St]))if(St==="path"){var Mt=vt[St],te=ct[St];Mt.length>te.length?(Mt=_(vt[St]),te=_(ct[St]),te=J(te,Mt),te=pt(te,Mt),Dt.fromAttrs.path=te,Dt.toAttrs.path=Mt):Dt.pathFormatted||(Mt=_(vt[St]),te=_(ct[St]),te=pt(te,Mt),Dt.fromAttrs.path=te,Dt.toAttrs.path=Mt,Dt.pathFormatted=!0),Ct[St]=[];for(var ne=0;ne<Mt.length;ne++){for(var de=Mt[ne],He=te[ne],Ge=[],Ie=0;Ie<de.length;Ie++)(0,c.isNumber)(de[Ie])&&He&&(0,c.isNumber)(He[Ie])?(ot=(0,be.Z)(He[Ie],de[Ie]),Ge.push(ot(yt))):Ge.push(de[Ie]);Ct[St].push(Ge)}}else if(St==="matrix"){var qe=(0,Oe.Z)(ct[St]||Ze,vt[St]||Ze),xr=qe(yt);Ct[St]=xr}else ze(St)&&ke(vt[St])?Ct[St]=vt[St]:(0,c.isFunction)(vt[St])||(ot=(0,be.Z)(ct[St],vt[St]),Ct[St]=ot(yt));Jt.attr(Ct)}}function Fr(Jt,Dt,yt){var Ct=Dt.startTime,ct=Dt.delay;if(yt<Ct+ct||Dt._paused)return!1;var vt,ot=Dt.duration,St=Dt.easing;if(yt=yt-Ct-Dt.delay,Dt.repeat)vt=yt%ot/ot,vt=ie[St](vt);else if(vt=yt/ot,vt<1)vt=ie[St](vt);else return Dt.onFrame?Jt.attr(Dt.onFrame(1)):Jt.attr(Dt.toAttrs),!0;if(Dt.onFrame){var Mt=Dt.onFrame(vt);Jt.attr(Mt)}else kr(Jt,Dt,vt);return!1}var jr=function(){function Jt(Dt){this.animators=[],this.current=0,this.timer=null,this.canvas=Dt}return Jt.prototype.initTimer=function(){var Dt=this,yt=!1,Ct,ct,vt;this.timer=Rt.HT(function(ot){if(Dt.current=ot,Dt.animators.length>0){for(var St=Dt.animators.length-1;St>=0;St--){if(Ct=Dt.animators[St],Ct.destroyed){Dt.removeAnimator(St);continue}if(!Ct.isAnimatePaused()){ct=Ct.get("animations");for(var Mt=ct.length-1;Mt>=0;Mt--)vt=ct[Mt],yt=Fr(Ct,vt,ot),yt&&(ct.splice(Mt,1),yt=!1,vt.callback&&vt.callback())}ct.length===0&&Dt.removeAnimator(St)}var te=Dt.canvas.get("autoDraw");te||Dt.canvas.draw()}})},Jt.prototype.addAnimator=function(Dt){this.animators.push(Dt)},Jt.prototype.removeAnimator=function(Dt){this.animators.splice(Dt,1)},Jt.prototype.isAnimating=function(){return!!this.animators.length},Jt.prototype.stop=function(){this.timer&&this.timer.stop()},Jt.prototype.stopAllAnimations=function(Dt){Dt===void 0&&(Dt=!0),this.animators.forEach(function(yt){yt.stopAnimate(Dt)}),this.animators=[],this.canvas.draw()},Jt.prototype.getTime=function(){return this.current},Jt}(),ve=jr,pe=40,Se=0,Xe=":",je=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function tr(Jt,Dt){for(var yt in Jt)if(Jt.hasOwnProperty(yt)&&yt.indexOf(Xe+Dt)>=0)return!0;return!1}function pr(Jt,Dt,yt){yt.name=Dt,yt.target=Jt,yt.currentTarget=Jt,yt.delegateTarget=Jt,Jt.emit(Dt,yt)}function Ar(Jt,Dt,yt){if(yt.bubbles){var Ct=void 0,ct=!1;if(Dt==="mouseenter"?(Ct=yt.fromShape,ct=!0):Dt==="mouseleave"&&(ct=!0,Ct=yt.toShape),Jt.isCanvas()&&ct)return;if(Ct&&ee(Jt,Ct)){yt.bubbles=!1;return}yt.name=Dt,yt.currentTarget=Jt,yt.delegateTarget=Jt,Jt.emit(Dt,yt)}}var Hr=function(){function Jt(Dt){var yt=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Ct){var ct=Ct.type;yt._triggerEvent(ct,Ct)},this._onDocumentMove=function(Ct){var ct=yt.canvas,vt=ct.get("el");if(vt!==Ct.target&&(yt.dragging||yt.currentShape)){var ot=yt._getPointInfo(Ct);yt.dragging&&yt._emitEvent("drag",Ct,ot,yt.draggingShape)}},this._onDocumentMouseUp=function(Ct){var ct=yt.canvas,vt=ct.get("el");if(vt!==Ct.target&&yt.dragging){var ot=yt._getPointInfo(Ct);yt.draggingShape&&yt._emitEvent("drop",Ct,ot,null),yt._emitEvent("dragend",Ct,ot,yt.draggingShape),yt._afterDrag(yt.draggingShape,ot,Ct)}},this.canvas=Dt.canvas}return Jt.prototype.init=function(){this._bindEvents()},Jt.prototype._bindEvents=function(){var Dt=this,yt=this.canvas.get("el");(0,q.default)(je,function(Ct){yt.addEventListener(Ct,Dt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Jt.prototype._clearEvents=function(){var Dt=this,yt=this.canvas.get("el");(0,q.default)(je,function(Ct){yt.removeEventListener(Ct,Dt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Jt.prototype._getEventObj=function(Dt,yt,Ct,ct,vt,ot){var St=new Tt(Dt,yt);return St.fromShape=vt,St.toShape=ot,St.x=Ct.x,St.y=Ct.y,St.clientX=Ct.clientX,St.clientY=Ct.clientY,St.propagationPath.push(ct),St},Jt.prototype._getShape=function(Dt,yt){return this.canvas.getShape(Dt.x,Dt.y,yt)},Jt.prototype._getPointInfo=function(Dt){var yt=this.canvas,Ct=yt.getClientByEvent(Dt),ct=yt.getPointByEvent(Dt);return{x:ct.x,y:ct.y,clientX:Ct.x,clientY:Ct.y}},Jt.prototype._triggerEvent=function(Dt,yt){var Ct=this._getPointInfo(yt),ct=this._getShape(Ct,yt),vt=this["_on"+Dt],ot=!1;if(vt)vt.call(this,Ct,ct,yt);else{var St=this.currentShape;Dt==="mouseenter"||Dt==="dragenter"||Dt==="mouseover"?(this._emitEvent(Dt,yt,Ct,null,null,ct),ct&&this._emitEvent(Dt,yt,Ct,ct,null,ct),Dt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",yt,Ct,null)):Dt==="mouseleave"||Dt==="dragleave"||Dt==="mouseout"?(ot=!0,St&&this._emitEvent(Dt,yt,Ct,St,St,null),this._emitEvent(Dt,yt,Ct,null,St,null),Dt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",yt,Ct,null)):this._emitEvent(Dt,yt,Ct,ct,null,null)}if(ot||(this.currentShape=ct),ct&&!ct.get("destroyed")){var Mt=this.canvas,te=Mt.get("el");te.style.cursor=ct.attr("cursor")||Mt.get("cursor")}},Jt.prototype._onmousedown=function(Dt,yt,Ct){Ct.button===Se&&(this.mousedownShape=yt,this.mousedownPoint=Dt,this.mousedownTimeStamp=Ct.timeStamp),this._emitEvent("mousedown",Ct,Dt,yt,null,null)},Jt.prototype._emitMouseoverEvents=function(Dt,yt,Ct,ct){var vt=this.canvas.get("el");Ct!==ct&&(Ct&&(this._emitEvent("mouseout",Dt,yt,Ct,Ct,ct),this._emitEvent("mouseleave",Dt,yt,Ct,Ct,ct),(!ct||ct.get("destroyed"))&&(vt.style.cursor=this.canvas.get("cursor"))),ct&&(this._emitEvent("mouseover",Dt,yt,ct,Ct,ct),this._emitEvent("mouseenter",Dt,yt,ct,Ct,ct)))},Jt.prototype._emitDragoverEvents=function(Dt,yt,Ct,ct,vt){ct?(ct!==Ct&&(Ct&&this._emitEvent("dragleave",Dt,yt,Ct,Ct,ct),this._emitEvent("dragenter",Dt,yt,ct,Ct,ct)),vt||this._emitEvent("dragover",Dt,yt,ct)):Ct&&this._emitEvent("dragleave",Dt,yt,Ct,Ct,ct),vt&&this._emitEvent("dragover",Dt,yt,ct)},Jt.prototype._afterDrag=function(Dt,yt,Ct){Dt&&(Dt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var ct=this._getShape(yt,Ct);ct!==Dt&&this._emitMouseoverEvents(Ct,yt,Dt,ct),this.currentShape=ct},Jt.prototype._onmouseup=function(Dt,yt,Ct){if(Ct.button===Se){var ct=this.draggingShape;this.dragging?(ct&&this._emitEvent("drop",Ct,Dt,yt),this._emitEvent("dragend",Ct,Dt,ct),this._afterDrag(ct,Dt,Ct)):(this._emitEvent("mouseup",Ct,Dt,yt),yt===this.mousedownShape&&this._emitEvent("click",Ct,Dt,yt),this.mousedownShape=null,this.mousedownPoint=null)}},Jt.prototype._ondragover=function(Dt,yt,Ct){Ct.preventDefault();var ct=this.currentShape;this._emitDragoverEvents(Ct,Dt,ct,yt,!0)},Jt.prototype._onmousemove=function(Dt,yt,Ct){var ct=this.canvas,vt=this.currentShape,ot=this.draggingShape;if(this.dragging)ot&&this._emitDragoverEvents(Ct,Dt,vt,yt,!1),this._emitEvent("drag",Ct,Dt,ot);else{var St=this.mousedownPoint;if(St){var Mt=this.mousedownShape,te=Ct.timeStamp,ne=te-this.mousedownTimeStamp,de=St.clientX-Dt.clientX,He=St.clientY-Dt.clientY,Ge=de*de+He*He;ne>120||Ge>pe?Mt&&Mt.get("draggable")?(ot=this.mousedownShape,ot.set("capture",!1),this.draggingShape=ot,this.dragging=!0,this._emitEvent("dragstart",Ct,Dt,ot),this.mousedownShape=null,this.mousedownPoint=null):!Mt&&ct.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Ct,Dt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Ct,Dt,vt,yt),this._emitEvent("mousemove",Ct,Dt,yt)):(this._emitMouseoverEvents(Ct,Dt,vt,yt),this._emitEvent("mousemove",Ct,Dt,yt))}else this._emitMouseoverEvents(Ct,Dt,vt,yt),this._emitEvent("mousemove",Ct,Dt,yt)}},Jt.prototype._emitEvent=function(Dt,yt,Ct,ct,vt,ot){var St=this._getEventObj(Dt,yt,Ct,ct,vt,ot);if(ct){St.shape=ct,pr(ct,Dt,St);for(var Mt=ct.getParent();Mt;)Mt.emitDelegation(Dt,St),St.propagationStopped||Ar(Mt,Dt,St),St.propagationPath.push(Mt),Mt=Mt.getParent()}else{var te=this.canvas;pr(te,Dt,St)}},Jt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Jt}(),Br=Hr,Vr="px",Tn=(0,Re.detect)(),Pn=Tn&&Tn.name==="firefox",ni=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(yt){var Ct=Jt.call(this,yt)||this;return Ct.initContainer(),Ct.initDom(),Ct.initEvents(),Ct.initTimeline(),Ct}return Dt.prototype.getDefaultCfg=function(){var yt=Jt.prototype.getDefaultCfg.call(this);return yt.cursor="default",yt.supportCSSTransform=!1,yt},Dt.prototype.initContainer=function(){var yt=this.get("container");(0,bt.default)(yt)&&(yt=document.getElementById(yt),this.set("container",yt))},Dt.prototype.initDom=function(){var yt=this.createDom();this.set("el",yt);var Ct=this.get("container");Ct.appendChild(yt),this.setDOMSize(this.get("width"),this.get("height"))},Dt.prototype.initEvents=function(){var yt=new Br({canvas:this});yt.init(),this.set("eventController",yt)},Dt.prototype.initTimeline=function(){var yt=new ve(this);this.set("timeline",yt)},Dt.prototype.setDOMSize=function(yt,Ct){var ct=this.get("el");Nt&&(ct.style.width=yt+Vr,ct.style.height=Ct+Vr)},Dt.prototype.changeSize=function(yt,Ct){this.setDOMSize(yt,Ct),this.set("width",yt),this.set("height",Ct),this.onCanvasChange("changeSize")},Dt.prototype.getRenderer=function(){return this.get("renderer")},Dt.prototype.getCursor=function(){return this.get("cursor")},Dt.prototype.setCursor=function(yt){this.set("cursor",yt);var Ct=this.get("el");Nt&&Ct&&(Ct.style.cursor=yt)},Dt.prototype.getPointByEvent=function(yt){var Ct=this.get("supportCSSTransform");if(Ct){if(Pn&&!(0,Wt.default)(yt.layerX)&&yt.layerX!==yt.offsetX)return{x:yt.layerX,y:yt.layerY};if(!(0,Wt.default)(yt.offsetX))return{x:yt.offsetX,y:yt.offsetY}}var ct=this.getClientByEvent(yt),vt=ct.x,ot=ct.y;return this.getPointByClient(vt,ot)},Dt.prototype.getClientByEvent=function(yt){var Ct=yt;return yt.touches&&(yt.type==="touchend"?Ct=yt.changedTouches[0]:Ct=yt.touches[0]),{x:Ct.clientX,y:Ct.clientY}},Dt.prototype.getPointByClient=function(yt,Ct){var ct=this.get("el"),vt=ct.getBoundingClientRect();return{x:yt-vt.left,y:Ct-vt.top}},Dt.prototype.getClientByPoint=function(yt,Ct){var ct=this.get("el"),vt=ct.getBoundingClientRect();return{x:yt+vt.left,y:Ct+vt.top}},Dt.prototype.draw=function(){},Dt.prototype.removeDom=function(){var yt=this.get("el");yt.parentNode.removeChild(yt)},Dt.prototype.clearEvents=function(){var yt=this.get("eventController");yt.destroy()},Dt.prototype.isCanvas=function(){return!0},Dt.prototype.getParent=function(){return null},Dt.prototype.destroy=function(){var yt=this.get("timeline");this.get("destroyed")||(this.clear(),yt&&yt.stop(),this.clearEvents(),this.removeDom(),Jt.prototype.destroy.call(this))},Dt}(re),On=ni,si=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(){return Jt!==null&&Jt.apply(this,arguments)||this}return Dt.prototype.isGroup=function(){return!0},Dt.prototype.isEntityGroup=function(){return!1},Dt.prototype.clone=function(){for(var yt=Jt.prototype.clone.call(this),Ct=this.getChildren(),ct=0;ct<Ct.length;ct++){var vt=Ct[ct];yt.add(vt.clone())}return yt},Dt}(re),zn=si,Ti=function(Jt){(0,kt.__extends)(Dt,Jt);function Dt(yt){return Jt.call(this,yt)||this}return Dt.prototype._isInBBox=function(yt,Ct){var ct=this.getBBox();return ct.minX<=yt&&ct.maxX>=yt&&ct.minY<=Ct&&ct.maxY>=Ct},Dt.prototype.afterAttrsChange=function(yt){Jt.prototype.afterAttrsChange.call(this,yt),this.clearCacheBBox()},Dt.prototype.getBBox=function(){var yt=this.get("bbox");return yt||(yt=this.calculateBBox(),this.set("bbox",yt)),yt},Dt.prototype.getCanvasBBox=function(){var yt=this.get("canvasBox");return yt||(yt=this.calculateCanvasBBox(),this.set("canvasBox",yt)),yt},Dt.prototype.applyMatrix=function(yt){Jt.prototype.applyMatrix.call(this,yt),this.set("canvasBox",null)},Dt.prototype.calculateCanvasBBox=function(){var yt=this.getBBox(),Ct=this.getTotalMatrix(),ct=yt.minX,vt=yt.minY,ot=yt.maxX,St=yt.maxY;if(Ct){var Mt=Sr(Ct,[yt.minX,yt.minY]),te=Sr(Ct,[yt.maxX,yt.minY]),ne=Sr(Ct,[yt.minX,yt.maxY]),de=Sr(Ct,[yt.maxX,yt.maxY]);ct=Math.min(Mt[0],te[0],ne[0],de[0]),ot=Math.max(Mt[0],te[0],ne[0],de[0]),vt=Math.min(Mt[1],te[1],ne[1],de[1]),St=Math.max(Mt[1],te[1],ne[1],de[1])}var He=this.attrs;if(He.shadowColor){var Ge=He.shadowBlur,Ie=Ge===void 0?0:Ge,qe=He.shadowOffsetX,xr=qe===void 0?0:qe,Pr=He.shadowOffsetY,Wr=Pr===void 0?0:Pr,Lr=ct-Ie+xr,br=ot+Ie+xr,Dr=vt-Ie+Wr,Sn=St+Ie+Wr;ct=Math.min(ct,Lr),ot=Math.max(ot,br),vt=Math.min(vt,Dr),St=Math.max(St,Sn)}return{x:ct,y:vt,minX:ct,minY:vt,maxX:ot,maxY:St,width:ot-ct,height:St-vt}},Dt.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},Dt.prototype.isClipShape=function(){return this.get("isClipShape")},Dt.prototype.isInShape=function(yt,Ct){return!1},Dt.prototype.isOnlyHitBox=function(){return!1},Dt.prototype.isHit=function(yt,Ct){var ct=this.get("startArrowShape"),vt=this.get("endArrowShape"),ot=[yt,Ct,1];ot=this.invertFromMatrix(ot);var St=ot[0],Mt=ot[1],te=this._isInBBox(St,Mt);return this.isOnlyHitBox()?te:!!(te&&!this.isClipped(St,Mt)&&(this.isInShape(St,Mt)||ct&&ct.isHit(St,Mt)||vt&&vt.isHit(St,Mt)))},Dt}(ce),Hn=Ti,Un=v(43479),Ri=Un.version},36102:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d){var c=d.attr(),F=c.x,L=c.y,O=c.r;return{x:F-O,y:L-O,width:O*2,height:O*2}}T.default=v},20545:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d){var c=d.attr(),F=c.x,L=c.y,O=c.rx,_=c.ry;return{x:F-O,y:L-_,width:O*2,height:_*2}}T.default=v},46479:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(76541);T.b=c.getMethod;var F=v(17349),L=v(36102),O=v(78803),_=v(53337),P=v(45861),A=v(61188),x=v(49794),C=v(20545);c.register("rect",F.default),c.register("image",F.default),c.register("circle",L.default),c.register("marker",L.default),c.register("polyline",O.default),c.register("polygon",_.default),c.register("text",P.default),c.register("path",A.default),c.register("line",x.default),c.register("ellipse",C.default)},49794:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(90923);function c(F){var L=F.attr(),O=L.x1,_=L.y1,P=L.x2,A=L.y2,x=Math.min(O,P),C=Math.max(O,P),w=Math.min(_,A),M=Math.max(_,A),S={minX:x,maxX:C,minY:w,maxY:M};return S=d.mergeArrowBBox(F,S),{x:S.minX,y:S.minY,width:S.maxX-S.minX,height:S.maxY-S.minY}}T.default=c},61188:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(63308),c=v(84104),F=v(93695),L=v(36021),O=v(47203),_=v(90923);function P(C,w){for(var M=[],S=[],I=[],B=0;B<C.length;B++){var N=C[B],G=N.currentPoint,W=N.params,$=N.prePoint,H=void 0;switch(N.command){case"Q":H=d.default.box($[0],$[1],W[1],W[2],W[3],W[4]);break;case"C":H=c.default.box($[0],$[1],W[1],W[2],W[3],W[4],W[5],W[6]);break;case"A":var j=N.arcParams;H=F.default.box(j.cx,j.cy,j.rx,j.ry,j.xRotation,j.startAngle,j.endAngle);break;default:M.push(G[0]),S.push(G[1]);break}H&&(N.box=H,M.push(H.x,H.x+H.width),S.push(H.y,H.y+H.height)),w&&(N.command==="L"||N.command==="M")&&N.prePoint&&N.nextPoint&&I.push(N)}M=M.filter(function(gt){return!Number.isNaN(gt)}),S=S.filter(function(gt){return!Number.isNaN(gt)});var nt=Math.min.apply(null,M),rt=Math.min.apply(null,S),mt=Math.max.apply(null,M),Ft=Math.max.apply(null,S);if(I.length===0)return{x:nt,y:rt,width:mt-nt,height:Ft-rt};for(var B=0;B<I.length;B++){var N=I[B],G=N.currentPoint,Gt=void 0;G[0]===nt?(Gt=A(N,w),nt=nt-Gt.xExtra):G[0]===mt&&(Gt=A(N,w),mt=mt+Gt.xExtra),G[1]===rt?(Gt=A(N,w),rt=rt-Gt.yExtra):G[1]===Ft&&(Gt=A(N,w),Ft=Ft+Gt.yExtra)}return{x:nt,y:rt,width:mt-nt,height:Ft-rt}}function A(C,w){var M=C.prePoint,S=C.currentPoint,I=C.nextPoint,B=Math.pow(S[0]-M[0],2)+Math.pow(S[1]-M[1],2),N=Math.pow(S[0]-I[0],2)+Math.pow(S[1]-I[1],2),G=Math.pow(M[0]-I[0],2)+Math.pow(M[1]-I[1],2),W=Math.acos((B+N-G)/(2*Math.sqrt(B)*Math.sqrt(N)));if(!W||Math.sin(W)===0||O.default(W,0))return{xExtra:0,yExtra:0};var $=Math.abs(Math.atan2(I[1]-S[1],I[0]-S[0])),H=Math.abs(Math.atan2(I[0]-S[0],I[1]-S[1]));$=$>Math.PI/2?Math.PI-$:$,H=H>Math.PI/2?Math.PI-H:H;var j={xExtra:Math.cos(W/2-$)*(w/2*(1/Math.sin(W/2)))-w/2||0,yExtra:Math.cos(H-W/2)*(w/2*(1/Math.sin(W/2)))-w/2||0};return j}function x(C){var w=C.attr(),M=w.path,S=w.stroke,I=S?w.lineWidth:0,B=C.get("segments")||L.default(M),N=P(B,I),G=N.x,W=N.y,$=N.width,H=N.height,j={minX:G,minY:W,maxX:G+$,maxY:W+H};return j=_.mergeArrowBBox(C,j),{x:j.minX,y:j.minY,width:j.maxX-j.minX,height:j.maxY-j.minY}}T.default=x},53337:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195);function c(F){for(var L=F.attr(),O=L.points,_=[],P=[],A=0;A<O.length;A++){var x=O[A];_.push(x[0]),P.push(x[1])}return d.getBBoxByArray(_,P)}T.default=c},78803:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195),c=v(90923);function F(L){for(var O=L.attr(),_=O.points,P=[],A=[],x=0;x<_.length;x++){var C=_[x];P.push(C[0]),A.push(C[1])}var w=d.getBBoxByArray(P,A),M=w.x,S=w.y,I=w.width,B=w.height,N={minX:M,minY:S,maxX:M+I,maxY:S+B};return N=c.mergeArrowBBox(L,N),{x:N.minX,y:N.minY,width:N.maxX-N.minX,height:N.maxY-N.minY}}T.default=F},17349:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d){var c=d.attr(),F=c.x,L=c.y,O=c.width,_=c.height;return{x:F,y:L,width:O,height:_}}T.default=v},76541:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=new Map;function d(F,L){v.set(F,L)}T.register=d;function c(F){return v.get(F)}T.getMethod=c},45861:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(79343);function c(F){var L=F.attr(),O=L.x,_=L.y,P=L.text,A=L.fontSize,x=L.lineHeight,C=L.font;C||(C=d.assembleFont(L));var w=d.getTextWidth(P,C),M;if(!w)M={x:O,y:_,width:0,height:0};else{var S=L.textAlign,I=L.textBaseline,B=d.getTextHeight(P,A,x),N={x:O,y:_-B};S&&(S==="end"||S==="right"?N.x-=w:S==="center"&&(N.x-=w/2)),I&&(I==="top"?N.y+=B:I==="middle"&&(N.y+=B/2)),M={x:N.x,y:N.y,width:w,height:B}}return M}T.default=c},90923:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(c,F){return!c||!F?c||F:{minX:Math.min(c.minX,F.minX),minY:Math.min(c.minY,F.minY),maxX:Math.max(c.maxX,F.maxX),maxY:Math.max(c.maxY,F.maxY)}}T.mergeBBox=v;function d(c,F){var L=c.get("startArrowShape"),O=c.get("endArrowShape"),_=null,P=null;return L&&(_=L.getCanvasBBox(),F=v(F,_)),O&&(P=O.getCanvasBBox(),F=v(F,P)),F}T.mergeArrowBBox=d},58992:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(){function d(c,F){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=c,this.name=c,this.originalEvent=F,this.timeStamp=F.timeStamp}return d.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},d.prototype.stopPropagation=function(){this.propagationStopped=!0},d.prototype.toString=function(){var c=this.type;return"[Event (type="+c+")]"},d.prototype.save=function(){},d.prototype.restore=function(){},d}();T.default=v},39058:function(xt,T){"use strict";var v;v={value:!0}},51271:function(xt,T){"use strict";Object.defineProperty(T,"X",{value:!0})},27202:function(xt,T){"use strict";var v;v={value:!0};function d(L,O){var _=[],P=L[0],A=L[1],x=L[2],C=L[3],w=L[4],M=L[5],S=L[6],I=L[7],B=L[8],N=O[0],G=O[1],W=O[2],$=O[3],H=O[4],j=O[5],nt=O[6],rt=O[7],mt=O[8];return _[0]=N*P+G*C+W*S,_[1]=N*A+G*w+W*I,_[2]=N*x+G*M+W*B,_[3]=$*P+H*C+j*S,_[4]=$*A+H*w+j*I,_[5]=$*x+H*M+j*B,_[6]=nt*P+rt*C+mt*S,_[7]=nt*A+rt*w+mt*I,_[8]=nt*x+rt*M+mt*B,_}v=d;function c(L,O){var _=[],P=O[0],A=O[1];return _[0]=L[0]*P+L[3]*A+L[6],_[1]=L[1]*P+L[4]*A+L[7],_}T.rG=c;function F(L){var O=[],_=L[0],P=L[1],A=L[2],x=L[3],C=L[4],w=L[5],M=L[6],S=L[7],I=L[8],B=I*C-w*S,N=-I*x+w*M,G=S*x-C*M,W=_*B+P*N+A*G;return W?(W=1/W,O[0]=B*W,O[1]=(-I*P+A*S)*W,O[2]=(w*P-A*C)*W,O[3]=N*W,O[4]=(I*_-A*M)*W,O[5]=(-w*_+A*x)*W,O[6]=G*W,O[7]=(-S*_+P*M)*W,O[8]=(C*_-P*x)*W,O):null}T.U_=F},29423:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=null;function d(){if(!v){var c=document.createElement("canvas");c.width=1,c.height=1,v=c.getContext("2d")}return v}T.getOffScreenContext=d},79343:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(34668),c=v(29423);function F(P,A,x){var C=1;if(d.isString(P)&&(C=P.split(`
`).length),C>1){var w=L(A,x);return A*C+w*(C-1)}return A}T.getTextHeight=F;function L(P,A){return A?A-P:P*.14}T.getLineSpaceing=L;function O(P,A){var x=c.getOffScreenContext(),C=0;if(d.isNil(P)||P==="")return C;if(x.save(),x.font=A,d.isString(P)&&P.includes(`
`)){var w=P.split(`
`);d.each(w,function(M){var S=x.measureText(M).width;C<S&&(C=S)})}else C=x.measureText(P).width;return x.restore(),C}T.getTextWidth=O;function _(P){var A=P.fontSize,x=P.fontFamily,C=P.fontWeight,w=P.fontStyle,M=P.fontVariant;return[w,M,C,A+"px",x].join(" ").trim()}T.assembleFont=_},34668:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function d(M,S){var I=M.indexOf(S);I!==-1&&M.splice(I,1)}T.removeFromArray=d,T.isBrowser=typeof window!="undefined"&&typeof window.document!="undefined";var c=v(83438);T.isNil=c.default;var F=v(91110);T.isFunction=F.default;var L=v(55535);T.isString=L.default;var O=v(41367);T.isObject=O.default;var _=v(21429);T.isArray=_.default;var P=v(7165);T.mix=P.default;var A=v(91577);T.each=A.default;var x=v(18092);T.upperFirst=x.default;function C(M,S){if(M.isCanvas())return!0;for(var I=S.getParent(),B=!1;I;){if(I===M){B=!0;break}I=I.getParent()}return B}T.isParent=C;function w(M){return M.cfg.visible&&M.cfg.capture}T.isAllowCapture=w},43479:function(xt){"use strict";xt.exports=JSON.parse('{"name":"@antv/g-base","version":"0.4.7","description":"A common util collection for antv projects","main":"lib/index.js","module":"esm/index.js","types":"lib/index.d.ts","files":["package.json","esm","lib","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","clean":"rm -rf esm lib","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/util.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/util/issues"},"devDependencies":{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},"homepage":"https://github.com/antvis/util#readme","dependencies":{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},"__npminstall_done":true,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a","_from":"@antv/g-base@0.4.7","_resolved":"https://registry.nlark.com/@antv/g-base/download/@antv/g-base-0.4.7.tgz"}')},32382:function(xt,T,v){"use strict";var d=v(21362),c=v(95472),F=v(64753),L=function(O){(0,d.__extends)(_,O);function _(P){var A=O.call(this)||this;A.destroyed=!1;var x=A.getDefaultCfg();return A.cfg=(0,F.CD)(x,P),A}return _.prototype.getDefaultCfg=function(){return{}},_.prototype.get=function(P){return this.cfg[P]},_.prototype.set=function(P,A){this.cfg[P]=A},_.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},_}(c.default);T.Z=L},23051:function(xt,T,v){"use strict";v.d(T,{Z:function(){return y}});var d=v(21362),c=v(1517),F=v(84282),L=v(64753),O=v(26169),_=v(7802),P=v(99868),A=v(45257),x=v(39751),C=v(41489),w=function(Yt){return["fill","stroke","fillStyle","strokeStyle"].includes(Yt)},M=function(Yt){return/^[r,R,L,l]{1}[\s]*\(/.test(Yt)},S=[1,0,0,0,1,0,0,0,1];function I(Yt,K,ht){var J={},At=K.fromAttrs,Vt=K.toAttrs;if(!Yt.destroyed){var pt;for(var Lt in Vt)if(!(0,O.isEqual)(At[Lt],Vt[Lt]))if(Lt==="path"){var Tt=Vt[Lt],kt=At[Lt];Tt.length>kt.length?(Tt=C.parsePathString(Vt[Lt]),kt=C.parsePathString(At[Lt]),kt=C.fillPathByDiff(kt,Tt),kt=C.formatPath(kt,Tt),K.fromAttrs.path=kt,K.toAttrs.path=Tt):K.pathFormatted||(Tt=C.parsePathString(Vt[Lt]),kt=C.parsePathString(At[Lt]),kt=C.formatPath(kt,Tt),K.fromAttrs.path=kt,K.toAttrs.path=Tt,K.pathFormatted=!0),J[Lt]=[];for(var jt=0;jt<Tt.length;jt++){for(var Wt=Tt[jt],zt=kt[jt],bt=[],at=0;at<Wt.length;at++)(0,O.isNumber)(Wt[at])&&zt&&(0,O.isNumber)(zt[at])?(pt=(0,A.Z)(zt[at],Wt[at]),bt.push(pt(ht))):bt.push(Wt[at]);J[Lt].push(bt)}}else if(Lt==="matrix"){var ft=(0,x.Z)(At[Lt]||S,Vt[Lt]||S),Pt=ft(ht);J[Lt]=Pt}else w(Lt)&&M(Vt[Lt])?J[Lt]=Vt[Lt]:(0,O.isFunction)(Vt[Lt])||(pt=(0,A.Z)(At[Lt],Vt[Lt]),J[Lt]=pt(ht));Yt.attr(J)}}function B(Yt,K,ht){var J=K.startTime,At=K.delay;if(ht<J+At||K._paused)return!1;var Vt,pt=K.duration,Lt=K.easing;if(ht=ht-J-K.delay,K.repeat)Vt=ht%pt/pt,Vt=P[Lt](Vt);else if(Vt=ht/pt,Vt<1)Vt=P[Lt](Vt);else return K.onFrame?Yt.attr(K.onFrame(1)):Yt.attr(K.toAttrs),!0;if(K.onFrame){var Tt=K.onFrame(Vt);Yt.attr(Tt)}else I(Yt,K,Vt);return!1}var N=function(){function Yt(K){this.animators=[],this.current=0,this.timer=null,this.canvas=K}return Yt.prototype.initTimer=function(){var K=this,ht=!1,J,At,Vt;this.timer=_.HT(function(pt){if(K.current=pt,K.animators.length>0){for(var Lt=K.animators.length-1;Lt>=0;Lt--){if(J=K.animators[Lt],J.destroyed){K.removeAnimator(Lt);continue}if(!J.isAnimatePaused()){At=J.get("animations");for(var Tt=At.length-1;Tt>=0;Tt--)Vt=At[Tt],ht=B(J,Vt,pt),ht&&(At.splice(Tt,1),ht=!1,Vt.callback&&Vt.callback())}At.length===0&&K.removeAnimator(Lt)}var kt=K.canvas.get("autoDraw");kt||K.canvas.draw()}})},Yt.prototype.addAnimator=function(K){this.animators.push(K)},Yt.prototype.removeAnimator=function(K){this.animators.splice(K,1)},Yt.prototype.isAnimating=function(){return!!this.animators.length},Yt.prototype.stop=function(){this.timer&&this.timer.stop()},Yt.prototype.stopAllAnimations=function(K){K===void 0&&(K=!0),this.animators.forEach(function(ht){ht.stopAnimate(K)}),this.animators=[],this.canvas.draw()},Yt.prototype.getTime=function(){return this.current},Yt}(),G=N,W=v(84443),$=40,H=0,j=":",nt=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function rt(Yt,K){for(var ht in Yt)if(Yt.hasOwnProperty(ht)&&ht.indexOf(j+K)>=0)return!0;return!1}function mt(Yt,K,ht){ht.name=K,ht.target=Yt,ht.currentTarget=Yt,ht.delegateTarget=Yt,Yt.emit(K,ht)}function Ft(Yt,K,ht){if(ht.bubbles){var J=void 0,At=!1;if(K==="mouseenter"?(J=ht.fromShape,At=!0):K==="mouseleave"&&(At=!0,J=ht.toShape),Yt.isCanvas()&&At)return;if(J&&(0,L.UY)(Yt,J)){ht.bubbles=!1;return}ht.name=K,ht.currentTarget=Yt,ht.delegateTarget=Yt,Yt.emit(K,ht)}}var Gt=function(){function Yt(K){var ht=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(J){var At=J.type;ht._triggerEvent(At,J)},this._onDocumentMove=function(J){var At=ht.canvas,Vt=At.get("el");if(Vt!==J.target&&(ht.dragging||ht.currentShape)){var pt=ht._getPointInfo(J);ht.dragging&&ht._emitEvent("drag",J,pt,ht.draggingShape)}},this._onDocumentMouseUp=function(J){var At=ht.canvas,Vt=At.get("el");if(Vt!==J.target&&ht.dragging){var pt=ht._getPointInfo(J);ht.draggingShape&&ht._emitEvent("drop",J,pt,null),ht._emitEvent("dragend",J,pt,ht.draggingShape),ht._afterDrag(ht.draggingShape,pt,J)}},this.canvas=K.canvas}return Yt.prototype.init=function(){this._bindEvents()},Yt.prototype._bindEvents=function(){var K=this,ht=this.canvas.get("el");(0,L.S6)(nt,function(J){ht.addEventListener(J,K._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},Yt.prototype._clearEvents=function(){var K=this,ht=this.canvas.get("el");(0,L.S6)(nt,function(J){ht.removeEventListener(J,K._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},Yt.prototype._getEventObj=function(K,ht,J,At,Vt,pt){var Lt=new W.Z(K,ht);return Lt.fromShape=Vt,Lt.toShape=pt,Lt.x=J.x,Lt.y=J.y,Lt.clientX=J.clientX,Lt.clientY=J.clientY,Lt.propagationPath.push(At),Lt},Yt.prototype._getShape=function(K,ht){return this.canvas.getShape(K.x,K.y,ht)},Yt.prototype._getPointInfo=function(K){var ht=this.canvas,J=ht.getClientByEvent(K),At=ht.getPointByEvent(K);return{x:At.x,y:At.y,clientX:J.x,clientY:J.y}},Yt.prototype._triggerEvent=function(K,ht){var J=this._getPointInfo(ht),At=this._getShape(J,ht),Vt=this["_on"+K],pt=!1;if(Vt)Vt.call(this,J,At,ht);else{var Lt=this.currentShape;K==="mouseenter"||K==="dragenter"||K==="mouseover"?(this._emitEvent(K,ht,J,null,null,At),At&&this._emitEvent(K,ht,J,At,null,At),K==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",ht,J,null)):K==="mouseleave"||K==="dragleave"||K==="mouseout"?(pt=!0,Lt&&this._emitEvent(K,ht,J,Lt,Lt,null),this._emitEvent(K,ht,J,null,Lt,null),K==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",ht,J,null)):this._emitEvent(K,ht,J,At,null,null)}if(pt||(this.currentShape=At),At&&!At.get("destroyed")){var Tt=this.canvas,kt=Tt.get("el");kt.style.cursor=At.attr("cursor")||Tt.get("cursor")}},Yt.prototype._onmousedown=function(K,ht,J){J.button===H&&(this.mousedownShape=ht,this.mousedownPoint=K,this.mousedownTimeStamp=J.timeStamp),this._emitEvent("mousedown",J,K,ht,null,null)},Yt.prototype._emitMouseoverEvents=function(K,ht,J,At){var Vt=this.canvas.get("el");J!==At&&(J&&(this._emitEvent("mouseout",K,ht,J,J,At),this._emitEvent("mouseleave",K,ht,J,J,At),(!At||At.get("destroyed"))&&(Vt.style.cursor=this.canvas.get("cursor"))),At&&(this._emitEvent("mouseover",K,ht,At,J,At),this._emitEvent("mouseenter",K,ht,At,J,At)))},Yt.prototype._emitDragoverEvents=function(K,ht,J,At,Vt){At?(At!==J&&(J&&this._emitEvent("dragleave",K,ht,J,J,At),this._emitEvent("dragenter",K,ht,At,J,At)),Vt||this._emitEvent("dragover",K,ht,At)):J&&this._emitEvent("dragleave",K,ht,J,J,At),Vt&&this._emitEvent("dragover",K,ht,At)},Yt.prototype._afterDrag=function(K,ht,J){K&&(K.set("capture",!0),this.draggingShape=null),this.dragging=!1;var At=this._getShape(ht,J);At!==K&&this._emitMouseoverEvents(J,ht,K,At),this.currentShape=At},Yt.prototype._onmouseup=function(K,ht,J){if(J.button===H){var At=this.draggingShape;this.dragging?(At&&this._emitEvent("drop",J,K,ht),this._emitEvent("dragend",J,K,At),this._afterDrag(At,K,J)):(this._emitEvent("mouseup",J,K,ht),ht===this.mousedownShape&&this._emitEvent("click",J,K,ht),this.mousedownShape=null,this.mousedownPoint=null)}},Yt.prototype._ondragover=function(K,ht,J){J.preventDefault();var At=this.currentShape;this._emitDragoverEvents(J,K,At,ht,!0)},Yt.prototype._onmousemove=function(K,ht,J){var At=this.canvas,Vt=this.currentShape,pt=this.draggingShape;if(this.dragging)pt&&this._emitDragoverEvents(J,K,Vt,ht,!1),this._emitEvent("drag",J,K,pt);else{var Lt=this.mousedownPoint;if(Lt){var Tt=this.mousedownShape,kt=J.timeStamp,jt=kt-this.mousedownTimeStamp,Wt=Lt.clientX-K.clientX,zt=Lt.clientY-K.clientY,bt=Wt*Wt+zt*zt;jt>120||bt>$?Tt&&Tt.get("draggable")?(pt=this.mousedownShape,pt.set("capture",!1),this.draggingShape=pt,this.dragging=!0,this._emitEvent("dragstart",J,K,pt),this.mousedownShape=null,this.mousedownPoint=null):!Tt&&At.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",J,K,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(J,K,Vt,ht),this._emitEvent("mousemove",J,K,ht)):(this._emitMouseoverEvents(J,K,Vt,ht),this._emitEvent("mousemove",J,K,ht))}else this._emitMouseoverEvents(J,K,Vt,ht),this._emitEvent("mousemove",J,K,ht)}},Yt.prototype._emitEvent=function(K,ht,J,At,Vt,pt){var Lt=this._getEventObj(K,ht,J,At,Vt,pt);if(At){Lt.shape=At,mt(At,K,Lt);for(var Tt=At.getParent();Tt;)Tt.emitDelegation(K,Lt),Lt.propagationStopped||Ft(Tt,K,Lt),Lt.propagationPath.push(Tt),Tt=Tt.getParent()}else{var kt=this.canvas;mt(kt,K,Lt)}},Yt.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},Yt}(),gt=Gt,st="px",Xt=(0,c.detect)(),Q=Xt&&Xt.name==="firefox",qt=function(Yt){(0,d.__extends)(K,Yt);function K(ht){var J=Yt.call(this,ht)||this;return J.initContainer(),J.initDom(),J.initEvents(),J.initTimeline(),J}return K.prototype.getDefaultCfg=function(){var ht=Yt.prototype.getDefaultCfg.call(this);return ht.cursor="default",ht.supportCSSTransform=!1,ht},K.prototype.initContainer=function(){var ht=this.get("container");(0,L.HD)(ht)&&(ht=document.getElementById(ht),this.set("container",ht))},K.prototype.initDom=function(){var ht=this.createDom();this.set("el",ht);var J=this.get("container");J.appendChild(ht),this.setDOMSize(this.get("width"),this.get("height"))},K.prototype.initEvents=function(){var ht=new gt({canvas:this});ht.init(),this.set("eventController",ht)},K.prototype.initTimeline=function(){var ht=new G(this);this.set("timeline",ht)},K.prototype.setDOMSize=function(ht,J){var At=this.get("el");L.jU&&(At.style.width=ht+st,At.style.height=J+st)},K.prototype.changeSize=function(ht,J){this.setDOMSize(ht,J),this.set("width",ht),this.set("height",J),this.onCanvasChange("changeSize")},K.prototype.getRenderer=function(){return this.get("renderer")},K.prototype.getCursor=function(){return this.get("cursor")},K.prototype.setCursor=function(ht){this.set("cursor",ht);var J=this.get("el");L.jU&&J&&(J.style.cursor=ht)},K.prototype.getPointByEvent=function(ht){var J=this.get("supportCSSTransform");if(J){if(Q&&!(0,L.kK)(ht.layerX)&&ht.layerX!==ht.offsetX)return{x:ht.layerX,y:ht.layerY};if(!(0,L.kK)(ht.offsetX))return{x:ht.offsetX,y:ht.offsetY}}var At=this.getClientByEvent(ht),Vt=At.x,pt=At.y;return this.getPointByClient(Vt,pt)},K.prototype.getClientByEvent=function(ht){var J=ht;return ht.touches&&(ht.type==="touchend"?J=ht.changedTouches[0]:J=ht.touches[0]),{x:J.clientX,y:J.clientY}},K.prototype.getPointByClient=function(ht,J){var At=this.get("el"),Vt=At.getBoundingClientRect();return{x:ht-Vt.left,y:J-Vt.top}},K.prototype.getClientByPoint=function(ht,J){var At=this.get("el"),Vt=At.getBoundingClientRect();return{x:ht+Vt.left,y:J+Vt.top}},K.prototype.draw=function(){},K.prototype.removeDom=function(){var ht=this.get("el");ht.parentNode.removeChild(ht)},K.prototype.clearEvents=function(){var ht=this.get("eventController");ht.destroy()},K.prototype.isCanvas=function(){return!0},K.prototype.getParent=function(){return null},K.prototype.destroy=function(){var ht=this.get("timeline");this.get("destroyed")||(this.clear(),ht&&ht.stop(),this.clearEvents(),this.removeDom(),Yt.prototype.destroy.call(this))},K}(F.Z),y=qt},84282:function(xt,T,v){"use strict";var d=v(21362),c=v(26169),F=v(6574),L=v(64753),O={},_="_INDEX";function P(S,I){if(S.set("canvas",I),S.isGroup()){var B=S.get("children");B.length&&B.forEach(function(N){P(N,I)})}}function A(S,I){if(S.set("timeline",I),S.isGroup()){var B=S.get("children");B.length&&B.forEach(function(N){A(N,I)})}}function x(S,I){var B=S.getChildren();return B.indexOf(I)>=0}function C(S,I,B){B===void 0&&(B=!0),B?I.destroy():(I.set("parent",null),I.set("canvas",null)),(0,L.As)(S.getChildren(),I)}function w(S){return function(I,B){var N=S(I,B);return N===0?I[_]-B[_]:N}}var M=function(S){(0,d.__extends)(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I.prototype.isCanvas=function(){return!1},I.prototype.getBBox=function(){var B=Infinity,N=-Infinity,G=Infinity,W=-Infinity,$=[],H=[],j=this.getChildren().filter(function(rt){return rt.get("visible")&&(!rt.isGroup()||rt.isGroup()&&rt.getChildren().length>0)});j.length>0?((0,L.S6)(j,function(rt){var mt=rt.getBBox();$.push(mt.minX,mt.maxX),H.push(mt.minY,mt.maxY)}),B=(0,c.min)($),N=(0,c.max)($),G=(0,c.min)(H),W=(0,c.max)(H)):(B=0,N=0,G=0,W=0);var nt={x:B,y:G,minX:B,minY:G,maxX:N,maxY:W,width:N-B,height:W-G};return nt},I.prototype.getCanvasBBox=function(){var B=Infinity,N=-Infinity,G=Infinity,W=-Infinity,$=[],H=[],j=this.getChildren().filter(function(rt){return rt.get("visible")&&(!rt.isGroup()||rt.isGroup()&&rt.getChildren().length>0)});j.length>0?((0,L.S6)(j,function(rt){var mt=rt.getCanvasBBox();$.push(mt.minX,mt.maxX),H.push(mt.minY,mt.maxY)}),B=(0,c.min)($),N=(0,c.max)($),G=(0,c.min)(H),W=(0,c.max)(H)):(B=0,N=0,G=0,W=0);var nt={x:B,y:G,minX:B,minY:G,maxX:N,maxY:W,width:N-B,height:W-G};return nt},I.prototype.getDefaultCfg=function(){var B=S.prototype.getDefaultCfg.call(this);return B.children=[],B},I.prototype.onAttrChange=function(B,N,G){if(S.prototype.onAttrChange.call(this,B,N,G),B==="matrix"){var W=this.getTotalMatrix();this._applyChildrenMarix(W)}},I.prototype.applyMatrix=function(B){var N=this.getTotalMatrix();S.prototype.applyMatrix.call(this,B);var G=this.getTotalMatrix();G!==N&&this._applyChildrenMarix(G)},I.prototype._applyChildrenMarix=function(B){var N=this.getChildren();(0,L.S6)(N,function(G){G.applyMatrix(B)})},I.prototype.addShape=function(){for(var B=[],N=0;N<arguments.length;N++)B[N]=arguments[N];var G=B[0],W=B[1];(0,L.Kn)(G)?W=G:W.type=G;var $=O[W.type];$||($=(0,L.jC)(W.type),O[W.type]=$);var H=this.getShapeBase(),j=new H[$](W);return this.add(j),j},I.prototype.addGroup=function(){for(var B=[],N=0;N<arguments.length;N++)B[N]=arguments[N];var G=B[0],W=B[1],$;if((0,L.mf)(G))W?$=new G(W):$=new G({parent:this});else{var H=G||{},j=this.getGroupBase();$=new j(H)}return this.add($),$},I.prototype.getCanvas=function(){var B;return this.isCanvas()?B=this:B=this.get("canvas"),B},I.prototype.getShape=function(B,N,G){if(!(0,L.pP)(this))return null;var W=this.getChildren(),$;if(this.isCanvas())$=this._findShape(W,B,N,G);else{var H=[B,N,1];H=this.invertFromMatrix(H),this.isClipped(H[0],H[1])||($=this._findShape(W,H[0],H[1],G))}return $},I.prototype._findShape=function(B,N,G,W){for(var $=null,H=B.length-1;H>=0;H--){var j=B[H];if((0,L.pP)(j)&&(j.isGroup()?$=j.getShape(N,G,W):j.isHit(N,G)&&($=j)),$)break}return $},I.prototype.add=function(B){var N=this.getCanvas(),G=this.getChildren(),W=this.get("timeline"),$=B.getParent();$&&C($,B,!1),B.set("parent",this),N&&P(B,N),W&&A(B,W),G.push(B),B.onCanvasChange("add"),this._applyElementMatrix(B)},I.prototype._applyElementMatrix=function(B){var N=this.getTotalMatrix();N&&B.applyMatrix(N)},I.prototype.getChildren=function(){return this.get("children")},I.prototype.sort=function(){var B=this.getChildren();(0,L.S6)(B,function(N,G){return N[_]=G,N}),B.sort(w(function(N,G){return N.get("zIndex")-G.get("zIndex")})),this.onCanvasChange("sort")},I.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var B=this.getChildren(),N=B.length-1;N>=0;N--)B[N].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},I.prototype.destroy=function(){this.get("destroyed")||(this.clear(),S.prototype.destroy.call(this))},I.prototype.getFirst=function(){return this.getChildByIndex(0)},I.prototype.getLast=function(){var B=this.getChildren();return this.getChildByIndex(B.length-1)},I.prototype.getChildByIndex=function(B){var N=this.getChildren();return N[B]},I.prototype.getCount=function(){var B=this.getChildren();return B.length},I.prototype.contain=function(B){var N=this.getChildren();return N.indexOf(B)>-1},I.prototype.removeChild=function(B,N){N===void 0&&(N=!0),this.contain(B)&&B.remove(N)},I.prototype.findAll=function(B){var N=[],G=this.getChildren();return(0,L.S6)(G,function(W){B(W)&&N.push(W),W.isGroup()&&(N=N.concat(W.findAll(B)))}),N},I.prototype.find=function(B){var N=null,G=this.getChildren();return(0,L.S6)(G,function(W){if(B(W)?N=W:W.isGroup()&&(N=W.find(B)),N)return!1}),N},I.prototype.findById=function(B){return this.find(function(N){return N.get("id")===B})},I.prototype.findByClassName=function(B){return this.find(function(N){return N.get("className")===B})},I.prototype.findAllByName=function(B){return this.findAll(function(N){return N.get("name")===B})},I}(F.Z);T.Z=M},6574:function(xt,T,v){"use strict";var d=v(21362),c=v(26169),F=v(50669),L=v(64753),O=v(91760),_=v(32382),P=F.transform,A="matrix",x=["zIndex","capture","visible","type"],C=["repeat"],w=":",M="*";function S(W){for(var $=[],H=0;H<W.length;H++)(0,c.isArray)(W[H])?$.push([].concat(W[H])):$.push(W[H]);return $}function I(W,$){var H={},j=$.attrs;for(var nt in W)H[nt]=j[nt];return H}function B(W,$){var H={},j=$.attr();return(0,c.each)(W,function(nt,rt){C.indexOf(rt)===-1&&!(0,c.isEqual)(j[rt],nt)&&(H[rt]=nt)}),H}function N(W,$){if($.onFrame)return W;var H=$.startTime,j=$.delay,nt=$.duration,rt=Object.prototype.hasOwnProperty;return(0,c.each)(W,function(mt){H+j<mt.startTime+mt.delay+mt.duration&&nt>mt.delay&&(0,c.each)($.toAttrs,function(Ft,Gt){rt.call(mt.toAttrs,Gt)&&(delete mt.toAttrs[Gt],delete mt.fromAttrs[Gt])})}),W}var G=function(W){(0,d.__extends)($,W);function $(H){var j=W.call(this,H)||this;j.attrs={};var nt=j.getDefaultAttrs();return(0,c.mix)(nt,H.attrs),j.attrs=nt,j.initAttrs(nt),j.initAnimate(),j}return $.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},$.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},$.prototype.onCanvasChange=function(H){},$.prototype.initAttrs=function(H){},$.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},$.prototype.isGroup=function(){return!1},$.prototype.getParent=function(){return this.get("parent")},$.prototype.getCanvas=function(){return this.get("canvas")},$.prototype.attr=function(){for(var H,j=[],nt=0;nt<arguments.length;nt++)j[nt]=arguments[nt];var rt=j[0],mt=j[1];if(!rt)return this.attrs;if((0,c.isObject)(rt)){for(var Ft in rt)this.setAttr(Ft,rt[Ft]);return this.afterAttrsChange(rt),this}return j.length===2?(this.setAttr(rt,mt),this.afterAttrsChange((H={},H[rt]=mt,H)),this):this.attrs[rt]},$.prototype.isClipped=function(H,j){var nt=this.getClip();return nt&&!nt.isHit(H,j)},$.prototype.setAttr=function(H,j){var nt=this.attrs[H];nt!==j&&(this.attrs[H]=j,this.onAttrChange(H,j,nt))},$.prototype.onAttrChange=function(H,j,nt){H==="matrix"&&this.set("totalMatrix",null)},$.prototype.afterAttrsChange=function(H){if(this.cfg.isClipShape){var j=this.cfg.applyTo;j&&j.onCanvasChange("clip")}else this.onCanvasChange("attr")},$.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},$.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},$.prototype.setZIndex=function(H){this.set("zIndex",H);var j=this.getParent();return j&&j.sort(),this},$.prototype.toFront=function(){var H=this.getParent();if(!!H){var j=H.getChildren(),nt=this.get("el"),rt=j.indexOf(this);j.splice(rt,1),j.push(this),this.onCanvasChange("zIndex")}},$.prototype.toBack=function(){var H=this.getParent();if(!!H){var j=H.getChildren(),nt=this.get("el"),rt=j.indexOf(this);j.splice(rt,1),j.unshift(this),this.onCanvasChange("zIndex")}},$.prototype.remove=function(H){H===void 0&&(H=!0);var j=this.getParent();j?((0,L.As)(j.getChildren(),this),j.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),H&&this.destroy()},$.prototype.resetMatrix=function(){this.attr(A,this.getDefaultMatrix()),this.onCanvasChange("matrix")},$.prototype.getMatrix=function(){return this.attr(A)},$.prototype.setMatrix=function(H){this.attr(A,H),this.onCanvasChange("matrix")},$.prototype.getTotalMatrix=function(){var H=this.cfg.totalMatrix;if(!H){var j=this.attr("matrix"),nt=this.cfg.parentMatrix;nt&&j?H=(0,O.xq)(nt,j):H=j||nt,this.set("totalMatrix",H)}return H},$.prototype.applyMatrix=function(H){var j=this.attr("matrix"),nt=null;H&&j?nt=(0,O.xq)(H,j):nt=j||H,this.set("totalMatrix",nt),this.set("parentMatrix",H)},$.prototype.getDefaultMatrix=function(){return null},$.prototype.applyToMatrix=function(H){var j=this.attr("matrix");return j?(0,O.rG)(j,H):H},$.prototype.invertFromMatrix=function(H){var j=this.attr("matrix");if(j){var nt=(0,O.U_)(j);if(nt)return(0,O.rG)(nt,H)}return H},$.prototype.setClip=function(H){var j=this.getCanvas(),nt=null;if(H){var rt=this.getShapeBase(),mt=(0,c.upperFirst)(H.type),Ft=rt[mt];Ft&&(nt=new Ft({type:H.type,isClipShape:!0,applyTo:this,attrs:H.attrs,canvas:j}))}return this.set("clipShape",nt),this.onCanvasChange("clip"),nt},$.prototype.getClip=function(){var H=this.cfg.clipShape;return H||null},$.prototype.clone=function(){var H=this,j=this.attrs,nt={};(0,c.each)(j,function(Ft,Gt){(0,c.isArray)(j[Gt])?nt[Gt]=S(j[Gt]):nt[Gt]=j[Gt]});var rt=this.constructor,mt=new rt({attrs:nt});return(0,c.each)(x,function(Ft){mt.set(Ft,H.get(Ft))}),mt},$.prototype.destroy=function(){var H=this.destroyed;H||(this.attrs={},W.prototype.destroy.call(this))},$.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},$.prototype.animate=function(){for(var H=[],j=0;j<arguments.length;j++)H[j]=arguments[j];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var nt=this.get("timeline");nt||(nt=this.get("canvas").get("timeline"),this.set("timeline",nt));var rt=this.get("animations")||[];nt.timer||nt.initTimer();var mt=H[0],Ft=H[1],Gt=H[2],gt=Gt===void 0?"easeLinear":Gt,st=H[3],Xt=st===void 0?c.noop:st,Q=H[4],qt=Q===void 0?0:Q,y,Yt,K,ht,J;(0,c.isFunction)(mt)?(y=mt,mt={}):(0,c.isObject)(mt)&&mt.onFrame&&(y=mt.onFrame,Yt=mt.repeat),(0,c.isObject)(Ft)?(J=Ft,Ft=J.duration,gt=J.easing||"easeLinear",qt=J.delay||0,Yt=J.repeat||Yt||!1,Xt=J.callback||c.noop,K=J.pauseCallback||c.noop,ht=J.resumeCallback||c.noop):((0,c.isNumber)(Xt)&&(qt=Xt,Xt=null),(0,c.isFunction)(gt)?(Xt=gt,gt="easeLinear"):gt=gt||"easeLinear");var At=B(mt,this),Vt={fromAttrs:I(At,this),toAttrs:At,duration:Ft,easing:gt,repeat:Yt,callback:Xt,pauseCallback:K,resumeCallback:ht,delay:qt,startTime:nt.getTime(),id:(0,c.uniqueId)(),onFrame:y,pathFormatted:!1};rt.length>0?rt=N(rt,Vt):nt.addAnimator(this),rt.push(Vt),this.set("animations",rt),this.set("_pause",{isPaused:!1})}},$.prototype.stopAnimate=function(H){var j=this;H===void 0&&(H=!0);var nt=this.get("animations");(0,c.each)(nt,function(rt){H&&(rt.onFrame?j.attr(rt.onFrame(1)):j.attr(rt.toAttrs)),rt.callback&&rt.callback()}),this.set("animating",!1),this.set("animations",[])},$.prototype.pauseAnimate=function(){var H=this.get("timeline"),j=this.get("animations"),nt=H.getTime();return(0,c.each)(j,function(rt){rt._paused=!0,rt._pauseTime=nt,rt.pauseCallback&&rt.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:nt}),this},$.prototype.resumeAnimate=function(){var H=this.get("timeline"),j=H.getTime(),nt=this.get("animations"),rt=this.get("_pause").pauseTime;return(0,c.each)(nt,function(mt){mt.startTime=mt.startTime+(j-rt),mt._paused=!1,mt._pauseTime=null,mt.resumeCallback&&mt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",nt),this},$.prototype.emitDelegation=function(H,j){var nt=this,rt=j.propagationPath,mt=this.getEvents(),Ft;H==="mouseenter"?Ft=j.fromShape:H==="mouseleave"&&(Ft=j.toShape);for(var Gt=function(Q){var qt=rt[Q],y=qt.get("name");if(y){if((qt.isGroup()||qt.isCanvas&&qt.isCanvas())&&Ft&&(0,L.UY)(qt,Ft))return"break";(0,c.isArray)(y)?(0,c.each)(y,function(Yt){nt.emitDelegateEvent(qt,Yt,j)}):gt.emitDelegateEvent(qt,y,j)}},gt=this,st=0;st<rt.length;st++){var Xt=Gt(st);if(Xt==="break")break}},$.prototype.emitDelegateEvent=function(H,j,nt){var rt=this.getEvents(),mt=j+w+nt.type;(rt[mt]||rt[M])&&(nt.name=mt,nt.currentTarget=H,nt.delegateTarget=this,nt.delegateObject=H.get("delegateObject"),this.emit(mt,nt))},$.prototype.translate=function(H,j){H===void 0&&(H=0),j===void 0&&(j=0);var nt=this.getMatrix(),rt=P(nt,[["t",H,j]]);return this.setMatrix(rt),this},$.prototype.move=function(H,j){var nt=this.attr("x")||0,rt=this.attr("y")||0;return this.translate(H-nt,j-rt),this},$.prototype.moveTo=function(H,j){return this.move(H,j)},$.prototype.scale=function(H,j){var nt=this.getMatrix(),rt=P(nt,[["s",H,j||H]]);return this.setMatrix(rt),this},$.prototype.rotate=function(H){var j=this.getMatrix(),nt=P(j,[["r",H]]);return this.setMatrix(nt),this},$.prototype.rotateAtStart=function(H){var j=this.attr(),nt=j.x,rt=j.y,mt=this.getMatrix(),Ft=P(mt,[["t",-nt,-rt],["r",H],["t",nt,rt]]);return this.setMatrix(Ft),this},$.prototype.rotateAtPoint=function(H,j,nt){var rt=this.getMatrix(),mt=P(rt,[["t",-H,-j],["r",nt],["t",H,j]]);return this.setMatrix(mt),this},$}(_.Z);T.Z=G},64758:function(xt,T,v){"use strict";var d=v(21362),c=v(84282),F=function(L){(0,d.__extends)(O,L);function O(){return L!==null&&L.apply(this,arguments)||this}return O.prototype.isGroup=function(){return!0},O.prototype.isEntityGroup=function(){return!1},O.prototype.clone=function(){for(var _=L.prototype.clone.call(this),P=this.getChildren(),A=0;A<P.length;A++){var x=P[A];_.add(x.clone())}return _},O}(c.Z);T.Z=F},72818:function(xt,T,v){"use strict";var d=v(21362),c=v(6574),F=v(91760),L=function(O){(0,d.__extends)(_,O);function _(P){return O.call(this,P)||this}return _.prototype._isInBBox=function(P,A){var x=this.getBBox();return x.minX<=P&&x.maxX>=P&&x.minY<=A&&x.maxY>=A},_.prototype.afterAttrsChange=function(P){O.prototype.afterAttrsChange.call(this,P),this.clearCacheBBox()},_.prototype.getBBox=function(){var P=this.cfg.bbox;return P||(P=this.calculateBBox(),this.set("bbox",P)),P},_.prototype.getCanvasBBox=function(){var P=this.cfg.canvasBBox;return P||(P=this.calculateCanvasBBox(),this.set("canvasBBox",P)),P},_.prototype.applyMatrix=function(P){O.prototype.applyMatrix.call(this,P),this.set("canvasBBox",null)},_.prototype.calculateCanvasBBox=function(){var P=this.getBBox(),A=this.getTotalMatrix(),x=P.minX,C=P.minY,w=P.maxX,M=P.maxY;if(A){var S=(0,F.rG)(A,[P.minX,P.minY]),I=(0,F.rG)(A,[P.maxX,P.minY]),B=(0,F.rG)(A,[P.minX,P.maxY]),N=(0,F.rG)(A,[P.maxX,P.maxY]);x=Math.min(S[0],I[0],B[0],N[0]),w=Math.max(S[0],I[0],B[0],N[0]),C=Math.min(S[1],I[1],B[1],N[1]),M=Math.max(S[1],I[1],B[1],N[1])}var G=this.attrs;if(G.shadowColor){var W=G.shadowBlur,$=W===void 0?0:W,H=G.shadowOffsetX,j=H===void 0?0:H,nt=G.shadowOffsetY,rt=nt===void 0?0:nt,mt=x-$+j,Ft=w+$+j,Gt=C-$+rt,gt=M+$+rt;x=Math.min(x,mt),w=Math.max(w,Ft),C=Math.min(C,Gt),M=Math.max(M,gt)}return{x,y:C,minX:x,minY:C,maxX:w,maxY:M,width:w-x,height:M-C}},_.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},_.prototype.isClipShape=function(){return this.get("isClipShape")},_.prototype.isInShape=function(P,A){return!1},_.prototype.isOnlyHitBox=function(){return!1},_.prototype.isHit=function(P,A){var x=this.get("startArrowShape"),C=this.get("endArrowShape"),w=[P,A,1];w=this.invertFromMatrix(w);var M=w[0],S=w[1],I=this._isInBBox(M,S);return this.isOnlyHitBox()?I:!!(I&&!this.isClipped(M,S)&&(this.isInShape(M,S)||x&&x.isHit(M,S)||C&&C.isHit(M,S)))},_}(c.Z);T.Z=L},98548:function(xt,T,v){"use strict";v.d(T,{b:function(){return F}});var d=new Map;function c(H,j){d.set(H,j)}function F(H){return d.get(H)}function L(H){var j=H.attr(),nt=j.x,rt=j.y,mt=j.width,Ft=j.height;return{x:nt,y:rt,width:mt,height:Ft}}function O(H){var j=H.attr(),nt=j.x,rt=j.y,mt=j.r;return{x:nt-mt,y:rt-mt,width:mt*2,height:mt*2}}var _=v(51824);function P(H,j){return!H||!j?H||j:{minX:Math.min(H.minX,j.minX),minY:Math.min(H.minY,j.minY),maxX:Math.max(H.maxX,j.maxX),maxY:Math.max(H.maxY,j.maxY)}}function A(H,j){var nt=H.get("startArrowShape"),rt=H.get("endArrowShape"),mt=null,Ft=null;return nt&&(mt=nt.getCanvasBBox(),j=P(j,mt)),rt&&(Ft=rt.getCanvasBBox(),j=P(j,Ft)),j}function x(H){for(var j=H.attr(),nt=j.points,rt=[],mt=[],Ft=0;Ft<nt.length;Ft++){var Gt=nt[Ft];rt.push(Gt[0]),mt.push(Gt[1])}var gt=_.Util.getBBoxByArray(rt,mt),st=gt.x,Xt=gt.y,Q=gt.width,qt=gt.height,y={minX:st,minY:Xt,maxX:st+Q,maxY:Xt+qt};return y=A(H,y),{x:y.minX,y:y.minY,width:y.maxX-y.minX,height:y.maxY-y.minY}}function C(H){for(var j=H.attr(),nt=j.points,rt=[],mt=[],Ft=0;Ft<nt.length;Ft++){var Gt=nt[Ft];rt.push(Gt[0]),mt.push(Gt[1])}return _.Util.getBBoxByArray(rt,mt)}var w=v(83421);function M(H){var j=H.attr(),nt=j.x,rt=j.y,mt=j.text,Ft=j.fontSize,Gt=j.lineHeight,gt=j.font;gt||(gt=(0,w.$O)(j));var st=(0,w.mY)(mt,gt),Xt;if(!st)Xt={x:nt,y:rt,width:0,height:0};else{var Q=j.textAlign,qt=j.textBaseline,y=(0,w.FE)(mt,Ft,Gt),Yt={x:nt,y:rt-y};Q&&(Q==="end"||Q==="right"?Yt.x-=st:Q==="center"&&(Yt.x-=st/2)),qt&&(qt==="top"?Yt.y+=y:qt==="middle"&&(Yt.y+=y/2)),Xt={x:Yt.x,y:Yt.y,width:st,height:y}}return Xt}var S=v(62029),I=v(26169);function B(H,j){for(var nt=[],rt=[],mt=[],Ft=0;Ft<H.length;Ft++){var Gt=H[Ft],gt=Gt.currentPoint,st=Gt.params,Xt=Gt.prePoint,Q=void 0;switch(Gt.command){case"Q":Q=_.Quad.box(Xt[0],Xt[1],st[1],st[2],st[3],st[4]);break;case"C":Q=_.Cubic.box(Xt[0],Xt[1],st[1],st[2],st[3],st[4],st[5],st[6]);break;case"A":var qt=Gt.arcParams;Q=_.Arc.box(qt.cx,qt.cy,qt.rx,qt.ry,qt.xRotation,qt.startAngle,qt.endAngle);break;default:nt.push(gt[0]),rt.push(gt[1]);break}Q&&(Gt.box=Q,nt.push(Q.x,Q.x+Q.width),rt.push(Q.y,Q.y+Q.height)),j&&(Gt.command==="L"||Gt.command==="M")&&Gt.prePoint&&Gt.nextPoint&&mt.push(Gt)}nt=nt.filter(function(At){return!Number.isNaN(At)}),rt=rt.filter(function(At){return!Number.isNaN(At)});var y=(0,I.min)(nt),Yt=(0,I.min)(rt),K=(0,I.max)(nt),ht=(0,I.max)(rt);if(mt.length===0)return{x:y,y:Yt,width:K-y,height:ht-Yt};for(var Ft=0;Ft<mt.length;Ft++){var Gt=mt[Ft],gt=Gt.currentPoint,J=void 0;gt[0]===y?(J=N(Gt,j),y=y-J.xExtra):gt[0]===K&&(J=N(Gt,j),K=K+J.xExtra),gt[1]===Yt?(J=N(Gt,j),Yt=Yt-J.yExtra):gt[1]===ht&&(J=N(Gt,j),ht=ht+J.yExtra)}return{x:y,y:Yt,width:K-y,height:ht-Yt}}function N(H,j){var nt=H.prePoint,rt=H.currentPoint,mt=H.nextPoint,Ft=Math.pow(rt[0]-nt[0],2)+Math.pow(rt[1]-nt[1],2),Gt=Math.pow(rt[0]-mt[0],2)+Math.pow(rt[1]-mt[1],2),gt=Math.pow(nt[0]-mt[0],2)+Math.pow(nt[1]-mt[1],2),st=Math.acos((Ft+Gt-gt)/(2*Math.sqrt(Ft)*Math.sqrt(Gt)));if(!st||Math.sin(st)===0||(0,I.isNumberEqual)(st,0))return{xExtra:0,yExtra:0};var Xt=Math.abs(Math.atan2(mt[1]-rt[1],mt[0]-rt[0])),Q=Math.abs(Math.atan2(mt[0]-rt[0],mt[1]-rt[1]));Xt=Xt>Math.PI/2?Math.PI-Xt:Xt,Q=Q>Math.PI/2?Math.PI-Q:Q;var qt={xExtra:Math.cos(st/2-Xt)*(j/2*(1/Math.sin(st/2)))-j/2||0,yExtra:Math.cos(Q-st/2)*(j/2*(1/Math.sin(st/2)))-j/2||0};return qt}function G(H){var j=H.attr(),nt=j.path,rt=j.stroke,mt=rt?j.lineWidth:0,Ft=H.get("segments")||(0,S.path2Segments)(nt),Gt=B(Ft,mt),gt=Gt.x,st=Gt.y,Xt=Gt.width,Q=Gt.height,qt={minX:gt,minY:st,maxX:gt+Xt,maxY:st+Q};return qt=A(H,qt),{x:qt.minX,y:qt.minY,width:qt.maxX-qt.minX,height:qt.maxY-qt.minY}}function W(H){var j=H.attr(),nt=j.x1,rt=j.y1,mt=j.x2,Ft=j.y2,Gt=Math.min(nt,mt),gt=Math.max(nt,mt),st=Math.min(rt,Ft),Xt=Math.max(rt,Ft),Q={minX:Gt,maxX:gt,minY:st,maxY:Xt};return Q=A(H,Q),{x:Q.minX,y:Q.minY,width:Q.maxX-Q.minX,height:Q.maxY-Q.minY}}function $(H){var j=H.attr(),nt=j.x,rt=j.y,mt=j.rx,Ft=j.ry;return{x:nt-mt,y:rt-Ft,width:mt*2,height:Ft*2}}c("rect",L),c("image",L),c("circle",O),c("marker",O),c("polyline",x),c("polygon",C),c("text",M),c("path",G),c("line",W),c("ellipse",$)},84443:function(xt,T){"use strict";var v=function(){function d(c,F){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=c,this.name=c,this.originalEvent=F,this.timeStamp=F.timeStamp}return d.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},d.prototype.stopPropagation=function(){this.propagationStopped=!0},d.prototype.toString=function(){var c=this.type;return"[Event (type="+c+")]"},d.prototype.save=function(){},d.prototype.restore=function(){},d}();T.Z=v},26691:function(xt,T,v){"use strict";v.r(T),v.d(T,{Event:function(){return A.Z},Base:function(){return x.Z},AbstractCanvas:function(){return C.Z},AbstractGroup:function(){return w.Z},AbstractShape:function(){return M.Z},PathUtil:function(){return d},getBBoxMethod:function(){return S.b},getTextHeight:function(){return I.FE},assembleFont:function(){return I.$O},isAllowCapture:function(){return B.pP},multiplyVec2:function(){return N.rG},invert:function(){return N.U_},getOffScreenContext:function(){return G.L},version:function(){return W}});var d=v(41489),c=v(57272),F=v.n(c),L={};for(var O in c)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(O)<0&&(L[O]=function($){return c[$]}.bind(0,O));v.d(T,L);var _=v(32512),P=v.n(_),L={};for(var O in _)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(O)<0&&(L[O]=function(H){return _[H]}.bind(0,O));v.d(T,L);var A=v(84443),x=v(32382),C=v(23051),w=v(64758),M=v(72818),S=v(98548),I=v(83421),B=v(64753),N=v(91760),G=v(38479),W="0.5.6"},32512:function(){},57272:function(){},91760:function(xt,T,v){"use strict";v.d(T,{xq:function(){return d},rG:function(){return c},U_:function(){return F}});function d(L,O){var _=[],P=L[0],A=L[1],x=L[2],C=L[3],w=L[4],M=L[5],S=L[6],I=L[7],B=L[8],N=O[0],G=O[1],W=O[2],$=O[3],H=O[4],j=O[5],nt=O[6],rt=O[7],mt=O[8];return _[0]=N*P+G*C+W*S,_[1]=N*A+G*w+W*I,_[2]=N*x+G*M+W*B,_[3]=$*P+H*C+j*S,_[4]=$*A+H*w+j*I,_[5]=$*x+H*M+j*B,_[6]=nt*P+rt*C+mt*S,_[7]=nt*A+rt*w+mt*I,_[8]=nt*x+rt*M+mt*B,_}function c(L,O){var _=[],P=O[0],A=O[1];return _[0]=L[0]*P+L[3]*A+L[6],_[1]=L[1]*P+L[4]*A+L[7],_}function F(L){var O=[],_=L[0],P=L[1],A=L[2],x=L[3],C=L[4],w=L[5],M=L[6],S=L[7],I=L[8],B=I*C-w*S,N=-I*x+w*M,G=S*x-C*M,W=_*B+P*N+A*G;return W?(W=1/W,O[0]=B*W,O[1]=(-I*P+A*S)*W,O[2]=(w*P-A*C)*W,O[3]=N*W,O[4]=(I*_-A*M)*W,O[5]=(-w*_+A*x)*W,O[6]=G*W,O[7]=(-S*_+P*M)*W,O[8]=(C*_-P*x)*W,O):null}},38479:function(xt,T,v){"use strict";v.d(T,{L:function(){return c}});var d=null;function c(){if(!d){var F=document.createElement("canvas");F.width=1,F.height=1,d=F.getContext("2d")}return d}},41489:function(xt,T,v){"use strict";v.r(T),v.d(T,{catmullRomToBezier:function(){return _},fillPath:function(){return qt},fillPathByDiff:function(){return ht},formatPath:function(){return Vt},intersection:function(){return gt},parsePathArray:function(){return I},parsePathString:function(){return O},pathToAbsolute:function(){return A},pathToCurve:function(){return M},rectPath:function(){return H}});var d=v(26169),c=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,F=new RegExp("([a-z])["+c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c+"]*,?["+c+"]*)+)","ig"),L=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c+"]*,?["+c+"]*","ig"),O=function(pt){if(!pt)return null;if((0,d.isArray)(pt))return pt;var Lt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Tt=[];return String(pt).replace(F,function(kt,jt,Wt){var zt=[],bt=jt.toLowerCase();if(Wt.replace(L,function(at,ft){ft&&zt.push(+ft)}),bt==="m"&&zt.length>2&&(Tt.push([jt].concat(zt.splice(0,2))),bt="l",jt=jt==="m"?"l":"L"),bt==="o"&&zt.length===1&&Tt.push([jt,zt[0]]),bt==="r")Tt.push([jt].concat(zt));else for(;zt.length>=Lt[bt]&&(Tt.push([jt].concat(zt.splice(0,Lt[bt]))),!!Lt[bt]););return pt}),Tt},_=function(pt,Lt){for(var Tt=[],kt=0,jt=pt.length;jt-2*!Lt>kt;kt+=2){var Wt=[{x:+pt[kt-2],y:+pt[kt-1]},{x:+pt[kt],y:+pt[kt+1]},{x:+pt[kt+2],y:+pt[kt+3]},{x:+pt[kt+4],y:+pt[kt+5]}];Lt?kt?jt-4===kt?Wt[3]={x:+pt[0],y:+pt[1]}:jt-2===kt&&(Wt[2]={x:+pt[0],y:+pt[1]},Wt[3]={x:+pt[2],y:+pt[3]}):Wt[0]={x:+pt[jt-2],y:+pt[jt-1]}:jt-4===kt?Wt[3]=Wt[2]:kt||(Wt[0]={x:+pt[kt],y:+pt[kt+1]}),Tt.push(["C",(-Wt[0].x+6*Wt[1].x+Wt[2].x)/6,(-Wt[0].y+6*Wt[1].y+Wt[2].y)/6,(Wt[1].x+6*Wt[2].x-Wt[3].x)/6,(Wt[1].y+6*Wt[2].y-Wt[3].y)/6,Wt[2].x,Wt[2].y])}return Tt},P=function(pt,Lt,Tt,kt,jt){var Wt=[];if(jt===null&&kt===null&&(kt=Tt),pt=+pt,Lt=+Lt,Tt=+Tt,kt=+kt,jt!==null){var zt=Math.PI/180,bt=pt+Tt*Math.cos(-kt*zt),at=pt+Tt*Math.cos(-jt*zt),ft=Lt+Tt*Math.sin(-kt*zt),Pt=Lt+Tt*Math.sin(-jt*zt);Wt=[["M",bt,ft],["A",Tt,Tt,0,+(jt-kt>180),0,at,Pt]]}else Wt=[["M",pt,Lt],["m",0,-kt],["a",Tt,kt,0,1,1,0,2*kt],["a",Tt,kt,0,1,1,0,-2*kt],["z"]];return Wt},A=function(pt){if(pt=O(pt),!pt||!pt.length)return[["M",0,0]];var Lt=[],Tt=0,kt=0,jt=0,Wt=0,zt=0,bt,at;pt[0][0]==="M"&&(Tt=+pt[0][1],kt=+pt[0][2],jt=Tt,Wt=kt,zt++,Lt[0]=["M",Tt,kt]);for(var ft=pt.length===3&&pt[0][0]==="M"&&pt[1][0].toUpperCase()==="R"&&pt[2][0].toUpperCase()==="Z",Pt=void 0,q=void 0,ut=zt,Et=pt.length;ut<Et;ut++){if(Lt.push(Pt=[]),q=pt[ut],bt=q[0],bt!==bt.toUpperCase())switch(Pt[0]=bt.toUpperCase(),Pt[0]){case"A":Pt[1]=q[1],Pt[2]=q[2],Pt[3]=q[3],Pt[4]=q[4],Pt[5]=q[5],Pt[6]=+q[6]+Tt,Pt[7]=+q[7]+kt;break;case"V":Pt[1]=+q[1]+kt;break;case"H":Pt[1]=+q[1]+Tt;break;case"R":at=[Tt,kt].concat(q.slice(1));for(var Nt=2,ee=at.length;Nt<ee;Nt++)at[Nt]=+at[Nt]+Tt,at[++Nt]=+at[Nt]+kt;Lt.pop(),Lt=Lt.concat(_(at,ft));break;case"O":Lt.pop(),at=P(Tt,kt,q[1],q[2]),at.push(at[0]),Lt=Lt.concat(at);break;case"U":Lt.pop(),Lt=Lt.concat(P(Tt,kt,q[1],q[2],q[3])),Pt=["U"].concat(Lt[Lt.length-1].slice(-2));break;case"M":jt=+q[1]+Tt,Wt=+q[2]+kt;break;default:for(var Nt=1,ee=q.length;Nt<ee;Nt++)Pt[Nt]=+q[Nt]+(Nt%2?Tt:kt)}else if(bt==="R")at=[Tt,kt].concat(q.slice(1)),Lt.pop(),Lt=Lt.concat(_(at,ft)),Pt=["R"].concat(q.slice(-2));else if(bt==="O")Lt.pop(),at=P(Tt,kt,q[1],q[2]),at.push(at[0]),Lt=Lt.concat(at);else if(bt==="U")Lt.pop(),Lt=Lt.concat(P(Tt,kt,q[1],q[2],q[3])),Pt=["U"].concat(Lt[Lt.length-1].slice(-2));else for(var ge=0,De=q.length;ge<De;ge++)Pt[ge]=q[ge];if(bt=bt.toUpperCase(),bt!=="O")switch(Pt[0]){case"Z":Tt=+jt,kt=+Wt;break;case"H":Tt=Pt[1];break;case"V":kt=Pt[1];break;case"M":jt=Pt[Pt.length-2],Wt=Pt[Pt.length-1];break;default:Tt=Pt[Pt.length-2],kt=Pt[Pt.length-1]}}return Lt},x=function(pt,Lt,Tt,kt){return[pt,Lt,Tt,kt,Tt,kt]},C=function(pt,Lt,Tt,kt,jt,Wt){var zt=1/3,bt=2/3;return[zt*pt+bt*Tt,zt*Lt+bt*kt,zt*jt+bt*Tt,zt*Wt+bt*kt,jt,Wt]},w=function(pt,Lt,Tt,kt,jt,Wt,zt,bt,at,ft){Tt===kt&&(Tt+=1);var Pt=Math.PI*120/180,q=Math.PI/180*(+jt||0),ut=[],Et,Nt,ee,ge,De,er=function(fe,re,Rt){var ie=fe*Math.cos(Rt)-re*Math.sin(Rt),be=fe*Math.sin(Rt)+re*Math.cos(Rt);return{x:ie,y:be}};if(ft)Nt=ft[0],ee=ft[1],ge=ft[2],De=ft[3];else{Et=er(pt,Lt,-q),pt=Et.x,Lt=Et.y,Et=er(bt,at,-q),bt=Et.x,at=Et.y,pt===bt&&Lt===at&&(bt+=1,at+=1);var Re=(pt-bt)/2,Ke=(Lt-at)/2,hr=Re*Re/(Tt*Tt)+Ke*Ke/(kt*kt);hr>1&&(hr=Math.sqrt(hr),Tt=hr*Tt,kt=hr*kt);var Sr=Tt*Tt,Rr=kt*kt,vr=(Wt===zt?-1:1)*Math.sqrt(Math.abs((Sr*Rr-Sr*Ke*Ke-Rr*Re*Re)/(Sr*Ke*Ke+Rr*Re*Re)));ge=vr*Tt*Ke/kt+(pt+bt)/2,De=vr*-kt*Re/Tt+(Lt+at)/2,Nt=Math.asin(((Lt-De)/kt).toFixed(9)),ee=Math.asin(((at-De)/kt).toFixed(9)),Nt=pt<ge?Math.PI-Nt:Nt,ee=bt<ge?Math.PI-ee:ee,Nt<0&&(Nt=Math.PI*2+Nt),ee<0&&(ee=Math.PI*2+ee),zt&&Nt>ee&&(Nt=Nt-Math.PI*2),!zt&&ee>Nt&&(ee=ee-Math.PI*2)}var en=ee-Nt;if(Math.abs(en)>Pt){var gn=ee,hn=bt,vn=at;ee=Nt+Pt*(zt&&ee>Nt?1:-1),bt=ge+Tt*Math.cos(ee),at=De+kt*Math.sin(ee),ut=w(bt,at,Tt,kt,jt,0,zt,hn,vn,[ee,gn,ge,De])}en=ee-Nt;var Wn=Math.cos(Nt),$r=Math.sin(Nt),wi=Math.cos(ee),ci=Math.sin(ee),oe=Math.tan(en/4),ce=4/3*Tt*oe,Ee=4/3*kt*oe,Pe=[pt,Lt],Fe=[pt+ce*$r,Lt-Ee*Wn],Ue=[bt+ce*ci,at-Ee*wi],Qe=[bt,at];if(Fe[0]=2*Pe[0]-Fe[0],Fe[1]=2*Pe[1]-Fe[1],ft)return[Fe,Ue,Qe].concat(ut);ut=[Fe,Ue,Qe].concat(ut).join().split(",");for(var rr=[],We=0,fr=ut.length;We<fr;We++)rr[We]=We%2?er(ut[We-1],ut[We],q).y:er(ut[We],ut[We+1],q).x;return rr},M=function(pt,Lt){var Tt=A(pt),kt=Lt&&A(Lt),jt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Wt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},zt=[],bt=[],at="",ft="",Pt,q=function(Re,Ke,hr){var Sr,Rr;if(!Re)return["C",Ke.x,Ke.y,Ke.x,Ke.y,Ke.x,Ke.y];switch(!(Re[0]in{T:1,Q:1})&&(Ke.qx=Ke.qy=null),Re[0]){case"M":Ke.X=Re[1],Ke.Y=Re[2];break;case"A":Re=["C"].concat(w.apply(0,[Ke.x,Ke.y].concat(Re.slice(1))));break;case"S":hr==="C"||hr==="S"?(Sr=Ke.x*2-Ke.bx,Rr=Ke.y*2-Ke.by):(Sr=Ke.x,Rr=Ke.y),Re=["C",Sr,Rr].concat(Re.slice(1));break;case"T":hr==="Q"||hr==="T"?(Ke.qx=Ke.x*2-Ke.qx,Ke.qy=Ke.y*2-Ke.qy):(Ke.qx=Ke.x,Ke.qy=Ke.y),Re=["C"].concat(C(Ke.x,Ke.y,Ke.qx,Ke.qy,Re[1],Re[2]));break;case"Q":Ke.qx=Re[1],Ke.qy=Re[2],Re=["C"].concat(C(Ke.x,Ke.y,Re[1],Re[2],Re[3],Re[4]));break;case"L":Re=["C"].concat(x(Ke.x,Ke.y,Re[1],Re[2]));break;case"H":Re=["C"].concat(x(Ke.x,Ke.y,Re[1],Ke.y));break;case"V":Re=["C"].concat(x(Ke.x,Ke.y,Ke.x,Re[1]));break;case"Z":Re=["C"].concat(x(Ke.x,Ke.y,Ke.X,Ke.Y));break;default:break}return Re},ut=function(Re,Ke){if(Re[Ke].length>7){Re[Ke].shift();for(var hr=Re[Ke];hr.length;)zt[Ke]="A",kt&&(bt[Ke]="A"),Re.splice(Ke++,0,["C"].concat(hr.splice(0,6)));Re.splice(Ke,1),Pt=Math.max(Tt.length,kt&&kt.length||0)}},Et=function(Re,Ke,hr,Sr,Rr){Re&&Ke&&Re[Rr][0]==="M"&&Ke[Rr][0]!=="M"&&(Ke.splice(Rr,0,["M",Sr.x,Sr.y]),hr.bx=0,hr.by=0,hr.x=Re[Rr][1],hr.y=Re[Rr][2],Pt=Math.max(Tt.length,kt&&kt.length||0))};Pt=Math.max(Tt.length,kt&&kt.length||0);for(var Nt=0;Nt<Pt;Nt++){Tt[Nt]&&(at=Tt[Nt][0]),at!=="C"&&(zt[Nt]=at,Nt&&(ft=zt[Nt-1])),Tt[Nt]=q(Tt[Nt],jt,ft),zt[Nt]!=="A"&&at==="C"&&(zt[Nt]="C"),ut(Tt,Nt),kt&&(kt[Nt]&&(at=kt[Nt][0]),at!=="C"&&(bt[Nt]=at,Nt&&(ft=bt[Nt-1])),kt[Nt]=q(kt[Nt],Wt,ft),bt[Nt]!=="A"&&at==="C"&&(bt[Nt]="C"),ut(kt,Nt)),Et(Tt,kt,jt,Wt,Nt),Et(kt,Tt,Wt,jt,Nt);var ee=Tt[Nt],ge=kt&&kt[Nt],De=ee.length,er=kt&&ge.length;jt.x=ee[De-2],jt.y=ee[De-1],jt.bx=parseFloat(ee[De-4])||jt.x,jt.by=parseFloat(ee[De-3])||jt.y,Wt.bx=kt&&(parseFloat(ge[er-4])||Wt.x),Wt.by=kt&&(parseFloat(ge[er-3])||Wt.y),Wt.x=kt&&ge[er-2],Wt.y=kt&&ge[er-1]}return kt?[Tt,kt]:Tt},S=/,?([a-z]),?/gi,I=function(pt){return pt.join(",").replace(S,"$1")},B=function(pt,Lt,Tt,kt,jt){var Wt=-3*Lt+9*Tt-9*kt+3*jt,zt=pt*Wt+6*Lt-12*Tt+6*kt;return pt*zt-3*Lt+3*Tt},N=function(pt,Lt,Tt,kt,jt,Wt,zt,bt,at){at===null&&(at=1),at=at>1?1:at<0?0:at;for(var ft=at/2,Pt=12,q=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ut=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Et=0,Nt=0;Nt<Pt;Nt++){var ee=ft*q[Nt]+ft,ge=B(ee,pt,Tt,jt,zt),De=B(ee,Lt,kt,Wt,bt),er=ge*ge+De*De;Et+=ut[Nt]*Math.sqrt(er)}return ft*Et},G=function(pt,Lt,Tt,kt,jt,Wt,zt,bt){for(var at=[],ft=[[],[]],Pt,q,ut,Et,Nt=0;Nt<2;++Nt){if(Nt===0?(q=6*pt-12*Tt+6*jt,Pt=-3*pt+9*Tt-9*jt+3*zt,ut=3*Tt-3*pt):(q=6*Lt-12*kt+6*Wt,Pt=-3*Lt+9*kt-9*Wt+3*bt,ut=3*kt-3*Lt),Math.abs(Pt)<1e-12){if(Math.abs(q)<1e-12)continue;Et=-ut/q,Et>0&&Et<1&&at.push(Et);continue}var ee=q*q-4*ut*Pt,ge=Math.sqrt(ee);if(!(ee<0)){var De=(-q+ge)/(2*Pt);De>0&&De<1&&at.push(De);var er=(-q-ge)/(2*Pt);er>0&&er<1&&at.push(er)}}for(var Re=at.length,Ke=Re,hr;Re--;)Et=at[Re],hr=1-Et,ft[0][Re]=hr*hr*hr*pt+3*hr*hr*Et*Tt+3*hr*Et*Et*jt+Et*Et*Et*zt,ft[1][Re]=hr*hr*hr*Lt+3*hr*hr*Et*kt+3*hr*Et*Et*Wt+Et*Et*Et*bt;return ft[0][Ke]=pt,ft[1][Ke]=Lt,ft[0][Ke+1]=zt,ft[1][Ke+1]=bt,ft[0].length=ft[1].length=Ke+2,{min:{x:Math.min.apply(0,ft[0]),y:Math.min.apply(0,ft[1])},max:{x:Math.max.apply(0,ft[0]),y:Math.max.apply(0,ft[1])}}},W=function(pt,Lt,Tt,kt,jt,Wt,zt,bt){if(!(Math.max(pt,Tt)<Math.min(jt,zt)||Math.min(pt,Tt)>Math.max(jt,zt)||Math.max(Lt,kt)<Math.min(Wt,bt)||Math.min(Lt,kt)>Math.max(Wt,bt))){var at=(pt*kt-Lt*Tt)*(jt-zt)-(pt-Tt)*(jt*bt-Wt*zt),ft=(pt*kt-Lt*Tt)*(Wt-bt)-(Lt-kt)*(jt*bt-Wt*zt),Pt=(pt-Tt)*(Wt-bt)-(Lt-kt)*(jt-zt);if(!!Pt){var q=at/Pt,ut=ft/Pt,Et=+q.toFixed(2),Nt=+ut.toFixed(2);if(!(Et<+Math.min(pt,Tt).toFixed(2)||Et>+Math.max(pt,Tt).toFixed(2)||Et<+Math.min(jt,zt).toFixed(2)||Et>+Math.max(jt,zt).toFixed(2)||Nt<+Math.min(Lt,kt).toFixed(2)||Nt>+Math.max(Lt,kt).toFixed(2)||Nt<+Math.min(Wt,bt).toFixed(2)||Nt>+Math.max(Wt,bt).toFixed(2)))return{x:q,y:ut}}}},$=function(pt,Lt,Tt){return Lt>=pt.x&&Lt<=pt.x+pt.width&&Tt>=pt.y&&Tt<=pt.y+pt.height},H=function(pt,Lt,Tt,kt,jt){if(jt)return[["M",+pt+ +jt,Lt],["l",Tt-jt*2,0],["a",jt,jt,0,0,1,jt,jt],["l",0,kt-jt*2],["a",jt,jt,0,0,1,-jt,jt],["l",jt*2-Tt,0],["a",jt,jt,0,0,1,-jt,-jt],["l",0,jt*2-kt],["a",jt,jt,0,0,1,jt,-jt],["z"]];var Wt=[["M",pt,Lt],["l",Tt,0],["l",0,kt],["l",-Tt,0],["z"]];return Wt.parsePathArray=I,Wt},j=function(pt,Lt,Tt,kt){return pt===null&&(pt=Lt=Tt=kt=0),Lt===null&&(Lt=pt.y,Tt=pt.width,kt=pt.height,pt=pt.x),{x:pt,y:Lt,width:Tt,w:Tt,height:kt,h:kt,x2:pt+Tt,y2:Lt+kt,cx:pt+Tt/2,cy:Lt+kt/2,r1:Math.min(Tt,kt)/2,r2:Math.max(Tt,kt)/2,r0:Math.sqrt(Tt*Tt+kt*kt)/2,path:H(pt,Lt,Tt,kt),vb:[pt,Lt,Tt,kt].join(" ")}},nt=function(pt,Lt){return pt=j(pt),Lt=j(Lt),$(Lt,pt.x,pt.y)||$(Lt,pt.x2,pt.y)||$(Lt,pt.x,pt.y2)||$(Lt,pt.x2,pt.y2)||$(pt,Lt.x,Lt.y)||$(pt,Lt.x2,Lt.y)||$(pt,Lt.x,Lt.y2)||$(pt,Lt.x2,Lt.y2)||(pt.x<Lt.x2&&pt.x>Lt.x||Lt.x<pt.x2&&Lt.x>pt.x)&&(pt.y<Lt.y2&&pt.y>Lt.y||Lt.y<pt.y2&&Lt.y>pt.y)},rt=function(pt,Lt,Tt,kt,jt,Wt,zt,bt){(0,d.isArray)(pt)||(pt=[pt,Lt,Tt,kt,jt,Wt,zt,bt]);var at=G.apply(null,pt);return j(at.min.x,at.min.y,at.max.x-at.min.x,at.max.y-at.min.y)},mt=function(pt,Lt,Tt,kt,jt,Wt,zt,bt,at){var ft=1-at,Pt=Math.pow(ft,3),q=Math.pow(ft,2),ut=at*at,Et=ut*at,Nt=Pt*pt+q*3*at*Tt+ft*3*at*at*jt+Et*zt,ee=Pt*Lt+q*3*at*kt+ft*3*at*at*Wt+Et*bt,ge=pt+2*at*(Tt-pt)+ut*(jt-2*Tt+pt),De=Lt+2*at*(kt-Lt)+ut*(Wt-2*kt+Lt),er=Tt+2*at*(jt-Tt)+ut*(zt-2*jt+Tt),Re=kt+2*at*(Wt-kt)+ut*(bt-2*Wt+kt),Ke=ft*pt+at*Tt,hr=ft*Lt+at*kt,Sr=ft*jt+at*zt,Rr=ft*Wt+at*bt,vr=90-Math.atan2(ge-er,De-Re)*180/Math.PI;return{x:Nt,y:ee,m:{x:ge,y:De},n:{x:er,y:Re},start:{x:Ke,y:hr},end:{x:Sr,y:Rr},alpha:vr}},Ft=function(pt,Lt,Tt){var kt=rt(pt),jt=rt(Lt);if(!nt(kt,jt))return Tt?0:[];for(var Wt=N.apply(0,pt),zt=N.apply(0,Lt),bt=~~(Wt/8),at=~~(zt/8),ft=[],Pt=[],q={},ut=Tt?0:[],Et=0;Et<bt+1;Et++){var Nt=mt.apply(0,pt.concat(Et/bt));ft.push({x:Nt.x,y:Nt.y,t:Et/bt})}for(var Et=0;Et<at+1;Et++){var Nt=mt.apply(0,Lt.concat(Et/at));Pt.push({x:Nt.x,y:Nt.y,t:Et/at})}for(var Et=0;Et<bt;Et++)for(var ee=0;ee<at;ee++){var ge=ft[Et],De=ft[Et+1],er=Pt[ee],Re=Pt[ee+1],Ke=Math.abs(De.x-ge.x)<.001?"y":"x",hr=Math.abs(Re.x-er.x)<.001?"y":"x",Sr=W(ge.x,ge.y,De.x,De.y,er.x,er.y,Re.x,Re.y);if(Sr){if(q[Sr.x.toFixed(4)]===Sr.y.toFixed(4))continue;q[Sr.x.toFixed(4)]=Sr.y.toFixed(4);var Rr=ge.t+Math.abs((Sr[Ke]-ge[Ke])/(De[Ke]-ge[Ke]))*(De.t-ge.t),vr=er.t+Math.abs((Sr[hr]-er[hr])/(Re[hr]-er[hr]))*(Re.t-er.t);Rr>=0&&Rr<=1&&vr>=0&&vr<=1&&(Tt?ut+=1:ut.push({x:Sr.x,y:Sr.y,t1:Rr,t2:vr}))}}return ut},Gt=function(pt,Lt,Tt){pt=M(pt),Lt=M(Lt);for(var kt,jt,Wt,zt,bt,at,ft,Pt,q,ut,Et=Tt?0:[],Nt=0,ee=pt.length;Nt<ee;Nt++){var ge=pt[Nt];if(ge[0]==="M")kt=bt=ge[1],jt=at=ge[2];else{ge[0]==="C"?(q=[kt,jt].concat(ge.slice(1)),kt=q[6],jt=q[7]):(q=[kt,jt,kt,jt,bt,at,bt,at],kt=bt,jt=at);for(var De=0,er=Lt.length;De<er;De++){var Re=Lt[De];if(Re[0]==="M")Wt=ft=Re[1],zt=Pt=Re[2];else{Re[0]==="C"?(ut=[Wt,zt].concat(Re.slice(1)),Wt=ut[6],zt=ut[7]):(ut=[Wt,zt,Wt,zt,ft,Pt,ft,Pt],Wt=ft,zt=Pt);var Ke=Ft(q,ut,Tt);if(Tt)Et+=Ke;else{for(var hr=0,Sr=Ke.length;hr<Sr;hr++)Ke[hr].segment1=Nt,Ke[hr].segment2=De,Ke[hr].bez1=q,Ke[hr].bez2=ut;Et=Et.concat(Ke)}}}}}return Et},gt=function(pt,Lt){return Gt(pt,Lt)};function st(pt,Lt){var Tt=[],kt=[];function jt(Wt,zt){if(Wt.length===1)Tt.push(Wt[0]),kt.push(Wt[0]);else{for(var bt=[],at=0;at<Wt.length-1;at++)at===0&&Tt.push(Wt[0]),at===Wt.length-2&&kt.push(Wt[at+1]),bt[at]=[(1-zt)*Wt[at][0]+zt*Wt[at+1][0],(1-zt)*Wt[at][1]+zt*Wt[at+1][1]];jt(bt,zt)}}return pt.length&&jt(pt,Lt),{left:Tt,right:kt.reverse()}}function Xt(pt,Lt,Tt){var kt=[[pt[1],pt[2]]];Tt=Tt||2;var jt=[];Lt[0]==="A"?(kt.push(Lt[6]),kt.push(Lt[7])):Lt[0]==="C"?(kt.push([Lt[1],Lt[2]]),kt.push([Lt[3],Lt[4]]),kt.push([Lt[5],Lt[6]])):Lt[0]==="S"||Lt[0]==="Q"?(kt.push([Lt[1],Lt[2]]),kt.push([Lt[3],Lt[4]])):kt.push([Lt[1],Lt[2]]);for(var Wt=kt,zt=1/Tt,bt=0;bt<Tt-1;bt++){var at=zt/(1-zt*bt),ft=st(Wt,at);jt.push(ft.left),Wt=ft.right}jt.push(Wt);var Pt=jt.map(function(q){var ut=[];return q.length===4&&(ut.push("C"),ut=ut.concat(q[2])),q.length>=3&&(q.length===3&&ut.push("Q"),ut=ut.concat(q[1])),q.length===2&&ut.push("L"),ut=ut.concat(q[q.length-1]),ut});return Pt}var Q=function(pt,Lt,Tt){if(Tt===1)return[[].concat(pt)];var kt=[];if(Lt[0]==="L"||Lt[0]==="C"||Lt[0]==="Q")kt=kt.concat(Xt(pt,Lt,Tt));else{var jt=[].concat(pt);jt[0]==="M"&&(jt[0]="L");for(var Wt=0;Wt<=Tt-1;Wt++)kt.push(jt)}return kt},qt=function(pt,Lt){if(pt.length===1)return pt;var Tt=pt.length-1,kt=Lt.length-1,jt=Tt/kt,Wt=[];if(pt.length===1&&pt[0][0]==="M"){for(var zt=0;zt<kt-Tt;zt++)pt.push(pt[0]);return pt}for(var zt=0;zt<kt;zt++){var bt=Math.floor(jt*zt);Wt[bt]=(Wt[bt]||0)+1}var at=Wt.reduce(function(ft,Pt,q){return q===Tt?ft.concat(pt[Tt]):ft.concat(Q(pt[q],pt[q+1],Pt))},[]);return at.unshift(pt[0]),(Lt[kt]==="Z"||Lt[kt]==="z")&&at.push("Z"),at},y=function(pt,Lt){if(pt.length!==Lt.length)return!1;var Tt=!0;return(0,d.each)(pt,function(kt,jt){if(kt!==Lt[jt])return Tt=!1,!1}),Tt};function Yt(pt,Lt,Tt){var kt=null,jt=Tt;return Lt<jt&&(jt=Lt,kt="add"),pt<jt&&(jt=pt,kt="del"),{type:kt,min:jt}}var K=function(pt,Lt){var Tt=pt.length,kt=Lt.length,jt,Wt,zt=0;if(Tt===0||kt===0)return null;for(var bt=[],at=0;at<=Tt;at++)bt[at]=[],bt[at][0]={min:at};for(var ft=0;ft<=kt;ft++)bt[0][ft]={min:ft};for(var at=1;at<=Tt;at++){jt=pt[at-1];for(var ft=1;ft<=kt;ft++){Wt=Lt[ft-1],y(jt,Wt)?zt=0:zt=1;var Pt=bt[at-1][ft].min+1,q=bt[at][ft-1].min+1,ut=bt[at-1][ft-1].min+zt;bt[at][ft]=Yt(Pt,q,ut)}}return bt},ht=function(pt,Lt){var Tt=K(pt,Lt),kt=pt.length,jt=Lt.length,Wt=[],zt=1,bt=1;if(Tt[kt][jt].min!==kt){for(var at=1;at<=kt;at++){var ft=Tt[at][at].min;bt=at;for(var Pt=zt;Pt<=jt;Pt++)Tt[at][Pt].min<ft&&(ft=Tt[at][Pt].min,bt=Pt);zt=bt,Tt[at][zt].type&&Wt.push({index:at-1,type:Tt[at][zt].type})}for(var at=Wt.length-1;at>=0;at--)zt=Wt[at].index,Wt[at].type==="add"?pt.splice(zt,0,[].concat(pt[zt])):pt.splice(zt,1)}kt=pt.length;var q=jt-kt;if(kt<jt)for(var at=0;at<q;at++)pt[kt-1][0]==="z"||pt[kt-1][0]==="Z"?pt.splice(kt-2,0,pt[kt-2]):pt.push(pt[kt-1]),kt+=1;return pt};function J(pt,Lt,Tt){for(var kt=[].concat(pt),jt,Wt=1/(Tt+1),zt=At(Lt)[0],bt=1;bt<=Tt;bt++)Wt*=bt,jt=Math.floor(pt.length*Wt),jt===0?kt.unshift([zt[0]*Wt+pt[jt][0]*(1-Wt),zt[1]*Wt+pt[jt][1]*(1-Wt)]):kt.splice(jt,0,[zt[0]*Wt+pt[jt][0]*(1-Wt),zt[1]*Wt+pt[jt][1]*(1-Wt)]);return kt}function At(pt){var Lt=[];switch(pt[0]){case"M":Lt.push([pt[1],pt[2]]);break;case"L":Lt.push([pt[1],pt[2]]);break;case"A":Lt.push([pt[6],pt[7]]);break;case"Q":Lt.push([pt[3],pt[4]]),Lt.push([pt[1],pt[2]]);break;case"T":Lt.push([pt[1],pt[2]]);break;case"C":Lt.push([pt[5],pt[6]]),Lt.push([pt[1],pt[2]]),Lt.push([pt[3],pt[4]]);break;case"S":Lt.push([pt[3],pt[4]]),Lt.push([pt[1],pt[2]]);break;case"H":Lt.push([pt[1],pt[1]]);break;case"V":Lt.push([pt[1],pt[1]]);break;default:}return Lt}var Vt=function(pt,Lt){if(pt.length<=1)return pt;for(var Tt,kt=0;kt<Lt.length;kt++)if(pt[kt][0]!==Lt[kt][0])switch(Tt=At(pt[kt]),Lt[kt][0]){case"M":pt[kt]=["M"].concat(Tt[0]);break;case"L":pt[kt]=["L"].concat(Tt[0]);break;case"A":pt[kt]=[].concat(Lt[kt]),pt[kt][6]=Tt[0][0],pt[kt][7]=Tt[0][1];break;case"Q":if(Tt.length<2)if(kt>0)Tt=J(Tt,pt[kt-1],1);else{pt[kt]=Lt[kt];break}pt[kt]=["Q"].concat(Tt.reduce(function(jt,Wt){return jt.concat(Wt)},[]));break;case"T":pt[kt]=["T"].concat(Tt[0]);break;case"C":if(Tt.length<3)if(kt>0)Tt=J(Tt,pt[kt-1],2);else{pt[kt]=Lt[kt];break}pt[kt]=["C"].concat(Tt.reduce(function(jt,Wt){return jt.concat(Wt)},[]));break;case"S":if(Tt.length<2)if(kt>0)Tt=J(Tt,pt[kt-1],1);else{pt[kt]=Lt[kt];break}pt[kt]=["S"].concat(Tt.reduce(function(jt,Wt){return jt.concat(Wt)},[]));break;default:pt[kt]=Lt[kt]}return pt}},83421:function(xt,T,v){"use strict";v.d(T,{FE:function(){return F},mY:function(){return O},$O:function(){return _}});var d=v(64753),c=v(38479);function F(P,A,x){var C=1;if((0,d.HD)(P)&&(C=P.split(`
`).length),C>1){var w=L(A,x);return A*C+w*(C-1)}return A}function L(P,A){return A?A-P:P*.14}function O(P,A){var x=(0,c.L)(),C=0;if((0,d.kK)(P)||P==="")return C;if(x.save(),x.font=A,(0,d.HD)(P)&&P.includes(`
`)){var w=P.split(`
`);(0,d.S6)(w,function(M){var S=x.measureText(M).width;C<S&&(C=S)})}else C=x.measureText(P).width;return x.restore(),C}function _(P){var A=P.fontSize,x=P.fontFamily,C=P.fontWeight,w=P.fontStyle,M=P.fontVariant;return[w,M,C,A+"px",x].join(" ").trim()}},64753:function(xt,T,v){"use strict";v.d(T,{As:function(){return c},jU:function(){return F},kK:function(){return d.isNil},mf:function(){return d.isFunction},HD:function(){return d.isString},Kn:function(){return d.isObject},CD:function(){return d.mix},S6:function(){return d.each},jC:function(){return d.upperFirst},UY:function(){return L},pP:function(){return O}});var d=v(26169);function c(_,P){var A=_.indexOf(P);A!==-1&&_.splice(A,1)}var F=typeof window!="undefined"&&typeof window.document!="undefined";function L(_,P){if(_.isCanvas())return!0;for(var A=P.getParent(),x=!1;A;){if(A===_){x=!0;break}A=A.getParent()}return x}function O(_){return _.cfg.visible&&_.cfg.capture}},60960:function(xt,T){"use strict";var v;v={value:!0};var d=function(){function c(F,L){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=F,this.name=F,this.originalEvent=L,this.timeStamp=L.timeStamp}return c.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c.prototype.toString=function(){var F=this.type;return"[Event (type="+F+")]"},c.prototype.save=function(){},c.prototype.restore=function(){},c}();T.Z=d},69813:function(xt,T,v){"use strict";v.r(T),v.d(T,{Canvas:function(){return Dt},Event:function(){return F.Event},Group:function(){return De},Shape:function(){return d},__esModule:function(){return ni.X},version:function(){return Ct}});var d={};v.r(d),v.d(d,{Base:function(){return Re},Circle:function(){return hr},Ellipse:function(){return vr},Image:function(){return hn},Line:function(){return wi},Marker:function(){return Ee},Path:function(){return jr},Polygon:function(){return Se},Polyline:function(){return tr},Rect:function(){return Br},Text:function(){return Pn}});var c=v(21362),F=v(23443),L=v(83438),O=v(55535),_=v(91110),P=v(21429),A=v(91577),x=v(61823),C=v(62352),w=v(47203),M=v(37250),S=v(88041);function I(){return window?window.devicePixelRatio:1}function B(ct,vt,ot,St){var Mt=ct-ot,te=vt-St;return Math.sqrt(Mt*Mt+te*te)}function N(ct,vt,ot,St,Mt,te){return Mt>=ct&&Mt<=ct+ot&&te>=vt&&te<=vt+St}function G(ct,vt){return!(vt.minX>ct.maxX||vt.maxX<ct.minX||vt.minY>ct.maxY||vt.maxY<ct.minY)}function W(ct,vt){return!ct||!vt?ct||vt:{minX:Math.min(ct.minX,vt.minX),minY:Math.min(ct.minY,vt.minY),maxX:Math.max(ct.maxX,vt.maxX),maxY:Math.max(ct.maxY,vt.maxY)}}function $(ct,vt){return ct[0]===vt[0]&&ct[1]===vt[1]}var H=v(26169),j=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,nt=/[^\s\,]+/gi,rt=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,mt=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ft=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Gt=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function gt(ct,vt){var ot=ct.match(Gt);(0,A.default)(ot,function(St){var Mt=St.split(":");vt.addColorStop(Mt[0],Mt[1])})}function st(ct,vt,ot){var St=rt.exec(ot),Mt=parseFloat(St[1])%360*(Math.PI/180),te=St[2],ne=vt.getBBox(),de,He;Mt>=0&&Mt<1/2*Math.PI?(de={x:ne.minX,y:ne.minY},He={x:ne.maxX,y:ne.maxY}):1/2*Math.PI<=Mt&&Mt<Math.PI?(de={x:ne.maxX,y:ne.minY},He={x:ne.minX,y:ne.maxY}):Math.PI<=Mt&&Mt<3/2*Math.PI?(de={x:ne.maxX,y:ne.maxY},He={x:ne.minX,y:ne.minY}):(de={x:ne.minX,y:ne.maxY},He={x:ne.maxX,y:ne.minY});var Ge=Math.tan(Mt),Ie=Ge*Ge,qe=(He.x-de.x+Ge*(He.y-de.y))/(Ie+1)+de.x,xr=Ge*(He.x-de.x+Ge*(He.y-de.y))/(Ie+1)+de.y,Pr=ct.createLinearGradient(de.x,de.y,qe,xr);return gt(te,Pr),Pr}function Xt(ct,vt,ot){var St=mt.exec(ot),Mt=parseFloat(St[1]),te=parseFloat(St[2]),ne=parseFloat(St[3]),de=St[4];if(ne===0){var He=de.match(Gt);return He[He.length-1].split(":")[1]}var Ge=vt.getBBox(),Ie=Ge.maxX-Ge.minX,qe=Ge.maxY-Ge.minY,xr=Math.sqrt(Ie*Ie+qe*qe)/2,Pr=ct.createRadialGradient(Ge.minX+Ie*Mt,Ge.minY+qe*te,0,Ge.minX+Ie/2,Ge.minY+qe/2,ne*xr);return gt(de,Pr),Pr}function Q(ct,vt,ot){if(vt.get("patternSource")&&vt.get("patternSource")===ot)return vt.get("pattern");var St,Mt,te=Ft.exec(ot),ne=te[1],de=te[2];function He(){St=ct.createPattern(Mt,ne),vt.set("pattern",St),vt.set("patternSource",ot)}switch(ne){case"a":ne="repeat";break;case"x":ne="repeat-x";break;case"y":ne="repeat-y";break;case"n":ne="no-repeat";break;default:ne="no-repeat"}return Mt=new Image,de.match(/^data:/i)||(Mt.crossOrigin="Anonymous"),Mt.src=de,Mt.complete?He():(Mt.onload=He,Mt.src=Mt.src),St}function qt(ct,vt,ot){if((0,O.default)(ot)){if(ot[1]==="("||ot[2]==="("){if(ot[0]==="l")return st(ct,vt,ot);if(ot[0]==="r")return Xt(ct,vt,ot);if(ot[0]==="p")return Q(ct,vt,ot)}return ot}}function y(ct){var vt=0,ot=0,St=0,Mt=0;return(0,P.default)(ct)?ct.length===1?vt=ot=St=Mt=ct[0]:ct.length===2?(vt=St=ct[0],ot=Mt=ct[1]):ct.length===3?(vt=ct[0],ot=Mt=ct[1],St=ct[2]):(vt=ct[0],ot=ct[1],St=ct[2],Mt=ct[3]):vt=ot=St=Mt=ct,[vt,ot,St,Mt]}function Yt(ct){return Math.sqrt(ct[0]*ct[0]+ct[1]*ct[1])}function K(ct,vt){return Yt(ct)*Yt(vt)?(ct[0]*vt[0]+ct[1]*vt[1])/(Yt(ct)*Yt(vt)):1}function ht(ct,vt){return(ct[0]*vt[1]<ct[1]*vt[0]?-1:1)*Math.acos(K(ct,vt))}function J(ct,vt){var ot=vt[1],St=vt[2],Mt=(0,C.default)((0,x.default)(vt[3]),Math.PI*2),te=vt[4],ne=vt[5],de=ct[0],He=ct[1],Ge=vt[6],Ie=vt[7],qe=Math.cos(Mt)*(de-Ge)/2+Math.sin(Mt)*(He-Ie)/2,xr=-1*Math.sin(Mt)*(de-Ge)/2+Math.cos(Mt)*(He-Ie)/2,Pr=qe*qe/(ot*ot)+xr*xr/(St*St);Pr>1&&(ot*=Math.sqrt(Pr),St*=Math.sqrt(Pr));var Wr=ot*ot*(xr*xr)+St*St*(qe*qe),Lr=Wr?Math.sqrt((ot*ot*(St*St)-Wr)/Wr):1;te===ne&&(Lr*=-1),isNaN(Lr)&&(Lr=0);var br=St?Lr*ot*xr/St:0,Dr=ot?Lr*-St*qe/ot:0,Sn=(de+Ge)/2+Math.cos(Mt)*br-Math.sin(Mt)*Dr,Dn=(He+Ie)/2+Math.sin(Mt)*br+Math.cos(Mt)*Dr,Yn=[(qe-br)/ot,(xr-Dr)/St],Ln=[(-1*qe-br)/ot,(-1*xr-Dr)/St],_n=ht([1,0],Yn),Jn=ht(Yn,Ln);return K(Yn,Ln)<=-1&&(Jn=Math.PI),K(Yn,Ln)>=1&&(Jn=0),ne===0&&Jn>0&&(Jn=Jn-2*Math.PI),ne===1&&Jn<0&&(Jn=Jn+2*Math.PI),{cx:Sn,cy:Dn,rx:$(ct,[Ge,Ie])?0:ot,ry:$(ct,[Ge,Ie])?0:St,startAngle:_n,endAngle:_n+Jn,xRotation:Mt,arcFlag:te,sweepFlag:ne}}var At=Math.sin,Vt=Math.cos,pt=Math.atan2,Lt=Math.PI;function Tt(ct,vt,ot,St,Mt,te,ne){var de=vt.stroke,He=vt.lineWidth,Ge=ot-Mt,Ie=St-te,qe=pt(Ie,Ge),xr=new jr({type:"path",canvas:ct.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Vt(Lt/6)+","+10*At(Lt/6)+" L0,0 L"+10*Vt(Lt/6)+",-"+10*At(Lt/6),stroke:de,lineWidth:He}});xr.translate(Mt,te),xr.rotateAtPoint(Mt,te,qe),ct.set(ne?"startArrowShape":"endArrowShape",xr)}function kt(ct,vt,ot,St,Mt,te,ne){var de=vt.startArrow,He=vt.endArrow,Ge=vt.stroke,Ie=vt.lineWidth,qe=ne?de:He,xr=qe.d,Pr=qe.fill,Wr=qe.stroke,Lr=qe.lineWidth,br=(0,c.__rest)(qe,["d","fill","stroke","lineWidth"]),Dr=ot-Mt,Sn=St-te,Dn=pt(Sn,Dr);xr&&(Mt=Mt-Vt(Dn)*xr,te=te-At(Dn)*xr);var Yn=new jr({type:"path",canvas:ct.get("canvas"),isArrowShape:!0,attrs:(0,c.__assign)((0,c.__assign)({},br),{stroke:Wr||Ge,lineWidth:Lr||Ie,fill:Pr})});Yn.translate(Mt,te),Yn.rotateAtPoint(Mt,te,Dn),ct.set(ne?"startArrowShape":"endArrowShape",Yn)}function jt(ct,vt,ot,St,Mt){var te=pt(St-vt,ot-ct);return{dx:Vt(te)*Mt,dy:At(te)*Mt}}function Wt(ct,vt,ot,St,Mt,te){typeof vt.startArrow=="object"?kt(ct,vt,ot,St,Mt,te,!0):vt.startArrow?Tt(ct,vt,ot,St,Mt,te,!0):ct.set("startArrowShape",null)}function zt(ct,vt,ot,St,Mt,te){typeof vt.endArrow=="object"?kt(ct,vt,ot,St,Mt,te,!1):vt.endArrow?Tt(ct,vt,ot,St,Mt,te,!1):ct.set("startArrowShape",null)}var bt={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function at(ct,vt){var ot=vt.attr();for(var St in ot){var Mt=ot[St],te=bt[St]?bt[St]:St;te==="matrix"&&Mt?ct.transform(Mt[0],Mt[1],Mt[3],Mt[4],Mt[6],Mt[7]):te==="lineDash"&&ct.setLineDash?(0,H.isArray)(Mt)&&ct.setLineDash(Mt):(te==="strokeStyle"||te==="fillStyle"?Mt=qt(ct,vt,Mt):te==="globalAlpha"&&(Mt=Mt*ct.globalAlpha),ct[te]=Mt)}}function ft(ct,vt,ot){for(var St=0;St<vt.length;St++){var Mt=vt[St];Mt.get("visible")?Mt.draw(ct,ot):Mt.skipDraw()}}function Pt(ct,vt,ot,St){var Mt=ot.path,te=ot.startArrow,ne=ot.endArrow,de=[0,0],He=[0,0],Ge={dx:0,dy:0};vt.beginPath();for(var Ie=0;Ie<Mt.length;Ie++){var qe=Mt[Ie],xr=qe[0];if(Ie===0&&te&&te.d){var Pr=ct.getStartTangent();Ge=jt(Pr[0][0],Pr[0][1],Pr[1][0],Pr[1][1],te.d)}else if(Ie===Mt.length-2&&Mt[Ie+1][0]==="Z"&&ne&&ne.d){var Wr=Mt[Ie+1];if(Wr[0]==="Z"){var Pr=ct.getEndTangent();Ge=jt(Pr[0][0],Pr[0][1],Pr[1][0],Pr[1][1],ne.d)}}else if(Ie===Mt.length-1&&ne&&ne.d&&Mt[0]!=="Z"){var Pr=ct.getEndTangent();Ge=jt(Pr[0][0],Pr[0][1],Pr[1][0],Pr[1][1],ne.d)}var Lr=Ge.dx,br=Ge.dy;switch(xr){case"M":vt.moveTo(qe[1]-Lr,qe[2]-br),He=[qe[1],qe[2]];break;case"L":vt.lineTo(qe[1]-Lr,qe[2]-br);break;case"Q":vt.quadraticCurveTo(qe[1],qe[2],qe[3]-Lr,qe[4]-br);break;case"C":vt.bezierCurveTo(qe[1],qe[2],qe[3],qe[4],qe[5]-Lr,qe[6]-br);break;case"A":{var Dr=void 0;St?(Dr=St[Ie],Dr||(Dr=J(de,qe),St[Ie]=Dr)):Dr=J(de,qe);var Sn=Dr.cx,Dn=Dr.cy,Yn=Dr.rx,Ln=Dr.ry,_n=Dr.startAngle,Jn=Dr.endAngle,Ii=Dr.xRotation,Qn=Dr.sweepFlag;if(vt.ellipse)vt.ellipse(Sn,Dn,Yn,Ln,Ii,_n,Jn,1-Qn);else{var qi=Yn>Ln?Yn:Ln,dn=Yn>Ln?1:Yn/Ln,Si=Yn>Ln?Ln/Yn:1;vt.translate(Sn,Dn),vt.rotate(Ii),vt.scale(dn,Si),vt.arc(0,0,qi,_n,Jn,1-Qn),vt.scale(1/dn,1/Si),vt.rotate(-Ii),vt.translate(-Sn,-Dn)}break}case"Z":vt.closePath();break;default:break}if(xr==="Z")de=He;else{var Zn=qe.length;de=[qe[Zn-2],qe[Zn-1]]}}}function q(ct,vt){var ot=ct.get("canvas");ot&&(vt==="remove"&&(ct._cacheCanvasBBox=ct.get("cacheCanvasBBox")),ct.get("hasChanged")||(ot.refreshElement(ct,vt,ot),ot.get("autoDraw")&&ot.draw(),ct.set("hasChanged",!0)))}function ut(ct){var vt;if(ct.destroyed)vt=ct._cacheCanvasBBox;else{var ot=ct.get("cacheCanvasBBox"),St=ot&&!!(ot.width&&ot.height),Mt=ct.getCanvasBBox(),te=Mt&&!!(Mt.width&&Mt.height);St&&te?vt=W(ot,Mt):St?vt=ot:te&&(vt=Mt)}return vt}function Et(ct){if(!ct.length)return null;var vt=[],ot=[],St=[],Mt=[];return(0,H.each)(ct,function(te){var ne=ut(te);ne&&(vt.push(ne.minX),ot.push(ne.minY),St.push(ne.maxX),Mt.push(ne.maxY))}),{minX:Math.min.apply(null,vt),minY:Math.min.apply(null,ot),maxX:Math.max.apply(null,St),maxY:Math.max.apply(null,Mt)}}function Nt(ct,vt){return!ct||!vt||!G(ct,vt)?null:{minX:Math.max(ct.minX,vt.minX),minY:Math.max(ct.minY,vt.minY),maxX:Math.min(ct.maxX,vt.maxX),maxY:Math.min(ct.maxY,vt.maxY)}}var ee=v(46479),ge=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.onCanvasChange=function(ot){q(this,ot)},vt.prototype.getShapeBase=function(){return d},vt.prototype.getGroupBase=function(){return vt},vt.prototype._applyClip=function(ot,St){St&&(ot.save(),at(ot,St),St.createPath(ot),ot.restore(),ot.clip(),St._afterDraw())},vt.prototype.draw=function(ot,St){var Mt=this.getChildren();Mt.length&&(ot.save(),at(ot,this),this._applyClip(ot,this.getClip()),ft(ot,Mt,St),ot.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},vt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},vt}(F.AbstractGroup),De=ge,er=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},vt.prototype.getShapeBase=function(){return d},vt.prototype.getGroupBase=function(){return De},vt.prototype.onCanvasChange=function(ot){q(this,ot)},vt.prototype.calculateBBox=function(){var ot=this.get("type"),St=this.getHitLineWidth(),Mt=(0,ee.b)(ot),te=Mt(this),ne=St/2,de=te.x-ne,He=te.y-ne,Ge=te.x+te.width+ne,Ie=te.y+te.height+ne;return{x:de,minX:de,y:He,minY:He,width:te.width+St,height:te.height+St,maxX:Ge,maxY:Ie}},vt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},vt.prototype.isStroke=function(){return!!this.attrs.stroke},vt.prototype._applyClip=function(ot,St){St&&(ot.save(),at(ot,St),St.createPath(ot),ot.restore(),ot.clip(),St._afterDraw())},vt.prototype.draw=function(ot,St){var Mt=this.getClip();if(St){var te=Mt?Et([this,Mt]):this.getCanvasBBox();if(!G(St,te)){this.set("hasChanged",!1);return}}ot.save(),at(ot,this),this._applyClip(ot,this.getClip()),this.drawPath(ot),ot.restore(),this._afterDraw()},vt.prototype._afterDraw=function(){var ot=this.getCanvasBBox(),St=this.getCanvas();if(this.set("cacheCanvasBBox",ot),St){var Mt=St.getViewRange();this.set("isInView",G(ot,Mt))}this.set("hasChanged",!1)},vt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},vt.prototype.drawPath=function(ot){this.createPath(ot),this.strokeAndFill(ot),this.afterDrawPath(ot)},vt.prototype.fill=function(ot){ot.fill()},vt.prototype.stroke=function(ot){ot.stroke()},vt.prototype.strokeAndFill=function(ot){var St=this.attrs,Mt=St.lineWidth,te=St.opacity,ne=St.strokeOpacity,de=St.fillOpacity;this.isFill()&&(!(0,L.default)(de)&&de!==1?(ot.globalAlpha=de,this.fill(ot),ot.globalAlpha=te):this.fill(ot)),this.isStroke()&&Mt>0&&(!(0,L.default)(ne)&&ne!==1&&(ot.globalAlpha=ne),this.stroke(ot)),this.afterDrawPath(ot)},vt.prototype.createPath=function(ot){},vt.prototype.afterDrawPath=function(ot){},vt.prototype.isInShape=function(ot,St){var Mt=this.isStroke(),te=this.isFill(),ne=this.getHitLineWidth();return this.isInStrokeOrPath(ot,St,Mt,te,ne)},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){return!1},vt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var ot=this.attrs;return ot.lineWidth+ot.lineAppendWidth},vt}(F.AbstractShape),Re=er,Ke=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x:0,y:0,r:0})},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){var de=this.attr(),He=de.x,Ge=de.y,Ie=de.r,qe=ne/2,xr=B(He,Ge,ot,St);return te&&Mt?xr<=Ie+qe:te?xr<=Ie:Mt?xr>=Ie-qe&&xr<=Ie+qe:!1},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.x,te=St.y,ne=St.r;ot.beginPath(),ot.arc(Mt,te,ne,0,Math.PI*2,!1),ot.closePath()},vt}(Re),hr=Ke;function Sr(ct,vt,ot,St){return ct/(ot*ot)+vt/(St*St)}var Rr=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x:0,y:0,rx:0,ry:0})},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){var de=this.attr(),He=ne/2,Ge=de.x,Ie=de.y,qe=de.rx,xr=de.ry,Pr=(ot-Ge)*(ot-Ge),Wr=(St-Ie)*(St-Ie);return te&&Mt?Sr(Pr,Wr,qe+He,xr+He)<=1:te?Sr(Pr,Wr,qe,xr)<=1:Mt?Sr(Pr,Wr,qe-He,xr-He)>=1&&Sr(Pr,Wr,qe+He,xr+He)<=1:!1},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.x,te=St.y,ne=St.rx,de=St.ry;if(ot.beginPath(),ot.ellipse)ot.ellipse(Mt,te,ne,de,0,0,Math.PI*2,!1);else{var He=ne>de?ne:de,Ge=ne>de?1:ne/de,Ie=ne>de?de/ne:1;ot.save(),ot.translate(Mt,te),ot.scale(Ge,Ie),ot.arc(0,0,He,0,Math.PI*2),ot.restore(),ot.closePath()}},vt}(Re),vr=Rr;function en(ct){return ct instanceof HTMLElement&&(0,O.default)(ct.nodeName)&&ct.nodeName.toUpperCase()==="CANVAS"}var gn=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x:0,y:0,width:0,height:0})},vt.prototype.initAttrs=function(ot){this._setImage(ot.img)},vt.prototype.isStroke=function(){return!1},vt.prototype.isOnlyHitBox=function(){return!0},vt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var ot=this.get("canvas");ot?ot.draw():this.createPath(this.get("context"))}},vt.prototype._setImage=function(ot){var St=this,Mt=this.attrs;if((0,O.default)(ot)){var te=new Image;te.onload=function(){if(St.destroyed)return!1;St.attr("img",te),St.set("loading",!1),St._afterLoading();var ne=St.get("callback");ne&&ne.call(St)},te.crossOrigin="Anonymous",te.src=ot,this.set("loading",!0)}else ot instanceof Image?(Mt.width||(Mt.width=ot.width),Mt.height||(Mt.height=ot.height)):en(ot)&&(Mt.width||(Mt.width=Number(ot.getAttribute("width"))),Mt.height||(Mt.height,Number(ot.getAttribute("height"))))},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),ot==="img"&&this._setImage(St)},vt.prototype.createPath=function(ot){if(this.get("loading")){this.set("toDraw",!0),this.set("context",ot);return}var St=this.attr(),Mt=St.x,te=St.y,ne=St.width,de=St.height,He=St.sx,Ge=St.sy,Ie=St.swidth,qe=St.sheight,xr=St.img;(xr instanceof Image||en(xr))&&(!(0,L.default)(He)&&!(0,L.default)(Ge)&&!(0,L.default)(Ie)&&!(0,L.default)(qe)?ot.drawImage(xr,He,Ge,Ie,qe,Mt,te,ne,de):ot.drawImage(xr,Mt,te,ne,de))},vt}(Re),hn=gn,vn=v(50131);function Wn(ct,vt,ot,St,Mt,te,ne){var de=Math.min(ct,ot),He=Math.max(ct,ot),Ge=Math.min(vt,St),Ie=Math.max(vt,St),qe=Mt/2;return te>=de-qe&&te<=He+qe&&ne>=Ge-qe&&ne<=Ie+qe?vn.default.pointToLine(ct,vt,ot,St,te,ne)<=Mt/2:!1}var $r=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},vt.prototype.initAttrs=function(ot){this.setArrow()},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),this.setArrow()},vt.prototype.setArrow=function(){var ot=this.attr(),St=ot.x1,Mt=ot.y1,te=ot.x2,ne=ot.y2,de=ot.startArrow,He=ot.endArrow;de&&Wt(this,ot,te,ne,St,Mt),He&&zt(this,ot,St,Mt,te,ne)},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){if(!Mt||!ne)return!1;var de=this.attr(),He=de.x1,Ge=de.y1,Ie=de.x2,qe=de.y2;return Wn(He,Ge,Ie,qe,ne,ot,St)},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.x1,te=St.y1,ne=St.x2,de=St.y2,He=St.startArrow,Ge=St.endArrow,Ie={dx:0,dy:0},qe={dx:0,dy:0};He&&He.d&&(Ie=jt(Mt,te,ne,de,St.startArrow.d)),Ge&&Ge.d&&(qe=jt(Mt,te,ne,de,St.endArrow.d)),ot.beginPath(),ot.moveTo(Mt+Ie.dx,te+Ie.dy),ot.lineTo(ne-qe.dx,de-qe.dy)},vt.prototype.afterDrawPath=function(ot){var St=this.get("startArrowShape"),Mt=this.get("endArrowShape");St&&St.draw(ot),Mt&&Mt.draw(ot)},vt.prototype.getTotalLength=function(){var ot=this.attr(),St=ot.x1,Mt=ot.y1,te=ot.x2,ne=ot.y2;return vn.default.length(St,Mt,te,ne)},vt.prototype.getPoint=function(ot){var St=this.attr(),Mt=St.x1,te=St.y1,ne=St.x2,de=St.y2;return vn.default.pointAt(Mt,te,ne,de,ot)},vt}(Re),wi=$r,ci=v(54401),oe={circle:function(ct,vt,ot){return[["M",ct-ot,vt],["A",ot,ot,0,1,0,ct+ot,vt],["A",ot,ot,0,1,0,ct-ot,vt]]},square:function(ct,vt,ot){return[["M",ct-ot,vt-ot],["L",ct+ot,vt-ot],["L",ct+ot,vt+ot],["L",ct-ot,vt+ot],["Z"]]},diamond:function(ct,vt,ot){return[["M",ct-ot,vt],["L",ct,vt-ot],["L",ct+ot,vt],["L",ct,vt+ot],["Z"]]},triangle:function(ct,vt,ot){var St=ot*Math.sin(1/3*Math.PI);return[["M",ct-ot,vt+St],["L",ct,vt-St],["L",ct+ot,vt+St],["Z"]]},"triangle-down":function(ct,vt,ot){var St=ot*Math.sin(1/3*Math.PI);return[["M",ct-ot,vt-St],["L",ct+ot,vt-St],["L",ct,vt+St],["Z"]]}},ce=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.initAttrs=function(ot){this._resetParamsCache()},vt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),["symbol","x","y","r","radius"].indexOf(ot)!==-1&&this._resetParamsCache()},vt.prototype.isOnlyHitBox=function(){return!0},vt.prototype._getR=function(ot){return(0,H.isNil)(ot.r)?ot.radius:ot.r},vt.prototype._getPath=function(){var ot=this.attr(),St=ot.x,Mt=ot.y,te=ot.symbol||"circle",ne=this._getR(ot),de,He;return(0,_.default)(te)?(de=te,He=de(St,Mt,ne),He=(0,ci.Z)(He)):(de=vt.Symbols[te],He=de(St,Mt,ne)),de?He:(console.warn(te+" marker is not supported."),null)},vt.prototype.createPath=function(ot){var St=this._getPath(),Mt=this.get("paramsCache");Pt(this,ot,{path:St},Mt)},vt.Symbols=oe,vt}(Re),Ee=ce,Pe=v(84104),Fe=v(36021),Ue=v(29423);function Qe(ct,vt,ot){var St=(0,Ue.getOffScreenContext)();return ct.createPath(St),St.isPointInPath(vt,ot)}var rr=1e-6;function We(ct){return Math.abs(ct)<rr?0:ct<0?-1:1}function fr(ct,vt,ot){return(ot[0]-ct[0])*(vt[1]-ct[1])==(vt[0]-ct[0])*(ot[1]-ct[1])&&Math.min(ct[0],vt[0])<=ot[0]&&ot[0]<=Math.max(ct[0],vt[0])&&Math.min(ct[1],vt[1])<=ot[1]&&ot[1]<=Math.max(ct[1],vt[1])}function fe(ct,vt,ot){var St=!1,Mt=ct.length;if(Mt<=2)return!1;for(var te=0;te<Mt;te++){var ne=ct[te],de=ct[(te+1)%Mt];if(fr(ne,de,[vt,ot]))return!0;We(ne[1]-ot)>0!=We(de[1]-ot)>0&&We(vt-(ot-ne[1])*(ne[0]-de[0])/(ne[1]-de[1])-ne[0])<0&&(St=!St)}return St}var re=v(63308);function Rt(ct,vt,ot,St,Mt,te,ne,de){var He=(Math.atan2(de-vt,ne-ct)+Math.PI*2)%(Math.PI*2);if(He<St||He>Mt)return!1;var Ge={x:ct+ot*Math.cos(He),y:vt+ot*Math.sin(He)};return B(Ge.x,Ge.y,ne,de)<=te/2}var ie=v(58198),be=v(92541);function Oe(ct){for(var vt=!1,ot=ct.length,St=0;St<ot;St++){var Mt=ct[St],te=Mt[0];if(te==="C"||te==="A"||te==="Q"){vt=!0;break}}return vt}function ze(ct,vt,ot,St){for(var Mt=!1,te=vt/2,ne=0;ne<ct.length;ne++){var de=ct[ne],He=de.currentPoint,Ge=de.params,Ie=de.prePoint,qe=de.box;if(!(qe&&!N(qe.x-te,qe.y-te,qe.width+vt,qe.height+vt,ot,St))){switch(de.command){case"L":case"Z":Mt=Wn(Ie[0],Ie[1],He[0],He[1],vt,ot,St);break;case"Q":var xr=re.default.pointDistance(Ie[0],Ie[1],Ge[1],Ge[2],Ge[3],Ge[4],ot,St);Mt=xr<=vt/2;break;case"C":var Pr=Pe.default.pointDistance(Ie[0],Ie[1],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5],Ge[6],ot,St);Mt=Pr<=vt/2;break;case"A":var Wr=de.arcParams,Lr=Wr.cx,br=Wr.cy,Dr=Wr.rx,Sn=Wr.ry,Dn=Wr.startAngle,Yn=Wr.endAngle,Ln=Wr.xRotation,_n=[ot,St,1],Jn=[1,0,0,0,1,0,0,0,1],Ii=Dr>Sn?Dr:Sn,Qn=Dr>Sn?1:Dr/Sn,qi=Dr>Sn?Sn/Dr:1;ie.translate(Jn,Jn,[-Lr,-br]),ie.rotate(Jn,Jn,-Ln),ie.scale(Jn,Jn,[1/Qn,1/qi]),be.transformMat3(_n,_n,Jn),Mt=Rt(0,0,Ii,Dn,Yn,vt,_n[0],_n[1]);break;default:break}if(Mt)break}}return Mt}function ke(ct){for(var vt=ct.length,ot=[],St=[],Mt=[],te=0;te<vt;te++){var ne=ct[te],de=ne[0];de==="M"?(Mt.length&&(St.push(Mt),Mt=[]),Mt.push([ne[1],ne[2]])):de==="Z"?Mt.length&&(ot.push(Mt),Mt=[]):Mt.push([ne[1],ne[2]])}return Mt.length>0&&St.push(Mt),{polygons:ot,polylines:St}}var Ze=(0,c.__assign)({hasArc:Oe,extractPolygons:ke,isPointInStroke:ze},F.PathUtil);function kr(ct,vt,ot){for(var St=!1,Mt=0;Mt<ct.length;Mt++){var te=ct[Mt];if(St=fe(te,vt,ot),St)break}return St}var Fr=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{startArrow:!1,endArrow:!1})},vt.prototype.initAttrs=function(ot){this._setPathArr(ot.path),this.setArrow()},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),ot==="path"&&this._setPathArr(St),this.setArrow()},vt.prototype._setPathArr=function(ot){this.attrs.path=(0,ci.Z)(ot);var St=Ze.hasArc(ot);this.set("hasArc",St),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},vt.prototype.getSegments=function(){var ot=this.get("segements");return ot||(ot=(0,Fe.default)(this.attr("path")),this.set("segments",ot)),ot},vt.prototype.setArrow=function(){var ot=this.attr(),St=ot.startArrow,Mt=ot.endArrow;if(St){var te=this.getStartTangent();Wt(this,ot,te[0][0],te[0][1],te[1][0],te[1][1])}if(Mt){var te=this.getEndTangent();zt(this,ot,te[0][0],te[0][1],te[1][0],te[1][1])}},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){var de=this.getSegments(),He=this.get("hasArc"),Ge=!1;if(Mt&&(Ge=Ze.isPointInStroke(de,ne,ot,St)),!Ge&&te)if(He)Ge=Qe(this,ot,St);else{var Ie=this.attr("path"),qe=Ze.extractPolygons(Ie);Ge=kr(qe.polygons,ot,St)||kr(qe.polylines,ot,St)}return Ge},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=this.get("paramsCache");Pt(this,ot,St,Mt)},vt.prototype.afterDrawPath=function(ot){var St=this.get("startArrowShape"),Mt=this.get("endArrowShape");St&&St.draw(ot),Mt&&Mt.draw(ot)},vt.prototype.getTotalLength=function(){var ot=this.get("totalLength");return(0,H.isNil)(ot)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):ot},vt.prototype.getPoint=function(ot){var St=this.get("tCache");St||(this._calculateCurve(),this._setTcache(),St=this.get("tCache"));var Mt,te,ne=this.get("curve");if(!St||St.length===0)return ne?{x:ne[0][1],y:ne[0][2]}:null;(0,H.each)(St,function(Ie,qe){ot>=Ie[0]&&ot<=Ie[1]&&(Mt=(ot-Ie[0])/(Ie[1]-Ie[0]),te=qe)});var de=ne[te];if((0,H.isNil)(de)||(0,H.isNil)(te))return null;var He=de.length,Ge=ne[te+1];return Pe.default.pointAt(de[He-2],de[He-1],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5],Ge[6],Mt)},vt.prototype._calculateCurve=function(){var ot=this.attr().path;this.set("curve",Ze.pathToCurve(ot))},vt.prototype._setTcache=function(){var ot=0,St=0,Mt=[],te,ne,de,He,Ge=this.get("curve");if(!!Ge){if((0,H.each)(Ge,function(Ie,qe){de=Ge[qe+1],He=Ie.length,de&&(ot+=Pe.default.length(Ie[He-2],Ie[He-1],de[1],de[2],de[3],de[4],de[5],de[6])||0)}),this.set("totalLength",ot),ot===0){this.set("tCache",[]);return}(0,H.each)(Ge,function(Ie,qe){de=Ge[qe+1],He=Ie.length,de&&(te=[],te[0]=St/ot,ne=Pe.default.length(Ie[He-2],Ie[He-1],de[1],de[2],de[3],de[4],de[5],de[6]),St+=ne||0,te[1]=St/ot,Mt.push(te))}),this.set("tCache",Mt)}},vt.prototype.getStartTangent=function(){var ot=this.getSegments(),St;if(ot.length>1){var Mt=ot[0].currentPoint,te=ot[1].currentPoint,ne=ot[1].startTangent;St=[],ne?(St.push([Mt[0]-ne[0],Mt[1]-ne[1]]),St.push([Mt[0],Mt[1]])):(St.push([te[0],te[1]]),St.push([Mt[0],Mt[1]]))}return St},vt.prototype.getEndTangent=function(){var ot=this.getSegments(),St=ot.length,Mt;if(St>1){var te=ot[St-2].currentPoint,ne=ot[St-1].currentPoint,de=ot[St-1].endTangent;Mt=[],de?(Mt.push([ne[0]-de[0],ne[1]-de[1]]),Mt.push([ne[0],ne[1]])):(Mt.push([te[0],te[1]]),Mt.push([ne[0],ne[1]]))}return Mt},vt}(Re),jr=Fr;function ve(ct,vt,ot,St,Mt){var te=ct.length;if(te<2)return!1;for(var ne=0;ne<te-1;ne++){var de=ct[ne][0],He=ct[ne][1],Ge=ct[ne+1][0],Ie=ct[ne+1][1];if(Wn(de,He,Ge,Ie,vt,ot,St))return!0}if(Mt){var qe=ct[0],xr=ct[te-1];if(Wn(qe[0],qe[1],xr[0],xr[1],vt,ot,St))return!0}return!1}var pe=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){var de=this.attr().points,He=!1;return Mt&&(He=ve(de,ne,ot,St,!0)),!He&&te&&(He=fe(de,ot,St)),He},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.points;if(!(Mt.length<2)){ot.beginPath();for(var te=0;te<Mt.length;te++){var ne=Mt[te];te===0?ot.moveTo(ne[0],ne[1]):ot.lineTo(ne[0],ne[1])}ot.closePath()}},vt}(Re),Se=pe,Xe=v(590),je=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{startArrow:!1,endArrow:!1})},vt.prototype.initAttrs=function(ot){this.setArrow()},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),this.setArrow(),["points"].indexOf(ot)!==-1&&this._resetCache()},vt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},vt.prototype.setArrow=function(){var ot=this.attr(),St=this.attrs,Mt=St.points,te=St.startArrow,ne=St.endArrow,de=Mt.length,He=Mt[0][0],Ge=Mt[0][1],Ie=Mt[de-1][0],qe=Mt[de-1][1];te&&Wt(this,ot,Mt[1][0],Mt[1][1],He,Ge),ne&&zt(this,ot,Mt[de-2][0],Mt[de-2][1],Ie,qe)},vt.prototype.isFill=function(){return!1},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){if(!Mt||!ne)return!1;var de=this.attr().points;return ve(de,ne,ot,St,!1)},vt.prototype.isStroke=function(){return!0},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.points,te=St.startArrow,ne=St.endArrow,de=Mt.length;if(!(Mt.length<2)){var He=Mt[0][0],Ge=Mt[0][1],Ie=Mt[de-1][0],qe=Mt[de-1][1];if(te&&te.d){var xr=jt(He,Ge,Mt[1][0],Mt[1][1],te.d);He+=xr.dx,Ge+=xr.dy}if(ne&&ne.d){var xr=jt(Mt[de-2][0],Mt[de-2][1],Ie,qe,ne.d);Ie-=xr.dx,qe-=xr.dy}ot.beginPath(),ot.moveTo(He,Ge);for(var Pr=0;Pr<de-1;Pr++){var Wr=Mt[Pr];ot.lineTo(Wr[0],Wr[1])}ot.lineTo(Ie,qe)}},vt.prototype.afterDrawPath=function(ot){var St=this.get("startArrowShape"),Mt=this.get("endArrowShape");St&&St.draw(ot),Mt&&Mt.draw(ot)},vt.prototype.getTotalLength=function(){var ot=this.attr().points,St=this.get("totalLength");return(0,H.isNil)(St)?(this.set("totalLength",Xe.Z.length(ot)),this.get("totalLength")):St},vt.prototype.getPoint=function(ot){var St=this.attr().points,Mt=this.get("tCache");Mt||(this._setTcache(),Mt=this.get("tCache"));var te,ne;return(0,H.each)(Mt,function(de,He){ot>=de[0]&&ot<=de[1]&&(te=(ot-de[0])/(de[1]-de[0]),ne=He)}),vn.default.pointAt(St[ne][0],St[ne][1],St[ne+1][0],St[ne+1][1],te)},vt.prototype._setTcache=function(){var ot=this.attr().points;if(!(!ot||ot.length===0)){var St=this.getTotalLength();if(!(St<=0)){var Mt=0,te=[],ne,de;(0,H.each)(ot,function(He,Ge){ot[Ge+1]&&(ne=[],ne[0]=Mt/St,de=vn.default.length(He[0],He[1],ot[Ge+1][0],ot[Ge+1][1]),Mt+=de,ne[1]=Mt/St,te.push(ne))}),this.set("tCache",te)}}},vt.prototype.getStartTangent=function(){var ot=this.attr().points,St=[];return St.push([ot[1][0],ot[1][1]]),St.push([ot[0][0],ot[0][1]]),St},vt.prototype.getEndTangent=function(){var ot=this.attr().points,St=ot.length-1,Mt=[];return Mt.push([ot[St-1][0],ot[St-1][1]]),Mt.push([ot[St][0],ot[St][1]]),Mt},vt}(Re),tr=je;function pr(ct,vt,ot,St,Mt,te,ne){var de=Mt/2;return N(ct-de,vt-de,ot,Mt,te,ne)||N(ct+ot-de,vt-de,Mt,St,te,ne)||N(ct+de,vt+St-de,ot,Mt,te,ne)||N(ct-de,vt+de,Mt,St,te,ne)}function Ar(ct,vt,ot,St,Mt,te,ne,de){var He=te/2;return Wn(ct+Mt,vt,ct+ot-Mt,vt,te,ne,de)||Wn(ct+ot,vt+Mt,ct+ot,vt+St-Mt,te,ne,de)||Wn(ct+ot-Mt,vt+St,ct+Mt,vt+St,te,ne,de)||Wn(ct,vt+St-Mt,ct,vt+Mt,te,ne,de)||Rt(ct+ot-Mt,vt+Mt,Mt,1.5*Math.PI,2*Math.PI,te,ne,de)||Rt(ct+ot-Mt,vt+St-Mt,Mt,0,.5*Math.PI,te,ne,de)||Rt(ct+Mt,vt+St-Mt,Mt,.5*Math.PI,Math.PI,te,ne,de)||Rt(ct+Mt,vt+Mt,Mt,Math.PI,1.5*Math.PI,te,ne,de)}var Hr=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x:0,y:0,width:0,height:0,radius:0})},vt.prototype.isInStrokeOrPath=function(ot,St,Mt,te,ne){var de=this.attr(),He=de.x,Ge=de.y,Ie=de.width,qe=de.height,xr=de.radius;if(xr){var Wr=!1;return Mt&&(Wr=Ar(He,Ge,Ie,qe,xr,ne,ot,St)),!Wr&&te&&(Wr=Qe(this,ot,St)),Wr}else{var Pr=ne/2;if(te&&Mt)return N(He-Pr,Ge-Pr,Ie+Pr,qe+Pr,ot,St);if(te)return N(He,Ge,Ie,qe,ot,St);if(Mt)return pr(He,Ge,Ie,qe,ne,ot,St)}},vt.prototype.createPath=function(ot){var St=this.attr(),Mt=St.x,te=St.y,ne=St.width,de=St.height,He=St.radius;if(ot.beginPath(),He===0)ot.rect(Mt,te,ne,de);else{var Ge=y(He),Ie=Ge[0],qe=Ge[1],xr=Ge[2],Pr=Ge[3];ot.moveTo(Mt+Ie,te),ot.lineTo(Mt+ne-qe,te),qe!==0&&ot.arc(Mt+ne-qe,te+qe,qe,-Math.PI/2,0),ot.lineTo(Mt+ne,te+de-xr),xr!==0&&ot.arc(Mt+ne-xr,te+de-xr,xr,0,Math.PI/2),ot.lineTo(Mt+Pr,te+de),Pr!==0&&ot.arc(Mt+Pr,te+de-Pr,Pr,Math.PI/2,Math.PI),ot.lineTo(Mt,te+Ie),Ie!==0&&ot.arc(Mt+Ie,te+Ie,Ie,Math.PI,Math.PI*1.5),ot.closePath()}},vt}(Re),Br=Hr,Vr=v(79343),Tn=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultAttrs=function(){var ot=ct.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},ot),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},vt.prototype.isOnlyHitBox=function(){return!0},vt.prototype.initAttrs=function(ot){this._assembleFont(),ot.text&&this._setText(ot.text)},vt.prototype._assembleFont=function(){var ot=this.attrs;ot.font=(0,Vr.assembleFont)(ot)},vt.prototype._setText=function(ot){var St=null;(0,O.default)(ot)&&ot.indexOf(`
`)!==-1&&(St=ot.split(`
`)),this.set("textArr",St)},vt.prototype.onAttrChange=function(ot,St,Mt){ct.prototype.onAttrChange.call(this,ot,St,Mt),ot.startsWith("font")&&this._assembleFont(),ot==="text"&&this._setText(St)},vt.prototype._getSpaceingY=function(){var ot=this.attrs,St=ot.lineHeight,Mt=ot.fontSize*1;return St?St-Mt:Mt*.14},vt.prototype._drawTextArr=function(ot,St,Mt){var te=this.attrs,ne=te.textBaseline,de=te.x,He=te.y,Ge=te.fontSize*1,Ie=this._getSpaceingY(),qe=(0,Vr.getTextHeight)(te.text,te.fontSize,te.lineHeight),xr;(0,A.default)(St,function(Pr,Wr){xr=He+Wr*(Ie+Ge)-qe+Ge,ne==="middle"&&(xr+=qe-Ge-(qe-Ge)/2),ne==="top"&&(xr+=qe-Ge),Mt?ot.fillText(Pr,de,xr):ot.strokeText(Pr,de,xr)})},vt.prototype._drawText=function(ot,St){var Mt=this.attr(),te=Mt.x,ne=Mt.y,de=this.get("textArr");if(de)this._drawTextArr(ot,de,St);else{var He=Mt.text;St?ot.fillText(He,te,ne):ot.strokeText(He,te,ne)}},vt.prototype.strokeAndFill=function(ot){var St=this.attrs,Mt=St.lineWidth,te=St.opacity,ne=St.strokeOpacity,de=St.fillOpacity;this.isStroke()&&Mt>0&&(!(0,L.default)(ne)&&ne!==1&&(ot.globalAlpha=te),this.stroke(ot)),this.isFill()&&(!(0,L.default)(de)&&de!==1?(ot.globalAlpha=de,this.fill(ot),ot.globalAlpha=te):this.fill(ot)),this.afterDrawPath(ot)},vt.prototype.fill=function(ot){this._drawText(ot,!0)},vt.prototype.stroke=function(ot){this._drawText(ot,!1)},vt}(Re),Pn=Tn,ni=v(51271),On=v(39058),si=v(34668),zn=v(27202);function Ti(ct,vt){if(vt){var ot=(0,zn.U_)(vt);return(0,zn.rG)(ot,ct)}return ct}function Hn(ct,vt,ot){var St=ct.getTotalMatrix();if(St){var Mt=Ti([vt,ot,1],St),te=Mt[0],ne=Mt[1];return[te,ne]}return[vt,ot]}function Un(ct,vt,ot){if(ct.isCanvas&&ct.isCanvas())return!0;if(!(0,si.isAllowCapture)(ct)&&ct.cfg.isInView===!1)return!1;if(ct.cfg.clipShape){var St=Hn(ct,vt,ot),Mt=St[0],te=St[1];if(ct.isClipped(Mt,te))return!1}var ne=ct.cfg.cacheCanvasBBox;return ne||(ne=ct.getCanvasBBox()),vt>=ne.minX&&vt<=ne.maxX&&ot>=ne.minY&&ot<=ne.maxY}function Ri(ct,vt,ot){if(!Un(ct,vt,ot))return null;for(var St=null,Mt=ct.getChildren(),te=Mt.length,ne=te-1;ne>=0;ne--){var de=Mt[ne];if(de.isGroup())St=Ri(de,vt,ot);else if(Un(de,vt,ot)){var He=de,Ge=Hn(de,vt,ot),Ie=Ge[0],qe=Ge[1];He.isInShape(Ie,qe)&&(St=de)}if(St)break}return St}var Jt=function(ct){(0,c.__extends)(vt,ct);function vt(){return ct!==null&&ct.apply(this,arguments)||this}return vt.prototype.getDefaultCfg=function(){var ot=ct.prototype.getDefaultCfg.call(this);return ot.renderer="canvas",ot.autoDraw=!0,ot.localRefresh=!0,ot.refreshElements=[],ot.clipView=!0,ot.quickHit=!1,ot},vt.prototype.onCanvasChange=function(ot){(ot==="attr"||ot==="sort"||ot==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},vt.prototype.getShapeBase=function(){return d},vt.prototype.getGroupBase=function(){return De},vt.prototype.getPixelRatio=function(){var ot=this.get("pixelRatio")||I();return ot>=1?Math.ceil(ot):1},vt.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},vt.prototype.createDom=function(){var ot=document.createElement("canvas"),St=ot.getContext("2d");return this.set("context",St),ot},vt.prototype.setDOMSize=function(ot,St){ct.prototype.setDOMSize.call(this,ot,St);var Mt=this.get("context"),te=this.get("el"),ne=this.getPixelRatio();te.width=ne*ot,te.height=ne*St,ne>1&&Mt.scale(ne,ne)},vt.prototype.clear=function(){ct.prototype.clear.call(this),this._clearFrame();var ot=this.get("context"),St=this.get("el");ot.clearRect(0,0,St.width,St.height)},vt.prototype.getShape=function(ot,St){return this.get("quickHit")?Ri(this,ot,St):ct.prototype.getShape.call(this,ot,St,null)},vt.prototype._getRefreshRegion=function(){var ot=this.get("refreshElements"),St=this.getViewRange(),Mt;if(ot.length&&ot[0]===this)Mt=St;else if(Mt=Et(ot),Mt){Mt.minX=Math.floor(Mt.minX),Mt.minY=Math.floor(Mt.minY),Mt.maxX=Math.ceil(Mt.maxX),Mt.maxY=Math.ceil(Mt.maxY);var te=this.get("clipView");te&&(Mt=Nt(Mt,St))}return Mt},vt.prototype.refreshElement=function(ot){var St=this.get("refreshElements");St.push(ot)},vt.prototype._clearFrame=function(){var ot=this.get("drawFrame");ot&&((0,S.default)(ot),this.set("drawFrame",null),this.set("refreshElements",[]))},vt.prototype.draw=function(){var ot=this.get("drawFrame");this.get("autoDraw")&&ot||this._startDraw()},vt.prototype._drawAll=function(){var ot=this.get("context"),St=this.get("el"),Mt=this.getChildren();ot.clearRect(0,0,St.width,St.height),at(ot,this),ft(ot,Mt),this.set("refreshElements",[])},vt.prototype._drawRegion=function(){var ot=this.get("context"),St=this.get("refreshElements"),Mt=this.getChildren(),te=this._getRefreshRegion();te&&(ot.clearRect(te.minX,te.minY,te.maxX-te.minX,te.maxY-te.minY),ot.save(),ot.beginPath(),ot.rect(te.minX,te.minY,te.maxX-te.minX,te.maxY-te.minY),ot.clip(),at(ot,this),ft(ot,Mt,te),ot.restore()),(0,A.default)(St,function(ne){ne.get("hasChanged")&&ne.set("hasChanged",!1)}),this.set("refreshElements",[])},vt.prototype._startDraw=function(){var ot=this,St=this.get("drawFrame");St||(St=(0,M.default)(function(){ot.get("localRefresh")?ot._drawRegion():ot._drawAll(),ot.set("drawFrame",null)}),this.set("drawFrame",St))},vt.prototype.skipDraw=function(){},vt}(F.AbstractCanvas),Dt=Jt,yt=v(40779),Ct=yt.version},29291:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(75612);function F(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])}function L(P,A){return F(P)*F(A)?(P[0]*A[0]+P[1]*A[1])/(F(P)*F(A)):1}function O(P,A){return(P[0]*A[1]<P[1]*A[0]?-1:1)*Math.acos(L(P,A))}function _(P,A){var x=A[1],C=A[2],w=c.mod(c.toRadian(A[3]),Math.PI*2),M=A[4],S=A[5],I=P[0],B=P[1],N=A[6],G=A[7],W=Math.cos(w)*(I-N)/2+Math.sin(w)*(B-G)/2,$=-1*Math.sin(w)*(I-N)/2+Math.cos(w)*(B-G)/2,H=W*W/(x*x)+$*$/(C*C);H>1&&(x*=Math.sqrt(H),C*=Math.sqrt(H));var j=x*x*($*$)+C*C*(W*W),nt=j?Math.sqrt((x*x*(C*C)-j)/j):1;M===S&&(nt*=-1),isNaN(nt)&&(nt=0);var rt=C?nt*x*$/C:0,mt=x?nt*-C*W/x:0,Ft=(I+N)/2+Math.cos(w)*rt-Math.sin(w)*mt,Gt=(B+G)/2+Math.sin(w)*rt+Math.cos(w)*mt,gt=[(W-rt)/x,($-mt)/C],st=[(-1*W-rt)/x,(-1*$-mt)/C],Xt=O([1,0],gt),Q=O(gt,st);return L(gt,st)<=-1&&(Q=Math.PI),L(gt,st)>=1&&(Q=0),S===0&&Q>0&&(Q=Q-2*Math.PI),S===1&&Q<0&&(Q=Q+2*Math.PI),{cx:Ft,cy:Gt,rx:c.isSamePoint(P,[N,G])?0:x,ry:c.isSamePoint(P,[N,G])?0:C,startAngle:Xt,endAngle:Xt+Q,xRotation:w,arcFlag:M,sweepFlag:S}}T.Z=_},75612:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isSamePoint=T.mergeRegion=T.intersectRect=T.inBox=T.distance=T.getPixelRatio=void 0;function d(){return window?window.devicePixelRatio:1}T.getPixelRatio=d;function c(G,W,$,H){var j=G-$,nt=W-H;return Math.sqrt(j*j+nt*nt)}T.distance=c;function F(G,W,$,H,j,nt){return j>=G&&j<=G+$&&nt>=W&&nt<=W+H}T.inBox=F;function L(G,W){return!(W.minX>G.maxX||W.maxX<G.minX||W.minY>G.maxY||W.maxY<G.minY)}T.intersectRect=L;function O(G,W){return!G||!W?G||W:{minX:Math.min(G.minX,W.minX),minY:Math.min(G.minY,W.minY),maxX:Math.max(G.maxX,W.maxX),maxY:Math.max(G.maxY,W.maxY)}}T.mergeRegion=O;function _(G,W){return G[0]===W[0]&&G[1]===W[1]}T.isSamePoint=_;var P=v(83438);Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return P.default}});var A=v(55535);Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return A.default}});var x=v(91110);Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return x.default}});var C=v(21429);Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return C.default}});var w=v(91577);Object.defineProperty(T,"each",{enumerable:!0,get:function(){return w.default}});var M=v(61823);Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return M.default}});var S=v(62352);Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return S.default}});var I=v(47203);Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return I.default}});var B=v(37250);Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return B.default}});var N=v(88041);Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return N.default}})},40779:function(xt){"use strict";xt.exports=JSON.parse('{"name":"@antv/g-canvas","version":"0.4.15","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit","dist":"webpack --config webpack.config.js --mode production"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.26.1","webpack-cli":"^3.1.2"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},"__npminstall_done":true,"gitHead":"9092384bf6b7efd6ec71bbcdec1b801a0079c403","_from":"@antv/g-canvas@0.4.15","_resolved":"https://registry.npmmirror.com/@antv/g-canvas/download/@antv/g-canvas-0.4.15.tgz?cache=0&sync_timestamp=1632727112889&other_urls=https%3A%2F%2Fregistry.npmmirror.com%2F%40antv%2Fg-canvas%2Fdownload%2F%40antv%2Fg-canvas-0.4.15.tgz"}')},5162:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(26691),L=v(25250),O=v(30570),_=v(16717),P=v(80995),A=v(33663),x=function(C){c.__extends(w,C);function w(){return C!==null&&C.apply(this,arguments)||this}return w.prototype.getDefaultCfg=function(){var M=C.prototype.getDefaultCfg.call(this);return M.renderer="canvas",M.autoDraw=!0,M.localRefresh=!0,M.refreshElements=[],M.clipView=!0,M.quickHit=!1,M},w.prototype.onCanvasChange=function(M){(M==="attr"||M==="sort"||M==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},w.prototype.getShapeBase=function(){return O},w.prototype.getGroupBase=function(){return _.default},w.prototype.getPixelRatio=function(){var M=this.get("pixelRatio")||P.getPixelRatio();return M>=1?Math.ceil(M):1},w.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},w.prototype.createDom=function(){var M=document.createElement("canvas"),S=M.getContext("2d");return this.set("context",S),M},w.prototype.setDOMSize=function(M,S){C.prototype.setDOMSize.call(this,M,S);var I=this.get("context"),B=this.get("el"),N=this.getPixelRatio();B.width=N*M,B.height=N*S,N>1&&I.scale(N,N)},w.prototype.clear=function(){C.prototype.clear.call(this),this._clearFrame();var M=this.get("context"),S=this.get("el");M.clearRect(0,0,S.width,S.height)},w.prototype.getShape=function(M,S){var I;return this.get("quickHit")?I=L.getShape(this,M,S):I=C.prototype.getShape.call(this,M,S,null),I},w.prototype._getRefreshRegion=function(){var M=this.get("refreshElements"),S=this.getViewRange(),I;if(M.length&&M[0]===this)I=S;else if(I=A.getMergedRegion(M),I){I.minX=Math.floor(I.minX),I.minY=Math.floor(I.minY),I.maxX=Math.ceil(I.maxX),I.maxY=Math.ceil(I.maxY),I.maxY+=1;var B=this.get("clipView");B&&(I=A.mergeView(I,S))}return I},w.prototype.refreshElement=function(M){var S=this.get("refreshElements");S.push(M)},w.prototype._clearFrame=function(){var M=this.get("drawFrame");M&&(P.clearAnimationFrame(M),this.set("drawFrame",null),this.set("refreshElements",[]))},w.prototype.draw=function(){var M=this.get("drawFrame");this.get("autoDraw")&&M||this._startDraw()},w.prototype._drawAll=function(){var M=this.get("context"),S=this.get("el"),I=this.getChildren();M.clearRect(0,0,S.width,S.height),A.applyAttrsToContext(M,this),A.drawChildren(M,I),this.set("refreshElements",[])},w.prototype._drawRegion=function(){var M=this.get("context"),S=this.get("refreshElements"),I=this.getChildren(),B=this._getRefreshRegion();B?(M.clearRect(B.minX,B.minY,B.maxX-B.minX,B.maxY-B.minY),M.save(),M.beginPath(),M.rect(B.minX,B.minY,B.maxX-B.minX,B.maxY-B.minY),M.clip(),A.applyAttrsToContext(M,this),A.checkRefresh(this,I,B),A.drawChildren(M,I,B),M.restore()):S.length&&A.clearChanged(S),P.each(S,function(N){N.get("hasChanged")&&N.set("hasChanged",!1)}),this.set("refreshElements",[])},w.prototype._startDraw=function(){var M=this,S=this.get("drawFrame");S||(S=P.requestAnimationFrame(function(){M.get("localRefresh")?M._drawRegion():M._drawAll(),M.set("drawFrame",null)}),this.set("drawFrame",S))},w.prototype.skipDraw=function(){},w.prototype.removeDom=function(){var M=this.get("el");M.width=0,M.height=0,M.parentNode.removeChild(M)},w}(F.AbstractCanvas);T.Z=x},16717:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26691),F=v(30570),L=v(33663),O=v(26169),_=v(80995),P=function(A){d.__extends(x,A);function x(){return A!==null&&A.apply(this,arguments)||this}return x.prototype.onCanvasChange=function(C){L.refreshElement(this,C)},x.prototype.getShapeBase=function(){return F},x.prototype.getGroupBase=function(){return x},x.prototype._applyClip=function(C,w){w&&(C.save(),L.applyAttrsToContext(C,w),w.createPath(C),C.restore(),C.clip(),w._afterDraw())},x.prototype.cacheCanvasBBox=function(){var C=this.cfg.children,w=[],M=[];O.each(C,function(H){var j=H.cfg.cacheCanvasBBox;j&&H.cfg.isInView&&(w.push(j.minX,j.maxX),M.push(j.minY,j.maxY))});var S=null;if(w.length){var I=O.min(w),B=O.max(w),N=O.min(M),G=O.max(M);S={minX:I,minY:N,x:I,y:N,maxX:B,maxY:G,width:B-I,height:G-N};var W=this.cfg.canvas;if(W){var $=W.getViewRange();this.set("isInView",_.intersectRect(S,$))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",S)},x.prototype.draw=function(C,w){var M=this.cfg.children,S=w?this.cfg.refresh:!0;M.length&&S&&(C.save(),L.applyAttrsToContext(C,this),this._applyClip(C,this.getClip()),L.drawChildren(C,M,w),C.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},x.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},x}(c.AbstractGroup);T.default=P},19585:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26691),F=v(80995),L=v(33663),O=v(26691),_=v(30570),P=v(16717),A=function(x){d.__extends(C,x);function C(){return x!==null&&x.apply(this,arguments)||this}return C.prototype.getDefaultAttrs=function(){var w=x.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},w),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},C.prototype.getShapeBase=function(){return _},C.prototype.getGroupBase=function(){return P.default},C.prototype.onCanvasChange=function(w){L.refreshElement(this,w)},C.prototype.calculateBBox=function(){var w=this.get("type"),M=this.getHitLineWidth(),S=O.getBBoxMethod(w),I=S(this),B=M/2,N=I.x-B,G=I.y-B,W=I.x+I.width+B,$=I.y+I.height+B;return{x:N,minX:N,y:G,minY:G,width:I.width+M,height:I.height+M,maxX:W,maxY:$}},C.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},C.prototype.isStroke=function(){return!!this.attrs.stroke},C.prototype._applyClip=function(w,M){M&&(w.save(),L.applyAttrsToContext(w,M),M.createPath(w),w.restore(),w.clip(),M._afterDraw())},C.prototype.draw=function(w,M){var S=this.cfg.clipShape;if(M){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var I=this.getCanvasBBox();if(!F.intersectRect(M,I)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}w.save(),L.applyAttrsToContext(w,this),this._applyClip(w,S),this.drawPath(w),w.restore(),this._afterDraw()},C.prototype.getCanvasViewBox=function(){var w=this.cfg.canvas;return w?w.getViewRange():null},C.prototype.cacheCanvasBBox=function(){var w=this.getCanvasViewBox();if(w){var M=this.getCanvasBBox(),S=F.intersectRect(M,w);this.set("isInView",S),S?this.set("cacheCanvasBBox",M):this.set("cacheCanvasBBox",null)}},C.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},C.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},C.prototype.drawPath=function(w){this.createPath(w),this.strokeAndFill(w),this.afterDrawPath(w)},C.prototype.fill=function(w){w.fill()},C.prototype.stroke=function(w){w.stroke()},C.prototype.strokeAndFill=function(w){var M=this.attrs,S=M.lineWidth,I=M.opacity,B=M.strokeOpacity,N=M.fillOpacity;this.isFill()&&(!F.isNil(N)&&N!==1?(w.globalAlpha=N,this.fill(w),w.globalAlpha=I):this.fill(w)),this.isStroke()&&S>0&&(!F.isNil(B)&&B!==1&&(w.globalAlpha=B),this.stroke(w)),this.afterDrawPath(w)},C.prototype.createPath=function(w){},C.prototype.afterDrawPath=function(w){},C.prototype.isInShape=function(w,M){var S=this.isStroke(),I=this.isFill(),B=this.getHitLineWidth();return this.isInStrokeOrPath(w,M,S,I,B)},C.prototype.isInStrokeOrPath=function(w,M,S,I,B){return!1},C.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var w=this.attrs;return w.lineWidth+w.lineAppendWidth},C}(c.AbstractShape);T.default=A},10741:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585),F=v(80995),L=function(O){d.__extends(_,O);function _(){return O!==null&&O.apply(this,arguments)||this}return _.prototype.getDefaultAttrs=function(){var P=O.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},P),{x:0,y:0,r:0})},_.prototype.isInStrokeOrPath=function(P,A,x,C,w){var M=this.attr(),S=M.x,I=M.y,B=M.r,N=w/2,G=F.distance(S,I,P,A);return C&&x?G<=B+N:C?G<=B:x?G>=B-N&&G<=B+N:!1},_.prototype.createPath=function(P){var A=this.attr(),x=A.x,C=A.y,w=A.r;P.beginPath(),P.arc(x,C,w,0,Math.PI*2,!1),P.closePath()},_}(c.default);T.default=L},70946:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585);function F(O,_,P,A){return O/(P*P)+_/(A*A)}var L=function(O){d.__extends(_,O);function _(){return O!==null&&O.apply(this,arguments)||this}return _.prototype.getDefaultAttrs=function(){var P=O.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},P),{x:0,y:0,rx:0,ry:0})},_.prototype.isInStrokeOrPath=function(P,A,x,C,w){var M=this.attr(),S=w/2,I=M.x,B=M.y,N=M.rx,G=M.ry,W=(P-I)*(P-I),$=(A-B)*(A-B);return C&&x?F(W,$,N+S,G+S)<=1:C?F(W,$,N,G)<=1:x?F(W,$,N-S,G-S)>=1&&F(W,$,N+S,G+S)<=1:!1},_.prototype.createPath=function(P){var A=this.attr(),x=A.x,C=A.y,w=A.rx,M=A.ry;if(P.beginPath(),P.ellipse)P.ellipse(x,C,w,M,0,0,Math.PI*2,!1);else{var S=w>M?w:M,I=w>M?1:w/M,B=w>M?M/w:1;P.save(),P.translate(x,C),P.scale(I,B),P.arc(0,0,S,0,Math.PI*2),P.restore(),P.closePath()}},_}(c.default);T.default=L},74168:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585),F=v(80995);function L(_){return _ instanceof HTMLElement&&F.isString(_.nodeName)&&_.nodeName.toUpperCase()==="CANVAS"}var O=function(_){d.__extends(P,_);function P(){return _!==null&&_.apply(this,arguments)||this}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{x:0,y:0,width:0,height:0})},P.prototype.initAttrs=function(A){this._setImage(A.img)},P.prototype.isStroke=function(){return!1},P.prototype.isOnlyHitBox=function(){return!0},P.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var A=this.get("canvas");A?A.draw():this.createPath(this.get("context"))}},P.prototype._setImage=function(A){var x=this,C=this.attrs;if(F.isString(A)){var w=new Image;w.onload=function(){if(x.destroyed)return!1;x.attr("img",w),x.set("loading",!1),x._afterLoading();var M=x.get("callback");M&&M.call(x)},w.crossOrigin="Anonymous",w.src=A,this.set("loading",!0)}else A instanceof Image?(C.width||(C.width=A.width),C.height||(C.height=A.height)):L(A)&&(C.width||(C.width=Number(A.getAttribute("width"))),C.height||(C.height,Number(A.getAttribute("height"))))},P.prototype.onAttrChange=function(A,x,C){_.prototype.onAttrChange.call(this,A,x,C),A==="img"&&this._setImage(x)},P.prototype.createPath=function(A){if(this.get("loading")){this.set("toDraw",!0),this.set("context",A);return}var x=this.attr(),C=x.x,w=x.y,M=x.width,S=x.height,I=x.sx,B=x.sy,N=x.swidth,G=x.sheight,W=x.img;(W instanceof Image||L(W))&&(!F.isNil(I)&&!F.isNil(B)&&!F.isNil(N)&&!F.isNil(G)?A.drawImage(W,I,B,N,G,C,w,M,S):A.drawImage(W,C,w,M,S))},P}(c.default);T.default=O},30570:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Text=T.Rect=T.Polyline=T.Polygon=T.Path=T.Marker=T.Line=T.Image=T.Ellipse=T.Circle=T.Base=void 0;var d=v(19585);Object.defineProperty(T,"Base",{enumerable:!0,get:function(){return d.default}});var c=v(10741);Object.defineProperty(T,"Circle",{enumerable:!0,get:function(){return c.default}});var F=v(70946);Object.defineProperty(T,"Ellipse",{enumerable:!0,get:function(){return F.default}});var L=v(74168);Object.defineProperty(T,"Image",{enumerable:!0,get:function(){return L.default}});var O=v(75692);Object.defineProperty(T,"Line",{enumerable:!0,get:function(){return O.default}});var _=v(86734);Object.defineProperty(T,"Marker",{enumerable:!0,get:function(){return _.default}});var P=v(52124);Object.defineProperty(T,"Path",{enumerable:!0,get:function(){return P.default}});var A=v(72610);Object.defineProperty(T,"Polygon",{enumerable:!0,get:function(){return A.default}});var x=v(74031);Object.defineProperty(T,"Polyline",{enumerable:!0,get:function(){return x.default}});var C=v(59254);Object.defineProperty(T,"Rect",{enumerable:!0,get:function(){return C.default}});var w=v(80236);Object.defineProperty(T,"Text",{enumerable:!0,get:function(){return w.default}})},75692:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(51824),F=v(19585),L=v(67858),O=v(40483),_=function(P){d.__extends(A,P);function A(){return P!==null&&P.apply(this,arguments)||this}return A.prototype.getDefaultAttrs=function(){var x=P.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},x),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},A.prototype.initAttrs=function(x){this.setArrow()},A.prototype.onAttrChange=function(x,C,w){P.prototype.onAttrChange.call(this,x,C,w),this.setArrow()},A.prototype.setArrow=function(){var x=this.attr(),C=x.x1,w=x.y1,M=x.x2,S=x.y2,I=x.startArrow,B=x.endArrow;I&&O.addStartArrow(this,x,M,S,C,w),B&&O.addEndArrow(this,x,C,w,M,S)},A.prototype.isInStrokeOrPath=function(x,C,w,M,S){if(!w||!S)return!1;var I=this.attr(),B=I.x1,N=I.y1,G=I.x2,W=I.y2;return L.default(B,N,G,W,S,x,C)},A.prototype.createPath=function(x){var C=this.attr(),w=C.x1,M=C.y1,S=C.x2,I=C.y2,B=C.startArrow,N=C.endArrow,G={dx:0,dy:0},W={dx:0,dy:0};B&&B.d&&(G=O.getShortenOffset(w,M,S,I,C.startArrow.d)),N&&N.d&&(W=O.getShortenOffset(w,M,S,I,C.endArrow.d)),x.beginPath(),x.moveTo(w+G.dx,M+G.dy),x.lineTo(S-W.dx,I-W.dy)},A.prototype.afterDrawPath=function(x){var C=this.get("startArrowShape"),w=this.get("endArrowShape");C&&C.draw(x),w&&w.draw(x)},A.prototype.getTotalLength=function(){var x=this.attr(),C=x.x1,w=x.y1,M=x.x2,S=x.y2;return c.Line.length(C,w,M,S)},A.prototype.getPoint=function(x){var C=this.attr(),w=C.x1,M=C.y1,S=C.x2,I=C.y2;return c.Line.pointAt(w,M,S,I,x)},A}(F.default);T.default=_},86734:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(62029),L=v(19585),O=v(80995),_=v(33663),P={circle:function(x,C,w){return[["M",x-w,C],["A",w,w,0,1,0,x+w,C],["A",w,w,0,1,0,x-w,C]]},square:function(x,C,w){return[["M",x-w,C-w],["L",x+w,C-w],["L",x+w,C+w],["L",x-w,C+w],["Z"]]},diamond:function(x,C,w){return[["M",x-w,C],["L",x,C-w],["L",x+w,C],["L",x,C+w],["Z"]]},triangle:function(x,C,w){var M=w*Math.sin(1/3*Math.PI);return[["M",x-w,C+M],["L",x,C-M],["L",x+w,C+M],["Z"]]},"triangle-down":function(x,C,w){var M=w*Math.sin(1/3*Math.PI);return[["M",x-w,C-M],["L",x+w,C-M],["L",x,C+M],["Z"]]}},A=function(x){d.__extends(C,x);function C(){return x!==null&&x.apply(this,arguments)||this}return C.prototype.initAttrs=function(w){this._resetParamsCache()},C.prototype._resetParamsCache=function(){this.set("paramsCache",{})},C.prototype.onAttrChange=function(w,M,S){x.prototype.onAttrChange.call(this,w,M,S),["symbol","x","y","r","radius"].indexOf(w)!==-1&&this._resetParamsCache()},C.prototype.isOnlyHitBox=function(){return!0},C.prototype._getR=function(w){return c.isNil(w.r)?w.radius:w.r},C.prototype._getPath=function(){var w=this.attr(),M=w.x,S=w.y,I=w.symbol||"circle",B=this._getR(w),N,G;if(O.isFunction(I))N=I,G=N(M,S,B),G=F.path2Absolute(G);else{if(N=C.Symbols[I],!N)return console.warn(I+" marker is not supported."),null;G=N(M,S,B)}return G},C.prototype.createPath=function(w){var M=this._getPath(),S=this.get("paramsCache");_.drawPath(this,w,{path:M},S)},C.Symbols=P,C}(L.default);T.default=A},52124:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(51824),F=v(26169),L=v(19585),O=v(62029),_=v(33663),P=v(90978),A=v(5169),x=v(40371),C=v(40483);function w(S,I,B){for(var N=!1,G=0;G<S.length;G++){var W=S[G];if(N=A.default(W,I,B),N)break}return N}var M=function(S){d.__extends(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I.prototype.getDefaultAttrs=function(){var B=S.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},B),{startArrow:!1,endArrow:!1})},I.prototype.initAttrs=function(B){this._setPathArr(B.path),this.setArrow()},I.prototype.onAttrChange=function(B,N,G){S.prototype.onAttrChange.call(this,B,N,G),B==="path"&&this._setPathArr(N),this.setArrow()},I.prototype._setPathArr=function(B){this.attrs.path=O.path2Absolute(B);var N=x.default.hasArc(B);this.set("hasArc",N),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},I.prototype.getSegments=function(){var B=this.get("segements");return B||(B=O.path2Segments(this.attr("path")),this.set("segments",B)),B},I.prototype.setArrow=function(){var B=this.attr(),N=B.startArrow,G=B.endArrow;if(N){var W=this.getStartTangent();C.addStartArrow(this,B,W[0][0],W[0][1],W[1][0],W[1][1])}if(G){var W=this.getEndTangent();C.addEndArrow(this,B,W[0][0],W[0][1],W[1][0],W[1][1])}},I.prototype.isInStrokeOrPath=function(B,N,G,W,$){var H=this.getSegments(),j=this.get("hasArc"),nt=!1;if(G){var rt=this.getTotalLength();nt=x.default.isPointInStroke(H,$,B,N,rt)}if(!nt&&W)if(j)nt=P.default(this,B,N);else{var mt=this.attr("path"),Ft=x.default.extractPolygons(mt);nt=w(Ft.polygons,B,N)||w(Ft.polylines,B,N)}return nt},I.prototype.createPath=function(B){var N=this.attr(),G=this.get("paramsCache");_.drawPath(this,B,N,G)},I.prototype.afterDrawPath=function(B){var N=this.get("startArrowShape"),G=this.get("endArrowShape");N&&N.draw(B),G&&G.draw(B)},I.prototype.getTotalLength=function(){var B=this.get("totalLength");return F.isNil(B)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):B},I.prototype.getPoint=function(B){var N=this.get("tCache");N||(this._calculateCurve(),this._setTcache(),N=this.get("tCache"));var G,W,$=this.get("curve");if(!N||N.length===0)return $?{x:$[0][1],y:$[0][2]}:null;F.each(N,function(rt,mt){B>=rt[0]&&B<=rt[1]&&(G=(B-rt[0])/(rt[1]-rt[0]),W=mt)});var H=$[W];if(F.isNil(H)||F.isNil(W))return null;var j=H.length,nt=$[W+1];return c.Cubic.pointAt(H[j-2],H[j-1],nt[1],nt[2],nt[3],nt[4],nt[5],nt[6],G)},I.prototype._calculateCurve=function(){var B=this.attr().path;this.set("curve",x.default.pathToCurve(B))},I.prototype._setTcache=function(){var B=0,N=0,G=[],W,$,H,j,nt=this.get("curve");if(!!nt){if(F.each(nt,function(rt,mt){H=nt[mt+1],j=rt.length,H&&(B+=c.Cubic.length(rt[j-2],rt[j-1],H[1],H[2],H[3],H[4],H[5],H[6])||0)}),this.set("totalLength",B),B===0){this.set("tCache",[]);return}F.each(nt,function(rt,mt){H=nt[mt+1],j=rt.length,H&&(W=[],W[0]=N/B,$=c.Cubic.length(rt[j-2],rt[j-1],H[1],H[2],H[3],H[4],H[5],H[6]),N+=$||0,W[1]=N/B,G.push(W))}),this.set("tCache",G)}},I.prototype.getStartTangent=function(){var B=this.getSegments(),N;if(B.length>1){var G=B[0].currentPoint,W=B[1].currentPoint,$=B[1].startTangent;N=[],$?(N.push([G[0]-$[0],G[1]-$[1]]),N.push([G[0],G[1]])):(N.push([W[0],W[1]]),N.push([G[0],G[1]]))}return N},I.prototype.getEndTangent=function(){var B=this.getSegments(),N=B.length,G;if(N>1){var W=B[N-2].currentPoint,$=B[N-1].currentPoint,H=B[N-1].endTangent;G=[],H?(G.push([$[0]-H[0],$[1]-H[1]]),G.push([$[0],$[1]])):(G.push([W[0],W[1]]),G.push([$[0],$[1]]))}return G},I}(L.default);T.default=M},72610:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585),F=v(81543),L=v(5169),O=function(_){d.__extends(P,_);function P(){return _!==null&&_.apply(this,arguments)||this}return P.prototype.isInStrokeOrPath=function(A,x,C,w,M){var S=this.attr().points,I=!1;return C&&(I=F.default(S,M,A,x,!0)),!I&&w&&(I=L.default(S,A,x)),I},P.prototype.createPath=function(A){var x=this.attr(),C=x.points;if(!(C.length<2)){A.beginPath();for(var w=0;w<C.length;w++){var M=C[w];w===0?A.moveTo(M[0],M[1]):A.lineTo(M[0],M[1])}A.closePath()}},P}(c.default);T.default=O},74031:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(51824),F=v(51824),L=v(26169),O=v(19585),_=v(81543),P=v(40483),A=function(x){d.__extends(C,x);function C(){return x!==null&&x.apply(this,arguments)||this}return C.prototype.getDefaultAttrs=function(){var w=x.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},w),{startArrow:!1,endArrow:!1})},C.prototype.initAttrs=function(w){this.setArrow()},C.prototype.onAttrChange=function(w,M,S){x.prototype.onAttrChange.call(this,w,M,S),this.setArrow(),["points"].indexOf(w)!==-1&&this._resetCache()},C.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},C.prototype.setArrow=function(){var w=this.attr(),M=this.attrs,S=M.points,I=M.startArrow,B=M.endArrow,N=S.length,G=S[0][0],W=S[0][1],$=S[N-1][0],H=S[N-1][1];I&&P.addStartArrow(this,w,S[1][0],S[1][1],G,W),B&&P.addEndArrow(this,w,S[N-2][0],S[N-2][1],$,H)},C.prototype.isFill=function(){return!1},C.prototype.isInStrokeOrPath=function(w,M,S,I,B){if(!S||!B)return!1;var N=this.attr().points;return _.default(N,B,w,M,!1)},C.prototype.isStroke=function(){return!0},C.prototype.createPath=function(w){var M=this.attr(),S=M.points,I=M.startArrow,B=M.endArrow,N=S.length;if(!(S.length<2)){var G=S[0][0],W=S[0][1],$=S[N-1][0],H=S[N-1][1];if(I&&I.d){var j=P.getShortenOffset(G,W,S[1][0],S[1][1],I.d);G+=j.dx,W+=j.dy}if(B&&B.d){var j=P.getShortenOffset(S[N-2][0],S[N-2][1],$,H,B.d);$-=j.dx,H-=j.dy}w.beginPath(),w.moveTo(G,W);for(var nt=0;nt<N-1;nt++){var rt=S[nt];w.lineTo(rt[0],rt[1])}w.lineTo($,H)}},C.prototype.afterDrawPath=function(w){var M=this.get("startArrowShape"),S=this.get("endArrowShape");M&&M.draw(w),S&&S.draw(w)},C.prototype.getTotalLength=function(){var w=this.attr().points,M=this.get("totalLength");return L.isNil(M)?(this.set("totalLength",F.Polyline.length(w)),this.get("totalLength")):M},C.prototype.getPoint=function(w){var M=this.attr().points,S=this.get("tCache");S||(this._setTcache(),S=this.get("tCache"));var I,B;return L.each(S,function(N,G){w>=N[0]&&w<=N[1]&&(I=(w-N[0])/(N[1]-N[0]),B=G)}),c.Line.pointAt(M[B][0],M[B][1],M[B+1][0],M[B+1][1],I)},C.prototype._setTcache=function(){var w=this.attr().points;if(!(!w||w.length===0)){var M=this.getTotalLength();if(!(M<=0)){var S=0,I=[],B,N;L.each(w,function(G,W){w[W+1]&&(B=[],B[0]=S/M,N=c.Line.length(G[0],G[1],w[W+1][0],w[W+1][1]),S+=N,B[1]=S/M,I.push(B))}),this.set("tCache",I)}}},C.prototype.getStartTangent=function(){var w=this.attr().points,M=[];return M.push([w[1][0],w[1][1]]),M.push([w[0][0],w[0][1]]),M},C.prototype.getEndTangent=function(){var w=this.attr().points,M=w.length-1,S=[];return S.push([w[M-1][0],w[M-1][1]]),S.push([w[M][0],w[M][1]]),S},C}(O.default);T.default=A},59254:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585),F=v(99425),L=v(80995),O=v(12684),_=v(26086),P=v(90978),A=function(x){d.__extends(C,x);function C(){return x!==null&&x.apply(this,arguments)||this}return C.prototype.getDefaultAttrs=function(){var w=x.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},w),{x:0,y:0,width:0,height:0,radius:0})},C.prototype.isInStrokeOrPath=function(w,M,S,I,B){var N=this.attr(),G=N.x,W=N.y,$=N.width,H=N.height,j=N.radius;if(j){var rt=!1;return S&&(rt=_.default(G,W,$,H,j,B,w,M)),!rt&&I&&(rt=P.default(this,w,M)),rt}else{var nt=B/2;if(I&&S)return L.inBox(G-nt,W-nt,$+nt,H+nt,w,M);if(I)return L.inBox(G,W,$,H,w,M);if(S)return O.default(G,W,$,H,B,w,M)}},C.prototype.createPath=function(w){var M=this.attr(),S=M.x,I=M.y,B=M.width,N=M.height,G=M.radius;if(w.beginPath(),G===0)w.rect(S,I,B,N);else{var W=F.parseRadius(G),$=W[0],H=W[1],j=W[2],nt=W[3];w.moveTo(S+$,I),w.lineTo(S+B-H,I),H!==0&&w.arc(S+B-H,I+H,H,-Math.PI/2,0),w.lineTo(S+B,I+N-j),j!==0&&w.arc(S+B-j,I+N-j,j,0,Math.PI/2),w.lineTo(S+nt,I+N),nt!==0&&w.arc(S+nt,I+N-nt,nt,Math.PI/2,Math.PI),w.lineTo(S,I+$),$!==0&&w.arc(S+$,I+$,$,Math.PI,Math.PI*1.5),w.closePath()}},C}(c.default);T.default=A},80236:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(19585),F=v(80995),L=v(26691),O=function(_){d.__extends(P,_);function P(){return _!==null&&_.apply(this,arguments)||this}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},P.prototype.isOnlyHitBox=function(){return!0},P.prototype.initAttrs=function(A){this._assembleFont(),A.text&&this._setText(A.text)},P.prototype._assembleFont=function(){var A=this.attrs;A.font=L.assembleFont(A)},P.prototype._setText=function(A){var x=null;F.isString(A)&&A.indexOf(`
`)!==-1&&(x=A.split(`
`)),this.set("textArr",x)},P.prototype.onAttrChange=function(A,x,C){_.prototype.onAttrChange.call(this,A,x,C),A.startsWith("font")&&this._assembleFont(),A==="text"&&this._setText(x)},P.prototype._getSpaceingY=function(){var A=this.attrs,x=A.lineHeight,C=A.fontSize*1;return x?x-C:C*.14},P.prototype._drawTextArr=function(A,x,C){var w=this.attrs,M=w.textBaseline,S=w.x,I=w.y,B=w.fontSize*1,N=this._getSpaceingY(),G=L.getTextHeight(w.text,w.fontSize,w.lineHeight),W;F.each(x,function($,H){W=I+H*(N+B)-G+B,M==="middle"&&(W+=G-B-(G-B)/2),M==="top"&&(W+=G-B),F.isNil($)||(C?A.fillText($,S,W):A.strokeText($,S,W))})},P.prototype._drawText=function(A,x){var C=this.attr(),w=C.x,M=C.y,S=this.get("textArr");if(S)this._drawTextArr(A,S,x);else{var I=C.text;F.isNil(I)||(x?A.fillText(I,w,M):A.strokeText(I,w,M))}},P.prototype.strokeAndFill=function(A){var x=this.attrs,C=x.lineWidth,w=x.opacity,M=x.strokeOpacity,S=x.fillOpacity;this.isStroke()&&C>0&&(!F.isNil(M)&&M!==1&&(A.globalAlpha=w),this.stroke(A)),this.isFill()&&(!F.isNil(S)&&S!==1?(A.globalAlpha=S,this.fill(A),A.globalAlpha=w):this.fill(A)),this.afterDrawPath(A)},P.prototype.fill=function(A){this._drawText(A,!0)},P.prototype.stroke=function(A){this._drawText(A,!1)},P}(c.default);T.default=O},83804:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(80995);function c(_){return Math.sqrt(_[0]*_[0]+_[1]*_[1])}function F(_,P){return c(_)*c(P)?(_[0]*P[0]+_[1]*P[1])/(c(_)*c(P)):1}function L(_,P){return(_[0]*P[1]<_[1]*P[0]?-1:1)*Math.acos(F(_,P))}function O(_,P){var A=P[1],x=P[2],C=d.mod(d.toRadian(P[3]),Math.PI*2),w=P[4],M=P[5],S=_[0],I=_[1],B=P[6],N=P[7],G=Math.cos(C)*(S-B)/2+Math.sin(C)*(I-N)/2,W=-1*Math.sin(C)*(S-B)/2+Math.cos(C)*(I-N)/2,$=G*G/(A*A)+W*W/(x*x);$>1&&(A*=Math.sqrt($),x*=Math.sqrt($));var H=A*A*(W*W)+x*x*(G*G),j=H?Math.sqrt((A*A*(x*x)-H)/H):1;w===M&&(j*=-1),isNaN(j)&&(j=0);var nt=x?j*A*W/x:0,rt=A?j*-x*G/A:0,mt=(S+B)/2+Math.cos(C)*nt-Math.sin(C)*rt,Ft=(I+N)/2+Math.sin(C)*nt+Math.cos(C)*rt,Gt=[(G-nt)/A,(W-rt)/x],gt=[(-1*G-nt)/A,(-1*W-rt)/x],st=L([1,0],Gt),Xt=L(Gt,gt);return F(Gt,gt)<=-1&&(Xt=Math.PI),F(Gt,gt)>=1&&(Xt=0),M===0&&Xt>0&&(Xt=Xt-2*Math.PI),M===1&&Xt<0&&(Xt=Xt+2*Math.PI),{cx:mt,cy:Ft,rx:d.isSamePoint(_,[B,N])?0:A,ry:d.isSamePoint(_,[B,N])?0:x,startAngle:st,endAngle:st+Xt,xRotation:C,arcFlag:w,sweepFlag:M}}T.default=O},40483:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.addEndArrow=T.addStartArrow=T.getShortenOffset=void 0;var d=v(21362),c=v(30570),F=Math.sin,L=Math.cos,O=Math.atan2,_=Math.PI;function P(M,S,I,B,N,G,W){var $=S.stroke,H=S.lineWidth,j=I-N,nt=B-G,rt=O(nt,j),mt=new c.Path({type:"path",canvas:M.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*L(_/6)+","+10*F(_/6)+" L0,0 L"+10*L(_/6)+",-"+10*F(_/6),stroke:$,lineWidth:H}});mt.translate(N,G),mt.rotateAtPoint(N,G,rt),M.set(W?"startArrowShape":"endArrowShape",mt)}function A(M,S,I,B,N,G,W){var $=S.startArrow,H=S.endArrow,j=S.stroke,nt=S.lineWidth,rt=W?$:H,mt=rt.d,Ft=rt.fill,Gt=rt.stroke,gt=rt.lineWidth,st=d.__rest(rt,["d","fill","stroke","lineWidth"]),Xt=I-N,Q=B-G,qt=O(Q,Xt);mt&&(N=N-L(qt)*mt,G=G-F(qt)*mt);var y=new c.Path({type:"path",canvas:M.get("canvas"),isArrowShape:!0,attrs:d.__assign(d.__assign({},st),{stroke:Gt||j,lineWidth:gt||nt,fill:Ft})});y.translate(N,G),y.rotateAtPoint(N,G,qt),M.set(W?"startArrowShape":"endArrowShape",y)}function x(M,S,I,B,N){var G=O(B-S,I-M);return{dx:L(G)*N,dy:F(G)*N}}T.getShortenOffset=x;function C(M,S,I,B,N,G){typeof S.startArrow=="object"?A(M,S,I,B,N,G,!0):S.startArrow?P(M,S,I,B,N,G,!0):M.set("startArrowShape",null)}T.addStartArrow=C;function w(M,S,I,B,N,G){typeof S.endArrow=="object"?A(M,S,I,B,N,G,!1):S.endArrow?P(M,S,I,B,N,G,!1):M.set("startArrowShape",null)}T.addEndArrow=w},33663:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.mergeView=T.getMergedRegion=T.getRefreshRegion=T.refreshElement=T.drawPath=T.clearChanged=T.checkChildrenRefresh=T.checkRefresh=T.drawChildren=T.applyAttrsToContext=void 0;var d=v(26169),c=v(99425),F=v(83804),L=v(80995),O=v(40483),_={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function P($,H){var j=H.attr();for(var nt in j){var rt=j[nt],mt=_[nt]?_[nt]:nt;mt==="matrix"&&rt?$.transform(rt[0],rt[1],rt[3],rt[4],rt[6],rt[7]):mt==="lineDash"&&$.setLineDash?d.isArray(rt)&&$.setLineDash(rt):(mt==="strokeStyle"||mt==="fillStyle"?rt=c.parseStyle($,H,rt):mt==="globalAlpha"&&(rt=rt*$.globalAlpha),$[mt]=rt)}}T.applyAttrsToContext=P;function A($,H,j){for(var nt=0;nt<H.length;nt++){var rt=H[nt];rt.cfg.visible?rt.draw($,j):rt.skipDraw()}}T.drawChildren=A;function x($,H,j){var nt=$.get("refreshElements");d.each(nt,function(rt){if(rt!==$)for(var mt=rt.cfg.parent;mt&&mt!==$&&!mt.cfg.refresh;)mt.cfg.refresh=!0,mt=mt.cfg.parent}),nt[0]===$?M(H,j):C(H,j)}T.checkRefresh=x;function C($,H){for(var j=0;j<$.length;j++){var nt=$[j];if(nt.cfg.visible)if(nt.cfg.hasChanged)nt.cfg.refresh=!0,nt.isGroup()&&M(nt.cfg.children,H);else if(nt.cfg.refresh)nt.isGroup()&&C(nt.cfg.children,H);else{var rt=S(nt,H);nt.cfg.refresh=rt,rt&&nt.isGroup()&&C(nt.cfg.children,H)}}}T.checkChildrenRefresh=C;function w($){for(var H=0;H<$.length;H++){var j=$[H];j.cfg.hasChanged=!1,j.isGroup()&&!j.destroyed&&w(j.cfg.children)}}T.clearChanged=w;function M($,H){for(var j=0;j<$.length;j++){var nt=$[j];nt.cfg.refresh=!0,nt.isGroup()&&M(nt.get("children"),H)}}function S($,H){var j=$.cfg.cacheCanvasBBox,nt=$.cfg.isInView&&j&&L.intersectRect(j,H);return nt}function I($,H,j,nt){var rt=j.path,mt=j.startArrow,Ft=j.endArrow;if(!!rt){var Gt=[0,0],gt=[0,0],st={dx:0,dy:0};H.beginPath();for(var Xt=0;Xt<rt.length;Xt++){var Q=rt[Xt],qt=Q[0];if(Xt===0&&mt&&mt.d){var y=$.getStartTangent();st=O.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],mt.d)}else if(Xt===rt.length-2&&rt[Xt+1][0]==="Z"&&Ft&&Ft.d){var Yt=rt[Xt+1];if(Yt[0]==="Z"){var y=$.getEndTangent();st=O.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],Ft.d)}}else if(Xt===rt.length-1&&Ft&&Ft.d&&rt[0]!=="Z"){var y=$.getEndTangent();st=O.getShortenOffset(y[0][0],y[0][1],y[1][0],y[1][1],Ft.d)}var K=st.dx,ht=st.dy;switch(qt){case"M":H.moveTo(Q[1]-K,Q[2]-ht),gt=[Q[1],Q[2]];break;case"L":H.lineTo(Q[1]-K,Q[2]-ht);break;case"Q":H.quadraticCurveTo(Q[1],Q[2],Q[3]-K,Q[4]-ht);break;case"C":H.bezierCurveTo(Q[1],Q[2],Q[3],Q[4],Q[5]-K,Q[6]-ht);break;case"A":{var J=void 0;nt?(J=nt[Xt],J||(J=F.default(Gt,Q),nt[Xt]=J)):J=F.default(Gt,Q);var At=J.cx,Vt=J.cy,pt=J.rx,Lt=J.ry,Tt=J.startAngle,kt=J.endAngle,jt=J.xRotation,Wt=J.sweepFlag;if(H.ellipse)H.ellipse(At,Vt,pt,Lt,jt,Tt,kt,1-Wt);else{var zt=pt>Lt?pt:Lt,bt=pt>Lt?1:pt/Lt,at=pt>Lt?Lt/pt:1;H.translate(At,Vt),H.rotate(jt),H.scale(bt,at),H.arc(0,0,zt,Tt,kt,1-Wt),H.scale(1/bt,1/at),H.rotate(-jt),H.translate(-At,-Vt)}break}case"Z":H.closePath();break;default:break}if(qt==="Z")Gt=gt;else{var ft=Q.length;Gt=[Q[ft-2],Q[ft-1]]}}}}T.drawPath=I;function B($,H){var j=$.get("canvas");j&&(H==="remove"&&($._cacheCanvasBBox=$.get("cacheCanvasBBox")),$.get("hasChanged")||($.set("hasChanged",!0),$.cfg.parent&&$.cfg.parent.get("hasChanged")||(j.refreshElement($,H,j),j.get("autoDraw")&&j.draw())))}T.refreshElement=B;function N($){var H;if($.destroyed)H=$._cacheCanvasBBox;else{var j=$.get("cacheCanvasBBox"),nt=j&&!!(j.width&&j.height),rt=$.getCanvasBBox(),mt=rt&&!!(rt.width&&rt.height);nt&&mt?H=L.mergeRegion(j,rt):nt?H=j:mt&&(H=rt)}return H}T.getRefreshRegion=N;function G($){if(!$.length)return null;var H=[],j=[],nt=[],rt=[];return d.each($,function(mt){var Ft=N(mt);Ft&&(H.push(Ft.minX),j.push(Ft.minY),nt.push(Ft.maxX),rt.push(Ft.maxY))}),{minX:d.min(H),minY:d.min(j),maxX:d.max(nt),maxY:d.max(rt)}}T.getMergedRegion=G;function W($,H){return!$||!H||!L.intersectRect($,H)?null:{minX:Math.max($.minX,H.minX),minY:Math.max($.minY,H.minY),maxX:Math.min($.maxX,H.maxX),maxY:Math.min($.maxY,H.maxY)}}T.mergeView=W},25250:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getShape=void 0;var d=v(26691);function c(_,P){if(P){var A=d.invert(P);return d.multiplyVec2(A,_)}return _}function F(_,P,A){var x=_.getTotalMatrix();if(x){var C=c([P,A,1],x),w=C[0],M=C[1];return[w,M]}return[P,A]}function L(_,P,A){if(_.isCanvas&&_.isCanvas())return!0;if(!d.isAllowCapture(_)||_.cfg.isInView===!1)return!1;if(_.cfg.clipShape){var x=F(_,P,A),C=x[0],w=x[1];if(_.isClipped(C,w))return!1}var M=_.cfg.cacheCanvasBBox||_.getCanvasBBox();return P>=M.minX&&P<=M.maxX&&A>=M.minY&&A<=M.maxY}function O(_,P,A){if(!L(_,P,A))return null;for(var x=null,C=_.getChildren(),w=C.length,M=w-1;M>=0;M--){var S=C[M];if(S.isGroup())x=O(S,P,A);else if(L(S,P,A)){var I=S,B=F(S,P,A),N=B[0],G=B[1];I.isInShape(N,G)&&(x=S)}if(x)break}return x}T.getShape=O},90978:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26691);function c(F,L,O){var _=d.getOffScreenContext();return F.createPath(_),_.isPointInPath(L,O)}T.default=c},5169:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=1e-6;function d(L){return Math.abs(L)<v?0:L<0?-1:1}function c(L,O,_){return(_[0]-L[0])*(O[1]-L[1])==(O[0]-L[0])*(_[1]-L[1])&&Math.min(L[0],O[0])<=_[0]&&_[0]<=Math.max(L[0],O[0])&&Math.min(L[1],O[1])<=_[1]&&_[1]<=Math.max(L[1],O[1])}function F(L,O,_){var P=!1,A=L.length;if(A<=2)return!1;for(var x=0;x<A;x++){var C=L[x],w=L[(x+1)%A];if(c(C,w,[O,_]))return!0;d(C[1]-_)>0!=d(w[1]-_)>0&&d(O-(_-C[1])*(C[0]-w[0])/(C[1]-w[1])-C[0])<0&&(P=!P)}return P}T.default=F},37378:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(80995);function c(F,L,O,_,P,A,x,C){var w=(Math.atan2(C-L,x-F)+Math.PI*2)%(Math.PI*2);if(w<_||w>P)return!1;var M={x:F+O*Math.cos(w),y:L+O*Math.sin(w)};return d.distance(M.x,M.y,x,C)<=A/2}T.default=c},67858:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(51824);function c(F,L,O,_,P,A,x){var C=Math.min(F,O),w=Math.max(F,O),M=Math.min(L,_),S=Math.max(L,_),I=P/2;return A>=C-I&&A<=w+I&&x>=M-I&&x<=S+I?d.Line.pointToLine(F,L,O,_,A,x)<=P/2:!1}T.default=c},81543:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(67858);function c(F,L,O,_,P){var A=F.length;if(A<2)return!1;for(var x=0;x<A-1;x++){var C=F[x][0],w=F[x][1],M=F[x+1][0],S=F[x+1][1];if(d.default(C,w,M,S,L,O,_))return!0}if(P){var I=F[0],B=F[A-1];if(d.default(I[0],I[1],B[0],B[1],L,O,_))return!0}return!1}T.default=c},26086:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(67858),c=v(37378);function F(L,O,_,P,A,x,C,w){var M=x/2;return d.default(L+A,O,L+_-A,O,x,C,w)||d.default(L+_,O+A,L+_,O+P-A,x,C,w)||d.default(L+_-A,O+P,L+A,O+P,x,C,w)||d.default(L,O+P-A,L,O+A,x,C,w)||c.default(L+_-A,O+A,A,1.5*Math.PI,2*Math.PI,x,C,w)||c.default(L+_-A,O+P-A,A,0,.5*Math.PI,x,C,w)||c.default(L+A,O+P-A,A,.5*Math.PI,Math.PI,x,C,w)||c.default(L+A,O+A,A,Math.PI,1.5*Math.PI,x,C,w)}T.default=F},12684:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(80995);function c(F,L,O,_,P,A,x){var C=P/2;return d.inBox(F-C,L-C,O,P,A,x)||d.inBox(F+O-C,L-C,P,_,A,x)||d.inBox(F+C,L+_-C,O,P,A,x)||d.inBox(F-C,L+C,P,_,A,x)}T.default=c},99425:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.parseRadius=T.parseStyle=T.parsePattern=T.parseRadialGradient=T.parseLineGradient=void 0;var d=v(80995),c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,F=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,L=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,O=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function _(M,S){var I=M.match(O);d.each(I,function(B){var N=B.split(":");S.addColorStop(N[0],N[1])})}function P(M,S,I){var B=c.exec(I),N=parseFloat(B[1])%360*(Math.PI/180),G=B[2],W=S.getBBox(),$,H;N>=0&&N<1/2*Math.PI?($={x:W.minX,y:W.minY},H={x:W.maxX,y:W.maxY}):1/2*Math.PI<=N&&N<Math.PI?($={x:W.maxX,y:W.minY},H={x:W.minX,y:W.maxY}):Math.PI<=N&&N<3/2*Math.PI?($={x:W.maxX,y:W.maxY},H={x:W.minX,y:W.minY}):($={x:W.minX,y:W.maxY},H={x:W.maxX,y:W.minY});var j=Math.tan(N),nt=j*j,rt=(H.x-$.x+j*(H.y-$.y))/(nt+1)+$.x,mt=j*(H.x-$.x+j*(H.y-$.y))/(nt+1)+$.y,Ft=M.createLinearGradient($.x,$.y,rt,mt);return _(G,Ft),Ft}T.parseLineGradient=P;function A(M,S,I){var B=F.exec(I),N=parseFloat(B[1]),G=parseFloat(B[2]),W=parseFloat(B[3]),$=B[4];if(W===0){var H=$.match(O);return H[H.length-1].split(":")[1]}var j=S.getBBox(),nt=j.maxX-j.minX,rt=j.maxY-j.minY,mt=Math.sqrt(nt*nt+rt*rt)/2,Ft=M.createRadialGradient(j.minX+nt*N,j.minY+rt*G,0,j.minX+nt/2,j.minY+rt/2,W*mt);return _($,Ft),Ft}T.parseRadialGradient=A;function x(M,S,I){if(S.get("patternSource")&&S.get("patternSource")===I)return S.get("pattern");var B,N,G=L.exec(I),W=G[1],$=G[2];function H(){B=M.createPattern(N,W),S.set("pattern",B),S.set("patternSource",I)}switch(W){case"a":W="repeat";break;case"x":W="repeat-x";break;case"y":W="repeat-y";break;case"n":W="no-repeat";break;default:W="no-repeat"}return N=new Image,$.match(/^data:/i)||(N.crossOrigin="Anonymous"),N.src=$,N.complete?H():(N.onload=H,N.src=N.src),B}T.parsePattern=x;function C(M,S,I){var B=S.getBBox();if(isNaN(B.x)||isNaN(B.y)||isNaN(B.width)||isNaN(B.height))return I;if(d.isString(I)){if(I[1]==="("||I[2]==="("){if(I[0]==="l")return P(M,S,I);if(I[0]==="r")return A(M,S,I);if(I[0]==="p")return x(M,S,I)}return I}if(I instanceof CanvasPattern)return I}T.parseStyle=C;function w(M){var S=0,I=0,B=0,N=0;return d.isArray(M)?M.length===1?S=I=B=N=M[0]:M.length===2?(S=B=M[0],I=N=M[1]):M.length===3?(S=M[0],I=N=M[1],B=M[2]):(S=M[0],I=M[1],B=M[2],N=M[3]):S=I=B=N=M,[S,I,B,N]}T.parseRadius=w},40371:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26691),F=v(51824),L=v(51824),O=v(36694),_=v(92541),P=v(80995),A=v(67858),x=v(37378),C=O.ext.transform;function w(I){for(var B=!1,N=I.length,G=0;G<N;G++){var W=I[G],$=W[0];if($==="C"||$==="A"||$==="Q"){B=!0;break}}return B}function M(I,B,N,G,W){for(var $=!1,H=B/2,j=0;j<I.length;j++){var nt=I[j],rt=nt.currentPoint,mt=nt.params,Ft=nt.prePoint,Gt=nt.box;if(!(Gt&&!P.inBox(Gt.x-H,Gt.y-H,Gt.width+B,Gt.height+B,N,G))){switch(nt.command){case"L":case"Z":$=A.default(Ft[0],Ft[1],rt[0],rt[1],B,N,G);break;case"Q":var gt=F.Quad.pointDistance(Ft[0],Ft[1],mt[1],mt[2],mt[3],mt[4],N,G);$=gt<=B/2;break;case"C":var st=L.Cubic.pointDistance(Ft[0],Ft[1],mt[1],mt[2],mt[3],mt[4],mt[5],mt[6],N,G,W);$=st<=B/2;break;case"A":var Xt=nt.arcParams,Q=Xt.cx,qt=Xt.cy,y=Xt.rx,Yt=Xt.ry,K=Xt.startAngle,ht=Xt.endAngle,J=Xt.xRotation,At=[N,G,1],Vt=y>Yt?y:Yt,pt=y>Yt?1:y/Yt,Lt=y>Yt?Yt/y:1,Tt=C(null,[["t",-Q,-qt],["r",-J],["s",1/pt,1/Lt]]);_.transformMat3(At,At,Tt),$=x.default(0,0,Vt,K,ht,B,At[0],At[1]);break;default:break}if($)break}}return $}function S(I){for(var B=I.length,N=[],G=[],W=[],$=0;$<B;$++){var H=I[$],j=H[0];j==="M"?(W.length&&(G.push(W),W=[]),W.push([H[1],H[2]])):j==="Z"?W.length&&(N.push(W),W=[]):W.push([H[1],H[2]])}return W.length>0&&G.push(W),{polygons:N,polylines:G}}T.default=d.__assign({hasArc:w,extractPolygons:S,isPointInStroke:M},c.PathUtil)},80995:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.clearAnimationFrame=T.requestAnimationFrame=T.isNumberEqual=T.mod=T.toRadian=T.each=T.isArray=T.isFunction=T.isString=T.isNil=T.isSamePoint=T.mergeRegion=T.intersectRect=T.inBox=T.distance=T.getPixelRatio=void 0;function d(){return window?window.devicePixelRatio:1}T.getPixelRatio=d;function c(A,x,C,w){var M=A-C,S=x-w;return Math.sqrt(M*M+S*S)}T.distance=c;function F(A,x,C,w,M,S){return M>=A&&M<=A+C&&S>=x&&S<=x+w}T.inBox=F;function L(A,x){return!(x.minX>A.maxX||x.maxX<A.minX||x.minY>A.maxY||x.maxY<A.minY)}T.intersectRect=L;function O(A,x){return!A||!x?A||x:{minX:Math.min(A.minX,x.minX),minY:Math.min(A.minY,x.minY),maxX:Math.max(A.maxX,x.maxX),maxY:Math.max(A.maxY,x.maxY)}}T.mergeRegion=O;function _(A,x){return A[0]===x[0]&&A[1]===x[1]}T.isSamePoint=_;var P=v(26169);Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return P.isNil}}),Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return P.isString}}),Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return P.isFunction}}),Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return P.isArray}}),Object.defineProperty(T,"each",{enumerable:!0,get:function(){return P.each}}),Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return P.toRadian}}),Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return P.mod}}),Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return P.isNumberEqual}}),Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return P.requestAnimationFrame}}),Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return P.clearAnimationFrame}})},51824:function(xt,T,v){"use strict";v.r(T),v.d(T,{Arc:function(){return At},Cubic:function(){return Ft},Line:function(){return C},Polygon:function(){return zt},Polyline:function(){return jt},Quad:function(){return $},Util:function(){return d}});var d={};v.r(d),v.d(d,{distance:function(){return L},getBBoxByArray:function(){return _},getBBoxRange:function(){return P},isNumberEqual:function(){return O},piMod:function(){return A}});function c(bt){return Math.min.apply(null,bt)}function F(bt){return Math.max.apply(null,bt)}function L(bt,at,ft,Pt){var q=bt-ft,ut=at-Pt;return Math.sqrt(q*q+ut*ut)}function O(bt,at){return Math.abs(bt-at)<.001}function _(bt,at){var ft=c(bt),Pt=c(at),q=F(bt),ut=F(at);return{x:ft,y:Pt,width:q-ft,height:ut-Pt}}function P(bt,at,ft,Pt){return{minX:c([bt,ft]),maxX:F([bt,ft]),minY:c([at,Pt]),maxY:F([at,Pt])}}function A(bt){return(bt+Math.PI*2)%(Math.PI*2)}var x=v(7124),C={box:function(bt,at,ft,Pt){return _([bt,ft],[at,Pt])},length:function(bt,at,ft,Pt){return L(bt,at,ft,Pt)},pointAt:function(bt,at,ft,Pt,q){return{x:(1-q)*bt+q*ft,y:(1-q)*at+q*Pt}},pointDistance:function(bt,at,ft,Pt,q,ut){var Et=(ft-bt)*(q-bt)+(Pt-at)*(ut-at);if(Et<0)return L(bt,at,q,ut);var Nt=(ft-bt)*(ft-bt)+(Pt-at)*(Pt-at);return Et>Nt?L(ft,Pt,q,ut):this.pointToLine(bt,at,ft,Pt,q,ut)},pointToLine:function(bt,at,ft,Pt,q,ut){var Et=[ft-bt,Pt-at];if(x.exactEquals(Et,[0,0]))return Math.sqrt((q-bt)*(q-bt)+(ut-at)*(ut-at));var Nt=[-Et[1],Et[0]];x.normalize(Nt,Nt);var ee=[q-bt,ut-at];return Math.abs(x.dot(ee,Nt))},tangentAngle:function(bt,at,ft,Pt){return Math.atan2(Pt-at,ft-bt)}},w=1e-4;function M(bt,at,ft,Pt,q,ut){var Et,Nt=Infinity,ee=[ft,Pt],ge=20;ut&&ut>200&&(ge=ut/10);for(var De=1/ge,er=De/10,Re=0;Re<=ge;Re++){var Ke=Re*De,hr=[q.apply(null,bt.concat([Ke])),q.apply(null,at.concat([Ke]))],Sr=L(ee[0],ee[1],hr[0],hr[1]);Sr<Nt&&(Et=Ke,Nt=Sr)}if(Et===0)return{x:bt[0],y:at[0]};if(Et===1){var Rr=bt.length;return{x:bt[Rr-1],y:at[Rr-1]}}Nt=Infinity;for(var Re=0;Re<32&&!(er<w);Re++){var vr=Et-er,en=Et+er,hr=[q.apply(null,bt.concat([vr])),q.apply(null,at.concat([vr]))],Sr=L(ee[0],ee[1],hr[0],hr[1]);if(vr>=0&&Sr<Nt)Et=vr,Nt=Sr;else{var gn=[q.apply(null,bt.concat([en])),q.apply(null,at.concat([en]))],hn=L(ee[0],ee[1],gn[0],gn[1]);en<=1&&hn<Nt?(Et=en,Nt=hn):er*=.5}}return{x:q.apply(null,bt.concat([Et])),y:q.apply(null,at.concat([Et]))}}function S(bt,at){for(var ft=0,Pt=bt.length,q=0;q<Pt;q++){var ut=bt[q],Et=at[q],Nt=bt[(q+1)%Pt],ee=at[(q+1)%Pt];ft+=L(ut,Et,Nt,ee)}return ft/2}function I(bt,at,ft,Pt){var q=1-Pt;return q*q*bt+2*Pt*q*at+Pt*Pt*ft}function B(bt,at,ft){var Pt=bt+ft-2*at;if(O(Pt,0))return[.5];var q=(bt-at)/Pt;return q<=1&&q>=0?[q]:[]}function N(bt,at,ft,Pt){return 2*(1-Pt)*(at-bt)+2*Pt*(ft-at)}function G(bt,at,ft,Pt,q,ut,Et){var Nt=I(bt,ft,q,Et),ee=I(at,Pt,ut,Et),ge=C.pointAt(bt,at,ft,Pt,Et),De=C.pointAt(ft,Pt,q,ut,Et);return[[bt,at,ge.x,ge.y,Nt,ee],[Nt,ee,De.x,De.y,q,ut]]}function W(bt,at,ft,Pt,q,ut,Et){if(Et===0)return(L(bt,at,ft,Pt)+L(ft,Pt,q,ut)+L(bt,at,q,ut))/2;var Nt=G(bt,at,ft,Pt,q,ut,.5),ee=Nt[0],ge=Nt[1];return ee.push(Et-1),ge.push(Et-1),W.apply(null,ee)+W.apply(null,ge)}var $={box:function(bt,at,ft,Pt,q,ut){var Et=B(bt,ft,q)[0],Nt=B(at,Pt,ut)[0],ee=[bt,q],ge=[at,ut];return Et!==void 0&&ee.push(I(bt,ft,q,Et)),Nt!==void 0&&ge.push(I(at,Pt,ut,Nt)),_(ee,ge)},length:function(bt,at,ft,Pt,q,ut){return W(bt,at,ft,Pt,q,ut,3)},nearestPoint:function(bt,at,ft,Pt,q,ut,Et,Nt){return M([bt,ft,q],[at,Pt,ut],Et,Nt,I)},pointDistance:function(bt,at,ft,Pt,q,ut,Et,Nt){var ee=this.nearestPoint(bt,at,ft,Pt,q,ut,Et,Nt);return L(ee.x,ee.y,Et,Nt)},interpolationAt:I,pointAt:function(bt,at,ft,Pt,q,ut,Et){return{x:I(bt,ft,q,Et),y:I(at,Pt,ut,Et)}},divide:function(bt,at,ft,Pt,q,ut,Et){return G(bt,at,ft,Pt,q,ut,Et)},tangentAngle:function(bt,at,ft,Pt,q,ut,Et){var Nt=N(bt,ft,q,Et),ee=N(at,Pt,ut,Et),ge=Math.atan2(ee,Nt);return A(ge)}};function H(bt,at,ft,Pt,q){var ut=1-q;return ut*ut*ut*bt+3*at*q*ut*ut+3*ft*q*q*ut+Pt*q*q*q}function j(bt,at,ft,Pt,q){var ut=1-q;return 3*(ut*ut*(at-bt)+2*ut*q*(ft-at)+q*q*(Pt-ft))}function nt(bt,at,ft,Pt){var q=-3*bt+9*at-9*ft+3*Pt,ut=6*bt-12*at+6*ft,Et=3*at-3*bt,Nt=[],ee,ge,De;if(O(q,0))O(ut,0)||(ee=-Et/ut,ee>=0&&ee<=1&&Nt.push(ee));else{var er=ut*ut-4*q*Et;O(er,0)?Nt.push(-ut/(2*q)):er>0&&(De=Math.sqrt(er),ee=(-ut+De)/(2*q),ge=(-ut-De)/(2*q),ee>=0&&ee<=1&&Nt.push(ee),ge>=0&&ge<=1&&Nt.push(ge))}return Nt}function rt(bt,at,ft,Pt,q,ut,Et,Nt,ee){var ge=H(bt,ft,q,Et,ee),De=H(at,Pt,ut,Nt,ee),er=C.pointAt(bt,at,ft,Pt,ee),Re=C.pointAt(ft,Pt,q,ut,ee),Ke=C.pointAt(q,ut,Et,Nt,ee),hr=C.pointAt(er.x,er.y,Re.x,Re.y,ee),Sr=C.pointAt(Re.x,Re.y,Ke.x,Ke.y,ee);return[[bt,at,er.x,er.y,hr.x,hr.y,ge,De],[ge,De,Sr.x,Sr.y,Ke.x,Ke.y,Et,Nt]]}function mt(bt,at,ft,Pt,q,ut,Et,Nt,ee){if(ee===0)return S([bt,ft,q,Et],[at,Pt,ut,Nt]);var ge=rt(bt,at,ft,Pt,q,ut,Et,Nt,.5),De=ge[0],er=ge[1];return De.push(ee-1),er.push(ee-1),mt.apply(null,De)+mt.apply(null,er)}var Ft={extrema:nt,box:function(bt,at,ft,Pt,q,ut,Et,Nt){for(var ee=[bt,Et],ge=[at,Nt],De=nt(bt,ft,q,Et),er=nt(at,Pt,ut,Nt),Re=0;Re<De.length;Re++)ee.push(H(bt,ft,q,Et,De[Re]));for(var Re=0;Re<er.length;Re++)ge.push(H(at,Pt,ut,Nt,er[Re]));return _(ee,ge)},length:function(bt,at,ft,Pt,q,ut,Et,Nt){return mt(bt,at,ft,Pt,q,ut,Et,Nt,3)},nearestPoint:function(bt,at,ft,Pt,q,ut,Et,Nt,ee,ge,De){return M([bt,ft,q,Et],[at,Pt,ut,Nt],ee,ge,H,De)},pointDistance:function(bt,at,ft,Pt,q,ut,Et,Nt,ee,ge,De){var er=this.nearestPoint(bt,at,ft,Pt,q,ut,Et,Nt,ee,ge,De);return L(er.x,er.y,ee,ge)},interpolationAt:H,pointAt:function(bt,at,ft,Pt,q,ut,Et,Nt,ee){return{x:H(bt,ft,q,Et,ee),y:H(at,Pt,ut,Nt,ee)}},divide:function(bt,at,ft,Pt,q,ut,Et,Nt,ee){return rt(bt,at,ft,Pt,q,ut,Et,Nt,ee)},tangentAngle:function(bt,at,ft,Pt,q,ut,Et,Nt,ee){var ge=j(bt,ft,q,Et,ee),De=j(at,Pt,ut,Nt,ee);return A(Math.atan2(De,ge))}};function Gt(bt,at){var ft=Math.abs(bt);return at>0?ft:ft*-1}var gt={box:function(bt,at,ft,Pt){return{x:bt-ft,y:at-Pt,width:ft*2,height:Pt*2}},length:function(bt,at,ft,Pt){return Math.PI*(3*(ft+Pt)-Math.sqrt((3*ft+Pt)*(ft+3*Pt)))},nearestPoint:function(bt,at,ft,Pt,q,ut){var Et=ft,Nt=Pt;if(Et===0||Nt===0)return{x:bt,y:at};for(var ee=q-bt,ge=ut-at,De=Math.abs(ee),er=Math.abs(ge),Re=Et*Et,Ke=Nt*Nt,hr=Math.PI/4,Sr,Rr,vr=0;vr<4;vr++){Sr=Et*Math.cos(hr),Rr=Nt*Math.sin(hr);var en=(Re-Ke)*Math.pow(Math.cos(hr),3)/Et,gn=(Ke-Re)*Math.pow(Math.sin(hr),3)/Nt,hn=Sr-en,vn=Rr-gn,Wn=De-en,$r=er-gn,wi=Math.hypot(vn,hn),ci=Math.hypot($r,Wn),oe=wi*Math.asin((hn*$r-vn*Wn)/(wi*ci)),ce=oe/Math.sqrt(Re+Ke-Sr*Sr-Rr*Rr);hr+=ce,hr=Math.min(Math.PI/2,Math.max(0,hr))}return{x:bt+Gt(Sr,ee),y:at+Gt(Rr,ge)}},pointDistance:function(bt,at,ft,Pt,q,ut){var Et=this.nearestPoint(bt,at,ft,Pt,q,ut);return L(Et.x,Et.y,q,ut)},pointAt:function(bt,at,ft,Pt,q){var ut=2*Math.PI*q;return{x:bt+ft*Math.cos(ut),y:at+Pt*Math.sin(ut)}},tangentAngle:function(bt,at,ft,Pt,q){var ut=2*Math.PI*q,Et=Math.atan2(Pt*Math.cos(ut),-ft*Math.sin(ut));return A(Et)}};function st(bt,at,ft,Pt,q,ut,Et,Nt){return-1*ft*Math.cos(q)*Math.sin(Nt)-Pt*Math.sin(q)*Math.cos(Nt)}function Xt(bt,at,ft,Pt,q,ut,Et,Nt){return-1*ft*Math.sin(q)*Math.sin(Nt)+Pt*Math.cos(q)*Math.cos(Nt)}function Q(bt,at,ft){return Math.atan(-at/bt*Math.tan(ft))}function qt(bt,at,ft){return Math.atan(at/(bt*Math.tan(ft)))}function y(bt,at,ft,Pt,q,ut){return ft*Math.cos(q)*Math.cos(ut)-Pt*Math.sin(q)*Math.sin(ut)+bt}function Yt(bt,at,ft,Pt,q,ut){return ft*Math.sin(q)*Math.cos(ut)+Pt*Math.cos(q)*Math.sin(ut)+at}function K(bt,at,ft,Pt){var q=Math.atan2(Pt*bt,ft*at);return(q+Math.PI*2)%(Math.PI*2)}function ht(bt,at,ft){return{x:bt*Math.cos(ft),y:at*Math.sin(ft)}}function J(bt,at,ft){var Pt=Math.cos(ft),q=Math.sin(ft);return[bt*Pt-at*q,bt*q+at*Pt]}var At={box:function(bt,at,ft,Pt,q,ut,Et){for(var Nt=Q(ft,Pt,q),ee=Infinity,ge=-Infinity,De=[ut,Et],er=-Math.PI*2;er<=Math.PI*2;er+=Math.PI){var Re=Nt+er;ut<Et?ut<Re&&Re<Et&&De.push(Re):Et<Re&&Re<ut&&De.push(Re)}for(var er=0;er<De.length;er++){var Ke=y(bt,at,ft,Pt,q,De[er]);Ke<ee&&(ee=Ke),Ke>ge&&(ge=Ke)}for(var hr=qt(ft,Pt,q),Sr=Infinity,Rr=-Infinity,vr=[ut,Et],er=-Math.PI*2;er<=Math.PI*2;er+=Math.PI){var en=hr+er;ut<Et?ut<en&&en<Et&&vr.push(en):Et<en&&en<ut&&vr.push(en)}for(var er=0;er<vr.length;er++){var gn=Yt(bt,at,ft,Pt,q,vr[er]);gn<Sr&&(Sr=gn),gn>Rr&&(Rr=gn)}return{x:ee,y:Sr,width:ge-ee,height:Rr-Sr}},length:function(bt,at,ft,Pt,q,ut,Et){},nearestPoint:function(bt,at,ft,Pt,q,ut,Et,Nt,ee){var ge=J(Nt-bt,ee-at,-q),De=ge[0],er=ge[1],Re=gt.nearestPoint(0,0,ft,Pt,De,er),Ke=K(ft,Pt,Re.x,Re.y);Ke<ut?Re=ht(ft,Pt,ut):Ke>Et&&(Re=ht(ft,Pt,Et));var hr=J(Re.x,Re.y,q);return{x:hr[0]+bt,y:hr[1]+at}},pointDistance:function(bt,at,ft,Pt,q,ut,Et,Nt,ee){var ge=this.nearestPoint(bt,at,ft,Pt,Nt,ee);return L(ge.x,ge.y,Nt,ee)},pointAt:function(bt,at,ft,Pt,q,ut,Et,Nt){var ee=(Et-ut)*Nt+ut;return{x:y(bt,at,ft,Pt,q,ee),y:Yt(bt,at,ft,Pt,q,ee)}},tangentAngle:function(bt,at,ft,Pt,q,ut,Et,Nt){var ee=(Et-ut)*Nt+ut,ge=st(bt,at,ft,Pt,q,ut,Et,ee),De=Xt(bt,at,ft,Pt,q,ut,Et,ee);return A(Math.atan2(De,ge))}};function Vt(bt){for(var at=0,ft=[],Pt=0;Pt<bt.length-1;Pt++){var q=bt[Pt],ut=bt[Pt+1],Et=L(q[0],q[1],ut[0],ut[1]),Nt={from:q,to:ut,length:Et};ft.push(Nt),at+=Et}return{segments:ft,totalLength:at}}function pt(bt){if(bt.length<2)return 0;for(var at=0,ft=0;ft<bt.length-1;ft++){var Pt=bt[ft],q=bt[ft+1];at+=L(Pt[0],Pt[1],q[0],q[1])}return at}function Lt(bt,at){if(at>1||at<0||bt.length<2)return null;var ft=Vt(bt),Pt=ft.segments,q=ft.totalLength;if(q===0)return{x:bt[0][0],y:bt[0][1]};for(var ut=0,Et=null,Nt=0;Nt<Pt.length;Nt++){var ee=Pt[Nt],ge=ee.from,De=ee.to,er=ee.length/q;if(at>=ut&&at<=ut+er){var Re=(at-ut)/er;Et=C.pointAt(ge[0],ge[1],De[0],De[1],Re);break}ut+=er}return Et}function Tt(bt,at){if(at>1||at<0||bt.length<2)return 0;for(var ft=Vt(bt),Pt=ft.segments,q=ft.totalLength,ut=0,Et=0,Nt=0;Nt<Pt.length;Nt++){var ee=Pt[Nt],ge=ee.from,De=ee.to,er=ee.length/q;if(at>=ut&&at<=ut+er){Et=Math.atan2(De[1]-ge[1],De[0]-ge[0]);break}ut+=er}return Et}function kt(bt,at,ft){for(var Pt=Infinity,q=0;q<bt.length-1;q++){var ut=bt[q],Et=bt[q+1],Nt=C.pointDistance(ut[0],ut[1],Et[0],Et[1],at,ft);Nt<Pt&&(Pt=Nt)}return Pt}var jt={box:function(bt){for(var at=[],ft=[],Pt=0;Pt<bt.length;Pt++){var q=bt[Pt];at.push(q[0]),ft.push(q[1])}return _(at,ft)},length:function(bt){return pt(bt)},pointAt:function(bt,at){return Lt(bt,at)},pointDistance:function(bt,at,ft){return kt(bt,at,ft)},tangentAngle:function(bt,at){return Tt(bt,at)}};function Wt(bt){var at=bt.slice(0);return bt.length&&at.push(bt[0]),at}var zt={box:function(bt){return jt.box(bt)},length:function(bt){return pt(Wt(bt))},pointAt:function(bt,at){return Lt(Wt(bt),at)},pointDistance:function(bt,at,ft){return kt(Wt(bt),at,ft)},tangentAngle:function(bt,at){return Tt(Wt(bt),at)}}},93695:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195),c=v(88825);function F(M,S,I,B,N,G,W,$){return-1*I*Math.cos(N)*Math.sin($)-B*Math.sin(N)*Math.cos($)}function L(M,S,I,B,N,G,W,$){return-1*I*Math.sin(N)*Math.sin($)+B*Math.cos(N)*Math.cos($)}function O(M,S,I){return Math.atan(-S/M*Math.tan(I))}function _(M,S,I){return Math.atan(S/(M*Math.tan(I)))}function P(M,S,I,B,N,G){return I*Math.cos(N)*Math.cos(G)-B*Math.sin(N)*Math.sin(G)+M}function A(M,S,I,B,N,G){return I*Math.sin(N)*Math.cos(G)+B*Math.cos(N)*Math.sin(G)+S}function x(M,S,I,B){var N=Math.atan2(B*M,I*S);return(N+Math.PI*2)%(Math.PI*2)}function C(M,S,I){return{x:M*Math.cos(I),y:S*Math.sin(I)}}function w(M,S,I){var B=Math.cos(I),N=Math.sin(I);return[M*B-S*N,M*N+S*B]}T.default={box:function(M,S,I,B,N,G,W){for(var $=O(I,B,N),H=Infinity,j=-Infinity,nt=[G,W],rt=-Math.PI*2;rt<=Math.PI*2;rt+=Math.PI){var mt=$+rt;G<W?G<mt&&mt<W&&nt.push(mt):W<mt&&mt<G&&nt.push(mt)}for(var rt=0;rt<nt.length;rt++){var Ft=P(M,S,I,B,N,nt[rt]);Ft<H&&(H=Ft),Ft>j&&(j=Ft)}for(var Gt=_(I,B,N),gt=Infinity,st=-Infinity,Xt=[G,W],rt=-Math.PI*2;rt<=Math.PI*2;rt+=Math.PI){var Q=Gt+rt;G<W?G<Q&&Q<W&&Xt.push(Q):W<Q&&Q<G&&Xt.push(Q)}for(var rt=0;rt<Xt.length;rt++){var qt=A(M,S,I,B,N,Xt[rt]);qt<gt&&(gt=qt),qt>st&&(st=qt)}return{x:H,y:gt,width:j-H,height:st-gt}},length:function(M,S,I,B,N,G,W){},nearestPoint:function(M,S,I,B,N,G,W,$,H){var j=w($-M,H-S,-N),nt=j[0],rt=j[1],mt=c.default.nearestPoint(0,0,I,B,nt,rt),Ft=x(I,B,mt.x,mt.y);Ft<G?mt=C(I,B,G):Ft>W&&(mt=C(I,B,W));var Gt=w(mt.x,mt.y,N);return{x:Gt[0]+M,y:Gt[1]+S}},pointDistance:function(M,S,I,B,N,G,W,$,H){var j=this.nearestPoint(M,S,I,B,$,H);return d.distance(j.x,j.y,$,H)},pointAt:function(M,S,I,B,N,G,W,$){var H=(W-G)*$+G;return{x:P(M,S,I,B,N,H),y:A(M,S,I,B,N,H)}},tangentAngle:function(M,S,I,B,N,G,W,$){var H=(W-G)*$+G,j=F(M,S,I,B,N,G,W,H),nt=L(M,S,I,B,N,G,W,H);return d.piMod(Math.atan2(nt,j))}}},28487:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.snapLength=T.nearestPoint=void 0;var d=v(3195),c=1e-4;function F(O,_,P,A,x,C){var w,M=Infinity,S=[P,A],I=20;C&&C>200&&(I=C/10);for(var B=1/I,N=B/10,G=0;G<=I;G++){var W=G*B,$=[x.apply(null,O.concat([W])),x.apply(null,_.concat([W]))],H=d.distance(S[0],S[1],$[0],$[1]);H<M&&(w=W,M=H)}if(w===0)return{x:O[0],y:_[0]};if(w===1){var j=O.length;return{x:O[j-1],y:_[j-1]}}M=Infinity;for(var G=0;G<32&&!(N<c);G++){var nt=w-N,rt=w+N,$=[x.apply(null,O.concat([nt])),x.apply(null,_.concat([nt]))],H=d.distance(S[0],S[1],$[0],$[1]);if(nt>=0&&H<M)w=nt,M=H;else{var mt=[x.apply(null,O.concat([rt])),x.apply(null,_.concat([rt]))],Ft=d.distance(S[0],S[1],mt[0],mt[1]);rt<=1&&Ft<M?(w=rt,M=Ft):N*=.5}}return{x:x.apply(null,O.concat([w])),y:x.apply(null,_.concat([w]))}}T.nearestPoint=F;function L(O,_){for(var P=0,A=O.length,x=0;x<A;x++){var C=O[x],w=_[x],M=O[(x+1)%A],S=_[(x+1)%A];P+=d.distance(C,w,M,S)}return P/2}T.snapLength=L},84104:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195),c=v(50131),F=v(28487);function L(x,C,w,M,S){var I=1-S;return I*I*I*x+3*C*S*I*I+3*w*S*S*I+M*S*S*S}function O(x,C,w,M,S){var I=1-S;return 3*(I*I*(C-x)+2*I*S*(w-C)+S*S*(M-w))}function _(x,C,w,M){var S=-3*x+9*C-9*w+3*M,I=6*x-12*C+6*w,B=3*C-3*x,N=[],G,W,$;if(d.isNumberEqual(S,0))d.isNumberEqual(I,0)||(G=-B/I,G>=0&&G<=1&&N.push(G));else{var H=I*I-4*S*B;d.isNumberEqual(H,0)?N.push(-I/(2*S)):H>0&&($=Math.sqrt(H),G=(-I+$)/(2*S),W=(-I-$)/(2*S),G>=0&&G<=1&&N.push(G),W>=0&&W<=1&&N.push(W))}return N}function P(x,C,w,M,S,I,B,N,G){var W=L(x,w,S,B,G),$=L(C,M,I,N,G),H=c.default.pointAt(x,C,w,M,G),j=c.default.pointAt(w,M,S,I,G),nt=c.default.pointAt(S,I,B,N,G),rt=c.default.pointAt(H.x,H.y,j.x,j.y,G),mt=c.default.pointAt(j.x,j.y,nt.x,nt.y,G);return[[x,C,H.x,H.y,rt.x,rt.y,W,$],[W,$,mt.x,mt.y,nt.x,nt.y,B,N]]}function A(x,C,w,M,S,I,B,N,G){if(G===0)return F.snapLength([x,w,S,B],[C,M,I,N]);var W=P(x,C,w,M,S,I,B,N,.5),$=W[0],H=W[1];return $.push(G-1),H.push(G-1),A.apply(null,$)+A.apply(null,H)}T.default={extrema:_,box:function(x,C,w,M,S,I,B,N){for(var G=[x,B],W=[C,N],$=_(x,w,S,B),H=_(C,M,I,N),j=0;j<$.length;j++)G.push(L(x,w,S,B,$[j]));for(var j=0;j<H.length;j++)W.push(L(C,M,I,N,H[j]));return d.getBBoxByArray(G,W)},length:function(x,C,w,M,S,I,B,N){return A(x,C,w,M,S,I,B,N,3)},nearestPoint:function(x,C,w,M,S,I,B,N,G,W,$){return F.nearestPoint([x,w,S,B],[C,M,I,N],G,W,L,$)},pointDistance:function(x,C,w,M,S,I,B,N,G,W,$){var H=this.nearestPoint(x,C,w,M,S,I,B,N,G,W,$);return d.distance(H.x,H.y,G,W)},interpolationAt:L,pointAt:function(x,C,w,M,S,I,B,N,G){return{x:L(x,w,S,B,G),y:L(C,M,I,N,G)}},divide:function(x,C,w,M,S,I,B,N,G){return P(x,C,w,M,S,I,B,N,G)},tangentAngle:function(x,C,w,M,S,I,B,N,G){var W=O(x,w,S,B,G),$=O(C,M,I,N,G);return d.piMod(Math.atan2($,W))}}},88825:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195);function c(F,L){var O=Math.abs(F);return L>0?O:O*-1}T.default={box:function(F,L,O,_){return{x:F-O,y:L-_,width:O*2,height:_*2}},length:function(F,L,O,_){return Math.PI*(3*(O+_)-Math.sqrt((3*O+_)*(O+3*_)))},nearestPoint:function(F,L,O,_,P,A){var x=O,C=_;if(x===0||C===0)return{x:F,y:L};for(var w=P-F,M=A-L,S=Math.abs(w),I=Math.abs(M),B=x*x,N=C*C,G=Math.PI/4,W,$,H=0;H<4;H++){W=x*Math.cos(G),$=C*Math.sin(G);var j=(B-N)*Math.pow(Math.cos(G),3)/x,nt=(N-B)*Math.pow(Math.sin(G),3)/C,rt=W-j,mt=$-nt,Ft=S-j,Gt=I-nt,gt=Math.hypot(mt,rt),st=Math.hypot(Gt,Ft),Xt=gt*Math.asin((rt*Gt-mt*Ft)/(gt*st)),Q=Xt/Math.sqrt(B+N-W*W-$*$);G+=Q,G=Math.min(Math.PI/2,Math.max(0,G))}return{x:F+c(W,w),y:L+c($,M)}},pointDistance:function(F,L,O,_,P,A){var x=this.nearestPoint(F,L,O,_,P,A);return d.distance(x.x,x.y,P,A)},pointAt:function(F,L,O,_,P){var A=2*Math.PI*P;return{x:F+O*Math.cos(A),y:L+_*Math.sin(A)}},tangentAngle:function(F,L,O,_,P){var A=2*Math.PI*P,x=Math.atan2(_*Math.cos(A),-O*Math.sin(A));return d.piMod(x)}}},50131:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(3195),c=v(7124);T.default={box:function(F,L,O,_){return d.getBBoxByArray([F,O],[L,_])},length:function(F,L,O,_){return d.distance(F,L,O,_)},pointAt:function(F,L,O,_,P){return{x:(1-P)*F+P*O,y:(1-P)*L+P*_}},pointDistance:function(F,L,O,_,P,A){var x=(O-F)*(P-F)+(_-L)*(A-L);if(x<0)return d.distance(F,L,P,A);var C=(O-F)*(O-F)+(_-L)*(_-L);return x>C?d.distance(O,_,P,A):this.pointToLine(F,L,O,_,P,A)},pointToLine:function(F,L,O,_,P,A){var x=[O-F,_-L];if(c.exactEquals(x,[0,0]))return Math.sqrt((P-F)*(P-F)+(A-L)*(A-L));var C=[-x[1],x[0]];c.normalize(C,C);var w=[P-F,A-L];return Math.abs(c.dot(w,C))},tangentAngle:function(F,L,O,_){return Math.atan2(_-L,O-F)}}},590:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(40850),F=v(3195);T.Z={box:function(L){for(var O=[],_=[],P=0;P<L.length;P++){var A=L[P];O.push(A[0]),_.push(A[1])}return F.getBBoxByArray(O,_)},length:function(L){return c.lengthOfSegment(L)},pointAt:function(L,O){return c.pointAtSegments(L,O)},pointDistance:function(L,O,_){return c.distanceAtSegment(L,O,_)},tangentAngle:function(L,O){return c.angleAtSegments(L,O)}}},63308:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(50131),c=v(3195),F=v(28487);function L(x,C,w,M){var S=1-M;return S*S*x+2*M*S*C+M*M*w}function O(x,C,w){var M=x+w-2*C;if(c.isNumberEqual(M,0))return[.5];var S=(x-C)/M;return S<=1&&S>=0?[S]:[]}function _(x,C,w,M){return 2*(1-M)*(C-x)+2*M*(w-C)}function P(x,C,w,M,S,I,B){var N=L(x,w,S,B),G=L(C,M,I,B),W=d.default.pointAt(x,C,w,M,B),$=d.default.pointAt(w,M,S,I,B);return[[x,C,W.x,W.y,N,G],[N,G,$.x,$.y,S,I]]}function A(x,C,w,M,S,I,B){if(B===0)return(c.distance(x,C,w,M)+c.distance(w,M,S,I)+c.distance(x,C,S,I))/2;var N=P(x,C,w,M,S,I,.5),G=N[0],W=N[1];return G.push(B-1),W.push(B-1),A.apply(null,G)+A.apply(null,W)}T.default={box:function(x,C,w,M,S,I){var B=O(x,w,S)[0],N=O(C,M,I)[0],G=[x,S],W=[C,I];return B!==void 0&&G.push(L(x,w,S,B)),N!==void 0&&W.push(L(C,M,I,N)),c.getBBoxByArray(G,W)},length:function(x,C,w,M,S,I){return A(x,C,w,M,S,I,3)},nearestPoint:function(x,C,w,M,S,I,B,N){return F.nearestPoint([x,w,S],[C,M,I],B,N,L)},pointDistance:function(x,C,w,M,S,I,B,N){var G=this.nearestPoint(x,C,w,M,S,I,B,N);return c.distance(G.x,G.y,B,N)},interpolationAt:L,pointAt:function(x,C,w,M,S,I,B){return{x:L(x,w,S,B),y:L(C,M,I,B)}},divide:function(x,C,w,M,S,I,B){return P(x,C,w,M,S,I,B)},tangentAngle:function(x,C,w,M,S,I,B){var N=_(x,w,S,B),G=_(C,M,I,B),W=Math.atan2(G,N);return c.piMod(W)}}},40850:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.distanceAtSegment=T.angleAtSegments=T.pointAtSegments=T.lengthOfSegment=void 0;var d=v(50131),c=v(3195);function F(A){for(var x=0,C=[],w=0;w<A.length-1;w++){var M=A[w],S=A[w+1],I=c.distance(M[0],M[1],S[0],S[1]),B={from:M,to:S,length:I};C.push(B),x+=I}return{segments:C,totalLength:x}}function L(A){if(A.length<2)return 0;for(var x=0,C=0;C<A.length-1;C++){var w=A[C],M=A[C+1];x+=c.distance(w[0],w[1],M[0],M[1])}return x}T.lengthOfSegment=L;function O(A,x){if(x>1||x<0||A.length<2)return null;var C=F(A),w=C.segments,M=C.totalLength;if(M===0)return{x:A[0][0],y:A[0][1]};for(var S=0,I=null,B=0;B<w.length;B++){var N=w[B],G=N.from,W=N.to,$=N.length/M;if(x>=S&&x<=S+$){var H=(x-S)/$;I=d.default.pointAt(G[0],G[1],W[0],W[1],H);break}S+=$}return I}T.pointAtSegments=O;function _(A,x){if(x>1||x<0||A.length<2)return 0;for(var C=F(A),w=C.segments,M=C.totalLength,S=0,I=0,B=0;B<w.length;B++){var N=w[B],G=N.from,W=N.to,$=N.length/M;if(x>=S&&x<=S+$){I=Math.atan2(W[1]-G[1],W[0]-G[0]);break}S+=$}return I}T.angleAtSegments=_;function P(A,x,C){for(var w=Infinity,M=0;M<A.length-1;M++){var S=A[M],I=A[M+1],B=d.default.pointDistance(S[0],S[1],I[0],I[1],x,C);B<w&&(w=B)}return w}T.distanceAtSegment=P},3195:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.piMod=T.getBBoxRange=T.getBBoxByArray=T.isNumberEqual=T.distance=void 0;function v(P){return Math.min.apply(null,P)}function d(P){return Math.max.apply(null,P)}function c(P,A,x,C){var w=P-x,M=A-C;return Math.sqrt(w*w+M*M)}T.distance=c;function F(P,A){return Math.abs(P-A)<.001}T.isNumberEqual=F;function L(P,A){var x=v(P),C=v(A),w=d(P),M=d(A);return{x,y:C,width:w-x,height:M-C}}T.getBBoxByArray=L;function O(P,A,x,C){return{minX:v([P,x]),maxX:d([P,x]),minY:v([A,C]),maxY:d([A,C])}}T.getBBoxRange=O;function _(P){return(P+Math.PI*2)%(Math.PI*2)}T.piMod=_},19634:function(xt,T,v){"use strict";v.r(T),v.d(T,{Canvas:function(){return rr},Event:function(){return F.Event},Group:function(){return W},Shape:function(){return d},version:function(){return fr}});var d={};v.r(d),v.d(d,{Base:function(){return j},Circle:function(){return rt},Dom:function(){return Ft},Ellipse:function(){return gt},Image:function(){return Xt},Line:function(){return y},Marker:function(){return J},Path:function(){return Vt},Polygon:function(){return Lt},Polyline:function(){return jt},Rect:function(){return Pt},Text:function(){return De}});var c=v(21362),F=v(23443),L=v(26169),O={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},_={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},P=null;function A(fe){return document.createElementNS("http://www.w3.org/2000/svg",fe)}function x(fe){var re=O[fe.type],Rt=fe.getParent();if(!re)throw new Error("the type "+fe.type+" is not supported by svg");var ie=A(re);if(fe.get("id")&&(ie.id=fe.get("id")),fe.set("el",ie),fe.set("attrs",{}),Rt){var be=Rt.get("el");be||(be=Rt.createDom(),Rt.set("el",be)),be.appendChild(ie)}return ie}function C(fe,re){var Rt=fe.get("el"),ie=(0,L.toArray)(Rt.children).sort(re),be=document.createDocumentFragment();ie.forEach(function(Oe){be.appendChild(Oe)}),Rt.appendChild(be)}function w(fe,re){var Rt=fe.parentNode,ie=Array.from(Rt.childNodes).filter(function(ke){return ke.nodeType===1&&ke.nodeName.toLowerCase()!=="defs"}),be=ie[re],Oe=ie.indexOf(fe);if(be){if(Oe>re)Rt.insertBefore(fe,be);else if(Oe<re){var ze=ie[re+1];ze?Rt.insertBefore(fe,ze):Rt.appendChild(fe)}}else Rt.appendChild(fe)}function M(fe,re){var Rt=fe.cfg.el,ie=fe.attr(),be={dx:ie.shadowOffsetX,dy:ie.shadowOffsetY,blur:ie.shadowBlur,color:ie.shadowColor};if(!be.dx&&!be.dy&&!be.blur&&!be.color)Rt.removeAttribute("filter");else{var Oe=re.find("filter",be);Oe||(Oe=re.addShadow(be)),Rt.setAttribute("filter","url(#"+Oe+")")}}function S(fe){var re=fe.attr().matrix;if(re){for(var Rt=fe.cfg.el,ie=[],be=0;be<9;be+=3)ie.push(re[be]+","+re[be+1]);ie=ie.join(","),ie.indexOf("NaN")===-1?Rt.setAttribute("transform","matrix("+ie+")"):console.warn("invalid matrix:",re)}}function I(fe,re){var Rt=fe.getClip(),ie=fe.get("el");if(!Rt)ie.removeAttribute("clip-path");else if(Rt&&!ie.hasAttribute("clip-path")){x(Rt),Rt.createPath(re);var be=re.addClip(Rt);ie.setAttribute("clip-path","url(#"+be+")")}}function B(fe,re){re.forEach(function(Rt){Rt.draw(fe)})}function N(fe,re){var Rt=fe.get("canvas");if(Rt&&Rt.get("autoDraw")){var ie=Rt.get("context"),be=fe.getParent(),Oe=be?be.getChildren():[Rt],ze=fe.get("el");if(re==="remove"){var ke=fe.get("isClipShape");if(ke){var Ze=ze&&ze.parentNode,kr=Ze&&Ze.parentNode;Ze&&kr&&kr.removeChild(Ze)}else ze&&ze.parentNode&&ze.parentNode.removeChild(ze)}else if(re==="show")ze.setAttribute("visibility","visible");else if(re==="hide")ze.setAttribute("visibility","hidden");else if(re==="zIndex")w(ze,Oe.indexOf(fe));else if(re==="sort"){var Fr=fe.get("children");Fr&&Fr.length&&C(fe,function(jr,ve){return Fr.indexOf(jr)-Fr.indexOf(ve)?1:0})}else re==="clear"?ze&&(ze.innerHTML=""):re==="matrix"?S(fe):re==="clip"?I(fe,ie):re==="attr"||re==="add"&&fe.draw(ie)}}var G=function(fe){(0,c.__extends)(re,fe);function re(){return fe!==null&&fe.apply(this,arguments)||this}return re.prototype.isEntityGroup=function(){return!0},re.prototype.createDom=function(){var Rt=A("g");this.set("el",Rt);var ie=this.getParent();if(ie){var be=ie.get("el");be||(be=ie.createDom(),ie.set("el",be)),be.appendChild(Rt)}return Rt},re.prototype.afterAttrsChange=function(Rt){fe.prototype.afterAttrsChange.call(this,Rt);var ie=this.get("canvas");if(ie&&ie.get("autoDraw")){var be=ie.get("context");this.createPath(be,Rt)}},re.prototype.onCanvasChange=function(Rt){N(this,Rt)},re.prototype.getShapeBase=function(){return d},re.prototype.getGroupBase=function(){return re},re.prototype.draw=function(Rt){var ie=this.getChildren(),be=this.get("el");this.get("destroyed")?be&&be.parentNode.removeChild(be):(be||this.createDom(),I(this,Rt),this.createPath(Rt),ie.length&&B(Rt,ie))},re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){_[ke]&&Oe.setAttribute(_[ke],ze)}),S(this)},re}(F.AbstractGroup),W=G,$=v(46479),H=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="svg",Rt.canFill=!1,Rt.canStroke=!1,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},re.prototype.afterAttrsChange=function(Rt){fe.prototype.afterAttrsChange.call(this,Rt);var ie=this.get("canvas");if(ie&&ie.get("autoDraw")){var be=ie.get("context");this.draw(be,Rt)}},re.prototype.getShapeBase=function(){return d},re.prototype.getGroupBase=function(){return W},re.prototype.onCanvasChange=function(Rt){N(this,Rt)},re.prototype.calculateBBox=function(){var Rt=this.get("el"),ie=null;if(Rt)ie=Rt.getBBox();else{var be=(0,$.b)(this.get("type"));be&&(ie=be(this))}if(ie){var Oe=ie.x,ze=ie.y,ke=ie.width,Ze=ie.height,kr=this.getHitLineWidth(),Fr=kr/2,jr=Oe-Fr,ve=ze-Fr,pe=Oe+ke+Fr,Se=ze+Ze+Fr;return{x:jr,y:ve,minX:jr,minY:ve,maxX:pe,maxY:Se,width:ke+kr,height:Ze+kr}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},re.prototype.isFill=function(){var Rt=this.attr(),ie=Rt.fill,be=Rt.fillStyle;return(ie||be||this.isClipShape())&&this.canFill},re.prototype.isStroke=function(){var Rt=this.attr(),ie=Rt.stroke,be=Rt.strokeStyle;return(ie||be)&&this.canStroke},re.prototype.draw=function(Rt,ie){var be=this.get("el");this.get("destroyed")?be&&be.parentNode.removeChild(be):(be||x(this),I(this,Rt),this.createPath(Rt,ie),this.shadow(Rt,ie),this.strokeAndFill(Rt,ie),this.transform(ie))},re.prototype.createPath=function(Rt,ie){},re.prototype.strokeAndFill=function(Rt,ie){var be=ie||this.attr(),Oe=be.fill,ze=be.fillStyle,ke=be.stroke,Ze=be.strokeStyle,kr=be.fillOpacity,Fr=be.strokeOpacity,jr=be.lineWidth,ve=this.get("el");this.canFill&&(ie?"fill"in be?this._setColor(Rt,"fill",Oe):"fillStyle"in be&&this._setColor(Rt,"fill",ze):this._setColor(Rt,"fill",Oe||ze),kr&&ve.setAttribute(_.fillOpacity,kr)),this.canStroke&&jr>0&&(ie?"stroke"in be?this._setColor(Rt,"stroke",ke):"strokeStyle"in be&&this._setColor(Rt,"stroke",Ze):this._setColor(Rt,"stroke",ke||Ze),Fr&&ve.setAttribute(_.strokeOpacity,Fr),jr&&ve.setAttribute(_.lineWidth,jr))},re.prototype._setColor=function(Rt,ie,be){var Oe=this.get("el");if(!be){Oe.setAttribute(_[ie],"none");return}if(be=be.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(be)){var ze=Rt.find("gradient",be);ze||(ze=Rt.addGradient(be)),Oe.setAttribute(_[ie],"url(#"+ze+")")}else if(/^[p,P]{1}[\s]*\(/.test(be)){var ze=Rt.find("pattern",be);ze||(ze=Rt.addPattern(be)),Oe.setAttribute(_[ie],"url(#"+ze+")")}else Oe.setAttribute(_[ie],be)},re.prototype.shadow=function(Rt,ie){var be=this.attr(),Oe=ie||be,ze=Oe.shadowOffsetX,ke=Oe.shadowOffsetY,Ze=Oe.shadowBlur,kr=Oe.shadowColor;(ze||ke||Ze||kr)&&M(this,Rt)},re.prototype.transform=function(Rt){var ie=this.attr(),be=(Rt||ie).matrix;be&&S(this)},re.prototype.isInShape=function(Rt,ie){return this.isPointInPath(Rt,ie)},re.prototype.isPointInPath=function(Rt,ie){var be=this.get("el"),Oe=this.get("canvas"),ze=Oe.get("el").getBoundingClientRect(),ke=Rt+ze.left,Ze=ie+ze.top,kr=document.elementFromPoint(ke,Ze);return!!(kr&&kr.isEqualNode(be))},re.prototype.getHitLineWidth=function(){var Rt=this.attrs,ie=Rt.lineWidth,be=Rt.lineAppendWidth;return this.isStroke()?ie+be:0},re}(F.AbstractShape),j=H,nt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="circle",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x:0,y:0,r:0})},re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){ke==="x"||ke==="y"?Oe.setAttribute("c"+ke,ze):_[ke]&&Oe.setAttribute(_[ke],ze)})},re}(j),rt=nt,mt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="dom",Rt.canFill=!1,Rt.canStroke=!1,Rt}return re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){_[ke]&&Oe.setAttribute(_[ke],ze)}),Oe.innerHTML=be.html},re}(j),Ft=mt,Gt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="ellipse",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x:0,y:0,rx:0,ry:0})},re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){ke==="x"||ke==="y"?Oe.setAttribute("c"+ke,ze):_[ke]&&Oe.setAttribute(_[ke],ze)})},re}(j),gt=Gt,st=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="image",Rt.canFill=!1,Rt.canStroke=!1,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x:0,y:0,width:0,height:0})},re.prototype.createPath=function(Rt,ie){var be=this,Oe=this.attr(),ze=this.get("el");(0,L.each)(ie||Oe,function(ke,Ze){Ze==="img"?be._setImage(Oe.img):_[Ze]&&ze.setAttribute(_[Ze],ke)})},re.prototype.setAttr=function(Rt,ie){this.attrs[Rt]=ie,Rt==="img"&&this._setImage(ie)},re.prototype._setImage=function(Rt){var ie=this.attr(),be=this.get("el");if((0,L.isString)(Rt))be.setAttribute("href",Rt);else if(Rt instanceof window.Image)ie.width||(be.setAttribute("width",Rt.width),this.attr("width",Rt.width)),ie.height||(be.setAttribute("height",Rt.height),this.attr("height",Rt.height)),be.setAttribute("href",Rt.src);else if(Rt instanceof HTMLElement&&(0,L.isString)(Rt.nodeName)&&Rt.nodeName.toUpperCase()==="CANVAS")be.setAttribute("href",Rt.toDataURL());else if(Rt instanceof ImageData){var Oe=document.createElement("canvas");Oe.setAttribute("width",""+Rt.width),Oe.setAttribute("height",""+Rt.height),Oe.getContext("2d").putImageData(Rt,0,0),ie.width||(be.setAttribute("width",""+Rt.width),this.attr("width",Rt.width)),ie.height||(be.setAttribute("height",""+Rt.height),this.attr("height",Rt.height)),be.setAttribute("href",Oe.toDataURL())}},re}(j),Xt=st,Q=v(50131),qt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="line",Rt.canFill=!1,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){if(ke==="startArrow"||ke==="endArrow")if(ze){var Ze=(0,L.isObject)(ze)?Rt.addArrow(be,_[ke]):Rt.getDefaultArrow(be,_[ke]);Oe.setAttribute(_[ke],"url(#"+Ze+")")}else Oe.removeAttribute(_[ke]);else _[ke]&&Oe.setAttribute(_[ke],ze)})},re.prototype.getTotalLength=function(){var Rt=this.attr(),ie=Rt.x1,be=Rt.y1,Oe=Rt.x2,ze=Rt.y2;return Q.default.length(ie,be,Oe,ze)},re.prototype.getPoint=function(Rt){var ie=this.attr(),be=ie.x1,Oe=ie.y1,ze=ie.x2,ke=ie.y2;return Q.default.pointAt(be,Oe,ze,ke,Rt)},re}(j),y=qt,Yt={circle:function(fe,re,Rt){return[["M",fe,re],["m",-Rt,0],["a",Rt,Rt,0,1,0,Rt*2,0],["a",Rt,Rt,0,1,0,-Rt*2,0]]},square:function(fe,re,Rt){return[["M",fe-Rt,re-Rt],["L",fe+Rt,re-Rt],["L",fe+Rt,re+Rt],["L",fe-Rt,re+Rt],["Z"]]},diamond:function(fe,re,Rt){return[["M",fe-Rt,re],["L",fe,re-Rt],["L",fe+Rt,re],["L",fe,re+Rt],["Z"]]},triangle:function(fe,re,Rt){var ie=Rt*Math.sin(1/3*Math.PI);return[["M",fe-Rt,re+ie],["L",fe,re-ie],["L",fe+Rt,re+ie],["z"]]},triangleDown:function(fe,re,Rt){var ie=Rt*Math.sin(1/3*Math.PI);return[["M",fe-Rt,re-ie],["L",fe+Rt,re-ie],["L",fe,re+ie],["Z"]]}},K={get:function(fe){return Yt[fe]},register:function(fe,re){Yt[fe]=re},remove:function(fe){delete Yt[fe]},getAll:function(){return Yt}},ht=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="marker",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.createPath=function(Rt){var ie=this.get("el");ie.setAttribute("d",this._assembleMarker())},re.prototype._assembleMarker=function(){var Rt=this._getPath();return(0,L.isArray)(Rt)?Rt.map(function(ie){return ie.join(" ")}).join(""):Rt},re.prototype._getPath=function(){var Rt=this.attr(),ie=Rt.x,be=Rt.y,Oe=Rt.r||Rt.radius,ze=Rt.symbol||"circle",ke;return(0,L.isFunction)(ze)?ke=ze:ke=K.get(ze),ke?ke(ie,be,Oe):(console.warn(ke+" symbol is not exist."),null)},re.symbolsFactory=K,re}(j),J=ht,At=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="path",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{startArrow:!1,endArrow:!1})},re.prototype.createPath=function(Rt,ie){var be=this,Oe=this.attr(),ze=this.get("el");(0,L.each)(ie||Oe,function(ke,Ze){if(Ze==="path"&&(0,L.isArray)(ke))ze.setAttribute("d",be._formatPath(ke));else if(Ze==="startArrow"||Ze==="endArrow")if(ke){var kr=(0,L.isObject)(ke)?Rt.addArrow(Oe,_[Ze]):Rt.getDefaultArrow(Oe,_[Ze]);ze.setAttribute(_[Ze],"url(#"+kr+")")}else ze.removeAttribute(_[Ze]);else _[Ze]&&ze.setAttribute(_[Ze],ke)})},re.prototype._formatPath=function(Rt){var ie=Rt.map(function(be){return be.join(" ")}).join("");return~ie.indexOf("NaN")?"":ie},re.prototype.getTotalLength=function(){var Rt=this.get("el");return Rt?Rt.getTotalLength():null},re.prototype.getPoint=function(Rt){var ie=this.get("el"),be=this.getTotalLength(),Oe=ie?ie.getPointAtLength(Rt*be):null;return Oe?{x:Oe.x,y:Oe.y}:null},re}(j),Vt=At,pt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="polygon",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){ke==="points"&&(0,L.isArray)(ze)&&ze.length>=2?Oe.setAttribute("points",ze.map(function(Ze){return Ze[0]+","+Ze[1]}).join(" ")):_[ke]&&Oe.setAttribute(_[ke],ze)})},re}(j),Lt=pt,Tt=v(590),kt=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="polyline",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{startArrow:!1,endArrow:!1})},re.prototype.onAttrChange=function(Rt,ie,be){fe.prototype.onAttrChange.call(this,Rt,ie,be),["points"].indexOf(Rt)!==-1&&this._resetCache()},re.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},re.prototype.createPath=function(Rt,ie){var be=this.attr(),Oe=this.get("el");(0,L.each)(ie||be,function(ze,ke){ke==="points"&&(0,L.isArray)(ze)&&ze.length>=2?Oe.setAttribute("points",ze.map(function(Ze){return Ze[0]+","+Ze[1]}).join(" ")):_[ke]&&Oe.setAttribute(_[ke],ze)})},re.prototype.getTotalLength=function(){var Rt=this.attr().points,ie=this.get("totalLength");return(0,L.isNil)(ie)?(this.set("totalLength",Tt.Z.length(Rt)),this.get("totalLength")):ie},re.prototype.getPoint=function(Rt){var ie=this.attr().points,be=this.get("tCache");be||(this._setTcache(),be=this.get("tCache"));var Oe,ze;return(0,L.each)(be,function(ke,Ze){Rt>=ke[0]&&Rt<=ke[1]&&(Oe=(Rt-ke[0])/(ke[1]-ke[0]),ze=Ze)}),Q.default.pointAt(ie[ze][0],ie[ze][1],ie[ze+1][0],ie[ze+1][1],Oe)},re.prototype._setTcache=function(){var Rt=this.attr().points;if(!(!Rt||Rt.length===0)){var ie=this.getTotalLength();if(!(ie<=0)){var be=0,Oe=[],ze,ke;(0,L.each)(Rt,function(Ze,kr){Rt[kr+1]&&(ze=[],ze[0]=be/ie,ke=Q.default.length(Ze[0],Ze[1],Rt[kr+1][0],Rt[kr+1][1]),be+=ke,ze[1]=be/ie,Oe.push(ze))}),this.set("tCache",Oe)}}},re.prototype.getStartTangent=function(){var Rt=this.attr().points,ie=[];return ie.push([Rt[1][0],Rt[1][1]]),ie.push([Rt[0][0],Rt[0][1]]),ie},re.prototype.getEndTangent=function(){var Rt=this.attr().points,ie=Rt.length-1,be=[];return be.push([Rt[ie-1][0],Rt[ie-1][1]]),be.push([Rt[ie][0],Rt[ie][1]]),be},re}(j),jt=kt,Wt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,zt=/[^\s\,]+/gi;function bt(fe){var re=0,Rt=0,ie=0,be=0;return(0,L.isArray)(fe)?fe.length===1?re=Rt=ie=be=fe[0]:fe.length===2?(re=ie=fe[0],Rt=be=fe[1]):fe.length===3?(re=fe[0],Rt=be=fe[1],ie=fe[2]):(re=fe[0],Rt=fe[1],ie=fe[2],be=fe[3]):re=Rt=ie=be=fe,{r1:re,r2:Rt,r3:ie,r4:be}}function at(fe){if(fe=fe||[],isArray(fe))return fe;if(isString(fe))return fe=fe.match(Wt),each(fe,function(re,Rt){if(re=re.match(zt),re[0].length>1){var ie=re[0].charAt(0);re.splice(1,0,re[0].substr(1)),re[0]=ie}each(re,function(be,Oe){isNaN(be)||(re[Oe]=+be)}),fe[Rt]=re}),fe}var ft=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="rect",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x:0,y:0,width:0,height:0,radius:0})},re.prototype.createPath=function(Rt,ie){var be=this,Oe=this.attr(),ze=this.get("el"),ke=!1,Ze=["x","y","width","height","radius"];(0,L.each)(ie||Oe,function(kr,Fr){Ze.indexOf(Fr)!==-1&&!ke?(ze.setAttribute("d",be._assembleRect(Oe)),ke=!0):Ze.indexOf(Fr)===-1&&_[Fr]&&ze.setAttribute(_[Fr],kr)})},re.prototype._assembleRect=function(Rt){var ie=Rt.x,be=Rt.y,Oe=Rt.width,ze=Rt.height,ke=Rt.radius;if(!ke)return"M "+ie+","+be+" l "+Oe+",0 l 0,"+ze+" l"+-Oe+" 0 z";var Ze=bt(ke);(0,L.isArray)(ke)?ke.length===1?Ze.r1=Ze.r2=Ze.r3=Ze.r4=ke[0]:ke.length===2?(Ze.r1=Ze.r3=ke[0],Ze.r2=Ze.r4=ke[1]):ke.length===3?(Ze.r1=ke[0],Ze.r2=Ze.r4=ke[1],Ze.r3=ke[2]):(Ze.r1=ke[0],Ze.r2=ke[1],Ze.r3=ke[2],Ze.r4=ke[3]):Ze.r1=Ze.r2=Ze.r3=Ze.r4=ke;var kr=[["M "+(ie+Ze.r1)+","+be],["l "+(Oe-Ze.r1-Ze.r2)+",0"],["a "+Ze.r2+","+Ze.r2+",0,0,1,"+Ze.r2+","+Ze.r2],["l 0,"+(ze-Ze.r2-Ze.r3)],["a "+Ze.r3+","+Ze.r3+",0,0,1,"+-Ze.r3+","+Ze.r3],["l "+(Ze.r3+Ze.r4-Oe)+",0"],["a "+Ze.r4+","+Ze.r4+",0,0,1,"+-Ze.r4+","+-Ze.r4],["l 0,"+(Ze.r4+Ze.r1-ze)],["a "+Ze.r1+","+Ze.r1+",0,0,1,"+Ze.r1+","+-Ze.r1],["z"]];return kr.join(" ")},re}(j),Pt=ft,q=v(2035),ut=.3,Et={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},Nt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ee={left:"left",start:"left",center:"middle",right:"end",end:"end"},ge=function(fe){(0,c.__extends)(re,fe);function re(){var Rt=fe!==null&&fe.apply(this,arguments)||this;return Rt.type="text",Rt.canFill=!0,Rt.canStroke=!0,Rt}return re.prototype.getDefaultAttrs=function(){var Rt=fe.prototype.getDefaultAttrs.call(this);return(0,c.__assign)((0,c.__assign)({},Rt),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},re.prototype.createPath=function(Rt,ie){var be=this,Oe=this.attr(),ze=this.get("el");this._setFont(),(0,L.each)(ie||Oe,function(ke,Ze){Ze==="text"?be._setText(""+ke):Ze==="matrix"&&ke?S(be):_[Ze]&&ze.setAttribute(_[Ze],ke)}),ze.setAttribute("paint-order","stroke"),ze.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},re.prototype._setFont=function(){var Rt=this.get("el"),ie=this.attr(),be=ie.textBaseline,Oe=ie.textAlign,ze=(0,q.detect)();ze&&ze.name==="firefox"?Rt.setAttribute("dominant-baseline",Nt[be]||"alphabetic"):Rt.setAttribute("alignment-baseline",Et[be]||"baseline"),Rt.setAttribute("text-anchor",ee[Oe]||"left")},re.prototype._setText=function(Rt){var ie=this.get("el"),be=this.attr(),Oe=be.x,ze=be.textBaseline,ke=ze===void 0?"bottom":ze;if(!Rt)ie.innerHTML="";else if(~Rt.indexOf(`
`)){var Ze=Rt.split(`
`),kr=Ze.length-1,Fr="";(0,L.each)(Ze,function(jr,ve){ve===0?ke==="alphabetic"?Fr+='<tspan x="'+Oe+'" dy="'+-kr+'em">'+jr+"</tspan>":ke==="top"?Fr+='<tspan x="'+Oe+'" dy="0.9em">'+jr+"</tspan>":ke==="middle"?Fr+='<tspan x="'+Oe+'" dy="'+-(kr-1)/2+'em">'+jr+"</tspan>":ke==="bottom"?Fr+='<tspan x="'+Oe+'" dy="-'+(kr+ut)+'em">'+jr+"</tspan>":ke==="hanging"&&(Fr+='<tspan x="'+Oe+'" dy="'+(-(kr-1)-ut)+'em">'+jr+"</tspan>"):Fr+='<tspan x="'+Oe+'" dy="1em">'+jr+"</tspan>"}),ie.innerHTML=Fr}else ie.innerHTML=Rt},re}(j),De=ge,er=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Re=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Ke=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function hr(fe){var re=fe.match(Ke);if(!re)return"";var Rt="";return re.sort(function(ie,be){return ie=ie.split(":"),be=be.split(":"),Number(ie[0])-Number(be[0])}),(0,L.each)(re,function(ie){ie=ie.split(":"),Rt+='<stop offset="'+ie[0]+'" stop-color="'+ie[1]+'"></stop>'}),Rt}function Sr(fe,re){var Rt=er.exec(fe),ie=(0,L.mod)((0,L.toRadian)(parseFloat(Rt[1])),Math.PI*2),be=Rt[2],Oe,ze;ie>=0&&ie<.5*Math.PI?(Oe={x:0,y:0},ze={x:1,y:1}):.5*Math.PI<=ie&&ie<Math.PI?(Oe={x:1,y:0},ze={x:0,y:1}):Math.PI<=ie&&ie<1.5*Math.PI?(Oe={x:1,y:1},ze={x:0,y:0}):(Oe={x:0,y:1},ze={x:1,y:0});var ke=Math.tan(ie),Ze=ke*ke,kr=(ze.x-Oe.x+ke*(ze.y-Oe.y))/(Ze+1)+Oe.x,Fr=ke*(ze.x-Oe.x+ke*(ze.y-Oe.y))/(Ze+1)+Oe.y;re.setAttribute("x1",Oe.x),re.setAttribute("y1",Oe.y),re.setAttribute("x2",kr),re.setAttribute("y2",Fr),re.innerHTML=hr(be)}function Rr(fe,re){var Rt=Re.exec(fe),ie=parseFloat(Rt[1]),be=parseFloat(Rt[2]),Oe=parseFloat(Rt[3]),ze=Rt[4];re.setAttribute("cx",ie),re.setAttribute("cy",be),re.setAttribute("r",Oe),re.innerHTML=hr(ze)}var vr=function(){function fe(re){this.cfg={};var Rt=null,ie=(0,L.uniqueId)("gradient_");return re.toLowerCase()[0]==="l"?(Rt=A("linearGradient"),Sr(re,Rt)):(Rt=A("radialGradient"),Rr(re,Rt)),Rt.setAttribute("id",ie),this.el=Rt,this.id=ie,this.cfg=re,this}return fe.prototype.match=function(re,Rt){return this.cfg===Rt},fe}(),en=vr,gn={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},hn={x:"-40%",y:"-40%",width:"200%",height:"200%"},vn=function(){function fe(re){this.type="filter",this.cfg={},this.type="filter";var Rt=A("filter");return(0,L.each)(hn,function(ie,be){Rt.setAttribute(be,ie)}),this.el=Rt,this.id=(0,L.uniqueId)("filter_"),this.el.id=this.id,this.cfg=re,this._parseShadow(re,Rt),this}return fe.prototype.match=function(re,Rt){if(this.type!==re)return!1;var ie=!0,be=this.cfg;return(0,L.each)(Object.keys(be),function(Oe){if(be[Oe]!==Rt[Oe])return ie=!1,!1}),ie},fe.prototype.update=function(re,Rt){var ie=this.cfg;return ie[gn[re]]=Rt,this._parseShadow(ie,this.el),this},fe.prototype._parseShadow=function(re,Rt){var ie=`<feDropShadow
      dx="`+(re.dx||0)+`"
      dy="`+(re.dy||0)+`"
      stdDeviation="`+(re.blur?re.blur/10:0)+`"
      flood-color="`+(re.color?re.color:"#000")+`"
      flood-opacity="`+(re.opacity?re.opacity:1)+`"
      />`;Rt.innerHTML=ie},fe}(),Wn=vn,$r=function(){function fe(re,Rt){this.cfg={};var ie=A("marker"),be=(0,L.uniqueId)("marker_");ie.setAttribute("id",be);var Oe=A("path");Oe.setAttribute("stroke",re.stroke||"none"),Oe.setAttribute("fill",re.fill||"none"),ie.appendChild(Oe),ie.setAttribute("overflow","visible"),ie.setAttribute("orient","auto-start-reverse"),this.el=ie,this.child=Oe,this.id=be;var ze=re[Rt==="marker-start"?"startArrow":"endArrow"];return this.stroke=re.stroke||"#000",ze===!0?this._setDefaultPath(Rt,Oe):(this.cfg=ze,this._setMarker(re.lineWidth,Oe)),this}return fe.prototype.match=function(){return!1},fe.prototype._setDefaultPath=function(re,Rt){var ie=this.el;Rt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ie.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ie.setAttribute("refY",""+5)},fe.prototype._setMarker=function(re,Rt){var ie=this.el,be=this.cfg.path,Oe=this.cfg.d;(0,L.isArray)(be)&&(be=be.map(function(ze){return ze.join(" ")}).join("")),Rt.setAttribute("d",be),ie.appendChild(Rt),Oe&&ie.setAttribute("refX",""+Oe/re)},fe.prototype.update=function(re){var Rt=this.child;Rt.attr?Rt.attr("fill",re):Rt.setAttribute("fill",re)},fe}(),wi=$r,ci=function(){function fe(re){this.type="clip",this.cfg={};var Rt=A("clipPath");this.el=Rt,this.id=(0,L.uniqueId)("clip_"),Rt.id=this.id;var ie=re.cfg.el;return Rt.appendChild(ie),this.cfg=re,this}return fe.prototype.match=function(){return!1},fe.prototype.remove=function(){var re=this.el;re.parentNode.removeChild(re)},fe}(),oe=ci,ce=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Ee=function(){function fe(re){this.cfg={};var Rt=A("pattern");Rt.setAttribute("patternUnits","userSpaceOnUse");var ie=A("image");Rt.appendChild(ie);var be=(0,L.uniqueId)("pattern_");Rt.id=be,this.el=Rt,this.id=be,this.cfg=re;var Oe=ce.exec(re),ze=Oe[2];ie.setAttribute("href",ze);var ke=new Image;ze.match(/^data:/i)||(ke.crossOrigin="Anonymous"),ke.src=ze;function Ze(){Rt.setAttribute("width",""+ke.width),Rt.setAttribute("height",""+ke.height)}return ke.complete?Ze():(ke.onload=Ze,ke.src=ke.src),this}return fe.prototype.match=function(re,Rt){return this.cfg===Rt},fe}(),Pe=Ee,Fe=function(){function fe(re){var Rt=A("defs"),ie=(0,L.uniqueId)("defs_");Rt.id=ie,re.appendChild(Rt),this.children=[],this.defaultArrow={},this.el=Rt,this.canvas=re}return fe.prototype.find=function(re,Rt){for(var ie=this.children,be=null,Oe=0;Oe<ie.length;Oe++)if(ie[Oe].match(re,Rt)){be=ie[Oe].id;break}return be},fe.prototype.findById=function(re){for(var Rt=this.children,ie=null,be=0;be<Rt.length;be++)if(Rt[be].id===re){ie=Rt[be];break}return ie},fe.prototype.add=function(re){this.children.push(re),re.canvas=this.canvas,re.parent=this},fe.prototype.getDefaultArrow=function(re,Rt){var ie=re.stroke||re.strokeStyle;if(this.defaultArrow[ie])return this.defaultArrow[ie].id;var be=new wi(re,Rt);return this.defaultArrow[ie]=be,this.el.appendChild(be.el),this.add(be),be.id},fe.prototype.addGradient=function(re){var Rt=new en(re);return this.el.appendChild(Rt.el),this.add(Rt),Rt.id},fe.prototype.addArrow=function(re,Rt){var ie=new wi(re,Rt);return this.el.appendChild(ie.el),this.add(ie),ie.id},fe.prototype.addShadow=function(re){var Rt=new Wn(re);return this.el.appendChild(Rt.el),this.add(Rt),Rt.id},fe.prototype.addPattern=function(re){var Rt=new Pe(re);return this.el.appendChild(Rt.el),this.add(Rt),Rt.id},fe.prototype.addClip=function(re){var Rt=new oe(re);return this.el.appendChild(Rt.el),this.add(Rt),Rt.id},fe}(),Ue=Fe,Qe=function(fe){(0,c.__extends)(re,fe);function re(Rt){return fe.call(this,(0,c.__assign)((0,c.__assign)({},Rt),{autoDraw:!0,renderer:"svg"}))||this}return re.prototype.getShapeBase=function(){return d},re.prototype.getGroupBase=function(){return W},re.prototype.getShape=function(Rt,ie,be){var Oe=be.target||be.srcElement;if(!O[Oe.tagName]){for(var ze=Oe.parentNode;ze&&!O[ze.tagName];)ze=ze.parentNode;Oe=ze}return this.find(function(ke){return ke.get("el")===Oe})},re.prototype.createDom=function(){var Rt=A("svg"),ie=new Ue(Rt);return Rt.setAttribute("width",""+this.get("width")),Rt.setAttribute("height",""+this.get("height")),this.set("context",ie),Rt},re.prototype.onCanvasChange=function(Rt){var ie=this.get("context"),be=this.get("el");if(Rt==="sort"){var Oe=this.get("children");Oe&&Oe.length&&C(this,function(ke,Ze){return Oe.indexOf(ke)-Oe.indexOf(Ze)?1:0})}else if(Rt==="clear"){if(be){be.innerHTML="";var ze=ie.el;ze.innerHTML="",be.appendChild(ze)}}else Rt==="matrix"?S(this):Rt==="clip"?I(this,ie):Rt==="changeSize"&&(be.setAttribute("width",""+this.get("width")),be.setAttribute("height",""+this.get("height")))},re.prototype.draw=function(){var Rt=this.get("context"),ie=this.getChildren();I(this,Rt),ie.length&&B(Rt,ie)},re}(F.AbstractCanvas),rr=Qe,We=v(63826),fr=We.version},63826:function(xt){"use strict";xt.exports=JSON.parse('{"name":"@antv/g-svg","version":"0.4.7","description":"A canvas library which providing 2d","main":"lib/index.js","module":"esm/index.js","unpkg":"dist/g.min.js","types":"lib/index.d.ts","files":["package.json","esm","lib","dist","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:umd":"webpack --config webpack.config.js --mode production","clean":"rm -rf esm lib dist","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/g.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/g/issues"},"devDependencies":{"@antv/torch":"^1.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","webpack":"^4.39.3","webpack-cli":"^3.3.7"},"homepage":"https://github.com/antvis/g#readme","dependencies":{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},"__npminstall_done":true,"gitHead":"eb6a2503cb7bb8154697592b10680939d954a31a","_from":"@antv/g-svg@0.4.7","_resolved":"https://registry.npmmirror.com/@antv/g-svg/download/@antv/g-svg-0.4.7.tgz?cache=0&sync_timestamp=1632727112363&other_urls=https%3A%2F%2Fregistry.npmmirror.com%2F%40antv%2Fg-svg%2Fdownload%2F%40antv%2Fg-svg-0.4.7.tgz"}')},40169:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(26691),L=v(14982),O=v(38888),_=v(56143),P=v(20783),A=v(92671),x=v(71525),C=v(51353),w=function(M){c.__extends(S,M);function S(I){return M.call(this,c.__assign(c.__assign({},I),{autoDraw:!0,renderer:"svg"}))||this}return S.prototype.getShapeBase=function(){return A},S.prototype.getGroupBase=function(){return x.default},S.prototype.getShape=function(I,B,N){var G=N.target||N.srcElement;if(!L.SHAPE_TO_TAGS[G.tagName]){for(var W=G.parentNode;W&&!L.SHAPE_TO_TAGS[W.tagName];)W=W.parentNode;G=W}return this.find(function($){return $.get("el")===G})},S.prototype.createDom=function(){var I=P.createSVGElement("svg"),B=new C.default(I);return I.setAttribute("width",""+this.get("width")),I.setAttribute("height",""+this.get("height")),this.set("context",B),I},S.prototype.onCanvasChange=function(I){var B=this.get("context"),N=this.get("el");if(I==="sort"){var G=this.get("children");G&&G.length&&P.sortDom(this,function($,H){return G.indexOf($)-G.indexOf(H)?1:0})}else if(I==="clear"){if(N){N.innerHTML="";var W=B.el;W.innerHTML="",N.appendChild(W)}}else I==="matrix"?_.setTransform(this):I==="clip"?_.setClip(this,B):I==="changeSize"&&(N.setAttribute("width",""+this.get("width")),N.setAttribute("height",""+this.get("height")))},S.prototype.draw=function(){var I=this.get("context"),B=this.getChildren();_.setClip(this,I),B.length&&O.drawChildren(I,B)},S}(F.AbstractCanvas);T.Z=w},14982:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.EVENTS=T.SVG_ATTR_MAP=T.SHAPE_TO_TAGS=void 0,T.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},T.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},T.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},86514:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(20783),F=function(){function L(O,_){this.cfg={};var P=c.createSVGElement("marker"),A=d.uniqueId("marker_");P.setAttribute("id",A);var x=c.createSVGElement("path");x.setAttribute("stroke",O.stroke||"none"),x.setAttribute("fill",O.fill||"none"),P.appendChild(x),P.setAttribute("overflow","visible"),P.setAttribute("orient","auto-start-reverse"),this.el=P,this.child=x,this.id=A;var C=O[_==="marker-start"?"startArrow":"endArrow"];return this.stroke=O.stroke||"#000",C===!0?this._setDefaultPath(_,x):(this.cfg=C,this._setMarker(O.lineWidth,x)),this}return L.prototype.match=function(){return!1},L.prototype._setDefaultPath=function(O,_){var P=this.el;_.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),P.setAttribute("refX",""+10*Math.cos(Math.PI/6)),P.setAttribute("refY",""+5)},L.prototype._setMarker=function(O,_){var P=this.el,A=this.cfg.path,x=this.cfg.d;d.isArray(A)&&(A=A.map(function(C){return C.join(" ")}).join("")),_.setAttribute("d",A),P.appendChild(_),x&&P.setAttribute("refX",""+x/O)},L.prototype.update=function(O){var _=this.child;_.attr?_.attr("fill",O):_.setAttribute("fill",O)},L}();T.default=F},68025:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(20783),F=function(){function L(O){this.type="clip",this.cfg={};var _=c.createSVGElement("clipPath");this.el=_,this.id=d.uniqueId("clip_"),_.id=this.id;var P=O.cfg.el;return _.appendChild(P),this.cfg=O,this}return L.prototype.match=function(){return!1},L.prototype.remove=function(){var O=this.el;O.parentNode.removeChild(O)},L}();T.default=F},58819:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(20783),F=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,L=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,O=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function _(C){var w=C.match(O);if(!w)return"";var M="";return w.sort(function(S,I){return S=S.split(":"),I=I.split(":"),Number(S[0])-Number(I[0])}),d.each(w,function(S){S=S.split(":"),M+='<stop offset="'+S[0]+'" stop-color="'+S[1]+'"></stop>'}),M}function P(C,w){var M=F.exec(C),S=d.mod(d.toRadian(parseFloat(M[1])),Math.PI*2),I=M[2],B,N;S>=0&&S<.5*Math.PI?(B={x:0,y:0},N={x:1,y:1}):.5*Math.PI<=S&&S<Math.PI?(B={x:1,y:0},N={x:0,y:1}):Math.PI<=S&&S<1.5*Math.PI?(B={x:1,y:1},N={x:0,y:0}):(B={x:0,y:1},N={x:1,y:0});var G=Math.tan(S),W=G*G,$=(N.x-B.x+G*(N.y-B.y))/(W+1)+B.x,H=G*(N.x-B.x+G*(N.y-B.y))/(W+1)+B.y;w.setAttribute("x1",B.x),w.setAttribute("y1",B.y),w.setAttribute("x2",$),w.setAttribute("y2",H),w.innerHTML=_(I)}function A(C,w){var M=L.exec(C),S=parseFloat(M[1]),I=parseFloat(M[2]),B=parseFloat(M[3]),N=M[4];w.setAttribute("cx",S),w.setAttribute("cy",I),w.setAttribute("r",B),w.innerHTML=_(N)}var x=function(){function C(w){this.cfg={};var M=null,S=d.uniqueId("gradient_");return w.toLowerCase()[0]==="l"?(M=c.createSVGElement("linearGradient"),P(w,M)):(M=c.createSVGElement("radialGradient"),A(w,M)),M.setAttribute("id",S),this.el=M,this.id=S,this.cfg=w,this}return C.prototype.match=function(w,M){return this.cfg===M},C}();T.default=x},51353:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(58819),F=v(10413),L=v(86514),O=v(68025),_=v(252),P=v(20783),A=function(){function x(C){var w=P.createSVGElement("defs"),M=d.uniqueId("defs_");w.id=M,C.appendChild(w),this.children=[],this.defaultArrow={},this.el=w,this.canvas=C}return x.prototype.find=function(C,w){for(var M=this.children,S=null,I=0;I<M.length;I++)if(M[I].match(C,w)){S=M[I].id;break}return S},x.prototype.findById=function(C){for(var w=this.children,M=null,S=0;S<w.length;S++)if(w[S].id===C){M=w[S];break}return M},x.prototype.add=function(C){this.children.push(C),C.canvas=this.canvas,C.parent=this},x.prototype.getDefaultArrow=function(C,w){var M=C.stroke||C.strokeStyle;if(this.defaultArrow[M])return this.defaultArrow[M].id;var S=new L.default(C,w);return this.defaultArrow[M]=S,this.el.appendChild(S.el),this.add(S),S.id},x.prototype.addGradient=function(C){var w=new c.default(C);return this.el.appendChild(w.el),this.add(w),w.id},x.prototype.addArrow=function(C,w){var M=new L.default(C,w);return this.el.appendChild(M.el),this.add(M),M.id},x.prototype.addShadow=function(C){var w=new F.default(C);return this.el.appendChild(w.el),this.add(w),w.id},x.prototype.addPattern=function(C){var w=new _.default(C);return this.el.appendChild(w.el),this.add(w),w.id},x.prototype.addClip=function(C){var w=new O.default(C);return this.el.appendChild(w.el),this.add(w),w.id},x}();T.default=A},252:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(20783),F=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,L=function(){function O(_){this.cfg={};var P=c.createSVGElement("pattern");P.setAttribute("patternUnits","userSpaceOnUse");var A=c.createSVGElement("image");P.appendChild(A);var x=d.uniqueId("pattern_");P.id=x,this.el=P,this.id=x,this.cfg=_;var C=F.exec(_),w=C[2];A.setAttribute("href",w);var M=new Image;w.match(/^data:/i)||(M.crossOrigin="Anonymous"),M.src=w;function S(){P.setAttribute("width",""+M.width),P.setAttribute("height",""+M.height)}return M.complete?S():(M.onload=S,M.src=M.src),this}return O.prototype.match=function(_,P){return this.cfg===P},O}();T.default=L},10413:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(20783),F={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},L={x:"-40%",y:"-40%",width:"200%",height:"200%"},O=function(){function _(P){this.type="filter",this.cfg={},this.type="filter";var A=c.createSVGElement("filter");return d.each(L,function(x,C){A.setAttribute(C,x)}),this.el=A,this.id=d.uniqueId("filter_"),this.el.id=this.id,this.cfg=P,this._parseShadow(P,A),this}return _.prototype.match=function(P,A){if(this.type!==P)return!1;var x=!0,C=this.cfg;return d.each(Object.keys(C),function(w){if(C[w]!==A[w])return x=!1,!1}),x},_.prototype.update=function(P,A){var x=this.cfg;return x[F[P]]=A,this._parseShadow(x,this.el),this},_.prototype._parseShadow=function(P,A){var x=`<feDropShadow
      dx="`+(P.dx||0)+`"
      dy="`+(P.dy||0)+`"
      stdDeviation="`+(P.blur?P.blur/10:0)+`"
      flood-color="`+(P.color?P.color:"#000")+`"
      flood-opacity="`+(P.opacity?P.opacity:1)+`"
      />`;A.innerHTML=x},_}();T.default=O},71525:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26691),F=v(26169),L=v(92671),O=v(38888),_=v(56143),P=v(14982),A=v(20783),x=function(C){d.__extends(w,C);function w(){return C!==null&&C.apply(this,arguments)||this}return w.prototype.isEntityGroup=function(){return!0},w.prototype.createDom=function(){var M=A.createSVGElement("g");this.set("el",M);var S=this.getParent();if(S){var I=S.get("el");I||(I=S.createDom(),S.set("el",I)),I.appendChild(M)}return M},w.prototype.afterAttrsChange=function(M){C.prototype.afterAttrsChange.call(this,M);var S=this.get("canvas");if(S&&S.get("autoDraw")){var I=S.get("context");this.createPath(I,M)}},w.prototype.onCanvasChange=function(M){O.refreshElement(this,M)},w.prototype.getShapeBase=function(){return L},w.prototype.getGroupBase=function(){return w},w.prototype.draw=function(M){var S=this.getChildren(),I=this.get("el");this.get("destroyed")?I&&I.parentNode.removeChild(I):(I||this.createDom(),_.setClip(this,M),this.createPath(M),S.length&&O.drawChildren(M,S))},w.prototype.createPath=function(M,S){var I=this.attr(),B=this.get("el");F.each(S||I,function(N,G){P.SVG_ATTR_MAP[G]&&B.setAttribute(P.SVG_ATTR_MAP[G],N)}),_.setTransform(this)},w}(c.AbstractGroup);T.default=x},45392:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26691),F=v(56143),L=v(20783),O=v(38888),_=v(14982),P=v(92671),A=v(71525),x=v(26691),C=function(w){d.__extends(M,w);function M(){var S=w!==null&&w.apply(this,arguments)||this;return S.type="svg",S.canFill=!1,S.canStroke=!1,S}return M.prototype.getDefaultAttrs=function(){var S=w.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},S),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},M.prototype.afterAttrsChange=function(S){w.prototype.afterAttrsChange.call(this,S);var I=this.get("canvas");if(I&&I.get("autoDraw")){var B=I.get("context");this.draw(B,S)}},M.prototype.getShapeBase=function(){return P},M.prototype.getGroupBase=function(){return A.default},M.prototype.onCanvasChange=function(S){O.refreshElement(this,S)},M.prototype.calculateBBox=function(){var S=this.get("el"),I=null;if(S)I=S.getBBox();else{var B=x.getBBoxMethod(this.get("type"));B&&(I=B(this))}if(I){var N=I.x,G=I.y,W=I.width,$=I.height,H=this.getHitLineWidth(),j=H/2,nt=N-j,rt=G-j,mt=N+W+j,Ft=G+$+j;return{x:nt,y:rt,minX:nt,minY:rt,maxX:mt,maxY:Ft,width:W+H,height:$+H}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},M.prototype.isFill=function(){var S=this.attr(),I=S.fill,B=S.fillStyle;return(I||B||this.isClipShape())&&this.canFill},M.prototype.isStroke=function(){var S=this.attr(),I=S.stroke,B=S.strokeStyle;return(I||B)&&this.canStroke},M.prototype.draw=function(S,I){var B=this.get("el");this.get("destroyed")?B&&B.parentNode.removeChild(B):(B||L.createDom(this),F.setClip(this,S),this.createPath(S,I),this.shadow(S,I),this.strokeAndFill(S,I),this.transform(I))},M.prototype.createPath=function(S,I){},M.prototype.strokeAndFill=function(S,I){var B=I||this.attr(),N=B.fill,G=B.fillStyle,W=B.stroke,$=B.strokeStyle,H=B.fillOpacity,j=B.strokeOpacity,nt=B.lineWidth,rt=this.get("el");this.canFill&&(I?"fill"in B?this._setColor(S,"fill",N):"fillStyle"in B&&this._setColor(S,"fill",G):this._setColor(S,"fill",N||G),H&&rt.setAttribute(_.SVG_ATTR_MAP.fillOpacity,H)),this.canStroke&&nt>0&&(I?"stroke"in B?this._setColor(S,"stroke",W):"strokeStyle"in B&&this._setColor(S,"stroke",$):this._setColor(S,"stroke",W||$),j&&rt.setAttribute(_.SVG_ATTR_MAP.strokeOpacity,j),nt&&rt.setAttribute(_.SVG_ATTR_MAP.lineWidth,nt))},M.prototype._setColor=function(S,I,B){var N=this.get("el");if(!B){N.setAttribute(_.SVG_ATTR_MAP[I],"none");return}if(B=B.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(B)){var G=S.find("gradient",B);G||(G=S.addGradient(B)),N.setAttribute(_.SVG_ATTR_MAP[I],"url(#"+G+")")}else if(/^[p,P]{1}[\s]*\(/.test(B)){var G=S.find("pattern",B);G||(G=S.addPattern(B)),N.setAttribute(_.SVG_ATTR_MAP[I],"url(#"+G+")")}else N.setAttribute(_.SVG_ATTR_MAP[I],B)},M.prototype.shadow=function(S,I){var B=this.attr(),N=I||B,G=N.shadowOffsetX,W=N.shadowOffsetY,$=N.shadowBlur,H=N.shadowColor;(G||W||$||H)&&F.setShadow(this,S)},M.prototype.transform=function(S){var I=this.attr(),B=(S||I).matrix;B&&F.setTransform(this)},M.prototype.isInShape=function(S,I){return this.isPointInPath(S,I)},M.prototype.isPointInPath=function(S,I){var B=this.get("el"),N=this.get("canvas"),G=N.get("el").getBoundingClientRect(),W=S+G.left,$=I+G.top,H=document.elementFromPoint(W,$);return!!(H&&H.isEqualNode(B))},M.prototype.getHitLineWidth=function(){var S=this.attrs,I=S.lineWidth,B=S.lineAppendWidth;return this.isStroke()?I+B:0},M}(c.AbstractShape);T.default=C},87327:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="circle",A.canFill=!0,A.canStroke=!0,A}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{x:0,y:0,r:0})},P.prototype.createPath=function(A,x){var C=this.attr(),w=this.get("el");c.each(x||C,function(M,S){S==="x"||S==="y"?w.setAttribute("c"+S,M):F.SVG_ATTR_MAP[S]&&w.setAttribute(F.SVG_ATTR_MAP[S],M)})},P}(L.default);T.default=O},22716:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="dom",A.canFill=!1,A.canStroke=!1,A}return P.prototype.createPath=function(A,x){var C=this.attr(),w=this.get("el");if(c.each(x||C,function(B,N){F.SVG_ATTR_MAP[N]&&w.setAttribute(F.SVG_ATTR_MAP[N],B)}),typeof C.html=="function"){var M=C.html.call(this,C);if(M instanceof Element||M instanceof HTMLDocument){for(var S=w.childNodes,I=S.length-1;I>=0;I--)w.removeChild(S[I]);w.appendChild(M)}else w.innerHTML=M}else w.innerHTML=C.html},P}(L.default);T.default=O},61936:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="ellipse",A.canFill=!0,A.canStroke=!0,A}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{x:0,y:0,rx:0,ry:0})},P.prototype.createPath=function(A,x){var C=this.attr(),w=this.get("el");c.each(x||C,function(M,S){S==="x"||S==="y"?w.setAttribute("c"+S,M):F.SVG_ATTR_MAP[S]&&w.setAttribute(F.SVG_ATTR_MAP[S],M)})},P}(L.default);T.default=O},39346:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="image",A.canFill=!1,A.canStroke=!1,A}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{x:0,y:0,width:0,height:0})},P.prototype.createPath=function(A,x){var C=this,w=this.attr(),M=this.get("el");c.each(x||w,function(S,I){I==="img"?C._setImage(w.img):F.SVG_ATTR_MAP[I]&&M.setAttribute(F.SVG_ATTR_MAP[I],S)})},P.prototype.setAttr=function(A,x){this.attrs[A]=x,A==="img"&&this._setImage(x)},P.prototype._setImage=function(A){var x=this.attr(),C=this.get("el");if(c.isString(A))C.setAttribute("href",A);else if(A instanceof window.Image)x.width||(C.setAttribute("width",A.width),this.attr("width",A.width)),x.height||(C.setAttribute("height",A.height),this.attr("height",A.height)),C.setAttribute("href",A.src);else if(A instanceof HTMLElement&&c.isString(A.nodeName)&&A.nodeName.toUpperCase()==="CANVAS")C.setAttribute("href",A.toDataURL());else if(A instanceof ImageData){var w=document.createElement("canvas");w.setAttribute("width",""+A.width),w.setAttribute("height",""+A.height),w.getContext("2d").putImageData(A,0,0),x.width||(C.setAttribute("width",""+A.width),this.attr("width",A.width)),x.height||(C.setAttribute("height",""+A.height),this.attr("height",A.height)),C.setAttribute("href",w.toDataURL())}},P}(L.default);T.default=O},92671:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(45392);Object.defineProperty(T,"Base",{enumerable:!0,get:function(){return d.default}});var c=v(87327);Object.defineProperty(T,"Circle",{enumerable:!0,get:function(){return c.default}});var F=v(22716);Object.defineProperty(T,"Dom",{enumerable:!0,get:function(){return F.default}});var L=v(61936);Object.defineProperty(T,"Ellipse",{enumerable:!0,get:function(){return L.default}});var O=v(39346);Object.defineProperty(T,"Image",{enumerable:!0,get:function(){return O.default}});var _=v(52427);Object.defineProperty(T,"Line",{enumerable:!0,get:function(){return _.default}});var P=v(64507);Object.defineProperty(T,"Marker",{enumerable:!0,get:function(){return P.default}});var A=v(58944);Object.defineProperty(T,"Path",{enumerable:!0,get:function(){return A.default}});var x=v(3540);Object.defineProperty(T,"Polygon",{enumerable:!0,get:function(){return x.default}});var C=v(87078);Object.defineProperty(T,"Polyline",{enumerable:!0,get:function(){return C.default}});var w=v(59315);Object.defineProperty(T,"Rect",{enumerable:!0,get:function(){return w.default}});var M=v(65070);Object.defineProperty(T,"Text",{enumerable:!0,get:function(){return M.default}})},52427:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(51824),F=v(26169),L=v(14982),O=v(45392),_=function(P){d.__extends(A,P);function A(){var x=P!==null&&P.apply(this,arguments)||this;return x.type="line",x.canFill=!1,x.canStroke=!0,x}return A.prototype.getDefaultAttrs=function(){var x=P.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},x),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},A.prototype.createPath=function(x,C){var w=this.attr(),M=this.get("el");F.each(C||w,function(S,I){if(I==="startArrow"||I==="endArrow")if(S){var B=F.isObject(S)?x.addArrow(w,L.SVG_ATTR_MAP[I]):x.getDefaultArrow(w,L.SVG_ATTR_MAP[I]);M.setAttribute(L.SVG_ATTR_MAP[I],"url(#"+B+")")}else M.removeAttribute(L.SVG_ATTR_MAP[I]);else L.SVG_ATTR_MAP[I]&&M.setAttribute(L.SVG_ATTR_MAP[I],S)})},A.prototype.getTotalLength=function(){var x=this.attr(),C=x.x1,w=x.y1,M=x.x2,S=x.y2;return c.Line.length(C,w,M,S)},A.prototype.getPoint=function(x){var C=this.attr(),w=C.x1,M=C.y1,S=C.x2,I=C.y2;return c.Line.pointAt(w,M,S,I,x)},A}(O.default);T.default=_},64507:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(45392),L=v(13017),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="marker",A.canFill=!0,A.canStroke=!0,A}return P.prototype.createPath=function(A){var x=this.get("el");x.setAttribute("d",this._assembleMarker())},P.prototype._assembleMarker=function(){var A=this._getPath();return c.isArray(A)?A.map(function(x){return x.join(" ")}).join(""):A},P.prototype._getPath=function(){var A=this.attr(),x=A.x,C=A.y,w=A.r||A.radius,M=A.symbol||"circle",S;return c.isFunction(M)?S=M:S=L.default.get(M),S?S(x,C,w):(console.warn(S+" symbol is not exist."),null)},P.symbolsFactory=L.default,P}(F.default);T.default=O},13017:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v={circle:function(d,c,F){return[["M",d,c],["m",-F,0],["a",F,F,0,1,0,F*2,0],["a",F,F,0,1,0,-F*2,0]]},square:function(d,c,F){return[["M",d-F,c-F],["L",d+F,c-F],["L",d+F,c+F],["L",d-F,c+F],["Z"]]},diamond:function(d,c,F){return[["M",d-F,c],["L",d,c-F],["L",d+F,c],["L",d,c+F],["Z"]]},triangle:function(d,c,F){var L=F*Math.sin(1/3*Math.PI);return[["M",d-F,c+L],["L",d,c-L],["L",d+F,c+L],["z"]]},triangleDown:function(d,c,F){var L=F*Math.sin(1/3*Math.PI);return[["M",d-F,c-L],["L",d+F,c-L],["L",d,c+L],["Z"]]}};T.default={get:function(d){return v[d]},register:function(d,c){v[d]=c},remove:function(d){delete v[d]},getAll:function(){return v}}},58944:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="path",A.canFill=!0,A.canStroke=!0,A}return P.prototype.getDefaultAttrs=function(){var A=_.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},A),{startArrow:!1,endArrow:!1})},P.prototype.createPath=function(A,x){var C=this,w=this.attr(),M=this.get("el");c.each(x||w,function(S,I){if(I==="path"&&c.isArray(S))M.setAttribute("d",C._formatPath(S));else if(I==="startArrow"||I==="endArrow")if(S){var B=c.isObject(S)?A.addArrow(w,F.SVG_ATTR_MAP[I]):A.getDefaultArrow(w,F.SVG_ATTR_MAP[I]);M.setAttribute(F.SVG_ATTR_MAP[I],"url(#"+B+")")}else M.removeAttribute(F.SVG_ATTR_MAP[I]);else F.SVG_ATTR_MAP[I]&&M.setAttribute(F.SVG_ATTR_MAP[I],S)})},P.prototype._formatPath=function(A){var x=A.map(function(C){return C.join(" ")}).join("");return~x.indexOf("NaN")?"":x},P.prototype.getTotalLength=function(){var A=this.get("el");return A?A.getTotalLength():null},P.prototype.getPoint=function(A){var x=this.get("el"),C=this.getTotalLength();if(C===0)return null;var w=x?x.getPointAtLength(A*C):null;return w?{x:w.x,y:w.y}:null},P}(L.default);T.default=O},3540:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(14982),L=v(45392),O=function(_){d.__extends(P,_);function P(){var A=_!==null&&_.apply(this,arguments)||this;return A.type="polygon",A.canFill=!0,A.canStroke=!0,A}return P.prototype.createPath=function(A,x){var C=this.attr(),w=this.get("el");c.each(x||C,function(M,S){S==="points"&&c.isArray(M)&&M.length>=2?w.setAttribute("points",M.map(function(I){return I[0]+","+I[1]}).join(" ")):F.SVG_ATTR_MAP[S]&&w.setAttribute(F.SVG_ATTR_MAP[S],M)})},P}(L.default);T.default=O},87078:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(51824),F=v(51824),L=v(26169),O=v(14982),_=v(45392),P=function(A){d.__extends(x,A);function x(){var C=A!==null&&A.apply(this,arguments)||this;return C.type="polyline",C.canFill=!0,C.canStroke=!0,C}return x.prototype.getDefaultAttrs=function(){var C=A.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},C),{startArrow:!1,endArrow:!1})},x.prototype.onAttrChange=function(C,w,M){A.prototype.onAttrChange.call(this,C,w,M),["points"].indexOf(C)!==-1&&this._resetCache()},x.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},x.prototype.createPath=function(C,w){var M=this.attr(),S=this.get("el");L.each(w||M,function(I,B){B==="points"&&L.isArray(I)&&I.length>=2?S.setAttribute("points",I.map(function(N){return N[0]+","+N[1]}).join(" ")):O.SVG_ATTR_MAP[B]&&S.setAttribute(O.SVG_ATTR_MAP[B],I)})},x.prototype.getTotalLength=function(){var C=this.attr().points,w=this.get("totalLength");return L.isNil(w)?(this.set("totalLength",c.Polyline.length(C)),this.get("totalLength")):w},x.prototype.getPoint=function(C){var w=this.attr().points,M=this.get("tCache");M||(this._setTcache(),M=this.get("tCache"));var S,I;return L.each(M,function(B,N){C>=B[0]&&C<=B[1]&&(S=(C-B[0])/(B[1]-B[0]),I=N)}),F.Line.pointAt(w[I][0],w[I][1],w[I+1][0],w[I+1][1],S)},x.prototype._setTcache=function(){var C=this.attr().points;if(!(!C||C.length===0)){var w=this.getTotalLength();if(!(w<=0)){var M=0,S=[],I,B;L.each(C,function(N,G){C[G+1]&&(I=[],I[0]=M/w,B=F.Line.length(N[0],N[1],C[G+1][0],C[G+1][1]),M+=B,I[1]=M/w,S.push(I))}),this.set("tCache",S)}}},x.prototype.getStartTangent=function(){var C=this.attr().points,w=[];return w.push([C[1][0],C[1][1]]),w.push([C[0][0],C[0][1]]),w},x.prototype.getEndTangent=function(){var C=this.attr().points,w=C.length-1,M=[];return M.push([C[w-1][0],C[w-1][1]]),M.push([C[w][0],C[w][1]]),M},x}(_.default);T.default=P},59315:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(45392),L=v(14982),O=v(86035),_=function(P){d.__extends(A,P);function A(){var x=P!==null&&P.apply(this,arguments)||this;return x.type="rect",x.canFill=!0,x.canStroke=!0,x}return A.prototype.getDefaultAttrs=function(){var x=P.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},x),{x:0,y:0,width:0,height:0,radius:0})},A.prototype.createPath=function(x,C){var w=this,M=this.attr(),S=this.get("el"),I=!1,B=["x","y","width","height","radius"];c.each(C||M,function(N,G){B.indexOf(G)!==-1&&!I?(S.setAttribute("d",w._assembleRect(M)),I=!0):B.indexOf(G)===-1&&L.SVG_ATTR_MAP[G]&&S.setAttribute(L.SVG_ATTR_MAP[G],N)})},A.prototype._assembleRect=function(x){var C=x.x,w=x.y,M=x.width,S=x.height,I=x.radius;if(!I)return"M "+C+","+w+" l "+M+",0 l 0,"+S+" l"+-M+" 0 z";var B=O.parseRadius(I);c.isArray(I)?I.length===1?B.r1=B.r2=B.r3=B.r4=I[0]:I.length===2?(B.r1=B.r3=I[0],B.r2=B.r4=I[1]):I.length===3?(B.r1=I[0],B.r2=B.r4=I[1],B.r3=I[2]):(B.r1=I[0],B.r2=I[1],B.r3=I[2],B.r4=I[3]):B.r1=B.r2=B.r3=B.r4=I;var N=[["M "+(C+B.r1)+","+w],["l "+(M-B.r1-B.r2)+",0"],["a "+B.r2+","+B.r2+",0,0,1,"+B.r2+","+B.r2],["l 0,"+(S-B.r2-B.r3)],["a "+B.r3+","+B.r3+",0,0,1,"+-B.r3+","+B.r3],["l "+(B.r3+B.r4-M)+",0"],["a "+B.r4+","+B.r4+",0,0,1,"+-B.r4+","+-B.r4],["l 0,"+(B.r4+B.r1-S)],["a "+B.r1+","+B.r1+",0,0,1,"+B.r1+","+-B.r1],["z"]];return N.join(" ")},A}(F.default);T.default=_},65070:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(26169),F=v(1517),L=v(56143),O=v(14982),_=v(45392),P=.3,A={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},x={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},C={left:"left",start:"left",center:"middle",right:"end",end:"end"},w=function(M){d.__extends(S,M);function S(){var I=M!==null&&M.apply(this,arguments)||this;return I.type="text",I.canFill=!0,I.canStroke=!0,I}return S.prototype.getDefaultAttrs=function(){var I=M.prototype.getDefaultAttrs.call(this);return d.__assign(d.__assign({},I),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},S.prototype.createPath=function(I,B){var N=this,G=this.attr(),W=this.get("el");this._setFont(),c.each(B||G,function($,H){H==="text"?N._setText(""+$):H==="matrix"&&$?L.setTransform(N):O.SVG_ATTR_MAP[H]&&W.setAttribute(O.SVG_ATTR_MAP[H],$)}),W.setAttribute("paint-order","stroke"),W.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},S.prototype._setFont=function(){var I=this.get("el"),B=this.attr(),N=B.textBaseline,G=B.textAlign,W=F.detect();W&&W.name==="firefox"?I.setAttribute("dominant-baseline",x[N]||"alphabetic"):I.setAttribute("alignment-baseline",A[N]||"baseline"),I.setAttribute("text-anchor",C[G]||"left")},S.prototype._setText=function(I){var B=this.get("el"),N=this.attr(),G=N.x,W=N.textBaseline,$=W===void 0?"bottom":W;if(!I)B.innerHTML="";else if(~I.indexOf(`
`)){var H=I.split(`
`),j=H.length-1,nt="";c.each(H,function(rt,mt){mt===0?$==="alphabetic"?nt+='<tspan x="'+G+'" dy="'+-j+'em">'+rt+"</tspan>":$==="top"?nt+='<tspan x="'+G+'" dy="0.9em">'+rt+"</tspan>":$==="middle"?nt+='<tspan x="'+G+'" dy="'+-(j-1)/2+'em">'+rt+"</tspan>":$==="bottom"?nt+='<tspan x="'+G+'" dy="-'+(j+P)+'em">'+rt+"</tspan>":$==="hanging"&&(nt+='<tspan x="'+G+'" dy="'+(-(j-1)-P)+'em">'+rt+"</tspan>"):nt+='<tspan x="'+G+'" dy="1em">'+rt+"</tspan>"}),B.innerHTML=nt}else B.innerHTML=I},S}(_.default);T.default=w},20783:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.moveTo=T.sortDom=T.createDom=T.createSVGElement=void 0;var d=v(26169),c=v(14982);function F(P){return document.createElementNS("http://www.w3.org/2000/svg",P)}T.createSVGElement=F;function L(P){var A=c.SHAPE_TO_TAGS[P.type],x=P.getParent();if(!A)throw new Error("the type "+P.type+" is not supported by svg");var C=F(A);if(P.get("id")&&(C.id=P.get("id")),P.set("el",C),P.set("attrs",{}),x){var w=x.get("el");w||(w=x.createDom(),x.set("el",w)),w.appendChild(C)}return C}T.createDom=L;function O(P,A){var x=P.get("el"),C=d.toArray(x.children).sort(A),w=document.createDocumentFragment();C.forEach(function(M){w.appendChild(M)}),x.appendChild(w)}T.sortDom=O;function _(P,A){var x=P.parentNode,C=Array.from(x.childNodes).filter(function(I){return I.nodeType===1&&I.nodeName.toLowerCase()!=="defs"}),w=C[A],M=C.indexOf(P);if(w){if(M>A)x.insertBefore(P,w);else if(M<A){var S=C[A+1];S?x.insertBefore(P,S):x.appendChild(P)}}else x.appendChild(P)}T.moveTo=_},38888:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.refreshElement=T.drawChildren=void 0;var d=v(56143),c=v(20783);function F(O,_){_.forEach(function(P){P.draw(O)})}T.drawChildren=F;function L(O,_){var P=O.get("canvas");if(P&&P.get("autoDraw")){var A=P.get("context"),x=O.getParent(),C=x?x.getChildren():[P],w=O.get("el");if(_==="remove"){var M=O.get("isClipShape");if(M){var S=w&&w.parentNode,I=S&&S.parentNode;S&&I&&I.removeChild(S)}else w&&w.parentNode&&w.parentNode.removeChild(w)}else if(_==="show")w.setAttribute("visibility","visible");else if(_==="hide")w.setAttribute("visibility","hidden");else if(_==="zIndex")c.moveTo(w,C.indexOf(O));else if(_==="sort"){var B=O.get("children");B&&B.length&&c.sortDom(O,function(N,G){return B.indexOf(N)-B.indexOf(G)?1:0})}else _==="clear"?w&&(w.innerHTML=""):_==="matrix"?d.setTransform(O):_==="clip"?d.setClip(O,A):_==="attr"||_==="add"&&O.draw(A)}}T.refreshElement=L},86035:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.parsePath=T.parseRadius=void 0;var d=v(26169),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,F=/[^\s,]+/gi;function L(_){var P=0,A=0,x=0,C=0;return d.isArray(_)?_.length===1?P=A=x=C=_[0]:_.length===2?(P=x=_[0],A=C=_[1]):_.length===3?(P=_[0],A=C=_[1],x=_[2]):(P=_[0],A=_[1],x=_[2],C=_[3]):P=A=x=C=_,{r1:P,r2:A,r3:x,r4:C}}T.parseRadius=L;function O(_){if(_=_||[],d.isArray(_))return _;if(d.isString(_))return _=_.match(c),d.each(_,function(P,A){if(P=P.match(F),P[0].length>1){var x=P[0].charAt(0);P.splice(1,0,P[0].substr(1)),P[0]=x}d.each(P,function(C,w){isNaN(C)||(P[w]=+C)}),_[A]=P}),_}T.parsePath=O},56143:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setClip=T.setTransform=T.setShadow=void 0;var d=v(20783);function c(O,_){var P=O.cfg.el,A=O.attr(),x={dx:A.shadowOffsetX,dy:A.shadowOffsetY,blur:A.shadowBlur,color:A.shadowColor};if(!x.dx&&!x.dy&&!x.blur&&!x.color)P.removeAttribute("filter");else{var C=_.find("filter",x);C||(C=_.addShadow(x)),P.setAttribute("filter","url(#"+C+")")}}T.setShadow=c;function F(O){var _=O.attr().matrix;if(_){for(var P=O.cfg.el,A=[],x=0;x<9;x+=3)A.push(_[x]+","+_[x+1]);A=A.join(","),A.indexOf("NaN")===-1?P.setAttribute("transform","matrix("+A+")"):console.warn("invalid matrix:",_)}}T.setTransform=F;function L(O,_){var P=O.getClip(),A=O.get("el");if(!P)A.removeAttribute("clip-path");else if(P&&!A.hasAttribute("clip-path")){d.createDom(P),P.createPath(_);var x=_.addClip(P);A.setAttribute("clip-path","url(#"+x+")")}}T.setClip=L},99576:function(xt,T,v){"use strict";v.r(T),v.d(T,{Chart:function(){return et},ComponentController:function(){return dt},DIRECTION:function(){return L},Event:function(){return go},Facet:function(){return Re},Geometry:function(){return Ua},GeometryLabel:function(){return un},Interaction:function(){return Wr},InteractionAction:function(){return vr},LAYER:function(){return F},Types:function(){return Qf},Util:function(){return Oh},VERSION:function(){return $o},View:function(){return wt},getActionClass:function(){return Wn},getAnimation:function(){return on},getEngine:function(){return N},getFacet:function(){return hr},getGeometryLabel:function(){return Ws},getGeometryLabelLayout:function(){return Xi},getInteraction:function(){return Ln},getShapeFactory:function(){return Us},getTheme:function(){return ma},registerAction:function(){return $r},registerAnimation:function(){return Cn},registerComponentController:function(){return wa},registerEngine:function(){return G},registerFacet:function(){return Sr},registerGeometry:function(){return ue},registerGeometryLabel:function(){return _o},registerGeometryLabelLayout:function(){return ja},registerInteraction:function(){return _n},registerShape:function(){return yi},registerShapeFactory:function(){return Ia},registerTheme:function(){return va}});var d=v(21362),c=v(26169),F;(function(m){m.FORE="fore",m.MID="mid",m.BG="bg"})(F||(F={}));var L;(function(m){m.TOP="top",m.TOP_LEFT="top-left",m.TOP_RIGHT="top-right",m.RIGHT="right",m.RIGHT_TOP="right-top",m.RIGHT_BOTTOM="right-bottom",m.LEFT="left",m.LEFT_TOP="left-top",m.LEFT_BOTTOM="left-bottom",m.BOTTOM="bottom",m.BOTTOM_LEFT="bottom-left",m.BOTTOM_RIGHT="bottom-right",m.RADIUS="radius",m.CIRCLE="circle",m.NONE="none"})(L||(L={}));var O;(function(m){m.AXIS="axis",m.GRID="grid",m.LEGEND="legend",m.TOOLTIP="tooltip",m.ANNOTATION="annotation",m.OTHER="other"})(O||(O={}));var _={FORE:3,MID:2,BG:1},P;(function(m){m.BEFORE_RENDER="beforerender",m.AFTER_RENDER="afterrender",m.BEFORE_PAINT="beforepaint",m.AFTER_PAINT="afterpaint",m.BEFORE_CHANGE_DATA="beforechangedata",m.AFTER_CHANGE_DATA="afterchangedata",m.BEFORE_CLEAR="beforeclear",m.AFTER_CLEAR="afterclear",m.BEFORE_DESTROY="beforedestroy"})(P||(P={}));var A;(function(m){m.MOUSE_ENTER="plot:mouseenter",m.MOUSE_DOWN="plot:mousedown",m.MOUSE_MOVE="plot:mousemove",m.MOUSE_UP="plot:mouseup",m.MOUSE_LEAVE="plot:mouseleave",m.TOUCH_START="plot:touchstart",m.TOUCH_MOVE="plot:touchmove",m.TOUCH_END="plot:touchend",m.TOUCH_CANCEL="plot:touchcancel",m.CLICK="plot:click",m.DBLCLICK="plot:dblclick",m.CONTEXTMENU="plot:contextmenu",m.LEAVE="plot:leave",m.ENTER="plot:enter"})(A||(A={}));var x;(function(m){m.ACTIVE="active",m.INACTIVE="inactive",m.SELECTED="selected",m.DEFAULT="default"})(x||(x={}));var C=["color","shape","size"],w="_origin",M=1,S=1,I=.25,B={};function N(m){var g=B[m];if(!g)throw new Error("G engine '"+m+"' is not exist, please register it at first.");return g}function G(m,g){B[m]=g}var W=v(50344),$=v(53918);function H(m){var g=getComputedStyle(m);return{width:(m.clientWidth||parseInt(g.width,10))-parseInt(g.paddingLeft,10)-parseInt(g.paddingRight,10),height:(m.clientHeight||parseInt(g.height,10))-parseInt(g.paddingTop,10)-parseInt(g.paddingBottom,10)}}function j(m){return typeof m=="number"&&!isNaN(m)}function nt(m,g,l,f){var E=l,D=f;if(g){var z=H(m);E=z.width?z.width:E,D=z.height?z.height:D}return{width:Math.max(j(E)?E:M,M),height:Math.max(j(D)?D:S,S)}}function rt(m){var g=m.parentNode;g&&g.removeChild(m)}var mt=v(95472),Ft=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this)||this;f.destroyed=!1;var E=l.visible,D=E===void 0?!0:E;return f.visible=D,f}return g.prototype.show=function(){var l=this.visible;l||this.changeVisible(!0)},g.prototype.hide=function(){var l=this.visible;l&&this.changeVisible(!1)},g.prototype.destroy=function(){this.off(),this.destroyed=!0},g.prototype.changeVisible=function(l){this.visible!==l&&(this.visible=l)},g}(mt.default),Gt=Ft,gt=v(23443),st=v(87023),Xt=v(68193),Q=v(88806),qt=v(14533),y=v(15856),Yt=v(41026),K=Yt.Axis.Line,ht=Yt.Axis.Circle,J=Yt.Grid.Line,At=Yt.Grid.Circle,Vt=Yt.Legend.Category,pt=Yt.Legend.Continuous,Lt=Yt.Tooltip.Html,Tt=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function kt(m){var g="linear";return Tt.test(m)?g="time":(0,c.isString)(m)&&(g="cat"),g}function jt(m,g,l){var f=g||[];if((0,c.isNumber)(m)||(0,c.isNil)((0,c.firstValue)(f,m))&&(0,c.isEmpty)(l)){var E=(0,y.getScale)("identity");return new E({field:m.toString(),values:[m]})}var D=(0,c.valuesOfKey)(f,m),z=(0,c.get)(l,"type",kt(D[0])),U=(0,y.getScale)(z);return new U((0,d.__assign)({field:m,values:D},l))}function Wt(m,g){if(m.type!=="identity"&&g.type!=="identity"){var l={};for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f]);m.change(l)}}function zt(m){return m.alias||m.field}var bt=v(7124);function at(m){var g,l;switch(m){case L.TOP:g={x:0,y:1},l={x:1,y:1};break;case L.RIGHT:g={x:1,y:0},l={x:1,y:1};break;case L.BOTTOM:g={x:0,y:0},l={x:1,y:0};break;case L.LEFT:g={x:0,y:0},l={x:0,y:1};break;default:g=l={x:0,y:0}}return{start:g,end:l}}function ft(m){var g,l;return m.isTransposed?(g={x:0,y:0},l={x:1,y:0}):(g={x:0,y:0},l={x:0,y:1}),{start:g,end:l}}function Pt(m,g){var l={start:{x:0,y:0},end:{x:0,y:0}};m.isRect?l=at(g):m.isPolar&&(l=ft(m));var f=l.start,E=l.end;return{start:m.convert(f),end:m.convert(E)}}function q(m,g){if(m.isRect)return m.isTransposed?[DIRECTION.RIGHT,DIRECTION.BOTTOM].includes(g)?1:-1:[DIRECTION.BOTTOM,DIRECTION.RIGHT].includes(g)?-1:1;if(m.isPolar){var l=m.x.start;return l<0?-1:1}return 1}function ut(m){var g=m.start,l=m.end;return g.x===l.x}function Et(m,g){var l=m.start,f=m.end,E=ut(m);return E?(l.y-f.y)*(g.x-l.x)>0?1:-1:(f.x-l.x)*(l.y-g.y)>0?-1:1}function Nt(m,g){return(0,c.get)(m,["components","axis",g],{})}function ee(m){var g=m.x,l=m.y,f=m.circleCenter,E=l.start>l.end,D=m.isTransposed?m.convert({x:E?0:1,y:0}):m.convert({x:0,y:E?0:1}),z=[D.x-f.x,D.y-f.y],U=[1,0],lt=D.y>f.y?bt.angle(z,U):bt.angle(z,U)*-1,Bt=lt+(g.end-g.start),Ut=Math.sqrt(Math.pow(D.x-f.x,2)+Math.pow(D.y-f.y,2));return{center:f,radius:Ut,startAngle:lt,endAngle:Bt}}function ge(m,g){return(0,c.isBoolean)(m)?m===!1?!1:{}:(0,c.get)(m,[g])}function De(m,g){return(0,c.get)(m,"position",g)}function er(m,g){return(0,c.get)(g,["title","text"],zt(m))}var Re=function(){function m(g,l){this.destroyed=!1,this.facets=[],this.view=g,this.cfg=(0,c.deepMix)({},this.getDefaultCfg(),l)}return m.prototype.init=function(){this.container||(this.container=this.createContainer());var g=this.view.getData();this.facets=this.generateFacets(g)},m.prototype.render=function(){this.renderViews()},m.prototype.update=function(){},m.prototype.clear=function(){this.clearFacetViews()},m.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},m.prototype.facetToView=function(g){var l=g.region,f=g.data,E=g.padding,D=E===void 0?this.cfg.padding:E,z=this.view.createView({region:l,padding:D});z.data(f||[]),g.view=z,this.beforeEachView(z,g);var U=this.cfg.eachView;return U&&U(z,g),this.afterEachView(z,g),z},m.prototype.createContainer=function(){var g=this.view.getLayer(F.FORE);return g.addGroup()},m.prototype.renderViews=function(){this.createFacetViews()},m.prototype.createFacetViews=function(){var g=this;return this.facets.map(function(l){return g.facetToView(l)})},m.prototype.clearFacetViews=function(){var g=this;(0,c.each)(this.facets,function(l){l.view&&(g.view.removeView(l.view),l.view=void 0)})},m.prototype.getFieldValues=function(g,l){var f=[],E={};return(0,c.each)(g,function(D){var z=D[l];!(0,c.isNil)(z)&&!E[z]&&(f.push(z),E[z]=!0)}),f},m.prototype.getRegion=function(g,l,f,E){var D=1/(l===0?1:l),z=1/(g===0?1:g),U={x:D*f,y:z*E},lt={x:D*(f+1),y:z*(E+1)};return{start:U,end:lt}},m.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},m.prototype.getDefaultTitleCfg=function(){var g=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:g}}},m.prototype.processAxis=function(g,l){var f=g.getOptions(),E=f.coordinate,D=g.geometries,z=(0,c.get)(E,"type","rect");if(z==="rect"&&D.length){(0,c.isNil)(f.axes)&&(f.axes={});var U=f.axes,lt=D[0].getXYFields(),Bt=lt[0],Ut=lt[1],$t=ge(U,Bt),Kt=ge(U,Ut);$t!==!1&&(f.axes[Bt]=this.getXAxisOption(Bt,U,$t,l)),Kt!==!1&&(f.axes[Ut]=this.getYAxisOption(Ut,U,Kt,l))}},m.prototype.getFacetDataFilter=function(g){return function(l){return(0,c.every)(g,function(f){var E=f.field,D=f.value;return!(0,c.isNil)(D)&&E?l[E]===D:!0})}},m}(),Ke={},hr=function(m){return Ke[(0,c.lowerCase)(m)]},Sr=function(m,g){Ke[(0,c.lowerCase)(m)]=g},Rr=function(){function m(g,l){this.context=g,this.cfg=l,g.addAction(this)}return m.prototype.applyCfg=function(g){(0,c.assign)(this,g)},m.prototype.init=function(){this.applyCfg(this.cfg)},m.prototype.destroy=function(){this.context.removeAction(this),this.context=null},m}(),vr=Rr,en=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.execute=function(){this.callback&&this.callback(this.context)},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.callback=null},g}(vr),gn=en,hn={};function vn(m,g){var l=hn[m],f=null;if(l){var E=l.ActionClass,D=l.cfg;f=new E(g,D),f.name=m,f.init()}return f}function Wn(m){var g=hn[m];return(0,c.get)(g,"ActionClass")}function $r(m,g,l){hn[m]={ActionClass:g,cfg:l}}function wi(m){delete hn[m]}function ci(m,g){var l=new gn(g);return l.callback=m,l.name="callback",l}function oe(m){if((0,c.isEmpty)(m))return null;var g=m[0].x,l=m[0].x,f=m[0].y,E=m[0].y;return(0,c.each)(m,function(D){g=g>D.x?D.x:g,l=l<D.x?D.x:l,f=f>D.y?D.y:f,E=E<D.y?D.y:E}),{minX:g,maxX:l,minY:f,maxY:E,centerX:(g+l)/2,centerY:(f+E)/2}}function ce(m,g,l,f){return{x:m+l*Math.cos(f),y:g+l*Math.sin(f)}}function Ee(m,g,l,f,E,D){D===void 0&&(D=0);var z=ce(m,g,l,f),U=ce(m,g,l,E),lt=ce(m,g,D,f),Bt=ce(m,g,D,E);if(E-f==Math.PI*2){var Ut=ce(m,g,l,f+Math.PI),$t=ce(m,g,D,f+Math.PI),Kt=[["M",z.x,z.y],["A",l,l,0,1,1,Ut.x,Ut.y],["A",l,l,0,1,1,U.x,U.y],["M",lt.x,lt.y]];return D&&(Kt.push(["A",D,D,0,1,0,$t.x,$t.y]),Kt.push(["A",D,D,0,1,0,Bt.x,Bt.y])),Kt.push(["M",z.x,z.y]),Kt.push(["Z"]),Kt}var ae=E-f<=Math.PI?0:1,ye=[["M",z.x,z.y],["A",l,l,0,ae,1,U.x,U.y],["L",Bt.x,Bt.y]];return D&&ye.push(["A",D,D,0,ae,0,lt.x,lt.y]),ye.push(["L",z.x,z.y]),ye.push(["Z"]),ye}function Pe(m,g,l,f,E){var D=ce(m,g,l,f),z=ce(m,g,l,E);if((0,c.isNumberEqual)(E-f,Math.PI*2)){var U=ce(m,g,l,f+Math.PI);return[["M",D.x,D.y],["A",l,l,0,1,1,U.x,U.y],["A",l,l,0,1,1,D.x,D.y],["A",l,l,0,1,0,U.x,U.y],["A",l,l,0,1,0,D.x,D.y],["Z"]]}var lt=E-f<=Math.PI?0:1;return[["M",D.x,D.y],["A",l,l,0,lt,1,z.x,z.y]]}function Fe(m,g){var l=m.points,f=oe(l),E,D,z=g.startAngle,U=g.endAngle,lt=U-z;return g.isTransposed?(E=f.maxY*lt,D=f.minY*lt):(E=f.maxX*lt,D=f.minX*lt),E+=z,D+=z,{startAngle:D,endAngle:E}}function Ue(m,g){if((0,c.isNumber)(m)&&(0,c.isNumber)(g))return[m,g];for(var l=-1,f=0,E=0,D,z=m.length-1,U,lt=0;++l<m.length;)D=z,z=l,lt+=U=m[D]*g[z]-m[z]*g[D],f+=(m[D]+m[z])*U,E+=(g[D]+g[z])*U;return lt*=3,[f/lt,E/lt]}function Qe(m,g){var l=m.attr(),f=g.attr();return(0,c.each)(l,function(E,D){f[D]===void 0&&(f[D]=void 0)}),f}function rr(m,g,l){var f=Math.min(g,l),E=Math.max(g,l);return m>=f&&m<=E}function We(m,g,l){if((0,c.isString)(m))return m.padEnd(g,l);if((0,c.isArray)(m)){var f=m.length;if(f<g)for(var E=g-f,D=0;D<E;D++)m.push(l)}return m}function fr(m,g){return g.forEach(function(l){delete m[l]}),m}function fe(m,g,l){g===void 0&&(g=[]),l===void 0&&(l={});for(var f=0,E=m;f<E.length;f++){var D=E[f];l[D]||(g.push(D),l[D]=!0)}return g}function re(m){if(m.isPolar&&!m.isTransposed)return(m.endAngle-m.startAngle)*m.getRadius();var g=m.convert({x:0,y:0}),l=m.convert({x:1,y:0});return Math.sqrt(Math.pow(l.x-g.x,2)+Math.pow(l.y-g.y,2))}function Rt(m){if(m.isPolar){var g=m.startAngle,l=m.endAngle;return l-g==Math.PI*2}return!1}function ie(m,g){var l=m.getCenter();return Math.sqrt(Math.pow(g.x-l.x,2)+Math.pow(g.y-l.y,2))}function be(m,g){var l=!1;if(m)if(m.type==="theta"){var f=m.start,E=m.end;l=rr(g.x,f.x,E.x)&&rr(g.y,f.y,E.y)}else{var D=m.invert(g);l=rr(D.x,0,1)&&rr(D.y,0,1)}return l}function Oe(m,g){var l=m.getCenter();return Math.atan2(g.y-l.y,g.x-l.x)}function ze(m,g){g===void 0&&(g=0);var l=m.start,f=m.end,E=m.getWidth(),D=m.getHeight();if(m.isPolar){var z=m.startAngle,U=m.endAngle,lt=m.getCenter(),Bt=m.getRadius();return{type:"path",startState:{path:Ee(lt.x,lt.y,Bt+g,z,z)},endState:function($t){var Kt=(U-z)*$t+z,ae=Ee(lt.x,lt.y,Bt+g,z,Kt);return{path:ae}},attrs:{path:Ee(lt.x,lt.y,Bt+g,z,U)}}}var Ut;return m.isTransposed?Ut={height:D+g*2}:Ut={width:E+g*2},{type:"rect",startState:{x:l.x-g,y:f.y-g,width:m.isTransposed?E+g*2:0,height:m.isTransposed?0:D+g*2},endState:Ut,attrs:{x:l.x-g,y:f.y-g,width:E+g*2,height:D+g*2}}}function ke(m,g){var l=[];if(m.length){l.push(["M",m[0].x,m[0].y]);for(var f=1,E=m.length;f<E;f+=1){var D=m[f];l.push(["L",D.x,D.y])}g&&l.push(["Z"])}return l}function Ze(m,g){for(var l=[m[0]],f=1,E=m.length;f<E;f=f+2){var D=g.convert({x:m[f],y:m[f+1]});l.push(D.x,D.y)}return l}function kr(m,g,l){var f=l.isTransposed,E=l.startAngle,D=l.endAngle,z={x:m[1],y:m[2]},U={x:g[1],y:g[2]},lt=[],Bt=f?"y":"x",Ut=Math.abs(U[Bt]-z[Bt])*(D-E),$t=U[Bt]>=z[Bt]?1:0,Kt=Ut>Math.PI?1:0,ae=l.convert(U),ye=ie(l,ae);if(ye>=.5)if(Ut===Math.PI*2){var Ae={x:(U.x+z.x)/2,y:(U.y+z.y)/2},$e=l.convert(Ae);lt.push(["A",ye,ye,0,Kt,$t,$e.x,$e.y]),lt.push(["A",ye,ye,0,Kt,$t,ae.x,ae.y])}else lt.push(["A",ye,ye,0,Kt,$t,ae.x,ae.y]);return lt}function Fr(m){(0,c.each)(m,function(g,l){var f=g;if(f[0].toLowerCase()==="a"){var E=m[l-1],D=m[l+1];D&&D[0].toLowerCase()==="a"?E&&E[0].toLowerCase()==="l"&&(E[0]="M"):E&&E[0].toLowerCase()==="a"&&D&&D[0].toLowerCase()==="l"&&(D[0]="M")}})}var jr=function(m,g,l,f){var E=[],D,z,U=!!f,lt,Bt;if(U){lt=[Infinity,Infinity],Bt=[-Infinity,-Infinity];for(var Ut=0,$t=m.length;Ut<$t;Ut++){var Kt=m[Ut];lt=bt.min([0,0],lt,Kt),Bt=bt.max([0,0],Bt,Kt)}lt=bt.min([0,0],lt,f[0]),Bt=bt.max([0,0],Bt,f[1])}for(var Ut=0,ae=m.length;Ut<ae;Ut++){var Kt=m[Ut];if(l)D=m[Ut?Ut-1:ae-1],z=m[(Ut+1)%ae];else if(Ut===0||Ut===ae-1){E.push(Kt);continue}else D=m[Ut-1],z=m[Ut+1];var ye=[0,0];ye=bt.sub(ye,z,D),ye=bt.scale(ye,ye,g);var Ae=bt.distance(Kt,D),$e=bt.distance(Kt,z),nr=Ae+$e;nr!==0&&(Ae/=nr,$e/=nr);var ir=bt.scale([0,0],ye,-Ae),_r=bt.scale([0,0],ye,$e),Gr=bt.add([0,0],Kt,ir),qr=bt.add([0,0],Kt,_r);U&&(Gr=bt.max([0,0],Gr,lt),Gr=bt.min([0,0],Gr,Bt),qr=bt.max([0,0],qr,lt),qr=bt.min([0,0],qr,Bt)),E.push(Gr),E.push(qr)}return l&&E.push(E.shift()),E};function ve(m,g,l){for(var f=!!g,E=[],D=0,z=m.length;D<z;D+=2)E.push([m[D],m[D+1]]);for(var U=jr(E,.4,f,l),lt=E.length,Bt=[],Ut,$t,Kt,D=0;D<lt-1;D++)Ut=U[D*2],$t=U[D*2+1],Kt=E[D+1],Bt.push(["C",Ut[0],Ut[1],$t[0],$t[1],Kt[0],Kt[1]]);return f&&(Ut=U[lt],$t=U[lt+1],Kt=E[0],Bt.push(["C",Ut[0],Ut[1],$t[0],$t[1],Kt[0],Kt[1]])),Bt}function pe(m,g){return ke(m,g)}function Se(m,g,l){var f=[],E=m[0],D=null;if(m.length<=2)return pe(m,g);for(var z=0,U=m.length;z<U;z++){var lt=m[z];(!D||!(D.x===lt.x&&D.y===lt.y))&&(f.push(lt.x),f.push(lt.y),D=lt)}var Bt=l||[[0,0],[1,1]],Ut=ve(f,g,Bt);return Ut.unshift(["M",E.x,E.y]),Ut}function Xe(m,g){var l=[];return(0,c.each)(g,function(f){var E=f[0];switch(E.toLowerCase()){case"m":case"l":case"c":l.push(Ze(f,m));break;case"z":default:l.push(f);break}}),l}function je(m,g){var l=[],f,E,D,z;return(0,c.each)(g,function(U,lt){var Bt=U[0];switch(Bt.toLowerCase()){case"m":case"c":case"q":l.push(Ze(U,m));break;case"l":f=g[lt-1],E=U,D=m.isTransposed,z=D?f[f.length-2]===E[1]:f[f.length-1]===E[2],z?l=l.concat(kr(f,E,m)):l.push(Ze(U,m));break;case"z":default:l.push(U);break}}),Fr(l),l}var tr=function(){function m(g,l,f,E){g===void 0&&(g=0),l===void 0&&(l=0),f===void 0&&(f=0),E===void 0&&(E=0),this.x=g,this.y=l,this.height=E,this.width=f}return m.fromRange=function(g,l,f,E){return new m(g,l,f-g,E-l)},Object.defineProperty(m.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),m.prototype.isEqual=function(g){return this.x===g.x&&this.y===g.y&&this.width===g.width&&this.height===g.height},m.prototype.clone=function(){return new m(this.x,this.y,this.width,this.height)},m.prototype.add=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];var f=this.clone();return(0,c.each)(g,function(E){f.x=Math.min(E.x,f.x),f.y=Math.min(E.y,f.y),f.width=Math.max(E.maxX,f.maxX)-f.x,f.height=Math.max(E.maxY,f.maxY)-f.y}),f},m.prototype.merge=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];var f=this.clone();return(0,c.each)(g,function(E){f.x=Math.max(E.x,f.x),f.y=Math.max(E.y,f.y),f.width=Math.min(E.maxX,f.maxX)-f.x,f.height=Math.min(E.maxY,f.maxY)-f.y}),f},m.prototype.cut=function(g,l){var f=g.width,E=g.height;switch(l){case L.TOP:case L.TOP_LEFT:case L.TOP_RIGHT:return m.fromRange(this.minX,this.minY+E,this.maxX,this.maxY);case L.RIGHT:case L.RIGHT_TOP:case L.RIGHT_BOTTOM:return m.fromRange(this.minX,this.minY,this.maxX-f,this.maxY);case L.BOTTOM:case L.BOTTOM_LEFT:case L.BOTTOM_RIGHT:return m.fromRange(this.minX,this.minY,this.maxX,this.maxY-E);case L.LEFT:case L.LEFT_TOP:case L.LEFT_BOTTOM:return m.fromRange(this.minX+f,this.minY,this.maxX,this.maxY);default:return this}},m.prototype.shrink=function(g){var l=g[0],f=g[1],E=g[2],D=g[3];return new m(this.x+D,this.y+l,this.width-D-f,this.height-l-E)},m.prototype.exceed=function(g){return[Math.max(-this.minY+g.minY,0),Math.max(this.maxX-g.maxX,0),Math.max(this.maxY-g.maxY,0),Math.max(-this.minX+g.minX,0)]},m.prototype.size=function(){return this.width*this.height},m}(),pr=function(m,g){var l=g.start,f=g.end;return new tr(m.x+m.width*l.x,m.y+m.height*l.y,m.width*Math.abs(f.x-l.x),m.height*Math.abs(f.y-l.y))};function Ar(m){return[[m.minX,m.minY],[m.maxX,m.minY],[m.maxX,m.maxY],[m.minX,m.maxY]]}var Hr=v(65410);function Br(m,g){var l=m.event,f=l.target,E=f.getCanvasBBox();return E.width>=g||E.height>=g?E:null}function Vr(m,g){var l=m.event,f=l.target,E=f.getCanvasBBox();return E.width>=g||E.height>=g?f.attr("path"):null}function Tn(m){var g=m.event,l,f=g.target;return f&&(l=f.get("element")),l}function Pn(m){var g=m.event,l=g.target,f;return l&&(f=l.get("delegateObject")),f}function ni(m){var g=m.event.gEvent;return!(g&&g.fromShape&&g.toShape&&g.fromShape.get("element")===g.toShape.get("element"))}function On(m){return m&&m.component&&m.component.isList()}function si(m){return m&&m.component&&m.component.isSlider()}function zn(m){var g=m.event,l=g.target;return l&&l.get("name")==="mask"}function Ti(m,g){var l=m.event.target;if(l.get("type")==="path"){var f=Vr(m,g);return f?vt(m.view,f):void 0}var E=Br(m,g);return E?Ct(m.view,E):null}function Hn(m,g,l){var f=Br(m,l);if(!f)return null;var E=m.view,D=He(E,g,{x:f.x,y:f.y}),z=He(E,g,{x:f.maxX,y:f.maxY}),U={minX:D.x,minY:D.y,maxX:z.x,maxY:z.y};return Ct(g,U)}function Un(m){var g=m.geometries,l=[];return(0,c.each)(g,function(f){var E=f.elements;l=l.concat(E)}),m.views&&m.views.length&&(0,c.each)(m.views,function(f){l=l.concat(Un(f))}),l}function Ri(m,g,l){var f=Un(m);return f.filter(function(E){return Dt(E,g)===l})}function Jt(m,g){var l=m.geometries,f=[];return(0,c.each)(l,function(E){var D=E.getElementsBy(function(z){return z.hasState(g)});f=f.concat(D)}),f}function Dt(m,g){var l=m.getModel(),f=l.data,E;return(0,c.isArray)(f)?E=f[0][g]:E=f[g],E}function yt(m,g){return!(g.minX>m.maxX||g.maxX<m.minX||g.minY>m.maxY||g.maxY<m.minY)}function Ct(m,g){var l=Un(m),f=[];return(0,c.each)(l,function(E){var D=E.shape,z=D.getCanvasBBox();yt(g,z)&&f.push(E)}),f}function ct(m){var g=[];return(0,c.each)(m,function(l){var f=l[0];if(f!=="A")for(var E=1;E<l.length;E=E+2)g.push([l[E],l[E+1]]);else{var D=l.length;g.push([l[D-2],l[D-1]])}}),g}function vt(m,g){var l=Un(m),f=ct(g),E=l.filter(function(D){var z=D.shape,U;if(z.get("type")==="path")U=ct(z.attr("path"));else{var lt=z.getCanvasBBox();U=Ar(lt)}return(0,Hr.default)(f,U)});return E}function ot(m){return m.getComponents().map(function(g){return g.component})}function St(m,g){var l=g.x-m.x,f=g.y-m.y;return Math.sqrt(l*l+f*f)}function Mt(m,g){if(m.length<=2)return pe(m,!1);var l=m[0],f=[];(0,c.each)(m,function(D){f.push(D.x),f.push(D.y)});var E=ve(f,g,null);return E.unshift(["M",l.x,l.y]),E}function te(m,g){return m.x<=g.x&&m.maxX>=g.x&&m.y<=g.y&&m.maxY>g.y}function ne(m){var g=m.parent,l=null;return g&&(l=g.views.filter(function(f){return f!==m})),l}function de(m,g){var l=m.getCoordinate();return l.invert(g)}function He(m,g,l){var f=de(m,l);return g.getCoordinate().convert(f)}function Ge(m,g,l,f){var E=!1;return(0,c.each)(m,function(D){if(D[l]===g[l]&&D[f]===g[f])return E=!0,!1}),E}function Ie(m,g){var l=m.getScaleByField(g);return!l&&m.views&&(0,c.each)(m.views,function(f){if(l=Ie(f,g),l)return!1}),l}var qe=function(){function m(g){this.actions=[],this.event=null,this.cacheMap={},this.view=g}return m.prototype.cache=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];if(g.length===1)return this.cacheMap[g[0]];g.length===2&&(this.cacheMap[g[0]]=g[1])},m.prototype.getAction=function(g){return this.actions.find(function(l){return l.name===g})},m.prototype.addAction=function(g){this.actions.push(g)},m.prototype.removeAction=function(g){var l=this.actions,f=this.actions.indexOf(g);f>=0&&l.splice(f,1)},m.prototype.getCurrentPoint=function(){var g=this.event;if(g)if(g.target instanceof HTMLElement){var l=this.view.getCanvas(),f=l.getPointByClient(g.clientX,g.clientY);return f}else return{x:g.x,y:g.y};return null},m.prototype.getCurrentShape=function(){return(0,c.get)(this.event,["gEvent","shape"])},m.prototype.isInPlot=function(){var g=this.getCurrentPoint();return g?this.view.isPointInPlot(g):!1},m.prototype.isInShape=function(g){var l=this.getCurrentShape();return l?l.get("name")===g:!1},m.prototype.isInComponent=function(g){var l=ot(this.view),f=this.getCurrentPoint();return f?!!l.find(function(E){var D=E.getBBox();return g?E.get("name")===g&&te(D,f):te(D,f)}):!1},m.prototype.destroy=function(){this.view=null,this.event=null,(0,c.each)(this.actions.slice(),function(g){g.destroy()}),this.actions=null,this.cacheMap=null},m}(),xr=qe,Pr=function(){function m(g,l){this.view=g,this.cfg=l}return m.prototype.init=function(){this.initEvents()},m.prototype.initEvents=function(){},m.prototype.clearEvents=function(){},m.prototype.destroy=function(){this.clearEvents()},m}(),Wr=Pr;function Lr(m,g){var l=m.split(":"),f=l[0],E=g.getAction(f)||vn(f,g);if(!E)throw new Error("There is no action named "+f);var D=l[1];return{action:E,methodName:D}}function br(m){var g=m.action,l=m.methodName;if(g[l])g[l]();else throw new Error("Action("+g.name+") doesn't have a method called "+l)}var Dr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},Sn=function(m){(0,d.__extends)(g,m);function g(l,f){var E=m.call(this,l,f)||this;return E.callbackCaches={},E.emitCaches={},E.steps=f,E}return g.prototype.init=function(){this.initContext(),m.prototype.init.call(this)},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},g.prototype.initEvents=function(){var l=this;(0,c.each)(this.steps,function(f,E){(0,c.each)(f,function(D){var z=l.getActionCallback(E,D);z&&l.bindEvent(D.trigger,z)})})},g.prototype.clearEvents=function(){var l=this;(0,c.each)(this.steps,function(f,E){(0,c.each)(f,function(D){var z=l.getActionCallback(E,D);z&&l.offEvent(D.trigger,z)})})},g.prototype.initContext=function(){var l=this.view,f=new xr(l);this.context=f;var E=this.steps;(0,c.each)(E,function(D){(0,c.each)(D,function(z){if((0,c.isFunction)(z.action))z.actionObject={action:ci(z.action,f),methodName:"execute"};else if((0,c.isString)(z.action))z.actionObject=Lr(z.action,f);else if((0,c.isArray)(z.action)){var U=z.action;z.actionObject=[],(0,c.each)(U,function(lt){z.actionObject.push(Lr(lt,f))})}})})},g.prototype.isAllowStep=function(l){var f=this.currentStepName,E=this.steps;if(f===l||l===Dr.SHOW_ENABLE)return!0;if(l===Dr.PROCESSING)return f===Dr.START;if(l===Dr.START)return f!==Dr.PROCESSING;if(l===Dr.END)return f===Dr.PROCESSING||f===Dr.START;if(l===Dr.ROLLBACK){if(E[Dr.END])return f===Dr.END;if(f===Dr.START)return!0}return!1},g.prototype.isAllowExcute=function(l,f){if(this.isAllowStep(l)){var E=this.getKey(l,f);return f.once&&this.emitCaches[E]?!1:f.isEnable?f.isEnable(this.context):!0}return!1},g.prototype.enterStep=function(l){this.currentStepName=l,this.emitCaches={}},g.prototype.afterExecute=function(l,f){l!==Dr.SHOW_ENABLE&&this.currentStepName!==l&&this.enterStep(l);var E=this.getKey(l,f);this.emitCaches[E]=!0},g.prototype.getKey=function(l,f){return l+f.trigger+f.action},g.prototype.getActionCallback=function(l,f){var E=this,D=this.context,z=this.callbackCaches,U=f.actionObject;if(f.action&&U){var lt=this.getKey(l,f);if(!z[lt]){var Bt=function(Ut){D.event=Ut,E.isAllowExcute(l,f)?((0,c.isArray)(U)?(0,c.each)(U,function($t){D.event=Ut,br($t)}):(D.event=Ut,br(U)),E.afterExecute(l,f),f.callback&&(D.event=Ut,f.callback(D))):D.event=null};f.debounce?z[lt]=(0,c.debounce)(Bt,f.debounce.wait,f.debounce.immediate):f.throttle?z[lt]=(0,c.throttle)(Bt,f.throttle.wait,{leading:f.throttle.leading,trailing:f.throttle.trailing}):z[lt]=Bt}return z[lt]}return null},g.prototype.bindEvent=function(l,f){var E=l.split(":");E[0]==="window"?window.addEventListener(E[1],f):E[0]==="document"?document.addEventListener(E[1],f):this.view.on(l,f)},g.prototype.offEvent=function(l,f){var E=l.split(":");E[0]==="window"?window.removeEventListener(E[1],f):E[0]==="document"?document.removeEventListener(E[1],f):this.view.off(l,f)},g}(Wr),Dn=Sn,Yn={};function Ln(m){return Yn[(0,c.lowerCase)(m)]}function _n(m,g){Yn[(0,c.lowerCase)(m)]=g}function Jn(m,g,l){var f=Ln(m);if(!f)return null;if((0,c.isPlainObject)(f)){var E=(0,c.mix)((0,c.clone)(f),l);return new Dn(g,E)}else{var D=f;return new D(g,l)}}var Ii=v(44414),Qn=v(50669);function qi(m){var g,l={point:{default:{fill:m.pointFillColor,r:m.pointSize,stroke:m.pointBorderColor,lineWidth:m.pointBorder,fillOpacity:m.pointFillOpacity},active:{stroke:m.pointActiveBorderColor,lineWidth:m.pointActiveBorder},selected:{stroke:m.pointSelectedBorderColor,lineWidth:m.pointSelectedBorder},inactive:{fillOpacity:m.pointInactiveFillOpacity,strokeOpacity:m.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:m.hollowPointFillColor,lineWidth:m.hollowPointBorder,stroke:m.hollowPointBorderColor,strokeOpacity:m.hollowPointBorderOpacity,r:m.hollowPointSize},active:{stroke:m.hollowPointActiveBorderColor,strokeOpacity:m.hollowPointActiveBorderOpacity},selected:{lineWidth:m.hollowPointSelectedBorder,stroke:m.hollowPointSelectedBorderColor,strokeOpacity:m.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:m.hollowPointInactiveBorderOpacity}},area:{default:{fill:m.areaFillColor,fillOpacity:m.areaFillOpacity,stroke:null},active:{fillOpacity:m.areaActiveFillOpacity},selected:{fillOpacity:m.areaSelectedFillOpacity},inactive:{fillOpacity:m.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:m.hollowAreaBorderColor,lineWidth:m.hollowAreaBorder,strokeOpacity:m.hollowAreaBorderOpacity},active:{fill:null,lineWidth:m.hollowAreaActiveBorder},selected:{fill:null,lineWidth:m.hollowAreaSelectedBorder},inactive:{strokeOpacity:m.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:m.intervalFillColor,fillOpacity:m.intervalFillOpacity},active:{stroke:m.intervalActiveBorderColor,lineWidth:m.intervalActiveBorder},selected:{stroke:m.intervalSelectedBorderColor,lineWidth:m.intervalSelectedBorder},inactive:{fillOpacity:m.intervalInactiveFillOpacity,strokeOpacity:m.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:m.hollowIntervalFillColor,stroke:m.hollowIntervalBorderColor,lineWidth:m.hollowIntervalBorder,strokeOpacity:m.hollowIntervalBorderOpacity},active:{stroke:m.hollowIntervalActiveBorderColor,lineWidth:m.hollowIntervalActiveBorder,strokeOpacity:m.hollowIntervalActiveBorderOpacity},selected:{stroke:m.hollowIntervalSelectedBorderColor,lineWidth:m.hollowIntervalSelectedBorder,strokeOpacity:m.hollowIntervalSelectedBorderOpacity},inactive:{stroke:m.hollowIntervalInactiveBorderColor,lineWidth:m.hollowIntervalInactiveBorder,strokeOpacity:m.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:m.lineBorderColor,lineWidth:m.lineBorder,strokeOpacity:m.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:m.lineActiveBorder},selected:{lineWidth:m.lineSelectedBorder},inactive:{strokeOpacity:m.lineInactiveBorderOpacity}}},f={title:{autoRotate:!0,position:"center",style:{fill:m.axisTitleTextFillColor,fontSize:m.axisTitleTextFontSize,lineHeight:m.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:m.fontFamily}},label:{autoRotate:!0,autoEllipsis:!0,autoHide:!0,offset:16,style:{fill:m.axisLabelFillColor,fontSize:m.axisLabelFontSize,lineHeight:m.axisLabelLineHeight,textBaseline:"middle",fontFamily:m.fontFamily}},line:{style:{lineWidth:m.axisLineBorder,stroke:m.axisLineBorderColor}},tickLine:{style:{lineWidth:m.axisTickLineBorder,stroke:m.axisTickLineBorderColor},alignTick:!0,length:m.axisTickLineLength},subTickLine:null,animate:!0},E={line:{type:"line",style:{stroke:m.axisGridBorderColor,lineWidth:m.axisGridBorder,lineDash:m.axisGridLineDash}},alignTick:!0,animate:!0},D={title:null,marker:{symbol:"circle",style:{r:m.legendCircleMarkerSize,fill:m.legendMarkerColor}},itemName:{spacing:5,style:{fill:m.legendItemNameFillColor,fontFamily:m.fontFamily,fontSize:m.legendItemNameFontSize,lineHeight:m.legendItemNameLineHeight,fontWeight:m.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:.2};return{background:m.backgroundColor,defaultColor:m.brandColor,padding:"auto",fontFamily:m.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:m.paletteQualitative10,colors20:m.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:l.interval.default},active:{style:l.interval.active},inactive:{style:l.interval.inactive},selected:{style:function(z){var U=z.geometry.coordinate;if(U.isPolar&&U.isTransposed){var lt=Fe(z.getModel(),U),Bt=lt.startAngle,Ut=lt.endAngle,$t=(Bt+Ut)/2,Kt=7.5,ae=Kt*Math.cos($t),ye=Kt*Math.sin($t);return{matrix:Qn.transform(null,[["t",ae,ye]])}}return l.interval.selected}}},"hollow-rect":{default:{style:l.hollowInterval.default},active:{style:l.hollowInterval.active},inactive:{style:l.hollowInterval.inactive},selected:{style:l.hollowInterval.selected}},line:{default:{style:l.hollowInterval.default},active:{style:l.hollowInterval.active},inactive:{style:l.hollowInterval.inactive},selected:{style:l.hollowInterval.selected}},tick:{default:{style:l.hollowInterval.default},active:{style:l.hollowInterval.active},inactive:{style:l.hollowInterval.inactive},selected:{style:l.hollowInterval.selected}},funnel:{default:{style:l.interval.default},active:{style:l.interval.active},inactive:{style:l.interval.inactive},selected:{style:l.interval.selected}},pyramid:{default:{style:l.interval.default},active:{style:l.interval.active},inactive:{style:l.interval.inactive},selected:{style:l.interval.selected}}},line:{line:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},dot:{default:{style:(0,d.__assign)((0,d.__assign)({},l.line.default),{lineDash:[1,1]})},active:{style:(0,d.__assign)((0,d.__assign)({},l.line.active),{lineDash:[1,1]})},inactive:{style:(0,d.__assign)((0,d.__assign)({},l.line.inactive),{lineDash:[1,1]})},selected:{style:(0,d.__assign)((0,d.__assign)({},l.line.selected),{lineDash:[1,1]})}},dash:{default:{style:(0,d.__assign)((0,d.__assign)({},l.line.default),{lineDash:[5.5,1]})},active:{style:(0,d.__assign)((0,d.__assign)({},l.line.active),{lineDash:[5.5,1]})},inactive:{style:(0,d.__assign)((0,d.__assign)({},l.line.inactive),{lineDash:[5.5,1]})},selected:{style:(0,d.__assign)((0,d.__assign)({},l.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},hv:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},vh:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},hvh:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},vhv:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}}},polygon:{polygon:{default:{style:l.interval.default},active:{style:l.interval.active},inactive:{style:l.interval.inactive},selected:{style:l.interval.selected}}},point:{circle:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},square:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},bowtie:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},diamond:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},hexagon:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},triangle:{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},"triangle-down":{default:{style:l.point.default},active:{style:l.point.active},inactive:{style:l.point.inactive},selected:{style:l.point.selected}},"hollow-circle":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-square":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-bowtie":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-diamond":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-hexagon":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-triangle":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},"hollow-triangle-down":{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},cross:{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},tick:{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},plus:{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},hyphen:{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}},line:{default:{style:l.hollowPoint.default},active:{style:l.hollowPoint.active},inactive:{style:l.hollowPoint.inactive},selected:{style:l.hollowPoint.selected}}},area:{area:{default:{style:l.area.default},active:{style:l.area.active},inactive:{style:l.area.inactive},selected:{style:l.area.selected}},smooth:{default:{style:l.area.default},active:{style:l.area.active},inactive:{style:l.area.inactive},selected:{style:l.area.selected}},line:{default:{style:l.hollowArea.default},active:{style:l.hollowArea.active},inactive:{style:l.hollowArea.inactive},selected:{style:l.hollowArea.selected}},"smooth-line":{default:{style:l.hollowArea.default},active:{style:l.hollowArea.active},inactive:{style:l.hollowArea.inactive},selected:{style:l.hollowArea.selected}}},schema:{candle:{default:{style:l.hollowInterval.default},active:{style:l.hollowInterval.active},inactive:{style:l.hollowInterval.inactive},selected:{style:l.hollowInterval.selected}},box:{default:{style:l.hollowInterval.default},active:{style:l.hollowInterval.active},inactive:{style:l.hollowInterval.inactive},selected:{style:l.hollowInterval.selected}}},edge:{line:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},vhv:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},smooth:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}},arc:{default:{style:l.line.default},active:{style:l.line.active},inactive:{style:l.line.inactive},selected:{style:l.line.selected}}}},components:{axis:{top:(0,c.deepMix)({},f,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:(0,c.deepMix)({},f,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:(0,c.deepMix)({},f,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:E,verticalLimitLength:1/3}),right:(0,c.deepMix)({},f,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:E,verticalLimitLength:1/3}),circle:(0,c.deepMix)({},f,{title:null,label:{offset:8},grid:(0,c.deepMix)({},E,{line:{type:"line"}})}),radius:(0,c.deepMix)({},f,{title:null,label:{offset:8},grid:(0,c.deepMix)({},E,{line:{type:"circle"}})})},legend:{right:(0,c.deepMix)({},D,{layout:"vertical"}),left:(0,c.deepMix)({},D,{layout:"vertical"}),top:(0,c.deepMix)({},D,{layout:"horizontal"}),bottom:(0,c.deepMix)({},D,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:m.sliderRailHeight,defaultLength:m.sliderRailWidth,style:{fill:m.sliderRailFillColor,stroke:m.sliderRailBorderColor,lineWidth:m.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:m.sliderLabelTextFillColor,fontSize:m.sliderLabelTextFontSize,lineHeight:m.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:m.fontFamily}},handler:{size:m.sliderHandlerWidth,style:{fill:m.sliderHandlerFillColor,stroke:m.sliderHandlerBorderColor}},slidable:!0},margin:[0,0,0,0]},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:m.tooltipCrosshairsBorderColor,lineWidth:m.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(g={},g[""+Ii.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:m.tooltipContainerFillColor,opacity:m.tooltipContainerFillOpacity,boxShadow:m.tooltipContainerShadow,borderRadius:m.tooltipContainerBorderRadius+"px",color:m.tooltipTextFillColor,fontSize:m.tooltipTextFontSize+"px",fontFamily:m.fontFamily,lineHeight:m.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},g[""+Ii.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},g[""+Ii.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},g[""+Ii.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},g[""+Ii.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},g[""+Ii.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},g)},annotation:{arc:{style:{stroke:m.annotationArcBorderColor,lineWidth:m.annotationArcBorder},animate:!0},line:{style:{stroke:m.annotationLineBorderColor,lineDash:m.annotationLineDash,lineWidth:m.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:m.annotationTextFillColor,stroke:m.annotationTextBorderColor,lineWidth:m.annotationTextBorder,fontSize:m.annotationTextFontSize,textAlign:"start",fontFamily:m.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:m.annotationTextFillColor,stroke:m.annotationTextBorderColor,lineWidth:m.annotationTextBorder,fontSize:m.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:m.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:m.annotationRegionBorder,stroke:m.annotationRegionBorderColor,fill:m.annotationRegionFillColor,fillOpacity:m.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:m.brandColor,lineWidth:2}},line:{style:{stroke:m.annotationLineBorderColor,lineWidth:m.annotationLineBorder},length:m.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:m.annotationTextFillColor,stroke:m.annotationTextBorderColor,lineWidth:m.annotationTextBorder,fontSize:m.annotationTextFontSize,fontFamily:m.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:m.annotationRegionFillColor,fillOpacity:m.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:m.annotationTextFillColor,stroke:m.annotationTextBorderColor,lineWidth:m.annotationTextBorder,fontSize:m.annotationTextFontSize,fontFamily:m.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:m.labelFillColor,fontSize:m.labelFontSize,fontFamily:m.fontFamily,stroke:m.labelBorderColor,lineWidth:m.labelBorder},autoRotate:!0},innerLabels:{style:{fill:m.innerLabelFillColor,fontSize:m.innerLabelFontSize,fontFamily:m.fontFamily,stroke:m.innerLabelBorderColor,lineWidth:m.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:m.labelLineBorder}},autoRotate:!0}}}var dn={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Si={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Zn=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],ya=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],La={backgroundColor:"transparent",brandColor:Zn[0],paletteQualitative10:Zn,paletteQualitative20:ya,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:dn[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:dn[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:dn[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:dn[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:dn[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:dn[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:dn[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Zn[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:dn[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:dn[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:dn[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:dn[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:dn[25],annotationArcBorderColor:dn[15],annotationArcBorder:.5,annotationLineBorderColor:dn[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:dn[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:Si[95],annotationTextBorder:1.5,annotationRegionFillColor:dn[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:dn[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:dn[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:dn[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Si[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:dn[25],pointFillColor:Zn[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Si[100],pointBorderOpacity:1,pointActiveBorderColor:dn[100],pointSelectedBorder:2,pointSelectedBorderColor:dn[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Zn[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Si[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:dn[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:dn[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Zn[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Zn[0],areaFillOpacity:.25,areaActiveFillColor:Zn[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Zn[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Zn[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:dn[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:dn[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Zn[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:dn[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:dn[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Zn[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Si[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:dn[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:dn[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},Va=qi(La),ji={default:Va};function ma(m){return(0,c.get)(ji,(0,c.lowerCase)(m),ji.default)}function va(m,g){ji[(0,c.lowerCase)(m)]=(0,c.deepMix)({},ji.default,g)}function _a(m,g,l){var f=l.translate(m),E=l.translate(g);return(0,c.isNumberEqual)(f,E)}function ta(m,g){var l=g.coordinate,f=g.getXScale(),E=f.range,D=E[E.length-1],z=E[0],U=l.invert(m),lt=U.x;return l.isPolar&&lt>(1+D)/2&&(lt=z),f.translate(f.invert(lt))}function sa(m,g,l){var f=l.coordinate,E=l.getYScale(),D=E.field,z=f.invert(g),U=E.invert(z.y),lt=(0,c.find)(m,function(Bt){var Ut=Bt[w];return Ut[D][0]<=U&&Ut[D][1]>=U});return lt||m[m.length-1]}var ea=(0,c.memoize)(function(m){if(m.isCategory)return 1;for(var g=m.values,l=g.length,f=m.translate(g[0]),E=f,D=0;D<l;D++){var z=g[D],U=m.translate(z);U<f&&(f=U),U>E&&(E=U)}return(E-f)/(l-1)});function xa(m,g,l){var f=l;if(!l){var E=g.getAttribute("position"),D=E.getFields();f=D[0]}var z=g.scales;return z[f]?z[f].getText(m[f]):(0,c.hasKey)(m,f)?m[f]:f}function Ca(m){var g=(0,c.values)(m.attributes);return(0,c.filter)(g,function(l){return(0,c.contains)(C,l.type)})}function ba(m){for(var g=Ca(m),l,f=0,E=g;f<E.length;f++){var D=E[f],z=D.getScale(D.type);if(z&&z.isLinear){l=z;break}}var U=m.getXScale(),lt=m.getYScale();return l||lt||U}function fo(m,g){var l=g.field,f=m[l];if((0,c.isArray)(f)){var E=f.map(function(D){return g.getText(D)});return E.join("-")}return g.getText(f)}function Xo(m,g){var l,f=g.getGroupScales();if(f.length&&(l=f[0]),l){var E=l.field;return l.getText(m[E])}var D=ba(g);return zt(D)}function co(m,g,l){if(g.length===0)return null;var f=l.type,E=l.getXScale(),D=l.getYScale(),z=E.field,U=D.field,lt=null;if(f==="heatmap"||f==="point"){for(var Bt=l.coordinate,Ut=Bt.invert(m),$t=E.invert(Ut.x),Kt=D.invert(Ut.y),ae=Infinity,ye=0;ye<g.length;ye++){var Ae=g[ye],$e=Ae[w],nr=Math.pow($e[z]-$t,2)+Math.pow($e[U]-Kt,2);nr<ae&&(ae=nr,lt=Ae)}return lt}var ir=g[0],_r=g[g.length-1],Gr=ta(m,l),qr=ir[w][z],mn=ir[w][U],kn=_r[w][z],Rn=D.isLinear&&(0,c.isArray)(mn);if((0,c.isArray)(qr)){for(var ye=0;ye<g.length;ye++){var cn=g[ye],$e=cn[w];if(E.translate($e[z][0])<=Gr&&E.translate($e[z][1])>=Gr)if(Rn)(0,c.isArray)(lt)||(lt=[]),lt.push(cn);else{lt=cn;break}}(0,c.isArray)(lt)&&(lt=sa(lt,m,l))}else{var Vn=void 0;if(!E.isLinear&&E.type!=="timeCat"){for(var ye=0;ye<g.length;ye++){var cn=g[ye],$e=cn[w];if(_a($e[z],Gr,E))if(Rn)(0,c.isArray)(lt)||(lt=[]),lt.push(cn);else{lt=cn;break}else E.translate($e[z])<=Gr&&(_r=cn,Vn=g[ye+1])}(0,c.isArray)(lt)&&(lt=sa(lt,m,l))}else{if((Gr>E.translate(kn)||Gr<E.translate(qr))&&(Gr>E.max||Gr<E.min))return null;for(var vi=0,la=g.length-1,mi=void 0;vi<=la;){mi=Math.floor((vi+la)/2);var Mi=g[mi][w][z];if(_a(Mi,Gr,E))return g[mi];E.translate(Mi)<=E.translate(Gr)?(vi=mi+1,_r=g[mi],Vn=g[mi+1]):(la===0&&(_r=g[0]),la=mi-1)}}_r&&Vn&&Math.abs(E.translate(_r[w][z])-Gr)>Math.abs(E.translate(Vn[w][z])-Gr)&&(_r=Vn)}var Fa=ea(l.getXScale());return!lt&&Math.abs(E.translate(_r[w][z])-Gr)<=Fa/2&&(lt=_r),lt}function vo(m,g,l){l===void 0&&(l="");var f=m[w],E=xa(f,g,l),D=g.tooltipOption,z=g.theme.defaultColor,U=[],lt,Bt;function Ut(mn,kn){if(!(0,c.isNil)(kn)&&kn!==""){var Rn={title:E,data:f,mappingData:m,name:mn,value:kn,color:m.color||z,marker:!0};U.push(Rn)}}if((0,c.isObject)(D)){var $t=D.fields,Kt=D.callback;if(Kt){var ae=$t.map(function(mn){return m[w][mn]}),ye=Kt.apply(void 0,ae),Ae=(0,d.__assign)({data:m[w],mappingData:m,title:E,color:m.color||z,marker:!0},ye);U.push(Ae)}else for(var $e=g.scales,nr=0,ir=$t;nr<ir.length;nr++){var _r=ir[nr];if(!(0,c.isNil)(f[_r])){var Gr=$e[_r];lt=zt(Gr),Bt=Gr.getText(f[_r]),Ut(lt,Bt)}}}else{var qr=ba(g);(0,c.isNil)(f[qr.field])||(Bt=fo(f,qr),lt=Xo(f,g),Ut(lt,Bt))}return U}var Wa={};function wa(m,g){Wa[m]=g}function cs(m){delete Wa[m]}function po(){return Object.keys(Wa)}function Ho(m){return Wa[m]}var Vo=function(){function m(g){this.option=this.wrapperOption(g)}return m.prototype.update=function(g){return this.option=this.wrapperOption(g),this},m.prototype.hasAction=function(g){var l=this.option.actions;return(0,c.some)(l,function(f){return f[0]===g})},m.prototype.create=function(g,l){var f=this.option,E=f.type,D=f.cfg,z=E==="theta",U=(0,d.__assign)({start:g,end:l},D),lt=(0,qt.getCoordinate)(z?"polar":E);return this.coordinate=new lt(U),this.coordinate.type=E,z&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},m.prototype.adjust=function(g,l){return this.coordinate.update({start:g,end:l}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},m.prototype.rotate=function(g){return this.option.actions.push(["rotate",g]),this},m.prototype.reflect=function(g){return this.option.actions.push(["reflect",g]),this},m.prototype.scale=function(g,l){return this.option.actions.push(["scale",g,l]),this},m.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},m.prototype.getOption=function(){return this.option},m.prototype.getCoordinate=function(){return this.coordinate},m.prototype.wrapperOption=function(g){return(0,d.__assign)({type:"rect",actions:[],cfg:{}},g)},m.prototype.execActions=function(g){var l=this,f=this.option.actions;(0,c.each)(f,function(E){var D,z=E[0],U=E.slice(1),lt=(0,c.isNil)(g)?!0:g.includes(z);lt&&(D=l.coordinate)[z].apply(D,U)})},m}(),Wo=Vo,To=function(){function m(g,l,f){this.view=g,this.gEvent=l,this.data=f,this.type=l.type}return Object.defineProperty(m.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),m.prototype.toString=function(){return"[Event (type="+this.type+")]"},m.prototype.clone=function(){return new m(this.view,this.gEvent,this.data)},m}(),go=To;function jo(m){return!(0,c.isNumber)(m)&&!(0,c.isArray)(m)}function da(m){m===void 0&&(m=0);var g=(0,c.isArray)(m)?m:[m];switch(g.length){case 0:g=[0,0,0,0];break;case 1:g=new Array(4).fill(g[0]);break;case 2:g=(0,d.__spreadArrays)(g,g);break;case 3:g=(0,d.__spreadArrays)(g,[g[1]]);break;default:g=g.slice(0,4);break}return g}var Po=function(){function m(g,l,f,E){g===void 0&&(g=0),l===void 0&&(l=0),f===void 0&&(f=0),E===void 0&&(E=0),this.top=g,this.right=l,this.bottom=f,this.left=E}return m.prototype.shrink=function(g){var l=g[0],f=g[1],E=g[2],D=g[3];return this.top+=l,this.right+=f,this.bottom+=E,this.left+=D,this},m.prototype.inc=function(g,l){var f=g.width,E=g.height;switch(l){case L.TOP:case L.TOP_LEFT:case L.TOP_RIGHT:this.top+=E;break;case L.RIGHT:case L.RIGHT_TOP:case L.RIGHT_BOTTOM:this.right+=f;break;case L.BOTTOM:case L.BOTTOM_LEFT:case L.BOTTOM_RIGHT:this.bottom+=E;break;case L.LEFT:case L.LEFT_TOP:case L.LEFT_BOTTOM:this.left+=f;break;default:break}return this},m.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},m}();function zi(m){var g=m.padding;if(!jo(g))return da(g);var l=m.viewBBox,f=m.autoPadding,E=new Po;(0,c.each)(m.getComponents(),function(U){var lt=U.component,Bt=U.type;if(!(Bt===O.GRID||Bt===O.TOOLTIP)){var Ut=lt.getLayoutBBox(),$t=new tr(Ut.x,Ut.y,Ut.width,Ut.height);if(Bt===O.AXIS){var Kt=$t.exceed(l);E.shrink(Kt)}else{var ae=U.direction;E.inc($t,ae)}}});var D=E.getPadding();if(f){var z=da(m.appendPadding);return[Math.max(f[0]-z[0],D[0]),Math.max(f[1]-z[1],D[1]),Math.max(f[2]-z[2],D[2]),Math.max(f[3]-z[3],D[3])]}return D}function Lo(m){var g=m.getController("axis"),l=m.getController("legend"),f=m.getController("annotation"),E=m.getController("slider"),D=zi(m);m.coordinateBBox=m.viewBBox.shrink(D).shrink(da(m.appendPadding)),m.adjustCoordinate(),[g,E,l,f].forEach(function(z){z&&z.layout()})}var Uo=function(){function m(){this.scales=new Map,this.syncScales=new Map}return m.prototype.createScale=function(g,l,f,E){var D=f,z=this.getScaleMeta(E);if(l.length===0&&z){var U=z.scale,lt={type:U.type};U.isCategory&&(lt.values=U.values),D=(0,c.deepMix)(lt,z.scaleDef,f)}var Bt=jt(g,l,D);return this.cacheScale(Bt,f,E),Bt},m.prototype.sync=function(){var g=this;this.syncScales.forEach(function(l,f){var E=Number.MAX_SAFE_INTEGER,D=Number.MIN_SAFE_INTEGER,z=[];(0,c.each)(l,function(U){var lt=g.getScale(U);D=(0,c.isNumber)(lt.max)?Math.max(D,lt.max):D,E=(0,c.isNumber)(lt.min)?Math.min(E,lt.min):E,(0,c.each)(lt.values,function(Bt){z.includes(Bt)||z.push(Bt)})}),(0,c.each)(l,function(U){var lt=g.getScale(U);lt.isContinuous?lt.change({min:E,max:D,values:z}):lt.isCategory&&lt.change({values:z})})})},m.prototype.cacheScale=function(g,l,f){var E=this.getScaleMeta(f);E&&E.scale.type===g.type?(Wt(E.scale,g),E.scaleDef=l):(E={key:f,scale:g,scaleDef:l},this.scales.set(f,E));var D=this.getSyncKey(E);if(E.syncKey=D,this.removeFromSyncScales(f),D){var z=this.syncScales.get(D);z||(z=[],this.syncScales.set(D,z)),z.push(f)}},m.prototype.getScale=function(g){var l=this.getScaleMeta(g);if(!l){var f=(0,c.last)(g.split("-")),E=this.syncScales.get(f);E&&E.length&&(l=this.getScaleMeta(E[0]))}return l&&l.scale},m.prototype.deleteScale=function(g){var l=this.getScaleMeta(g);if(l){var f=l.syncKey,E=this.syncScales.get(f);if(E&&E.length){var D=E.indexOf(g);D!==-1&&E.splice(D,1)}}this.scales.delete(g)},m.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},m.prototype.removeFromSyncScales=function(g){var l=this;this.syncScales.forEach(function(f,E){var D=f.indexOf(g);if(D!==-1)return f.splice(D,1),f.length===0&&l.syncScales.delete(E),!1})},m.prototype.getSyncKey=function(g){var l=g.scale,f=g.scaleDef,E=l.field,D=(0,c.get)(f,["sync"]);return D===!0?E:D===!1?void 0:D},m.prototype.getScaleMeta=function(g){return this.scales.get(g)},m}(),Zo=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,{visible:l.visible})||this;f.id=(0,c.uniqueId)("view"),f.views=[],f.geometries=[],f.controllers=[],f.interactions={},f.limitInPlot=!1,f.options={data:[],animate:!0},f.usedControllers=po(),f.scalePool=new Uo,f.layoutFunc=Lo,f.isPreMouseInPlot=!1,f.isDataChanged=!1,f.isCoordinateChanged=!1,f.createdScaleKeys=new Map,f.onCanvasEvent=function($e){var nr=$e.name;if(!nr.includes(":")){var ir=f.createViewEvent($e);f.doPlotEvent(ir),f.emit(nr,ir)}},f.onDelegateEvents=function($e){var nr=$e.name;if(!!nr.includes(":")){var ir=f.createViewEvent($e);f.emit(nr,ir)}};var E=l.parent,D=l.canvas,z=l.backgroundGroup,U=l.middleGroup,lt=l.foregroundGroup,Bt=l.region,Ut=Bt===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:Bt,$t=l.padding,Kt=l.appendPadding,ae=l.theme,ye=l.options,Ae=l.limitInPlot;return f.parent=E,f.canvas=D,f.backgroundGroup=z,f.middleGroup=U,f.foregroundGroup=lt,f.region=Ut,f.padding=$t,f.appendPadding=Kt,f.options=(0,d.__assign)((0,d.__assign)({},f.options),ye),f.limitInPlot=Ae,f.themeObject=(0,c.isObject)(ae)?(0,c.deepMix)({},ma("default"),ae):ma(ae),f.init(),f}return g.prototype.setLayout=function(l){this.layoutFunc=l},g.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new Wo(this.options.coordinate),this.initOptions();for(var l=this.views,f=0;f<l.length;f++)l[f].init()},g.prototype.render=function(l){l===void 0&&(l=!1),this.emit(P.BEFORE_RENDER),this.paint(l),this.emit(P.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},g.prototype.clear=function(){var l=this;this.emit(P.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var f=this.geometries,E=0;E<f.length;E++)f[E].clear();this.geometries=[];for(var D=this.controllers,E=0;E<D.length;E++)D[E].clear();this.createdScaleKeys.forEach(function(U,lt){l.getRootView().scalePool.deleteScale(lt)}),this.createdScaleKeys.clear();for(var z=this.views,E=0;E<z.length;E++)z[E].clear();this.emit(P.AFTER_CLEAR)},g.prototype.destroy=function(){this.emit(P.BEFORE_DESTROY);var l=this.interactions;(0,c.each)(l,function(U){U&&U.destroy()}),this.clear();for(var f=this.controllers,E=0,D=f.length;E<D;E++){var z=f[E];z.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),m.prototype.destroy.call(this)},g.prototype.changeVisible=function(l){m.prototype.changeVisible.call(this,l);for(var f=this.geometries,E=0,D=f.length;E<D;E++){var z=f[E];z.changeVisible(l)}for(var U=this.controllers,E=0,D=U.length;E<D;E++){var lt=U[E];lt.changeVisible(l)}return this.foregroundGroup.set("visible",l),this.middleGroup.set("visible",l),this.backgroundGroup.set("visible",l),this.getCanvas().draw(),this},g.prototype.data=function(l){return(0,c.set)(this.options,"data",l),this.isDataChanged=!0,this},g.prototype.source=function(l){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(l)},g.prototype.filter=function(l,f){return(0,c.isFunction)(f)?((0,c.set)(this.options,["filters",l],f),this):(!f&&(0,c.get)(this.options,["filters",l])&&delete this.options.filters[l],this)},g.prototype.axis=function(l,f){return(0,c.isBoolean)(l)?(0,c.set)(this.options,["axes"],l):(0,c.set)(this.options,["axes",l],f),this},g.prototype.legend=function(l,f){return(0,c.isBoolean)(l)?(0,c.set)(this.options,["legends"],l):(0,c.isString)(l)?(0,c.set)(this.options,["legends",l],f):(0,c.set)(this.options,["legends"],l),this},g.prototype.scale=function(l,f){var E=this;return(0,c.isString)(l)?(0,c.set)(this.options,["scales",l],f):(0,c.isObject)(l)&&(0,c.each)(l,function(D,z){(0,c.set)(E.options,["scales",z],D)}),this},g.prototype.tooltip=function(l){return(0,c.set)(this.options,"tooltip",l),this},g.prototype.annotation=function(){return this.getController("annotation")},g.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},g.prototype.coordinate=function(l,f){return(0,c.isString)(l)?(0,c.set)(this.options,"coordinate",{type:l,cfg:f}):(0,c.set)(this.options,"coordinate",l),this.coordinateController.update(this.options.coordinate),this.coordinateController},g.prototype.coord=function(l,f){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(l,f)},g.prototype.facet=function(l,f){this.facetInstance&&this.facetInstance.destroy();var E=hr(l);if(!E)throw new Error("facet '"+l+"' is not exist!");return this.facetInstance=new E(this,(0,d.__assign)((0,d.__assign)({},f),{type:l})),this},g.prototype.animate=function(l){return(0,c.set)(this.options,"animate",l),this},g.prototype.updateOptions=function(l){return this.clear(),(0,c.mix)(this.options,l),this.initOptions(),this},g.prototype.option=function(l,f){if(g.prototype[l])throw new Error(`Can't use built in variable name "`+l+'", please change another one.');return(0,c.set)(this.options,l,f),this},g.prototype.theme=function(l){return this.themeObject=(0,c.isObject)(l)?(0,c.deepMix)({},this.themeObject,l):ma(l),this},g.prototype.interaction=function(l,f){var E=this.interactions[l];E&&E.destroy();var D=Jn(l,this,f);return D&&(D.init(),this.interactions[l]=D),this},g.prototype.removeInteraction=function(l){var f=this.interactions[l];f&&(f.destroy(),this.interactions[l]=void 0)},g.prototype.changeData=function(l){this.isDataChanged=!0,this.emit(P.BEFORE_CHANGE_DATA),this.data(l),this.paint(!0);for(var f=this.views,E=0,D=f.length;E<D;E++){var z=f[E];z.changeData(l)}this.emit(P.AFTER_CHANGE_DATA)},g.prototype.createView=function(l){var f={data:this.options.data,scales:(0,c.clone)(this.options.scales),axes:(0,c.clone)(this.options.axes),coordinate:(0,c.clone)(this.coordinateController.getOption()),tooltip:(0,c.clone)(this.options.tooltip),legends:(0,c.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},E=new g((0,d.__assign)((0,d.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:_.BG}),middleGroup:this.middleGroup.addGroup({zIndex:_.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:_.FORE}),theme:this.themeObject,padding:this.padding},l),{options:(0,d.__assign)((0,d.__assign)({},f),(0,c.get)(l,"options",{}))}));return this.views.push(E),E},g.prototype.view=function(l){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(l)},g.prototype.removeView=function(l){var f=(0,c.remove)(this.views,function(E){return E===l})[0];return f&&f.destroy(),f},g.prototype.getCoordinate=function(){return this.coordinateInstance},g.prototype.getTheme=function(){return this.themeObject},g.prototype.getXScale=function(){var l=this.geometries[0];return l?l.getXScale():null},g.prototype.getYScales=function(){var l={};return this.geometries.map(function(f){var E=f.getYScale(),D=E.field;if(!l[D])return l[D]=!0,E})},g.prototype.getScalesByDim=function(l){for(var f=this.geometries,E={},D=0,z=f.length;D<z;D++){var U=f[D],lt=l==="x"?U.getXScale():U.getYScale();lt&&!E[lt.field]&&(E[lt.field]=lt)}return E},g.prototype.getScaleByField=function(l,f){var E=f||this.getScaleKey(l);return this.getRootView().scalePool.getScale(E)},g.prototype.getOptions=function(){return this.options},g.prototype.getData=function(){return this.filteredData},g.prototype.getLayer=function(l){return l===F.BG?this.backgroundGroup:l===F.MID?this.middleGroup:l===F.FORE?this.foregroundGroup:this.foregroundGroup},g.prototype.isPointInPlot=function(l){return be(this.getCoordinate(),l)},g.prototype.getLegendAttributes=function(){return(0,c.flatten)(this.geometries.map(function(l){return l.getGroupAttributes()}))},g.prototype.getGroupScales=function(){var l=this.geometries.map(function(f){return f.getGroupScales()});return fe((0,c.flatten)(l))},g.prototype.getCanvas=function(){return this.getRootView().canvas},g.prototype.getRootView=function(){for(var l=this;;){if(l.parent){l=l.parent;continue}break}return l},g.prototype.getXY=function(l){var f=this.getCoordinate(),E=this.getScalesByDim("x"),D=this.getScalesByDim("y"),z,U;if((0,c.each)(l,function(lt,Bt){E[Bt]&&(z=E[Bt].scale(lt)),D[Bt]&&(U=D[Bt].scale(lt))}),!(0,c.isNil)(z)&&!(0,c.isNil)(U))return f.convert({x:z,y:U})},g.prototype.getController=function(l){return(0,c.find)(this.controllers,function(f){return f.name===l})},g.prototype.showTooltip=function(l){var f=this.getController("tooltip");return f&&f.showTooltip(l),this},g.prototype.hideTooltip=function(){var l=this.getController("tooltip");return l&&l.hideTooltip(),this},g.prototype.lockTooltip=function(){var l=this.getController("tooltip");return l&&l.lockTooltip(),this},g.prototype.unlockTooltip=function(){var l=this.getController("tooltip");return l&&l.unlockTooltip(),this},g.prototype.isTooltipLocked=function(){var l=this.getController("tooltip");return l&&l.isTooltipLocked()},g.prototype.getTooltipItems=function(l){var f=this.getController("tooltip");return f?f.getTooltipItems(l):[]},g.prototype.getSnapRecords=function(l){for(var f=this.geometries,E=[],D=0,z=f.length;D<z;D++){var U=f[D],lt=U.dataArray;U.sort(lt);for(var Bt=void 0,Ut=0,$t=lt.length;Ut<$t;Ut++){var Kt=lt[Ut];Bt=co(l,Kt,U),Bt&&E.push(Bt)}}for(var ae=this.views,D=0,z=ae.length;D<z;D++){var ye=ae[D],Ae=ye.getSnapRecords(l);E=E.concat(Ae)}return E},g.prototype.getComponents=function(){for(var l=[],f=this.controllers,E=0,D=f.length;E<D;E++){var z=f[E];l=l.concat(z.getComponents())}return l},g.prototype.filterData=function(l){var f=this.options.filters;return(0,c.size)(f)===0?l:(0,c.filter)(l,function(E,D){var z=Object.keys(f);return z.every(function(U){var lt=f[U];return lt(E[U],E,D)})})},g.prototype.filterFieldData=function(l,f){var E=this.options.filters,D=(0,c.get)(E,l);return(0,c.isUndefined)(D)?f:f.filter(function(z,U){return D(z[l],z,U)})},g.prototype.adjustCoordinate=function(){var l=this.getCoordinate(),f=l.start,E=l.end,D=this.coordinateBBox.bl,z=this.coordinateBBox.tr;if((0,c.isEqual)(f,D)&&(0,c.isEqual)(E,z)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(D,z)},g.prototype.paint=function(l){this.renderDataRecursive(l),this.syncScale(),this.emit(P.BEFORE_PAINT),this.renderBackgroundStyleShape(),this.renderLayoutRecursive(l),this.renderPaintRecursive(l),this.emit(P.AFTER_PAINT),this.isDataChanged=!1},g.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var l=(0,c.get)(this.themeObject,"background");if(l){this.backgruondStyleRectShape||(this.backgruondStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{zIndex:-1}}));var f=this.viewBBox,E=f.x,D=f.y,z=f.width,U=f.height;this.backgruondStyleRectShape.attr({fill:l,x:E,y:D,width:z,height:U})}else this.backgruondStyleRectShape&&(this.backgruondStyleRectShape.remove(!0),this.backgruondStyleRectShape=void 0)}},g.prototype.renderLayoutRecursive=function(l){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(l),this.doLayout();var f=this.viewBBox,E=this.coordinateBBox;jo(this.padding)&&(this.autoPadding=[E.tl.y-f.tl.y,f.tr.x-E.tr.x,f.bl.y-E.bl.y,E.tl.x-f.tl.x]);for(var D=this.views,z=0,U=D.length;z<U;z++){var lt=D[z];lt.renderLayoutRecursive(l)}},g.prototype.renderPaintRecursive=function(l){if(this.limitInPlot){var f=this.middleGroup,E=ze(this.coordinateInstance),D=E.type,z=E.attrs;f.setClip({type:D,attrs:z})}this.paintGeometries(l),this.renderComponents(l);for(var U=this.views,lt=0,Bt=U.length;lt<Bt;lt++){var Ut=U[lt];Ut.renderPaintRecursive(l)}},g.prototype.createScale=function(l,f,E,D){var z=(0,c.get)(this.options.scales,[l]),U=(0,d.__assign)((0,d.__assign)({},z),E);return this.parent?this.parent.createScale(l,f,U,D):this.scalePool.createScale(l,f,U,D)},g.prototype.renderDataRecursive=function(l){this.doFilterData(),this.createCoordinate(),this.initGeometries(l),this.renderFacet(l);for(var f=this.views,E=0,D=f.length;E<D;E++){var z=f[E];z.renderDataRecursive(l)}},g.prototype.calculateViewBBox=function(){var l,f,E,D;if(this.parent){var z=this.parent.coordinateBBox;l=z.x,f=z.y,E=z.width,D=z.height}else l=0,f=0,E=this.canvas.get("width"),D=this.canvas.get("height");var U=this.region,lt=U.start,Bt=U.end,Ut=new tr(l+E*lt.x,f+D*lt.y,E*(Bt.x-lt.x),D*(Bt.y-lt.y));(!this.viewBBox||!this.viewBBox.isEqual(Ut))&&(this.viewBBox=new tr(l+E*lt.x,f+D*lt.y,E*(Bt.x-lt.x),D*(Bt.y-lt.y)),this.coordinateBBox=this.viewBBox)},g.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},g.prototype.initComponentController=function(){for(var l=this.usedControllers,f=0,E=l.length;f<E;f++){var D=l[f],z=Ho(D);z&&this.controllers.push(new z(this))}},g.prototype.createViewEvent=function(l){var f=l.shape,E=l.name,D=f?f.get("origin"):null,z=new go(this,l,D);return z.type=E,z},g.prototype.doPlotEvent=function(l){var f=l.type,E=l.x,D=l.y,z={x:E,y:D},U=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(U.includes(f)){var lt=this.isPointInPlot(z);if(lt){var Bt="plot:"+f;l.type=Bt,this.emit(Bt,l),(f==="mouseleave"||f==="touchend")&&(this.isPreMouseInPlot=!1)}f==="mousemove"||f==="touchmove"?(this.isPreMouseInPlot&&!lt?(f==="mousemove"&&(l.type=A.MOUSE_LEAVE,this.emit(A.MOUSE_LEAVE,l)),l.type=A.LEAVE,this.emit(A.LEAVE,l)):!this.isPreMouseInPlot&&lt&&(f==="mousemove"&&(l.type=A.MOUSE_ENTER,this.emit(A.MOUSE_ENTER,l)),l.type=A.ENTER,this.emit(A.ENTER,l)),this.isPreMouseInPlot=lt):(f==="mouseleave"||f==="touchend")&&this.isPreMouseInPlot&&(f==="mouseleave"&&(l.type=A.MOUSE_LEAVE,this.emit(A.MOUSE_LEAVE,l)),l.type=A.LEAVE,this.emit(A.LEAVE,l),this.isPreMouseInPlot=!1)}},g.prototype.doFilterData=function(){var l=this.options.data;this.filteredData=this.filterData(l)},g.prototype.initGeometries=function(l){this.createOrUpdateScales();for(var f=this.getCoordinate(),E=(0,c.get)(this.options,"scales",{}),D=this.geometries,z=0,U=D.length;z<U;z++){var lt=D[z];lt.scales=this.getGeometryScales();var Bt={coordinate:f,scaleDefs:E,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};l?lt.update(Bt):lt.init(Bt)}this.adjustScales()},g.prototype.createOrUpdateScales=function(){for(var l=this.getScaleFields(),f=this.getGroupedFields(),E=this.getOptions(),D=E.data,z=E.scales,U=z===void 0?{}:z,lt=this.filteredData,Bt=0,Ut=l.length;Bt<Ut;Bt++){var $t=l[Bt],Kt=U[$t],ae=this.getScaleKey($t);this.createScale($t,f.includes($t)?D:lt,Kt,ae),this.createdScaleKeys.set(ae,!0)}},g.prototype.syncScale=function(){this.getRootView().scalePool.sync()},g.prototype.getGeometryScales=function(){for(var l=this.getScaleFields(),f={},E=0;E<l.length;E++){var D=l[E];f[D]=this.getScaleByField(D)}return f},g.prototype.getScaleFields=function(){for(var l=[],f={},E=this.geometries,D=0;D<E.length;D++){var z=E[D],U=z.getScaleFields();fe(U,l,f)}return l},g.prototype.getGroupedFields=function(){for(var l=[],f={},E=this.geometries,D=0;D<E.length;D++){var z=E[D],U=z.getGroupFields();fe(U,l,f)}return l},g.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},g.prototype.adjustCategoryScaleRange=function(){var l=this,f=(0,d.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(z){return!!z}),E=this.getCoordinate(),D=this.options.scales;(0,c.each)(f,function(z){var U=z.field,lt=z.values,Bt=z.isCategory,Ut=z.isIdentity;if((Bt||Ut)&&lt&&!(0,c.get)(D,[U,"range"])){var $t=lt.length,Kt=void 0;if($t===1)Kt=[.5,1];else{var ae=1,ye=0;Rt(E)?E.isTransposed?(ae=(0,c.get)(l.theme,"widthRatio.multiplePie",1/1.3),ye=1/$t*ae,Kt=[ye/2,1-ye/2]):Kt=[0,1-1/$t]:(ye=1/$t/2,Kt=[ye,1-ye])}z.range=Kt}})},g.prototype.initComponents=function(l){for(var f=this.controllers,E=0;E<f.length;E++){var D=f[E];l?D.update():(D.clear(),D.render())}},g.prototype.doLayout=function(){this.layoutFunc(this)},g.prototype.createCoordinate=function(){var l=this.coordinateBBox.bl,f=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(l,f)},g.prototype.paintGeometries=function(l){for(var f=this.options.animate,E=this.getCoordinate(),D={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},z=this.geometries,U=0;U<z.length;U++){var lt=z[U];lt.coordinate=E,lt.canvasRegion=D,f||lt.animate(!1),lt.paint(l)}},g.prototype.renderComponents=function(l){for(var f=0;f<this.getComponents().length;f++){var E=this.getComponents()[f];E.component.render()}},g.prototype.renderFacet=function(l){this.facetInstance&&(l?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},g.prototype.initOptions=function(){for(var l=this.options,f=l.geometries,E=f===void 0?[]:f,D=l.interactions,z=D===void 0?[]:D,U=l.views,lt=U===void 0?[]:U,Bt=l.annotations,Ut=Bt===void 0?[]:Bt,$t=0;$t<E.length;$t++){var Kt=E[$t];this.createGeometry(Kt)}for(var ae=0;ae<z.length;ae++){var ye=z[ae],Ae=ye.type,$e=ye.cfg;this.interaction(Ae,$e)}for(var nr=0;nr<lt.length;nr++){var ir=lt[nr];this.createView(ir)}for(var _r=this.getController("annotation"),Gr=0;Gr<Ut.length;Gr++){var qr=Ut[Gr];_r.annotation(qr)}},g.prototype.createGeometry=function(l){var f=l.type,E=l.cfg,D=E===void 0?{}:E;if(this[f]){var z=this[f](D);(0,c.each)(l,function(U,lt){(0,c.isFunction)(z[lt])&&z[lt](U)})}},g.prototype.getScaleKey=function(l){return this.id+"-"+l},g}(Gt);function ue(m,g){Zo.prototype[m.toLowerCase()]=function(l){l===void 0&&(l={});var f=(0,d.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},l),E=new g(f);return this.geometries.push(E),E}}var wt=Zo,X=function(m){(0,d.__extends)(g,m);function g(l){var f=this,E=l.container,D=l.width,z=l.height,U=l.autoFit,lt=U===void 0?!1:U,Bt=l.padding,Ut=l.appendPadding,$t=l.renderer,Kt=$t===void 0?"canvas":$t,ae=l.pixelRatio,ye=l.localRefresh,Ae=ye===void 0?!0:ye,$e=l.visible,nr=$e===void 0?!0:$e,ir=l.defaultInteractions,_r=ir===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:ir,Gr=l.options,qr=l.limitInPlot,mn=l.theme,kn=(0,c.isString)(E)?document.getElementById(E):E,Rn=(0,W.Z)('<div style="position:relative;"></div>');kn.appendChild(Rn);var cn=nt(kn,lt,D,z),Vn=N(Kt),vi=new Vn.Canvas((0,d.__assign)({container:Rn,pixelRatio:ae,localRefresh:Ae},cn));return f=m.call(this,{parent:null,canvas:vi,backgroundGroup:vi.addGroup({zIndex:_.BG}),middleGroup:vi.addGroup({zIndex:_.MID}),foregroundGroup:vi.addGroup({zIndex:_.FORE}),padding:Bt,appendPadding:Ut,visible:nr,options:Gr,limitInPlot:qr,theme:mn})||this,f.onResize=(0,c.debounce)(function(){f.forceFit()},300),f.ele=kn,f.canvas=vi,f.width=cn.width,f.height=cn.height,f.autoFit=lt,f.localRefresh=Ae,f.renderer=Kt,f.wrapperElement=Rn,f.updateCanvasStyle(),f.bindAutoFit(),f.initDefaultInteractions(_r),f}return g.prototype.initDefaultInteractions=function(l){var f=this;(0,c.each)(l,function(E){f.interaction(E)})},g.prototype.changeSize=function(l,f){return this.width===l&&this.height===f?this:(this.width=l,this.height=f,this.canvas.changeSize(l,f),this.render(!0),this)},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),rt(this.wrapperElement),this.wrapperElement=null},g.prototype.changeVisible=function(l){return m.prototype.changeVisible.call(this,l),this.wrapperElement.style.display=l?"":"none",this},g.prototype.forceFit=function(){if(!this.destroyed){var l=nt(this.ele,!0,this.width,this.height),f=l.width,E=l.height;this.changeSize(f,E)}},g.prototype.updateCanvasStyle=function(){(0,$.Z)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},g.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},g.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},g}(wt),et=X,dt=function(){function m(g){this.visible=!0,this.components=[],this.view=g}return m.prototype.clear=function(){(0,c.each)(this.components,function(g){g.component.destroy()}),this.components=[]},m.prototype.destroy=function(){this.clear()},m.prototype.getComponents=function(){return this.components},m.prototype.changeVisible=function(g){this.visible!==g&&(this.components.forEach(function(l){g?l.component.show():l.component.hide()}),this.visible=g)},m}(),Ot=0,Qt=1/2,se=1/2,Me=.05,Te=function(){function m(g){var l=g.xField,f=g.yField,E=g.adjustNames,D=E===void 0?["x","y"]:E;this.adjustNames=D,this.xField=l,this.yField=f}return m.prototype.isAdjust=function(g){return this.adjustNames.indexOf(g)>=0},m.prototype.getAdjustRange=function(g,l,f){var E=this.yField,D=f.indexOf(l),z=f.length,U,lt;return!E&&this.isAdjust("y")?(U=0,lt=1):z>1?(U=f[D===0?0:D-1],lt=f[D===z-1?z-1:D+1],D!==0?U+=(l-U)/2:U-=(lt-l)/2,D!==z-1?lt-=(lt-l)/2:lt+=(l-f[z-2])/2):(U=l===0?0:l-.5,lt=l===0?1:l+.5),{pre:U,next:lt}},m.prototype.adjustData=function(g,l){var f=this,E=this.getDimValues(l);c.each(g,function(D,z){c.each(E,function(U,lt){f.adjustDim(lt,U,D,z)})})},m.prototype.groupData=function(g,l){return c.each(g,function(f){f[l]===void 0&&(f[l]=Ot)}),c.groupBy(g,l)},m.prototype.adjustDim=function(g,l,f,E){},m.prototype.getDimValues=function(g){var l=this,f=l.xField,E=l.yField,D={},z=[];if(f&&this.isAdjust("x")&&z.push(f),E&&this.isAdjust("y")&&z.push(E),z.forEach(function(lt){D[lt]=c.valuesOfKey(g,lt).sort(function(Bt,Ut){return Bt-Ut})}),!E&&this.isAdjust("y")){var U="y";D[U]=[Ot,1]}return D},m}(),Ne=Te,Je={},sr=function(m){return Je[m.toLowerCase()]},gr=function(m,g){if(sr(m))throw new Error("Adjust type '"+m+"' existed.");Je[m.toLowerCase()]=g},Ir=v(32447),tn=function(m){(0,Ir.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.cacheMap={},f.adjustDataArray=[],f.mergeData=[];var E=l.marginRatio,D=E===void 0?Qt:E,z=l.dodgeRatio,U=z===void 0?se:z,lt=l.dodgeBy,Bt=l.intervalPadding,Ut=l.dodgePadding,$t=l.xDimensionLength,Kt=l.groupNum,ae=l.defaultSize,ye=l.maxColumnWidth,Ae=l.minColumnWidth,$e=l.columnWidthRatio;return f.marginRatio=D,f.dodgeRatio=U,f.dodgeBy=lt,f.intervalPadding=Bt,f.dodgePadding=Ut,f.xDimensionLegenth=$t,f.groupNum=Kt,f.defaultSize=ae,f.maxColumnWidth=ye,f.minColumnWidth=Ae,f.columnWidthRatio=$e,f}return g.prototype.process=function(l){var f=c.clone(l),E=c.flatten(f),D=this.dodgeBy,z=D?c.group(E,D):f;return this.cacheMap={},this.adjustDataArray=z,this.mergeData=E,this.adjustData(z,E),this.adjustDataArray=[],this.mergeData=[],f},g.prototype.adjustDim=function(l,f,E,D){var z=this,U=this.getDistribution(l),lt=this.groupData(E,l);return c.each(lt,function(Bt,Ut){var $t;f.length===1?$t={pre:f[0]-1,next:f[0]+1}:$t=z.getAdjustRange(l,parseFloat(Ut),f),c.each(Bt,function(Kt){var ae=Kt[l],ye=U[ae],Ae=ye.indexOf(D);Kt[l]=z.getDodgeOffset($t,Ae,ye.length)})}),[]},g.prototype.getDodgeOffset=function(l,f,E){var D=this,z=D.dodgeRatio,U=D.marginRatio,lt=D.intervalPadding,Bt=D.dodgePadding,Ut=l.pre,$t=l.next,Kt=$t-Ut,ae;if(!c.isNil(lt)&&c.isNil(Bt)&&lt>=0){var ye=this.getIntervalOnlyOffset(E,f);ae=Ut+ye}else if(!c.isNil(Bt)&&c.isNil(lt)&&Bt>=0){var ye=this.getDodgeOnlyOffset(E,f);ae=Ut+ye}else if(!c.isNil(lt)&&!c.isNil(Bt)&&lt>=0&&Bt>=0){var ye=this.getIntervalAndDodgeOffset(E,f);ae=Ut+ye}else{var Ae=Kt*z/E,$e=U*Ae,ye=1/2*(Kt-E*Ae-(E-1)*$e)+((f+1)*Ae+f*$e)-1/2*Ae-1/2*Kt;ae=(Ut+$t)/2+ye}return ae},g.prototype.getIntervalOnlyOffset=function(l,f){var E=this,D=E.defaultSize,z=E.intervalPadding,U=E.xDimensionLegenth,lt=E.groupNum,Bt=E.dodgeRatio,Ut=E.maxColumnWidth,$t=E.minColumnWidth,Kt=E.columnWidthRatio,ae=z/U,ye=(1-(lt-1)*ae)/lt*Bt/(l-1),Ae=((1-ae*(lt-1))/lt-ye*(l-1))/l;if(Ae=c.isNil(Kt)?Ae:1/lt/l*Kt,!c.isNil(Ut)){var $e=Ut/U;Ae=Math.min(Ae,$e)}if(!c.isNil($t)){var nr=$t/U;Ae=Math.max(Ae,nr)}Ae=D?D/U:Ae,ye=((1-(lt-1)*ae)/lt-l*Ae)/(l-1);var ir=((1/2+f)*Ae+f*ye+1/2*ae)*lt-ae/2;return ir},g.prototype.getDodgeOnlyOffset=function(l,f){var E=this,D=E.defaultSize,z=E.dodgePadding,U=E.xDimensionLegenth,lt=E.groupNum,Bt=E.marginRatio,Ut=E.maxColumnWidth,$t=E.minColumnWidth,Kt=E.columnWidthRatio,ae=z/U,ye=1*Bt/(lt-1),Ae=((1-ye*(lt-1))/lt-ae*(l-1))/l;if(Ae=Kt?1/lt/l*Kt:Ae,!c.isNil(Ut)){var $e=Ut/U;Ae=Math.min(Ae,$e)}if(!c.isNil($t)){var nr=$t/U;Ae=Math.max(Ae,nr)}Ae=D?D/U:Ae,ye=(1-(Ae*l+ae*(l-1))*lt)/(lt-1);var ir=((1/2+f)*Ae+f*ae+1/2*ye)*lt-ye/2;return ir},g.prototype.getIntervalAndDodgeOffset=function(l,f){var E=this,D=E.intervalPadding,z=E.dodgePadding,U=E.xDimensionLegenth,lt=E.groupNum,Bt=D/U,Ut=z/U,$t=((1-Bt*(lt-1))/lt-Ut*(l-1))/l,Kt=((1/2+f)*$t+f*Ut+1/2*Bt)*lt-Bt/2;return Kt},g.prototype.getDistribution=function(l){var f=this.adjustDataArray,E=this.cacheMap,D=E[l];return D||(D={},c.each(f,function(z,U){var lt=c.valuesOfKey(z,l);lt.length||lt.push(0),c.each(lt,function(Bt){D[Bt]||(D[Bt]=[]),D[Bt].push(U)})}),E[l]=D),D},g}(Ne),Qr=tn;function En(m,g){return(g-m)*Math.random()+m}var Bn=function(m){(0,Ir.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.process=function(l){var f=c.clone(l),E=c.flatten(f);return this.adjustData(f,E),f},g.prototype.adjustDim=function(l,f,E){var D=this,z=this.groupData(E,l);return c.each(z,function(U,lt){return D.adjustGroup(U,l,parseFloat(lt),f)})},g.prototype.getAdjustOffset=function(l){var f=l.pre,E=l.next,D=(E-f)*Me;return En(f+D,E-D)},g.prototype.adjustGroup=function(l,f,E,D){var z=this,U=this.getAdjustRange(f,E,D);return c.each(l,function(lt){lt[f]=z.getAdjustOffset(U)}),l},g}(Ne),Nn=Bn,Zt=c.Cache,we=function(m){(0,Ir.__extends)(g,m);function g(l){var f=m.call(this,l)||this,E=l.adjustNames,D=E===void 0?["y"]:E,z=l.height,U=z===void 0?NaN:z,lt=l.size,Bt=lt===void 0?10:lt,Ut=l.reverseOrder,$t=Ut===void 0?!1:Ut;return f.adjustNames=D,f.height=U,f.size=Bt,f.reverseOrder=$t,f}return g.prototype.process=function(l){var f=this,E=f.yField,D=f.reverseOrder,z=E?this.processStack(l):this.processOneDimStack(l);return D?this.reverse(z):z},g.prototype.reverse=function(l){return l.slice(0).reverse()},g.prototype.processStack=function(l){var f=this,E=f.xField,D=f.yField,z=f.reverseOrder,U=z?this.reverse(l):l,lt=new Zt,Bt=new Zt;return U.map(function(Ut){return Ut.map(function($t){var Kt,ae=c.get($t,E,0),ye=c.get($t,[D]),Ae=ae.toString();if(ye=c.isArray(ye)?ye[1]:ye,!c.isNil(ye)){var $e=ye>=0?lt:Bt;$e.has(Ae)||$e.set(Ae,0);var nr=$e.get(Ae),ir=ye+nr;return $e.set(Ae,ir),(0,Ir.__assign)((0,Ir.__assign)({},$t),(Kt={},Kt[D]=[nr,ir],Kt))}return $t})})},g.prototype.processOneDimStack=function(l){var f=this,E=this,D=E.xField,z=E.height,U=E.reverseOrder,lt="y",Bt=U?this.reverse(l):l,Ut=new Zt;return Bt.map(function($t){return $t.map(function(Kt){var ae,ye=f.size,Ae=Kt[D],$e=ye*2/z;Ut.has(Ae)||Ut.set(Ae,$e/2);var nr=Ut.get(Ae);return Ut.set(Ae,nr+$e),(0,Ir.__assign)((0,Ir.__assign)({},Kt),(ae={},ae[lt]=nr,ae))})})},g}(Ne),_e=we,Ve=function(m){(0,Ir.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.process=function(l){var f=c.flatten(l),E=this,D=E.xField,z=E.yField,U=this.getXValuesMaxMap(f),lt=Math.max.apply(Math,Object.keys(U).map(function(Bt){return U[Bt]}));return c.map(l,function(Bt){return c.map(Bt,function(Ut){var $t,Kt,ae=Ut[z],ye=Ut[D];if(c.isArray(ae)){var Ae=(lt-U[ye])/2;return(0,Ir.__assign)((0,Ir.__assign)({},Ut),($t={},$t[z]=c.map(ae,function(nr){return Ae+nr}),$t))}var $e=(lt-ae)/2;return(0,Ir.__assign)((0,Ir.__assign)({},Ut),(Kt={},Kt[z]=[$e,ae+$e],Kt))})})},g.prototype.getXValuesMaxMap=function(l){var f=this,E=this,D=E.xField,z=E.yField,U=c.groupBy(l,function(lt){return lt[D]});return c.mapValues(U,function(lt){return f.getDimMaxValue(lt,z)})},g.prototype.getDimMaxValue=function(l,f){var E=c.map(l,function(z){return c.get(z,f,[])}),D=c.flatten(E);return Math.max.apply(Math,D)},g}(Ne),lr=Ve;gr("Dodge",Qr),gr("Jitter",Nn),gr("Stack",_e),gr("Symmetric",lr);var Or={};function on(m){return Or[m.toLowerCase()]}function Cn(m,g){Or[m.toLowerCase()]=g}var Li={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},ra={interval:function(m){return{enter:{animation:m.isRect?m.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:m.isPolar&&m.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},na={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(m){var g;return m.isRect?g=m.isTransposed?"grow-in-x":"grow-in-y":(g="grow-in-xy",m.isPolar&&m.isTransposed&&(g="wave-in")),{animation:g}},schema:function(m){var g;return m.isRect?g=m.isTransposed?"grow-in-x":"grow-in-y":g="grow-in-xy",{animation:g}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Ko(m,g){return{delay:(0,c.isFunction)(m.delay)?m.delay(g):m.delay,easing:(0,c.isFunction)(m.easing)?m.easing(g):m.easing,duration:(0,c.isFunction)(m.duration)?m.duration(g):m.duration,callback:m.callback}}function Hs(m,g,l){var f=ra[m];return f&&((0,c.isFunction)(f)&&(f=f(g)),f=(0,c.deepMix)({},Li,f),l)?f[l]:f}function yo(m,g,l){var f=(0,c.get)(m.get("origin"),"data",w),E=g.animation,D=Ko(g,f);if(E){var z=on(E);z&&z(m,D,l)}else m.animate(l.toAttrs,D)}function Jl(m,g,l,f,E){if(na[l]){var D=na[l](f),z=on((0,c.get)(D,"animation",""));if(z){var U=(0,d.__assign)((0,d.__assign)((0,d.__assign)({},Li.appear),D),g);m.stopAnimate(),z(m,U,{coordinate:f,minYPoint:E,toAttrs:null})}}}var ql=v(82614),Vf=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.states=[];var E=l.shapeFactory,D=l.container,z=l.offscreenGroup,U=l.visible,lt=U===void 0?!0:U;return f.shapeFactory=E,f.container=D,f.offscreenGroup=z,f.visible=lt,f}return g.prototype.draw=function(l,f){f===void 0&&(f=!1),this.model=l,this.data=l.data,this.shapeType=this.getShapeType(l),this.drawShape(l,f),this.visible===!1&&this.changeVisible(!1)},g.prototype.update=function(l){var f=this,E=f.shapeFactory,D=f.shape;if(!!D){this.model=l,this.data=l.data,this.shapeType=this.getShapeType(l),this.setShapeInfo(D,l);var z=this.getOffscreenGroup(),U=E.drawShape(this.shapeType,l,z);U.cfg.data=this.data,U.cfg.origin=l,this.syncShapeStyle(D,U,"",this.getAnimateCfg("update"))}},g.prototype.destroy=function(){var l=this,f=l.shapeFactory,E=l.shape;if(E){var D=this.getAnimateCfg("leave");D?yo(E,D,{coordinate:f.coordinate,toAttrs:(0,d.__assign)({},E.attr())}):E.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,m.prototype.destroy.call(this)},g.prototype.changeVisible=function(l){m.prototype.changeVisible.call(this,l),l?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(f){f.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(f){f.hide()}))},g.prototype.setState=function(l,f){var E=this,D=this,z=D.states,U=D.shapeFactory,lt=D.model,Bt=D.shape,Ut=D.shapeType,$t=z.indexOf(l);if(f){if($t>-1)return;z.push(l),(l==="active"||l==="selected")&&Bt.toFront()}else{if($t===-1)return;z.splice($t,1),(l==="active"||l==="selected")&&Bt.toBack()}var Kt=U.drawShape(Ut,lt,this.getOffscreenGroup());z.length?z.forEach(function(ye){E.syncShapeStyle(Bt,Kt,ye,null)}):this.syncShapeStyle(Bt,Kt,"reset",null),Kt.remove(!0);var ae={state:l,stateStatus:f,element:this,target:this.container};this.container.emit("statechange",ae),(0,ql.propagationDelegate)(this.shape,"statechange",ae)},g.prototype.clearStates=function(){var l=this,f=this.states;(0,c.each)(f,function(E){l.setState(E,!1)}),this.states=[]},g.prototype.hasState=function(l){return this.states.includes(l)},g.prototype.getStates=function(){return this.states},g.prototype.getData=function(){return this.data},g.prototype.getModel=function(){return this.model},g.prototype.getBBox=function(){var l=this,f=l.shape,E=l.labelShape,D={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return f&&(D=f.getCanvasBBox()),E&&E.forEach(function(z){var U=z.getCanvasBBox();D.x=Math.min(U.x,D.x),D.y=Math.min(U.y,D.y),D.minX=Math.min(U.minX,D.minX),D.minY=Math.min(U.minY,D.minY),D.maxX=Math.max(U.maxX,D.maxX),D.maxY=Math.max(U.maxY,D.maxY)}),D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D},g.prototype.getStatesStyle=function(){if(!this.statesStyle){var l=this,f=l.shapeType,E=l.geometry,D=l.shapeFactory,z=E.stateOption,U=D.defaultShapeType,lt=D.theme[f]||D.theme[U];this.statesStyle=(0,c.deepMix)({},lt,z)}return this.statesStyle},g.prototype.getStateStyle=function(l,f){var E=this.getStatesStyle(),D=(0,c.get)(E,[l,"style"],{}),z=D[f]||D;return(0,c.isFunction)(z)?z(this):z},g.prototype.getAnimateCfg=function(l){var f=this.animate;return f?f[l]:null},g.prototype.drawShape=function(l,f){f===void 0&&(f=!1);var E=this,D=E.shapeFactory,z=E.container,U=E.shapeType;if(this.shape=D.drawShape(U,l,z),this.shape){this.setShapeInfo(this.shape,l);var lt=this.shape.cfg.name;lt?(0,c.isString)(lt)&&(this.shape.cfg.name=["element",lt]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var Bt=f?"enter":"appear",Ut=this.getAnimateCfg(Bt);Ut&&yo(this.shape,Ut,{coordinate:D.coordinate,toAttrs:(0,d.__assign)({},this.shape.attr())})}},g.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var l=this.container.getGroupBase();this.offscreenGroup=new l({})}return this.offscreenGroup},g.prototype.setShapeInfo=function(l,f){var E=this;if(l.cfg.origin=f,l.cfg.element=this,l.isGroup()){var D=l.get("children");D.forEach(function(z){E.setShapeInfo(z,f)})}},g.prototype.syncShapeStyle=function(l,f,E,D,z){if(E===void 0&&(E=""),z===void 0&&(z=0),l.isGroup())for(var U=l.get("children"),lt=f.get("children"),Bt=0;Bt<U.length;Bt++)this.syncShapeStyle(U[Bt],lt[Bt],E,D,z+Bt);else{if(E&&E!=="reset"){var Ut=l.get("name");(0,c.isArray)(Ut)&&(Ut=Ut[1]);var $t=this.getStateStyle(E,Ut||z);f.attr($t)}var Kt=Qe(l,f);this.animate?D?yo(l,D,{coordinate:this.shapeFactory.coordinate,toAttrs:Kt,shapeModel:this.model}):E?(l.stopAnimate(),l.animate(Kt,{duration:300})):l.attr(Kt):l.attr(Kt)}},g.prototype.getShapeType=function(l){var f=(0,c.get)(l,"shape");return(0,c.isArray)(f)?f[0]:f},g}(Gt),Vs=Vf,Wf={},Di={};function Ws(m){return Wf[m.toLowerCase()]}function _o(m,g){Wf[m.toLowerCase()]=g}function Xi(m){return Di[m.toLowerCase()]}function ja(m,g){Di[m.toLowerCase()]=g}var jf=v(62029),js={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(m,g){var l=this.getShape(m);return l.getPoints?l.getPoints(g):this.getDefaultPoints(g)},getShape:function(m){var g=this[m]||this[this.defaultShapeType];return g.coordinate=this.coordinate,g},getDefaultPoints:function(){return[]},getMarker:function(m,g){var l=this.getShape(m);if(!l.getMarker){var f=this.defaultShapeType;l=this.getShape(f)}var E=this.theme,D=(0,c.get)(E,[m,"default"],{}),z=l.getMarker(g);return(0,c.deepMix)({},D,z)},drawShape:function(m,g,l){var f=this.getShape(m);return f.draw(g,l)}},tu={coordinate:null,parsePath:function(m){var g=this.coordinate,l=(0,jf.parsePathString)(m);return g.isPolar?l=je(g,l):l=Xe(g,l),l},parsePoint:function(m){var g=this.coordinate;return g.convert(m)},parsePoints:function(m){var g=this.coordinate;return m.map(function(l){return g.convert(l)})},draw:function(m,g){}},vs={};function Ia(m,g){var l=(0,c.upperFirst)(m),f=(0,d.__assign)((0,d.__assign)((0,d.__assign)({},js),g),{geometryType:m});return vs[l]=f,f}function yi(m,g,l){var f=(0,c.upperFirst)(m),E=vs[f],D=(0,d.__assign)((0,d.__assign)({},tu),l);return E[g]=D,D}function Us(m){var g=(0,c.upperFirst)(m);return vs[g]}function Zs(m,g,l){if(l===void 0&&(l={}),!g)return[m];var f=(0,c.groupToMap)(m,g),E=[];if(g.length===1&&l[g[0]])for(var D=l[g[0]],z=0,U=D;z<U.length;z++){var lt=U[z],Bt=f["_"+lt];Bt&&E.push(Bt)}else for(var Ut in f)if(f.hasOwnProperty(Ut)){var $t=f[Ut];E.push($t)}return E}function eu(m,g){return(0,c.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(l){return!(0,c.isEqual)(m[l],g[l])})}function qn(m){return(0,c.isArray)(m)?m:m.split("*")}function Ui(m,g){var l=[];return(0,c.each)(g,function(f,E){var D=E.split(" ")[0];D===m&&l.push(f)}),l}var Uf=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.type="base",f.attributes={},f.elements=[],f.elementsMap={},f.animateOption=!0,f.attributeOption={},f.lastElementsMap={},f.generatePoints=!1,f.beforeMappingData=null,f.adjusts={},f.idFields=[],f.hasSorted=!1,f.isCoordinateChanged=!1;var E=l.container,D=l.labelsContainer,z=l.coordinate,U=l.data,lt=l.sortable,Bt=lt===void 0?!1:lt,Ut=l.visible,$t=Ut===void 0?!0:Ut,Kt=l.theme,ae=l.scales,ye=ae===void 0?{}:ae,Ae=l.scaleDefs,$e=Ae===void 0?{}:Ae;return f.container=E,f.labelsContainer=D,f.coordinate=z,f.data=U,f.sortable=Bt,f.visible=$t,f.userTheme=Kt,f.scales=ye,f.scaleDefs=$e,f}return g.prototype.position=function(l){var f=l;(0,c.isPlainObject)(l)||(f={fields:qn(l)});var E=(0,c.get)(f,"fields");return E.length===1&&(E.unshift("1"),(0,c.set)(f,"fields",E)),(0,c.set)(this.attributeOption,"position",f),this},g.prototype.color=function(l,f){return this.createAttrOption("color",l,f),this},g.prototype.shape=function(l,f){return this.createAttrOption("shape",l,f),this},g.prototype.size=function(l,f){return this.createAttrOption("size",l,f),this},g.prototype.adjust=function(l){var f=l;return((0,c.isString)(l)||(0,c.isPlainObject)(l))&&(f=[l]),(0,c.each)(f,function(E,D){(0,c.isObject)(E)||(f[D]={type:E})}),this.adjustOption=f,this},g.prototype.style=function(l,f){if((0,c.isString)(l)){var E=qn(l);this.styleOption={fields:E,callback:f}}else{var D=l,E=D.fields,z=D.callback,U=D.cfg;E||z||U?this.styleOption=l:this.styleOption={cfg:l}}return this},g.prototype.tooltip=function(l,f){if((0,c.isString)(l)){var E=qn(l);this.tooltipOption={fields:E,callback:f}}else this.tooltipOption=l;return this},g.prototype.animate=function(l){return this.animateOption=l,this},g.prototype.label=function(l,f,E){if((0,c.isString)(l)){var D={},z=qn(l);D.fields=z,(0,c.isFunction)(f)?D.callback=f:(0,c.isPlainObject)(f)&&(D.cfg=f),E&&(D.cfg=E),this.labelOption=D}else this.labelOption=l;return this},g.prototype.state=function(l){return this.stateOption=l,this},g.prototype.init=function(l){l===void 0&&(l={}),this.setCfg(l),this.initAttributes(),this.processData(this.data),this.adjustScale()},g.prototype.update=function(l){l===void 0&&(l={});var f=l.data,E=l.isDataChanged,D=l.isCoordinateChanged,z=this,U=z.attributeOption,lt=z.lastAttributeOption;(0,c.isEqual)(U,lt)?f&&(E||!(0,c.isEqual)(f,this.data))?(this.setCfg(l),this.processData(f)):this.setCfg(l):this.init(l),this.adjustScale(),this.isCoordinateChanged=D},g.prototype.paint=function(l){var f=this;l===void 0&&(l=!1),this.animateOption&&(this.animateOption=(0,c.deepMix)({},Hs(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var E=this.getOffscreenGroup();E.clear();for(var D=this.beforeMappingData,z=this.beforeMapping(D),U=[],lt=0,Bt=z.length;lt<Bt;lt++){var Ut=z[lt],$t=this.mapping(Ut);U.push($t),this.createElements($t,lt,l)}if(this.canDoGroupAnimation(l)){var Kt=this.container,ae=this.type,ye=this.coordinate,Ae=(0,c.get)(this.animateOption,"appear"),$e=this.getYScale(),nr=ye.convert({x:0,y:$e.scale(this.getYMinValue())});Jl(Kt,Ae,ae,ye,nr)}this.labelOption&&this.renderLabels((0,c.flatten)(U),l),this.dataArray=U,(0,c.each)(this.lastElementsMap,function(ir){ir.animate=f.animateOption,ir.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,d.__assign)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},g.prototype.clear=function(){var l=this,f=l.container,E=l.geometryLabel,D=l.offscreenGroup;f&&f.clear(),E&&E.clear(),D&&D.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},g.prototype.destroy=function(){this.clear();var l=this.container;l.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,m.prototype.destroy.call(this)},g.prototype.getGroupScales=function(){return this.groupScales},g.prototype.getAttribute=function(l){return this.attributes[l]},g.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},g.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},g.prototype.getGroupAttributes=function(){var l=[];return(0,c.each)(this.attributes,function(f){C.includes(f.type)&&l.push(f)}),l},g.prototype.getDefaultValue=function(l){var f,E=this.getAttribute(l);return E&&(0,c.isEmpty)(E.scales)&&(f=E.values[0]),f},g.prototype.getAttributeValues=function(l,f){for(var E=[],D=l.scales,z=0,U=D.length;z<U;z++){var lt=D[z],Bt=lt.field;lt.isIdentity?E.push(lt.values):E.push(f[Bt])}return l.mapping.apply(l,E)},g.prototype.getAdjust=function(l){return this.adjusts[l]},g.prototype.getShapeMarker=function(l,f){var E=this.getShapeFactory();return E.getMarker(l,f)},g.prototype.getElementsBy=function(l){return this.elements.filter(function(f){return l(f)})},g.prototype.getElementId=function(l){l=(0,c.isArray)(l)?l[0]:l;var f=l[w];if(this.idFields.length){for(var E=f[this.idFields[0]],D=1;D<this.idFields.length;D++)E+="-"+f[this.idFields[D]];return E}var z=this.type,U=this.getXScale(),lt=this.getYScale(),Bt=U.field||"x",Ut=lt.field||"y",$t=f[Ut],Kt;U.type==="identity"?Kt=U.values[0]:Kt=f[Bt];var ae;z==="interval"||z==="schema"?ae=Kt:z==="line"||z==="area"||z==="path"?ae=z:ae=Kt+"-"+$t;for(var ye=this.groupScales,D=0,Ae=ye.length;D<Ae;D++){var $e=ye[D],nr=$e.field;ae=ae+"-"+f[nr]}var ir=this.getAdjust("dodge");if(ir){var _r=ir.dodgeBy;_r&&(ae=ae+"-"+f[_r])}return this.getAdjust("jitter")&&(ae=ae+"-"+l.x+"-"+l.y),ae},g.prototype.getScaleFields=function(){var l=[],f={},E=this,D=E.attributeOption,z=E.labelOption,U=E.tooltipOption;for(var lt in D)if(D.hasOwnProperty(lt)){var Bt=D[lt];Bt.fields?fe(Bt.fields,l,f):Bt.values&&fe(Bt.values,l,f)}return z&&z.fields&&fe(z.fields,l,f),(0,c.isObject)(U)&&U.fields&&fe(U.fields,l,f),l},g.prototype.changeVisible=function(l){m.prototype.changeVisible.call(this,l);for(var f=this.elements,E=0,D=f.length;E<D;E++){var z=f[E];z.changeVisible(l)}l?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},g.prototype.getGroupFields=function(){for(var l=[],f={},E=0,D=C.length;E<D;E++){var z=C[E],U=this.attributeOption[z];U&&U.fields&&fe(U.fields,l,f)}return l},g.prototype.getXYFields=function(){var l=this.attributeOption.position.fields,f=l[0],E=l[1];return[f,E]},g.prototype.getShapes=function(){return this.elements.map(function(l){return l.shape})},g.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var l=this.container.getGroupBase();this.offscreenGroup=new l({})}return this.offscreenGroup},g.prototype.sort=function(l){if(!this.hasSorted)for(var f=this.getXScale(),E=f.field,D=0;D<l.length;D++){var z=l[D];z.sort(function(U,lt){return f.translate(U[w][E])-f.translate(lt[w][E])})}this.hasSorted=!0},g.prototype.adjustScale=function(){var l=this.getYScale();l&&this.getAdjust("stack")&&this.updateStackRange(l,this.beforeMappingData)},g.prototype.getShapeFactory=function(){var l=this.shapeType;if(!!Us(l))return this.shapeFactory||(this.shapeFactory=(0,c.clone)(Us(l))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[l]||{},this.shapeFactory},g.prototype.createShapePointsCfg=function(l){var f=this.getXScale(),E=this.getYScale(),D=this.normalizeValues(l[f.field],f),z;return E?z=this.normalizeValues(l[E.field],E):z=l.y?l.y:.1,{x:D,y:z,y0:E?E.scale(this.getYMinValue()):void 0}},g.prototype.createElement=function(l,f){f===void 0&&(f=!1);var E=this.container,D=this.getDrawCfg(l),z=this.getShapeFactory(),U=new Vs({shapeFactory:z,container:E,offscreenGroup:this.getOffscreenGroup()});return U.animate=this.animateOption,U.geometry=this,U.draw(D,f),U},g.prototype.getDrawCfg=function(l){var f=l[w],E={mappingData:l,data:f,x:l.x,y:l.y,color:l.color,size:l.size,isInCircle:this.coordinate.isPolar},D=l.shape;!D&&this.getShapeFactory()&&(D=this.getShapeFactory().defaultShapeType),E.shape=D;var z=this.theme.geometries[this.shapeType];E.defaultStyle=(0,c.get)(z,[D,"default"],{}).style;var U=this.styleOption;return U&&(E.style=this.getStyleCfg(U,f)),this.generatePoints&&(E.points=l.points,E.nextPoints=l.nextPoints),E},g.prototype.createElements=function(l,f,E){E===void 0&&(E=!1);for(var D=this,z=D.lastElementsMap,U=D.elementsMap,lt=D.elements,Bt=0,Ut=l.length;Bt<Ut;Bt++){var $t=l[Bt],Kt=this.getElementId($t);U[Kt]&&(Kt=Kt+"-"+f+"-"+Bt);var ae=z[Kt];if(!ae)ae=this.createElement($t,E);else{var ye=this.getDrawCfg($t),Ae=ae.getModel();(this.isCoordinateChanged||eu(ye,Ae))&&(ae.animate=this.animateOption,ae.update(ye)),delete z[Kt]}lt.push(ae),U[Kt]=ae}return lt},g.prototype.getLabelType=function(){var l=this,f=l.labelOption,E=l.coordinate,D=l.type,z=E.type,U=(0,c.get)(f,["cfg","type"]);return U||(z==="polar"?U="polar":z==="theta"?U="pie":D==="interval"||D==="polygon"?U="interval":U="base"),U},g.prototype.getYMinValue=function(){var l=this.getYScale(),f=l.min,E=l.max,D;return f>=0?D=f:E<=0?D=E:D=0,D},g.prototype.createAttrOption=function(l,f,E){if((0,c.isNil)(f)||(0,c.isObject)(f))(0,c.isObject)(f)&&(0,c.isEqual)(Object.keys(f),["values"])?(0,c.set)(this.attributeOption,l,{fields:f.values}):(0,c.set)(this.attributeOption,l,f);else{var D={};(0,c.isNumber)(f)?D.values=[f]:D.fields=qn(f),E&&((0,c.isFunction)(E)?D.callback=E:D.values=E),(0,c.set)(this.attributeOption,l,D)}},g.prototype.initAttributes=function(){var l=this,f=this,E=f.attributes,D=f.attributeOption,z=f.theme,U=f.shapeType;this.groupScales=[];var lt={},Bt=function(Kt){if(D.hasOwnProperty(Kt)){var ae=D[Kt];if(!ae)return{value:void 0};var ye=(0,d.__assign)({},ae),Ae=ye.callback,$e=ye.values,nr=ye.fields,ir=nr===void 0?[]:nr,_r=ir.map(function(qr){var mn=l.scales[qr];return mn.isCategory&&!lt[qr]&&C.includes(Kt)&&(l.groupScales.push(mn),lt[qr]=!0),mn});ye.scales=_r,Kt!=="position"&&_r.length===1&&_r[0].type==="identity"?ye.values=_r[0].values:!Ae&&!$e&&(Kt==="size"?ye.values=z.sizes:Kt==="shape"?ye.values=z.shapes[U]||[]:Kt==="color"&&(_r.length?ye.values=_r[0].values.length<=10?z.colors10:z.colors20:ye.values=z.colors10));var Gr=(0,Q.getAttribute)(Kt);E[Kt]=new Gr(ye)}};for(var Ut in D){var $t=Bt(Ut);if(typeof $t=="object")return $t.value}},g.prototype.processData=function(l){this.hasSorted=!1;for(var f=this.getAttribute("position").scales,E=f.filter(function(qr){return qr.isCategory}),D=this.groupData(l),z=[],U=0,lt=D.length;U<lt;U++){for(var Bt=D[U],Ut=[],$t=0,Kt=Bt.length;$t<Kt;$t++){var ae=Bt[$t],ye={};for(var Ae in ae)ye[Ae]=ae[Ae];ye[w]=ae;for(var $e=0,nr=E;$e<nr.length;$e++){var ir=nr[$e],_r=ir.field;ye[_r]=ir.translate(ye[_r])}Ut.push(ye)}z.push(Ut)}var Gr=this.adjustData(z);return this.beforeMappingData=Gr,Gr},g.prototype.adjustData=function(l){var f=this.adjustOption,E=l;if(f)for(var D=this.getXScale(),z=this.getYScale(),U=D.field,lt=z?z.field:null,Bt=0,Ut=f.length;Bt<Ut;Bt++){var $t=f[Bt],Kt=(0,d.__assign)({xField:U,yField:lt},$t),ae=$t.type;if(ae==="dodge"){var ye=[];if(D.isCategory||D.type==="identity")ye.push("x");else if(!z)ye.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Kt.adjustNames=ye,Kt.dodgeRatio=this.theme.columnWidthRatio}else if(ae==="stack"){var Ae=this.coordinate;if(!z){Kt.height=Ae.getHeight();var $e=this.getDefaultValue("size")||3;Kt.size=$e}!Ae.isTransposed&&(0,c.isNil)(Kt.reverseOrder)&&(Kt.reverseOrder=!0)}var nr=sr(ae),ir=new nr(Kt);E=ir.process(E),this.adjusts[ae]=ir}return E},g.prototype.groupData=function(l){for(var f=this.getGroupScales(),E=this.scaleDefs,D={},z=[],U=0;U<f.length;U++){var lt=f[U],Bt=lt.field;z.push(Bt),(0,c.get)(E,[Bt,"values"])&&(D[Bt]=E[Bt].values)}return Zs(l,z,D)},g.prototype.updateStackRange=function(l,f){for(var E=(0,c.flatten)(f),D=l.field,z=l.min,U=l.max,lt=0;lt<E.length;lt++){var Bt=E[lt],Ut=Math.min.apply(null,Bt[D]),$t=Math.max.apply(null,Bt[D]);Ut<z&&(z=Ut),$t>U&&(U=$t)}var Kt=this.scaleDefs,ae={};z<l.min&&!(0,c.get)(Kt,[D,"min"])&&(ae.min=z),U>l.max&&!(0,c.get)(Kt,[D,"max"])&&(ae.max=U),l.change(ae)},g.prototype.beforeMapping=function(l){var f=l;if(this.sortable&&this.sort(f),this.generatePoints)for(var E=0,D=f.length;E<D;E++){var z=f[E];this.generateShapePoints(z);var U=f[E+1];U&&(this.generateShapePoints(U),z[0].nextPoints=U[0].points)}return f},g.prototype.generateShapePoints=function(l){for(var f=this.getShapeFactory(),E=this.getAttribute("shape"),D=0;D<l.length;D++){var z=l[D],U=this.createShapePointsCfg(z),lt=E?this.getAttributeValues(E,z):null,Bt=f.getShapePoints(lt,U);z.points=Bt}},g.prototype.normalizeValues=function(l,f){var E=[];if((0,c.isArray)(l))for(var D=0;D<l.length;D++){var z=l[D];E.push(f.scale(z))}else E=f.scale(l);return E},g.prototype.mapping=function(l){for(var f=this.attributes,E=[],D=0;D<l.length;D++){var z=l[D],U={_origin:z[w],points:z.points,nextPoints:z.nextPoints};for(var lt in f)if(f.hasOwnProperty(lt)){var Bt=f[lt],Ut=Bt.names,$t=this.getAttributeValues(Bt,z);if(Ut.length>1)for(var Kt=0;Kt<$t.length;Kt+=1){var ae=$t[Kt],ye=Ut[Kt];U[ye]=(0,c.isArray)(ae)&&ae.length===1?ae[0]:ae}else U[Ut[0]]=$t.length===1?$t[0]:$t}this.convertPoint(U),E.push(U)}return E},g.prototype.convertPoint=function(l){var f=l.x,E=l.y,D,z,U,lt=this.coordinate;if((0,c.isArray)(f)&&(0,c.isArray)(E)){D=[],z=[];for(var Bt=0,Ut=0,$t=f.length,Kt=E.length;Bt<$t&&Ut<Kt;Bt+=1,Ut+=1)U=lt.convert({x:f[Bt],y:E[Ut]}),D.push(U.x),z.push(U.y)}else if((0,c.isArray)(E)){z=[];for(var ae=0;ae<E.length;ae++){var ye=E[ae];U=lt.convert({x:f,y:ye}),D&&D!==U.x?((0,c.isArray)(D)||(D=[D]),D.push(U.x)):D=U.x,z.push(U.y)}}else if((0,c.isArray)(f)){D=[];for(var ae=0;ae<f.length;ae++){var Ae=f[ae];U=lt.convert({x:Ae,y:E}),z&&z!==U.y?((0,c.isArray)(z)||(z=[z]),z.push(U.y)):z=U.y,D.push(U.x)}}else{var $e=lt.convert({x:f,y:E});D=$e.x,z=$e.y}l.x=D,l.y=z},g.prototype.getStyleCfg=function(l,f){var E=l.fields,D=E===void 0?[]:E,z=l.callback,U=l.cfg;if(U)return U;var lt=D.map(function(Bt){return f[Bt]});return z.apply(void 0,lt)},g.prototype.setCfg=function(l){var f=this,E=l.coordinate,D=l.data,z=l.theme,U=l.scaleDefs;E&&(this.coordinate=E),D&&(this.data=D),U&&(this.scaleDefs=U,this.idFields=[],(0,c.each)(U,function(lt,Bt){lt&&lt.key&&f.idFields.push(Bt)})),z&&(this.theme=this.userTheme?(0,c.deepMix)({},z,this.userTheme):z)},g.prototype.renderLabels=function(l,f){f===void 0&&(f=!1);var E=this.geometryLabel;if(!E){var D=this.getLabelType(),z=Ws(D);E=new z(this),this.geometryLabel=E}E.render(l,f);var U=E.labelsRenderer.shapesMap;(0,c.each)(this.elementsMap,function(lt,Bt){var Ut=Ui(Bt,U);if(Ut.length){lt.labelShape=Ut;for(var $t=0;$t<Ut.length;$t++)for(var Kt=Ut[$t],ae=Kt.getChildren(),ye=0;ye<ae.length;ye++){var Ae=ae[ye];Ae.cfg.name=["element","label"],Ae.cfg.element=lt}}})},g.prototype.canDoGroupAnimation=function(l){return!l&&this.animateOption&&((0,c.get)(this.animateOption,"appear")===void 0||(0,c.get)(this.animateOption,"appear")&&(0,c.get)(this.animateOption,["appear","animation"])===void 0)},g}(Gt),Ua=Uf,ds=Qn.transform;function Ks(m,g,l){var f=ds(m.getMatrix(),[["t",g,l]]);m.setMatrix(f)}function ru(m,g){var l=m.attr(),f=l.x,E=l.y,D=ds(m.getMatrix(),[["t",-f,-E],["r",g],["t",f,E]]);m.setMatrix(D)}function up(){return[1,0,0,0,1,0,0,0,1]}function Zf(m,g){var l=m.getBBox(),f=(l.minX+l.maxX)/2,E=(l.minY+l.maxY)/2;m.applyToMatrix([f,E,1]);var D=ds(m.getMatrix(),[["t",-f,-E],["s",g,g],["t",f,E]]);m.setMatrix(D)}var nu=function(){function m(g){this.shapesMap={},this.lastShapesMap={};var l=g.layout,f=g.container;this.layout=l,this.container=f}return m.prototype.render=function(g,l,f){var E=this;f===void 0&&(f=!1),this.shapesMap={};var D=this.container,z=this.createOffscreenGroup();if(g.length){for(var U=0,lt=g;U<lt.length;U++){var Bt=lt[U];Bt&&this.renderLabel(Bt,z)}this.doLayout(g,l),this.renderLabelLine(g),this.adjustLabel(g)}var Ut=this.lastShapesMap,$t=this.shapesMap;(0,c.each)($t,function(Kt,ae){if(Kt.destroyed)delete $t[ae];else{if(Ut[ae]){var ye=Kt.get("data"),Ae=Kt.get("origin"),$e=Kt.get("coordinate"),nr=Ut[ae],ir=Kt.get("animateCfg");nr.set("data",ye),nr.set("origin",Ae),nr.set("animateCfg",ir),nr.set("coordinate",$e);var _r=(0,c.get)(ir,"update"),Gr=nr.getChildren();Kt.getChildren().map(function(mn,kn){var Rn=Gr[kn];Rn.set("data",ye),Rn.set("origin",Ae),Rn.set("animateCfg",ir),Rn.set("coordinate",$e);var cn=Qe(Rn,mn);_r?yo(Rn,_r,{toAttrs:cn,coordinate:$e}):Rn.attr(cn)}),E.shapesMap[ae]=nr}else{D.add(Kt);var qr=(0,c.get)(Kt.get("animateCfg"),f?"enter":"appear");qr&&yo(Kt,qr,{toAttrs:(0,d.__assign)({},Kt.attr()),coordinate:Kt.get("coordinate")})}delete Ut[ae]}}),(0,c.each)(Ut,function(Kt){var ae=(0,c.get)(Kt.get("animateCfg"),"leave");ae?yo(Kt,ae,{toAttrs:null,coordinate:Kt.get("coordinate")}):Kt.remove(!0)}),this.lastShapesMap=$t,z.destroy()},m.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},m.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},m.prototype.renderLabel=function(g,l){var f=g.id,E=g.data,D=g.mappingData,z=g.coordinate,U=g.animate,lt=g.content,Bt={id:f,data:E,origin:D,coordinate:z},Ut=l.addGroup((0,d.__assign)({name:"label",animateCfg:this.animate===!1||U===null||U===!1?!1:(0,c.deepMix)({},this.animate,U)},Bt)),$t;if(lt.isGroup&&lt.isGroup()||lt.isShape&&lt.isShape()){var Kt=lt.getCanvasBBox(),ae=Kt.width,ye=Kt.height,Ae=(0,c.get)(g,"textAlign","left"),$e=g.x,nr=g.y-ye/2;Ae==="center"?$e=$e-ae/2:(Ae==="right"||Ae==="end")&&($e=$e-ae),Ks(lt,$e,nr),$t=lt,Ut.add(lt)}else $t=Ut.addShape("text",(0,d.__assign)({attrs:(0,d.__assign)({x:g.x,y:g.y,textAlign:g.textAlign,textBaseline:(0,c.get)(g,"textBaseline","middle"),text:g.content},g.style)},Bt));g.rotate&&ru($t,g.rotate),this.shapesMap[f]=Ut},m.prototype.doLayout=function(g,l){var f=this;if(this.layout){var E=(0,c.isArray)(this.layout)?this.layout:[this.layout];(0,c.each)(E,function(D){var z=Xi((0,c.get)(D,"type",""));if(z){var U=[],lt=[];(0,c.each)(f.shapesMap,function(Bt,Ut){U.push(Bt),lt.push(l[Ut])}),z(g,U,lt,f.region,D.cfg)}})}},m.prototype.renderLabelLine=function(g){var l=this;(0,c.each)(g,function(f){var E=(0,c.get)(f,"coordinate");if(!(!f||!E)){var D=E.getCenter(),z=E.getRadius();if(!!f.labelLine){var U=(0,c.get)(f,"labelLine",{}),lt=f.id,Bt=U.path;if(!Bt){var Ut=ce(D.x,D.y,z,f.angle);Bt=[["M",Ut.x,Ut.y],["L",f.x,f.y]]}var $t=l.shapesMap[lt];$t.destroyed||$t.addShape("path",{capture:!1,attrs:(0,d.__assign)({path:Bt,stroke:f.color?f.color:(0,c.get)(f,["style","fill"],"#000"),fill:null},U.style),id:lt,origin:f.mappingData,data:f.data,coordinate:f.coordinate})}}})},m.prototype.createOffscreenGroup=function(){var g=this.container,l=g.getGroupBase(),f=new l({});return f},m.prototype.adjustLabel=function(g){var l=this;(0,c.each)(g,function(f){if(f){var E=f.id,D=l.shapesMap[E];if(!D.destroyed){var z=D.find(function(U){return U.get("type")==="text"});z&&(f.offsetX&&z.attr("x",z.attr("x")+f.offsetX),f.offsetY&&z.attr("y",z.attr("y")+f.offsetY))}}})},m}(),An=nu;function Kf(m){var g=0;return(0,c.each)(m,function(l){g+=l}),g/m.length}var $f=function(){function m(g){this.geometry=g}return m.prototype.getLabelItems=function(g){var l=this,f=[],E=this.getLabelCfgs(g);return(0,c.each)(g,function(D,z){var U=E[z];if(!U||(0,c.isNil)(D.x)||(0,c.isNil)(D.y)){f.push(null);return}var lt=(0,c.isArray)(U.content)?U.content:[U.content];U.content=lt;var Bt=lt.length;(0,c.each)(lt,function(Ut,$t){if((0,c.isNil)(Ut)||Ut===""){f.push(null);return}var Kt=(0,d.__assign)((0,d.__assign)({},U),l.getLabelPoint(U,D,$t));Kt.textAlign||(Kt.textAlign=l.getLabelAlign(Kt,$t,Bt)),Kt.offset<=0&&(Kt.labelLine=null),f.push(Kt)})}),f},m.prototype.render=function(g,l){l===void 0&&(l=!1);var f=this.getLabelItems(g),E=this.getLabelsRenderer(),D=this.getGeometryShapes();E.render(f,D,l)},m.prototype.clear=function(){var g=this.labelsRenderer;g&&g.clear()},m.prototype.destroy=function(){var g=this.labelsRenderer;g&&g.destroy(),this.labelsRenderer=null},m.prototype.getCoordinate=function(){return this.geometry.coordinate},m.prototype.getDefaultLabelCfg=function(){return(0,c.get)(this.geometry.theme,"labels",{})},m.prototype.setLabelPosition=function(g,l,f,E){},m.prototype.getDefaultOffset=function(g){var l=this.getCoordinate(),f=this.getOffsetVector(g);return l.isTransposed?f[0]:f[1]},m.prototype.getLabelOffset=function(g,l,f){var E=this.getDefaultOffset(g.offset),D=this.getCoordinate(),z=D.isTransposed,U=z?"x":"y",lt=z?1:-1,Bt={x:0,y:0};return l>0||f===1?Bt[U]=E*lt:Bt[U]=E*lt*-1,Bt},m.prototype.getLabelPoint=function(g,l,f){var E=this.getCoordinate(),D=g.content.length;function z(Ae,$e){var nr=Ae;return(0,c.isArray)(nr)&&(g.content.length===1?nr.length<=2?nr=nr[Ae.length-1]:nr=Kf(nr):nr=nr[$e]),nr}var U={content:g.content[f],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(l&&this.geometry.type==="polygon"){var lt=Ue(l.x,l.y);U.x=lt[0],U.y=lt[1]}else U.x=z(l.x,f),U.y=z(l.y,f);var Bt=(0,c.isArray)(l.shape)?l.shape[0]:l.shape;if(Bt==="funnel"||Bt==="pyramid"){var Ut=(0,c.get)(l,"nextPoints"),$t=(0,c.get)(l,"points");if(Ut){var Kt=E.convert($t[1]),ae=E.convert(Ut[1]);U.x=(Kt.x+ae.x)/2,U.y=(Kt.y+ae.y)/2}else if(Bt==="pyramid"){var Kt=E.convert($t[1]),ae=E.convert($t[2]);U.x=(Kt.x+ae.x)/2,U.y=(Kt.y+ae.y)/2}}g.position&&this.setLabelPosition(U,l,f,g.position);var ye=this.getLabelOffset(g,f,D);return U.start={x:U.x,y:U.y},U.x+=ye.x,U.y+=ye.y,U.color=l.color,U},m.prototype.getLabelAlign=function(g,l,f){var E="center",D=this.getCoordinate();if(D.isTransposed){var z=this.getDefaultOffset(g.offset);z<0?E="right":z===0?E="center":E="left",f>1&&l===0&&(E==="right"?E="left":E==="left"&&(E="right"))}return E},m.prototype.getLabelId=function(g){var l=this.geometry,f=l.type,E=l.getXScale(),D=l.getYScale(),z=g[w],U=l.getElementId(g);return f==="line"||f==="area"?U+=" "+z[E.field]:f==="path"&&(U+=" "+z[E.field]+"-"+z[D.field]),U},m.prototype.getLabelsRenderer=function(){var g=this.geometry,l=g.labelsContainer,f=g.labelOption,E=g.canvasRegion,D=g.animateOption,z=this.geometry.coordinate,U=this.labelsRenderer;return U||(U=new An({container:l,layout:(0,c.get)(f,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=U),U.region=E,U.animate=D?Hs("label",z):!1,U},m.prototype.getLabelCfgs=function(g){var l=this,f=this.geometry,E=this.getDefaultLabelCfg(),D=f.type,z=f.theme,U=f.labelOption,lt=f.scales,Bt=f.coordinate,Ut=U,$t=Ut.fields,Kt=Ut.callback,ae=Ut.cfg,ye=$t.map(function($e){return lt[$e]}),Ae=[];return(0,c.each)(g,function($e,nr){var ir=$e[w],_r=l.getLabelText(ir,ye),Gr;if(Kt){var qr=$t.map(function(Rn){return ir[Rn]});if(Gr=Kt.apply(void 0,qr),(0,c.isNil)(Gr)){Ae.push(null);return}}var mn=(0,d.__assign)((0,d.__assign)({id:l.getLabelId($e),data:ir,mappingData:$e,coordinate:Bt},ae),Gr),kn=mn.content;(0,c.isFunction)(kn)?mn.content=kn(ir,$e,nr):(0,c.isUndefined)(kn)&&(mn.content=_r[0]),(0,c.isFunction)(mn.position)&&(mn.position=mn.position(ir,$e,nr)),D==="polygon"||mn.offset<0&&!["line","point","path"].includes(D)?mn=(0,c.deepMix)({},E,z.innerLabels,mn):mn=(0,c.deepMix)({},E,z.labels,mn),Ae.push(mn)}),Ae},m.prototype.getLabelText=function(g,l){var f=[];return(0,c.each)(l,function(E){var D=g[E.field];(0,c.isArray)(D)?D=D.map(function(z){return E.getText(z)}):D=E.getText(D),(0,c.isNil)(D)||D===""?f.push(null):f.push(D)}),f},m.prototype.getOffsetVector=function(g){g===void 0&&(g=0);var l=this.getCoordinate();return l.isTransposed?l.applyMatrix(g,0):l.applyMatrix(0,g)},m.prototype.getGeometryShapes=function(){var g=this.geometry,l={};return(0,c.each)(g.elementsMap,function(f,E){l[E]=f.shape}),(0,c.each)(g.getOffscreenGroup().getChildren(),function(f){var E=g.getElementId(f.get("origin").mappingData);l[E]=f}),l},m}(),un=$f,Qf=v(15451),$o="4.0.15",mo={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},ei={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},li=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Jf=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],iu={backgroundColor:"#141414",brandColor:li[0],paletteQualitative10:li,paletteQualitative20:Jf,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
  "Noto Color Emoji"`,axisLineBorderColor:ei[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:ei[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:ei[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:ei[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:ei[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:ei[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:ei[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:li[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:ei[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:ei[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:ei[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:mo[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:mo[25],annotationArcBorderColor:ei[15],annotationArcBorder:.5,annotationLineBorderColor:ei[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:ei[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:mo[95],annotationTextBorder:1.5,annotationRegionFillColor:ei[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:ei[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:ei[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:ei[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:mo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:ei[25],pointFillColor:li[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:mo[100],pointBorderOpacity:1,pointActiveBorderColor:ei[100],pointSelectedBorder:2,pointSelectedBorderColor:ei[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:li[0],hollowPointBorderOpacity:.95,hollowPointFillColor:mo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:ei[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:ei[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:li[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:li[0],areaFillOpacity:.25,areaActiveFillColor:li[0],areaActiveFillOpacity:.5,areaSelectedFillColor:li[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:li[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:ei[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:ei[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:li[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:ei[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:ei[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:li[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:mo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:ei[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:ei[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3},$s=v(69813),qf=v(19634);function Qs(m){return m?!1:m==null||isNaN(m)}function au(m){if((0,c.isArray)(m))return Qs(m[1].y);var g=m.y;return(0,c.isArray)(g)?Qs(g[0]):Qs(g)}function Js(m,g,l){if(g===void 0&&(g=!1),l===void 0&&(l=!0),!m.length||m.length===1&&!l)return[];if(g){for(var f=[],E=0,D=m.length;E<D;E++){var z=m[E];au(z)||f.push(z)}return[f]}for(var U=[],lt=[],E=0,D=m.length;E<D;E++){var z=m[E];au(z)?lt.length&&(lt.length===1&&!l||U.push(lt),lt=[]):lt.push(z)}return lt.length&&U.push(lt),U}function Oi(m,g,l,f){f===void 0&&(f="");var E=m.style,D=E===void 0?{}:E,z=m.defaultStyle,U=m.color,lt=m.size,Bt=(0,d.__assign)((0,d.__assign)({},z),D);return U&&(g&&(D.stroke||(Bt.stroke=U)),l&&(D.fill||(Bt.fill=U))),f&&(0,c.isNil)(D[f])&&!(0,c.isNil)(lt)&&(Bt[f]=lt),Bt}function Qo(m){var g=m.x,l=(0,c.isArray)(m.y)?m.y:[m.y];return l.map(function(f,E){return{x:(0,c.isArray)(g)?g[E]:g,y:f}})}var hp={line:function(m,g,l){return[["M",m-l,g],["L",m+l,g]]},dot:function(m,g,l){return[["M",m-l,g],["L",m+l,g]]},dash:function(m,g,l){return[["M",m-l,g],["L",m+l,g]]},smooth:function(m,g,l){return[["M",m-l,g],["A",l/2,l/2,0,1,1,m,g],["A",l/2,l/2,0,1,0,m+l,g]]},hv:function(m,g,l){return[["M",m-l-1,g-2.5],["L",m,g-2.5],["L",m,g+2.5],["L",m+l+1,g+2.5]]},vh:function(m,g,l){return[["M",m-l-1,g+2.5],["L",m,g+2.5],["L",m,g-2.5],["L",m+l+1,g-2.5]]},hvh:function(m,g,l){return[["M",m-(l+1),g+2.5],["L",m-l/2,g+2.5],["L",m-l/2,g-2.5],["L",m+l/2,g-2.5],["L",m+l/2,g+2.5],["L",m+l+1,g+2.5]]},vhv:function(m,g){return[["M",m-5,g+2.5],["L",m-5,g],["L",m,g],["L",m,g-3],["L",m,g+3],["L",m+6.5,g+3]]}};function tc(m,g){var l=m.color;return{symbol:hp[g],style:{lineWidth:2,r:6,stroke:l}}}function fp(m,g,l){for(var f=m.isStack,E=m.connectNulls,D=m.isInCircle,z=m.showSinglePoint,U=Oi(m,!0,!1,"lineWidth"),lt=Js(m.points,E,z),Bt=[],Ut=0,$t=lt.length;Ut<$t;Ut++){var Kt=lt[Ut];Bt=Bt.concat(lu(Kt,D,f,g,l,U))}return U.path=Bt,U}function ou(m,g,l,f,E){if(m.length===1)return[["M",m[0].x,m[0].y-E.lineWidth/2],["L",m[0].x,m[0].y],["L",m[0].x,m[0].y+E.lineWidth/2]];var D;return l?(g&&m.length&&m.push({x:m[0].x,y:m[0].y}),D=Se(m,!1,f)):(D=pe(m,!1),g&&D.push(["Z"])),D}function su(m,g,l,f,E,D){var z=[],U=[];(0,c.each)(m,function(Ut){var $t=Qo(Ut);z.push($t[1]),U.push($t[0])});var lt=ou(z,g,f,E,D),Bt=ou(U,g,f,E,D);return l?lt:lt.concat(Bt)}function lu(m,g,l,f,E,D){if(m.length){var z=m[0];return(0,c.isArray)(z.y)?su(m,g,l,f,E,D):ou(m,g,f,E,D)}return[]}var ec=Ia("line",{defaultShapeType:"line"});(0,c.each)(["line","dot","dash","smooth"],function(m){yi("line",m,{draw:function(g,l){var f=m==="smooth",E;if(f){var D=this.coordinate,z=D.start,U=D.end;E=[[z.x,U.y],[U.x,z.y]]}var lt=fp(g,f,E),Bt=l.addShape({type:"path",attrs:lt,name:"line"});return Bt},getMarker:function(g){return tc(g,m)}})});var cp=null,rc=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.type="path",f.shapeType="line";var E=l.connectNulls,D=E===void 0?!1:E,z=l.showSinglePoint,U=z===void 0?!0:z;return f.connectNulls=D,f.showSinglePoint=U,f}return g.prototype.createElements=function(l,f,E){E===void 0&&(E=!1);var D=this,z=D.lastElementsMap,U=D.elementsMap,lt=D.elements,Bt=D.container,Ut=this.getElementId(l),$t=this.getShapeInfo(l),Kt=z[Ut];if(Kt){var ye=Kt.getModel();(this.isCoordinateChanged||eu(ye,$t))&&(Kt.animate=this.animateOption,Kt.update($t)),delete z[Ut]}else{var ae=this.getShapeFactory();Kt=new Vs({shapeFactory:ae,container:Bt,offscreenGroup:this.getOffscreenGroup()}),Kt.geometry=this,Kt.animate=this.animateOption,Kt.draw($t,E)}return lt.push(Kt),U[Ut]=Kt,lt},g.prototype.getPointsAndData=function(l){for(var f=[],E=[],D=0,z=l.length;D<z;D++){var U=l[D];f.push({x:U.x,y:U.y}),E.push(U[w])}return{points:f,data:E}},g.prototype.getShapeInfo=function(l){var f=this.getDrawCfg(l[0]),E=this.getPointsAndData(l),D=E.points,z=E.data;return f.mappingData=l,f.data=z,f.isStack=!!this.getAdjust("stack"),f.points=D,f.connectNulls=this.connectNulls,f.showSinglePoint=this.showSinglePoint,f},g}(Ua),qs=rc;function uu(m,g,l,f,E){var D=[];if(m.length){for(var z=[],U=[],lt=0,Bt=m.length;lt<Bt;lt++){var Ut=m[lt];z.push(Ut[1]),U.push(Ut[0])}U=U.reverse(),(0,c.each)([z,U],function($t,Kt){var ae=[],ye=f.parsePoints($t),Ae=ye[0];z.length===1&&U.length===1?ae=Kt===0?[["M",Ae.x-.5,Ae.y],["L",Ae.x+.5,Ae.y]]:[["L",Ae.x+.5,Ae.y],["L",Ae.x-.5,Ae.y]]:(g&&ye.push({x:Ae.x,y:Ae.y}),l?ae=Se(ye,!1,E):ae=pe(ye,!1),Kt>0&&(ae[0][0]="L")),D=D.concat(ae)}),D.push(["Z"])}return D}function ps(m,g,l,f,E){for(var D=Oi(m,g,!g,"lineWidth"),z=m.connectNulls,U=m.isInCircle,lt=m.points,Bt=m.showSinglePoint,Ut=Js(lt,z,Bt),$t=[],Kt=0,ae=Ut.length;Kt<ae;Kt++){var ye=Ut[Kt];$t=$t.concat(uu(ye,U,l,f,E))}return D.path=$t,D}function hu(m){var g=m.start,l=m.end;return[[g.x,l.y],[l.x,g.y]]}var vp=Ia("area",{defaultShapeType:"area",getDefaultPoints:function(m){var g=m.x,l=m.y0,f=(0,c.isArray)(m.y)?m.y:[l,m.y];return f.map(function(E){return{x:g,y:E}})}});yi("area","area",{draw:function(m,g){var l=ps(m,!1,!1,this),f=g.addShape({type:"path",attrs:l,name:"area"});return f},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return E===void 0&&(E=5.5),[["M",l-E,f-4],["L",l+E,f-4],["L",l+E,f+4],["L",l-E,f+4],["Z"]]},style:{r:5,fill:g}}}});var dp=null,tl=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.type="area",f.shapeType="area",f.generatePoints=!0,f.startOnZero=!0;var E=l.startOnZero,D=E===void 0?!0:E,z=l.sortable,U=z===void 0?!0:z,lt=l.showSinglePoint,Bt=lt===void 0?!1:lt;return f.startOnZero=D,f.sortable=U,f.showSinglePoint=Bt,f}return g.prototype.getPointsAndData=function(l){for(var f=[],E=[],D=0,z=l.length;D<z;D++){var U=l[D];f.push(U.points),E.push(U[w])}return{points:f,data:E}},g.prototype.getYMinValue=function(){if(this.startOnZero)return m.prototype.getYMinValue.call(this);var l=this.getYScale();return l.min},g}(qs),nc=tl,pp=Ia("edge",{defaultShapeType:"line",getDefaultPoints:function(m){return Qo(m)}});yi("edge","line",{draw:function(m,g){var l=Oi(m,!0,!1,"lineWidth"),f=pe(this.parsePoints(m.points),this.coordinate.isPolar);return g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f})})},getMarker:function(m){return{symbol:"circle",style:{r:4.5,fill:m.color}}}});var gp=null,ic=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="edge",l.shapeType="edge",l.generatePoints=!0,l}return g}(Ua),ac=ic,oc=v(87892),sc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="heatmap",l.paletteCache={},l}return g.prototype.createElements=function(l,f,E){E===void 0&&(E=!1);var D=this.prepareRange(l),z=this.prepareSize(),U=(0,c.get)(this.styleOption,["style","shadowBlur"]);return(0,c.isNumber)(U)||(U=z/2),this.prepareGreyScaleBlurredCircle(z,U),this.drawWithRange(l,D,z,U),null},g.prototype.clear=function(){m.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},g.prototype.prepareRange=function(l){var f=this.getAttribute("color"),E=f.getFields()[0],D=Infinity,z=-Infinity;return l.forEach(function(U){var lt=U[w][E];lt>z&&(z=lt),lt<D&&(D=lt)}),D===z&&(D=z-1),[D,z]},g.prototype.prepareSize=function(){var l=this.getDefaultValue("size");return(0,c.isNumber)(l)||(l=this.getDefaultSize()),l},g.prototype.prepareGreyScaleBlurredCircle=function(l,f){var E=this.getGrayScaleBlurredCanvas(),D=l+f,z=E.getContext("2d");E.width=E.height=D*2,z.clearRect(0,0,E.width,E.height),z.shadowOffsetX=z.shadowOffsetY=D*2,z.shadowBlur=f,z.shadowColor="black",z.beginPath(),z.arc(-D,-D,l,0,Math.PI*2,!0),z.closePath(),z.fill()},g.prototype.drawWithRange=function(l,f,E,D){var z=this.coordinate,U=z.start,lt=z.end,Bt=this.coordinate.getWidth(),Ut=this.coordinate.getHeight(),$t=this.getAttribute("color"),Kt=$t.getFields()[0];this.clearShadowCanvasCtx();var ae=this.getShadowCanvasCtx();f&&(l=l.filter(function(Rn){return Rn[w][Kt]<=f[1]&&Rn[w][Kt]>=f[0]}));for(var ye=this.scales[Kt],Ae=0,$e=l;Ae<$e.length;Ae++){var nr=$e[Ae],ir=this.getDrawCfg(nr),_r=ir.x,Gr=ir.y,qr=ye.scale(nr[w][Kt]);this.drawGrayScaleBlurredCircle(_r-U.x,Gr-lt.y,E+D,qr,ae)}var mn=ae.getImageData(0,0,Bt,Ut);this.clearShadowCanvasCtx(),this.colorize(mn),ae.putImageData(mn,0,0);var kn=this.getImageShape();kn.attr("x",U.x),kn.attr("y",lt.y),kn.attr("width",Bt),kn.attr("height",Ut),kn.attr("img",ae.canvas),kn.set("origin",this.getShapeInfo(l))},g.prototype.getDefaultSize=function(){var l=this.getAttribute("position"),f=this.coordinate;return Math.min(f.getWidth()/(l.scales[0].ticks.length*4),f.getHeight()/(l.scales[1].ticks.length*4))},g.prototype.clearShadowCanvasCtx=function(){var l=this.getShadowCanvasCtx();l.clearRect(0,0,l.canvas.width,l.canvas.height)},g.prototype.getShadowCanvasCtx=function(){var l=this.shadowCanvas;return l||(l=document.createElement("canvas"),this.shadowCanvas=l),l.width=this.coordinate.getWidth(),l.height=this.coordinate.getHeight(),l.getContext("2d")},g.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},g.prototype.drawGrayScaleBlurredCircle=function(l,f,E,D,z){var U=this.getGrayScaleBlurredCanvas();z.globalAlpha=D,z.drawImage(U,l-E,f-E)},g.prototype.colorize=function(l){for(var f=this.getAttribute("color"),E=l.data,D=this.paletteCache,z=3;z<E.length;z+=4){var U=E[z];if((0,c.isNumber)(U)){var lt=D[U]?D[U]:oc.default.rgb2arr(f.gradient(U/256));E[z-3]=lt[0],E[z-2]=lt[1],E[z-1]=lt[2],E[z]=U}}},g.prototype.getImageShape=function(){var l=this.imageShape;if(l)return l;var f=this.container;return l=f.addShape({type:"image",attrs:{}}),this.imageShape=l,l},g.prototype.getShapeInfo=function(l){var f=this.getDrawCfg(l[0]);return(0,d.__assign)((0,d.__assign)({},f),{mappingData:l,data:this.getData(l)})},g.prototype.getData=function(l){return l.map(function(f){return f[w]})},g}(Ua),lc=sc;function el(m,g){g===void 0&&(g=!1);var l=m.x,f=m.y,E=m.y0,D=m.size,z,U;(0,c.isArray)(f)?(z=f[0],U=f[1]):(z=E,U=f);var lt,Bt;(0,c.isArray)(l)?(lt=l[0],Bt=l[1]):(lt=l-D/2,Bt=l+D/2);var Ut=[{x:lt,y:z},{x:lt,y:U}];return g?Ut.push({x:Bt,y:(U+z)/2}):Ut.push({x:Bt,y:U},{x:Bt,y:z}),Ut}function rl(m,g){g===void 0&&(g=!0);var l=[],f=m[0];l.push(["M",f.x,f.y]);for(var E=1,D=m.length;E<D;E++)l.push(["L",m[E].x,m[E].y]);return g&&(l.push(["L",f.x,f.y]),l.push(["z"])),l}function fu(m,g,l){var f=[];return(0,c.isNil)(g)?l?f.push(["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["L",m[2].x,m[2].y],["L",m[2].x,m[2].y],["Z"]):f.push(["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["L",m[2].x,m[2].y],["L",m[3].x,m[3].y],["Z"]):f.push(["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["L",g[1].x,g[1].y],["L",g[0].x,g[0].y],["Z"]),f}var yp=Ia("interval",{defaultShapeType:"rect",getDefaultPoints:function(m){return el(m)}});yi("interval","rect",{draw:function(m,g){var l=Oi(m,!1,!0),f=this.parsePath(rl(m.points)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color,l=m.isInPolar;return l?{symbol:"circle",style:{r:4.5,fill:g}}:{symbol:"square",style:{r:4,fill:g}}}});var mp=null;function Ci(m,g){var l=m.length,f=m;(0,c.isString)(f[0])&&(f=m.map(function(U){return g.translate(U)}));for(var E=f[1]-f[0],D=2;D<l;D++){var z=f[D]-f[D-1];E>z&&(E=z)}return E}function uc(m,g){if(g){var l=(0,c.flatten)(m),f=(0,c.valuesOfKey)(l,g);return f.length}return m.length}function _i(m){var g=m.theme,l=m.coordinate,f=m.getXScale(),E=f.values,D=m.beforeMappingData,z=E.length;if(f.isLinear&&E.length>1){E.sort();var U=Ci(E,f);z=(f.max-f.min)/U,E.length>z&&(z=E.length)}var lt=f.range,Bt=1/z,Ut=1;if(l.isPolar?l.isTransposed&&z>1?Ut=g.multiplePieWidthRatio:Ut=g.roseWidthRatio:(f.isLinear&&(Bt*=lt[1]-lt[0]),Ut=g.columnWidthRatio),Bt*=Ut,m.getAdjust("dodge")){var $t=m.getAdjust("dodge"),Kt=$t.dodgeBy,ae=uc(D,Kt);Bt=Bt/ae}var ye=g.maxColumnWidth,Ae=g.minColumnWidth,$e=re(m.coordinate);if(ye){var nr=ye/$e;Bt>nr&&(Bt=nr)}if(Ae){var ir=Ae/$e;Bt<ir&&(Bt=ir)}return Bt}var hc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="interval",l.shapeType="interval",l.generatePoints=!0,l}return g.prototype.createShapePointsCfg=function(l){var f=m.prototype.createShapePointsCfg.call(this,l),E,D=this.getAttribute("size");if(D){E=this.getAttributeValues(D,l)[0];var z=this.coordinate,U=re(z);E=E/U}else this.defaultSize||(this.defaultSize=_i(this)),E=this.defaultSize;return f.size=E,f},g.prototype.adjustScale=function(){m.prototype.adjustScale.call(this);var l=this.getYScale();if(this.coordinate.type==="theta")l.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,l.values),l.max)});else{var f=this.scaleDefs,E=l.field,D=l.min,z=l.max,U=l.type;U!=="time"&&(D>0&&!(0,c.get)(f,[E,"min"])&&l.change({min:0}),z<=0&&!(0,c.get)(f,[E,"max"])&&l.change({max:0}))}},g}(Ua),nl=hc,fc=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;f.type="line";var E=l.sortable,D=E===void 0?!0:E;return f.sortable=D,f}return g}(qs),cc=fc,Za={hexagon:function(m,g,l){var f=l/2*Math.sqrt(3);return[["M",m,g-l],["L",m+f,g-l/2],["L",m+f,g+l/2],["L",m,g+l],["L",m-f,g+l/2],["L",m-f,g-l/2],["Z"]]},bowtie:function(m,g,l){var f=l-1.5;return[["M",m-l,g-f],["L",m+l,g+f],["L",m+l,g-f],["L",m-l,g+f],["Z"]]},cross:function(m,g,l){return[["M",m-l,g-l],["L",m+l,g+l],["M",m+l,g-l],["L",m-l,g+l]]},tick:function(m,g,l){return[["M",m-l/2,g-l],["L",m+l/2,g-l],["M",m,g-l],["L",m,g+l],["M",m-l/2,g+l],["L",m+l/2,g+l]]},plus:function(m,g,l){return[["M",m-l,g],["L",m+l,g],["M",m,g-l],["L",m,g+l]]},hyphen:function(m,g,l){return[["M",m-l,g],["L",m+l,g]]},line:function(m,g,l){return[["M",m,g-l],["L",m,g+l]]}},cu=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],vc=["cross","tick","plus","hyphen","line"];function il(m,g,l,f,E){var D=Oi(g,E,!E,"r"),z=m.parsePoints(g.points),U=z[0];if(g.isStack)U=z[1];else if(z.length>1){for(var lt=l.addGroup(),Bt=0,Ut=z;Bt<Ut.length;Bt++){var $t=Ut[Bt];lt.addShape({type:"marker",attrs:(0,d.__assign)((0,d.__assign)((0,d.__assign)({},D),{symbol:Za[f]||f}),$t)})}return lt}return l.addShape({type:"marker",attrs:(0,d.__assign)((0,d.__assign)((0,d.__assign)({},D),{symbol:Za[f]||f}),U)})}var dc=Ia("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(m){return Qo(m)}});(0,c.each)(cu,function(m){yi("point","hollow-"+m,{draw:function(g,l){return il(this,g,l,m,!0)},getMarker:function(g){var l=g.color;return{symbol:Za[m]||m,style:{r:4.5,stroke:l,fill:null}}}})});var xp=null,pc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="point",l.shapeType="point",l.generatePoints=!0,l}return g.prototype.getDrawCfg=function(l){var f=m.prototype.getDrawCfg.call(this,l);return(0,d.__assign)((0,d.__assign)({},f),{isStack:!!this.getAdjust("stack")})},g}(Ua),gc=pc;function yc(m){for(var g=m[0],l=1,f=[["M",g.x,g.y]];l<m.length;){var E=m[l];(E.x!==m[l-1].x||E.y!==m[l-1].y)&&(f.push(["L",E.x,E.y]),E.x===g.x&&E.y===g.y&&l<m.length-1&&(g=m[l+1],f.push(["Z"]),f.push(["M",g.x,g.y]),l++)),l++}return(0,c.isEqual)((0,c.last)(f),g)||f.push(["L",g.x,g.y]),f.push(["Z"]),f}var bp=Ia("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(m){var g=[];return(0,c.each)(m.x,function(l,f){var E=m.y[f];g.push({x:l,y:E})}),g}});yi("polygon","polygon",{draw:function(m,g){if(!(0,c.isEmpty)(m.points)){var l=Oi(m,!0,!0),f=this.parsePath(yc(m.points));return g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"polygon"})}},getMarker:function(m){var g=m.color;return{symbol:"square",style:{r:4,fill:g}}}});var wp=null,mc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="polygon",l.shapeType="polygon",l.generatePoints=!0,l}return g.prototype.createShapePointsCfg=function(l){var f=m.prototype.createShapePointsCfg.call(this,l),E=f.x,D=f.y,z;if(!((0,c.isArray)(E)&&(0,c.isArray)(D))){var U=this.getXScale(),lt=this.getYScale(),Bt=U.values.length,Ut=lt.values.length,$t=.5*1/Bt,Kt=.5*1/Ut;U.isCategory&&lt.isCategory?(E=[E-$t,E-$t,E+$t,E+$t],D=[D-Kt,D+Kt,D+Kt,D-Kt]):(0,c.isArray)(E)?(z=E,E=[z[0],z[0],z[1],z[1]],D=[D-Kt/2,D+Kt/2,D+Kt/2,D-Kt/2]):(0,c.isArray)(D)&&(z=D,D=[z[0],z[1],z[1],z[0]],E=[E-$t/2,E-$t/2,E+$t/2,E+$t/2]),f.x=E,f.y=D}return f},g}(Ua),xc=mc,Sp=Ia("schema",{defaultShapeType:""}),Cp=null,bc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="schema",l.shapeType="schema",l.generatePoints=!0,l}return g.prototype.createShapePointsCfg=function(l){var f=m.prototype.createShapePointsCfg.call(this,l),E,D=this.getAttribute("size");if(D){E=this.getAttributeValues(D,l)[0];var z=this.coordinate,U=re(z);E=E/U}else this.defaultSize||(this.defaultSize=_i(this)),E=this.defaultSize;return f.size=E,f},g}(Ua),wc=bc;yi("area","line",{draw:function(m,g){var l=ps(m,!0,!1,this),f=g.addShape({type:"path",attrs:l,name:"area"});return f},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return E===void 0&&(E=5.5),[["M",l-E,f-4],["L",l+E,f-4],["L",l+E,f+4],["L",l-E,f+4],["Z"]]},style:{r:5,stroke:g,fill:null}}}}),yi("area","smooth",{draw:function(m,g){var l=this.coordinate,f=ps(m,!1,!0,this,hu(l)),E=g.addShape({type:"path",attrs:f,name:"area"});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return E===void 0&&(E=5.5),[["M",l-E,f-4],["L",l+E,f-4],["L",l+E,f+4],["L",l-E,f+4],["Z"]]},style:{r:5,fill:g}}}}),yi("area","smooth-line",{draw:function(m,g){var l=this.coordinate,f=ps(m,!0,!0,this,hu(l)),E=g.addShape({type:"path",attrs:f,name:"area"});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return E===void 0&&(E=5.5),[["M",l-E,f-4],["L",l+E,f-4],["L",l+E,f+4],["L",l-E,f+4],["Z"]]},style:{r:5,stroke:g,fill:null}}}});function al(m,g){var l=[];l.push({x:m.x,y:m.y*1/2+g.y*1/2}),l.push({x:g.x,y:m.y*1/2+g.y*1/2}),l.push(g);var f=["C"];return(0,c.each)(l,function(E){f.push(E.x,E.y)}),f}function ol(m,g){var l=[];l.push({x:g.x,y:g.y}),l.push(m);var f=["Q"];return(0,c.each)(l,function(E){f.push(E.x,E.y)}),f}function vu(m,g,l){var f=ol(g,l),E=[["M",m.x,m.y]];return E.push(f),E}function Mp(m,g){var l=ol(m[1],g),f=ol(m[3],g),E=[["M",m[0].x,m[0].y]];return E.push(f),E.push(["L",m[3].x,m[3].y]),E.push(["L",m[2].x,m[2].y]),E.push(l),E.push(["L",m[1].x,m[1].y]),E.push(["L",m[0].x,m[0].y]),E.push(["Z"]),E}yi("edge","arc",{draw:function(m,g){var l=Oi(m,!0,!1,"lineWidth"),f=m.points,E=f.length>2?"weight":"normal",D;if(m.isInCircle){var z={x:0,y:1};return E==="normal"?D=vu(f[0],f[1],z):(l.fill=l.stroke,D=Mp(f,z)),D=this.parsePath(D),g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:D})})}else{if(E==="normal")return f=this.parsePoints(f),D=Pe((f[1].x+f[0].x)/2,f[0].y,Math.abs(f[1].x-f[0].x)/2,Math.PI,Math.PI*2),g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:D})});var U=al(f[1],f[3]),lt=al(f[2],f[0]);return D=[["M",f[0].x,f[0].y],["L",f[1].x,f[1].y],U,["L",f[3].x,f[3].y],["L",f[2].x,f[2].y],lt,["Z"]],D=this.parsePath(D),l.fill=l.stroke,g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:D})})}},getMarker:function(m){return{symbol:"circle",style:{r:4.5,fill:m.color}}}});function Io(m,g){var l=al(m,g),f=[["M",m.x,m.y]];return f.push(l),f}yi("edge","smooth",{draw:function(m,g){var l=Oi(m,!0,!1,"lineWidth"),f=m.points,E=this.parsePath(Io(f[0],f[1]));return g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:E})})},getMarker:function(m){return{symbol:"circle",style:{r:4.5,fill:m.color}}}});var gs=1/3;function du(m,g){var l=[];l.push({x:m.x,y:m.y*(1-gs)+g.y*gs}),l.push({x:g.x,y:m.y*(1-gs)+g.y*gs}),l.push(g);var f=[["M",m.x,m.y]];return(0,c.each)(l,function(E){f.push(["L",E.x,E.y])}),f}yi("edge","vhv",{draw:function(m,g){var l=Oi(m,!0,!1,"lineWidth"),f=m.points,E=this.parsePath(du(f[0],f[1]));return g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:E})})},getMarker:function(m){return{symbol:"circle",style:{r:4.5,fill:m.color}}}}),yi("interval","funnel",{getPoints:function(m){return m.size=m.size*2,el(m)},draw:function(m,g){var l=Oi(m,!1,!0),f=this.parsePath(fu(m.points,m.nextPoints,!1)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color;return{symbol:"square",style:{r:4,fill:g}}}}),yi("interval","hollow-rect",{draw:function(m,g){var l=Oi(m,!0,!1),f=this.parsePath(rl(m.points)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color,l=m.isInPolar;return l?{symbol:"circle",style:{r:4.5,stroke:g,fill:null}}:{symbol:"square",style:{r:4,stroke:g,fill:null}}}});function Ka(m){var g=m.x,l=m.y,f=m.y0;return(0,c.isArray)(l)?l.map(function(E,D){return{x:(0,c.isArray)(g)?g[D]:g,y:E}}):[{x:g,y:f},{x:g,y:l}]}yi("interval","line",{getPoints:function(m){return Ka(m)},draw:function(m,g){var l=Oi(m,!0,!1,"lineWidth"),f=this.parsePath(rl(m.points,!1)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return[["M",l,f-E],["L",l,f+E]]},style:{r:5,stroke:g}}}}),yi("interval","pyramid",{getPoints:function(m){return m.size=m.size*2,el(m,!0)},draw:function(m,g){var l=Oi(m,!1,!0),f=this.parsePath(fu(m.points,m.nextPoints,!0)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color;return{symbol:"square",style:{r:4,fill:g}}}});function Sc(m){var g=m.x,l=m.y,f=m.y0,E=m.size,D,z;(0,c.isArray)(l)?(D=l[0],z=l[1]):(D=f,z=l);var U=g+E/2,lt=g-E/2;return[{x:g,y:D},{x:g,y:z},{x:lt,y:D},{x:U,y:D},{x:lt,y:z},{x:U,y:z}]}function pu(m){return[["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["M",m[2].x,m[2].y],["L",m[3].x,m[3].y],["M",m[4].x,m[4].y],["L",m[5].x,m[5].y]]}yi("interval","tick",{getPoints:function(m){return Sc(m)},draw:function(m,g){var l=Oi(m,!0,!1),f=this.parsePath(pu(m.points)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f}),name:"interval"});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){return[["M",l-E/2,f-E],["L",l+E/2,f-E],["M",l,f-E],["L",l,f+E],["M",l-E/2,f+E],["L",l+E/2,f+E]]},style:{r:5,stroke:g}}}});var sl=function(m,g,l){var f=m.x,E=m.y,D=g.x,z=g.y,U;switch(l){case"hv":U=[{x:D,y:E}];break;case"vh":U=[{x:f,y:z}];break;case"hvh":var lt=(D+f)/2;U=[{x:lt,y:E},{x:lt,y:z}];break;case"vhv":var Bt=(E+z)/2;U=[{x:f,y:Bt},{x:D,y:Bt}];break;default:break}return U};function ys(m,g){var l=[];return(0,c.each)(m,function(f,E){var D=m[E+1];if(l.push(f),D){var z=sl(f,D,g);l=l.concat(z)}}),l}function gu(m){return m.map(function(g,l){return l===0?["M",g.x,g.y]:["L",g.x,g.y]})}function yu(m,g){var l=Js(m.points,m.connectNulls,m.showSinglePoint),f=[];return(0,c.each)(l,function(E){var D=ys(E,g);f=f.concat(gu(D))}),(0,d.__assign)((0,d.__assign)({},Oi(m,!0,!1,"lineWidth")),{path:f})}(0,c.each)(["hv","vh","hvh","vhv"],function(m){yi("line",m,{draw:function(g,l){var f=yu(g,m),E=l.addShape({type:"path",attrs:f,name:"line"});return E},getMarker:function(g){return tc(g,m)}})}),(0,c.each)(vc,function(m){yi("point",m,{draw:function(g,l){return il(this,g,l,m,!0)},getMarker:function(g){var l=g.color;return{symbol:Za[m],style:{r:4.5,stroke:l,fill:null}}}})}),yi("point","image",{draw:function(m,g){var l=Oi(m,!1,!1,"r").r,f=this.parsePoints(m.points),E=f[0];if(m.isStack)E=f[1];else if(f.length>1){for(var D=g.addGroup(),z=0,U=f;z<U.length;z++){var lt=U[z];D.addShape("image",{attrs:{x:lt.x-l/2,y:lt.y-l,width:l,height:l,img:m.shape[1]}})}return D}return g.addShape("image",{attrs:{x:E.x-l/2,y:E.y-l,width:l,height:l,img:m.shape[1]}})},getMarker:function(m){var g=m.color;return{symbol:"circle",style:{r:4.5,fill:g}}}}),(0,c.each)(cu,function(m){yi("point",m,{draw:function(g,l){return il(this,g,l,m,!1)},getMarker:function(g){var l=g.color;return{symbol:Za[m]||m,style:{r:4.5,fill:l}}}})});function ll(m){var g=(0,c.isArray)(m)?m:[m],l=g[0],f=g[g.length-1],E=g.length>1?g[1]:l,D=g.length>3?g[3]:f,z=g.length>2?g[2]:E;return{min:l,max:f,min1:E,max1:D,median:z}}function mu(m,g,l){var f=l/2,E;if((0,c.isArray)(g)){var D=ll(g),z=D.min,U=D.max,lt=D.median,Bt=D.min1,Ut=D.max1,$t=m-f,Kt=m+f;E=[[$t,U],[Kt,U],[m,U],[m,Ut],[$t,Bt],[$t,Ut],[Kt,Ut],[Kt,Bt],[m,Bt],[m,z],[$t,z],[Kt,z],[$t,lt],[Kt,lt]]}else{g=(0,c.isNil)(g)?.5:g;var ae=ll(m),z=ae.min,U=ae.max,lt=ae.median,Bt=ae.min1,Ut=ae.max1,ye=g-f,Ae=g+f;E=[[z,ye],[z,Ae],[z,g],[Bt,g],[Bt,ye],[Bt,Ae],[Ut,Ae],[Ut,ye],[Ut,g],[U,g],[U,ye],[U,Ae],[lt,ye],[lt,Ae]]}return E.map(function($e){return{x:$e[0],y:$e[1]}})}function xu(m){return[["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["M",m[2].x,m[2].y],["L",m[3].x,m[3].y],["M",m[4].x,m[4].y],["L",m[5].x,m[5].y],["L",m[6].x,m[6].y],["L",m[7].x,m[7].y],["L",m[4].x,m[4].y],["Z"],["M",m[8].x,m[8].y],["L",m[9].x,m[9].y],["M",m[10].x,m[10].y],["L",m[11].x,m[11].y],["M",m[12].x,m[12].y],["L",m[13].x,m[13].y]]}yi("schema","box",{getPoints:function(m){var g=m.x,l=m.y,f=m.size;return mu(g,l,f)},draw:function(m,g){var l=Oi(m,!0,!1),f=this.parsePath(xu(m.points)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f,name:"schema"})});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){var D=[f-6,f-3,f,f+3,f+6],z=mu(l,D,E);return[["M",z[0].x+1,z[0].y],["L",z[1].x-1,z[1].y],["M",z[2].x,z[2].y],["L",z[3].x,z[3].y],["M",z[4].x,z[4].y],["L",z[5].x,z[5].y],["L",z[6].x,z[6].y],["L",z[7].x,z[7].y],["L",z[4].x,z[4].y],["Z"],["M",z[8].x,z[8].y],["L",z[9].x,z[9].y],["M",z[10].x+1,z[10].y],["L",z[11].x-1,z[11].y],["M",z[12].x,z[12].y],["L",z[13].x,z[13].y]]},style:{r:6,lineWidth:1,stroke:g}}}});function Cc(m){var g=(0,c.isArray)(m)?m:[m],l=g.sort(function(f,E){return E-f});return We(l,4,l[l.length-1])}function bu(m,g,l){var f=Cc(g);return[{x:m,y:f[0]},{x:m,y:f[1]},{x:m-l/2,y:f[2]},{x:m-l/2,y:f[1]},{x:m+l/2,y:f[1]},{x:m+l/2,y:f[2]},{x:m,y:f[2]},{x:m,y:f[3]}]}function wu(m){return[["M",m[0].x,m[0].y],["L",m[1].x,m[1].y],["M",m[2].x,m[2].y],["L",m[3].x,m[3].y],["L",m[4].x,m[4].y],["L",m[5].x,m[5].y],["Z"],["M",m[6].x,m[6].y],["L",m[7].x,m[7].y]]}yi("schema","candle",{getPoints:function(m){var g=m.x,l=m.y,f=m.size;return bu(g,l,f)},draw:function(m,g){var l=Oi(m,!0,!0),f=this.parsePath(wu(m.points)),E=g.addShape("path",{attrs:(0,d.__assign)((0,d.__assign)({},l),{path:f,name:"schema"})});return E},getMarker:function(m){var g=m.color;return{symbol:function(l,f,E){var D=[f+7.5,f+3,f-3,f-7.5],z=bu(l,D,E);return[["M",z[0].x,z[0].y],["L",z[1].x,z[1].y],["M",z[2].x,z[2].y],["L",z[3].x,z[3].y],["L",z[4].x,z[4].y],["L",z[5].x,z[5].y],["Z"],["M",z[6].x,z[6].y],["L",z[7].x,z[7].y]]},style:{lineWidth:1,stroke:g,fill:g,r:6}}}});function Mc(m,g){var l=Math.abs(m[0].x-m[2].x),f=Math.abs(m[0].y-m[2].y),E=Math.min(l,f);g&&(E=(0,c.clamp)(g,0,Math.min(l,f))),E=E/2;var D=(m[0].x+m[2].x)/2,z=(m[0].y+m[2].y)/2;return{x:D-E,y:z-E,width:E*2,height:E*2}}yi("polygon","square",{draw:function(m,g){if(!(0,c.isEmpty)(m.points)){var l=Oi(m,!0,!0),f=this.parsePoints(m.points);return g.addShape("rect",{attrs:(0,d.__assign)((0,d.__assign)({},l),Mc(f,m.size)),name:"polygon"})}},getMarker:function(m){var g=m.color;return{symbol:"square",style:{r:4,fill:g}}}});var Su=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.setLabelPosition=function(l,f,E,D){var z=this.getCoordinate(),U=z.isTransposed,lt=f.points,Bt=z.convert(lt[0]),Ut=z.convert(lt[2]),$t=U?-1:1,Kt=(Bt.x-Ut.x)/2*$t,ae=(Bt.y-Ut.y)/2*$t;switch(D){case"right":U||(l.x-=Kt,l.y+=ae),l.textAlign=(0,c.get)(l,"textAlign","left");break;case"left":U?l.x-=Kt*2:(l.x+=Kt,l.y+=ae),l.textAlign=(0,c.get)(l,"textAlign","right");break;case"bottom":U?(l.x-=Kt,l.y-=ae):l.y+=ae*2,l.textAlign=(0,c.get)(l,"textAlign","center"),l.textBaseline=(0,c.get)(l,"textBaseline","top");break;case"middle":U?l.x-=Kt:l.y+=ae,l.textAlign=(0,c.get)(l,"textAlign","center");break;case"top":U&&(l.x-=Kt,l.y+=ae),l.textAlign=(0,c.get)(l,"textAlign","center"),l.textBaseline=(0,c.get)(l,"textBaseline","bottom");break;default:break}},g}(un),Cu=Su,Jo=Math.PI/2,Ec=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getLabelAlign=function(l){var f=this.getCoordinate(),E;if(l.labelEmit)E=l.angle<=Math.PI/2&&l.angle>=-Math.PI/2?"left":"right";else if(!f.isTransposed)E="center";else{var D=f.getCenter(),z=this.getDefaultOffset(l.offset);Math.abs(l.x-D.x)<1?E="center":l.angle>Math.PI||l.angle<=0?E=z>0?"left":"right":E=z>0?"right":"left"}return E},g.prototype.getLabelPoint=function(l,f,E){var D=1,z,U=l.content[E];this.isToMiddle(f)?z=this.getMiddlePoint(f.points):(l.content.length===1&&E===0?E=1:E===0&&(D=-1),z=this.getArcPoint(f,E));var lt=this.getDefaultOffset(l.offset)*D,Bt=this.getPointAngle(z),Ut=l.labelEmit,$t=this.getCirclePoint(Bt,lt,z,Ut);return $t.r===0?$t.content="":($t.content=U,$t.angle=Bt,$t.color=f.color),$t.rotate=l.autoRotate?this.getLabelRotate(Bt,lt,Ut):l.rotate,$t.start={x:z.x,y:z.y},$t},g.prototype.getArcPoint=function(l,f){return f===void 0&&(f=0),!(0,c.isArray)(l.x)&&!(0,c.isArray)(l.y)?{x:l.x,y:l.y}:{x:(0,c.isArray)(l.x)?l.x[f]:l.x,y:(0,c.isArray)(l.y)?l.y[f]:l.y}},g.prototype.getPointAngle=function(l){return Oe(this.getCoordinate(),l)},g.prototype.getCirclePoint=function(l,f,E,D){var z=this.getCoordinate(),U=z.getCenter(),lt=ie(z,E);if(lt===0)return(0,d.__assign)((0,d.__assign)({},U),{r:lt});var Bt=l;if(z.isTransposed&&lt>f&&!D){var Ut=Math.asin(f/(2*lt));Bt=l+Ut*2}else lt=lt+f;return{x:U.x+lt*Math.cos(Bt),y:U.y+lt*Math.sin(Bt),r:lt}},g.prototype.getLabelRotate=function(l,f,E){var D=l+Jo;return E&&(D-=Jo),D&&(D>Jo?D=D-Math.PI:D<-Jo&&(D=D+Math.PI)),D},g.prototype.getMiddlePoint=function(l){var f=this.getCoordinate(),E=l.length,D={x:0,y:0};return(0,c.each)(l,function(z){D.x+=z.x,D.y+=z.y}),D.x/=E,D.y/=E,D=f.convert(D),D},g.prototype.isToMiddle=function(l){return l.x.length>2},g}(un),Mu=Ec,Ac=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;return f.defaultLayout="distribute",f}return g.prototype.getDefaultLabelCfg=function(){return(0,c.get)(this.geometry.theme,"pieLabels",{})},g.prototype.getDefaultOffset=function(l){return l||0},g.prototype.getLabelRotate=function(l,f,E){var D;return f<0&&(D=l,D>Math.PI/2&&(D=D-Math.PI),D<-Math.PI/2&&(D=D+Math.PI)),D},g.prototype.getLabelAlign=function(l){var f=this.getCoordinate(),E=f.getCenter(),D;l.angle<=Math.PI/2&&l.x>=E.x?D="left":D="right";var z=this.getDefaultOffset(l.offset);return z<=0&&(D==="right"?D="left":D="right"),D},g.prototype.getArcPoint=function(l){return l},g.prototype.getPointAngle=function(l){var f=this.getCoordinate(),E={x:(0,c.isArray)(l.x)?l.x[0]:l.x,y:l.y[0]},D={x:(0,c.isArray)(l.x)?l.x[1]:l.x,y:l.y[1]},z,U=Oe(f,E);if(l.points&&l.points[0].y===l.points[1].y)z=U;else{var lt=Oe(f,D);U>=lt&&(lt=lt+Math.PI*2),z=U+(lt-U)/2}return z},g.prototype.getCirclePoint=function(l,f,E){var D=this.getCoordinate(),z=D.getCenter(),U=D.getRadius()+f;return(0,d.__assign)((0,d.__assign)({},ce(z.x,z.y,U,l)),{angle:l,r:U})},g}(Mu),Tc=Ac,Eu=4;function Pc(m,g,l,f,E,D){var z=!0,U=f.start,lt=f.end,Bt=Math.min(U.y,lt.y),Ut=Math.abs(U.y-lt.y),$t,Kt=0,ae=Number.MIN_VALUE,ye=g.map(function(qr){return qr.y>Kt&&(Kt=qr.y),qr.y<ae&&(ae=qr.y),{size:l,targets:[qr.y-Bt]}});for(ae-=Bt,Kt-Bt>Ut&&(Ut=Kt-Bt);z;)for(ye.forEach(function(qr){var mn=(Math.min.apply(ae,qr.targets)+Math.max.apply(ae,qr.targets))/2;qr.pos=Math.min(Math.max(ae,mn-qr.size/2),Ut-qr.size)}),z=!1,$t=ye.length;$t--;)if($t>0){var Ae=ye[$t-1],$e=ye[$t];Ae.pos+Ae.size>$e.pos&&(Ae.size+=$e.size,Ae.targets=Ae.targets.concat($e.targets),Ae.pos+Ae.size>Ut&&(Ae.pos=Ut-Ae.size),ye.splice($t,1),z=!0)}$t=0,ye.forEach(function(qr){var mn=Bt+l/2;qr.targets.forEach(function(){g[$t].y=qr.pos+mn,mn+=l,$t++})});for(var nr={},ir=0,_r=m;ir<_r.length;ir++){var Gr=_r[ir];nr[Gr.get("id")]=Gr}g.forEach(function(qr){var mn=qr.r*qr.r,kn=Math.pow(Math.abs(qr.y-E.y),2);if(mn<kn)qr.x=E.x;else{var Rn=Math.sqrt(mn-kn);D?qr.x=E.x+Rn:qr.x=E.x-Rn}var cn=nr[qr.id];cn.attr("x",qr.x),cn.attr("y",qr.y);var Vn=(0,c.find)(cn.getChildren(),function(vi){return vi.get("type")==="text"});Vn&&(Vn.attr("y",qr.y),Vn.attr("x",qr.x))})}function Lc(m,g,l,f){var E=m[0]?m[0].offset:0,D=g[0].get("coordinate"),z=D.getRadius(),U=D.getCenter();if(E>0){var lt=14,Bt=z+E,Ut=Bt*2+lt*2,$t={start:D.start,end:D.end},Kt=[[],[]];m.forEach(function(ae){!ae||(ae.textAlign==="right"?Kt[0].push(ae):Kt[1].push(ae))}),Kt.forEach(function(ae,ye){var Ae=Ut/lt;ae.length>Ae&&(ae.sort(function($e,nr){return nr["..percent"]-$e["..percent"]}),ae.splice(Ae,ae.length-Ae)),ae.sort(function($e,nr){return $e.y-nr.y}),Pc(g,ae,lt,$t,U,ye)})}(0,c.each)(m,function(ae){if(ae&&ae.labelLine){var ye=ae.offset,Ae=ae.angle,$e=ce(U.x,U.y,z,Ae),nr=ce(U.x,U.y,z+ye/2,Ae),ir=ae.x+(0,c.get)(ae,"offsetX",0),_r=ae.y+(0,c.get)(ae,"offsetY",0),Gr={x:ir-Math.cos(Ae)*Eu,y:_r-Math.sin(Ae)*Eu};(0,c.isObject)(ae.labelLine)||(ae.labelLine={}),ae.labelLine.path=["M "+$e.x,$e.y+" Q"+nr.x,nr.y+" "+Gr.x,Gr.y].join(",")}})}var Au=4;function _c(m,g,l,f,E,D,z){g.sort(function(cn,Vn){return cn.y-Vn.y});var U=f.start,lt=f.end,Bt=Math.min(U.y,lt.y),Ut=Math.max(U.y,lt.y),$t,Kt=g.map(function(cn){return{content:cn.content,size:l,pos:cn.y,targets:[cn.y]}}),ae=Math.max.apply(Math,Kt.map(function(cn){return cn.pos})),ye=Math.min.apply(Math,Kt.map(function(cn){return cn.pos}));if(z){for(var Ae=Math.min(ye,Ut-(Kt.length-1)*l),$e=Math.max(Ae+Kt.length*l,ae+l),nr=!0;nr;)for(nr=!1,$t=Kt.length;$t--;)if($t>0){var ir=Kt[$t-1],_r=Kt[$t];ir.pos+ir.size>_r.pos&&(_r.pos+$t*l<$e?(ir.size+=_r.size,ir.targets=ir.targets.concat(_r.targets),Kt.splice($t,1)):ir.pos=_r.pos-ir.size,nr=!0)}}else for(var $e=Math.max(Bt+(Kt.length-1)*l,ae),Ae=Math.min(ye,$e-(Kt.length-1)*l),nr=!0;nr;)for(nr=!1,$t=Kt.length;$t--;)if($t>0){var ir=Kt[$t-1],_r=Kt[$t];ir.pos+ir.size>_r.pos&&(ir.pos-Ae>$t*l?ir.pos-=ir.size:(ir.size+=_r.size,ir.targets=ir.targets.concat(_r.targets),Kt.splice($t,1)),nr=!0)}$t=0,Kt.forEach(function(cn){var Vn=cn.pos;cn.targets.forEach(function(){g[$t].y=Vn,Vn+=l,$t++})});for(var Gr={},qr=0,mn=m;qr<mn.length;qr++){var kn=mn[qr];Gr[kn.get("id")]=kn}var Rn=(Math.max.apply(Math,g.map(function(cn){return cn.y}))-Math.min.apply(Math,g.map(function(cn){return cn.y})))/2;Rn=Math.max(Rn,D),g.forEach(function(cn){var Vn=Gr[cn.id],vi=Vn.find(function(Fa){return Fa.get("type")==="text"});if(vi&&vi.attr("y")!==cn.y){var la=Rn*Rn,mi=Math.pow(Math.abs(cn.y-E.y),2);if(la<mi)cn.x=E.x;else{var Mi=Math.sqrt(la-mi);z?cn.x=E.x+Mi:cn.x=E.x-Mi}}Vn.attr("x",cn.x),Vn.attr("y",cn.y),vi&&(vi.attr("y",cn.y),vi.attr("x",cn.x))})}function Ic(m,g,l,f){var E=m[0]?m[0].offset:0,D=g[0].get("coordinate"),z=D.getRadius(),U=D.getCenter();if(E>0){var lt=(0,c.get)(m[0],"labelHeight",14),Bt=z+E,Ut=Bt*2+lt*2,$t={start:D.start,end:D.end},Kt=[[],[]];m.forEach(function(ae){!ae||(ae.x<U.x?Kt[0].push(ae):Kt[1].push(ae))}),Kt.forEach(function(ae,ye){var Ae=Ut/lt;if(ae.length>Ae){ae.sort(function(nr,ir){return ir["data.percent"]-nr["data.percent"]});var $e=ae.splice(Ae,ae.length-Ae+1);$e.forEach(function(nr){var ir=g.findIndex(function(_r){return _r.get("id")===nr.id});g[ir]&&(g[ir].remove(!0),g.splice(ir,1))})}_c(g,ae,lt,$t,U,Bt,ye===1)})}(0,c.each)(m,function(ae){if(ae&&ae.labelLine){var ye=ae.angle,Ae=ce(U.x,U.y,z,ye),$e=ae.x+(0,c.get)(ae,"offsetX",0)*(Math.cos(ye)>0?1:-1),nr=ae.y+(0,c.get)(ae,"offsetY",0)*(Math.sin(ye)>0?1:-1),ir={x:$e-Math.cos(ye)*Au,y:nr-Math.sin(ye)*Au},_r=ae.labelLine.smooth,Gr=[],qr=ir.x-U.x,mn=ir.y-U.y,kn=Math.atan(mn/qr);if(qr<0&&(kn+=Math.PI),_r===!1){(0,c.isObject)(ae.labelLine)||(ae.labelLine={});var Rn=0;(ye<0&&ye>-Math.PI/2||ye>Math.PI*1.5)&&ir.y>Ae.y&&(Rn=1),ye>=0&&ye<Math.PI/2&&ir.y>Ae.y&&(Rn=1),ye>=Math.PI/2&&ye<Math.PI&&Ae.y>ir.y&&(Rn=1),(ye<-Math.PI/2||ye>=Math.PI&&ye<Math.PI*1.5)&&Ae.y>ir.y&&(Rn=1);var cn=E/2>4?4:Math.max(E/2-1,0),Vn=ce(U.x,U.y,z+cn,ye),vi=ce(U.x,U.y,z+E/2,kn),la=0;Gr.push("M "+Ae.x+" "+Ae.y),Gr.push("L "+Vn.x+" "+Vn.y),Gr.push("A "+U.x+" "+U.y+" 0 "+la+" "+Rn+" "+vi.x+" "+vi.y),Gr.push("L "+ir.x+" "+ir.y)}else{var Vn=ce(U.x,U.y,z+(E/2>4?4:Math.max(E/2-1,0)),ye),mi=Ae.x<U.x?1:-1;Gr.push("M "+ir.x+" "+ir.y);var Mi=(Ae.y-U.y)/(Ae.x-U.x),Fa=(ir.y-U.y)/(ir.x-U.x);Math.abs(Mi-Fa)>Math.pow(Math.E,-16)&&Gr.push.apply(Gr,["C",ir.x+mi*4,ir.y,2*Vn.x-Ae.x,2*Vn.y-Ae.y,Ae.x,Ae.y]),Gr.push("L "+Ae.x+" "+Ae.y)}ae.labelLine.path=Gr.join(" ")}})}function Tu(m,g,l,f){(0,c.each)(g,function(E){var D=f.minX,z=f.minY,U=f.maxX,lt=f.maxY,Bt=E.getCanvasBBox(),Ut=Bt.minX,$t=Bt.minY,Kt=Bt.maxX,ae=Bt.maxY,ye=Bt.x,Ae=Bt.y,$e=Bt.width,nr=Bt.height,ir=ye,_r=Ae;(Ut<D||Kt<D)&&(ir=D),($t<z||ae<z)&&(_r=z),Ut>U?ir=U-$e:Kt>U&&(ir=ir-(Kt-U)),$t>lt?_r=lt-nr:ae>lt&&(_r=_r-(ae-lt)),(ir!==ye||_r!==Ae)&&Ks(E,ir-ye,_r-Ae)})}function Oc(m,g,l,f){(0,c.each)(g,function(E,D){var z=E.getCanvasBBox(),U=l[D].getBBox();(z.minX<U.minX||z.minY<U.minY||z.maxX>U.maxX||z.maxY>U.maxY)&&E.remove(!0)})}var kc=100,Pu=function(){function m(g){g===void 0&&(g={}),this.bitmap={};var l=g.xGap,f=l===void 0?1:l,E=g.yGap,D=E===void 0?8:E;this.xGap=f,this.yGap=D}return m.prototype.hasGap=function(g){for(var l=!0,f=this.bitmap,E=Math.round(g.minX),D=Math.round(g.maxX),z=Math.round(g.minY),U=Math.round(g.maxY),lt=E;lt<=D;lt+=1){if(!f[lt]){f[lt]={};continue}if(lt===E||lt===D){for(var Bt=z;Bt<=U;Bt++)if(f[lt][Bt]){l=!1;break}}else if(f[lt][z]||f[lt][U]){l=!1;break}}return l},m.prototype.fillGap=function(g){for(var l=this.bitmap,f=Math.round(g.minX),E=Math.round(g.maxX),D=Math.round(g.minY),z=Math.round(g.maxY),U=f;U<=E;U+=1)l[U]||(l[U]={});for(var U=f;U<=E;U+=this.xGap){for(var lt=D;lt<=z;lt+=this.yGap)l[U][lt]=!0;l[U][z]=!0}if(this.yGap!==1)for(var U=D;U<=z;U+=1)l[f][U]=!0,l[E][U]=!0;if(this.xGap!==1)for(var U=f;U<=E;U+=1)l[U][D]=!0,l[U][z]=!0},m.prototype.destroy=function(){this.bitmap={}},m}();function Bc(m,g,l){l===void 0&&(l=kc);var f=-1,E=m.attr(),D=E.x,z=E.y,U=m.getCanvasBBox(),lt=Math.sqrt(U.width*U.width+U.height*U.height),Bt,Ut=-f,$t=0,Kt=0,ae=function(nr){var ir=nr*.1;return[ir*Math.cos(ir),ir*Math.sin(ir)]};if(g.hasGap(U))return g.fillGap(U),!0;for(var ye=!1,Ae=0,$e={};Math.min(Math.abs($t),Math.abs(Kt))<lt&&Ae<l;)if(Bt=ae(Ut+=f),$t=~~Bt[0],Kt=~~Bt[1],!(!$t&&!Kt||$e[$t+"-"+Kt])&&(m.attr({x:D+$t,y:z+Kt}),$t+Kt<0&&m.attr("textAlign","right"),Ae++,g.hasGap(m.getCanvasBBox()))){g.fillGap(m.getCanvasBBox()),ye=!0,$e[$t+"-"+Kt]=!0;break}return ye}function Dc(m,g,l,f){var E=m.getCanvasBBox(),D=E.width,z=E.height,U={x:g,y:l,textAlign:"center"};switch(f){case 0:U.y-=z+1,U.x+=1,U.textAlign="left";break;case 1:U.y-=z+1,U.x-=1,U.textAlign="right";break;case 2:U.y+=z+1,U.x-=1,U.textAlign="right";break;case 3:U.y+=z+1,U.x+=1,U.textAlign="left";break;case 5:U.y-=z*2+2;break;case 6:U.y+=z*2+2;break;case 7:U.x+=D+1,U.textAlign="left";break;case 8:U.x-=D+1,U.textAlign="right";break;default:break}return m.attr(U),m.getCanvasBBox()}function Fc(m,g,l,f){var E=new Pu;(0,c.each)(g,function(D){var z=D.find(function(U){return U.get("type")==="text"});Bc(z,E)||D.remove(!0)}),E.destroy()}function Rc(m,g,l,f){var E=new Pu;(0,c.each)(g,function(D){for(var z=D.find(function(ae){return ae.get("type")==="text"}),U=z.attr(),lt=U.x,Bt=U.y,Ut=!1,$t=0;$t<=8;$t++){var Kt=Dc(z,lt,Bt,$t);if(E.hasGap(Kt)){E.fillGap(Kt),Ut=!0;break}}Ut||D.remove(!0)}),E.destroy()}function ul(m,g,l){var f={fillOpacity:(0,c.isNil)(m.attr("fillOpacity"))?1:m.attr("fillOpacity"),strokeOpacity:(0,c.isNil)(m.attr("strokeOpacity"))?1:m.attr("strokeOpacity"),opacity:(0,c.isNil)(m.attr("opacity"))?1:m.attr("opacity")};m.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),m.animate(f,g)}function Lu(m,g,l){var f={fillOpacity:0,strokeOpacity:0,opacity:0},E=g.easing,D=g.duration,z=g.delay;m.animate(f,D,E,function(){m.remove(!0)},z)}function Nc(m,g,l){var f,E=g[0],D=g[1];return m.applyToMatrix([E,D,1]),l==="x"?(m.setMatrix(Qn.transform(m.getMatrix(),[["t",-E,-D],["s",.01,1],["t",E,D]])),f=Qn.transform(m.getMatrix(),[["t",-E,-D],["s",100,1],["t",E,D]])):l==="y"?(m.setMatrix(Qn.transform(m.getMatrix(),[["t",-E,-D],["s",1,.01],["t",E,D]])),f=Qn.transform(m.getMatrix(),[["t",-E,-D],["s",1,100],["t",E,D]])):l==="xy"&&(m.setMatrix(Qn.transform(m.getMatrix(),[["t",-E,-D],["s",.01,.01],["t",E,D]])),f=Qn.transform(m.getMatrix(),[["t",-E,-D],["s",100,100],["t",E,D]])),f}function hl(m,g,l,f,E){var D=l.start,z=l.end,U=l.getWidth(),lt=l.getHeight(),Bt,Ut;E==="y"?(Bt=D.x+U/2,Ut=f.y<D.y?f.y:D.y):E==="x"?(Bt=f.x>D.x?f.x:D.x,Ut=D.y+lt/2):E==="xy"&&(l.isPolar?(Bt=l.getCenter().x,Ut=l.getCenter().y):(Bt=(D.x+z.x)/2,Ut=(D.y+z.y)/2));var $t=Nc(m,[Bt,Ut],E);m.animate({matrix:$t},g)}function Yc(m,g,l){var f=l.coordinate,E=l.minYPoint;hl(m,g,f,E,"x")}function _u(m,g,l){var f=l.coordinate,E=l.minYPoint;hl(m,g,f,E,"y")}function Ep(m,g,l){var f=l.coordinate,E=l.minYPoint;hl(m,g,f,E,"xy")}function Gc(m,g,l){var f=m.getTotalLength();m.attr("lineDash",[f]),m.animate(function(E){return{lineDashOffset:(1-E)*f}},g)}function Iu(m,g,l){var f=l.toAttrs,E=f.x,D=f.y;delete f.x,delete f.y,m.attr(f),m.animate({x:E,y:D},g)}function zc(m,g,l){var f=m.getBBox(),E=m.get("origin").mappingData,D=E.points,z=D[0].y-D[1].y>0?f.maxX:f.minX,U=(f.minY+f.maxY)/2;m.applyToMatrix([z,U,1]);var lt=Qn.transform(m.getMatrix(),[["t",-z,-U],["s",.01,1],["t",z,U]]);m.setMatrix(lt),m.animate({matrix:Qn.transform(m.getMatrix(),[["t",-z,-U],["s",100,1],["t",z,U]])},g)}function Ou(m,g,l){var f=m.getBBox(),E=m.get("origin").mappingData,D=(f.minX+f.maxX)/2,z=E.points,U=z[0].y-z[1].y<=0?f.maxY:f.minY;m.applyToMatrix([D,U,1]);var lt=Qn.transform(m.getMatrix(),[["t",-D,-U],["s",1,.01],["t",D,U]]);m.setMatrix(lt),m.animate({matrix:Qn.transform(m.getMatrix(),[["t",-D,-U],["s",1,100],["t",D,U]])},g)}var Xc=v(29291);function ku(m,g){var l,f=(0,Xc.Z)(m,g),E=f.startAngle,D=f.endAngle;return!(0,c.isNumberEqual)(E,-Math.PI*.5)&&E<-Math.PI*.5&&(E+=Math.PI*2),!(0,c.isNumberEqual)(D,-Math.PI*.5)&&D<-Math.PI*.5&&(D+=Math.PI*2),g[5]===0&&(l=[D,E],E=l[0],D=l[1]),(0,c.isNumberEqual)(E,Math.PI*1.5)&&(E=Math.PI*-.5),(0,c.isNumberEqual)(D,Math.PI*-.5)&&(D=Math.PI*1.5),{startAngle:E,endAngle:D}}function Oa(m){var g;return m[0]==="M"||m[0]==="L"?g=[m[1],m[2]]:(m[0]==="a"||m[0]==="A")&&(g=[m[m.length-2],m[m.length-1]]),g}function Bu(m){var g,l,f,E=m.filter(function(_r){return _r[0]==="A"||_r[0]==="a"}),D=E[0],z=E.length>1?E[1]:E[0],U=m.indexOf(D),lt=m.indexOf(z),Bt=Oa(m[U-1]),Ut=Oa(m[lt-1]),$t=ku(Bt,D),Kt=$t.startAngle,ae=$t.endAngle,ye=ku(Ut,z),Ae=ye.startAngle,$e=ye.endAngle;(0,c.isNumberEqual)(Kt,Ae)&&(0,c.isNumberEqual)(ae,$e)?(l=Kt,f=ae):(l=Math.min(Kt,Ae),f=Math.max(ae,$e));var nr=D[1],ir=E[E.length-1][1];return nr<ir?(g=[ir,nr],nr=g[0],ir=g[1]):nr===ir&&(ir=0),{startAngle:l,endAngle:f,radius:nr,innerRadius:ir}}function Hc(m,g,l){var f=l.toAttrs,E=l.coordinate,D=f.path,z=D.map(function(ir){return ir[0]}),U=Bu(D),lt=U.startAngle,Bt=U.endAngle,Ut=U.radius,$t=U.innerRadius,Kt=Bu(m.attr("path")),ae=Kt.startAngle,ye=Kt.endAngle,Ae=E.getCenter(),$e=lt-ae,nr=Bt-ye;m.animate(function(ir){var _r=ae+ir*$e,Gr=ye+ir*nr;return(0,d.__assign)((0,d.__assign)({},f),{path:(0,c.isEqual)(z,["M","A","A","Z"])?Pe(Ae.x,Ae.y,Ut,_r,Gr):Ee(Ae.x,Ae.y,Ut,_r,Gr,$t)})},(0,d.__assign)((0,d.__assign)({},g),{callback:function(){m.attr("path",D)}}))}function Du(m,g,l){var f=ze(l.coordinate,20),E=f.type,D=f.startState,z=f.endState,U=m.setClip({type:E,attrs:D});U.animate(z,(0,d.__assign)((0,d.__assign)({},g),{callback:function(){m&&!m.get("destroyed")&&m.set("clipShape",null),U.remove(!0)}}))}function fl(m,g,l){if(m.isGroup())(0,c.each)(m.getChildren(),function(U){fl(U,g,l)});else{var f=m.getBBox(),E=(f.minX+f.maxX)/2,D=(f.minY+f.maxY)/2;if(m.applyToMatrix([E,D,1]),l==="zoomIn"){var z=Qn.transform(m.getMatrix(),[["t",-E,-D],["s",.01,.01],["t",E,D]]);m.setMatrix(z),m.animate({matrix:Qn.transform(m.getMatrix(),[["t",-E,-D],["s",100,100],["t",E,D]])},g)}else m.animate({matrix:Qn.transform(m.getMatrix(),[["t",-E,-D],["s",.01,.01],["t",E,D]])},(0,d.__assign)((0,d.__assign)({},g),{callback:function(){m.remove(!0)}}))}}function Vc(m,g,l){fl(m,g,"zoomIn")}function Wc(m,g,l){fl(m,g,"zoomOut")}function ka(m){return[L.TOP,L.BOTTOM].includes(m)?{offsetX:0,offsetY:m===L.TOP?-8:8,style:{textAlign:"center",textBaseline:m===L.TOP?"bottom":"top"}}:[L.LEFT,L.RIGHT].includes(m)?{offsetX:m===L.LEFT?-8:8,offsetY:0,style:{textAlign:m===L.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function cl(m,g,l){return{x:m.x+g*Math.cos(l),y:m.y+g*Math.sin(l)}}var Fu=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:m.prototype.getDefaultTitleCfg.call(this)})},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.getRegion=function(l,f){var E=1/2,D={x:.5,y:.5},z=Math.PI*2/l,U=-1*Math.PI/2+z*f,lt=E/(1+1/Math.sin(z/2)),Bt=cl(D,E-lt,U),Ut=Math.PI*5/4,$t=Math.PI*1/4;return{start:cl(Bt,lt,Ut),end:cl(Bt,lt,$t)}},g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.beforeEachView=function(l,f){},g.prototype.generateFacets=function(l){var f=this,E=this.cfg,D=E.fields,z=E.type,U=D[0];if(!U)throw new Error("No `fields` specified!");var lt=this.getFieldValues(l,U),Bt=lt.length,Ut=[];return lt.forEach(function($t,Kt){var ae=[{field:U,value:$t,values:lt}],ye=(0,c.filter)(l,f.getFacetDataFilter(ae)),Ae={type:z,data:ye,region:f.getRegion(Bt,Kt),columnValue:$t,columnField:U,columnIndex:Kt,columnValuesLength:Bt,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};Ut.push(Ae)}),Ut},g.prototype.getXAxisOption=function(l,f,E,D){return E},g.prototype.getYAxisOption=function(l,f,E,D){return E},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f){var E=f.columnValue,D=f.view,z=(0,c.get)(l.cfg.title,"formatter"),U=(0,c.deepMix)({position:["50%","0%"],content:z?z(E):E},ka(L.TOP),l.cfg.title);D.annotation().text(U)})},g}(Re),Ru=Fu,Nu=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:m.prototype.getDefaultTitleCfg.call(this)})},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.beforeEachView=function(l,f){},g.prototype.generateFacets=function(l){var f=this,E=this.cfg.fields,D=this.cfg.cols,z=E[0];if(!z)throw new Error("No `fields` specified!");var U=this.getFieldValues(l,z),lt=U.length;D=D||lt;var Bt=this.getPageCount(lt,D),Ut=[];return U.forEach(function($t,Kt){var ae=f.getRowCol(Kt,D),ye=ae.row,Ae=ae.col,$e=[{field:z,value:$t,values:U}],nr=(0,c.filter)(l,f.getFacetDataFilter($e)),ir={type:f.cfg.type,data:nr,region:f.getRegion(Bt,D,Ae,ye),columnValue:$t,rowValue:$t,columnField:z,rowField:null,columnIndex:Ae,rowIndex:ye,columnValuesLength:D,rowValuesLength:Bt,total:lt};Ut.push(ir)}),Ut},g.prototype.getXAxisOption=function(l,f,E,D){return D.rowIndex!==D.rowValuesLength-1&&D.columnValuesLength*D.rowIndex+D.columnIndex+1+D.columnValuesLength<=D.total?(0,d.__assign)((0,d.__assign)({},E),{label:null,title:null}):E},g.prototype.getYAxisOption=function(l,f,E,D){return D.columnIndex!==0?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):E},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f){var E=f.columnValue,D=f.view,z=(0,c.get)(l.cfg.title,"formatter"),U=(0,c.deepMix)({position:["50%","0%"],content:z?z(E):E},ka(L.TOP),l.cfg.title);D.annotation().text(U)})},g.prototype.getPageCount=function(l,f){return Math.floor((l+f-1)/f)},g.prototype.getRowCol=function(l,f){var E=Math.floor(l/f),D=l%f;return{row:E,col:D}},g}(Re),jc=Nu,Uc=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,d.__assign)({},m.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,d.__assign)({},m.prototype.getDefaultTitleCfg.call(this))})},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.beforeEachView=function(l,f){},g.prototype.generateFacets=function(l){for(var f=this.cfg,E=f.fields,D=f.type,z=E.length,U=z,lt=[],Bt=0;Bt<U;Bt++)for(var Ut=E[Bt],$t=0;$t<z;$t++){var Kt=E[$t],ae={type:D,data:l,region:this.getRegion(z,U,Bt,$t),columnValue:Ut,rowValue:Kt,columnField:Ut,rowField:Kt,columnIndex:Bt,rowIndex:$t,columnValuesLength:U,rowValuesLength:z};lt.push(ae)}return lt},g.prototype.getXAxisOption=function(l,f,E,D){return D.rowIndex!==D.rowValuesLength-1?(0,d.__assign)((0,d.__assign)({},E),{label:null,title:null}):E},g.prototype.getYAxisOption=function(l,f,E,D){return D.columnIndex!==0?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):E},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f,E){var D=f.columnIndex,z=f.rowIndex,U=f.columnValuesLength,lt=f.rowValuesLength,Bt=f.columnValue,Ut=f.rowValue,$t=f.view;if(z===0){var Kt=(0,c.get)(l.cfg.columnTitle,"formatter"),ae=(0,c.deepMix)({position:["50%","0%"],content:Kt?Kt(Bt):Bt},ka(L.TOP),l.cfg.columnTitle);$t.annotation().text(ae)}if(D===U-1){var Kt=(0,c.get)(l.cfg.rowTitle,"formatter"),ae=(0,c.deepMix)({position:["100%","50%"],content:Kt?Kt(Ut):Ut},ka(L.RIGHT),l.cfg.rowTitle);$t.annotation().text(ae)}})},g}(Re),Zc=Uc,Yu=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:m.prototype.getDefaultTitleCfg.call(this),transpose:!1})},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.beforeEachView=function(l,f){this.cfg.transpose?f.columnIndex%2==0?l.coordinate().transpose().reflect("x"):l.coordinate().transpose():f.rowIndex%2!=0&&l.coordinate().reflect("y")},g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.generateFacets=function(l){var f=this,E=this.cfg.fields[0],D=[],z=1,U=1,lt=[""],Bt=[""],Ut,$t;return this.cfg.transpose?(Ut=E,lt=this.getFieldValues(l,Ut).slice(0,2),z=lt.length):($t=E,Bt=this.getFieldValues(l,$t).slice(0,2),U=Bt.length),lt.forEach(function(Kt,ae){Bt.forEach(function(ye,Ae){var $e=[{field:Ut,value:Kt,values:lt},{field:$t,value:ye,values:Bt}],nr=(0,c.filter)(l,f.getFacetDataFilter($e)),ir={type:f.cfg.type,data:nr,region:f.getRegion(U,z,ae,Ae),columnValue:Kt,rowValue:ye,columnField:Ut,rowField:$t,columnIndex:ae,rowIndex:Ae,columnValuesLength:z,rowValuesLength:U};D.push(ir)})}),D},g.prototype.getXAxisOption=function(l,f,E,D){return D.columnIndex===1||D.rowIndex===1?(0,d.__assign)((0,d.__assign)({},E),{label:null,title:null}):E},g.prototype.getYAxisOption=function(l,f,E,D){return E},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f,E){var D=f.columnValue,z=f.rowValue,U=f.view,lt=(0,c.get)(l.cfg.title,"formatter");if(l.cfg.transpose){var Bt=(0,c.deepMix)({position:["50%","0%"],content:lt?lt(D):D},ka(L.TOP),l.cfg.title);U.annotation().text(Bt)}else{var Bt=(0,c.deepMix)({position:["100%","50%"],content:lt?lt(z):z},ka(L.RIGHT),l.cfg.title);U.annotation().text(Bt)}})},g}(Re),Kc=Yu,$c=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.beforeEachView=function(l,f){},g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,d.__assign)({},m.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,d.__assign)({},m.prototype.getDefaultTitleCfg.call(this))})},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.generateFacets=function(l){var f=this,E=this.cfg.fields,D=E[0],z=E[1],U=[],lt=1,Bt=1,Ut=[""],$t=[""];return D&&(Ut=this.getFieldValues(l,D),lt=Ut.length),z&&($t=this.getFieldValues(l,z),Bt=$t.length),Ut.forEach(function(Kt,ae){$t.forEach(function(ye,Ae){var $e=[{field:D,value:Kt,values:Ut},{field:z,value:ye,values:$t}],nr=(0,c.filter)(l,f.getFacetDataFilter($e)),ir={type:f.cfg.type,data:nr,region:f.getRegion(Bt,lt,ae,Ae),columnValue:Kt,rowValue:ye,columnField:D,rowField:z,columnIndex:ae,rowIndex:Ae,columnValuesLength:lt,rowValuesLength:Bt};U.push(ir)})}),U},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f,E){var D=f.columnIndex,z=f.rowIndex,U=f.columnValuesLength,lt=f.columnValue,Bt=f.rowValue,Ut=f.view;if(z===0){var $t=(0,c.get)(l.cfg.columnTitle,"formatter"),Kt=(0,c.deepMix)({position:["50%","0%"],content:$t?$t(lt):lt},ka(L.TOP),l.cfg.columnTitle);Ut.annotation().text(Kt)}if(D===U-1){var $t=(0,c.get)(l.cfg.rowTitle,"formatter"),Kt=(0,c.deepMix)({position:["100%","50%"],content:$t?$t(Bt):Bt},ka(L.RIGHT),l.cfg.rowTitle);Ut.annotation().text(Kt)}})},g.prototype.getXAxisOption=function(l,f,E,D){return D.rowIndex!==D.rowValuesLength-1?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):D.columnIndex!==Math.floor((D.columnValuesLength-1)/2)?(0,d.__assign)((0,d.__assign)({},E),{title:null}):E},g.prototype.getYAxisOption=function(l,f,E,D){return D.columnIndex!==0?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):D.rowIndex!==Math.floor((D.rowValuesLength-1)/2)?(0,d.__assign)((0,d.__assign)({},E),{title:null}):E},g}(Re),vl=$c,Qc=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.afterChartRender=function(){l.facets&&l.cfg.line&&(l.container.clear(),l.drawLines(l.facets))},l}return g.prototype.afterEachView=function(l,f){this.processAxis(l,f)},g.prototype.beforeEachView=function(l,f){},g.prototype.init=function(){m.prototype.init.call(this),this.view.on(P.AFTER_RENDER,this.afterChartRender)},g.prototype.getDefaultCfg=function(){return(0,c.deepMix)({},m.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:m.prototype.getDefaultTitleCfg.call(this)})},g.prototype.generateFacets=function(l){var f=this.cfg.fields;if(!f.length)throw new Error("Please specify for the fields for rootFacet!");var E=[],D={type:this.cfg.type,data:l,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return E.push(D),D.children=this.getChildFacets(l,1,E),this.setRegion(E),E},g.prototype.setRegion=function(l){var f=this;this.forceColIndex(l),l.forEach(function(E){E.region=f.getRegion(E.rowValuesLength,E.columnValuesLength,E.columnIndex,E.rowIndex)})},g.prototype.getRegion=function(l,f,E,D){var z=1/f,U=1/l,lt={x:z*E,y:U*D},Bt={x:lt.x+z,y:lt.y+U*2/3};return{start:lt,end:Bt}},g.prototype.forceColIndex=function(l){var f=this,E=[],D=0;l.forEach(function(Kt){f.isLeaf(Kt)&&(E.push(Kt),Kt.columnIndex=D,D++)}),E.forEach(function(Kt){Kt.columnValuesLength=E.length});for(var z=this.cfg.fields.length,U=z-1;U>=0;U--)for(var lt=this.getFacetsByLevel(l,U),Bt=0,Ut=lt;Bt<Ut.length;Bt++){var $t=Ut[Bt];this.isLeaf($t)||($t.originColIndex=$t.columnIndex,$t.columnIndex=this.getRegionIndex($t.children),$t.columnValuesLength=E.length)}},g.prototype.getFacetsByLevel=function(l,f){var E=[];return l.forEach(function(D){D.rowIndex===f&&E.push(D)}),E},g.prototype.getRegionIndex=function(l){var f=l[0],E=l[l.length-1];return(E.columnIndex-f.columnIndex)/2+f.columnIndex},g.prototype.isLeaf=function(l){return!l.children||!l.children.length},g.prototype.getRows=function(){return this.cfg.fields.length+1},g.prototype.getChildFacets=function(l,f,E){var D=this,z=this.cfg.fields,U=z.length;if(!(U<f)){var lt=[],Bt=z[f-1],Ut=this.getFieldValues(l,Bt);return Ut.forEach(function($t,Kt){var ae=[{field:Bt,value:$t,values:Ut}],ye=l.filter(D.getFacetDataFilter(ae));if(ye.length){var Ae={type:D.cfg.type,data:ye,region:null,columnValue:$t,rowValue:"",columnField:Bt,rowField:"",columnIndex:Kt,rowValuesLength:D.getRows(),columnValuesLength:1,rowIndex:f,children:D.getChildFacets(ye,f+1,E)};lt.push(Ae),E.push(Ae)}}),lt}},g.prototype.render=function(){m.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},g.prototype.renderTitle=function(){var l=this;(0,c.each)(this.facets,function(f){var E=f.columnValue,D=f.view,z=(0,c.get)(l.cfg.title,"formatter"),U=(0,c.deepMix)({position:["50%","0%"],content:z?z(E):E},ka(L.TOP),l.cfg.title);D.annotation().text(U)})},g.prototype.drawLines=function(l){var f=this;l.forEach(function(E){if(!f.isLeaf(E)){var D=E.children;f.addFacetLines(E,D)}})},g.prototype.addFacetLines=function(l,f){var E=this,D=l.view,z=D.coordinateBBox,U={x:z.x+z.width/2,y:z.y+z.height};f.forEach(function(lt){var Bt=lt.view.coordinateBBox,Ut={x:Bt.bl.x+(Bt.tr.x-Bt.bl.x)/2,y:Bt.tr.y},$t={x:U.x,y:U.y+(Ut.y-U.y)/2},Kt={x:Ut.x,y:$t.y};E.drawLine([U,$t,Kt,Ut])})},g.prototype.getPath=function(l){var f=[],E=this.cfg.line.smooth;return E?(f.push(["M",l[0].x,l[0].y]),f.push(["C",l[1].x,l[1].y,l[2].x,l[2].y,l[3].x,l[3].y])):l.forEach(function(D,z){z===0?f.push(["M",D.x,D.y]):f.push(["L",D.x,D.y])}),f},g.prototype.drawLine=function(l){var f=this.getPath(l),E=this.cfg.line.style;this.container.addShape("path",{attrs:(0,c.assign)({path:f},E)})},g.prototype.getXAxisOption=function(l,f,E,D){return D.rowIndex!==D.rowValuesLength-1?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):E},g.prototype.getYAxisOption=function(l,f,E,D){return D.originColIndex!==0&&D.columnIndex!==0?(0,d.__assign)((0,d.__assign)({},E),{title:null,label:null}):E},g}(Re),Jc=Qc,qc=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;return f.cache=new Map,f.foregroundContainer=f.view.getLayer(F.FORE).addGroup(),f.backgroundContainer=f.view.getLayer(F.BG).addGroup(),f.option=[],f}return Object.defineProperty(g.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.layout=function(){var l=this,f=this.getComponents(),E=function(z){var U=z.component,lt=z.extra,Bt=lt.type,Ut=l.getAnnotationTheme(Bt);U.update(l.getAnnotationCfg(Bt,lt,Ut))},D=function(z){var U=l.createAnnotation(z);U&&(U.component.init(),z.type==="regionFilter"&&U.component.render(),l.cache.set(z,U))};f.length?(0,c.each)(f,function(z){var U=z.component;U.get("type")==="regionFilter"?l.view.getRootView().once(P.AFTER_RENDER,function(){E(z)}):E(z)}):(0,c.each)(this.option,function(z){z.type==="regionFilter"?l.view.getRootView().once(P.AFTER_RENDER,function(){D(z)}):D(z)})},g.prototype.render=function(){},g.prototype.update=function(){var l=this,f=new WeakMap,E=function(D){var z=D.type,U=l.getAnnotationTheme(z),lt=l.getAnnotationCfg(z,D,U),Bt=l.cache.get(D);if(Bt)fr(lt,["container"]),Bt.component.update(lt),f.set(D,!0);else{var Ut=l.createAnnotation(D);Ut&&(Ut.component.init(),D.type==="regionFilter"&&Ut.component.render(),l.cache.set(D,Ut),f.set(D,!0))}};this.view.once(P.AFTER_RENDER,function(){(0,c.each)(l.option,function(z){z.type==="regionFilter"&&E(z)});var D=new Map;l.cache.forEach(function(z,U){f.has(U)?D.set(U,z):z.component.destroy()}),l.cache=D}),(0,c.each)(this.option,function(D){D.type!=="regionFilter"&&E(D)})},g.prototype.clear=function(l){l===void 0&&(l=!1),m.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),l&&(this.option=[])},g.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},g.prototype.getComponents=function(){var l=[];return this.cache.forEach(function(f){l.push(f)}),l},g.prototype.createAnnotation=function(l){var f=l.type,E=Yt.Annotation[(0,c.upperFirst)(f)];if(E){var D=this.getAnnotationTheme(f),z=this.getAnnotationCfg(f,l,D),U=new E(z);return{component:U,layer:this.isTop(z)?F.FORE:F.BG,direction:L.NONE,type:O.ANNOTATION,extra:l}}},g.prototype.annotation=function(l){this.option.push(l)},g.prototype.arc=function(l){return this.annotation((0,d.__assign)({type:"arc"},l)),this},g.prototype.image=function(l){return this.annotation((0,d.__assign)({type:"image"},l)),this},g.prototype.line=function(l){return this.annotation((0,d.__assign)({type:"line"},l)),this},g.prototype.region=function(l){return this.annotation((0,d.__assign)({type:"region"},l)),this},g.prototype.text=function(l){return this.annotation((0,d.__assign)({type:"text"},l)),this},g.prototype.dataMarker=function(l){return this.annotation((0,d.__assign)({type:"dataMarker"},l)),this},g.prototype.dataRegion=function(l){this.annotation((0,d.__assign)({type:"dataRegion"},l))},g.prototype.regionFilter=function(l){this.annotation((0,d.__assign)({type:"regionFilter"},l))},g.prototype.parsePosition=function(l){var f=this.view.getXScale(),E=this.view.getScalesByDim("y"),D=(0,c.isFunction)(l)?l.call(null,f,E):l,z=0,U=0;if((0,c.isArray)(D)){var lt=D[0],Bt=D[1];if((0,c.isString)(lt)&&lt.indexOf("%")!==-1&&!isNaN(lt.slice(0,-1)))return this.parsePercentPosition(D);z=this.getNormalizedValue(lt,f),U=this.getNormalizedValue(Bt,Object.values(E)[0])}else if(!(0,c.isNil)(D))for(var Ut=0,$t=(0,c.keys)(D);Ut<$t.length;Ut++){var Kt=$t[Ut],ae=D[Kt];Kt===f.field&&(z=this.getNormalizedValue(ae,f)),E[Kt]&&(U=this.getNormalizedValue(ae,E[Kt]))}return this.view.getCoordinate().convert({x:z,y:U})},g.prototype.getRegionPoints=function(l,f){var E=this,D=this.view.getXScale(),z=this.view.getScalesByDim("y"),U=Object.values(z)[0],lt=D.field,Bt=this.view.getData(),Ut=(0,c.isArray)(l)?l[0]:l[lt],$t=(0,c.isArray)(f)?f[0]:f[lt],Kt=[],ae;return(0,c.each)(Bt,function(ye,Ae){if(ye[lt]===Ut&&(ae=Ae),Ae>=ae){var $e=E.parsePosition([ye[lt],ye[U.field]]);$e&&Kt.push($e)}if(ye[lt]===$t)return!1}),Kt},g.prototype.getNormalizedValue=function(l,f){var E,D;switch(l){case"start":E=0;break;case"end":E=1;break;case"median":{D=f.isCategory?(f.values.length-1)/2:(f.min+f.max)/2,E=f.scale(D);break}case"min":case"max":f.isCategory?D=l==="min"?0:f.values.length-1:D=f[l],E=f.scale(D);break;default:E=f.scale(l)}return E},g.prototype.parsePercentPosition=function(l){var f=parseFloat(l[0])/100,E=parseFloat(l[1])/100,D=this.view.getCoordinate(),z=D.start,U=D.end,lt={x:Math.min(z.x,U.x),y:Math.min(z.y,U.y)},Bt=D.getWidth()*f+lt.x,Ut=D.getHeight()*E+lt.y;return{x:Bt,y:Ut}},g.prototype.getCoordinateBBox=function(){var l=this.view.getCoordinate(),f=l.start,E=l.end,D=l.getWidth(),z=l.getHeight(),U={x:Math.min(f.x,E.x),y:Math.min(f.y,E.y)};return{x:U.x,y:U.y,minX:U.x,minY:U.y,maxX:U.x+D,maxY:U.y+z,width:D,height:z}},g.prototype.getAnnotationCfg=function(l,f,E){var D=this.view.getCoordinate(),z={};if((0,c.isNil)(f))return null;if(l==="arc"){var U=f,lt=U.start,Bt=U.end,Ut=this.parsePosition(lt),$t=this.parsePosition(Bt),Kt=Oe(D,Ut),ae=Oe(D,$t);Kt>ae&&(ae=Math.PI*2+ae),z={center:D.getCenter(),radius:ie(D,Ut),startAngle:Kt,endAngle:ae}}else if(l==="image"){var ye=f,lt=ye.start,Bt=ye.end;z={start:this.parsePosition(lt),end:this.parsePosition(Bt),src:f.src}}else if(l==="line"){var Ae=f,lt=Ae.start,Bt=Ae.end;z={start:this.parsePosition(lt),end:this.parsePosition(Bt),text:(0,c.get)(f,"text",null)}}else if(l==="region"){var $e=f,lt=$e.start,Bt=$e.end;z={start:this.parsePosition(lt),end:this.parsePosition(Bt)}}else if(l==="text"){var nr=this.view.getData(),ir=f,_r=ir.position,Gr=ir.content,qr=(0,d.__rest)(ir,["position","content"]),mn=Gr;(0,c.isFunction)(Gr)&&(mn=Gr(nr)),z=(0,d.__assign)((0,d.__assign)((0,d.__assign)({},this.parsePosition(_r)),qr),{content:mn})}else if(l==="dataMarker"){var kn=f,_r=kn.position,Rn=kn.point,cn=kn.line,Vn=kn.text,vi=kn.autoAdjust,la=kn.direction;z=(0,d.__assign)((0,d.__assign)({},this.parsePosition(_r)),{coordinateBBox:this.getCoordinateBBox(),point:Rn,line:cn,text:Vn,autoAdjust:vi,direction:la})}else if(l==="dataRegion"){var mi=f,lt=mi.start,Bt=mi.end,Mi=mi.region,Vn=mi.text,Fa=mi.lineLength;z={points:this.getRegionPoints(lt,Bt),region:Mi,text:Vn,lineLength:Fa}}else if(l==="regionFilter"){var Fo=f,lt=Fo.start,Bt=Fo.end,kh=Fo.apply,$v=Fo.color,Qv=this.view.geometries,Bh=[],As=function(qa){!qa||(qa.isGroup()?qa.getChildren().forEach(function(ns){return As(ns)}):Bh.push(qa))};(0,c.each)(Qv,function(qa){kh?(0,c.contains)(kh,qa.type)&&(0,c.each)(qa.elements,function(ns){As(ns.shape)}):(0,c.each)(qa.elements,function(ns){As(ns.shape)})}),z={color:$v,shapes:Bh,start:this.parsePosition(lt),end:this.parsePosition(Bt)}}var Ea=(0,c.deepMix)({},E,(0,d.__assign)((0,d.__assign)({},z),{top:f.top,style:f.style,offsetX:f.offsetX,offsetY:f.offsetY}));return Ea.container=this.getComponentContainer(Ea),Ea.animate=this.view.getOptions().animate&&Ea.animate&&(0,c.get)(f,"animate",Ea.animate),Ea.animateOption=(0,c.deepMix)({},Li,Ea.animateOption,f.animateOption),Ea},g.prototype.isTop=function(l){return(0,c.get)(l,"top",!0)},g.prototype.getComponentContainer=function(l){return this.isTop(l)?this.foregroundContainer:this.backgroundContainer},g.prototype.getAnnotationTheme=function(l){return(0,c.get)(this.view.getTheme(),["components","annotation",l],{})},g}(dt),tv=qc;function Gu(m,g){return(0,c.get)(m,["components","axis",g,"grid"],{})}function ms(m,g,l,f){var E=[],D=g.getTicks();return m.isPolar&&D.push({value:1,text:"",tickValue:""}),D.reduce(function(z,U,lt){var Bt=U.value;if(f)E.push({points:[m.convert(l==="y"?{x:0,y:Bt}:{x:Bt,y:0}),m.convert(l==="y"?{x:1,y:Bt}:{x:Bt,y:1})]});else if(lt){var Ut=z.value,$t=(Ut+Bt)/2;E.push({points:[m.convert(l==="y"?{x:0,y:$t}:{x:$t,y:0}),m.convert(l==="y"?{x:1,y:$t}:{x:$t,y:1})]})}return U},D[0]),E}function dl(m,g,l,f,E){var D=g.values.length,z=[],U=l.getTicks();return U.reduce(function(lt,Bt){var Ut=lt?lt.value:Bt.value,$t=Bt.value,Kt=(Ut+$t)/2;return E==="x"?z.push({points:[m.convert({x:f?$t:Kt,y:0}),m.convert({x:f?$t:Kt,y:1})]}):z.push({points:(0,c.map)(Array(D+1),function(ae,ye){return m.convert({x:ye/D,y:f?$t:Kt})})}),Bt},U[0]),z}function zu(m,g){var l=(0,c.get)(g,"grid");if(l===null)return!1;var f=(0,c.get)(m,"grid");return!(l===void 0&&f===null)}var $a=["container"],Xu=(0,d.__assign)((0,d.__assign)({},Li),{appear:null}),ev=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;return f.cache=new Map,f.gridContainer=f.view.getLayer(F.BG).addGroup(),f.axisContainer=f.view.getLayer(F.BG).addGroup(),f}return Object.defineProperty(g.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.render=function(){this.update()},g.prototype.layout=function(){var l=this,f=this.view.getCoordinate();(0,c.each)(this.getComponents(),function(E){var D=E.component,z=E.direction,U=E.type,lt=E.extra,Bt=lt.dim,Ut=lt.scale,$t=lt.alignTick,Kt;if(U===O.AXIS)f.isPolar?Bt==="x"?Kt=f.isTransposed?Pt(f,z):ee(f):Bt==="y"&&(Kt=f.isTransposed?ee(f):Pt(f,z)):Kt=Pt(f,z);else if(U===O.GRID)if(f.isPolar){var ae=void 0;f.isTransposed?ae=Bt==="x"?dl(f,l.view.getYScales()[0],Ut,$t,Bt):ms(f,Ut,Bt,$t):ae=Bt==="x"?ms(f,Ut,Bt,$t):dl(f,l.view.getXScale(),Ut,$t,Bt),Kt={items:ae,center:l.view.getCoordinate().getCenter()}}else Kt={items:ms(f,Ut,Bt,$t)};D.update(Kt)})},g.prototype.update=function(){this.option=this.view.getOptions().axes;var l=new Map;this.updateXAxes(l),this.updateYAxes(l);var f=new Map;this.cache.forEach(function(E,D){l.has(D)?f.set(D,E):E.component.destroy()}),this.cache=f},g.prototype.clear=function(){m.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},g.prototype.getComponents=function(){var l=[];return this.cache.forEach(function(f){l.push(f)}),l},g.prototype.updateXAxes=function(l){var f=this.view.getXScale();if(!(!f||f.isIdentity)){var E=ge(this.option,f.field);if(E!==!1){var D=De(E,L.BOTTOM),z=F.BG,U="x",lt=this.view.getCoordinate(),Bt=this.getId("axis",f.field),Ut=this.getId("grid",f.field);if(lt.isRect){var $t=this.cache.get(Bt);if($t){var Kt=this.getLineAxisCfg(f,E,D);fr(Kt,$a),$t.component.update(Kt),l.set(Bt,$t)}else $t=this.createLineAxis(f,E,z,D,U),this.cache.set(Bt,$t),l.set(Bt,$t);var ae=this.cache.get(Ut);if(ae){var Kt=this.getLineGridCfg(f,E,D,U);fr(Kt,$a),ae.component.update(Kt),l.set(Ut,ae)}else ae=this.createLineGrid(f,E,z,D,U),ae&&(this.cache.set(Ut,ae),l.set(Ut,ae))}else if(lt.isPolar){var $t=this.cache.get(Bt);if($t){var Kt=lt.isTransposed?this.getLineAxisCfg(f,E,L.RADIUS):this.getCircleAxisCfg(f,E,D);fr(Kt,$a),$t.component.update(Kt),l.set(Bt,$t)}else{if(lt.isTransposed){if((0,c.isUndefined)(E))return;$t=this.createLineAxis(f,E,z,L.RADIUS,U)}else $t=this.createCircleAxis(f,E,z,D,U);this.cache.set(Bt,$t),l.set(Bt,$t)}var ae=this.cache.get(Ut);if(ae){var Kt=lt.isTransposed?this.getCircleGridCfg(f,E,L.RADIUS,U):this.getLineGridCfg(f,E,L.CIRCLE,U);fr(Kt,$a),ae.component.update(Kt),l.set(Ut,ae)}else{if(lt.isTransposed){if((0,c.isUndefined)(E))return;ae=this.createCircleGrid(f,E,z,L.RADIUS,U)}else ae=this.createLineGrid(f,E,z,L.CIRCLE,U);ae&&(this.cache.set(Ut,ae),l.set(Ut,ae))}}}}},g.prototype.updateYAxes=function(l){var f=this,E=this.view.getYScales();(0,c.each)(E,function(D,z){if(!(!D||D.isIdentity)){var U=D.field,lt=ge(f.option,U);if(lt!==!1){var Bt=F.BG,Ut="y",$t=f.getId("axis",U),Kt=f.getId("grid",U),ae=f.view.getCoordinate();if(ae.isRect){var ye=De(lt,z===0?L.LEFT:L.RIGHT),Ae=f.cache.get($t);if(Ae){var $e=f.getLineAxisCfg(D,lt,ye);fr($e,$a),Ae.component.update($e),l.set($t,Ae)}else Ae=f.createLineAxis(D,lt,Bt,ye,Ut),f.cache.set($t,Ae),l.set($t,Ae);var nr=f.cache.get(Kt);if(nr){var $e=f.getLineGridCfg(D,lt,ye,Ut);fr($e,$a),nr.component.update($e),l.set(Kt,nr)}else nr=f.createLineGrid(D,lt,Bt,ye,Ut),nr&&(f.cache.set(Kt,nr),l.set(Kt,nr))}else if(ae.isPolar){var Ae=f.cache.get($t);if(Ae){var $e=ae.isTransposed?f.getCircleAxisCfg(D,lt,L.CIRCLE):f.getLineAxisCfg(D,lt,L.RADIUS);fr($e,$a),Ae.component.update($e),l.set($t,Ae)}else{if(ae.isTransposed){if((0,c.isUndefined)(lt))return;Ae=f.createCircleAxis(D,lt,Bt,L.CIRCLE,Ut)}else Ae=f.createLineAxis(D,lt,Bt,L.RADIUS,Ut);f.cache.set($t,Ae),l.set($t,Ae)}var nr=f.cache.get(Kt);if(nr){var $e=ae.isTransposed?f.getLineGridCfg(D,lt,L.CIRCLE,Ut):f.getCircleGridCfg(D,lt,L.RADIUS,Ut);fr($e,$a),nr.component.update($e),l.set(Kt,nr)}else{if(ae.isTransposed){if((0,c.isUndefined)(lt))return;nr=f.createLineGrid(D,lt,Bt,L.CIRCLE,Ut)}else nr=f.createCircleGrid(D,lt,Bt,L.RADIUS,Ut);nr&&(f.cache.set(Kt,nr),l.set(Kt,nr))}}}}})},g.prototype.createLineAxis=function(l,f,E,D,z){var U={component:new K(this.getLineAxisCfg(l,f,D)),layer:E,direction:D===L.RADIUS?L.NONE:D,type:O.AXIS,extra:{dim:z,scale:l}};return U.component.set("field",l.field),U.component.init(),U},g.prototype.createLineGrid=function(l,f,E,D,z){var U=this.getLineGridCfg(l,f,D,z);if(U){var lt={component:new J(U),layer:E,direction:L.NONE,type:O.GRID,extra:{dim:z,scale:l,alignTick:(0,c.get)(U,"alignTick",!0)}};return lt.component.init(),lt}},g.prototype.createCircleAxis=function(l,f,E,D,z){var U={component:new ht(this.getCircleAxisCfg(l,f,D)),layer:E,direction:D,type:O.AXIS,extra:{dim:z,scale:l}};return U.component.set("field",l.field),U.component.init(),U},g.prototype.createCircleGrid=function(l,f,E,D,z){var U=this.getCircleGridCfg(l,f,D,z);if(U){var lt={component:new At(U),layer:E,direction:L.NONE,type:O.GRID,extra:{dim:z,scale:l,alignTick:(0,c.get)(U,"alignTick",!0)}};return lt.component.init(),lt}},g.prototype.getLineAxisCfg=function(l,f,E){var D=this.axisContainer,z=this.view.getCoordinate(),U=Pt(z,E),lt=er(l,f),Bt=Nt(this.view.getTheme(),E),Ut=(0,c.get)(f,["title"])?(0,c.deepMix)({title:{style:{text:lt}}},f):f,$t=(0,c.deepMix)((0,d.__assign)((0,d.__assign)({container:D},U),{ticks:l.getTicks().map(function(_r){return{id:""+_r.tickValue,name:_r.text,value:_r.value}}),verticalFactor:z.isPolar?Et(U,z.getCenter())*-1:Et(U,z.getCenter())}),Bt,Ut),Kt=this.getAnimateCfg($t),ae=Kt.animate,ye=Kt.animateOption;$t.animateOption=ye,$t.animate=ae;var Ae=ut(U),$e=(0,c.get)($t,"verticalLimitLength",Ae?1/3:1/2);if($e<=1){var nr=this.view.getCanvas().get("width"),ir=this.view.getCanvas().get("height");$t.verticalLimitLength=$e*(Ae?nr:ir)}return $t},g.prototype.getLineGridCfg=function(l,f,E,D){if(!!zu(Nt(this.view.getTheme(),E),f)){var z=Gu(this.view.getTheme(),E),U=(0,c.deepMix)({container:this.gridContainer},z,(0,c.get)(f,"grid"),this.getAnimateCfg(f));return U.items=ms(this.view.getCoordinate(),l,D,(0,c.get)(U,"alignTick",!0)),U}},g.prototype.getCircleAxisCfg=function(l,f,E){var D=this.axisContainer,z=this.view.getCoordinate(),U=l.getTicks().map(function(Ae){return{id:""+Ae.tickValue,name:Ae.text,value:Ae.value}});!l.isCategory&&Math.abs(z.endAngle-z.startAngle)===Math.PI*2&&U.pop();var lt=er(l,f),Bt=Nt(this.view.getTheme(),L.CIRCLE),Ut=(0,c.get)(f,["title"])?(0,c.deepMix)({title:{style:{text:lt}}},f):f,$t=(0,c.deepMix)((0,d.__assign)((0,d.__assign)({container:D},ee(this.view.getCoordinate())),{ticks:U,verticalFactor:1}),Bt,Ut),Kt=this.getAnimateCfg($t),ae=Kt.animate,ye=Kt.animateOption;return $t.animate=ae,$t.animateOption=ye,$t},g.prototype.getCircleGridCfg=function(l,f,E,D){if(!!zu(Nt(this.view.getTheme(),E),f)){var z=Gu(this.view.getTheme(),L.RADIUS),U=(0,c.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},z,(0,c.get)(f,"grid"),this.getAnimateCfg(f)),lt=(0,c.get)(U,"alignTick",!0),Bt=D==="x"?this.view.getYScales()[0]:this.view.getXScale();return U.items=dl(this.view.getCoordinate(),Bt,l,lt,D),U}},g.prototype.getId=function(l,f){var E=this.view.getCoordinate();return l+"-"+f+"-"+E.type},g.prototype.getAnimateCfg=function(l){return{animate:this.view.getOptions().animate&&(0,c.get)(l,"animate"),animateOption:l&&l.animateOption?(0,c.deepMix)({},Xu,l.animateOption):Xu}},g}(dt),rv=ev;function xs(m,g,l){return l===L.TOP?[m.minX+m.width/2-g.width/2,m.minY]:l===L.BOTTOM?[m.minX+m.width/2-g.width/2,m.maxY-g.height]:l===L.LEFT?[m.minX,m.minY+m.height/2-g.height/2]:l===L.RIGHT?[m.maxX-g.width,m.minY+m.height/2-g.height/2]:l===L.TOP_LEFT||l===L.LEFT_TOP?[m.tl.x,m.tl.y]:l===L.TOP_RIGHT||l===L.RIGHT_TOP?[m.tr.x-g.width,m.tr.y]:l===L.BOTTOM_LEFT||l===L.LEFT_BOTTOM?[m.bl.x,m.bl.y-g.height]:l===L.BOTTOM_RIGHT||l===L.RIGHT_BOTTOM?[m.br.x-g.width,m.br.y-g.height]:[0,0]}function nv(m,g){if(g.isTransposed)switch(m){case DIRECTION.BOTTOM:return DIRECTION.LEFT;case DIRECTION.LEFT:return DIRECTION.BOTTOM;case DIRECTION.RIGHT:return DIRECTION.TOP;case DIRECTION.TOP:return DIRECTION.RIGHT}return m}function Hu(m){return m===DIRECTION.LEFT?DIRECTION.RIGHT:m===DIRECTION.RIGHT?DIRECTION.LEFT:m}function Vu(m){return m===DIRECTION.TOP?DIRECTION.BOTTOM:m===DIRECTION.BOTTOM?DIRECTION.TOP:m}function iv(m,g){var l=g.matrix[0],f=g.matrix[4],E=m;return l<0&&(E=Hu(E)),f<0&&(E=Vu(E)),E}function av(m,g){var l=m;return g.isReflect("x")&&(l=Hu(l)),g.isReflect("y")&&(l=Vu(l)),l}function Ap(m,g){var l=m;return l=nv(l,g),l=iv(l,g),l=av(l,g),l}function pl(m,g,l){if(!m)return l;var f;if(m.callback&&m.callback.length>1){var E=Array(m.callback.length-1).fill("");f=m.mapping.apply(m,(0,d.__spreadArrays)([g],E)).join("")}else f=m.mapping(g).join("");return f||l}function Oo(m){var g=m.symbol;(0,c.isString)(g)&&Za[g]&&(m.symbol=Za[g])}function gl(m){return m.startsWith(L.LEFT)||m.startsWith(L.RIGHT)?"vertical":"horizontal"}function Wu(m,g,l,f,E){var D=l.getScale(l.type);if(D.isCategory){var z=D.field,U=g.getAttribute("color"),lt=g.getAttribute("shape"),Bt=m.getTheme().defaultColor,Ut=g.coordinate.isPolar;return D.getTicks().map(function($t){var Kt,ae=$t.text,ye=$t.value,Ae=ae,$e=D.invert(ye),nr=m.filterFieldData(z,[(Kt={},Kt[z]=$e,Kt)]).length===0,ir=pl(U,$e,Bt),_r=pl(lt,$e,"point"),Gr=g.getShapeMarker(_r,{color:ir,isInPolar:Ut});return Gr=(0,c.deepMix)({},f,Gr,E),Oo(Gr),{id:$e,name:Ae,value:$e,marker:Gr,unchecked:nr}})}return[]}function ov(m,g,l){return l.map(function(f){var E=(0,c.deepMix)({},m,g,f.marker);return Oo(E),f.marker=E,f})}function ju(m,g){return(0,c.isBoolean)(m)?m===!1?!1:{}:(0,c.get)(m,[g],m)}function qo(m){return(0,c.get)(m,"position",L.BOTTOM)}var Uu=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;return f.container=f.view.getLayer(F.FORE).addGroup(),f}return Object.defineProperty(g.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.render=function(){var l=this;this.option=this.view.getOptions().legends;var f=function(U,lt,Bt){var Ut=l.createFieldLegend(U,lt,Bt);Ut&&(Ut.component.init(),l.components.push(Ut))};if((0,c.get)(this.option,"custom")){var E=this.createCustomLegend(void 0,void 0,void 0,this.option);if(E){E.init();var D=F.FORE,z=qo(this.option);this.components.push({id:"global-custom",component:E,layer:D,direction:z,type:O.LEGEND,extra:void 0})}}else this.loopLegends(f)},g.prototype.layout=function(){var l=this;this.layoutBBox=this.view.viewBBox;var f=(0,c.get)(this.view.getTheme(),["components","legend","margin"],[0,0,0,0]);(0,c.each)(this.components,function(E){var D=E.component,z=E.direction,U=gl(z),lt=l.getCategoryLegendSizeCfg(U),Bt=D.get("maxWidth"),Ut=D.get("maxHeight");D.update({maxWidth:Math.min(lt.maxWidth,Bt||0),maxHeight:Math.min(lt.maxHeight,Ut||0)});var $t=D.getLayoutBBox(),Kt=new tr($t.x,$t.y,$t.width,$t.height),ae=xs(l.view.viewBBox,Kt,z),ye=ae[0],Ae=ae[1],$e=xs(l.layoutBBox,Kt,z),nr=$e[0],ir=$e[1],_r=0,Gr=0;z.startsWith("top")||z.startsWith("bottom")?(_r=ye,Gr=ir):(_r=nr,Gr=Ae),z.indexOf("left")>=0&&(_r+=f[3]),z.indexOf("right")>=0&&(_r-=f[1]),z.indexOf("top")>=0&&(Gr+=f[0]),z.indexOf("bottom")>=0&&(Gr-=f[2]),D.update({x:_r,y:Gr}),l.layoutBBox=l.layoutBBox.cut(Kt,z)})},g.prototype.update=function(){var l=this;this.option=this.view.getOptions().legends;var f={},E=function(Kt,ae,ye){var Ae=l.getId(ye.field),$e=l.getComponentById(Ae);if($e){var nr=void 0,ir=ju(l.option,ye.field);ir!==!1&&((0,c.get)(ir,"custom")?nr=l.getCategoryCfg(Kt,ae,ye,ir,!0):ye.isLinear?nr=l.getContinuousCfg(Kt,ae,ye,ir):ye.isCategory&&(nr=l.getCategoryCfg(Kt,ae,ye,ir))),nr&&(fr(nr,["container"]),$e.direction=qo(ir),$e.component.update(nr),f[Ae]=!0)}else{var _r=l.createFieldLegend(Kt,ae,ye);_r&&(_r.component.init(),l.components.push(_r),f[Ae]=!0)}};if((0,c.get)(this.option,"custom")){var D="global-custom",z=this.getComponentById(D);if(z){var U=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);fr(U,["container"]),z.component.update(U),f[D]=!0}else{var lt=this.createCustomLegend(void 0,void 0,void 0,this.option);if(lt){lt.init();var Bt=F.FORE,Ut=qo(this.option);this.components.push({id:D,component:lt,layer:Bt,direction:Ut,type:O.LEGEND,extra:void 0}),f[D]=!0}}}else this.loopLegends(E);var $t=[];(0,c.each)(this.getComponents(),function(Kt){f[Kt.id]?$t.push(Kt):Kt.component.destroy()}),this.components=$t},g.prototype.clear=function(){m.prototype.clear.call(this),this.container.clear()},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.container.remove(!0)},g.prototype.getGeometries=function(l){var f=this,E=l.geometries;return(0,c.each)(l.views,function(D){E=E.concat(f.getGeometries(D))}),E},g.prototype.loopLegends=function(l){var f=this.view.getRootView()===this.view;if(!!f){var E=this.getGeometries(this.view),D={};(0,c.each)(E,function(z){var U=z.getGroupAttributes();(0,c.each)(U,function(lt){var Bt=lt.getScale(lt.type);!Bt||Bt.type==="identity"||D[Bt.field]||(l(z,lt,Bt),D[Bt.field]=!0)})})}},g.prototype.createFieldLegend=function(l,f,E){var D,z=ju(this.option,E.field),U=F.FORE,lt=qo(z);if(z!==!1&&((0,c.get)(z,"custom")?D=this.createCustomLegend(l,f,E,z):E.isLinear?D=this.createContinuousLegend(l,f,E,z):E.isCategory&&(D=this.createCategoryLegend(l,f,E,z))),D)return D.set("field",E.field),{id:this.getId(E.field),component:D,layer:U,direction:lt,type:O.LEGEND,extra:{scale:E}}},g.prototype.createCustomLegend=function(l,f,E,D){var z=this.getCategoryCfg(l,f,E,D,!0);return new Vt(z)},g.prototype.createContinuousLegend=function(l,f,E,D){var z=this.getContinuousCfg(l,f,E,D);return new pt(z)},g.prototype.createCategoryLegend=function(l,f,E,D){var z=this.getCategoryCfg(l,f,E,D);return new Vt(z)},g.prototype.getContinuousCfg=function(l,f,E,D){var z=E.getTicks(),U=(0,c.find)(z,function(Ae){return Ae.value===0}),lt=(0,c.find)(z,function(Ae){return Ae.value===1}),Bt=z.map(function(Ae){var $e=Ae.value,nr=Ae.tickValue,ir=f.mapping(E.invert($e)).join("");return{value:nr,attrValue:ir,color:ir,scaleValue:$e}});U||Bt.push({value:E.min,attrValue:f.mapping(E.invert(0)).join(""),color:f.mapping(E.invert(0)).join(""),scaleValue:0}),lt||Bt.push({value:E.max,attrValue:f.mapping(E.invert(1)).join(""),color:f.mapping(E.invert(1)).join(""),scaleValue:1}),Bt.sort(function(Ae,$e){return Ae.value-$e.value});var Ut={min:(0,c.head)(Bt).value,max:(0,c.last)(Bt).value,colors:[],rail:{type:f.type},track:{}};f.type==="size"&&(Ut.track={style:{fill:f.type==="size"?this.view.getTheme().defaultColor:void 0}}),f.type==="color"&&(Ut.colors=Bt.map(function(Ae){return Ae.attrValue}));var $t=this.container,Kt=qo(D),ae=gl(Kt),ye=(0,c.get)(D,"title");return ye&&(ye=(0,c.deepMix)({text:zt(E)},ye)),Ut.container=$t,Ut.layout=ae,Ut.title=ye,Ut.animateOption=Li,this.mergeLegendCfg(Ut,D,"continuous")},g.prototype.getCategoryCfg=function(l,f,E,D,z){var U=this.container,lt=(0,c.get)(D,"position",L.BOTTOM),Bt=(0,c.get)(this.view.getTheme(),["components","legend",lt,"marker"]),Ut=(0,c.get)(D,"marker"),$t=gl(lt),Kt=z?ov(Bt,Ut,D.items):Wu(this.view,l,f,Bt,Ut),ae=(0,c.get)(D,"title");ae&&(ae=(0,c.deepMix)({text:E?zt(E):""},ae));var ye=this.getCategoryLegendSizeCfg($t);ye.container=U,ye.layout=$t,ye.items=Kt,ye.title=ae,ye.animateOption=Li;var Ae=this.mergeLegendCfg(ye,D,lt);Ae.reversed&&Ae.items.reverse();var $e=(0,c.get)(Ae,"maxItemWidth");return $e&&$e<=1&&(Ae.maxItemWidth=this.view.viewBBox.width*$e),Ae},g.prototype.mergeLegendCfg=function(l,f,E){var D=E.split("-")[0],z=(0,c.get)(this.view.getTheme(),["components","legend",D],{});return(0,c.deepMix)({},z,l,f)},g.prototype.getId=function(l){return this.name+"-"+l},g.prototype.getComponentById=function(l){return(0,c.find)(this.components,function(f){return f.id===l})},g.prototype.getCategoryLegendSizeCfg=function(l){var f=this.view.viewBBox,E=f.width,D=f.height;return l==="vertical"?{maxWidth:E*I,maxHeight:D}:{maxWidth:E,maxHeight:D*I}},g}(dt),sv=Uu,lv=function(m){(0,d.__extends)(g,m);function g(l){var f=m.call(this,l)||this;return f.onValueChanged=function(E){var D=E[0],z=E[1];f.updateMinMaxText(D,z),f.view.render(!0)},f.container=f.view.getLayer(F.FORE).addGroup(),f}return Object.defineProperty(g.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var l=this.slider.component.get("start")||0,f=this.slider.component.get("end")||1;this.updateMinMaxText(l,f)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},g.prototype.layout=function(){if(this.slider){var l=this.view.coordinateBBox.width,f=this.slider.component.getLayoutBBox(),E=new tr(f.x,f.y,Math.min(f.width,l),f.height),D=xs(this.view.viewBBox,E,L.BOTTOM),z=D[0],U=D[1],lt=xs(this.view.coordinateBBox,E,L.BOTTOM),Bt=lt[0],Ut=lt[1];this.slider.component.update({x:Bt,y:U,width:l})}},g.prototype.update=function(){this.render()},g.prototype.createSlider=function(){var l=this.getSliderCfg(),f=new Yt.Slider((0,d.__assign)({container:this.container},l));return f.init(),{component:f,layer:F.FORE,direction:L.BOTTOM,type:O.OTHER}},g.prototype.updateSlider=function(){var l=this.getSliderCfg();return fr(l,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(l),this.slider},g.prototype.getSliderCfg=function(){if((0,c.isObject)(this.option)){var l=(0,d.__assign)({data:this.getData()},(0,c.get)(this.option,"trendCfg",{})),f=0,E=0,D=this.view.coordinateBBox.width,z=(0,c.deepMix)({},{x:f,y:E,width:D},this.option);return(0,d.__assign)((0,d.__assign)({},z),{trendCfg:l})}return{}},g.prototype.getData=function(){var l=this.view.getOptions().data,f=this.view.getYScales()[0],E=this.view.getGroupScales();if(E.length){var D=E[0],z=D.field,U=D.ticks;return l.reduce(function(lt,Bt){return Bt[z]===U[0]&&lt.push(Bt[f.field]),lt},[])}return l.map(function(lt){return lt[f.field]||0})},g.prototype.updateMinMaxText=function(l,f){var E=this.view.getOptions().data,D=this.view.getXScale(),z=(0,c.size)(E);if(!(!D||!z)){var U=D.field,lt=E.reduce(function(Ae,$e){return Ae.includes($e[U])||Ae.push($e[U]),Ae},[]),Bt=(0,c.size)(lt),Ut=Math.floor(l*(Bt-1)),$t=Math.floor(f*(Bt-1)),Kt=(0,c.get)(lt,[Ut]),ae=(0,c.get)(lt,[$t]),ye=this.getSliderCfg().formatter;ye&&(Kt=ye(Kt,E[Ut],Ut),ae=ye(ae,E[$t],$t)),this.slider.component.update({minText:Kt,maxText:ae,start:l,end:f}),this.view.filter(D.field,function(Ae,$e){var nr=lt.indexOf(Ae);return nr>-1?rr(nr,Ut,$t):!0})}},g.prototype.getComponents=function(){return this.slider?[this.slider]:[]},g}(dt),bs=lv;function xo(m){for(var g=[],l=function(E){var D=m[E],z=(0,c.find)(g,function(U){return U.color===D.color&&U.name===D.name&&U.value===D.value&&U.title===D.title});z||g.push(D)},f=0;f<m.length;f++)l(f);return g}var ko=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.isLocked=!1,l}return Object.defineProperty(g.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),g.prototype.init=function(){},g.prototype.isVisible=function(){var l=this.view.getOptions().tooltip;return l!==!1},g.prototype.render=function(){},g.prototype.showTooltip=function(l){if(this.point=l,!!this.isVisible()){var f=this.view,E=this.getTooltipItems(l);if(!E.length){this.hideTooltip();return}var D=this.getTitle(E),z={x:E[0].x,y:E[0].y};f.emit("tooltip:show",(0,d.__assign)({items:E,title:D},l));var U=this.getTooltipCfg(),lt=U.follow,Bt=U.showMarkers,Ut=U.showCrosshairs,$t=U.showContent,Kt=U.marker,ae=this.items,ye=this.title;if(!(0,c.isEqual)(ye,D)||!(0,c.isEqual)(ae,E)?(f.emit("tooltip:change",(0,d.__assign)({items:E,title:D},l)),$t&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,c.mix)({},U,{items:E,title:D},lt?l:{})),this.tooltip.show()),Bt&&this.renderTooltipMarkers(E,Kt)):(this.tooltip&&lt&&(this.tooltip.update(l),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=E,this.title=D,Ut){var Ae=(0,c.get)(U,["crosshairs","follow"],!1);this.renderCrosshairs(Ae?l:z,U)}}},g.prototype.hideTooltip=function(){var l=this.getTooltipCfg().follow;if(!l){this.point=null;return}var f=this.tooltipMarkersGroup;f&&f.hide();var E=this.xCrosshair,D=this.yCrosshair;E&&E.hide(),D&&D.hide();var z=this.tooltip;z&&z.hide(),this.view.emit("tooltip:hide",{}),this.point=null},g.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},g.prototype.unlockTooltip=function(){this.isLocked=!1;var l=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(l.capture)},g.prototype.isTooltipLocked=function(){return this.isLocked},g.prototype.clear=function(){var l=this,f=l.tooltip,E=l.xCrosshair,D=l.yCrosshair,z=l.tooltipMarkersGroup;f&&(f.hide(),f.clear()),E&&E.clear(),D&&D.clear(),z&&z.clear()},g.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},g.prototype.changeVisible=function(l){if(this.visible!==l){var f=this,E=f.tooltip,D=f.tooltipMarkersGroup,z=f.xCrosshair,U=f.yCrosshair;l?(E&&E.show(),D&&D.show(),z&&z.show(),U&&U.show()):(E&&E.hide(),D&&D.hide(),z&&z.hide(),U&&U.hide()),this.visible=l}},g.prototype.getTooltipItems=function(l){var f=this.findItemsFromView(this.view,l);if(f.length){f=(0,c.flatten)(f);for(var E=0,D=f;E<D.length;E++)for(var z=D[E],U=0,lt=z;U<lt.length;U++){var Bt=lt[U],Ut=Bt.mappingData,$t=Ut.x,Kt=Ut.y;Bt.x=(0,c.isArray)($t)?$t[$t.length-1]:$t,Bt.y=(0,c.isArray)(Kt)?Kt[Kt.length-1]:Kt}var ae=this.getTooltipCfg().shared;if(ae===!1&&f.length>1){for(var ye=f[0],Ae=Math.abs(l.y-ye[0].y),$e=0,nr=f;$e<nr.length;$e++){var ir=nr[$e],_r=Math.abs(l.y-ir[0].y);_r<=Ae&&(ye=ir,Ae=_r)}f=[ye]}return xo((0,c.flatten)(f))}return[]},g.prototype.layout=function(){},g.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var l=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}})}},g.prototype.getTooltipCfg=function(){var l=this.view,f=l.getOptions().tooltip,E=l.getTheme(),D=(0,c.get)(E,["components","tooltip"],{}),z=(0,c.isUndefined)((0,c.get)(f,"enterable"))?D.enterable:(0,c.get)(f,"enterable");return(0,c.deepMix)({},D,f,{capture:!!(z||this.isLocked)})},g.prototype.getTitle=function(l){var f=l[0].title||l[0].name;return this.title=f,f},g.prototype.renderTooltip=function(){var l=this.view.getCanvas(),f={start:{x:0,y:0},end:{x:l.get("width"),y:l.get("height")}},E=this.getTooltipCfg(),D=new Lt((0,d.__assign)((0,d.__assign)({parent:l.get("el").parentNode,region:f},E),{visible:!1,crosshairs:null}));D.init(),this.tooltip=D},g.prototype.renderTooltipMarkers=function(l,f){for(var E=this.getTooltipMarkersGroup(),D=0,z=l;D<z.length;D++){var U=z[D],lt=U.x,Bt=U.y,Ut=(0,d.__assign)((0,d.__assign)({fill:U.color,symbol:"circle",shadowColor:U.color},f),{x:lt,y:Bt});E.addShape("marker",{attrs:Ut})}},g.prototype.renderCrosshairs=function(l,f){var E=(0,c.get)(f,["crosshairs","type"],"x");E==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(l,f)):E==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(l,f)):E==="xy"&&(this.renderXCrosshairs(l,f),this.renderYCrosshairs(l,f))},g.prototype.renderXCrosshairs=function(l,f){var E=this.getViewWithGeometry(this.view).getCoordinate();if(!!be(E,l)){var D,z;if(E.isRect)E.isTransposed?(D={x:E.start.x,y:l.y},z={x:E.end.x,y:l.y}):(D={x:l.x,y:E.end.y},z={x:l.x,y:E.start.y});else{var U=Oe(E,l),lt=E.getCenter(),Bt=E.getRadius();z=ce(lt.x,lt.y,Bt,U),D=lt}var Ut=(0,c.deepMix)({start:D,end:z,container:this.getTooltipCrosshairsGroup()},(0,c.get)(f,"crosshairs",{}),this.getCrosshairsText("x",l,f));delete Ut.type;var $t=this.xCrosshair;$t?$t.update(Ut):($t=new Yt.Crosshair.Line(Ut),$t.init()),$t.render(),$t.show(),this.xCrosshair=$t}},g.prototype.renderYCrosshairs=function(l,f){var E=this.getViewWithGeometry(this.view).getCoordinate();if(!!be(E,l)){var D,z;if(E.isRect){var U=void 0,lt=void 0;E.isTransposed?(U={x:l.x,y:E.end.y},lt={x:l.x,y:E.start.y}):(U={x:E.start.x,y:l.y},lt={x:E.end.x,y:l.y}),D={start:U,end:lt},z="Line"}else D={center:E.getCenter(),radius:ie(E,l),startAngle:E.startAngle,endAngle:E.endAngle},z="Circle";D=(0,c.deepMix)({container:this.getTooltipCrosshairsGroup()},D,(0,c.get)(f,"crosshairs",{}),this.getCrosshairsText("y",l,f)),delete D.type;var Bt=this.yCrosshair;Bt?E.isRect&&Bt.get("type")==="circle"||!E.isRect&&Bt.get("type")==="line"?(Bt=new Yt.Crosshair[z](D),Bt.init()):Bt.update(D):(Bt=new Yt.Crosshair[z](D),Bt.init()),Bt.render(),Bt.show(),this.yCrosshair=Bt}},g.prototype.getCrosshairsText=function(l,f,E){var D=(0,c.get)(E,["crosshairs","text"]),z=(0,c.get)(E,["crosshairs","follow"]),U=this.items;if(D){var lt=this.getViewWithGeometry(this.view),Bt=U[0],Ut=lt.getXScale(),$t=lt.getYScales()[0],Kt=void 0,ae=void 0;if(z){var ye=this.view.getCoordinate().invert(f);Kt=Ut.invert(ye.x),ae=$t.invert(ye.y)}else Kt=Bt.data[Ut.field],ae=Bt.data[$t.field];var Ae=l==="x"?Kt:ae;return(0,c.isFunction)(D)?D=D(l,Ae,U,f):D.content=Ae,{text:D}}},g.prototype.getGuideGroup=function(){if(!this.guideGroup){var l=this.view.foregroundGroup;this.guideGroup=l.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},g.prototype.getTooltipMarkersGroup=function(){var l=this.tooltipMarkersGroup;return l&&!l.destroyed?(l.clear(),l.show()):(l=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),l.toFront(),this.tooltipMarkersGroup=l),l},g.prototype.getTooltipCrosshairsGroup=function(){var l=this.tooltipCrosshairsGroup;return l||(l=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),l.toBack(),this.tooltipCrosshairsGroup=l),l},g.prototype.getTooltipItemsByHitShape=function(l,f,E){var D=[],z=l.container,U=z.getShape(f.x,f.y);if(U&&U.get("visible")&&U.get("origin")){var lt=U.get("origin").mappingData,Bt=vo(lt,l,E);Bt.length&&D.push(Bt)}return D},g.prototype.getTooltipItemsByFindData=function(l,f,E){var D=[],z=l.dataArray;l.sort(z);for(var U=0,lt=z;U<lt.length;U++){var Bt=lt[U],Ut=co(f,Bt,l);if(Ut){var $t=l.getElementId(Ut),Kt=l.elementsMap[$t];if(l.type==="heatmap"||Kt.visible){var ae=vo(Ut,l,E);ae.length&&D.push(ae)}}}return D},g.prototype.findItemsFromView=function(l,f){if(l.getOptions().tooltip===!1)return[];for(var E=[],D=l.geometries,z=this.getTooltipCfg(),U=z.shared,lt=z.title,Bt=0,Ut=D;Bt<Ut.length;Bt++){var $t=Ut[Bt];if($t.visible&&$t.tooltipOption!==!1){var Kt=$t.type,ae=void 0;["point","edge","polygon"].includes(Kt)?ae=this.getTooltipItemsByHitShape($t,f,lt):["area","line","path","heatmap"].includes(Kt)?ae=this.getTooltipItemsByFindData($t,f,lt):U!==!1?ae=this.getTooltipItemsByFindData($t,f,lt):ae=this.getTooltipItemsByHitShape($t,f,lt),ae.length&&E.push(ae)}}for(var ye=0,Ae=l.views;ye<Ae.length;ye++){var $e=Ae[ye];E=E.concat(this.findItemsFromView($e,f))}return E},g.prototype.getViewWithGeometry=function(l){var f=this;return l.geometries.length?l:(0,c.find)(l.views,function(E){return f.getViewWithGeometry(E)})},g}(dt),uv=ko,Zu=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.show=function(){var l=this.context.view,f=this.context.event,E=l.getTooltipItems({x:f.x,y:f.y});if(!(0,c.isEqual)(E,this.items)&&(this.items=E,E.length)){var D=l.getXScale().field,z=E[0].data[D],U=[],lt=l.geometries;if((0,c.each)(lt,function(mi){if(mi.type==="interval"||mi.type==="schema"){var Mi=mi.getElementsBy(function(Fa){var Fo=Fa.getData();return Fo[D]===z});U=U.concat(Mi)}}),U.length){var Bt=l.getCoordinate(),Ut=U[0].shape.getCanvasBBox(),$t=U[0].shape.getCanvasBBox(),Kt=Ut;(0,c.each)(U,function(mi){var Mi=mi.shape.getCanvasBBox();Bt.isTransposed?(Mi.minY<Ut.minY&&(Ut=Mi),Mi.maxY>$t.maxY&&($t=Mi)):(Mi.minX<Ut.minX&&(Ut=Mi),Mi.maxX>$t.maxX&&($t=Mi)),Kt.x=Math.min(Mi.minX,Kt.minX),Kt.y=Math.min(Mi.minY,Kt.minY),Kt.width=Math.max(Mi.maxX,Kt.maxX)-Kt.x,Kt.height=Math.max(Mi.maxY,Kt.maxY)-Kt.y});var ae=l.backgroundGroup,ye=l.coordinateBBox,Ae=void 0;if(Bt.isRect){var $e=l.getXScale(),nr=$e.isLinear?0:.25,ir=void 0,_r=void 0,Gr=void 0,qr=void 0;Bt.isTransposed?(ir=ye.minX,_r=Math.min($t.minY,Ut.minY)-nr*$t.height,Gr=ye.width,qr=Kt.height+nr*2*$t.height):(ir=Math.min(Ut.minX,$t.minX)-nr*Ut.width,_r=Math.min(ye.minY,Ut.minY),Gr=Kt.width+nr*2*Ut.width,qr=ye.height),Ae=[["M",ir,_r],["L",ir+Gr,_r],["L",ir+Gr,_r+qr],["L",ir,_r+qr],["Z"]]}else{var mn=(0,c.head)(U),kn=(0,c.last)(U),Rn=Fe(mn.getModel(),Bt).startAngle,cn=Fe(kn.getModel(),Bt).endAngle,Vn=Bt.getCenter(),vi=Bt.getRadius(),la=Bt.innerRadius*vi;Ae=Ee(Vn.x,Vn.y,vi,Rn,cn,la)}this.regionPath?(this.regionPath.attr("path",Ae),this.regionPath.show()):this.regionPath=ae.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:Ae,fill:"#CCD6EC",opacity:.3}})}}},g.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},g.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),m.prototype.destroy.call(this)},g}(vr),Ku=Zu,hv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.timeStamp=0,l}return g.prototype.show=function(){var l=this.context,f=l.event,E=l.view,D=E.isTooltipLocked();if(!D){var z=this.timeStamp,U=+new Date;if(U-z>16){var lt=this.location,Bt={x:f.x,y:f.y};(!lt||!(0,c.isEqual)(lt,Bt))&&this.showTooltip(E,Bt),this.timeStamp=U,this.location=Bt}}},g.prototype.hide=function(){var l=this.context.view,f=l.isTooltipLocked();f||(this.hideTooltip(l),this.location=null)},g.prototype.showTooltip=function(l,f){l.showTooltip(f)},g.prototype.hideTooltip=function(l){l.hideTooltip()},g}(vr),yl=hv,$u=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.showTooltip=function(l,f){var E=ne(l);(0,c.each)(E,function(D){var z=He(l,D,f);D.showTooltip(z)})},g.prototype.hideTooltip=function(l){var f=ne(l);(0,c.each)(f,function(E){E.hideTooltip()})},g}(yl),fv=$u,ws=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.timeStamp=0,l}return g.prototype.destroy=function(){m.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},g.prototype.show=function(){var l=this.context,f=l.event,E=this.timeStamp,D=+new Date;if(D-E>16){var z=this.location,U={x:f.x,y:f.y};(!z||!(0,c.isEqual)(z,U))&&this.showTooltip(U),this.timeStamp=D,this.location=U}},g.prototype.hide=function(){this.hideTooltip(),this.location=null},g.prototype.showTooltip=function(l){var f=this.context,E=f.event,D=E.target;if(D&&D.get("tip")){this.tooltip||this.renderTooltip();var z=D.get("tip");this.tooltip.update((0,d.__assign)({title:z},l)),this.tooltip.show()}},g.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},g.prototype.renderTooltip=function(){var l=this.context.view,f=l.canvas,E={start:{x:0,y:0},end:{x:f.get("width"),y:f.get("height")}},D=l.getTheme(),z=(0,c.get)(D,["components","tooltip","domStyles"],{}),U=new Lt({parent:f.get("el").parentNode,region:E,visible:!1,crosshairs:null,domStyles:z});U.init(),U.setCapture(!1),this.tooltip=U},g}(vr),Qu=ws,cv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="",l}return g.prototype.hasState=function(l){return l.hasState(this.stateName)},g.prototype.setElementState=function(l,f){l.setState(this.stateName,f)},g.prototype.setState=function(){this.setStateEnable(!0)},g.prototype.clear=function(){var l=this.context.view;this.clearViewState(l)},g.prototype.clearViewState=function(l){var f=this,E=Jt(l,this.stateName);(0,c.each)(E,function(D){f.setElementState(D,!1)})},g}(vr),ml=cv;function Ju(m){return(0,c.get)(m.get("delegateObject"),"item")}var vv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.ignoreListItemStates=["unchecked"],l}return g.prototype.isItemIgnore=function(l,f){var E=this.ignoreListItemStates,D=E.filter(function(z){return f.hasState(l,z)});return!!D.length},g.prototype.setStateByComponent=function(l,f,E){var D=this.context.view,z=l.get("field"),U=Un(D);this.setElementsStateByItem(U,z,f,E)},g.prototype.setStateByElement=function(l,f){this.setElementState(l,f)},g.prototype.isMathItem=function(l,f,E){var D=this.context.view,z=Ie(D,f),U=Dt(l,f);return!(0,c.isNil)(U)&&E.name===z.getText(U)},g.prototype.setElementsStateByItem=function(l,f,E,D){var z=this;(0,c.each)(l,function(U){z.isMathItem(U,f,E)&&U.setState(z.stateName,D)})},g.prototype.setStateEnable=function(l){var f=Tn(this.context);if(f)ni(this.context)&&this.setStateByElement(f,l);else{var E=Pn(this.context);if(On(E)){var D=E.item,z=E.component;if(D&&z&&!this.isItemIgnore(D,z)){var U=this.context.event.gEvent;if(U&&U.fromShape&&U.toShape&&Ju(U.fromShape)===Ju(U.toShape))return;this.setStateByComponent(z,D,l)}}}},g.prototype.toggle=function(){var l=Tn(this.context);if(l){var f=l.hasState(this.stateName);this.setElementState(l,!f)}},g.prototype.reset=function(){this.setStateEnable(!1)},g}(ml),Ss=vv,dv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.active=function(){this.setState()},g}(Ss),pv=dv,gv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.cache={},l}return g.prototype.getColorScale=function(l,f){var E=f.geometry.getAttribute("color");if(!E)return null;var D=l.getScaleByField(E.getFields()[0]);return D},g.prototype.getLinkPath=function(l,f){var E=l.shape.getCanvasBBox(),D=f.shape.getCanvasBBox(),z=[["M",E.maxX,E.minY],["L",D.minX,D.minY],["L",D.minX,D.maxY],["L",E.maxX,E.maxY],["Z"]];return z},g.prototype.addLinkShape=function(l,f,E){l.addShape({type:"path",attrs:{opacity:.4,fill:f.shape.attr("fill"),path:this.getLinkPath(f,E)}})},g.prototype.linkByElement=function(l){var f=this,E=this.context.view,D=this.getColorScale(E,l);if(!!D){var z=Dt(l,D.field);if(!this.cache[z]){var U=Ri(E,D.field,z),lt=this.linkGroup,Bt=lt.addGroup();this.cache[z]=Bt;var Ut=U.length;(0,c.each)(U,function($t,Kt){if(Kt<Ut-1){var ae=U[Kt+1];f.addLinkShape(Bt,$t,ae)}})}}},g.prototype.removeLink=function(l){var f=this.getColorScale(this.context.view,l);if(!!f){var E=Dt(l,f.field);this.cache[E]&&(this.cache[E].remove(),this.cache[E]=null)}},g.prototype.link=function(){var l=this.context;this.linkGroup||(this.linkGroup=l.view.foregroundGroup.addGroup({capture:!1}));var f=Tn(l);f&&this.linkByElement(f)},g.prototype.unlink=function(){var l=Tn(this.context);l&&this.removeLink(l)},g.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},g.prototype.destroy=function(){m.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},g}(vr),yv=gv,qu=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.startPoint=null,l.endPoint=null,l.isStarted=!1,l.effectSiblings=!1,l.effectByRecord=!1,l}return g.prototype.getCurrentPoint=function(){var l=this.context.event;return{x:l.x,y:l.y}},g.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},g.prototype.getIntersectElements=function(){var l=null;if(zn(this.context))l=Ti(this.context,10);else{var f=this.startPoint,E=this.isStarted?this.getCurrentPoint():this.endPoint;if(!f||!E)return;var D={minX:Math.min(f.x,E.x),minY:Math.min(f.y,E.y),maxX:Math.max(f.x,E.x),maxY:Math.max(f.y,E.y)},z=this.context.view;l=Ct(z,D)}return l},g.prototype.setStateEnable=function(l){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(l);else{var f=Un(this.context.view),E=this.getIntersectElements();E&&E.length?this.effectByRecord?this.setSiblingsStateByRecord(E,l):this.setElementsState(E,l,f):this.clear()}},g.prototype.setSiblingsStateByRecord=function(l,f){var E=this,D=this.context.view,z=ne(D),U=l.map(function(Ut){return Ut.getModel().data}),lt=D.getXScale().field,Bt=D.getYScales()[0].field;(0,c.each)(z,function(Ut){var $t=Un(Ut),Kt=$t.filter(function(ae){var ye=ae.getModel().data;return Ge(U,ye,lt,Bt)});E.setElementsState(Kt,f,$t)})},g.prototype.setSiblingsState=function(l){var f=this,E=this.context.view,D=ne(E);zn(this.context)&&(0,c.each)(D,function(z){var U=Un(z),lt=Hn(f.context,z,10);lt&&lt.length?f.setElementsState(lt,l,U):f.clearViewState(z)})},g.prototype.setElementsState=function(l,f,E){var D=this;(0,c.each)(E,function(z){l.includes(z)?D.setElementState(z,f):D.setElementState(z,!1)})},g.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},g.prototype.clear=function(){var l=this,f=this.context.view;if(this.effectSiblings){var E=ne(f);(0,c.each)(E,function(D){l.clearViewState(D)})}else this.clearViewState(f)},g}(ml),xl=qu,mv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.active=function(){this.setState()},g}(xl),xv=mv,th=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.setStateEnable=function(l){var f=Tn(this.context);if(f){if(!ni(this.context))return;l?(this.clear(),this.setElementState(f,!0)):this.hasState(f)&&this.setElementState(f,!1)}},g.prototype.toggle=function(){var l=Tn(this.context);if(l){var f=this.hasState(l);f||this.clear(),this.setElementState(l,!f)}},g.prototype.reset=function(){this.setStateEnable(!1)},g}(ml),bl=th,bv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.active=function(){this.setState()},g}(bl),wv=bv,Ba="inactive",Bo="active";function wl(m){var g=Un(m);(0,c.each)(g,function(l){l.hasState(Bo)&&l.setState(Bo,!1),l.hasState(Ba)&&l.setState(Ba,!1)})}function eh(m,g,l){(0,c.each)(m,function(f){g(f)?(f.hasState(Ba)&&f.setState(Ba,!1),f.setState(Bo,l)):(f.hasState(Bo)&&f.setState(Bo,!1),f.setState(Ba,l))})}var Qa=x.INACTIVE,Ma=x.ACTIVE,Sv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName=Ma,l}return g.prototype.setElementsStateByItem=function(l,f,E,D){var z=this,U=function(lt){return z.isMathItem(lt,f,E)};this.setHighlightBy(l,U,D)},g.prototype.setElementHighlight=function(l,f){f(l)?(l.hasState(Qa)&&l.setState(Qa,!1),l.setState(Ma,!0)):l.hasState(Ma)||l.setState(Qa,!0)},g.prototype.setHighlightBy=function(l,f,E){var D=this;if(E)(0,c.each)(l,function(lt){D.setElementHighlight(lt,f)});else{var z=Jt(this.context.view,Ma),U=!0;(0,c.each)(z,function(lt){if(!f(lt))return U=!1,!1}),U?this.clear():(0,c.each)(l,function(lt){f(lt)&&(lt.hasState(Ma)&&lt.setState(Ma,!1),lt.setState(Qa,!0))})}},g.prototype.setElementState=function(l,f){var E=this.context.view,D=Un(E);this.setHighlightBy(D,function(z){return l===z},f)},g.prototype.highlight=function(){this.setState()},g.prototype.clear=function(){var l=this.context.view;wl(l)},g}(Ss),Cs=Sv,rh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.setStateByElement=function(l,f){var E=this.context.view,D=l.geometry.getAttribute("color");if(!!D){var z=E.getScaleByField(D.getFields()[0]),U=Dt(l,z.field),lt=Un(E),Bt=lt.filter(function(Ut){return Dt(Ut,z.field)===U});this.setHighlightBy(lt,function(Ut){return Bt.includes(Ut)},f)}},g}(Cs),Cv=rh,nh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.setElementHighlight=function(l,f){f(l)?(l.hasState(Qa)&&l.setState(Qa,!1),l.setState(Ma,!0)):(l.setState(Qa,!0),l.hasState(Ma)&&l.setState(Ma,!1))},g.prototype.setStateByElement=function(l,f){var E=this.context.view,D=E.getXScale(),z=Dt(l,D.field),U=Un(E),lt=U.filter(function(Bt){return Dt(Bt,D.field)===z});this.setHighlightBy(U,function(Bt){return lt.includes(Bt)},f)},g.prototype.toggle=function(){var l=Tn(this.context);if(l){var f=l.hasState(this.stateName);this.setStateByElement(l,!f)}},g}(Cs),Mv=nh,Ev=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.clearViewState=function(l){wl(l)},g.prototype.highlight=function(){this.setState()},g.prototype.setElementsState=function(l,f,E){eh(E,function(D){return l.indexOf(D)>=0},f)},g}(xl),ih=Ev,Av=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.highlight=function(){this.setState()},g.prototype.setElementState=function(l,f){var E=this.context.view,D=Un(E);eh(D,function(z){return l===z},f)},g.prototype.clear=function(){var l=this.context.view;wl(l)},g}(bl),Tv=Av,Pv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="selected",l}return g.prototype.selected=function(){this.setState()},g}(xl),Sl=Pv,Da=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="selected",l}return g.prototype.selected=function(){this.setState()},g}(Ss),Cl=Da,Tp=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="selected",l}return g.prototype.selected=function(){this.setState()},g}(bl),Ms=Tp,Ml=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="",l.ignoreItemStates=[],l}return g.prototype.getTriggerListInfo=function(){var l=Pn(this.context),f=null;return On(l)&&(f={item:l.item,list:l.component}),f},g.prototype.getAllowComponents=function(){var l=this,f=this.context.view,E=ot(f),D=[];return(0,c.each)(E,function(z){z.isList()&&l.allowSetStateByElement(z)&&D.push(z)}),D},g.prototype.hasState=function(l,f){return l.hasState(f,this.stateName)},g.prototype.clearAllComponentsState=function(){var l=this,f=this.getAllowComponents();(0,c.each)(f,function(E){E.clearItemsState(l.stateName)})},g.prototype.allowSetStateByElement=function(l){var f=l.get("field");if(!f)return!1;if(this.cfg&&this.cfg.componentNames){var E=l.get("name");if(this.cfg.componentNames.indexOf(E)===-1)return!1}var D=this.context.view,z=Ie(D,f);return z&&z.isCategory},g.prototype.allowSetStateByItem=function(l,f){var E=this.ignoreItemStates;if(E.length){var D=E.filter(function(z){return f.hasState(l,z)});return D.length===0}return!0},g.prototype.setStateByElement=function(l,f,E){var D=l.get("field"),z=this.context.view,U=Ie(z,D),lt=Dt(f,D),Bt=U.getText(lt);this.setItemsState(l,Bt,E)},g.prototype.setStateEnable=function(l){var f=this,E=Tn(this.context);if(E){var D=this.getAllowComponents();(0,c.each)(D,function(Bt){f.setStateByElement(Bt,E,l)})}else{var z=Pn(this.context);if(On(z)){var U=z.item,lt=z.component;this.allowSetStateByElement(lt)&&this.allowSetStateByItem(U,lt)&&this.setItemState(lt,U,l)}}},g.prototype.setItemsState=function(l,f,E){var D=this,z=l.getItems();(0,c.each)(z,function(U){U.name===f&&D.setItemState(l,U,E)})},g.prototype.setItemState=function(l,f,E){l.setItemState(f,this.stateName,E)},g.prototype.setState=function(){this.setStateEnable(!0)},g.prototype.reset=function(){this.setStateEnable(!1)},g.prototype.toggle=function(){var l=this.getTriggerListInfo();if(l&&l.item){var f=l.list,E=l.item,D=this.hasState(f,E);this.setItemState(f,E,!D)}},g.prototype.clear=function(){var l=this.getTriggerListInfo();l?l.list.clearItemsState(this.stateName):this.clearAllComponentsState()},g}(vr),ts=Ml,ah=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="active",l}return g.prototype.active=function(){this.setState()},g}(ts),oh=ah,sh="inactive",lh="active";function Lv(m){var g=m.getItems();(0,c.each)(g,function(l){m.hasState(l,lh)&&m.setItemState(l,lh,!1),m.hasState(l,sh)&&m.setItemState(l,sh,!1)})}var es="inactive",bo="active",uh=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName=bo,l.ignoreItemStates=["unchecked"],l}return g.prototype.setItemsState=function(l,f,E){this.setHighlightBy(l,function(D){return D.name===f},E)},g.prototype.setItemState=function(l,f,E){var D=l.getItems();this.setHighlightBy(l,function(z){return z===f},E)},g.prototype.setHighlightBy=function(l,f,E){var D=l.getItems();if(E)(0,c.each)(D,function(lt){f(lt)?(l.hasState(lt,es)&&l.setItemState(lt,es,!1),l.setItemState(lt,bo,!0)):l.hasState(lt,bo)||l.setItemState(lt,es,!0)});else{var z=l.getItemsByState(bo),U=!0;(0,c.each)(z,function(lt){if(!f(lt))return U=!1,!1}),U?this.clear():(0,c.each)(D,function(lt){f(lt)&&(l.hasState(lt,bo)&&l.setItemState(lt,bo,!1),l.setItemState(lt,es,!0))})}},g.prototype.highlight=function(){this.setState()},g.prototype.clear=function(){var l=this.getTriggerListInfo();if(l)Lv(l.list);else{var f=this.getAllowComponents();(0,c.each)(f,function(E){E.clearItemsState(bo),E.clearItemsState(es)})}},g}(ts),Do=uh,_v=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="selected",l}return g.prototype.selected=function(){this.setState()},g}(ts),hh=_v,Iv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.stateName="unchecked",l}return g.prototype.unchecked=function(){this.setState()},g}(ts),Pp=Iv,Ov=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.maskShape=null,l.points=[],l.starting=!1,l.moving=!1,l.preMovePoint=null,l.shapeType="path",l}return g.prototype.getCurrentPoint=function(){var l=this.context.event;return{x:l.x,y:l.y}},g.prototype.emitEvent=function(l){var f="mask:"+l,E=this.context.view,D=this.context.event;E.emit(f,{target:this.maskShape,shape:this.maskShape,points:this.points,x:D.x,y:D.y})},g.prototype.createMask=function(){var l=this.context.view,f=this.getMaskAttrs(),E=l.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,d.__assign)({fill:"#C5D4EB",opacity:.3},f)});return E},g.prototype.getMaskPath=function(){return[]},g.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},g.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},g.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},g.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var l=this.getCurrentPoint(),f=this.preMovePoint,E=l.x-f.x,D=l.y-f.y,z=this.points;(0,c.each)(z,function(U){U.x+=E,U.y+=D}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=l}},g.prototype.updateMask=function(){var l=this.getMaskAttrs();this.maskShape.attr(l)},g.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},g.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},g.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},g.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},g.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,m.prototype.destroy.call(this)},g}(vr),fh=Ov,ch=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.shapeType="circle",l}return g.prototype.getMaskAttrs=function(){var l=this.points,f=(0,c.last)(this.points),E=0,D=0,z=0;if(l.length){var U=l[0];E=St(U,f)/2,D=(f.x+U.x)/2,z=(f.y+U.y)/2}return{x:D,y:z,r:E}},g}(fh),El=ch,kv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.shapeType="rect",l}return g.prototype.getRegion=function(){var l=this.points;return{start:(0,c.head)(l),end:(0,c.last)(l)}},g.prototype.getMaskAttrs=function(){var l=this.getRegion(),f=l.start,E=l.end,D=Math.min(f.x,E.x),z=Math.min(f.y,E.y),U=Math.abs(E.x-f.x),lt=Math.abs(E.y-f.y);return{x:D,y:z,width:U,height:lt}},g}(fh),Al=kv;function Tl(m){m.x=(0,c.clamp)(m.x,0,1),m.y=(0,c.clamp)(m.y,0,1)}var vh=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.dim="x",l.inPlot=!0,l}return g.prototype.getRegion=function(){var l=null,f=null,E=this.points,D=this.dim,z=this.context.view.getCoordinate(),U=z.invert((0,c.head)(E)),lt=z.invert((0,c.last)(E));return this.inPlot&&(Tl(U),Tl(lt)),D==="x"?(l=z.convert({x:U.x,y:0}),f=z.convert({x:lt.x,y:1})):(l=z.convert({x:0,y:U.y}),f=z.convert({x:1,y:lt.y})),{start:l,end:f}},g}(Al),dh=vh,ph=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getMaskPath=function(){var l=this.points,f=[];return l.length&&((0,c.each)(l,function(E,D){D===0?f.push(["M",E.x,E.y]):f.push(["L",E.x,E.y])}),f.push(["L",l[0].x,l[0].y])),f},g.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},g.prototype.addPoint=function(){this.resize()},g}(fh),Es=ph,gh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.getMaskPath=function(){var l=this.points;return Mt(l,!0)},g}(Es),yh=gh,Bv=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.setCursor=function(l){var f=this.context.view;f.getCanvas().setCursor(l)},g.prototype.default=function(){this.setCursor("default")},g.prototype.pointer=function(){this.setCursor("pointer")},g.prototype.move=function(){this.setCursor("move")},g.prototype.crosshair=function(){this.setCursor("crosshair")},g.prototype.wait=function(){this.setCursor("wait")},g.prototype.help=function(){this.setCursor("help")},g.prototype.text=function(){this.setCursor("text")},g.prototype.eResize=function(){this.setCursor("e-resize")},g.prototype.wResize=function(){this.setCursor("w-resize")},g.prototype.nResize=function(){this.setCursor("n-resize")},g.prototype.sResize=function(){this.setCursor("s-resize")},g.prototype.neResize=function(){this.setCursor("ne-resize")},g.prototype.nwResize=function(){this.setCursor("nw-resize")},g.prototype.seResize=function(){this.setCursor("se-resize")},g.prototype.swResize=function(){this.setCursor("sw-resize")},g.prototype.nsResize=function(){this.setCursor("ns-resize")},g.prototype.ewResize=function(){this.setCursor("ew-resize")},g}(vr),mh=Bv,xh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.filterView=function(l,f,E){var D=this;l.getScaleByField(f)&&l.filter(f,E),l.views&&l.views.length&&(0,c.each)(l.views,function(z){D.filterView(z,f,E)})},g.prototype.filter=function(){var l=Pn(this.context);if(l){var f=this.context.view,E=l.component,D=E.get("field");if(On(l)){if(D){var z=E.getItemsByState("unchecked"),U=Ie(f,D),lt=z.map(function(Kt){return Kt.name});lt.length?this.filterView(f,D,function(Kt){var ae=U.getText(Kt);return!lt.includes(ae)}):this.filterView(f,D,null),f.render(!0)}}else if(si(l)){var Bt=E.getValue(),Ut=Bt[0],$t=Bt[1];this.filterView(f,D,function(Kt){return Kt>=Ut&&Kt<=$t}),f.render(!0)}}},g}(vr),Dv=xh;function bh(m,g,l,f){var E=Math.min(l[g],f[g]),D=Math.max(l[g],f[g]),z=m.range,U=z[0],lt=z[1];if(E<U&&(E=U),D>lt&&(D=lt),E===lt&&D===lt)return null;var Bt=m.invert(E),Ut=m.invert(D);if(m.isCategory){var $t=m.values.indexOf(Bt),Kt=m.values.indexOf(Ut),ae=m.values.slice($t,Kt+1);return function(ye){return ae.includes(ye)}}else return function(ye){return ye>=Bt&&ye<=Ut}}var Fv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.dims=["x","y"],l.startPoint=null,l.isStarted=!1,l}return g.prototype.hasDim=function(l){return this.dims.includes(l)},g.prototype.start=function(){var l=this.context;this.isStarted=!0,this.startPoint=l.getCurrentPoint()},g.prototype.filter=function(){var l,f;if(zn(this.context)){var E=this.context.event.target,D=E.getCanvasBBox();l={x:D.x,y:D.y},f={x:D.maxX,y:D.maxY}}else{if(!this.isStarted)return;l=this.startPoint,f=this.context.getCurrentPoint()}if(!(Math.abs(l.x-f.x)<5||Math.abs(l.x-f.y)<5)){var z=this.context.view,U=z.getCoordinate(),lt=U.invert(f),Bt=U.invert(l);if(this.hasDim("x")){var Ut=z.getXScale(),$t=bh(Ut,"x",lt,Bt);this.filterView(z,Ut.field,$t)}if(this.hasDim("y")){var Kt=z.getYScales()[0],$t=bh(Kt,"y",lt,Bt);this.filterView(z,Kt.field,$t)}this.reRender(z)}},g.prototype.end=function(){this.isStarted=!1},g.prototype.reset=function(){var l=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var f=l.getXScale();this.filterView(l,f.field,null)}if(this.hasDim("y")){var E=l.getYScales()[0];this.filterView(l,E.field,null)}this.reRender(l)},g.prototype.filterView=function(l,f,E){l.filter(f,E)},g.prototype.reRender=function(l){l.render(!0)},g}(vr),rs=Fv,wh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.filterView=function(l,f,E){var D=ne(l);(0,c.each)(D,function(z){z.filter(f,E)})},g.prototype.reRender=function(l){var f=ne(l);(0,c.each)(f,function(E){E.render(!0)})},g}(rs),Pl=wh,Sh=function(m){(0,d.__extends)(g,m);function g(){return m!==null&&m.apply(this,arguments)||this}return g.prototype.filter=function(){var l=Pn(this.context),f=this.context.view,E=Un(f);if(zn(this.context)){var D=Ti(this.context,10);D&&(0,c.each)(E,function(ye){D.includes(ye)?ye.show():ye.hide()})}else if(l){var z=l.component,U=z.get("field");if(On(l)){if(U){var lt=z.getItemsByState("unchecked"),Bt=Ie(f,U),Ut=lt.map(function(ye){return ye.name});(0,c.each)(E,function(ye){var Ae=Dt(ye,U),$e=Bt.getText(Ae);Ut.indexOf($e)>=0?ye.hide():ye.show()})}}else if(si(l)){var $t=z.getValue(),Kt=$t[0],ae=$t[1];(0,c.each)(E,function(ye){var Ae=Dt(ye,U);Ae>=Kt&&Ae<=ae?ye.show():ye.hide()})}}},g.prototype.clear=function(){var l=Un(this.context.view);(0,c.each)(l,function(f){f.show()})},g.prototype.reset=function(){this.clear()},g}(vr),Rv=Sh,Ch=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.byRecord=!1,l}return g.prototype.filter=function(){zn(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},g.prototype.filterByRecord=function(){var l=this.context.view,f=Ti(this.context,10);if(!!f){var E=l.getXScale().field,D=l.getYScales()[0].field,z=f.map(function(lt){return lt.getModel().data}),U=ne(l);(0,c.each)(U,function(lt){var Bt=Un(lt);(0,c.each)(Bt,function(Ut){var $t=Ut.getModel().data;Ge(z,$t,E,D)?Ut.show():Ut.hide()})})}},g.prototype.filterByBBox=function(){var l=this,f=this.context.view,E=ne(f);(0,c.each)(E,function(D){var z=Hn(l.context,D,10),U=Un(D);z&&(0,c.each)(U,function(lt){z.includes(lt)?lt.show():lt.hide()})})},g.prototype.reset=function(){var l=ne(this.context.view);(0,c.each)(l,function(f){var E=Un(f);(0,c.each)(E,function(D){D.show()})})},g}(vr),Mh=Ch,Nv=10,Eh=5,Ah=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.buttonGroup=null,l.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},l}return g.prototype.getButtonCfg=function(){return(0,c.deepMix)(this.buttonCfg,this.cfg)},g.prototype.drawButton=function(){var l=this.getButtonCfg(),f=this.context.view.foregroundGroup.addGroup({name:l.name}),E=f.addShape({type:"text",name:"button-text",attrs:(0,d.__assign)({text:l.text},l.textStyle)}),D=E.getBBox(),z=da(l.padding),U=f.addShape({type:"rect",name:"button-rect",attrs:(0,d.__assign)({x:D.x-z[3],y:D.y-z[0],width:D.width+z[1]+z[3],height:D.height+z[0]+z[2]},l.style)});U.toBack(),f.on("mouseenter",function(){U.attr(l.activeStyle)}),f.on("mouseleave",function(){U.attr(l.style)}),this.buttonGroup=f},g.prototype.resetPosition=function(){var l=this.context.view,f=l.getCoordinate(),E=f.convert({x:1,y:1}),D=this.buttonGroup,z=D.getBBox(),U=Qn.transform(null,[["t",E.x-z.width-Nv,E.y+z.height+Eh]]);D.setMatrix(U)},g.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},g.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},g.prototype.destroy=function(){var l=this.buttonGroup;l&&l.remove(),m.prototype.destroy.call(this)},g}(vr),Yv=Ah,Th=4,Gv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.starting=!1,l.dragStart=!1,l}return g.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},g.prototype.drag=function(){if(!!this.startPoint){var l=this.context.getCurrentPoint(),f=this.context.view,E=this.context.event;this.dragStart?f.emit("drag",{target:E.target,x:E.x,y:E.y}):St(l,this.startPoint)>Th&&(f.emit("dragstart",{target:E.target,x:E.x,y:E.y}),this.dragStart=!0)}},g.prototype.end=function(){if(this.dragStart){var l=this.context.view,f=this.context.event;l.emit("dragend",{target:f.target,x:f.x,y:f.y})}this.starting=!1,this.dragStart=!1},g}(vr),zv=Gv,Xv=5,Hv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.starting=!1,l.isMoving=!1,l.startPoint=null,l.startMatrix=null,l}return g.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},g.prototype.move=function(){if(!!this.starting){var l=this.startPoint,f=this.context.getCurrentPoint(),E=St(l,f);if(E>Xv&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var D=this.context.view,z=Qn.transform(this.startMatrix,[["t",f.x-l.x,f.y-l.y]]);D.backgroundGroup.setMatrix(z),D.foregroundGroup.setMatrix(z),D.middleGroup.setMatrix(z)}}},g.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},g.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var l=this.context.view;l.backgroundGroup.resetMatrix(),l.foregroundGroup.resetMatrix(),l.middleGroup.resetMatrix(),this.isMoving=!1},g}(vr),Vv=Hv,Ph="x",Lh="y",Wv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.dims=[Ph,Lh],l.cfgFields=["dims"],l.cacheScaleDefs={},l}return g.prototype.hasDim=function(l){return this.dims.includes(l)},g.prototype.getScale=function(l){var f=this.context.view;return l==="x"?f.getXScale():f.getYScales()[0]},g.prototype.resetDim=function(l){var f=this.context.view;if(this.hasDim(l)&&this.cacheScaleDefs[l]){var E=this.getScale(l);f.scale(E.field,this.cacheScaleDefs[l]),this.cacheScaleDefs[l]=null}},g.prototype.reset=function(){this.resetDim(Ph),this.resetDim(Lh);var l=this.context.view;l.render(!0)},g}(vr),_h=Wv,jv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.startPoint=null,l.starting=!1,l.startCache={},l}return g.prototype.start=function(){var l=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var f=this.dims;(0,c.each)(f,function(E){var D=l.getScale(E),z=D.min,U=D.max,lt=D.values;l.startCache[E]={min:z,max:U,values:lt}})},g.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},g.prototype.translate=function(){var l=this;if(!!this.starting){var f=this.startPoint,E=this.context.view.getCoordinate(),D=this.context.getCurrentPoint(),z=E.invert(f),U=E.invert(D),lt=U.x-z.x,Bt=U.y-z.y,Ut=this.context.view,$t=this.dims;(0,c.each)($t,function(Kt){l.translateDim(Kt,{x:lt*-1,y:Bt*-1})}),Ut.render(!0)}},g.prototype.translateDim=function(l,f){if(this.hasDim(l)){var E=this.getScale(l);E.isLinear&&this.translateLinear(l,E,f)}},g.prototype.translateLinear=function(l,f,E){var D=this.context.view,z=this.startCache[l],U=z.min,lt=z.max,Bt=lt-U,Ut=E[l]*Bt;this.cacheScaleDefs[l]||(this.cacheScaleDefs[l]={nice:f.nice,min:U,max:lt}),D.scale(f.field,{nice:!1,min:U+Ut,max:lt+Ut})},g.prototype.reset=function(){m.prototype.reset.call(this),this.startPoint=null,this.starting=!1},g}(_h),Uv=jv,Zv=function(m){(0,d.__extends)(g,m);function g(){var l=m!==null&&m.apply(this,arguments)||this;return l.zoomRatio=.05,l}return g.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},g.prototype.zoom=function(l){var f=this,E=this.dims;(0,c.each)(E,function(D){f.zoomDim(D,l)}),this.context.view.render(!0)},g.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},g.prototype.zoomDim=function(l,f){if(this.hasDim(l)){var E=this.getScale(l);E.isLinear&&this.zoomLinear(l,E,f)}},g.prototype.zoomLinear=function(l,f,E){var D=this.context.view;this.cacheScaleDefs[l]||(this.cacheScaleDefs[l]={nice:f.nice,min:f.min,max:f.max});var z=this.cacheScaleDefs[l],U=z.max-z.min,lt=f.min,Bt=f.max,Ut=E*U,$t=lt-Ut,Kt=Bt+Ut,ae=Kt-$t,ye=ae/U;Kt>$t&&ye<100&&ye>.01&&D.scale(f.field,{nice:!1,min:lt-Ut,max:Bt+Ut})},g}(_h),Kv=Zv;va("dark",qi(iu)),G("canvas",$s),G("svg",qf),ue("Polygon",xc),ue("Interval",nl),ue("Schema",wc),ue("Path",qs),ue("Point",gc),ue("Line",cc),ue("Area",nc),ue("Edge",ac),ue("Heatmap",lc),_o("base",un),_o("interval",Cu),_o("pie",Tc),_o("polar",Mu),ja("overlap",Rc),ja("distribute",Lc),ja("fixed-overlap",Fc),ja("limit-in-shape",Oc),ja("limit-in-canvas",Tu),ja("pie-outer",Ic),Cn("fade-in",ul),Cn("fade-out",Lu),Cn("grow-in-x",Yc),Cn("grow-in-xy",Ep),Cn("grow-in-y",_u),Cn("scale-in-x",zc),Cn("scale-in-y",Ou),Cn("wave-in",Du),Cn("zoom-in",Vc),Cn("zoom-out",Wc),Cn("position-update",Iu),Cn("sector-path-update",Hc),Cn("path-in",Gc),Sr("rect",vl),Sr("mirror",Kc),Sr("list",jc),Sr("matrix",Zc),Sr("circle",Ru),Sr("tree",Jc),wa("axis",rv),wa("legend",sv),wa("tooltip",uv),wa("annotation",tv),wa("slider",bs),$r("tooltip",yl),$r("sibling-tooltip",fv),$r("ellipsis-text",Qu),$r("element-active",pv),$r("element-single-active",wv),$r("element-range-active",xv),$r("element-highlight",Cs),$r("element-highlight-by-x",Mv),$r("element-highlight-by-color",Cv),$r("element-single-highlight",Tv),$r("element-range-highlight",ih),$r("element-sibling-highlight",ih,{effectSiblings:!0,effectByRecord:!0}),$r("element-selected",Cl),$r("element-single-selected",Ms),$r("element-range-selected",Sl),$r("element-link-by-color",yv),$r("active-region",Ku),$r("list-active",oh),$r("list-selected",hh),$r("list-highlight",Do),$r("list-unchecked",Pp),$r("legend-item-highlight",Do,{componentNames:["legend"]}),$r("axis-label-highlight",Do,{componentNames:["axis"]}),$r("rect-mask",Al),$r("x-rect-mask",dh,{dim:"x"}),$r("y-rect-mask",dh,{dim:"y"}),$r("circle-mask",El),$r("path-mask",Es),$r("smooth-path-mask",yh),$r("cursor",mh),$r("data-filter",Dv),$r("brush",rs),$r("brush-x",rs,{dims:["x"]}),$r("brush-y",rs,{dims:["y"]}),$r("sibling-filter",Pl),$r("sibling-x-filter",Pl),$r("sibling-y-filter",Pl),$r("element-filter",Rv),$r("element-sibling-filter",Mh),$r("element-sibling-filter-record",Mh,{byRecord:!0}),$r("view-drag",zv),$r("view-move",Vv),$r("scale-translate",Uv),$r("scale-zoom",Kv),$r("reset-button",Yv,{name:"reset-button",text:"reset"});function Ja(m){return m.isInPlot()}_n("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),_n("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),_n("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),_n("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),_n("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),_n("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),_n("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),_n("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),_n("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),_n("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),_n("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),_n("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(m){return!m.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(m){return!m.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),_n("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ja,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Ja,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Ja,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),_n("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),_n("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ja,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Ja,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Ja,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),_n("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Ja,action:"path-mask:start"},{trigger:"mousedown",isEnable:Ja,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),_n("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),_n("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),_n("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),_n("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),_n("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),_n("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function Ih(m){return m.gEvent.preventDefault(),m.gEvent.originalEvent.deltaY>0}_n("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(m){return Ih(m.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(m){return!Ih(m.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),_n("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});var Oh={translate:Ks,rotate:ru,zoom:Zf,transform:ds,getAngle:Fe,polarToCartesian:ce}},15451:function(){},61343:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.registerAnimation=T.getAnimation=void 0;var v={};function d(F){return v[F.toLowerCase()]}T.getAnimation=d;function c(F,L){v[F.toLowerCase()]=L}T.registerAnimation=c},23361:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.doGroupAppearAnimate=T.doAnimate=T.getDefaultAnimateCfg=T.DEFAULT_ANIMATE_CFG=void 0;var d=v(21362),c=v(26169),F=v(43599),L=v(61343);T.DEFAULT_ANIMATE_CFG={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}};var O={interval:function(w){return{enter:{animation:w.isRect?w.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:w.isPolar&&w.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},_={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(w){var M;return w.isRect?M=w.isTransposed?"grow-in-x":"grow-in-y":(M="grow-in-xy",w.isPolar&&w.isTransposed&&(M="wave-in")),{animation:M}},schema:function(w){var M;return w.isRect?M=w.isTransposed?"grow-in-x":"grow-in-y":M="grow-in-xy",{animation:M}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function P(w,M){return{delay:c.isFunction(w.delay)?w.delay(M):w.delay,easing:c.isFunction(w.easing)?w.easing(M):w.easing,duration:c.isFunction(w.duration)?w.duration(M):w.duration,callback:w.callback}}function A(w,M,S){var I=O[w];return I&&(c.isFunction(I)&&(I=I(M)),I=c.deepMix({},T.DEFAULT_ANIMATE_CFG,I),S)?I[S]:I}T.getDefaultAnimateCfg=A;function x(w,M,S){var I=c.get(w.get("origin"),"data",F.FIELD_ORIGIN),B=M.animation,N=P(M,I);if(B){var G=L.getAnimation(B);G&&G(w,N,S)}else w.animate(S.toAttrs,N)}T.doAnimate=x;function C(w,M,S,I,B){if(_[S]){var N=_[S](I),G=L.getAnimation(c.get(N,"animation",""));if(G){var W=d.__assign(d.__assign(d.__assign({},T.DEFAULT_ANIMATE_CFG.appear),N),M);w.stopAnimate(),G(w,W,{coordinate:I,minYPoint:B,toAttrs:null})}}}T.doGroupAppearAnimate=C},52961:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=d.__importDefault(v(95472)),F=function(L){d.__extends(O,L);function O(_){var P=L.call(this)||this;P.destroyed=!1;var A=_.visible,x=A===void 0?!0:A;return P.visible=x,P}return O.prototype.show=function(){var _=this.visible;_||this.changeVisible(!0)},O.prototype.hide=function(){var _=this.visible;_&&this.changeVisible(!1)},O.prototype.destroy=function(){this.off(),this.destroyed=!0},O.prototype.changeVisible=function(_){this.visible!==_&&(this.visible=_)},O}(c.default);T.default=F},13595:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Controller=void 0;var d=v(26169),c=function(){function F(L){this.visible=!0,this.components=[],this.view=L}return F.prototype.clear=function(){d.each(this.components,function(L){L.component.destroy()}),this.components=[]},F.prototype.destroy=function(){this.clear()},F.prototype.getComponents=function(){return this.components},F.prototype.changeVisible=function(L){this.visible!==L&&(this.components.forEach(function(O){L?O.component.show():O.component.hide()}),this.visible=L)},F}();T.Controller=c},50058:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(13595),L=250,O=function(C,w){var M=w.x-C.x,S=w.y-C.y;return Math.abs(M)>Math.abs(S)?M>0?"right":"left":S>0?"down":"up"},_=function(C,w){var M=Math.abs(w.x-C.x),S=Math.abs(w.y-C.y);return Math.sqrt(M*M+S*S)},P=function(C,w){var M=(C.x+w.x)/2,S=(C.y+w.y)/2;return{x:M,y:S}},A=function(C,w){if(!!C){for(var M=[],S=C.length,I=0;I<S;I++){var B=C[I],N=B.clientX,G=B.clientY,W=w.getPointByClient(N,G);M.push(W)}return M}},x=function(C){c.__extends(w,C);function w(M){var S=C.call(this,M)||this;return S.processEvent={},S.touchStart=function(I){var B=A(I.originalEvent.touches,S.canvas);!B||(I.points=B,S.reset(),S.startTime=Date.now(),S.startPoints=B,B.length>1?(S.startDistance=_(B[0],B[1]),S.center=P(B[0],B[1])):S.pressTimeout=setTimeout(function(){var N="press";I.direction="none",S.emitStart(N,I),S.emitEvent(N,I),S.eventType=N},L))},S.touchMove=function(I){var B=A(I.originalEvent.touches,S.canvas);if(!!B){S.clearPressTimeout(),I.points=B;var N=S.startPoints;if(!!N)if(B.length>1){var G=S.startDistance,W=_(B[0],B[1]);I.zoom=W/G,I.center=S.center,S.emitStart("pinch",I),S.emitEvent("pinch",I)}else{var $=B[0].x-N[0].x,H=B[0].y-N[0].y,j=S.direction||O(N[0],B[0]);S.direction=j;var nt=S.getEventType(B);I.direction=j,I.deltaX=$,I.deltaY=H,S.emitStart(nt,I),S.emitEvent(nt,I);var rt=S.lastMoveTime,mt=Date.now();mt-rt>0&&(S.prevMoveTime=rt,S.prevMovePoints=S.lastMovePoints,S.lastMoveTime=mt,S.lastMovePoints=B)}}},S.touchEnd=function(I){S.emitEnd(I);var B=S.lastMoveTime,N=Date.now();if(N-B<100){var G=S.prevMoveTime||S.startTime,W=B-G;if(W>0){var $=S.prevMovePoints||S.startPoints,H=S.lastMovePoints,j=_($[0],H[0])/W;j>.3&&(I.velocity=j,I.direction=O($[0],H[0]),S.emitEvent("swipe",I))}}S.reset();var nt=I.touches;nt&&nt.length>0&&S.touchStart(I)},S.canvas=M.getCanvas(),S.delegateEvent(),S.processEvent={},S}return Object.defineProperty(w.prototype,"name",{get:function(){return"gesture"},enumerable:!1,configurable:!0}),w.prototype.init=function(){},w.prototype.render=function(){},w.prototype.layout=function(){},w.prototype.update=function(){},w.prototype.destroy=function(){this.reset(),this.offEvent(),this.processEvent=null},w.prototype.delegateEvent=function(){this.canvas.on("touchstart",this.touchStart),this.canvas.on("touchmove",this.touchMove),this.canvas.on("touchend",this.touchEnd)},w.prototype.offEvent=function(){this.canvas.off("touchstart",this.touchStart),this.canvas.off("touchmove",this.touchMove),this.canvas.off("touchend",this.touchEnd)},w.prototype.emitEvent=function(M,S){var I=this.view;I.emit(M,S)},w.prototype.emitStart=function(M,S){this.isProcess(M)||(this.enable(M),this.emitEvent(M+"start",S))},w.prototype.emitEnd=function(M){var S=this,I=this.processEvent;Object.keys(I).forEach(function(B){S.emitEvent(B+"end",M),delete I[B]})},w.prototype.enable=function(M){this.processEvent[M]=!0},w.prototype.isProcess=function(M){return this.processEvent[M]},w.prototype.reset=function(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null},w.prototype.clearPressTimeout=function(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)},w.prototype.getEventType=function(M){var S=this,I=S.eventType,B=S.view,N=S.startTime,G=S.startPoints;if(I)return I;var W,$=B.getEvents().pan;if(!$||!$.length)W="press";else{var H=Date.now();H-N>L&&_(G[0],M[0])<10?W="press":W="pan"}return this.eventType=W,W},w}(F.Controller);T.Z=x},77684:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(26169),L=v(80292),O=v(52715),_=v(85433),P=v(71866),A=v(13595);function x(w){for(var M=[],S=function(B){var N=w[B],G=F.find(M,function(W){return W.color===N.color&&W.name===N.name&&W.value===N.value&&W.title===N.title});G||M.push(N)},I=0;I<w.length;I++)S(I);return M}var C=function(w){c.__extends(M,w);function M(){var S=w!==null&&w.apply(this,arguments)||this;return S.isLocked=!1,S}return Object.defineProperty(M.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),M.prototype.init=function(){},M.prototype.isVisible=function(){var S=this.view.getOptions().tooltip;return S!==!1},M.prototype.render=function(){},M.prototype.showTooltip=function(S){if(this.point=S,!!this.isVisible()){var I=this.view,B=this.getTooltipItems(S);if(!B.length){this.hideTooltip();return}var N=this.getTitle(B),G={x:B[0].x,y:B[0].y};I.emit("tooltip:show",c.__assign({items:B,title:N},S));var W=this.getTooltipCfg(),$=W.follow,H=W.showMarkers,j=W.showCrosshairs,nt=W.showContent,rt=W.marker,mt=this.items,Ft=this.title;if(!F.isEqual(Ft,N)||!F.isEqual(mt,B)?(I.emit("tooltip:change",c.__assign({items:B,title:N},S)),nt&&(this.tooltip||this.renderTooltip(),this.tooltip.update(F.mix({},W,{items:B,title:N},$?S:{})),this.tooltip.show()),H&&this.renderTooltipMarkers(B,rt)):(this.tooltip&&$&&(this.tooltip.update(S),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=B,this.title=N,j){var Gt=F.get(W,["crosshairs","follow"],!1);this.renderCrosshairs(Gt?S:G,W)}}},M.prototype.hideTooltip=function(){var S=this.getTooltipCfg().follow;if(!S){this.point=null;return}var I=this.tooltipMarkersGroup;I&&I.hide();var B=this.xCrosshair,N=this.yCrosshair;B&&B.hide(),N&&N.hide();var G=this.tooltip;G&&G.hide(),this.view.emit("tooltip:hide",{}),this.point=null},M.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},M.prototype.unlockTooltip=function(){this.isLocked=!1;var S=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(S.capture)},M.prototype.isTooltipLocked=function(){return this.isLocked},M.prototype.clear=function(){var S=this,I=S.tooltip,B=S.xCrosshair,N=S.yCrosshair,G=S.tooltipMarkersGroup;I&&(I.hide(),I.clear()),B&&B.clear(),N&&N.clear(),G&&G.clear()},M.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},M.prototype.changeVisible=function(S){if(this.visible!==S){var I=this,B=I.tooltip,N=I.tooltipMarkersGroup,G=I.xCrosshair,W=I.yCrosshair;S?(B&&B.show(),N&&N.show(),G&&G.show(),W&&W.show()):(B&&B.hide(),N&&N.hide(),G&&G.hide(),W&&W.hide()),this.visible=S}},M.prototype.getTooltipItems=function(S){var I=this.findItemsFromView(this.view,S);if(I.length){I=F.flatten(I);for(var B=0,N=I;B<N.length;B++)for(var G=N[B],W=0,$=G;W<$.length;W++){var H=$[W],j=H.mappingData,nt=j.x,rt=j.y;H.x=F.isArray(nt)?nt[nt.length-1]:nt,H.y=F.isArray(rt)?rt[rt.length-1]:rt}var mt=this.getTooltipCfg().shared;if(mt===!1&&I.length>1){for(var Ft=I[0],Gt=Math.abs(S.y-Ft[0].y),gt=0,st=I;gt<st.length;gt++){var Xt=st[gt],Q=Math.abs(S.y-Xt[0].y);Q<=Gt&&(Ft=Xt,Gt=Q)}I=[Ft]}return x(F.flatten(I))}return[]},M.prototype.layout=function(){},M.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var S=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:S.get("width"),y:S.get("height")}})}},M.prototype.getTooltipCfg=function(){var S=this.view,I=S.getOptions().tooltip,B=S.getTheme(),N=F.get(B,["components","tooltip"],{}),G=F.isUndefined(F.get(I,"enterable"))?N.enterable:F.get(I,"enterable");return F.deepMix({},N,I,{capture:!!(G||this.isLocked)})},M.prototype.getTitle=function(S){var I=S[0].title||S[0].name;return this.title=I,I},M.prototype.renderTooltip=function(){var S=this.view.getCanvas(),I={start:{x:0,y:0},end:{x:S.get("width"),y:S.get("height")}},B=this.getTooltipCfg(),N=new L.HtmlTooltip(c.__assign(c.__assign({parent:S.get("el").parentNode,region:I},B),{visible:!1,crosshairs:null}));N.init(),this.tooltip=N},M.prototype.renderTooltipMarkers=function(S,I){for(var B=this.getTooltipMarkersGroup(),N=0,G=S;N<G.length;N++){var W=G[N],$=W.x,H=W.y,j=c.__assign(c.__assign({fill:W.color,symbol:"circle",shadowColor:W.color},I),{x:$,y:H});B.addShape("marker",{attrs:j})}},M.prototype.renderCrosshairs=function(S,I){var B=F.get(I,["crosshairs","type"],"x");B==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(S,I)):B==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(S,I)):B==="xy"&&(this.renderXCrosshairs(S,I),this.renderYCrosshairs(S,I))},M.prototype.renderXCrosshairs=function(S,I){var B=this.getViewWithGeometry(this.view).getCoordinate();if(!!O.isPointInCoordinate(B,S)){var N,G;if(B.isRect)B.isTransposed?(N={x:B.start.x,y:S.y},G={x:B.end.x,y:S.y}):(N={x:S.x,y:B.end.y},G={x:S.x,y:B.start.y});else{var W=O.getAngleByPoint(B,S),$=B.getCenter(),H=B.getRadius();G=_.polarToCartesian($.x,$.y,H,W),N=$}var j=F.deepMix({start:N,end:G,container:this.getTooltipCrosshairsGroup()},F.get(I,"crosshairs",{}),this.getCrosshairsText("x",S,I));delete j.type;var nt=this.xCrosshair;nt?nt.update(j):(nt=new L.Crosshair.Line(j),nt.init()),nt.render(),nt.show(),this.xCrosshair=nt}},M.prototype.renderYCrosshairs=function(S,I){var B=this.getViewWithGeometry(this.view).getCoordinate();if(!!O.isPointInCoordinate(B,S)){var N,G;if(B.isRect){var W=void 0,$=void 0;B.isTransposed?(W={x:S.x,y:B.end.y},$={x:S.x,y:B.start.y}):(W={x:B.start.x,y:S.y},$={x:B.end.x,y:S.y}),N={start:W,end:$},G="Line"}else N={center:B.getCenter(),radius:O.getDistanceToCenter(B,S),startAngle:B.startAngle,endAngle:B.endAngle},G="Circle";N=F.deepMix({container:this.getTooltipCrosshairsGroup()},N,F.get(I,"crosshairs",{}),this.getCrosshairsText("y",S,I)),delete N.type;var H=this.yCrosshair;H?B.isRect&&H.get("type")==="circle"||!B.isRect&&H.get("type")==="line"?(H=new L.Crosshair[G](N),H.init()):H.update(N):(H=new L.Crosshair[G](N),H.init()),H.render(),H.show(),this.yCrosshair=H}},M.prototype.getCrosshairsText=function(S,I,B){var N=F.get(B,["crosshairs","text"]),G=F.get(B,["crosshairs","follow"]),W=this.items;if(N){var $=this.getViewWithGeometry(this.view),H=W[0],j=$.getXScale(),nt=$.getYScales()[0],rt=void 0,mt=void 0;if(G){var Ft=this.view.getCoordinate().invert(I);rt=j.invert(Ft.x),mt=nt.invert(Ft.y)}else rt=H.data[j.field],mt=H.data[nt.field];var Gt=S==="x"?rt:mt;return F.isFunction(N)?N=N(S,Gt,W,I):N.content=Gt,{text:N}}},M.prototype.getGuideGroup=function(){if(!this.guideGroup){var S=this.view.foregroundGroup;this.guideGroup=S.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},M.prototype.getTooltipMarkersGroup=function(){var S=this.tooltipMarkersGroup;return S&&!S.destroyed?(S.clear(),S.show()):(S=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),S.toFront(),this.tooltipMarkersGroup=S),S},M.prototype.getTooltipCrosshairsGroup=function(){var S=this.tooltipCrosshairsGroup;return S||(S=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),S.toBack(),this.tooltipCrosshairsGroup=S),S},M.prototype.getTooltipItemsByHitShape=function(S,I,B){var N=[],G=S.container,W=G.getShape(I.x,I.y);if(W&&W.get("visible")&&W.get("origin")){var $=W.get("origin").mappingData,H=P.getTooltipItems($,S,B);H.length&&N.push(H)}return N},M.prototype.getTooltipItemsByFindData=function(S,I,B){var N=[],G=S.dataArray;S.sort(G);for(var W=0,$=G;W<$.length;W++){var H=$[W],j=P.findDataByPoint(I,H,S);if(j){var nt=S.getElementId(j),rt=S.elementsMap[nt];if(S.type==="heatmap"||rt.visible){var mt=P.getTooltipItems(j,S,B);mt.length&&N.push(mt)}}}return N},M.prototype.findItemsFromView=function(S,I){if(S.getOptions().tooltip===!1)return[];for(var B=[],N=S.geometries,G=this.getTooltipCfg(),W=G.shared,$=G.title,H=0,j=N;H<j.length;H++){var nt=j[H];if(nt.visible&&nt.tooltipOption!==!1){var rt=nt.type,mt=void 0;["point","edge","polygon"].includes(rt)?mt=this.getTooltipItemsByHitShape(nt,I,$):["area","line","path","heatmap"].includes(rt)?mt=this.getTooltipItemsByFindData(nt,I,$):W!==!1?mt=this.getTooltipItemsByFindData(nt,I,$):mt=this.getTooltipItemsByHitShape(nt,I,$),mt.length&&B.push(mt)}}for(var Ft=0,Gt=S.views;Ft<Gt.length;Ft++){var gt=Gt[Ft];B=B.concat(this.findItemsFromView(gt,I))}return B},M.prototype.getViewWithGeometry=function(S){var I=this;return S.geometries.length?S:F.find(S.views,function(B){return I.getViewWithGeometry(B)})},M}(A.Controller);T.Z=C},43599:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.COMPONENT_MAX_VIEW_PERCENTAGE=T.MIN_CHART_HEIGHT=T.MIN_CHART_WIDTH=T.FIELD_ORIGIN=T.GROUP_ATTRS=T.ELEMENT_STATE=T.PLOT_EVENTS=T.VIEW_LIFE_CIRCLE=T.GROUP_Z_INDEX=T.COMPONENT_TYPE=T.DIRECTION=T.LAYER=void 0;var v;(function(_){_.FORE="fore",_.MID="mid",_.BG="bg"})(v=T.LAYER||(T.LAYER={}));var d;(function(_){_.TOP="top",_.TOP_LEFT="top-left",_.TOP_RIGHT="top-right",_.RIGHT="right",_.RIGHT_TOP="right-top",_.RIGHT_BOTTOM="right-bottom",_.LEFT="left",_.LEFT_TOP="left-top",_.LEFT_BOTTOM="left-bottom",_.BOTTOM="bottom",_.BOTTOM_LEFT="bottom-left",_.BOTTOM_RIGHT="bottom-right",_.RADIUS="radius",_.CIRCLE="circle",_.NONE="none"})(d=T.DIRECTION||(T.DIRECTION={}));var c;(function(_){_.AXIS="axis",_.GRID="grid",_.LEGEND="legend",_.TOOLTIP="tooltip",_.ANNOTATION="annotation",_.OTHER="other"})(c=T.COMPONENT_TYPE||(T.COMPONENT_TYPE={})),T.GROUP_Z_INDEX={FORE:3,MID:2,BG:1};var F;(function(_){_.BEFORE_RENDER="beforerender",_.AFTER_RENDER="afterrender",_.BEFORE_PAINT="beforepaint",_.AFTER_PAINT="afterpaint",_.BEFORE_CHANGE_DATA="beforechangedata",_.AFTER_CHANGE_DATA="afterchangedata",_.BEFORE_CLEAR="beforeclear",_.AFTER_CLEAR="afterclear",_.BEFORE_DESTROY="beforedestroy"})(F=T.VIEW_LIFE_CIRCLE||(T.VIEW_LIFE_CIRCLE={}));var L;(function(_){_.MOUSE_ENTER="plot:mouseenter",_.MOUSE_DOWN="plot:mousedown",_.MOUSE_MOVE="plot:mousemove",_.MOUSE_UP="plot:mouseup",_.MOUSE_LEAVE="plot:mouseleave",_.TOUCH_START="plot:touchstart",_.TOUCH_MOVE="plot:touchmove",_.TOUCH_END="plot:touchend",_.TOUCH_CANCEL="plot:touchcancel",_.CLICK="plot:click",_.DBLCLICK="plot:dblclick",_.CONTEXTMENU="plot:contextmenu",_.LEAVE="plot:leave",_.ENTER="plot:enter"})(L=T.PLOT_EVENTS||(T.PLOT_EVENTS={}));var O;(function(_){_.ACTIVE="active",_.INACTIVE="inactive",_.SELECTED="selected",_.DEFAULT="default"})(O=T.ELEMENT_STATE||(T.ELEMENT_STATE={})),T.GROUP_ATTRS=["color","shape","size"],T.FIELD_ORIGIN="_origin",T.MIN_CHART_WIDTH=1,T.MIN_CHART_HEIGHT=1,T.COMPONENT_MAX_VIEW_PERCENTAGE=.25},80292:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Slider=T.HtmlTooltip=T.ContinuousLegend=T.CategoryLegend=T.CircleGrid=T.LineGrid=T.CircleAxis=T.LineAxis=T.Annotation=T.Crosshair=T.Component=T.GroupComponent=T.HtmlComponent=void 0;var d=v(23443);Object.defineProperty(T,"Event",{enumerable:!0,get:function(){return d.Event}}),Object.defineProperty(T,"AbstractGroup",{enumerable:!0,get:function(){return d.AbstractGroup}}),Object.defineProperty(T,"AbstractShape",{enumerable:!0,get:function(){return d.AbstractShape}});var c=v(87023);Object.defineProperty(T,"registerAdjust",{enumerable:!0,get:function(){return c.registerAdjust}}),Object.defineProperty(T,"getAdjust",{enumerable:!0,get:function(){return c.getAdjust}}),Object.defineProperty(T,"Adjust",{enumerable:!0,get:function(){return c.Adjust}});var F=v(68193);Object.defineProperty(T,"getAttribute",{enumerable:!0,get:function(){return F.getAttribute}}),Object.defineProperty(T,"Attribute",{enumerable:!0,get:function(){return F.Attribute}});var L=v(88806);Object.defineProperty(T,"Color",{enumerable:!0,get:function(){return L.Color}});var O=v(14533);Object.defineProperty(T,"getCoordinate",{enumerable:!0,get:function(){return O.getCoordinate}}),Object.defineProperty(T,"registerCoordinate",{enumerable:!0,get:function(){return O.registerCoordinate}}),Object.defineProperty(T,"Coordinate",{enumerable:!0,get:function(){return O.Coordinate}});var _=v(15856);Object.defineProperty(T,"getScale",{enumerable:!0,get:function(){return _.getScale}}),Object.defineProperty(T,"registerScale",{enumerable:!0,get:function(){return _.registerScale}}),Object.defineProperty(T,"Scale",{enumerable:!0,get:function(){return _.Scale}});var P=v(41026);Object.defineProperty(T,"Annotation",{enumerable:!0,get:function(){return P.Annotation}}),Object.defineProperty(T,"Component",{enumerable:!0,get:function(){return P.Component}}),Object.defineProperty(T,"Crosshair",{enumerable:!0,get:function(){return P.Crosshair}}),Object.defineProperty(T,"GroupComponent",{enumerable:!0,get:function(){return P.GroupComponent}}),Object.defineProperty(T,"HtmlComponent",{enumerable:!0,get:function(){return P.HtmlComponent}}),Object.defineProperty(T,"Slider",{enumerable:!0,get:function(){return P.Slider}});var A=P.Axis.Line,x=P.Axis.Circle;T.LineAxis=A,T.CircleAxis=x;var C=P.Grid.Line,w=P.Grid.Circle;T.LineGrid=C,T.CircleGrid=w;var M=P.Legend.Category,S=P.Legend.Continuous;T.CategoryLegend=M,T.ContinuousLegend=S;var I=P.Tooltip.Html;T.HtmlTooltip=I},4329:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(26169),L=v(23361),O=c.__importDefault(v(52961)),_=v(85433),P=v(82614),A=function(x){c.__extends(C,x);function C(w){var M=x.call(this,w)||this;M.states=[];var S=w.shapeFactory,I=w.container,B=w.offscreenGroup,N=w.visible,G=N===void 0?!0:N;return M.shapeFactory=S,M.container=I,M.offscreenGroup=B,M.visible=G,M}return C.prototype.draw=function(w,M){M===void 0&&(M=!1),this.model=w,this.data=w.data,this.shapeType=this.getShapeType(w),this.drawShape(w,M),this.visible===!1&&this.changeVisible(!1)},C.prototype.update=function(w){var M=this,S=M.shapeFactory,I=M.shape;if(!!I){this.model=w,this.data=w.data,this.shapeType=this.getShapeType(w),this.setShapeInfo(I,w);var B=this.getOffscreenGroup(),N=S.drawShape(this.shapeType,w,B);N.cfg.data=this.data,N.cfg.origin=w,this.syncShapeStyle(I,N,"",this.getAnimateCfg("update"))}},C.prototype.destroy=function(){var w=this,M=w.shapeFactory,S=w.shape;if(S){var I=this.getAnimateCfg("leave");I?L.doAnimate(S,I,{coordinate:M.coordinate,toAttrs:c.__assign({},S.attr())}):S.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,x.prototype.destroy.call(this)},C.prototype.changeVisible=function(w){x.prototype.changeVisible.call(this,w),w?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(M){M.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(M){M.hide()}))},C.prototype.setState=function(w,M){var S=this,I=this,B=I.states,N=I.shapeFactory,G=I.model,W=I.shape,$=I.shapeType,H=B.indexOf(w);if(M){if(H>-1)return;B.push(w),(w==="active"||w==="selected")&&W.toFront()}else{if(H===-1)return;B.splice(H,1),(w==="active"||w==="selected")&&W.toBack()}var j=N.drawShape($,G,this.getOffscreenGroup());B.length?B.forEach(function(rt){S.syncShapeStyle(W,j,rt,null)}):this.syncShapeStyle(W,j,"reset",null),j.remove(!0);var nt={state:w,stateStatus:M,element:this,target:this.container};this.container.emit("statechange",nt),P.propagationDelegate(this.shape,"statechange",nt)},C.prototype.clearStates=function(){var w=this,M=this.states;F.each(M,function(S){w.setState(S,!1)}),this.states=[]},C.prototype.hasState=function(w){return this.states.includes(w)},C.prototype.getStates=function(){return this.states},C.prototype.getData=function(){return this.data},C.prototype.getModel=function(){return this.model},C.prototype.getBBox=function(){var w=this,M=w.shape,S=w.labelShape,I={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return M&&(I=M.getCanvasBBox()),S&&S.forEach(function(B){var N=B.getCanvasBBox();I.x=Math.min(N.x,I.x),I.y=Math.min(N.y,I.y),I.minX=Math.min(N.minX,I.minX),I.minY=Math.min(N.minY,I.minY),I.maxX=Math.max(N.maxX,I.maxX),I.maxY=Math.max(N.maxY,I.maxY)}),I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I},C.prototype.getStatesStyle=function(){if(!this.statesStyle){var w=this,M=w.shapeType,S=w.geometry,I=w.shapeFactory,B=S.stateOption,N=I.defaultShapeType,G=I.theme[M]||I.theme[N];this.statesStyle=F.deepMix({},G,B)}return this.statesStyle},C.prototype.getStateStyle=function(w,M){var S=this.getStatesStyle(),I=F.get(S,[w,"style"],{}),B=I[M]||I;return F.isFunction(B)?B(this):B},C.prototype.getAnimateCfg=function(w){var M=this.animate;return M?M[w]:null},C.prototype.drawShape=function(w,M){M===void 0&&(M=!1);var S=this,I=S.shapeFactory,B=S.container,N=S.shapeType;if(this.shape=I.drawShape(N,w,B),this.shape){this.setShapeInfo(this.shape,w);var G=this.shape.cfg.name;G?F.isString(G)&&(this.shape.cfg.name=["element",G]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var W=M?"enter":"appear",$=this.getAnimateCfg(W);$&&L.doAnimate(this.shape,$,{coordinate:I.coordinate,toAttrs:c.__assign({},this.shape.attr())})}},C.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var w=this.container.getGroupBase();this.offscreenGroup=new w({})}return this.offscreenGroup},C.prototype.setShapeInfo=function(w,M){var S=this;if(w.cfg.origin=M,w.cfg.element=this,w.isGroup()){var I=w.get("children");I.forEach(function(B){S.setShapeInfo(B,M)})}},C.prototype.syncShapeStyle=function(w,M,S,I,B){if(S===void 0&&(S=""),B===void 0&&(B=0),w.isGroup())for(var N=w.get("children"),G=M.get("children"),W=0;W<N.length;W++)this.syncShapeStyle(N[W],G[W],S,I,B+W);else{if(S&&S!=="reset"){var $=w.get("name");F.isArray($)&&($=$[1]);var H=this.getStateStyle(S,$||B);M.attr(H)}var j=_.getReplaceAttrs(w,M);this.animate?I?L.doAnimate(w,I,{coordinate:this.shapeFactory.coordinate,toAttrs:j,shapeModel:this.model}):S?(w.stopAnimate(),w.animate(j,{duration:300})):w.attr(j):w.attr(j)}},C.prototype.getShapeType=function(w){var M=F.get(w,"shape");return F.isArray(M)?M[0]:M},C}(O.default);d=A},74236:function(xt,T,v){"use strict";var d;d={value:!0},T.iV=d=d=void 0;var c=v(21362),F=v(96466),L=v(26877);d=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],d=["cross","tick","plus","hyphen","line"];function O(_,P,A,x,C){var w=L.getStyle(P,C,!C,"r"),M=_.parsePoints(P.points),S=M[0];if(P.isStack)S=M[1];else if(M.length>1){for(var I=A.addGroup(),B=0,N=M;B<N.length;B++){var G=N[B];I.addShape({type:"marker",attrs:c.__assign(c.__assign(c.__assign({},w),{symbol:F.MarkerSymbols[x]||x}),G)})}return I}return A.addShape({type:"marker",attrs:c.__assign(c.__assign(c.__assign({},w),{symbol:F.MarkerSymbols[x]||x}),S)})}T.iV=O},26877:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getStyle=void 0;var d=v(21362),c=v(26169);function F(L,O,_,P){P===void 0&&(P="");var A=L.style,x=A===void 0?{}:A,C=L.defaultStyle,w=L.color,M=L.size,S=d.__assign(d.__assign({},C),x);return w&&(O&&(x.stroke||(S.stroke=w)),_&&(x.fill||(S.fill=w))),P&&c.isNil(x[P])&&!c.isNil(M)&&(S[P]=M),S}T.getStyle=F},24902:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.convertPolarPath=T.convertNormalPath=T.getSplinePath=T.getLinePath=T.catmullRom2bezier=T.smoothBezier=void 0;var d=v(36694),c=v(26169),F=v(52715);function L(S,I){var B=[];if(S.length){B.push(["M",S[0].x,S[0].y]);for(var N=1,G=S.length;N<G;N+=1){var W=S[N];B.push(["L",W.x,W.y])}I&&B.push(["Z"])}return B}function O(S,I){for(var B=[S[0]],N=1,G=S.length;N<G;N=N+2){var W=I.convert({x:S[N],y:S[N+1]});B.push(W.x,W.y)}return B}function _(S,I,B){var N=B.isTransposed,G=B.startAngle,W=B.endAngle,$={x:S[1],y:S[2]},H={x:I[1],y:I[2]},j=[],nt=N?"y":"x",rt=Math.abs(H[nt]-$[nt])*(W-G),mt=H[nt]>=$[nt]?1:0,Ft=rt>Math.PI?1:0,Gt=B.convert(H),gt=F.getDistanceToCenter(B,Gt);if(gt>=.5)if(rt===Math.PI*2){var st={x:(H.x+$.x)/2,y:(H.y+$.y)/2},Xt=B.convert(st);j.push(["A",gt,gt,0,Ft,mt,Xt.x,Xt.y]),j.push(["A",gt,gt,0,Ft,mt,Gt.x,Gt.y])}else j.push(["A",gt,gt,0,Ft,mt,Gt.x,Gt.y]);return j}function P(S){c.each(S,function(I,B){var N=I;if(N[0].toLowerCase()==="a"){var G=S[B-1],W=S[B+1];W&&W[0].toLowerCase()==="a"?G&&G[0].toLowerCase()==="l"&&(G[0]="M"):G&&G[0].toLowerCase()==="a"&&W&&W[0].toLowerCase()==="l"&&(W[0]="M")}})}T.smoothBezier=function(S,I,B,N){var G=[],W,$,H=!!N,j,nt;if(H){j=[Infinity,Infinity],nt=[-Infinity,-Infinity];for(var rt=0,mt=S.length;rt<mt;rt++){var Ft=S[rt];j=d.vec2.min([0,0],j,Ft),nt=d.vec2.max([0,0],nt,Ft)}j=d.vec2.min([0,0],j,N[0]),nt=d.vec2.max([0,0],nt,N[1])}for(var rt=0,Gt=S.length;rt<Gt;rt++){var Ft=S[rt];if(B)W=S[rt?rt-1:Gt-1],$=S[(rt+1)%Gt];else if(rt===0||rt===Gt-1){G.push(Ft);continue}else W=S[rt-1],$=S[rt+1];var gt=[0,0];gt=d.vec2.sub(gt,$,W),gt=d.vec2.scale(gt,gt,I);var st=d.vec2.distance(Ft,W),Xt=d.vec2.distance(Ft,$),Q=st+Xt;Q!==0&&(st/=Q,Xt/=Q);var qt=d.vec2.scale([0,0],gt,-st),y=d.vec2.scale([0,0],gt,Xt),Yt=d.vec2.add([0,0],Ft,qt),K=d.vec2.add([0,0],Ft,y);H&&(Yt=d.vec2.max([0,0],Yt,j),Yt=d.vec2.min([0,0],Yt,nt),K=d.vec2.max([0,0],K,j),K=d.vec2.min([0,0],K,nt)),G.push(Yt),G.push(K)}return B&&G.push(G.shift()),G};function A(S,I,B){for(var N=!!I,G=[],W=0,$=S.length;W<$;W+=2)G.push([S[W],S[W+1]]);for(var H=T.smoothBezier(G,.4,N,B),j=G.length,nt=[],rt,mt,Ft,W=0;W<j-1;W++)rt=H[W*2],mt=H[W*2+1],Ft=G[W+1],nt.push(["C",rt[0],rt[1],mt[0],mt[1],Ft[0],Ft[1]]);return N&&(rt=H[j],mt=H[j+1],Ft=G[0],nt.push(["C",rt[0],rt[1],mt[0],mt[1],Ft[0],Ft[1]])),nt}T.catmullRom2bezier=A;function x(S,I){return L(S,I)}T.getLinePath=x;function C(S,I,B){var N=[],G=S[0],W=null;if(S.length<=2)return x(S,I);for(var $=0,H=S.length;$<H;$++){var j=S[$];(!W||!(W.x===j.x&&W.y===j.y))&&(N.push(j.x),N.push(j.y),W=j)}var nt=B||[[0,0],[1,1]],rt=A(N,I,nt);return rt.unshift(["M",G.x,G.y]),rt}T.getSplinePath=C;function w(S,I){var B=[];return c.each(I,function(N){var G=N[0];switch(G.toLowerCase()){case"m":case"l":case"c":B.push(O(N,S));break;case"z":default:B.push(N);break}}),B}T.convertNormalPath=w;function M(S,I){var B=[],N,G,W,$;return c.each(I,function(H,j){var nt=H[0];switch(nt.toLowerCase()){case"m":case"c":case"q":B.push(O(H,S));break;case"l":N=I[j-1],G=H,W=S.isTransposed,$=W?N[N.length-2]===G[1]:N[N.length-1]===G[2],$?B=B.concat(_(N,G,S)):B.push(O(H,S));break;case"z":default:B.push(H);break}}),P(B),B}T.convertPolarPath=M},85909:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=function(){function F(L,O){this.context=L,this.cfg=O,L.addAction(this)}return F.prototype.applyCfg=function(L){d.assign(this,L)},F.prototype.init=function(){this.applyCfg(this.cfg)},F.prototype.destroy=function(){this.context.removeAction(this),this.context=null},F}();T.default=c},37611:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=d.__importDefault(v(85909)),F=function(L){d.__extends(O,L);function O(){return L!==null&&L.apply(this,arguments)||this}return O.prototype.execute=function(){this.callback&&this.callback(this.context)},O.prototype.destroy=function(){L.prototype.destroy.call(this),this.callback=null},O}(c.default);T.default=F},53155:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.createCallbackAction=T.unregisterAction=T.registerAction=T.getActionClass=T.createAction=void 0;var d=v(21362),c=d.__importDefault(v(37611)),F=v(26169),L={};function O(C,w){var M=L[C],S=null;if(M){var I=M.ActionClass,B=M.cfg;S=new I(w,B),S.name=C,S.init()}return S}T.createAction=O;function _(C){var w=L[C];return F.get(w,"ActionClass")}T.getActionClass=_;function P(C,w,M){L[C]={ActionClass:w,cfg:M}}T.registerAction=P;function A(C){delete L[C]}T.unregisterAction=A;function x(C,w){var M=new c.default(w);return M.callback=C,M.name="callback",M}T.createCallbackAction=x},48564:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getScaleByField=T.isInRecords=T.getSiblingPoint=T.getSilbings=T.isInBox=T.getSpline=T.distance=T.getComponents=T.getElementsByPath=T.getIntersectElements=T.intersectRect=T.getElementValue=T.getElementsByState=T.getElementsByField=T.getElements=T.getSiblingMaskElements=T.getMaskedElements=T.isMask=T.isSlider=T.isList=T.isElementChange=T.getDelegationObject=T.getCurrentElement=void 0;var d=v(21362),c=v(26169),F=v(24902),L=v(60103),O=d.__importDefault(v(65410));function _(Yt,K){var ht=Yt.event,J=ht.target,At=J.getCanvasBBox();return At.width>=K||At.height>=K?At:null}function P(Yt,K){var ht=Yt.event,J=ht.target,At=J.getCanvasBBox();return At.width>=K||At.height>=K?J.attr("path"):null}function A(Yt){var K=Yt.event,ht,J=K.target;return J&&(ht=J.get("element")),ht}T.getCurrentElement=A;function x(Yt){var K=Yt.event,ht=K.target,J;return ht&&(J=ht.get("delegateObject")),J}T.getDelegationObject=x;function C(Yt){var K=Yt.event.gEvent;return!(K&&K.fromShape&&K.toShape&&K.fromShape.get("element")===K.toShape.get("element"))}T.isElementChange=C;function w(Yt){return Yt&&Yt.component&&Yt.component.isList()}T.isList=w;function M(Yt){return Yt&&Yt.component&&Yt.component.isSlider()}T.isSlider=M;function S(Yt){var K=Yt.event,ht=K.target;return ht&&ht.get("name")==="mask"}T.isMask=S;function I(Yt,K){var ht=Yt.event.target;if(ht.get("type")==="path"){var J=P(Yt,K);return J?rt(Yt.view,J):void 0}var At=_(Yt,K);return At?j(Yt.view,At):null}T.getMaskedElements=I;function B(Yt,K,ht){var J=_(Yt,ht);if(!J)return null;var At=Yt.view,Vt=Q(At,K,{x:J.x,y:J.y}),pt=Q(At,K,{x:J.maxX,y:J.maxY}),Lt={minX:Vt.x,minY:Vt.y,maxX:pt.x,maxY:pt.y};return j(K,Lt)}T.getSiblingMaskElements=B;function N(Yt){var K=Yt.geometries,ht=[];return c.each(K,function(J){var At=J.elements;ht=ht.concat(At)}),Yt.views&&Yt.views.length&&c.each(Yt.views,function(J){ht=ht.concat(N(J))}),ht}T.getElements=N;function G(Yt,K,ht){var J=N(Yt);return J.filter(function(At){return $(At,K)===ht})}T.getElementsByField=G;function W(Yt,K){var ht=Yt.geometries,J=[];return c.each(ht,function(At){var Vt=At.getElementsBy(function(pt){return pt.hasState(K)});J=J.concat(Vt)}),J}T.getElementsByState=W;function $(Yt,K){var ht=Yt.getModel(),J=ht.data,At;return c.isArray(J)?At=J[0][K]:At=J[K],At}T.getElementValue=$;function H(Yt,K){return!(K.minX>Yt.maxX||K.maxX<Yt.minX||K.minY>Yt.maxY||K.maxY<Yt.minY)}T.intersectRect=H;function j(Yt,K){var ht=N(Yt),J=[];return c.each(ht,function(At){var Vt=At.shape,pt=Vt.getCanvasBBox();H(K,pt)&&J.push(At)}),J}T.getIntersectElements=j;function nt(Yt){var K=[];return c.each(Yt,function(ht){var J=ht[0];if(J!=="A")for(var At=1;At<ht.length;At=At+2)K.push([ht[At],ht[At+1]]);else{var Vt=ht.length;K.push([ht[Vt-2],ht[Vt-1]])}}),K}function rt(Yt,K){var ht=N(Yt),J=nt(K),At=ht.filter(function(Vt){var pt=Vt.shape,Lt;if(pt.get("type")==="path")Lt=nt(pt.attr("path"));else{var Tt=pt.getCanvasBBox();Lt=L.toPoints(Tt)}return O.default(J,Lt)});return At}T.getElementsByPath=rt;function mt(Yt){return Yt.getComponents().map(function(K){return K.component})}T.getComponents=mt;function Ft(Yt,K){var ht=K.x-Yt.x,J=K.y-Yt.y;return Math.sqrt(ht*ht+J*J)}T.distance=Ft;function Gt(Yt,K){if(Yt.length<=2)return F.getLinePath(Yt,!1);var ht=Yt[0],J=[];c.each(Yt,function(Vt){J.push(Vt.x),J.push(Vt.y)});var At=F.catmullRom2bezier(J,K,null);return At.unshift(["M",ht.x,ht.y]),At}T.getSpline=Gt;function gt(Yt,K){return Yt.x<=K.x&&Yt.maxX>=K.x&&Yt.y<=K.y&&Yt.maxY>K.y}T.isInBox=gt;function st(Yt){var K=Yt.parent,ht=null;return K&&(ht=K.views.filter(function(J){return J!==Yt})),ht}T.getSilbings=st;function Xt(Yt,K){var ht=Yt.getCoordinate();return ht.invert(K)}function Q(Yt,K,ht){var J=Xt(Yt,ht);return K.getCoordinate().convert(J)}T.getSiblingPoint=Q;function qt(Yt,K,ht,J){var At=!1;return c.each(Yt,function(Vt){if(Vt[ht]===K[ht]&&Vt[J]===K[J])return At=!0,!1}),At}T.isInRecords=qt;function y(Yt,K){var ht=Yt.getScaleByField(K);return!ht&&Yt.views&&c.each(Yt.views,function(J){if(ht=y(J,K),ht)return!1}),ht}T.getScaleByField=y},96053:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(48564),F=function(){function L(O){this.actions=[],this.event=null,this.cacheMap={},this.view=O}return L.prototype.cache=function(){for(var O=[],_=0;_<arguments.length;_++)O[_]=arguments[_];if(O.length===1)return this.cacheMap[O[0]];O.length===2&&(this.cacheMap[O[0]]=O[1])},L.prototype.getAction=function(O){return this.actions.find(function(_){return _.name===O})},L.prototype.addAction=function(O){this.actions.push(O)},L.prototype.removeAction=function(O){var _=this.actions,P=this.actions.indexOf(O);P>=0&&_.splice(P,1)},L.prototype.getCurrentPoint=function(){var O=this.event;if(O)if(O.target instanceof HTMLElement){var _=this.view.getCanvas(),P=_.getPointByClient(O.clientX,O.clientY);return P}else return{x:O.x,y:O.y};return null},L.prototype.getCurrentShape=function(){return d.get(this.event,["gEvent","shape"])},L.prototype.isInPlot=function(){var O=this.getCurrentPoint();return O?this.view.isPointInPlot(O):!1},L.prototype.isInShape=function(O){var _=this.getCurrentShape();return _?_.get("name")===O:!1},L.prototype.isInComponent=function(O){var _=c.getComponents(this.view),P=this.getCurrentPoint();return P?!!_.find(function(A){var x=A.getBBox();return O?A.get("name")===O&&c.isInBox(x,P):c.isInBox(x,P)}):!1},L.prototype.destroy=function(){this.view=null,this.event=null,d.each(this.actions.slice(),function(O){O.destroy()}),this.actions=null,this.cacheMap=null},L}();T.default=F},40518:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(21362),F=v(26169),L=v(53155),O=c.__importDefault(v(96053)),_=c.__importDefault(v(48025));function P(w,M){var S=w.split(":"),I=S[0],B=M.getAction(I)||L.createAction(I,M);if(!B)throw new Error("There is no action named "+I);var N=S[1];return{action:B,methodName:N}}function A(w){var M=w.action,S=w.methodName;if(M[S])M[S]();else throw new Error("Action("+M.name+") doesn't have a method called "+S)}var x={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},C=function(w){c.__extends(M,w);function M(S,I){var B=w.call(this,S,I)||this;return B.callbackCaches={},B.emitCaches={},B.steps=I,B}return M.prototype.init=function(){this.initContext(),w.prototype.init.call(this)},M.prototype.destroy=function(){w.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},M.prototype.initEvents=function(){var S=this;F.each(this.steps,function(I,B){F.each(I,function(N){var G=S.getActionCallback(B,N);G&&S.bindEvent(N.trigger,G)})})},M.prototype.clearEvents=function(){var S=this;F.each(this.steps,function(I,B){F.each(I,function(N){var G=S.getActionCallback(B,N);G&&S.offEvent(N.trigger,G)})})},M.prototype.initContext=function(){var S=this.view,I=new O.default(S);this.context=I;var B=this.steps;F.each(B,function(N){F.each(N,function(G){if(F.isFunction(G.action))G.actionObject={action:L.createCallbackAction(G.action,I),methodName:"execute"};else if(F.isString(G.action))G.actionObject=P(G.action,I);else if(F.isArray(G.action)){var W=G.action;G.actionObject=[],F.each(W,function($){G.actionObject.push(P($,I))})}})})},M.prototype.isAllowStep=function(S){var I=this.currentStepName,B=this.steps;if(I===S||S===x.SHOW_ENABLE)return!0;if(S===x.PROCESSING)return I===x.START;if(S===x.START)return I!==x.PROCESSING;if(S===x.END)return I===x.PROCESSING||I===x.START;if(S===x.ROLLBACK){if(B[x.END])return I===x.END;if(I===x.START)return!0}return!1},M.prototype.isAllowExcute=function(S,I){if(this.isAllowStep(S)){var B=this.getKey(S,I);return I.once&&this.emitCaches[B]?!1:I.isEnable?I.isEnable(this.context):!0}return!1},M.prototype.enterStep=function(S){this.currentStepName=S,this.emitCaches={}},M.prototype.afterExecute=function(S,I){S!==x.SHOW_ENABLE&&this.currentStepName!==S&&this.enterStep(S);var B=this.getKey(S,I);this.emitCaches[B]=!0},M.prototype.getKey=function(S,I){return S+I.trigger+I.action},M.prototype.getActionCallback=function(S,I){var B=this,N=this.context,G=this.callbackCaches,W=I.actionObject;if(I.action&&W){var $=this.getKey(S,I);if(!G[$]){var H=function(j){N.event=j,B.isAllowExcute(S,I)?(F.isArray(W)?F.each(W,function(nt){N.event=j,A(nt)}):(N.event=j,A(W)),B.afterExecute(S,I),I.callback&&(N.event=j,I.callback(N))):N.event=null};I.debounce?G[$]=F.debounce(H,I.debounce.wait,I.debounce.immediate):I.throttle?G[$]=F.throttle(H,I.throttle.wait,{leading:I.throttle.leading,trailing:I.throttle.trailing}):G[$]=H}return G[$]}return null},M.prototype.bindEvent=function(S,I){var B=S.split(":");B[0]==="window"?window.addEventListener(B[1],I):B[0]==="document"?document.addEventListener(B[1],I):this.view.on(S,I)},M.prototype.offEvent=function(S,I){var B=S.split(":");B[0]==="window"?window.removeEventListener(B[1],I):B[0]==="document"?document.removeEventListener(B[1],I):this.view.off(S,I)},M}(_.default);d=C},48025:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(){function d(c,F){this.view=c,this.cfg=F}return d.prototype.init=function(){this.initEvents()},d.prototype.initEvents=function(){},d.prototype.clearEvents=function(){},d.prototype.destroy=function(){this.clearEvents()},d}();T.default=v},60103:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.toPoints=T.getRegionBBox=T.BBox=void 0;var d=v(26169),c=v(43599),F=function(){function O(_,P,A,x){_===void 0&&(_=0),P===void 0&&(P=0),A===void 0&&(A=0),x===void 0&&(x=0),this.x=_,this.y=P,this.height=x,this.width=A}return O.fromRange=function(_,P,A,x){return new O(_,P,A-_,x-P)},Object.defineProperty(O.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),O.prototype.isEqual=function(_){return this.x===_.x&&this.y===_.y&&this.width===_.width&&this.height===_.height},O.prototype.clone=function(){return new O(this.x,this.y,this.width,this.height)},O.prototype.add=function(){for(var _=[],P=0;P<arguments.length;P++)_[P]=arguments[P];var A=this.clone();return d.each(_,function(x){A.x=Math.min(x.x,A.x),A.y=Math.min(x.y,A.y),A.width=Math.max(x.maxX,A.maxX)-A.x,A.height=Math.max(x.maxY,A.maxY)-A.y}),A},O.prototype.merge=function(){for(var _=[],P=0;P<arguments.length;P++)_[P]=arguments[P];var A=this.clone();return d.each(_,function(x){A.x=Math.max(x.x,A.x),A.y=Math.max(x.y,A.y),A.width=Math.min(x.maxX,A.maxX)-A.x,A.height=Math.min(x.maxY,A.maxY)-A.y}),A},O.prototype.cut=function(_,P){var A=_.width,x=_.height;switch(P){case c.DIRECTION.TOP:case c.DIRECTION.TOP_LEFT:case c.DIRECTION.TOP_RIGHT:return O.fromRange(this.minX,this.minY+x,this.maxX,this.maxY);case c.DIRECTION.RIGHT:case c.DIRECTION.RIGHT_TOP:case c.DIRECTION.RIGHT_BOTTOM:return O.fromRange(this.minX,this.minY,this.maxX-A,this.maxY);case c.DIRECTION.BOTTOM:case c.DIRECTION.BOTTOM_LEFT:case c.DIRECTION.BOTTOM_RIGHT:return O.fromRange(this.minX,this.minY,this.maxX,this.maxY-x);case c.DIRECTION.LEFT:case c.DIRECTION.LEFT_TOP:case c.DIRECTION.LEFT_BOTTOM:return O.fromRange(this.minX+A,this.minY,this.maxX,this.maxY);default:return this}},O.prototype.shrink=function(_){var P=_[0],A=_[1],x=_[2],C=_[3];return new O(this.x+C,this.y+P,this.width-C-A,this.height-P-x)},O.prototype.exceed=function(_){return[Math.max(-this.minY+_.minY,0),Math.max(this.maxX-_.maxX,0),Math.max(this.maxY-_.maxY,0),Math.max(-this.minX+_.minX,0)]},O.prototype.size=function(){return this.width*this.height},O}();T.BBox=F,T.getRegionBBox=function(O,_){var P=_.start,A=_.end;return new F(O.x+O.width*P.x,O.y+O.height*P.y,O.width*Math.abs(A.x-P.x),O.height*Math.abs(A.y-P.y))};function L(O){return[[O.minX,O.minY],[O.maxX,O.minY],[O.maxX,O.maxY],[O.minX,O.maxY]]}T.toPoints=L},52715:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getCoordinateClipCfg=T.getAngleByPoint=T.isPointInCoordinate=T.getDistanceToCenter=T.isFullCircle=T.getXDimensionLength=void 0;var d=v(85433),c=v(84920);function F(x){if(x.isPolar&&!x.isTransposed)return(x.endAngle-x.startAngle)*x.getRadius();var C=x.convert({x:0,y:0}),w=x.convert({x:1,y:0});return Math.sqrt(Math.pow(w.x-C.x,2)+Math.pow(w.y-C.y,2))}T.getXDimensionLength=F;function L(x){if(x.isPolar){var C=x.startAngle,w=x.endAngle;return w-C==Math.PI*2}return!1}T.isFullCircle=L;function O(x,C){var w=x.getCenter();return Math.sqrt(Math.pow(C.x-w.x,2)+Math.pow(C.y-w.y,2))}T.getDistanceToCenter=O;function _(x,C){var w=!1;if(x)if(x.type==="theta"){var M=x.start,S=x.end;w=c.isBetween(C.x,M.x,S.x)&&c.isBetween(C.y,M.y,S.y)}else{var I=x.invert(C);w=c.isBetween(I.x,0,1)&&c.isBetween(I.y,0,1)}return w}T.isPointInCoordinate=_;function P(x,C){var w=x.getCenter();return Math.atan2(C.y-w.y,C.x-w.x)}T.getAngleByPoint=P;function A(x,C){C===void 0&&(C=0);var w=x.start,M=x.end,S=x.getWidth(),I=x.getHeight();if(x.isPolar){var B=x.startAngle,N=x.endAngle,G=x.getCenter(),W=x.getRadius();return{type:"path",startState:{path:d.getSectorPath(G.x,G.y,W+C,B,B)},endState:function(H){var j=(N-B)*H+B,nt=d.getSectorPath(G.x,G.y,W+C,B,j);return{path:nt}},attrs:{path:d.getSectorPath(G.x,G.y,W+C,B,N)}}}var $;return x.isTransposed?$={height:I+C*2}:$={width:S+C*2},{type:"rect",startState:{x:w.x-C,y:M.y-C,width:x.isTransposed?S+C*2:0,height:x.isTransposed?0:I+C*2},endState:$,attrs:{x:w.x-C,y:M.y-C,width:S+C*2,height:I+C*2}}}T.getCoordinateClipCfg=A},85433:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getReplaceAttrs=T.getPolygonCentroid=T.getAngle=T.getArcPath=T.getSectorPath=T.polarToCartesian=void 0;var d=v(26169);function c(x){if(d.isEmpty(x))return null;var C=x[0].x,w=x[0].x,M=x[0].y,S=x[0].y;return d.each(x,function(I){C=C>I.x?I.x:C,w=w<I.x?I.x:w,M=M>I.y?I.y:M,S=S<I.y?I.y:S}),{minX:C,maxX:w,minY:M,maxY:S,centerX:(C+w)/2,centerY:(M+S)/2}}function F(x,C,w,M){return{x:x+w*Math.cos(M),y:C+w*Math.sin(M)}}T.polarToCartesian=F;function L(x,C,w,M,S,I){I===void 0&&(I=0);var B=F(x,C,w,M),N=F(x,C,w,S),G=F(x,C,I,M),W=F(x,C,I,S);if(S-M==Math.PI*2){var $=F(x,C,w,M+Math.PI),H=F(x,C,I,M+Math.PI),j=[["M",B.x,B.y],["A",w,w,0,1,1,$.x,$.y],["A",w,w,0,1,1,N.x,N.y],["M",G.x,G.y]];return I&&(j.push(["A",I,I,0,1,0,H.x,H.y]),j.push(["A",I,I,0,1,0,W.x,W.y])),j.push(["M",B.x,B.y]),j.push(["Z"]),j}var nt=S-M<=Math.PI?0:1,rt=[["M",B.x,B.y],["A",w,w,0,nt,1,N.x,N.y],["L",W.x,W.y]];return I&&rt.push(["A",I,I,0,nt,0,G.x,G.y]),rt.push(["L",B.x,B.y]),rt.push(["Z"]),rt}T.getSectorPath=L;function O(x,C,w,M,S){var I=F(x,C,w,M),B=F(x,C,w,S);if(d.isNumberEqual(S-M,Math.PI*2)){var N=F(x,C,w,M+Math.PI);return[["M",I.x,I.y],["A",w,w,0,1,1,N.x,N.y],["A",w,w,0,1,1,I.x,I.y],["A",w,w,0,1,0,N.x,N.y],["A",w,w,0,1,0,I.x,I.y],["Z"]]}var G=S-M<=Math.PI?0:1;return[["M",I.x,I.y],["A",w,w,0,G,1,B.x,B.y]]}T.getArcPath=O;function _(x,C){var w=x.points,M=c(w),S,I,B=C.startAngle,N=C.endAngle,G=N-B;return C.isTransposed?(S=M.maxY*G,I=M.minY*G):(S=M.maxX*G,I=M.minX*G),S+=B,I+=B,{startAngle:I,endAngle:S}}T.getAngle=_;function P(x,C){if(d.isNumber(x)&&d.isNumber(C))return[x,C];for(var w=-1,M=0,S=0,I,B=x.length-1,N,G=0;++w<x.length;)I=B,B=w,G+=N=x[I]*C[B]-x[B]*C[I],M+=(x[I]+x[B])*N,S+=(C[I]+C[B])*N;return G*=3,[M/G,S/G]}T.getPolygonCentroid=P;function A(x,C){var w=x.attr(),M=C.attr();return d.each(w,function(S,I){M[I]===void 0&&(M[I]=void 0)}),M}T.getReplaceAttrs=A},84920:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.uniq=T.omit=T.padEnd=T.isBetween=void 0;var d=v(26169);function c(_,P,A){var x=Math.min(P,A),C=Math.max(P,A);return _>=x&&_<=C}T.isBetween=c;function F(_,P,A){if(d.isString(_))return _.padEnd(P,A);if(d.isArray(_)){var x=_.length;if(x<P)for(var C=P-x,w=0;w<C;w++)_.push(A)}return _}T.padEnd=F;function L(_,P){return P.forEach(function(A){delete _[A]}),_}T.omit=L;function O(_,P,A){P===void 0&&(P=[]),A===void 0&&(A={});for(var x=0,C=_;x<C.length;x++){var w=C[x];A[w]||(P.push(w),A[w]=!0)}return P}T.uniq=O},96466:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.MarkerSymbols=void 0,T.MarkerSymbols={hexagon:function(v,d,c){var F=c/2*Math.sqrt(3);return[["M",v,d-c],["L",v+F,d-c/2],["L",v+F,d+c/2],["L",v,d+c],["L",v-F,d+c/2],["L",v-F,d-c/2],["Z"]]},bowtie:function(v,d,c){var F=c-1.5;return[["M",v-c,d-F],["L",v+c,d+F],["L",v+c,d-F],["L",v-c,d+F],["Z"]]},cross:function(v,d,c){return[["M",v-c,d-c],["L",v+c,d+c],["M",v+c,d-c],["L",v-c,d+c]]},tick:function(v,d,c){return[["M",v-c/2,d-c],["L",v+c/2,d-c],["M",v,d-c],["L",v,d+c],["M",v-c/2,d+c],["L",v+c/2,d+c]]},plus:function(v,d,c){return[["M",v-c,d],["L",v+c,d],["M",v,d-c],["L",v,d+c]]},hyphen:function(v,d,c){return[["M",v-c,d],["L",v+c,d]]},line:function(v,d,c){return[["M",v,d-c],["L",v,d+c]]}}},76463:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getName=T.syncScale=T.createScaleByField=void 0;var d=v(21362),c=v(26169),F=v(80292),L=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function O(x){var C="linear";return L.test(x)?C="time":c.isString(x)&&(C="cat"),C}function _(x,C,w){var M=C||[];if(c.isNumber(x)||c.isNil(c.firstValue(M,x))&&c.isEmpty(w)){var S=F.getScale("identity");return new S({field:x.toString(),values:[x]})}var I=c.valuesOfKey(M,x),B=c.get(w,"type",O(I[0])),N=F.getScale(B);return new N(d.__assign({field:x,values:I},w))}T.createScaleByField=_;function P(x,C){if(x.type!=="identity"&&C.type!=="identity"){var w={};for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&(w[M]=C[M]);x.change(w)}}T.syncScale=P;function A(x){return x.alias||x.field}T.getName=A},71866:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getTooltipItems=T.findDataByPoint=void 0;var d=v(21362),c=v(26169),F=v(43599),L=v(76463);function O(N,G,W){var $=W.translate(N),H=W.translate(G);return c.isNumberEqual($,H)}function _(N,G){var W=G.coordinate,$=G.getXScale(),H=$.range,j=H[H.length-1],nt=H[0],rt=W.invert(N),mt=rt.x;return W.isPolar&&mt>(1+j)/2&&(mt=nt),$.translate($.invert(mt))}function P(N,G,W){var $=W.coordinate,H=W.getYScale(),j=H.field,nt=$.invert(G),rt=H.invert(nt.y),mt=c.find(N,function(Ft){var Gt=Ft[F.FIELD_ORIGIN];return Gt[j][0]<=rt&&Gt[j][1]>=rt});return mt||N[N.length-1]}var A=c.memoize(function(N){if(N.isCategory)return 1;for(var G=N.values,W=G.length,$=N.translate(G[0]),H=$,j=0;j<W;j++){var nt=G[j],rt=N.translate(nt);rt<$&&($=rt),rt>H&&(H=rt)}return(H-$)/(W-1)});function x(N,G,W){var $=W;if(!W){var H=G.getAttribute("position"),j=H.getFields();$=j[0]}var nt=G.scales;return nt[$]?nt[$].getText(N[$]):c.hasKey(N,$)?N[$]:$}function C(N){var G=c.values(N.attributes);return c.filter(G,function(W){return c.contains(F.GROUP_ATTRS,W.type)})}function w(N){for(var G=C(N),W,$=0,H=G;$<H.length;$++){var j=H[$],nt=j.getScale(j.type);if(nt&&nt.isLinear){W=nt;break}}var rt=N.getXScale(),mt=N.getYScale();return W||mt||rt}function M(N,G){var W=G.field,$=N[W];if(c.isArray($)){var H=$.map(function(j){return G.getText(j)});return H.join("-")}return G.getText($)}function S(N,G){var W,$=G.getGroupScales();if($.length&&(W=$[0]),W){var H=W.field;return W.getText(N[H])}var j=w(G);return L.getName(j)}function I(N,G,W){if(G.length===0)return null;var $=W.type,H=W.getXScale(),j=W.getYScale(),nt=H.field,rt=j.field,mt=null;if($==="heatmap"||$==="point"){for(var Ft=W.coordinate,Gt=Ft.invert(N),gt=H.invert(Gt.x),st=j.invert(Gt.y),Xt=Infinity,Q=0;Q<G.length;Q++){var qt=G[Q],y=qt[F.FIELD_ORIGIN],Yt=Math.pow(y[nt]-gt,2)+Math.pow(y[rt]-st,2);Yt<Xt&&(Xt=Yt,mt=qt)}return mt}var K=G[0],ht=G[G.length-1],J=_(N,W),At=K[F.FIELD_ORIGIN][nt],Vt=K[F.FIELD_ORIGIN][rt],pt=ht[F.FIELD_ORIGIN][nt],Lt=j.isLinear&&c.isArray(Vt);if(c.isArray(At)){for(var Q=0;Q<G.length;Q++){var Tt=G[Q],y=Tt[F.FIELD_ORIGIN];if(H.translate(y[nt][0])<=J&&H.translate(y[nt][1])>=J)if(Lt)c.isArray(mt)||(mt=[]),mt.push(Tt);else{mt=Tt;break}}c.isArray(mt)&&(mt=P(mt,N,W))}else{var kt=void 0;if(!H.isLinear&&H.type!=="timeCat"){for(var Q=0;Q<G.length;Q++){var Tt=G[Q],y=Tt[F.FIELD_ORIGIN];if(O(y[nt],J,H))if(Lt)c.isArray(mt)||(mt=[]),mt.push(Tt);else{mt=Tt;break}else H.translate(y[nt])<=J&&(ht=Tt,kt=G[Q+1])}c.isArray(mt)&&(mt=P(mt,N,W))}else{if((J>H.translate(pt)||J<H.translate(At))&&(J>H.max||J<H.min))return null;for(var jt=0,Wt=G.length-1,zt=void 0;jt<=Wt;){zt=Math.floor((jt+Wt)/2);var bt=G[zt][F.FIELD_ORIGIN][nt];if(O(bt,J,H))return G[zt];H.translate(bt)<=H.translate(J)?(jt=zt+1,ht=G[zt],kt=G[zt+1]):(Wt===0&&(ht=G[0]),Wt=zt-1)}}ht&&kt&&Math.abs(H.translate(ht[F.FIELD_ORIGIN][nt])-J)>Math.abs(H.translate(kt[F.FIELD_ORIGIN][nt])-J)&&(ht=kt)}var at=A(W.getXScale());return!mt&&Math.abs(H.translate(ht[F.FIELD_ORIGIN][nt])-J)<=at/2&&(mt=ht),mt}T.findDataByPoint=I;function B(N,G,W){W===void 0&&(W="");var $=N[F.FIELD_ORIGIN],H=x($,G,W),j=G.tooltipOption,nt=G.theme.defaultColor,rt=[],mt,Ft;function Gt(Vt,pt){if(!c.isNil(pt)&&pt!==""){var Lt={title:H,data:$,mappingData:N,name:Vt,value:pt,color:N.color||nt,marker:!0};rt.push(Lt)}}if(c.isObject(j)){var gt=j.fields,st=j.callback;if(st){var Xt=gt.map(function(Vt){return N[F.FIELD_ORIGIN][Vt]}),Q=st.apply(void 0,Xt),qt=d.__assign({data:N[F.FIELD_ORIGIN],mappingData:N,title:H,color:N.color||nt,marker:!0},Q);rt.push(qt)}else for(var y=G.scales,Yt=0,K=gt;Yt<K.length;Yt++){var ht=K[Yt];if(!c.isNil($[ht])){var J=y[ht];mt=L.getName(J),Ft=J.getText($[ht]),Gt(mt,Ft)}}}else{var At=w(G);c.isNil($[At.field])||(Ft=M($,At),mt=S($,G),Gt(mt,Ft))}return rt}T.getTooltipItems=B},12729:function(xt,T,v){"use strict";v.d(T,{TN:function(){return Xt.COMPONENT_TYPE},Xz:function(){return L.Canvas},pq:function(){return K.DEFAULT_ANIMATE_CFG},wv:function(){return Xt.FIELD_ORIGIN},GM:function(){return j},ZX:function(){return c.Geometry},P:function(){return J.Z},L0:function(){return At.default},Mx:function(){return c.InteractionAction},D9:function(){return Yt},Tv:function(){return qt.MarkerSymbols},jQ:function(){return Tt},Wj:function(){return O.Canvas},LW:function(){return pt.Scrollbar},iR:function(){return pt.Slider},fw:function(){return Q.Z},sS:function(){return Vt},Zr:function(){return c.Util},ld:function(){return Xt.VIEW_LIFE_CIRCLE},G7:function(){return c.View},AK:function(){return st},YI:function(){return kt},IZ:function(){return K.doAnimate},cd:function(){return K.getDefaultAnimateCfg},gh:function(){return c.getTheme},zl:function(){return c.registerAction},ph:function(){return c.registerAnimation},ak:function(){return c.registerComponentController},dZ:function(){return c.registerGeometry},w_:function(){return c.registerInteraction},Fj:function(){return c.registerShape}});var d=v(50058),c=v(99576),F=v(23443),L=v(69813),O=v(19634),_=v(21362),P=v(95472),A=function(){function jt(Wt){this.EVENT="gesture",this.gm=Wt}return jt.prototype.do=function(Wt){var zt=Wt.type;switch(zt){case"touchstart":this.onTouchStart(Wt);break;case"touchmove":this.onTouchMove(Wt);break;case"touchend":this.onTouchEnd(Wt);break;case"touchcancel":this.onTouchCancel(Wt);break;default:return}},jt.prototype.emit=function(Wt){this.gm.emit(this.EVENT,Wt)},jt}(),x=function(jt){(0,_.__extends)(Wt,jt);function Wt(){var zt=jt!==null&&jt.apply(this,arguments)||this;return zt.EVENT="pan",zt}return Wt.prototype.onTouchCancel=function(zt){},Wt.prototype.onTouchEnd=function(zt){},Wt.prototype.onTouchMove=function(zt){var bt=zt.x,at=zt.y,ft=bt-this.preX,Pt=at-this.preY;this.preX=bt,this.preY=at,this.emit({x:bt,y:at,deltaX:ft,deltaY:Pt,event:zt})},Wt.prototype.onTouchStart=function(zt){var bt=zt.x,at=zt.y;this.preX=bt,this.preY=at},Wt}(A),C=typeof performance=="object"&&performance.now?performance:Date,w=300,M=10,S=function(jt){(0,_.__extends)(Wt,jt);function Wt(){var zt=jt!==null&&jt.apply(this,arguments)||this;return zt.EVENT="press",zt}return Wt.prototype.onTouchCancel=function(zt){this.clearTimeout()},Wt.prototype.onTouchEnd=function(zt){this.clearTimeout()},Wt.prototype.onTouchMove=function(zt){var bt=zt.x,at=zt.y;(bt-this.touchStartX>M||at-this.touchStartY>M)&&this.clearTimeout()},Wt.prototype.onTouchStart=function(zt){var bt=this;this.clearTimeout();var at=zt.x,ft=zt.y;this.touchStartTime=C.now(),this.touchStartX=at,this.touchStartY=ft,this.pressTimeout=window.setTimeout(function(){bt.emit({x:at,y:ft,event:zt})},w)},Wt.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},Wt}(A),I=100,B=function(jt){(0,_.__extends)(Wt,jt);function Wt(){var zt=jt!==null&&jt.apply(this,arguments)||this;return zt.EVENT="swipe",zt.latestMoveTime=0,zt.ms=0,zt.speedX=0,zt.speedY=0,zt.preX=0,zt.preY=0,zt}return Wt.prototype.onTouchCancel=function(zt){},Wt.prototype.onTouchEnd=function(zt){var bt=this.speedX,at=this.speedY;if(C.now()-this.latestMoveTime<I){var ft=zt.x,Pt=zt.y;this.emit({x:ft,y:Pt,speedX:bt,speedY:at,event:zt})}},Wt.prototype.onTouchMove=function(zt){var bt=zt.x,at=zt.y,ft=C.now(),Pt=bt-this.preX,q=at-this.preY,ut=ft-this.ms;this.speedX=Pt/ut,this.speedY=q/ut,this.latestMoveTime=ft},Wt.prototype.onTouchStart=function(zt){var bt=zt.x,at=zt.y;this.speedX=this.speedY=0,this.preX=bt,this.preY=at,this.ms=C.now()},Wt}(A),N=300,G=2,W=function(jt){(0,_.__extends)(Wt,jt);function Wt(){var zt=jt!==null&&jt.apply(this,arguments)||this;return zt.EVENT="tap",zt}return Wt.prototype.onTouchCancel=function(zt){},Wt.prototype.onTouchEnd=function(zt){var bt=zt.x,at=zt.y;bt-this.touchStartX<G&&at-this.touchStartY<G&&C.now()-this.touchStartTime<N&&this.emit({x:bt,y:at,event:zt})},Wt.prototype.onTouchMove=function(zt){},Wt.prototype.onTouchStart=function(zt){var bt=zt.x,at=zt.y;this.touchStartTime=C.now(),this.touchStartX=bt,this.touchStartY=at},Wt}(A),$={Pan:x,Press:S,Swipe:B,Tap:W},H=function(jt){return $[jt]},j=function(jt){(0,_.__extends)(Wt,jt);function Wt(zt,bt){bt===void 0&&(bt={});var at=jt.call(this)||this;return at.onTouchStart=function(ft){at.preventEvent(ft),at.element.on("touchmove",at.onTouchMove),at.element.on("touchend",at.onTouchEnd),at.element.on("touchcancel",at.onTouchCancel),at.emit("touchdown",ft),at.doGestures(ft)},at.onTouchMove=function(ft){at.preventEvent(ft),at.emit("touchmove",ft),at.doGestures(ft)},at.onTouchEnd=function(ft){at.preventEvent(ft),at.emit("touchend",ft),at.element.off("touchmove",at.onTouchMove),at.element.off("touchend",at.onTouchEnd),at.element.off("touchcancel",at.onTouchCancel),at.doGestures(ft)},at.onTouchCancel=function(ft){at.preventEvent(ft),at.emit("touchcancel",ft),at.element.off("touchmove",at.onTouchMove),at.element.off("touchend",at.onTouchEnd),at.element.off("touchcancel",at.onTouchCancel),at.doGestures(ft)},at.element=zt,at.options=bt,at.initialGestures(),at.bindTouchStart(),at}return Wt.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},Wt.prototype.initialGestures=function(){var zt=this,bt=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=bt.map(function(at){var ft=H(at);return new ft(zt)})},Wt.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},Wt.prototype.preventEvent=function(zt){var bt=zt.type,at=this.options.prevents||[];at.includes(bt)&&zt.preventDefault()},Wt.prototype.doGestures=function(zt){this.gestures.forEach(function(bt){bt.do(zt)})},Wt}(P.default),nt=v(32718),rt=nt.yD,mt=800,Ft="swipe",Gt="pan",gt="wheel",st=function(jt){(0,_.__extends)(Wt,jt);function Wt(zt){var bt=jt.call(this)||this;return bt.rafMs=0,bt.onPan=function(at){var ft=at.deltaX,Pt=at.deltaY,q=bt.getWrapperEvent(at,ft,Pt);bt.emit(gt,q)},bt.onSwipe=function(at){var ft=at.speedX,Pt=at.speedY;bt.rafMs=C.now(),bt.ms=bt.rafMs,(ft!==0||Pt!==0)&&bt.rafInertia(at)},bt.element=zt,bt.gm=new j(zt,{gestures:["Pan","Swipe"]}),bt.gm.on(Ft,bt.onSwipe),bt.gm.on(Gt,bt.onPan),bt}return Wt.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},Wt.prototype.rafInertia=function(zt){var bt=this,at=zt.speedX,ft=zt.speedY;this.raf=window.requestAnimationFrame(function(){var Pt=C.now(),q=(Pt-bt.ms)/mt;if(q<1){q=rt(1-q);var ut=Pt-bt.rafMs,Et=at*q*ut,Nt=ft*q*ut,ee=bt.getWrapperEvent(zt,Et,Nt);bt.emit(gt,ee),bt.rafMs=Pt,bt.rafInertia(zt)}})},Wt.prototype.getWrapperEvent=function(zt,bt,at){return(0,_.__assign)((0,_.__assign)({},zt),{deltaX:-bt,deltaY:-at})},Wt}(P.default),Xt=v(43599),Q=v(77684),qt=v(96466),y=v(40518),Yt=v(48564),K=v(23361),ht=v(4329),J=v(12946),At=v(98906),Vt=v(44414),pt=v(41026),Lt=v(14533);(0,c.registerComponentController)("gesture",d.Z);var Tt="origin",kt="_origin"},90575:function(xt,T,v){"use strict";v.d(T,{B:function(){return x}});var d=v(12729),c=1e3,F=60*c,L=60*F,O=24*L,_=O*7,P=O*30,A=O*365,x={second:{value:c,format:"HH:mm:ss"},miniute:{value:F,format:"HH:mm"},hour:{value:L,format:"HH"},day:{value:O,format:"YYYY-MM-DD"},week:{value:_,format:"YYYY-MM-DD"},month:{value:P,format:"YYYY-MM"},year:{value:A,format:"YYYY"}}},19875:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=F,T.toRadian=O,T.equals=_;var v=T.EPSILON=1e-6,d=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,c=T.RANDOM=Math.random;function F(P){T.ARRAY_TYPE=d=P}var L=Math.PI/180;function O(P){return P*L}function _(P,A){return Math.abs(P-A)<=v*Math.max(1,Math.abs(P),Math.abs(A))}},25519:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=L,T.fromMat4=O,T.clone=_,T.copy=P,T.fromValues=A,T.set=x,T.identity=C,T.transpose=w,T.invert=M,T.adjoint=S,T.determinant=I,T.multiply=B,T.translate=N,T.rotate=G,T.scale=W,T.fromTranslation=$,T.fromRotation=H,T.fromScaling=j,T.fromMat2d=nt,T.fromQuat=rt,T.normalFromMat4=mt,T.projection=Ft,T.str=Gt,T.frob=gt,T.add=st,T.subtract=Xt,T.multiplyScalar=Q,T.multiplyScalarAndAdd=qt,T.exactEquals=y,T.equals=Yt;var d=v(19875),c=F(d);function F(J){if(J&&J.__esModule)return J;var At={};if(J!=null)for(var Vt in J)Object.prototype.hasOwnProperty.call(J,Vt)&&(At[Vt]=J[Vt]);return At.default=J,At}function L(){var J=new c.ARRAY_TYPE(9);return c.ARRAY_TYPE!=Float32Array&&(J[1]=0,J[2]=0,J[3]=0,J[5]=0,J[6]=0,J[7]=0),J[0]=1,J[4]=1,J[8]=1,J}function O(J,At){return J[0]=At[0],J[1]=At[1],J[2]=At[2],J[3]=At[4],J[4]=At[5],J[5]=At[6],J[6]=At[8],J[7]=At[9],J[8]=At[10],J}function _(J){var At=new c.ARRAY_TYPE(9);return At[0]=J[0],At[1]=J[1],At[2]=J[2],At[3]=J[3],At[4]=J[4],At[5]=J[5],At[6]=J[6],At[7]=J[7],At[8]=J[8],At}function P(J,At){return J[0]=At[0],J[1]=At[1],J[2]=At[2],J[3]=At[3],J[4]=At[4],J[5]=At[5],J[6]=At[6],J[7]=At[7],J[8]=At[8],J}function A(J,At,Vt,pt,Lt,Tt,kt,jt,Wt){var zt=new c.ARRAY_TYPE(9);return zt[0]=J,zt[1]=At,zt[2]=Vt,zt[3]=pt,zt[4]=Lt,zt[5]=Tt,zt[6]=kt,zt[7]=jt,zt[8]=Wt,zt}function x(J,At,Vt,pt,Lt,Tt,kt,jt,Wt,zt){return J[0]=At,J[1]=Vt,J[2]=pt,J[3]=Lt,J[4]=Tt,J[5]=kt,J[6]=jt,J[7]=Wt,J[8]=zt,J}function C(J){return J[0]=1,J[1]=0,J[2]=0,J[3]=0,J[4]=1,J[5]=0,J[6]=0,J[7]=0,J[8]=1,J}function w(J,At){if(J===At){var Vt=At[1],pt=At[2],Lt=At[5];J[1]=At[3],J[2]=At[6],J[3]=Vt,J[5]=At[7],J[6]=pt,J[7]=Lt}else J[0]=At[0],J[1]=At[3],J[2]=At[6],J[3]=At[1],J[4]=At[4],J[5]=At[7],J[6]=At[2],J[7]=At[5],J[8]=At[8];return J}function M(J,At){var Vt=At[0],pt=At[1],Lt=At[2],Tt=At[3],kt=At[4],jt=At[5],Wt=At[6],zt=At[7],bt=At[8],at=bt*kt-jt*zt,ft=-bt*Tt+jt*Wt,Pt=zt*Tt-kt*Wt,q=Vt*at+pt*ft+Lt*Pt;return q?(q=1/q,J[0]=at*q,J[1]=(-bt*pt+Lt*zt)*q,J[2]=(jt*pt-Lt*kt)*q,J[3]=ft*q,J[4]=(bt*Vt-Lt*Wt)*q,J[5]=(-jt*Vt+Lt*Tt)*q,J[6]=Pt*q,J[7]=(-zt*Vt+pt*Wt)*q,J[8]=(kt*Vt-pt*Tt)*q,J):null}function S(J,At){var Vt=At[0],pt=At[1],Lt=At[2],Tt=At[3],kt=At[4],jt=At[5],Wt=At[6],zt=At[7],bt=At[8];return J[0]=kt*bt-jt*zt,J[1]=Lt*zt-pt*bt,J[2]=pt*jt-Lt*kt,J[3]=jt*Wt-Tt*bt,J[4]=Vt*bt-Lt*Wt,J[5]=Lt*Tt-Vt*jt,J[6]=Tt*zt-kt*Wt,J[7]=pt*Wt-Vt*zt,J[8]=Vt*kt-pt*Tt,J}function I(J){var At=J[0],Vt=J[1],pt=J[2],Lt=J[3],Tt=J[4],kt=J[5],jt=J[6],Wt=J[7],zt=J[8];return At*(zt*Tt-kt*Wt)+Vt*(-zt*Lt+kt*jt)+pt*(Wt*Lt-Tt*jt)}function B(J,At,Vt){var pt=At[0],Lt=At[1],Tt=At[2],kt=At[3],jt=At[4],Wt=At[5],zt=At[6],bt=At[7],at=At[8],ft=Vt[0],Pt=Vt[1],q=Vt[2],ut=Vt[3],Et=Vt[4],Nt=Vt[5],ee=Vt[6],ge=Vt[7],De=Vt[8];return J[0]=ft*pt+Pt*kt+q*zt,J[1]=ft*Lt+Pt*jt+q*bt,J[2]=ft*Tt+Pt*Wt+q*at,J[3]=ut*pt+Et*kt+Nt*zt,J[4]=ut*Lt+Et*jt+Nt*bt,J[5]=ut*Tt+Et*Wt+Nt*at,J[6]=ee*pt+ge*kt+De*zt,J[7]=ee*Lt+ge*jt+De*bt,J[8]=ee*Tt+ge*Wt+De*at,J}function N(J,At,Vt){var pt=At[0],Lt=At[1],Tt=At[2],kt=At[3],jt=At[4],Wt=At[5],zt=At[6],bt=At[7],at=At[8],ft=Vt[0],Pt=Vt[1];return J[0]=pt,J[1]=Lt,J[2]=Tt,J[3]=kt,J[4]=jt,J[5]=Wt,J[6]=ft*pt+Pt*kt+zt,J[7]=ft*Lt+Pt*jt+bt,J[8]=ft*Tt+Pt*Wt+at,J}function G(J,At,Vt){var pt=At[0],Lt=At[1],Tt=At[2],kt=At[3],jt=At[4],Wt=At[5],zt=At[6],bt=At[7],at=At[8],ft=Math.sin(Vt),Pt=Math.cos(Vt);return J[0]=Pt*pt+ft*kt,J[1]=Pt*Lt+ft*jt,J[2]=Pt*Tt+ft*Wt,J[3]=Pt*kt-ft*pt,J[4]=Pt*jt-ft*Lt,J[5]=Pt*Wt-ft*Tt,J[6]=zt,J[7]=bt,J[8]=at,J}function W(J,At,Vt){var pt=Vt[0],Lt=Vt[1];return J[0]=pt*At[0],J[1]=pt*At[1],J[2]=pt*At[2],J[3]=Lt*At[3],J[4]=Lt*At[4],J[5]=Lt*At[5],J[6]=At[6],J[7]=At[7],J[8]=At[8],J}function $(J,At){return J[0]=1,J[1]=0,J[2]=0,J[3]=0,J[4]=1,J[5]=0,J[6]=At[0],J[7]=At[1],J[8]=1,J}function H(J,At){var Vt=Math.sin(At),pt=Math.cos(At);return J[0]=pt,J[1]=Vt,J[2]=0,J[3]=-Vt,J[4]=pt,J[5]=0,J[6]=0,J[7]=0,J[8]=1,J}function j(J,At){return J[0]=At[0],J[1]=0,J[2]=0,J[3]=0,J[4]=At[1],J[5]=0,J[6]=0,J[7]=0,J[8]=1,J}function nt(J,At){return J[0]=At[0],J[1]=At[1],J[2]=0,J[3]=At[2],J[4]=At[3],J[5]=0,J[6]=At[4],J[7]=At[5],J[8]=1,J}function rt(J,At){var Vt=At[0],pt=At[1],Lt=At[2],Tt=At[3],kt=Vt+Vt,jt=pt+pt,Wt=Lt+Lt,zt=Vt*kt,bt=pt*kt,at=pt*jt,ft=Lt*kt,Pt=Lt*jt,q=Lt*Wt,ut=Tt*kt,Et=Tt*jt,Nt=Tt*Wt;return J[0]=1-at-q,J[3]=bt-Nt,J[6]=ft+Et,J[1]=bt+Nt,J[4]=1-zt-q,J[7]=Pt-ut,J[2]=ft-Et,J[5]=Pt+ut,J[8]=1-zt-at,J}function mt(J,At){var Vt=At[0],pt=At[1],Lt=At[2],Tt=At[3],kt=At[4],jt=At[5],Wt=At[6],zt=At[7],bt=At[8],at=At[9],ft=At[10],Pt=At[11],q=At[12],ut=At[13],Et=At[14],Nt=At[15],ee=Vt*jt-pt*kt,ge=Vt*Wt-Lt*kt,De=Vt*zt-Tt*kt,er=pt*Wt-Lt*jt,Re=pt*zt-Tt*jt,Ke=Lt*zt-Tt*Wt,hr=bt*ut-at*q,Sr=bt*Et-ft*q,Rr=bt*Nt-Pt*q,vr=at*Et-ft*ut,en=at*Nt-Pt*ut,gn=ft*Nt-Pt*Et,hn=ee*gn-ge*en+De*vr+er*Rr-Re*Sr+Ke*hr;return hn?(hn=1/hn,J[0]=(jt*gn-Wt*en+zt*vr)*hn,J[1]=(Wt*Rr-kt*gn-zt*Sr)*hn,J[2]=(kt*en-jt*Rr+zt*hr)*hn,J[3]=(Lt*en-pt*gn-Tt*vr)*hn,J[4]=(Vt*gn-Lt*Rr+Tt*Sr)*hn,J[5]=(pt*Rr-Vt*en-Tt*hr)*hn,J[6]=(ut*Ke-Et*Re+Nt*er)*hn,J[7]=(Et*De-q*Ke-Nt*ge)*hn,J[8]=(q*Re-ut*De+Nt*ee)*hn,J):null}function Ft(J,At,Vt){return J[0]=2/At,J[1]=0,J[2]=0,J[3]=0,J[4]=-2/Vt,J[5]=0,J[6]=-1,J[7]=1,J[8]=1,J}function Gt(J){return"mat3("+J[0]+", "+J[1]+", "+J[2]+", "+J[3]+", "+J[4]+", "+J[5]+", "+J[6]+", "+J[7]+", "+J[8]+")"}function gt(J){return Math.sqrt(Math.pow(J[0],2)+Math.pow(J[1],2)+Math.pow(J[2],2)+Math.pow(J[3],2)+Math.pow(J[4],2)+Math.pow(J[5],2)+Math.pow(J[6],2)+Math.pow(J[7],2)+Math.pow(J[8],2))}function st(J,At,Vt){return J[0]=At[0]+Vt[0],J[1]=At[1]+Vt[1],J[2]=At[2]+Vt[2],J[3]=At[3]+Vt[3],J[4]=At[4]+Vt[4],J[5]=At[5]+Vt[5],J[6]=At[6]+Vt[6],J[7]=At[7]+Vt[7],J[8]=At[8]+Vt[8],J}function Xt(J,At,Vt){return J[0]=At[0]-Vt[0],J[1]=At[1]-Vt[1],J[2]=At[2]-Vt[2],J[3]=At[3]-Vt[3],J[4]=At[4]-Vt[4],J[5]=At[5]-Vt[5],J[6]=At[6]-Vt[6],J[7]=At[7]-Vt[7],J[8]=At[8]-Vt[8],J}function Q(J,At,Vt){return J[0]=At[0]*Vt,J[1]=At[1]*Vt,J[2]=At[2]*Vt,J[3]=At[3]*Vt,J[4]=At[4]*Vt,J[5]=At[5]*Vt,J[6]=At[6]*Vt,J[7]=At[7]*Vt,J[8]=At[8]*Vt,J}function qt(J,At,Vt,pt){return J[0]=At[0]+Vt[0]*pt,J[1]=At[1]+Vt[1]*pt,J[2]=At[2]+Vt[2]*pt,J[3]=At[3]+Vt[3]*pt,J[4]=At[4]+Vt[4]*pt,J[5]=At[5]+Vt[5]*pt,J[6]=At[6]+Vt[6]*pt,J[7]=At[7]+Vt[7]*pt,J[8]=At[8]+Vt[8]*pt,J}function y(J,At){return J[0]===At[0]&&J[1]===At[1]&&J[2]===At[2]&&J[3]===At[3]&&J[4]===At[4]&&J[5]===At[5]&&J[6]===At[6]&&J[7]===At[7]&&J[8]===At[8]}function Yt(J,At){var Vt=J[0],pt=J[1],Lt=J[2],Tt=J[3],kt=J[4],jt=J[5],Wt=J[6],zt=J[7],bt=J[8],at=At[0],ft=At[1],Pt=At[2],q=At[3],ut=At[4],Et=At[5],Nt=At[6],ee=At[7],ge=At[8];return Math.abs(Vt-at)<=c.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(at))&&Math.abs(pt-ft)<=c.EPSILON*Math.max(1,Math.abs(pt),Math.abs(ft))&&Math.abs(Lt-Pt)<=c.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(Pt))&&Math.abs(Tt-q)<=c.EPSILON*Math.max(1,Math.abs(Tt),Math.abs(q))&&Math.abs(kt-ut)<=c.EPSILON*Math.max(1,Math.abs(kt),Math.abs(ut))&&Math.abs(jt-Et)<=c.EPSILON*Math.max(1,Math.abs(jt),Math.abs(Et))&&Math.abs(Wt-Nt)<=c.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(Nt))&&Math.abs(zt-ee)<=c.EPSILON*Math.max(1,Math.abs(zt),Math.abs(ee))&&Math.abs(bt-ge)<=c.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ge))}var K=T.mul=B,ht=T.sub=Xt},8554:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=L,T.clone=O,T.fromValues=_,T.copy=P,T.set=A,T.add=x,T.subtract=C,T.multiply=w,T.divide=M,T.ceil=S,T.floor=I,T.min=B,T.max=N,T.round=G,T.scale=W,T.scaleAndAdd=$,T.distance=H,T.squaredDistance=j,T.length=nt,T.squaredLength=rt,T.negate=mt,T.inverse=Ft,T.normalize=Gt,T.dot=gt,T.cross=st,T.lerp=Xt,T.random=Q,T.transformMat2=qt,T.transformMat2d=y,T.transformMat3=Yt,T.transformMat4=K,T.rotate=ht,T.angle=J,T.str=At,T.exactEquals=Vt,T.equals=pt;var d=v(19875),c=F(d);function F(ft){if(ft&&ft.__esModule)return ft;var Pt={};if(ft!=null)for(var q in ft)Object.prototype.hasOwnProperty.call(ft,q)&&(Pt[q]=ft[q]);return Pt.default=ft,Pt}function L(){var ft=new c.ARRAY_TYPE(2);return c.ARRAY_TYPE!=Float32Array&&(ft[0]=0,ft[1]=0),ft}function O(ft){var Pt=new c.ARRAY_TYPE(2);return Pt[0]=ft[0],Pt[1]=ft[1],Pt}function _(ft,Pt){var q=new c.ARRAY_TYPE(2);return q[0]=ft,q[1]=Pt,q}function P(ft,Pt){return ft[0]=Pt[0],ft[1]=Pt[1],ft}function A(ft,Pt,q){return ft[0]=Pt,ft[1]=q,ft}function x(ft,Pt,q){return ft[0]=Pt[0]+q[0],ft[1]=Pt[1]+q[1],ft}function C(ft,Pt,q){return ft[0]=Pt[0]-q[0],ft[1]=Pt[1]-q[1],ft}function w(ft,Pt,q){return ft[0]=Pt[0]*q[0],ft[1]=Pt[1]*q[1],ft}function M(ft,Pt,q){return ft[0]=Pt[0]/q[0],ft[1]=Pt[1]/q[1],ft}function S(ft,Pt){return ft[0]=Math.ceil(Pt[0]),ft[1]=Math.ceil(Pt[1]),ft}function I(ft,Pt){return ft[0]=Math.floor(Pt[0]),ft[1]=Math.floor(Pt[1]),ft}function B(ft,Pt,q){return ft[0]=Math.min(Pt[0],q[0]),ft[1]=Math.min(Pt[1],q[1]),ft}function N(ft,Pt,q){return ft[0]=Math.max(Pt[0],q[0]),ft[1]=Math.max(Pt[1],q[1]),ft}function G(ft,Pt){return ft[0]=Math.round(Pt[0]),ft[1]=Math.round(Pt[1]),ft}function W(ft,Pt,q){return ft[0]=Pt[0]*q,ft[1]=Pt[1]*q,ft}function $(ft,Pt,q,ut){return ft[0]=Pt[0]+q[0]*ut,ft[1]=Pt[1]+q[1]*ut,ft}function H(ft,Pt){var q=Pt[0]-ft[0],ut=Pt[1]-ft[1];return Math.sqrt(q*q+ut*ut)}function j(ft,Pt){var q=Pt[0]-ft[0],ut=Pt[1]-ft[1];return q*q+ut*ut}function nt(ft){var Pt=ft[0],q=ft[1];return Math.sqrt(Pt*Pt+q*q)}function rt(ft){var Pt=ft[0],q=ft[1];return Pt*Pt+q*q}function mt(ft,Pt){return ft[0]=-Pt[0],ft[1]=-Pt[1],ft}function Ft(ft,Pt){return ft[0]=1/Pt[0],ft[1]=1/Pt[1],ft}function Gt(ft,Pt){var q=Pt[0],ut=Pt[1],Et=q*q+ut*ut;return Et>0&&(Et=1/Math.sqrt(Et),ft[0]=Pt[0]*Et,ft[1]=Pt[1]*Et),ft}function gt(ft,Pt){return ft[0]*Pt[0]+ft[1]*Pt[1]}function st(ft,Pt,q){var ut=Pt[0]*q[1]-Pt[1]*q[0];return ft[0]=ft[1]=0,ft[2]=ut,ft}function Xt(ft,Pt,q,ut){var Et=Pt[0],Nt=Pt[1];return ft[0]=Et+ut*(q[0]-Et),ft[1]=Nt+ut*(q[1]-Nt),ft}function Q(ft,Pt){Pt=Pt||1;var q=c.RANDOM()*2*Math.PI;return ft[0]=Math.cos(q)*Pt,ft[1]=Math.sin(q)*Pt,ft}function qt(ft,Pt,q){var ut=Pt[0],Et=Pt[1];return ft[0]=q[0]*ut+q[2]*Et,ft[1]=q[1]*ut+q[3]*Et,ft}function y(ft,Pt,q){var ut=Pt[0],Et=Pt[1];return ft[0]=q[0]*ut+q[2]*Et+q[4],ft[1]=q[1]*ut+q[3]*Et+q[5],ft}function Yt(ft,Pt,q){var ut=Pt[0],Et=Pt[1];return ft[0]=q[0]*ut+q[3]*Et+q[6],ft[1]=q[1]*ut+q[4]*Et+q[7],ft}function K(ft,Pt,q){var ut=Pt[0],Et=Pt[1];return ft[0]=q[0]*ut+q[4]*Et+q[12],ft[1]=q[1]*ut+q[5]*Et+q[13],ft}function ht(ft,Pt,q,ut){var Et=Pt[0]-q[0],Nt=Pt[1]-q[1],ee=Math.sin(ut),ge=Math.cos(ut);return ft[0]=Et*ge-Nt*ee+q[0],ft[1]=Et*ee+Nt*ge+q[1],ft}function J(ft,Pt){var q=ft[0],ut=ft[1],Et=Pt[0],Nt=Pt[1],ee=q*q+ut*ut;ee>0&&(ee=1/Math.sqrt(ee));var ge=Et*Et+Nt*Nt;ge>0&&(ge=1/Math.sqrt(ge));var De=(q*Et+ut*Nt)*ee*ge;return De>1?0:De<-1?Math.PI:Math.acos(De)}function At(ft){return"vec2("+ft[0]+", "+ft[1]+")"}function Vt(ft,Pt){return ft[0]===Pt[0]&&ft[1]===Pt[1]}function pt(ft,Pt){var q=ft[0],ut=ft[1],Et=Pt[0],Nt=Pt[1];return Math.abs(q-Et)<=c.EPSILON*Math.max(1,Math.abs(q),Math.abs(Et))&&Math.abs(ut-Nt)<=c.EPSILON*Math.max(1,Math.abs(ut),Math.abs(Nt))}var Lt=T.len=nt,Tt=T.sub=C,kt=T.mul=w,jt=T.div=M,Wt=T.dist=H,zt=T.sqrDist=j,bt=T.sqrLen=rt,at=T.forEach=function(){var ft=L();return function(Pt,q,ut,Et,Nt,ee){var ge=void 0,De=void 0;for(q||(q=2),ut||(ut=0),Et?De=Math.min(Et*q+ut,Pt.length):De=Pt.length,ge=ut;ge<De;ge+=q)ft[0]=Pt[ge],ft[1]=Pt[ge+1],Nt(ft,ft,ee),Pt[ge]=ft[0],Pt[ge+1]=ft[1];return Pt}}()},54069:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=L,T.clone=O,T.length=_,T.fromValues=P,T.copy=A,T.set=x,T.add=C,T.subtract=w,T.multiply=M,T.divide=S,T.ceil=I,T.floor=B,T.min=N,T.max=G,T.round=W,T.scale=$,T.scaleAndAdd=H,T.distance=j,T.squaredDistance=nt,T.squaredLength=rt,T.negate=mt,T.inverse=Ft,T.normalize=Gt,T.dot=gt,T.cross=st,T.lerp=Xt,T.hermite=Q,T.bezier=qt,T.random=y,T.transformMat4=Yt,T.transformMat3=K,T.transformQuat=ht,T.rotateX=J,T.rotateY=At,T.rotateZ=Vt,T.angle=pt,T.str=Lt,T.exactEquals=Tt,T.equals=kt;var d=v(19875),c=F(d);function F(ut){if(ut&&ut.__esModule)return ut;var Et={};if(ut!=null)for(var Nt in ut)Object.prototype.hasOwnProperty.call(ut,Nt)&&(Et[Nt]=ut[Nt]);return Et.default=ut,Et}function L(){var ut=new c.ARRAY_TYPE(3);return c.ARRAY_TYPE!=Float32Array&&(ut[0]=0,ut[1]=0,ut[2]=0),ut}function O(ut){var Et=new c.ARRAY_TYPE(3);return Et[0]=ut[0],Et[1]=ut[1],Et[2]=ut[2],Et}function _(ut){var Et=ut[0],Nt=ut[1],ee=ut[2];return Math.sqrt(Et*Et+Nt*Nt+ee*ee)}function P(ut,Et,Nt){var ee=new c.ARRAY_TYPE(3);return ee[0]=ut,ee[1]=Et,ee[2]=Nt,ee}function A(ut,Et){return ut[0]=Et[0],ut[1]=Et[1],ut[2]=Et[2],ut}function x(ut,Et,Nt,ee){return ut[0]=Et,ut[1]=Nt,ut[2]=ee,ut}function C(ut,Et,Nt){return ut[0]=Et[0]+Nt[0],ut[1]=Et[1]+Nt[1],ut[2]=Et[2]+Nt[2],ut}function w(ut,Et,Nt){return ut[0]=Et[0]-Nt[0],ut[1]=Et[1]-Nt[1],ut[2]=Et[2]-Nt[2],ut}function M(ut,Et,Nt){return ut[0]=Et[0]*Nt[0],ut[1]=Et[1]*Nt[1],ut[2]=Et[2]*Nt[2],ut}function S(ut,Et,Nt){return ut[0]=Et[0]/Nt[0],ut[1]=Et[1]/Nt[1],ut[2]=Et[2]/Nt[2],ut}function I(ut,Et){return ut[0]=Math.ceil(Et[0]),ut[1]=Math.ceil(Et[1]),ut[2]=Math.ceil(Et[2]),ut}function B(ut,Et){return ut[0]=Math.floor(Et[0]),ut[1]=Math.floor(Et[1]),ut[2]=Math.floor(Et[2]),ut}function N(ut,Et,Nt){return ut[0]=Math.min(Et[0],Nt[0]),ut[1]=Math.min(Et[1],Nt[1]),ut[2]=Math.min(Et[2],Nt[2]),ut}function G(ut,Et,Nt){return ut[0]=Math.max(Et[0],Nt[0]),ut[1]=Math.max(Et[1],Nt[1]),ut[2]=Math.max(Et[2],Nt[2]),ut}function W(ut,Et){return ut[0]=Math.round(Et[0]),ut[1]=Math.round(Et[1]),ut[2]=Math.round(Et[2]),ut}function $(ut,Et,Nt){return ut[0]=Et[0]*Nt,ut[1]=Et[1]*Nt,ut[2]=Et[2]*Nt,ut}function H(ut,Et,Nt,ee){return ut[0]=Et[0]+Nt[0]*ee,ut[1]=Et[1]+Nt[1]*ee,ut[2]=Et[2]+Nt[2]*ee,ut}function j(ut,Et){var Nt=Et[0]-ut[0],ee=Et[1]-ut[1],ge=Et[2]-ut[2];return Math.sqrt(Nt*Nt+ee*ee+ge*ge)}function nt(ut,Et){var Nt=Et[0]-ut[0],ee=Et[1]-ut[1],ge=Et[2]-ut[2];return Nt*Nt+ee*ee+ge*ge}function rt(ut){var Et=ut[0],Nt=ut[1],ee=ut[2];return Et*Et+Nt*Nt+ee*ee}function mt(ut,Et){return ut[0]=-Et[0],ut[1]=-Et[1],ut[2]=-Et[2],ut}function Ft(ut,Et){return ut[0]=1/Et[0],ut[1]=1/Et[1],ut[2]=1/Et[2],ut}function Gt(ut,Et){var Nt=Et[0],ee=Et[1],ge=Et[2],De=Nt*Nt+ee*ee+ge*ge;return De>0&&(De=1/Math.sqrt(De),ut[0]=Et[0]*De,ut[1]=Et[1]*De,ut[2]=Et[2]*De),ut}function gt(ut,Et){return ut[0]*Et[0]+ut[1]*Et[1]+ut[2]*Et[2]}function st(ut,Et,Nt){var ee=Et[0],ge=Et[1],De=Et[2],er=Nt[0],Re=Nt[1],Ke=Nt[2];return ut[0]=ge*Ke-De*Re,ut[1]=De*er-ee*Ke,ut[2]=ee*Re-ge*er,ut}function Xt(ut,Et,Nt,ee){var ge=Et[0],De=Et[1],er=Et[2];return ut[0]=ge+ee*(Nt[0]-ge),ut[1]=De+ee*(Nt[1]-De),ut[2]=er+ee*(Nt[2]-er),ut}function Q(ut,Et,Nt,ee,ge,De){var er=De*De,Re=er*(2*De-3)+1,Ke=er*(De-2)+De,hr=er*(De-1),Sr=er*(3-2*De);return ut[0]=Et[0]*Re+Nt[0]*Ke+ee[0]*hr+ge[0]*Sr,ut[1]=Et[1]*Re+Nt[1]*Ke+ee[1]*hr+ge[1]*Sr,ut[2]=Et[2]*Re+Nt[2]*Ke+ee[2]*hr+ge[2]*Sr,ut}function qt(ut,Et,Nt,ee,ge,De){var er=1-De,Re=er*er,Ke=De*De,hr=Re*er,Sr=3*De*Re,Rr=3*Ke*er,vr=Ke*De;return ut[0]=Et[0]*hr+Nt[0]*Sr+ee[0]*Rr+ge[0]*vr,ut[1]=Et[1]*hr+Nt[1]*Sr+ee[1]*Rr+ge[1]*vr,ut[2]=Et[2]*hr+Nt[2]*Sr+ee[2]*Rr+ge[2]*vr,ut}function y(ut,Et){Et=Et||1;var Nt=c.RANDOM()*2*Math.PI,ee=c.RANDOM()*2-1,ge=Math.sqrt(1-ee*ee)*Et;return ut[0]=Math.cos(Nt)*ge,ut[1]=Math.sin(Nt)*ge,ut[2]=ee*Et,ut}function Yt(ut,Et,Nt){var ee=Et[0],ge=Et[1],De=Et[2],er=Nt[3]*ee+Nt[7]*ge+Nt[11]*De+Nt[15];return er=er||1,ut[0]=(Nt[0]*ee+Nt[4]*ge+Nt[8]*De+Nt[12])/er,ut[1]=(Nt[1]*ee+Nt[5]*ge+Nt[9]*De+Nt[13])/er,ut[2]=(Nt[2]*ee+Nt[6]*ge+Nt[10]*De+Nt[14])/er,ut}function K(ut,Et,Nt){var ee=Et[0],ge=Et[1],De=Et[2];return ut[0]=ee*Nt[0]+ge*Nt[3]+De*Nt[6],ut[1]=ee*Nt[1]+ge*Nt[4]+De*Nt[7],ut[2]=ee*Nt[2]+ge*Nt[5]+De*Nt[8],ut}function ht(ut,Et,Nt){var ee=Nt[0],ge=Nt[1],De=Nt[2],er=Nt[3],Re=Et[0],Ke=Et[1],hr=Et[2],Sr=ge*hr-De*Ke,Rr=De*Re-ee*hr,vr=ee*Ke-ge*Re,en=ge*vr-De*Rr,gn=De*Sr-ee*vr,hn=ee*Rr-ge*Sr,vn=er*2;return Sr*=vn,Rr*=vn,vr*=vn,en*=2,gn*=2,hn*=2,ut[0]=Re+Sr+en,ut[1]=Ke+Rr+gn,ut[2]=hr+vr+hn,ut}function J(ut,Et,Nt,ee){var ge=[],De=[];return ge[0]=Et[0]-Nt[0],ge[1]=Et[1]-Nt[1],ge[2]=Et[2]-Nt[2],De[0]=ge[0],De[1]=ge[1]*Math.cos(ee)-ge[2]*Math.sin(ee),De[2]=ge[1]*Math.sin(ee)+ge[2]*Math.cos(ee),ut[0]=De[0]+Nt[0],ut[1]=De[1]+Nt[1],ut[2]=De[2]+Nt[2],ut}function At(ut,Et,Nt,ee){var ge=[],De=[];return ge[0]=Et[0]-Nt[0],ge[1]=Et[1]-Nt[1],ge[2]=Et[2]-Nt[2],De[0]=ge[2]*Math.sin(ee)+ge[0]*Math.cos(ee),De[1]=ge[1],De[2]=ge[2]*Math.cos(ee)-ge[0]*Math.sin(ee),ut[0]=De[0]+Nt[0],ut[1]=De[1]+Nt[1],ut[2]=De[2]+Nt[2],ut}function Vt(ut,Et,Nt,ee){var ge=[],De=[];return ge[0]=Et[0]-Nt[0],ge[1]=Et[1]-Nt[1],ge[2]=Et[2]-Nt[2],De[0]=ge[0]*Math.cos(ee)-ge[1]*Math.sin(ee),De[1]=ge[0]*Math.sin(ee)+ge[1]*Math.cos(ee),De[2]=ge[2],ut[0]=De[0]+Nt[0],ut[1]=De[1]+Nt[1],ut[2]=De[2]+Nt[2],ut}function pt(ut,Et){var Nt=P(ut[0],ut[1],ut[2]),ee=P(Et[0],Et[1],Et[2]);Gt(Nt,Nt),Gt(ee,ee);var ge=gt(Nt,ee);return ge>1?0:ge<-1?Math.PI:Math.acos(ge)}function Lt(ut){return"vec3("+ut[0]+", "+ut[1]+", "+ut[2]+")"}function Tt(ut,Et){return ut[0]===Et[0]&&ut[1]===Et[1]&&ut[2]===Et[2]}function kt(ut,Et){var Nt=ut[0],ee=ut[1],ge=ut[2],De=Et[0],er=Et[1],Re=Et[2];return Math.abs(Nt-De)<=c.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(De))&&Math.abs(ee-er)<=c.EPSILON*Math.max(1,Math.abs(ee),Math.abs(er))&&Math.abs(ge-Re)<=c.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Re))}var jt=T.sub=w,Wt=T.mul=M,zt=T.div=S,bt=T.dist=j,at=T.sqrDist=nt,ft=T.len=_,Pt=T.sqrLen=rt,q=T.forEach=function(){var ut=L();return function(Et,Nt,ee,ge,De,er){var Re=void 0,Ke=void 0;for(Nt||(Nt=3),ee||(ee=0),ge?Ke=Math.min(ge*Nt+ee,Et.length):Ke=Et.length,Re=ee;Re<Ke;Re+=Nt)ut[0]=Et[Re],ut[1]=Et[Re+1],ut[2]=Et[Re+2],De(ut,ut,er),Et[Re]=ut[0],Et[Re+1]=ut[1],Et[Re+2]=ut[2];return Et}}()},99671:function(xt,T,v){function d(x,C){x.prototype=Object.create(C.prototype),x.prototype.constructor=x,x.__proto__=C}var c=v(10848),F=v(87754),L=v(17210),O=v(61206),_=function(x){d(C,x);function C(){return x.apply(this,arguments)||this}var w=C.prototype;return w.execute=function(){var S=this;return L(S.rootNode,S.options,F)},C}(c),P={};function A(x,C){return C=O.assign({},P,C),new _(x,C).execute()}xt.exports=A},7249:function(xt,T,v){function d(x,C){x.prototype=Object.create(C.prototype),x.prototype.constructor=x,x.__proto__=C}var c=v(10848),F=v(23874),L=v(17210),O=v(61206),_=function(x){d(C,x);function C(){return x.apply(this,arguments)||this}var w=C.prototype;return w.execute=function(){var S=this;return S.rootNode.width=0,L(S.rootNode,S.options,F)},C}(c),P={};function A(x,C){return C=O.assign({},P,C),new _(x,C).execute()}xt.exports=A},77064:function(xt,T,v){function d(w,M){w.prototype=Object.create(M.prototype),w.prototype.constructor=w,w.__proto__=M}var c=v(10848),F=v(79687),L=v(47241),O=v(61206),_=["LR","RL","H"],P=_[0],A=function(w){d(M,w);function M(){return w.apply(this,arguments)||this}var S=M.prototype;return S.execute=function(){var B=this,N=B.options,G=B.rootNode;N.isHorizontal=!0;var W=N.indent,$=W===void 0?20:W,H=N.dropCap,j=H===void 0?!0:H,nt=N.direction||P;if(nt&&_.indexOf(nt)===-1)throw new TypeError("Invalid direction: "+nt);if(nt===_[0])F(G,$,j);else if(nt===_[1])F(G,$,j),G.right2left();else if(nt===_[2]){var rt=L(G,N),mt=rt.left,Ft=rt.right;F(mt,$,j),mt.right2left(),F(Ft,$,j);var Gt=mt.getBoundingBox();Ft.translate(Gt.width,0),G.x=Ft.x-G.width/2}return G},M}(c),x={};function C(w,M){return M=O.assign({},x,M),new A(w,M).execute()}xt.exports=C},62114:function(xt,T,v){var d={compactBox:v(99671),dendrogram:v(7249),indented:v(77064),mindmap:v(71423)};xt.exports=d},10848:function(xt,T,v){var d=v(86832),c=function(){function F(O,_){_===void 0&&(_={});var P=this;P.options=_,P.rootNode=d(O,_)}var L=F.prototype;return L.execute=function(){throw new Error("please override this method")},F}();xt.exports=c},23874:function(xt,T,v){var d=v(61206);function c(O,_){O===void 0&&(O=0),_===void 0&&(_=[]);var P=this;P.x=P.y=0,P.leftChild=P.rightChild=null,P.height=0,P.children=_}var F={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function L(O,_,P){P?(_.x=O.x,_.y=O.y):(_.x=O.y,_.y=O.x),O.children.forEach(function(A,x){L(A,_.children[x],P)})}xt.exports=function(O,_){_===void 0&&(_={}),_=d.assign({},F,_);var P=0;function A(S){if(!S)return null;S.width=0,S.depth&&S.depth>P&&(P=S.depth);var I=S.children,B=I.length,N=new c(S.height,[]);return I.forEach(function(G,W){var $=A(G);N.children.push($),W===0&&(N.leftChild=$),W===B-1&&(N.rightChild=$)}),N.originNode=S,N.isLeaf=S.isLeaf(),N}function x(S){if(S.isLeaf||S.children.length===0)S.drawingDepth=P;else{var I=S.children.map(function(N){return x(N)}),B=Math.min.apply(null,I);S.drawingDepth=B-1}return S.drawingDepth}var C;function w(S){S.x=S.drawingDepth*_.rankSep,S.isLeaf?(S.y=0,C&&(S.y=C.y+C.height+_.nodeSep,S.originNode.parent!==C.originNode.parent&&(S.y+=_.subTreeSep)),C=S):(S.children.forEach(function(I){w(I)}),S.y=(S.leftChild.y+S.rightChild.y)/2)}var M=A(O);return x(M),w(M),L(M,O,_.isHorizontal),O}},17210:function(xt,T,v){var d=v(47241),c=["LR","RL","TB","BT","H","V"],F=["LR","RL","H"],L=function(P){return F.indexOf(P)>-1},O=c[0];xt.exports=function(_,P,A){var x=P.direction||O;if(P.isHorizontal=L(x),x&&c.indexOf(x)===-1)throw new TypeError("Invalid direction: "+x);if(x===c[0])A(_,P);else if(x===c[1])A(_,P),_.right2left();else if(x===c[2])A(_,P);else if(x===c[3])A(_,P),_.bottom2top();else if(x===c[4]||x===c[5]){var C=d(_,P),w=C.left,M=C.right;A(w,P),A(M,P),P.isHorizontal?w.right2left():w.bottom2top(),M.translate(w.x-M.x,w.y-M.y),_.x=w.x,_.y=M.y;var S=_.getBoundingBox();P.isHorizontal?S.top<0&&_.translate(0,-S.top):S.left<0&&_.translate(-S.left,0)}var I=P.fixedRoot;return I===void 0&&(I=!0),I&&_.translate(-(_.x+_.width/2+_.hgap),-(_.y+_.height/2+_.vgap)),_}},86832:function(xt,T,v){var d=v(61206),c=18,F=c*2,L=c,O={getId:function(x){return x.id||x.name},getPreH:function(x){return x.preH||0},getPreV:function(x){return x.preV||0},getHGap:function(x){return x.hgap||L},getVGap:function(x){return x.vgap||L},getChildren:function(x){return x.children},getHeight:function(x){return x.height||F},getWidth:function(x){var C=x.label||" ";return x.width||C.split("").length*c}};function _(A,x){var C=this;if(C.vgap=C.hgap=0,A instanceof _)return A;C.data=A;var w=x.getHGap(A),M=x.getVGap(A);return C.preH=x.getPreH(A),C.preV=x.getPreV(A),C.width=x.getWidth(A),C.height=x.getHeight(A),C.width+=C.preH,C.height+=C.preV,C.id=x.getId(A),C.x=C.y=0,C.depth=0,C.children||(C.children=[]),C.addGap(w,M),C}d.assign(_.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(x,C){var w=this;w.hgap+=x,w.vgap+=C,w.width+=2*x,w.height+=2*C},eachNode:function(x){for(var C=this,w=[C],M;M=w.shift();)x(M),w=M.children.concat(w)},DFTraverse:function(x){this.eachNode(x)},BFTraverse:function(x){for(var C=this,w=[C],M;M=w.shift();)x(M),w=w.concat(M.children)},getBoundingBox:function(){var x={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(C){x.left=Math.min(x.left,C.x),x.top=Math.min(x.top,C.y),x.width=Math.max(x.width,C.x+C.width),x.height=Math.max(x.height,C.y+C.height)}),x},translate:function(x,C){x===void 0&&(x=0),C===void 0&&(C=0),this.eachNode(function(w){w.x+=x,w.y+=C,w.x+=w.preH,w.y+=w.preV})},right2left:function(){var x=this,C=x.getBoundingBox();x.eachNode(function(w){w.x=w.x-(w.x-C.left)*2-w.width}),x.translate(C.width,0)},bottom2top:function(){var x=this,C=x.getBoundingBox();x.eachNode(function(w){w.y=w.y-(w.y-C.top)*2-w.height}),x.translate(0,C.height)}});function P(A,x,C){x===void 0&&(x={}),x=d.assign({},O,x);var w=new _(A,x),M=[w],S;if(!C&&!A.collapsed){for(;S=M.shift();)if(!S.data.collapsed){var I=x.getChildren(S.data),B=I?I.length:0;if(S.children=new Array(B),I&&B)for(var N=0;N<B;N++){var G=new _(I[N],x);S.children[N]=G,M.push(G),G.parent=S,G.depth=S.depth+1}}}return w}xt.exports=P},79687:function(xt){function T(v,d,c,F){var L=typeof c=="function"?c(v):c*v.depth;if(!F)try{if(v.id===v.parent.children[0].id){v.x+=L,v.y=d?d.y:0;return}}catch(O){}v.x+=L,v.y=d?d.y+d.height:0}xt.exports=function(v,d,c){var F=null;v.eachNode(function(L){T(L,F,d,c),F=L})}},84939:function(xt,T,v){var d=v(61206);function c(O,_){var P=0;return O.children.length?O.children.forEach(function(A){P+=c(A,_)}):P=O.height,O._subTreeSep=_.getSubTreeSep(O.data),O.totalHeight=Math.max(O.height,P)+2*O._subTreeSep,O.totalHeight}function F(O){var _=O.children,P=_.length;if(P){_.forEach(function(S){F(S)});var A=_[0],x=_[P-1],C=x.y-A.y+x.height,w=0;if(_.forEach(function(S){w+=S.totalHeight}),C>O.height)O.y=A.y+C/2-O.height/2;else if(_.length!==1||O.height>w){var M=O.y+(O.height-C)/2-A.y;_.forEach(function(S){S.translate(0,M)})}else O.y=(A.y+A.height/2+x.y+x.height/2)/2-O.height/2}}var L={getSubTreeSep:function(){return 0}};xt.exports=function(O,_){_===void 0&&(_={}),_=d.assign({},L,_),O.parent={x:0,width:0,height:0,y:0},O.BFTraverse(function(P){P.x=P.parent.x+P.parent.width}),O.parent=null,c(O,_),O.startY=0,O.y=O.totalHeight/2-O.height/2,O.eachNode(function(P){var A=P.children,x=A.length;if(x){var C=A[0];if(C.startY=P.startY+P._subTreeSep,x===1)C.y=P.y+P.height/2-C.height/2;else{C.y=C.startY+C.totalHeight/2-C.height/2;for(var w=1;w<x;w++){var M=A[w];M.startY=A[w-1].startY+A[w-1].totalHeight,M.y=M.startY+M.totalHeight/2-M.height/2}}}}),F(O)}},87754:function(xt){function T(O,_,P,A){A===void 0&&(A=[]);var x=this;x.w=O||0,x.h=_||0,x.y=P||0,x.x=0,x.c=A||[],x.cs=A.length,x.prelim=0,x.mod=0,x.shift=0,x.change=0,x.tl=null,x.tr=null,x.el=null,x.er=null,x.msel=0,x.mser=0}T.fromNode=function(O,_){if(!O)return null;var P=[];return O.children.forEach(function(A){P.push(T.fromNode(A,_))}),_?new T(O.height,O.width,O.x,P):new T(O.width,O.height,O.y,P)};function v(O,_,P){P?O.y+=_:O.x+=_,O.children.forEach(function(A){v(A,_,P)})}function d(O,_){var P=_?O.y:O.x;return O.children.forEach(function(A){P=Math.min(d(A,_),P)}),P}function c(O,_){var P=d(O,_);v(O,-P,_)}function F(O,_,P){P?_.y=O.x:_.x=O.x,O.c.forEach(function(A,x){F(A,_.children[x],P)})}function L(O,_,P){P===void 0&&(P=0),_?(O.x=P,P+=O.width):(O.y=P,P+=O.height),O.children.forEach(function(A){L(A,_,P)})}xt.exports=function(O,_){_===void 0&&(_={});var P=_.isHorizontal;function A(rt){if(rt.cs===0){x(rt);return}A(rt.c[0]);for(var mt=j(I(rt.c[0].el),0,null),Ft=1;Ft<rt.cs;++Ft){A(rt.c[Ft]);var Gt=I(rt.c[Ft].er);C(rt,Ft,mt),mt=j(Gt,Ft,mt)}G(rt),x(rt)}function x(rt){rt.cs===0?(rt.el=rt,rt.er=rt,rt.msel=rt.mser=0):(rt.el=rt.c[0].el,rt.msel=rt.c[0].msel,rt.er=rt.c[rt.cs-1].er,rt.mser=rt.c[rt.cs-1].mser)}function C(rt,mt,Ft){for(var Gt=rt.c[mt-1],gt=Gt.mod,st=rt.c[mt],Xt=st.mod;Gt!==null&&st!==null;){I(Gt)>Ft.low&&(Ft=Ft.nxt);var Q=gt+Gt.prelim+Gt.w-(Xt+st.prelim);Q>0&&(Xt+=Q,w(rt,mt,Ft.index,Q));var qt=I(Gt),y=I(st);qt<=y&&(Gt=S(Gt),Gt!==null&&(gt+=Gt.mod)),qt>=y&&(st=M(st),st!==null&&(Xt+=st.mod))}!Gt&&!!st?B(rt,mt,st,Xt):!!Gt&&!st&&N(rt,mt,Gt,gt)}function w(rt,mt,Ft,Gt){rt.c[mt].mod+=Gt,rt.c[mt].msel+=Gt,rt.c[mt].mser+=Gt,$(rt,mt,Ft,Gt)}function M(rt){return rt.cs===0?rt.tl:rt.c[0]}function S(rt){return rt.cs===0?rt.tr:rt.c[rt.cs-1]}function I(rt){return rt.y+rt.h}function B(rt,mt,Ft,Gt){var gt=rt.c[0].el;gt.tl=Ft;var st=Gt-Ft.mod-rt.c[0].msel;gt.mod+=st,gt.prelim-=st,rt.c[0].el=rt.c[mt].el,rt.c[0].msel=rt.c[mt].msel}function N(rt,mt,Ft,Gt){var gt=rt.c[mt].er;gt.tr=Ft;var st=Gt-Ft.mod-rt.c[mt].mser;gt.mod+=st,gt.prelim-=st,rt.c[mt].er=rt.c[mt-1].er,rt.c[mt].mser=rt.c[mt-1].mser}function G(rt){rt.prelim=(rt.c[0].prelim+rt.c[0].mod+rt.c[rt.cs-1].mod+rt.c[rt.cs-1].prelim+rt.c[rt.cs-1].w)/2-rt.w/2}function W(rt,mt){mt+=rt.mod,rt.x=rt.prelim+mt,H(rt);for(var Ft=0;Ft<rt.cs;Ft++)W(rt.c[Ft],mt)}function $(rt,mt,Ft,Gt){if(Ft!==mt-1){var gt=mt-Ft;rt.c[Ft+1].shift+=Gt/gt,rt.c[mt].shift-=Gt/gt,rt.c[mt].change-=Gt-Gt/gt}}function H(rt){for(var mt=0,Ft=0,Gt=0;Gt<rt.cs;Gt++)mt+=rt.c[Gt].shift,Ft+=mt+rt.c[Gt].change,rt.c[Gt].mod+=Ft}function j(rt,mt,Ft){for(;Ft!==null&&rt>=Ft.low;)Ft=Ft.nxt;return{low:rt,index:mt,nxt:Ft}}L(O,P);var nt=T.fromNode(O,P);return A(nt),W(nt,0),F(nt,O,P),c(O,P),O}},47241:function(xt,T,v){var d=v(86832);xt.exports=function(c,F){for(var L=d(c.data,F,!0),O=d(c.data,F,!0),_=c.children.length,P=Math.round(_/2),A=F.getSide||function(M,S){return S<P?"right":"left"},x=0;x<_;x++){var C=c.children[x],w=A(C,x);w==="right"?O.children.push(C):L.children.push(C)}return L.eachNode(function(M){M.isRoot()||(M.side="left")}),O.eachNode(function(M){M.isRoot()||(M.side="right")}),{left:L,right:O}}},71423:function(xt,T,v){function d(x,C){x.prototype=Object.create(C.prototype),x.prototype.constructor=x,x.__proto__=C}var c=v(10848),F=v(84939),L=v(17210),O=v(61206),_=function(x){d(C,x);function C(){return x.apply(this,arguments)||this}var w=C.prototype;return w.execute=function(){var S=this;return L(S.rootNode,S.options,F)},C}(c),P={};function A(x,C){return C=O.assign({},P,C),new _(x,C).execute()}xt.exports=A},61206:function(xt,T,v){var d=v(26169),c=d.mix;xt.exports={assign:c}},64916:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(83126);T.wO=c.default;var F=v(92938);d=F.default;var L=v(72806);d=L.default;var O=v(7918);T.vs=O.default},83126:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(25519);d.translate=function(c,F,L){var O=new Array(9);return d.fromTranslation(O,L),d.multiply(c,O,F)},d.rotate=function(c,F,L){var O=new Array(9);return d.fromRotation(O,L),d.multiply(c,O,F)},d.scale=function(c,F,L){var O=new Array(9);return d.fromScaling(O,L),d.multiply(c,O,F)},d.transform=function(c,F){for(var L=[].concat(c),O=0,_=F.length;O<_;O++){var P=F[O];switch(P[0]){case"t":d.translate(L,L,[P[1],P[2]]);break;case"s":d.scale(L,L,[P[1],P[2]]);break;case"r":d.rotate(L,L,P[1]);break;default:break}}return L},T.default=d},7918:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=v(83126);T.default=function(F,L){var O=F?d.clone(F):[1,0,0,0,1,0,0,0,1];return d.each(L,function(_){switch(_[0]){case"t":c.default.translate(O,O,[_[1],_[2]]);break;case"s":c.default.scale(O,O,[_[1],_[2]]);break;case"r":c.default.rotate(O,O,_[1]);break;case"m":c.default.multiply(O,O,_[1]);break;default:return!1}}),O}},92938:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(8554),c=v(26169);d.angle=function(F,L){var O=d.dot(F,L)/(d.length(F)*d.length(L));return Math.acos(c.clamp(O,-1,1))},d.direction=function(F,L){return F[0]*L[1]-L[0]*F[1]},d.angleTo=function(F,L,O){var _=d.angle(F,L),P=d.direction(F,L)>=0;return O?P?Math.PI*2-_:_:P?_:Math.PI*2-_},d.vertical=function(F,L,O){return O?(F[0]=L[1],F[1]=-1*L[0]):(F[0]=-1*L[1],F[1]=L[0]),F},T.default=d},72806:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(54069);T.default=d},50669:function(xt,T,v){"use strict";v.r(T),v.d(T,{leftTranslate:function(){return F},leftRotate:function(){return L},leftScale:function(){return O},transform:function(){return P},direction:function(){return A},angleTo:function(){return x},vertical:function(){return C}});var d=v(58198),c=v(7124);function F(w,M,S){var I=[0,0,0,0,0,0,0,0,0];return d.fromTranslation(I,S),d.multiply(w,I,M)}function L(w,M,S){var I=[0,0,0,0,0,0,0,0,0];return d.fromRotation(I,S),d.multiply(w,I,M)}function O(w,M,S){var I=[0,0,0,0,0,0,0,0,0];return d.fromScaling(I,S),d.multiply(w,I,M)}function _(w,M,S){return d.multiply(w,S,M)}function P(w,M){for(var S=w?[].concat(w):[1,0,0,0,1,0,0,0,1],I=0,B=M.length;I<B;I++){var N=M[I];switch(N[0]){case"t":F(S,S,[N[1],N[2]]);break;case"s":O(S,S,[N[1],N[2]]);break;case"r":L(S,S,N[1]);break;case"m":_(S,S,N[1]);break;default:break}}return S}function A(w,M){return w[0]*M[1]-M[0]*w[1]}function x(w,M,S){var I=c.angle(w,M),B=A(w,M)>=0;return S?B?Math.PI*2-I:I:B?I:Math.PI*2-I}function C(w,M,S){return S?(w[0]=M[1],w[1]=-1*M[0]):(w[0]=-1*M[1],w[1]=M[0]),w}},36694:function(xt,T,v){"use strict";v.r(T),v.d(T,{mat3:function(){return d},vec2:function(){return c},vec3:function(){return F},ext:function(){return L}});var d=v(58198),c=v(7124),F=v(92541),L=v(50669)},62029:function(xt,T,v){"use strict";v.r(T),v.d(T,{catmullRom2Bezier:function(){return x},fillPath:function(){return S},fillPathByDiff:function(){return N},formatPath:function(){return $},getArcParams:function(){return Re},getLineIntersect:function(){return Rr},isPointInPolygon:function(){return hn},isPolygonsIntersect:function(){return ci},parsePath:function(){return O},parsePathArray:function(){return Nt},parsePathString:function(){return mt},path2Absolute:function(){return gt},path2Curve:function(){return Vt},path2Segments:function(){return hr},pathIntersection:function(){return ut},reactPath:function(){return H}});var d=v(26169),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,F=/[^\s\,]+/ig;function L(oe){var ce=oe||[];if((0,d.isArray)(ce))return ce;if((0,d.isString)(ce))return ce=ce.match(c),(0,d.each)(ce,function(Ee,Pe){if(Ee=Ee.match(F),Ee[0].length>1){var Fe=Ee[0].charAt(0);Ee.splice(1,0,Ee[0].substr(1)),Ee[0]=Fe}(0,d.each)(Ee,function(Ue,Qe){isNaN(Ue)||(Ee[Qe]=+Ue)}),ce[Pe]=Ee}),ce}var O=L,_=v(7124);function P(oe,ce,Ee,Pe){var Fe=[],Ue=!!Pe,Qe,rr,We,fr,fe,re,Rt;if(Ue){We=Pe[0],fr=Pe[1];for(var ie=0,be=oe.length;ie<be;ie+=1){var Oe=oe[ie];We=_.min([0,0],We,Oe),fr=_.max([0,0],fr,Oe)}}for(var ie=0,ze=oe.length;ie<ze;ie+=1){var Oe=oe[ie];if(ie===0&&!Ee)Rt=Oe;else if(ie===ze-1&&!Ee)re=Oe,Fe.push(Rt),Fe.push(re);else{var ke=[ie?ie-1:ze-1,ie-1][Ee?0:1];Qe=oe[ke],rr=oe[Ee?(ie+1)%ze:ie+1];var Ze=[0,0];Ze=_.sub(Ze,rr,Qe),Ze=_.scale(Ze,Ze,ce);var kr=_.distance(Oe,Qe),Fr=_.distance(Oe,rr),jr=kr+Fr;jr!==0&&(kr/=jr,Fr/=jr);var ve=_.scale([0,0],Ze,-kr),pe=_.scale([0,0],Ze,Fr);re=_.add([0,0],Oe,ve),fe=_.add([0,0],Oe,pe),fe=_.min([0,0],fe,_.max([0,0],rr,Oe)),fe=_.max([0,0],fe,_.min([0,0],rr,Oe)),ve=_.sub([0,0],fe,Oe),ve=_.scale([0,0],ve,-kr/Fr),re=_.add([0,0],Oe,ve),re=_.min([0,0],re,_.max([0,0],Qe,Oe)),re=_.max([0,0],re,_.min([0,0],Qe,Oe)),pe=_.sub([0,0],Oe,re),pe=_.scale([0,0],pe,Fr/kr),fe=_.add([0,0],Oe,pe),Ue&&(re=_.max([0,0],re,We),re=_.min([0,0],re,fr),fe=_.max([0,0],fe,We),fe=_.min([0,0],fe,fr)),Fe.push(Rt),Fe.push(re),Rt=fe}}return Ee&&Fe.push(Fe.shift()),Fe}function A(oe,ce,Ee){ce===void 0&&(ce=!1),Ee===void 0&&(Ee=[[0,0],[1,1]]);for(var Pe=!!ce,Fe=[],Ue=0,Qe=oe.length;Ue<Qe;Ue+=2)Fe.push([oe[Ue],oe[Ue+1]]);for(var rr=P(Fe,.4,Pe,Ee),We=Fe.length,fr=[],fe,re,Rt,Ue=0;Ue<We-1;Ue+=1)fe=rr[Ue*2],re=rr[Ue*2+1],Rt=Fe[Ue+1],fr.push(["C",fe[0],fe[1],re[0],re[1],Rt[0],Rt[1]]);return Pe&&(fe=rr[We],re=rr[We+1],Rt=Fe[0],fr.push(["C",fe[0],fe[1],re[0],re[1],Rt[0],Rt[1]])),fr}var x=A;function C(oe,ce){var Ee=[],Pe=[];function Fe(Ue,Qe){if(Ue.length===1)Ee.push(Ue[0]),Pe.push(Ue[0]);else{for(var rr=[],We=0;We<Ue.length-1;We++)We===0&&Ee.push(Ue[0]),We===Ue.length-2&&Pe.push(Ue[We+1]),rr[We]=[(1-Qe)*Ue[We][0]+Qe*Ue[We+1][0],(1-Qe)*Ue[We][1]+Qe*Ue[We+1][1]];Fe(rr,Qe)}}return oe.length&&Fe(oe,ce),{left:Ee,right:Pe.reverse()}}function w(oe,ce,Ee){var Pe=[[oe[1],oe[2]]];Ee=Ee||2;var Fe=[];ce[0]==="A"?(Pe.push(ce[6]),Pe.push(ce[7])):ce[0]==="C"?(Pe.push([ce[1],ce[2]]),Pe.push([ce[3],ce[4]]),Pe.push([ce[5],ce[6]])):ce[0]==="S"||ce[0]==="Q"?(Pe.push([ce[1],ce[2]]),Pe.push([ce[3],ce[4]])):Pe.push([ce[1],ce[2]]);for(var Ue=Pe,Qe=1/Ee,rr=0;rr<Ee-1;rr++){var We=Qe/(1-Qe*rr),fr=C(Ue,We);Fe.push(fr.left),Ue=fr.right}Fe.push(Ue);var fe=Fe.map(function(re){var Rt=[];return re.length===4&&(Rt.push("C"),Rt=Rt.concat(re[2])),re.length>=3&&(re.length===3&&Rt.push("Q"),Rt=Rt.concat(re[1])),re.length===2&&Rt.push("L"),Rt=Rt.concat(re[re.length-1]),Rt});return fe}function M(oe,ce,Ee){if(Ee===1)return[[].concat(oe)];var Pe=[];if(ce[0]==="L"||ce[0]==="C"||ce[0]==="Q")Pe=Pe.concat(w(oe,ce,Ee));else{var Fe=[].concat(oe);Fe[0]==="M"&&(Fe[0]="L");for(var Ue=0;Ue<=Ee-1;Ue++)Pe.push(Fe)}return Pe}function S(oe,ce){if(oe.length===1)return oe;var Ee=oe.length-1,Pe=ce.length-1,Fe=Ee/Pe,Ue=[];if(oe.length===1&&oe[0][0]==="M"){for(var Qe=0;Qe<Pe-Ee;Qe++)oe.push(oe[0]);return oe}for(var Qe=0;Qe<Pe;Qe++){var rr=Math.floor(Fe*Qe);Ue[rr]=(Ue[rr]||0)+1}var We=Ue.reduce(function(fr,fe,re){return re===Ee?fr.concat(oe[Ee]):fr.concat(M(oe[re],oe[re+1],fe))},[]);return We.unshift(oe[0]),(ce[Pe]==="Z"||ce[Pe]==="z")&&We.push("Z"),We}function I(oe,ce,Ee){var Pe=null,Fe=Ee;return ce<Fe&&(Fe=ce,Pe="add"),oe<Fe&&(Fe=oe,Pe="del"),{type:Pe,min:Fe}}var B=function(oe,ce){var Ee=oe.length,Pe=ce.length,Fe,Ue,Qe=0;if(Ee===0||Pe===0)return null;for(var rr=[],We=0;We<=Ee;We++)rr[We]=[],rr[We][0]={min:We};for(var fr=0;fr<=Pe;fr++)rr[0][fr]={min:fr};for(var We=1;We<=Ee;We++){Fe=oe[We-1];for(var fr=1;fr<=Pe;fr++){Ue=ce[fr-1],(0,d.isEqual)(Fe,Ue)?Qe=0:Qe=1;var fe=rr[We-1][fr].min+1,re=rr[We][fr-1].min+1,Rt=rr[We-1][fr-1].min+Qe;rr[We][fr]=I(fe,re,Rt)}}return rr};function N(oe,ce){var Ee=B(oe,ce),Pe=oe.length,Fe=ce.length,Ue=[],Qe=1,rr=1;if(Ee[Pe][Fe]!==Pe){for(var We=1;We<=Pe;We++){var fr=Ee[We][We].min;rr=We;for(var fe=Qe;fe<=Fe;fe++)Ee[We][fe].min<fr&&(fr=Ee[We][fe].min,rr=fe);Qe=rr,Ee[We][Qe].type&&Ue.push({index:We-1,type:Ee[We][Qe].type})}for(var We=Ue.length-1;We>=0;We--)Qe=Ue[We].index,Ue[We].type==="add"?oe.splice(Qe,0,[].concat(oe[Qe])):oe.splice(Qe,1)}if(Pe=oe.length,Pe<Fe)for(var We=0;We<Fe-Pe;We++)oe[Pe-1][0]==="z"||oe[Pe-1][0]==="Z"?oe.splice(Pe-2,0,oe[Pe-2]):oe.push(oe[Pe-1]);return oe}function G(oe){var ce=[];switch(oe[0]){case"M":ce.push([oe[1],oe[2]]);break;case"L":ce.push([oe[1],oe[2]]);break;case"A":ce.push([oe[6],oe[7]]);break;case"Q":ce.push([oe[3],oe[4]]),ce.push([oe[1],oe[2]]);break;case"T":ce.push([oe[1],oe[2]]);break;case"C":ce.push([oe[5],oe[6]]),ce.push([oe[1],oe[2]]),ce.push([oe[3],oe[4]]);break;case"S":ce.push([oe[3],oe[4]]),ce.push([oe[1],oe[2]]);break;case"H":ce.push([oe[1],oe[1]]);break;case"V":ce.push([oe[1],oe[1]]);break;default:}return ce}function W(oe,ce,Ee){for(var Pe=[].concat(oe),Fe,Ue=1/(Ee+1),Qe=G(ce)[0],rr=1;rr<=Ee;rr++)Ue*=rr,Fe=Math.floor(oe.length*Ue),Fe===0?Pe.unshift([Qe[0]*Ue+oe[Fe][0]*(1-Ue),Qe[1]*Ue+oe[Fe][1]*(1-Ue)]):Pe.splice(Fe,0,[Qe[0]*Ue+oe[Fe][0]*(1-Ue),Qe[1]*Ue+oe[Fe][1]*(1-Ue)]);return Pe}function $(oe,ce){if(oe.length<=1)return oe;for(var Ee,Pe=0;Pe<ce.length;Pe++)if(oe[Pe][0]!==ce[Pe][0])switch(Ee=G(oe[Pe]),ce[Pe][0]){case"M":oe[Pe]=["M"].concat(Ee[0]);break;case"L":oe[Pe]=["L"].concat(Ee[0]);break;case"A":oe[Pe]=[].concat(ce[Pe]),oe[Pe][6]=Ee[0][0],oe[Pe][7]=Ee[0][1];break;case"Q":if(Ee.length<2)if(Pe>0)Ee=W(Ee,oe[Pe-1],1);else{oe[Pe]=ce[Pe];break}oe[Pe]=["Q"].concat(Ee.reduce(function(Fe,Ue){return Fe.concat(Ue)},[]));break;case"T":oe[Pe]=["T"].concat(Ee[0]);break;case"C":if(Ee.length<3)if(Pe>0)Ee=W(Ee,oe[Pe-1],2);else{oe[Pe]=ce[Pe];break}oe[Pe]=["C"].concat(Ee.reduce(function(Fe,Ue){return Fe.concat(Ue)},[]));break;case"S":if(Ee.length<2)if(Pe>0)Ee=W(Ee,oe[Pe-1],1);else{oe[Pe]=ce[Pe];break}oe[Pe]=["S"].concat(Ee.reduce(function(Fe,Ue){return Fe.concat(Ue)},[]));break;default:oe[Pe]=ce[Pe]}return oe}function H(oe,ce,Ee,Pe,Fe){return Fe?[["M",+oe+ +Fe,ce],["l",Ee-Fe*2,0],["a",Fe,Fe,0,0,1,Fe,Fe],["l",0,Pe-Fe*2],["a",Fe,Fe,0,0,1,-Fe,Fe],["l",Fe*2-Ee,0],["a",Fe,Fe,0,0,1,-Fe,-Fe],["l",0,Fe*2-Pe],["a",Fe,Fe,0,0,1,Fe,-Fe],["z"]]:[["M",oe,ce],["l",Ee,0],["l",0,Pe],["l",-Ee,0],["z"]]}var j=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,nt=new RegExp("([a-z])["+j+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+j+"]*,?["+j+"]*)+)","ig"),rt=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+j+"]*,?["+j+"]*","ig");function mt(oe){if(!oe)return null;if((0,d.isArray)(oe))return oe;var ce={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ee=[];return String(oe).replace(nt,function(Pe,Fe,Ue){var Qe=[],rr=Fe.toLowerCase();if(Ue.replace(rt,function(We,fr){fr&&Qe.push(+fr)}),rr==="m"&&Qe.length>2&&(Ee.push([Fe].concat(Qe.splice(0,2))),rr="l",Fe=Fe==="m"?"l":"L"),rr==="o"&&Qe.length===1&&Ee.push([Fe,Qe[0]]),rr==="r")Ee.push([Fe].concat(Qe));else for(;Qe.length>=ce[rr]&&(Ee.push([Fe].concat(Qe.splice(0,ce[rr]))),!!ce[rr]););return""}),Ee}var Ft=/[a-z]/;function Gt(oe,ce){return[ce[0]+(ce[0]-oe[0]),ce[1]+(ce[1]-oe[1])]}function gt(oe){var ce=mt(oe);if(!ce||!ce.length)return[["M",0,0]];for(var Ee=!1,Pe=0;Pe<ce.length;Pe++){var Fe=ce[Pe][0];if(Ft.test(Fe)||["V","H","T","S"].indexOf(Fe)>=0){Ee=!0;break}}if(!Ee)return ce;var Ue=[],Qe=0,rr=0,We=0,fr=0,fe=0,re,Rt,ie=ce[0];(ie[0]==="M"||ie[0]==="m")&&(Qe=+ie[1],rr=+ie[2],We=Qe,fr=rr,fe++,Ue[0]=["M",Qe,rr]);for(var Pe=fe,be=ce.length;Pe<be;Pe++){var Oe=ce[Pe],ze=Ue[Pe-1],ke=[],Fe=Oe[0],Ze=Fe.toUpperCase();if(Fe!==Ze)switch(ke[0]=Ze,Ze){case"A":ke[1]=Oe[1],ke[2]=Oe[2],ke[3]=Oe[3],ke[4]=Oe[4],ke[5]=Oe[5],ke[6]=+Oe[6]+Qe,ke[7]=+Oe[7]+rr;break;case"V":ke[1]=+Oe[1]+rr;break;case"H":ke[1]=+Oe[1]+Qe;break;case"M":We=+Oe[1]+Qe,fr=+Oe[2]+rr,ke[1]=We,ke[2]=fr;break;default:for(var kr=1,Fr=Oe.length;kr<Fr;kr++)ke[kr]=+Oe[kr]+(kr%2?Qe:rr)}else ke=ce[Pe];switch(Ze){case"Z":Qe=+We,rr=+fr;break;case"H":Qe=ke[1],ke=["L",Qe,rr];break;case"V":rr=ke[1],ke=["L",Qe,rr];break;case"T":Qe=ke[1],rr=ke[2];var jr=Gt([ze[1],ze[2]],[ze[3],ze[4]]);ke=["Q",jr[0],jr[1],Qe,rr];break;case"S":Qe=ke[ke.length-2],rr=ke[ke.length-1];var ve=ze.length,pe=Gt([ze[ve-4],ze[ve-3]],[ze[ve-2],ze[ve-1]]);ke=["C",pe[0],pe[1],ke[1],ke[2],Qe,rr];break;case"M":We=ke[ke.length-2],fr=ke[ke.length-1];break;default:Qe=ke[ke.length-2],rr=ke[ke.length-1]}Ue.push(ke)}return Ue}var st=Math.PI*2,Xt=function(oe,ce,Ee,Pe,Fe,Ue,Qe){var rr=oe.x,We=oe.y;rr*=ce,We*=Ee;var fr=Pe*rr-Fe*We,fe=Fe*rr+Pe*We;return{x:fr+Ue,y:fe+Qe}},Q=function(oe,ce){var Ee=ce===1.5707963267948966?.551915024494:ce===-1.5707963267948966?-.551915024494:4/3*Math.tan(ce/4),Pe=Math.cos(oe),Fe=Math.sin(oe),Ue=Math.cos(oe+ce),Qe=Math.sin(oe+ce);return[{x:Pe-Fe*Ee,y:Fe+Pe*Ee},{x:Ue+Qe*Ee,y:Qe-Ue*Ee},{x:Ue,y:Qe}]},qt=function(oe,ce,Ee,Pe){var Fe=oe*Pe-ce*Ee<0?-1:1,Ue=oe*Ee+ce*Pe;return Ue>1&&(Ue=1),Ue<-1&&(Ue=-1),Fe*Math.acos(Ue)},y=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr,We,fr,fe,re){var Rt=Math.pow(Fe,2),ie=Math.pow(Ue,2),be=Math.pow(fe,2),Oe=Math.pow(re,2),ze=Rt*ie-Rt*Oe-ie*be;ze<0&&(ze=0),ze/=Rt*Oe+ie*be,ze=Math.sqrt(ze)*(Qe===rr?-1:1);var ke=ze*Fe/Ue*re,Ze=ze*-Ue/Fe*fe,kr=fr*ke-We*Ze+(oe+Ee)/2,Fr=We*ke+fr*Ze+(ce+Pe)/2,jr=(fe-ke)/Fe,ve=(re-Ze)/Ue,pe=(-fe-ke)/Fe,Se=(-re-Ze)/Ue,Xe=qt(1,0,jr,ve),je=qt(jr,ve,pe,Se);return rr===0&&je>0&&(je-=st),rr===1&&je<0&&(je+=st),[kr,Fr,Xe,je]},Yt=function(oe){var ce=oe.px,Ee=oe.py,Pe=oe.cx,Fe=oe.cy,Ue=oe.rx,Qe=oe.ry,rr=oe.xAxisRotation,We=rr===void 0?0:rr,fr=oe.largeArcFlag,fe=fr===void 0?0:fr,re=oe.sweepFlag,Rt=re===void 0?0:re,ie=[];if(Ue===0||Qe===0)return[{x1:0,y1:0,x2:0,y2:0,x:Pe,y:Fe}];var be=Math.sin(We*st/360),Oe=Math.cos(We*st/360),ze=Oe*(ce-Pe)/2+be*(Ee-Fe)/2,ke=-be*(ce-Pe)/2+Oe*(Ee-Fe)/2;if(ze===0&&ke===0)return[{x1:0,y1:0,x2:0,y2:0,x:Pe,y:Fe}];Ue=Math.abs(Ue),Qe=Math.abs(Qe);var Ze=Math.pow(ze,2)/Math.pow(Ue,2)+Math.pow(ke,2)/Math.pow(Qe,2);Ze>1&&(Ue*=Math.sqrt(Ze),Qe*=Math.sqrt(Ze));var kr=y(ce,Ee,Pe,Fe,Ue,Qe,fe,Rt,be,Oe,ze,ke),Fr=kr[0],jr=kr[1],ve=kr[2],pe=kr[3],Se=Math.abs(pe)/(st/4);Math.abs(1-Se)<1e-7&&(Se=1);var Xe=Math.max(Math.ceil(Se),1);pe/=Xe;for(var je=0;je<Xe;je++)ie.push(Q(ve,pe)),ve+=pe;return ie.map(function(tr){var pr=Xt(tr[0],Ue,Qe,Oe,be,Fr,jr),Ar=pr.x,Hr=pr.y,Br=Xt(tr[1],Ue,Qe,Oe,be,Fr,jr),Vr=Br.x,Tn=Br.y,Pn=Xt(tr[2],Ue,Qe,Oe,be,Fr,jr),ni=Pn.x,On=Pn.y;return{x1:Ar,y1:Hr,x2:Vr,y2:Tn,x:ni,y:On}})};function K(oe,ce,Ee,Pe,Fe,Ue,Qe,rr,We){var fr=Yt({px:oe,py:ce,cx:rr,cy:We,rx:Ee,ry:Pe,xAxisRotation:Fe,largeArcFlag:Ue,sweepFlag:Qe});return fr.reduce(function(fe,re){var Rt=re.x1,ie=re.y1,be=re.x2,Oe=re.y2,ze=re.x,ke=re.y;return fe.push(Rt,ie,be,Oe,ze,ke),fe},[])}function ht(oe,ce,Ee,Pe,Fe,Ue){var Qe=1/3,rr=2/3;return[Qe*oe+rr*Ee,Qe*ce+rr*Pe,Qe*Fe+rr*Ee,Qe*Ue+rr*Pe,Fe,Ue]}function J(oe,ce,Ee,Pe){return[oe,ce,Ee,Pe,Ee,Pe]}function At(oe,ce){"TQ".indexOf(oe[0])<0&&(ce.qx=null,ce.qy=null);var Ee=oe.slice(1),Pe=Ee[0],Fe=Ee[1];switch(oe[0]){case"M":return ce.x=Pe,ce.y=Fe,oe;case"A":return["C"].concat(K.apply(0,[ce.x1,ce.y1].concat(oe.slice(1))));case"Q":return ce.qx=Pe,ce.qy=Fe,["C"].concat(ht.apply(0,[ce.x1,ce.y1].concat(oe.slice(1))));case"L":return["C"].concat(J(ce.x1,ce.y1,oe[1],oe[2]));case"H":return["C"].concat(J(ce.x1,ce.y1,oe[1],ce.y1));case"V":return["C"].concat(J(ce.x1,ce.y1,ce.x1,oe[1]));case"Z":return["C"].concat(J(ce.x1,ce.y1,ce.x,ce.y));default:}return oe}function Vt(oe,ce){ce===void 0&&(ce=!1);for(var Ee=gt(oe),Pe={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},Fe=[],Ue="",Qe=Ee.length,rr,We,fr=[],fe=0;fe<Qe;fe+=1)Ee[fe]&&(Ue=Ee[fe][0]),Fe[fe]=Ue,Ee[fe]=At(Ee[fe],Pe),pt(Ee,Fe,fe),Qe=Ee.length,Ue==="Z"&&fr.push(fe),rr=Ee[fe],We=rr.length,Pe.x1=+rr[We-2],Pe.y1=+rr[We-1],Pe.x2=+rr[We-4]||Pe.x1,Pe.y2=+rr[We-3]||Pe.y1;return ce?[Ee,fr]:Ee}function pt(oe,ce,Ee){if(oe[Ee].length>7){oe[Ee].shift();for(var Pe=oe[Ee],Fe=Ee;Pe.length;)ce[Ee]="A",oe.splice(Fe+=1,0,["C"].concat(Pe.splice(0,6)));oe.splice(Ee,1)}}var Lt=function(oe,ce,Ee,Pe,Fe){var Ue=-3*ce+9*Ee-9*Pe+3*Fe,Qe=oe*Ue+6*ce-12*Ee+6*Pe;return oe*Qe-3*ce+3*Ee},Tt=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr,We){We===null&&(We=1),We=We>1?1:We<0?0:We;for(var fr=We/2,fe=12,re=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Rt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ie=0,be=0;be<fe;be++){var Oe=fr*re[be]+fr,ze=Lt(Oe,oe,Ee,Fe,Qe),ke=Lt(Oe,ce,Pe,Ue,rr),Ze=ze*ze+ke*ke;ie+=Rt[be]*Math.sqrt(Ze)}return fr*ie},kt=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr){for(var We=[],fr=[[],[]],fe,re,Rt,ie,be=0;be<2;++be){if(be===0?(re=6*oe-12*Ee+6*Fe,fe=-3*oe+9*Ee-9*Fe+3*Qe,Rt=3*Ee-3*oe):(re=6*ce-12*Pe+6*Ue,fe=-3*ce+9*Pe-9*Ue+3*rr,Rt=3*Pe-3*ce),Math.abs(fe)<1e-12){if(Math.abs(re)<1e-12)continue;ie=-Rt/re,ie>0&&ie<1&&We.push(ie);continue}var Oe=re*re-4*Rt*fe,ze=Math.sqrt(Oe);if(!(Oe<0)){var ke=(-re+ze)/(2*fe);ke>0&&ke<1&&We.push(ke);var Ze=(-re-ze)/(2*fe);Ze>0&&Ze<1&&We.push(Ze)}}for(var kr=We.length,Fr=kr,jr;kr--;)ie=We[kr],jr=1-ie,fr[0][kr]=jr*jr*jr*oe+3*jr*jr*ie*Ee+3*jr*ie*ie*Fe+ie*ie*ie*Qe,fr[1][kr]=jr*jr*jr*ce+3*jr*jr*ie*Pe+3*jr*ie*ie*Ue+ie*ie*ie*rr;return fr[0][Fr]=oe,fr[1][Fr]=ce,fr[0][Fr+1]=Qe,fr[1][Fr+1]=rr,fr[0].length=fr[1].length=Fr+2,{min:{x:Math.min.apply(0,fr[0]),y:Math.min.apply(0,fr[1])},max:{x:Math.max.apply(0,fr[0]),y:Math.max.apply(0,fr[1])}}},jt=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr){if(!(Math.max(oe,Ee)<Math.min(Fe,Qe)||Math.min(oe,Ee)>Math.max(Fe,Qe)||Math.max(ce,Pe)<Math.min(Ue,rr)||Math.min(ce,Pe)>Math.max(Ue,rr))){var We=(oe*Pe-ce*Ee)*(Fe-Qe)-(oe-Ee)*(Fe*rr-Ue*Qe),fr=(oe*Pe-ce*Ee)*(Ue-rr)-(ce-Pe)*(Fe*rr-Ue*Qe),fe=(oe-Ee)*(Ue-rr)-(ce-Pe)*(Fe-Qe);if(!!fe){var re=We/fe,Rt=fr/fe,ie=+re.toFixed(2),be=+Rt.toFixed(2);if(!(ie<+Math.min(oe,Ee).toFixed(2)||ie>+Math.max(oe,Ee).toFixed(2)||ie<+Math.min(Fe,Qe).toFixed(2)||ie>+Math.max(Fe,Qe).toFixed(2)||be<+Math.min(ce,Pe).toFixed(2)||be>+Math.max(ce,Pe).toFixed(2)||be<+Math.min(Ue,rr).toFixed(2)||be>+Math.max(Ue,rr).toFixed(2)))return{x:re,y:Rt}}}},Wt=function(oe,ce,Ee){return ce>=oe.x&&ce<=oe.x+oe.width&&Ee>=oe.y&&Ee<=oe.y+oe.height},zt=function(oe,ce,Ee,Pe){return oe===null&&(oe=ce=Ee=Pe=0),ce===null&&(ce=oe.y,Ee=oe.width,Pe=oe.height,oe=oe.x),{x:oe,y:ce,width:Ee,w:Ee,height:Pe,h:Pe,x2:oe+Ee,y2:ce+Pe,cx:oe+Ee/2,cy:ce+Pe/2,r1:Math.min(Ee,Pe)/2,r2:Math.max(Ee,Pe)/2,r0:Math.sqrt(Ee*Ee+Pe*Pe)/2,path:H(oe,ce,Ee,Pe),vb:[oe,ce,Ee,Pe].join(" ")}},bt=function(oe,ce){return oe=zt(oe),ce=zt(ce),Wt(ce,oe.x,oe.y)||Wt(ce,oe.x2,oe.y)||Wt(ce,oe.x,oe.y2)||Wt(ce,oe.x2,oe.y2)||Wt(oe,ce.x,ce.y)||Wt(oe,ce.x2,ce.y)||Wt(oe,ce.x,ce.y2)||Wt(oe,ce.x2,ce.y2)||(oe.x<ce.x2&&oe.x>ce.x||ce.x<oe.x2&&ce.x>oe.x)&&(oe.y<ce.y2&&oe.y>ce.y||ce.y<oe.y2&&ce.y>oe.y)},at=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr){(0,d.isArray)(oe)||(oe=[oe,ce,Ee,Pe,Fe,Ue,Qe,rr]);var We=kt.apply(null,oe);return zt(We.min.x,We.min.y,We.max.x-We.min.x,We.max.y-We.min.y)},ft=function(oe,ce,Ee,Pe,Fe,Ue,Qe,rr,We){var fr=1-We,fe=Math.pow(fr,3),re=Math.pow(fr,2),Rt=We*We,ie=Rt*We,be=fe*oe+re*3*We*Ee+fr*3*We*We*Fe+ie*Qe,Oe=fe*ce+re*3*We*Pe+fr*3*We*We*Ue+ie*rr,ze=oe+2*We*(Ee-oe)+Rt*(Fe-2*Ee+oe),ke=ce+2*We*(Pe-ce)+Rt*(Ue-2*Pe+ce),Ze=Ee+2*We*(Fe-Ee)+Rt*(Qe-2*Fe+Ee),kr=Pe+2*We*(Ue-Pe)+Rt*(rr-2*Ue+Pe),Fr=fr*oe+We*Ee,jr=fr*ce+We*Pe,ve=fr*Fe+We*Qe,pe=fr*Ue+We*rr,Se=90-Math.atan2(ze-Ze,ke-kr)*180/Math.PI;return{x:be,y:Oe,m:{x:ze,y:ke},n:{x:Ze,y:kr},start:{x:Fr,y:jr},end:{x:ve,y:pe},alpha:Se}},Pt=function(oe,ce,Ee){var Pe=at(oe),Fe=at(ce);if(!bt(Pe,Fe))return Ee?0:[];for(var Ue=Tt.apply(0,oe),Qe=Tt.apply(0,ce),rr=~~(Ue/8),We=~~(Qe/8),fr=[],fe=[],re={},Rt=Ee?0:[],ie=0;ie<rr+1;ie++){var be=ft.apply(0,oe.concat(ie/rr));fr.push({x:be.x,y:be.y,t:ie/rr})}for(var ie=0;ie<We+1;ie++){var be=ft.apply(0,ce.concat(ie/We));fe.push({x:be.x,y:be.y,t:ie/We})}for(var ie=0;ie<rr;ie++)for(var Oe=0;Oe<We;Oe++){var ze=fr[ie],ke=fr[ie+1],Ze=fe[Oe],kr=fe[Oe+1],Fr=Math.abs(ke.x-ze.x)<.001?"y":"x",jr=Math.abs(kr.x-Ze.x)<.001?"y":"x",ve=jt(ze.x,ze.y,ke.x,ke.y,Ze.x,Ze.y,kr.x,kr.y);if(ve){if(re[ve.x.toFixed(4)]===ve.y.toFixed(4))continue;re[ve.x.toFixed(4)]=ve.y.toFixed(4);var pe=ze.t+Math.abs((ve[Fr]-ze[Fr])/(ke[Fr]-ze[Fr]))*(ke.t-ze.t),Se=Ze.t+Math.abs((ve[jr]-Ze[jr])/(kr[jr]-Ze[jr]))*(kr.t-Ze.t);pe>=0&&pe<=1&&Se>=0&&Se<=1&&(Ee?Rt++:Rt.push({x:ve.x,y:ve.y,t1:pe,t2:Se}))}}return Rt},q=function(oe,ce,Ee){oe=Vt(oe),ce=Vt(ce);for(var Pe,Fe,Ue,Qe,rr,We,fr,fe,re,Rt,ie=Ee?0:[],be=0,Oe=oe.length;be<Oe;be++){var ze=oe[be];if(ze[0]==="M")Pe=rr=ze[1],Fe=We=ze[2];else{ze[0]==="C"?(re=[Pe,Fe].concat(ze.slice(1)),Pe=re[6],Fe=re[7]):(re=[Pe,Fe,Pe,Fe,rr,We,rr,We],Pe=rr,Fe=We);for(var ke=0,Ze=ce.length;ke<Ze;ke++){var kr=ce[ke];if(kr[0]==="M")Ue=fr=kr[1],Qe=fe=kr[2];else{kr[0]==="C"?(Rt=[Ue,Qe].concat(kr.slice(1)),Ue=Rt[6],Qe=Rt[7]):(Rt=[Ue,Qe,Ue,Qe,fr,fe,fr,fe],Ue=fr,Qe=fe);var Fr=Pt(re,Rt,Ee);if(Ee)ie+=Fr;else{for(var jr=0,ve=Fr.length;jr<ve;jr++)Fr[jr].segment1=be,Fr[jr].segment2=ke,Fr[jr].bez1=re,Fr[jr].bez2=Rt;ie=ie.concat(Fr)}}}}}return ie};function ut(oe,ce){return q(oe,ce)}var Et=/,?([a-z]),?/gi;function Nt(oe){return oe.join(",").replace(Et,"$1")}function ee(oe){return Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1])}function ge(oe,ce){return ee(oe)*ee(ce)?(oe[0]*ce[0]+oe[1]*ce[1])/(ee(oe)*ee(ce)):1}function De(oe,ce){return(oe[0]*ce[1]<oe[1]*ce[0]?-1:1)*Math.acos(ge(oe,ce))}function er(oe,ce){return oe[0]===ce[0]&&oe[1]===ce[1]}function Re(oe,ce){var Ee=ce[1],Pe=ce[2],Fe=(0,d.mod)((0,d.toRadian)(ce[3]),Math.PI*2),Ue=ce[4],Qe=ce[5],rr=oe[0],We=oe[1],fr=ce[6],fe=ce[7],re=Math.cos(Fe)*(rr-fr)/2+Math.sin(Fe)*(We-fe)/2,Rt=-1*Math.sin(Fe)*(rr-fr)/2+Math.cos(Fe)*(We-fe)/2,ie=re*re/(Ee*Ee)+Rt*Rt/(Pe*Pe);ie>1&&(Ee*=Math.sqrt(ie),Pe*=Math.sqrt(ie));var be=Ee*Ee*(Rt*Rt)+Pe*Pe*(re*re),Oe=be?Math.sqrt((Ee*Ee*(Pe*Pe)-be)/be):1;Ue===Qe&&(Oe*=-1),isNaN(Oe)&&(Oe=0);var ze=Pe?Oe*Ee*Rt/Pe:0,ke=Ee?Oe*-Pe*re/Ee:0,Ze=(rr+fr)/2+Math.cos(Fe)*ze-Math.sin(Fe)*ke,kr=(We+fe)/2+Math.sin(Fe)*ze+Math.cos(Fe)*ke,Fr=[(re-ze)/Ee,(Rt-ke)/Pe],jr=[(-1*re-ze)/Ee,(-1*Rt-ke)/Pe],ve=De([1,0],Fr),pe=De(Fr,jr);return ge(Fr,jr)<=-1&&(pe=Math.PI),ge(Fr,jr)>=1&&(pe=0),Qe===0&&pe>0&&(pe=pe-2*Math.PI),Qe===1&&pe<0&&(pe=pe+2*Math.PI),{cx:Ze,cy:kr,rx:er(oe,[fr,fe])?0:Ee,ry:er(oe,[fr,fe])?0:Pe,startAngle:ve,endAngle:ve+pe,xRotation:Fe,arcFlag:Ue,sweepFlag:Qe}}function Ke(oe,ce){return[ce[0]+(ce[0]-oe[0]),ce[1]+(ce[1]-oe[1])]}function hr(oe){oe=O(oe);for(var ce=[],Ee=null,Pe=null,Fe=null,Ue=0,Qe=oe.length,rr=0;rr<Qe;rr++){var We=oe[rr];Pe=oe[rr+1];var fr=We[0],fe={command:fr,prePoint:Ee,params:We,startTangent:null,endTangent:null};switch(fr){case"M":Fe=[We[1],We[2]],Ue=rr;break;case"A":var re=Re(Ee,We);fe.arcParams=re;break;default:break}if(fr==="Z")Ee=Fe,Pe=oe[Ue+1];else{var Rt=We.length;Ee=[We[Rt-2],We[Rt-1]]}Pe&&Pe[0]==="Z"&&(Pe=oe[Ue],ce[Ue]&&(ce[Ue].prePoint=Ee)),fe.currentPoint=Ee,ce[Ue]&&er(Ee,ce[Ue].currentPoint)&&(ce[Ue].prePoint=fe.prePoint);var ie=Pe?[Pe[Pe.length-2],Pe[Pe.length-1]]:null;fe.nextPoint=ie;var be=fe.prePoint;if(["L","H","V"].includes(fr))fe.startTangent=[be[0]-Ee[0],be[1]-Ee[1]],fe.endTangent=[Ee[0]-be[0],Ee[1]-be[1]];else if(fr==="Q"){var Oe=[We[1],We[2]];fe.startTangent=[be[0]-Oe[0],be[1]-Oe[1]],fe.endTangent=[Ee[0]-Oe[0],Ee[1]-Oe[1]]}else if(fr==="T"){var ze=ce[rr-1],Oe=Ke(ze.currentPoint,be);ze.command==="Q"?(fe.command="Q",fe.startTangent=[be[0]-Oe[0],be[1]-Oe[1]],fe.endTangent=[Ee[0]-Oe[0],Ee[1]-Oe[1]]):(fe.command="TL",fe.startTangent=[be[0]-Ee[0],be[1]-Ee[1]],fe.endTangent=[Ee[0]-be[0],Ee[1]-be[1]])}else if(fr==="C"){var ke=[We[1],We[2]],Ze=[We[3],We[4]];fe.startTangent=[be[0]-ke[0],be[1]-ke[1]],fe.endTangent=[Ee[0]-Ze[0],Ee[1]-Ze[1]],fe.startTangent[0]===0&&fe.startTangent[1]===0&&(fe.startTangent=[ke[0]-Ze[0],ke[1]-Ze[1]]),fe.endTangent[0]===0&&fe.endTangent[1]===0&&(fe.endTangent=[Ze[0]-ke[0],Ze[1]-ke[1]])}else if(fr==="S"){var ze=ce[rr-1],ke=Ke(ze.currentPoint,be),Ze=[We[1],We[2]];ze.command==="C"?(fe.command="C",fe.startTangent=[be[0]-ke[0],be[1]-ke[1]],fe.endTangent=[Ee[0]-Ze[0],Ee[1]-Ze[1]]):(fe.command="SQ",fe.startTangent=[be[0]-Ze[0],be[1]-Ze[1]],fe.endTangent=[Ee[0]-Ze[0],Ee[1]-Ze[1]])}else if(fr==="A"){var kr=.001,Fr=fe.arcParams||{},jr=Fr.cx,ve=jr===void 0?0:jr,pe=Fr.cy,Se=pe===void 0?0:pe,Xe=Fr.rx,je=Xe===void 0?0:Xe,tr=Fr.ry,pr=tr===void 0?0:tr,Ar=Fr.sweepFlag,Hr=Ar===void 0?0:Ar,Br=Fr.startAngle,Vr=Br===void 0?0:Br,Tn=Fr.endAngle,Pn=Tn===void 0?0:Tn;Hr===0&&(kr*=-1);var ni=je*Math.cos(Vr-kr)+ve,On=pr*Math.sin(Vr-kr)+Se;fe.startTangent=[ni-Fe[0],On-Fe[1]];var si=je*Math.cos(Vr+Pn+kr)+ve,zn=pr*Math.sin(Vr+Pn-kr)+Se;fe.endTangent=[be[0]-si,be[1]-zn]}ce.push(fe)}return ce}var Sr=function(oe,ce,Ee){return oe>=ce&&oe<=Ee};function Rr(oe,ce,Ee,Pe){var Fe=.001,Ue={x:Ee.x-oe.x,y:Ee.y-oe.y},Qe={x:ce.x-oe.x,y:ce.y-oe.y},rr={x:Pe.x-Ee.x,y:Pe.y-Ee.y},We=Qe.x*rr.y-Qe.y*rr.x,fr=We*We,fe=Qe.x*Qe.x+Qe.y*Qe.y,re=rr.x*rr.x+rr.y*rr.y,Rt=null;if(fr>Fe*fe*re){var ie=(Ue.x*rr.y-Ue.y*rr.x)/We,be=(Ue.x*Qe.y-Ue.y*Qe.x)/We;Sr(ie,0,1)&&Sr(be,0,1)&&(Rt={x:oe.x+ie*Qe.x,y:oe.y+ie*Qe.y})}return Rt}var vr=1e-6;function en(oe){return Math.abs(oe)<vr?0:oe<0?-1:1}function gn(oe,ce,Ee){return(Ee[0]-oe[0])*(ce[1]-oe[1])==(ce[0]-oe[0])*(Ee[1]-oe[1])&&Math.min(oe[0],ce[0])<=Ee[0]&&Ee[0]<=Math.max(oe[0],ce[0])&&Math.min(oe[1],ce[1])<=Ee[1]&&Ee[1]<=Math.max(oe[1],ce[1])}function hn(oe,ce,Ee){var Pe=!1,Fe=oe.length;if(Fe<=2)return!1;for(var Ue=0;Ue<Fe;Ue++){var Qe=oe[Ue],rr=oe[(Ue+1)%Fe];if(gn(Qe,rr,[ce,Ee]))return!0;en(Qe[1]-Ee)>0!=en(rr[1]-Ee)>0&&en(ce-(Ee-Qe[1])*(Qe[0]-rr[0])/(Qe[1]-rr[1])-Qe[0])<0&&(Pe=!Pe)}return Pe}function vn(oe){for(var ce=[],Ee=oe.length,Pe=0;Pe<Ee-1;Pe++){var Fe=oe[Pe],Ue=oe[Pe+1];ce.push({from:{x:Fe[0],y:Fe[1]},to:{x:Ue[0],y:Ue[1]}})}if(ce.length>1){var Qe=oe[0],rr=oe[Ee-1];ce.push({from:{x:rr[0],y:rr[1]},to:{x:Qe[0],y:Qe[1]}})}return ce}function Wn(oe,ce){var Ee=!1;return(0,d.each)(oe,function(Pe){if(Rr(Pe.from,Pe.to,ce.from,ce.to))return Ee=!0,!1}),Ee}function $r(oe){var ce=oe.map(function(Pe){return Pe[0]}),Ee=oe.map(function(Pe){return Pe[1]});return{minX:Math.min.apply(null,ce),maxX:Math.max.apply(null,ce),minY:Math.min.apply(null,Ee),maxY:Math.max.apply(null,Ee)}}function wi(oe,ce){return!(ce.minX>oe.maxX||ce.maxX<oe.minX||ce.minY>oe.maxY||ce.maxY<oe.minY)}function ci(oe,ce){if(oe.length<2||ce.length<2)return!1;var Ee=$r(oe),Pe=$r(ce);if(!wi(Ee,Pe))return!1;var Fe=!1;if((0,d.each)(ce,function(We){if(hn(oe,We[0],We[1]))return Fe=!0,!1}),Fe||((0,d.each)(oe,function(We){if(hn(ce,We[0],We[1]))return Fe=!0,!1}),Fe))return!0;var Ue=vn(oe),Qe=vn(ce),rr=!1;return(0,d.each)(Qe,function(We){if(Wn(Ue,We))return rr=!0,!1}),rr}},9868:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isSamePoint=void 0;var d=v(26169);function c(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])}function F(P,A){return c(P)*c(A)?(P[0]*A[0]+P[1]*A[1])/(c(P)*c(A)):1}function L(P,A){return(P[0]*A[1]<P[1]*A[0]?-1:1)*Math.acos(F(P,A))}function O(P,A){return P[0]===A[0]&&P[1]===A[1]}T.isSamePoint=O;function _(P,A){var x=A[1],C=A[2],w=(0,d.mod)((0,d.toRadian)(A[3]),Math.PI*2),M=A[4],S=A[5],I=P[0],B=P[1],N=A[6],G=A[7],W=Math.cos(w)*(I-N)/2+Math.sin(w)*(B-G)/2,$=-1*Math.sin(w)*(I-N)/2+Math.cos(w)*(B-G)/2,H=W*W/(x*x)+$*$/(C*C);H>1&&(x*=Math.sqrt(H),C*=Math.sqrt(H));var j=x*x*($*$)+C*C*(W*W),nt=j?Math.sqrt((x*x*(C*C)-j)/j):1;M===S&&(nt*=-1),isNaN(nt)&&(nt=0);var rt=C?nt*x*$/C:0,mt=x?nt*-C*W/x:0,Ft=(I+N)/2+Math.cos(w)*rt-Math.sin(w)*mt,Gt=(B+G)/2+Math.sin(w)*rt+Math.cos(w)*mt,gt=[(W-rt)/x,($-mt)/C],st=[(-1*W-rt)/x,(-1*$-mt)/C],Xt=L([1,0],gt),Q=L(gt,st);return F(gt,st)<=-1&&(Q=Math.PI),F(gt,st)>=1&&(Q=0),S===0&&Q>0&&(Q=Q-2*Math.PI),S===1&&Q<0&&(Q=Q+2*Math.PI),{cx:Ft,cy:Gt,rx:O(P,[N,G])?0:x,ry:O(P,[N,G])?0:C,startAngle:Xt,endAngle:Xt+Q,xRotation:w,arcFlag:M,sweepFlag:S}}T.default=_},29700:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(c,F,L){return c>=F&&c<=L};function d(c,F,L,O){var _=.001,P={x:L.x-c.x,y:L.y-c.y},A={x:F.x-c.x,y:F.y-c.y},x={x:O.x-L.x,y:O.y-L.y},C=A.x*x.y-A.y*x.x,w=C*C,M=A.x*A.x+A.y*A.y,S=x.x*x.x+x.y*x.y,I=null;if(w>_*M*S){var B=(P.x*x.y-P.y*x.x)/C,N=(P.x*A.y-P.y*A.x)/C;v(B,0,1)&&v(N,0,1)&&(I={x:c.x+B*A.x,y:c.y+B*A.y})}return I}T.default=d},65410:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(62604),c=v(29700),F=v(26169);function L(x){for(var C=[],w=x.length,M=0;M<w-1;M++){var S=x[M],I=x[M+1];C.push({from:{x:S[0],y:S[1]},to:{x:I[0],y:I[1]}})}if(C.length>1){var B=x[0],N=x[w-1];C.push({from:{x:N[0],y:N[1]},to:{x:B[0],y:B[1]}})}return C}function O(x,C){var w=!1;return(0,F.each)(x,function(M){if((0,c.default)(M.from,M.to,C.from,C.to))return w=!0,!1}),w}function _(x){var C=x.map(function(M){return M[0]}),w=x.map(function(M){return M[1]});return{minX:Math.min.apply(null,C),maxX:Math.max.apply(null,C),minY:Math.min.apply(null,w),maxY:Math.max.apply(null,w)}}function P(x,C){return!(C.minX>x.maxX||C.maxX<x.minX||C.minY>x.maxY||C.maxY<x.minY)}function A(x,C){if(x.length<2||C.length<2)return!1;var w=_(x),M=_(C);if(!P(w,M))return!1;var S=!1;if((0,F.each)(C,function(G){if((0,d.default)(x,G[0],G[1]))return S=!0,!1}),S||((0,F.each)(x,function(G){if((0,d.default)(C,G[0],G[1]))return S=!0,!1}),S))return!0;var I=L(x),B=L(C),N=!1;return(0,F.each)(B,function(G){if(O(I,G))return N=!0,!1}),N}T.default=A},78289:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,F=new RegExp("([a-z])["+c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c+"]*,?["+c+"]*)+)","ig"),L=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c+"]*,?["+c+"]*","ig");function O(_){if(!_)return null;if((0,d.isArray)(_))return _;var P={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},A=[];return String(_).replace(F,function(x,C,w){var M=[],S=C.toLowerCase();if(w.replace(L,function(I,B){B&&M.push(+B)}),S==="m"&&M.length>2&&(A.push([C].concat(M.splice(0,2))),S="l",C=C==="m"?"l":"L"),S==="o"&&M.length===1&&A.push([C,M[0]]),S==="r")A.push([C].concat(M));else for(;M.length>=P[S]&&(A.push([C].concat(M.splice(0,P[S]))),!!P[S]););return""}),A}T.default=O},69854:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(26169),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,F=/[^\s\,]+/ig;function L(O){var _=O||[];if((0,d.isArray)(_))return _;if((0,d.isString)(_))return _=_.match(c),(0,d.each)(_,function(P,A){if(P=P.match(F),P[0].length>1){var x=P[0].charAt(0);P.splice(1,0,P[0].substr(1)),P[0]=x}(0,d.each)(P,function(C,w){isNaN(C)||(P[w]=+C)}),_[A]=P}),_}T.default=L},54401:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(78289),F=/[a-z]/;function L(_,P){return[P[0]+(P[0]-_[0]),P[1]+(P[1]-_[1])]}function O(_){var P=(0,c.default)(_);if(!P||!P.length)return[["M",0,0]];for(var A=!1,x=0;x<P.length;x++){var C=P[x][0];if(F.test(C)||["V","H","T","S"].indexOf(C)>=0){A=!0;break}}if(!A)return P;var w=[],M=0,S=0,I=0,B=0,N=0,G,W,$=P[0];($[0]==="M"||$[0]==="m")&&(M=+$[1],S=+$[2],I=M,B=S,N++,w[0]=["M",M,S]);for(var x=N,H=P.length;x<H;x++){var j=P[x],nt=w[x-1],rt=[],C=j[0],mt=C.toUpperCase();if(C!==mt)switch(rt[0]=mt,mt){case"A":rt[1]=j[1],rt[2]=j[2],rt[3]=j[3],rt[4]=j[4],rt[5]=j[5],rt[6]=+j[6]+M,rt[7]=+j[7]+S;break;case"V":rt[1]=+j[1]+S;break;case"H":rt[1]=+j[1]+M;break;case"M":I=+j[1]+M,B=+j[2]+S,rt[1]=I,rt[2]=B;break;default:for(var Ft=1,Gt=j.length;Ft<Gt;Ft++)rt[Ft]=+j[Ft]+(Ft%2?M:S)}else rt=P[x];switch(mt){case"Z":M=+I,S=+B;break;case"H":M=rt[1],rt=["L",M,S];break;case"V":S=rt[1],rt=["L",M,S];break;case"T":M=rt[1],S=rt[2];var gt=L([nt[1],nt[2]],[nt[3],nt[4]]);rt=["Q",gt[0],gt[1],M,S];break;case"S":M=rt[rt.length-2],S=rt[rt.length-1];var st=nt.length,Xt=L([nt[st-4],nt[st-3]],[nt[st-2],nt[st-1]]);rt=["C",Xt[0],Xt[1],rt[1],rt[2],M,S];break;case"M":I=rt[rt.length-2],B=rt[rt.length-1];break;default:M=rt[rt.length-2],S=rt[rt.length-1]}w.push(rt)}return w}T.Z=O},36021:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(9868),c=v(9868),F=v(69854);function L(_,P){return[P[0]+(P[0]-_[0]),P[1]+(P[1]-_[1])]}function O(_){_=(0,F.default)(_);for(var P=[],A=null,x=null,C=null,w=0,M=_.length,S=0;S<M;S++){var I=_[S];x=_[S+1];var B=I[0],N={command:B,prePoint:A,params:I,startTangent:null,endTangent:null};switch(B){case"M":C=[I[1],I[2]],w=S;break;case"A":var G=(0,d.default)(A,I);N.arcParams=G;break;default:break}if(B==="Z")A=C,x=_[w+1];else{var W=I.length;A=[I[W-2],I[W-1]]}x&&x[0]==="Z"&&(x=_[w],P[w]&&(P[w].prePoint=A)),N.currentPoint=A,P[w]&&(0,c.isSamePoint)(A,P[w].currentPoint)&&(P[w].prePoint=N.prePoint);var $=x?[x[x.length-2],x[x.length-1]]:null;N.nextPoint=$;var H=N.prePoint;if(["L","H","V"].includes(B))N.startTangent=[H[0]-A[0],H[1]-A[1]],N.endTangent=[A[0]-H[0],A[1]-H[1]];else if(B==="Q"){var j=[I[1],I[2]];N.startTangent=[H[0]-j[0],H[1]-j[1]],N.endTangent=[A[0]-j[0],A[1]-j[1]]}else if(B==="T"){var nt=P[S-1],j=L(nt.currentPoint,H);nt.command==="Q"?(N.command="Q",N.startTangent=[H[0]-j[0],H[1]-j[1]],N.endTangent=[A[0]-j[0],A[1]-j[1]]):(N.command="TL",N.startTangent=[H[0]-A[0],H[1]-A[1]],N.endTangent=[A[0]-H[0],A[1]-H[1]])}else if(B==="C"){var rt=[I[1],I[2]],mt=[I[3],I[4]];N.startTangent=[H[0]-rt[0],H[1]-rt[1]],N.endTangent=[A[0]-mt[0],A[1]-mt[1]],N.startTangent[0]===0&&N.startTangent[1]===0&&(N.startTangent=[rt[0]-mt[0],rt[1]-mt[1]]),N.endTangent[0]===0&&N.endTangent[1]===0&&(N.endTangent=[mt[0]-rt[0],mt[1]-rt[1]])}else if(B==="S"){var nt=P[S-1],rt=L(nt.currentPoint,H),mt=[I[1],I[2]];nt.command==="C"?(N.command="C",N.startTangent=[H[0]-rt[0],H[1]-rt[1]],N.endTangent=[A[0]-mt[0],A[1]-mt[1]]):(N.command="SQ",N.startTangent=[H[0]-mt[0],H[1]-mt[1]],N.endTangent=[A[0]-mt[0],A[1]-mt[1]])}else if(B==="A"){var Ft=.001,Gt=N.arcParams||{},gt=Gt.cx,st=gt===void 0?0:gt,Xt=Gt.cy,Q=Xt===void 0?0:Xt,qt=Gt.rx,y=qt===void 0?0:qt,Yt=Gt.ry,K=Yt===void 0?0:Yt,ht=Gt.sweepFlag,J=ht===void 0?0:ht,At=Gt.startAngle,Vt=At===void 0?0:At,pt=Gt.endAngle,Lt=pt===void 0?0:pt;J===0&&(Ft*=-1);var Tt=y*Math.cos(Vt-Ft)+st,kt=K*Math.sin(Vt-Ft)+Q;N.startTangent=[Tt-C[0],kt-C[1]];var jt=y*Math.cos(Vt+Lt+Ft)+st,Wt=K*Math.sin(Vt+Lt-Ft)+Q;N.endTangent=[H[0]-jt,H[1]-Wt]}P.push(N)}return P}T.default=O},62604:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=1e-6;function d(L){return Math.abs(L)<v?0:L<0?-1:1}function c(L,O,_){return(_[0]-L[0])*(O[1]-L[1])==(O[0]-L[0])*(_[1]-L[1])&&Math.min(L[0],O[0])<=_[0]&&_[0]<=Math.max(L[0],O[0])&&Math.min(L[1],O[1])<=_[1]&&_[1]<=Math.max(L[1],O[1])}function F(L,O,_){var P=!1,A=L.length;if(A<=2)return!1;for(var x=0;x<A;x++){var C=L[x],w=L[(x+1)%A];if(c(C,w,[O,_]))return!0;d(C[1]-_)>0!=d(w[1]-_)>0&&d(O-(_-C[1])*(C[0]-w[0])/(C[1]-w[1])-C[0])<0&&(P=!P)}return P}T.default=F},15856:function(xt,T,v){"use strict";v.r(T),v.d(T,{Category:function(){return x},Identity:function(){return ft},Linear:function(){return st},Log:function(){return ht},Pow:function(){return At},Quantile:function(){return jt},Quantize:function(){return Tt},Scale:function(){return _},Time:function(){return pt},TimeCat:function(){return mt},getScale:function(){return zt},getTickMethod:function(){return F},registerScale:function(){return bt},registerTickMethod:function(){return L}});var d=v(26169),c={};function F(ve){return c[ve]}function L(ve,pe){c[ve]=pe}var O=function(){function ve(pe){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=pe,this.initCfg(),this.init()}return ve.prototype.translate=function(pe){return pe},ve.prototype.change=function(pe){(0,d.assign)(this.__cfg__,pe),this.init()},ve.prototype.clone=function(){return this.constructor(this.__cfg__)},ve.prototype.getTicks=function(){var pe=this;return(0,d.map)(this.ticks,function(Se,Xe){return(0,d.isObject)(Se)?Se:{text:pe.getText(Se,Xe),tickValue:Se,value:pe.scale(Se)}})},ve.prototype.getText=function(pe,Se){var Xe=this.formatter,je=Xe?Xe(pe,Se):pe;return(0,d.isNil)(je)||!(0,d.isFunction)(je.toString)?"":je.toString()},ve.prototype.getConfig=function(pe){return this.__cfg__[pe]},ve.prototype.init=function(){(0,d.assign)(this,this.__cfg__),this.setDomain(),(0,d.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},ve.prototype.initCfg=function(){},ve.prototype.setDomain=function(){},ve.prototype.calculateTicks=function(){var pe=this.tickMethod,Se=[];if((0,d.isString)(pe)){var Xe=F(pe);if(!Xe)throw new Error("There is no method to to calculate ticks!");Se=Xe(this)}else(0,d.isFunction)(pe)&&(Se=pe(this));return Se},ve.prototype.rangeMin=function(){return this.range[0]},ve.prototype.rangeMax=function(){return this.range[1]},ve.prototype.calcPercent=function(pe,Se,Xe){return(0,d.isNumber)(pe)?(pe-Se)/(Xe-Se):NaN},ve.prototype.calcValue=function(pe,Se,Xe){return Se+pe*(Xe-Se)},ve}(),_=O,P=v(21362),A=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="cat",Se.isCategory=!0,Se}return pe.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var Se=0;Se<this.values.length;Se++)this.translateIndexMap.set(this.values[Se],Se)}},pe.prototype.translate=function(Se){this.buildIndexMap();var Xe=this.translateIndexMap.get(Se);return Xe===void 0&&(Xe=(0,d.isNumber)(Se)?Se:NaN),Xe},pe.prototype.scale=function(Se){var Xe=this.translate(Se),je=this.calcPercent(Xe,this.min,this.max);return this.calcValue(je,this.rangeMin(),this.rangeMax())},pe.prototype.invert=function(Se){var Xe=this.max-this.min,je=this.calcPercent(Se,this.rangeMin(),this.rangeMax()),tr=Math.round(Xe*je)+this.min;return tr<this.min||tr>this.max?NaN:this.values[tr]},pe.prototype.getText=function(Se){for(var Xe=[],je=1;je<arguments.length;je++)Xe[je-1]=arguments[je];var tr=Se;return(0,d.isNumber)(Se)&&!this.values.includes(Se)&&(tr=this.values[tr]),ve.prototype.getText.apply(this,(0,P.__spreadArray)([tr],Xe,!1))},pe.prototype.initCfg=function(){this.tickMethod="cat"},pe.prototype.setDomain=function(){if((0,d.isNil)(this.getConfig("min"))&&(this.min=0),(0,d.isNil)(this.getConfig("max"))){var Se=this.values.length;this.max=Se>1?Se-1:Se}this.translateIndexMap&&(this.translateIndexMap=void 0)},pe}(_),x=A,C=v(17118);function w(ve){return function(pe,Se,Xe,je){for(var tr=(0,d.isNil)(Xe)?0:Xe,pr=(0,d.isNil)(je)?pe.length:je;tr<pr;){var Ar=tr+pr>>>1;ve(pe[Ar])>Se?pr=Ar:tr=Ar+1}return tr}}var M="format";function S(ve,pe){var Se=C[M]||C.default[M];return Se(ve,pe)}function I(ve){return(0,d.isString)(ve)&&(ve.indexOf("T")>0?ve=new Date(ve).getTime():ve=new Date(ve.replace(/-/gi,"/")).getTime()),(0,d.isDate)(ve)&&(ve=ve.getTime()),ve}var B=1e3,N=60*B,G=60*N,W=24*G,$=W*31,H=W*365,j=[["HH:mm:ss",B],["HH:mm:ss",B*10],["HH:mm:ss",B*30],["HH:mm",N],["HH:mm",N*10],["HH:mm",N*30],["HH",G],["HH",G*6],["HH",G*12],["YYYY-MM-DD",W],["YYYY-MM-DD",W*4],["YYYY-WW",W*7],["YYYY-MM",$],["YYYY-MM",$*4],["YYYY-MM",$*6],["YYYY",W*380]];function nt(ve,pe,Se){var Xe=(pe-ve)/Se,je=w(function(pr){return pr[1]})(j,Xe)-1,tr=j[je];return je<0?tr=j[0]:je>=j.length&&(tr=(0,d.last)(j)),tr}var rt=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="timeCat",Se}return pe.prototype.translate=function(Se){Se=I(Se);var Xe=this.values.indexOf(Se);return Xe===-1&&((0,d.isNumber)(Se)&&Se<this.values.length?Xe=Se:Xe=NaN),Xe},pe.prototype.getText=function(Se,Xe){var je=this.translate(Se);if(je>-1){var tr=this.values[je],pr=this.formatter;return tr=pr?pr(tr,Xe):S(tr,this.mask),tr}return Se},pe.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},pe.prototype.setDomain=function(){var Se=this.values;(0,d.each)(Se,function(Xe,je){Se[je]=I(Xe)}),Se.sort(function(Xe,je){return Xe-je}),ve.prototype.setDomain.call(this)},pe}(x),mt=rt,Ft=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.isContinuous=!0,Se}return pe.prototype.scale=function(Se){if((0,d.isNil)(Se))return NaN;var Xe=this.rangeMin(),je=this.rangeMax(),tr=this.max,pr=this.min;if(tr===pr)return Xe;var Ar=this.getScalePercent(Se);return Xe+Ar*(je-Xe)},pe.prototype.init=function(){ve.prototype.init.call(this);var Se=this.ticks,Xe=(0,d.head)(Se),je=(0,d.last)(Se);Xe<this.min&&(this.min=Xe),je>this.max&&(this.max=je),(0,d.isNil)(this.minLimit)||(this.min=Xe),(0,d.isNil)(this.maxLimit)||(this.max=je)},pe.prototype.setDomain=function(){var Se=(0,d.getRange)(this.values),Xe=Se.min,je=Se.max;(0,d.isNil)(this.min)&&(this.min=Xe),(0,d.isNil)(this.max)&&(this.max=je),this.min>this.max&&(this.min=Xe,this.max=je)},pe.prototype.calculateTicks=function(){var Se=this,Xe=ve.prototype.calculateTicks.call(this);return this.nice||(Xe=(0,d.filter)(Xe,function(je){return je>=Se.min&&je<=Se.max})),Xe},pe.prototype.getScalePercent=function(Se){var Xe=this.max,je=this.min;return(Se-je)/(Xe-je)},pe.prototype.getInvertPercent=function(Se){return(Se-this.rangeMin())/(this.rangeMax()-this.rangeMin())},pe}(_),Gt=Ft,gt=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="linear",Se.isLinear=!0,Se}return pe.prototype.invert=function(Se){var Xe=this.getInvertPercent(Se);return this.min+Xe*(this.max-this.min)},pe.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},pe}(Gt),st=gt;function Xt(ve,pe){var Se=Math.E,Xe;return pe>=0?Xe=Math.pow(Se,Math.log(pe)/ve):Xe=Math.pow(Se,Math.log(-pe)/ve)*-1,Xe}function Q(ve,pe){return ve===1?1:Math.log(pe)/Math.log(ve)}function qt(ve,pe,Se){(0,d.isNil)(Se)&&(Se=Math.max.apply(null,ve));var Xe=Se;return(0,d.each)(ve,function(je){je>0&&je<Xe&&(Xe=je)}),Xe===Se&&(Xe=Se/pe),Xe>1&&(Xe=1),Xe}function y(ve){var pe=ve.toString().split(/[eE]/),Se=(pe[0].split(".")[1]||"").length-+(pe[1]||0);return Se>0?Se:0}function Yt(ve,pe){var Se=y(ve),Xe=y(pe),je=Math.pow(10,Math.max(Se,Xe));return(ve*je+pe*je)/je}var K=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="log",Se}return pe.prototype.invert=function(Se){var Xe=this.base,je=Q(Xe,this.max),tr=this.rangeMin(),pr=this.rangeMax()-tr,Ar,Hr=this.positiveMin;if(Hr){if(Se===0)return 0;Ar=Q(Xe,Hr/Xe);var Br=1/(je-Ar)*pr;if(Se<Br)return Se/Br*Hr}else Ar=Q(Xe,this.min);var Vr=(Se-tr)/pr,Tn=Vr*(je-Ar)+Ar;return Math.pow(Xe,Tn)},pe.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},pe.prototype.setDomain=function(){ve.prototype.setDomain.call(this);var Se=this.min;if(Se<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");Se===0&&(this.positiveMin=qt(this.values,this.base,this.max))},pe.prototype.getScalePercent=function(Se){var Xe=this.max,je=this.min;if(Xe===je||Se<=0)return 0;var tr=this.base,pr=this.positiveMin;pr&&(je=pr*1/tr);var Ar;return Se<pr?Ar=Se/pr/(Q(tr,Xe)-Q(tr,je)):Ar=(Q(tr,Se)-Q(tr,je))/(Q(tr,Xe)-Q(tr,je)),Ar},pe}(Gt),ht=K,J=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="pow",Se}return pe.prototype.invert=function(Se){var Xe=this.getInvertPercent(Se),je=this.exponent,tr=Xt(je,this.max),pr=Xt(je,this.min),Ar=Xe*(tr-pr)+pr,Hr=Ar>=0?1:-1;return Math.pow(Ar,je)*Hr},pe.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},pe.prototype.getScalePercent=function(Se){var Xe=this.max,je=this.min;if(Xe===je)return 0;var tr=this.exponent,pr=(Xt(tr,Se)-Xt(tr,je))/(Xt(tr,Xe)-Xt(tr,je));return pr},pe}(Gt),At=J,Vt=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="time",Se}return pe.prototype.getText=function(Se,Xe){var je=this.translate(Se),tr=this.formatter;return tr?tr(je,Xe):S(je,this.mask)},pe.prototype.scale=function(Se){var Xe=Se;return((0,d.isString)(Xe)||(0,d.isDate)(Xe))&&(Xe=this.translate(Xe)),ve.prototype.scale.call(this,Xe)},pe.prototype.translate=function(Se){return I(Se)},pe.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},pe.prototype.setDomain=function(){var Se=this.values,Xe=this.getConfig("min"),je=this.getConfig("max");if((!(0,d.isNil)(Xe)||!(0,d.isNumber)(Xe))&&(this.min=this.translate(this.min)),(!(0,d.isNil)(je)||!(0,d.isNumber)(je))&&(this.max=this.translate(this.max)),Se&&Se.length){var tr=[],pr=Infinity,Ar=pr,Hr=0;(0,d.each)(Se,function(Br){var Vr=I(Br);if(isNaN(Vr))throw new TypeError("Invalid Time: "+Br+" in time scale!");pr>Vr?(Ar=pr,pr=Vr):Ar>Vr&&(Ar=Vr),Hr<Vr&&(Hr=Vr),tr.push(Vr)}),Se.length>1&&(this.minTickInterval=Ar-pr),(0,d.isNil)(Xe)&&(this.min=pr),(0,d.isNil)(je)&&(this.max=Hr)}},pe}(st),pt=Vt,Lt=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="quantize",Se}return pe.prototype.invert=function(Se){var Xe=this.ticks,je=Xe.length,tr=this.getInvertPercent(Se),pr=Math.floor(tr*(je-1));if(pr>=je-1)return(0,d.last)(Xe);if(pr<0)return(0,d.head)(Xe);var Ar=Xe[pr],Hr=Xe[pr+1],Br=pr/(je-1),Vr=(pr+1)/(je-1);return Ar+(tr-Br)/(Vr-Br)*(Hr-Ar)},pe.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},pe.prototype.calculateTicks=function(){var Se=ve.prototype.calculateTicks.call(this);return this.nice||((0,d.last)(Se)!==this.max&&Se.push(this.max),(0,d.head)(Se)!==this.min&&Se.unshift(this.min)),Se},pe.prototype.getScalePercent=function(Se){var Xe=this.ticks;if(Se<(0,d.head)(Xe))return 0;if(Se>(0,d.last)(Xe))return 1;var je=0;return(0,d.each)(Xe,function(tr,pr){if(Se>=tr)je=pr;else return!1}),je/(Xe.length-1)},pe}(Gt),Tt=Lt,kt=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="quantile",Se}return pe.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},pe}(Tt),jt=kt,Wt={};function zt(ve){return Wt[ve]}function bt(ve,pe){if(zt(ve))throw new Error("type '"+ve+"' existed.");Wt[ve]=pe}var at=function(ve){(0,P.__extends)(pe,ve);function pe(){var Se=ve!==null&&ve.apply(this,arguments)||this;return Se.type="identity",Se.isIdentity=!0,Se}return pe.prototype.calculateTicks=function(){return this.values},pe.prototype.scale=function(Se){return this.values[0]!==Se&&(0,d.isNumber)(Se)?Se:this.range[0]},pe.prototype.invert=function(Se){var Xe=this.range;return Se<Xe[0]||Se>Xe[1]?NaN:this.values[0]},pe}(_),ft=at;function Pt(ve){return Math.abs(ve)<1e-15?ve:parseFloat(ve.toFixed(15))}var q=[1,5,2,2.5,4,3],ut=null,Et=Number.EPSILON*100;function Nt(ve,pe){return(ve%pe+pe)%pe}function ee(ve){return Math.round(ve*1e12)/1e12}function ge(ve,pe,Se,Xe,je,tr){var pr=(0,d.size)(pe),Ar=(0,d.indexOf)(pe,ve),Hr=0,Br=Nt(Xe,tr);return(Br<Et||tr-Br<Et)&&Xe<=0&&je>=0&&(Hr=1),1-Ar/(pr-1)-Se+Hr}function De(ve,pe,Se){var Xe=(0,d.size)(pe),je=(0,d.indexOf)(pe,ve),tr=1;return 1-je/(Xe-1)-Se+tr}function er(ve,pe,Se,Xe,je,tr){var pr=(ve-1)/(tr-je),Ar=(pe-1)/(Math.max(tr,Xe)-Math.min(Se,je));return 2-Math.max(pr/Ar,Ar/pr)}function Re(ve,pe){return ve>=pe?2-(ve-1)/(pe-1):1}function Ke(ve,pe,Se,Xe){var je=pe-ve;return 1-.5*(Math.pow(pe-Xe,2)+Math.pow(ve-Se,2))/Math.pow(.1*je,2)}function hr(ve,pe,Se){var Xe=pe-ve;if(Se>Xe){var je=(Se-Xe)/2;return 1-Math.pow(je,2)/Math.pow(.1*Xe,2)}return 1}function Sr(){return 1}function Rr(ve,pe,Se,Xe,je,tr){Se===void 0&&(Se=5),Xe===void 0&&(Xe=!0),je===void 0&&(je=q),tr===void 0&&(tr=[.25,.2,.5,.05]);var pr=Se<0?0:Math.round(Se);if(Number.isNaN(ve)||Number.isNaN(pe)||typeof ve!="number"||typeof pe!="number"||!pr)return{min:0,max:0,ticks:[]};if(pe-ve<1e-15||pr===1)return{min:ve,max:pe,ticks:[ve]};for(var Ar={score:-2,lmin:0,lmax:0,lstep:0},Hr=1;Hr<Infinity;){for(var Br=0;Br<je.length;Br+=1){var Vr=je[Br],Tn=De(Vr,je,Hr);if(tr[0]*Tn+tr[1]+tr[2]+tr[3]<Ar.score){Hr=Infinity;break}for(var Pn=2;Pn<Infinity;){var ni=Re(Pn,pr);if(tr[0]*Tn+tr[1]+tr[2]*ni+tr[3]<Ar.score)break;for(var On=(pe-ve)/(Pn+1)/Hr/Vr,si=Math.ceil(Math.log10(On));si<Infinity;){var zn=Hr*Vr*Math.pow(10,si),Ti=hr(ve,pe,zn*(Pn-1));if(tr[0]*Tn+tr[1]*Ti+tr[2]*ni+tr[3]<Ar.score)break;var Hn=Math.floor(pe/zn)*Hr-(Pn-1)*Hr,Un=Math.ceil(ve/zn)*Hr;if(Hn<=Un)for(var Ri=Un-Hn,Jt=0;Jt<=Ri;Jt+=1){var Dt=Hn+Jt,yt=Dt*(zn/Hr),Ct=yt+zn*(Pn-1),ct=zn,vt=ge(Vr,je,Hr,yt,Ct,ct),ot=Ke(ve,pe,yt,Ct),St=er(Pn,pr,ve,pe,yt,Ct),Mt=Sr(),te=tr[0]*vt+tr[1]*ot+tr[2]*St+tr[3]*Mt;te>Ar.score&&(!Xe||yt<=ve&&Ct>=pe)&&(Ar.lmin=yt,Ar.lmax=Ct,Ar.lstep=ct,Ar.score=te)}si+=1}Pn+=1}}Hr+=1}var ne=Pt(Ar.lmax),de=Pt(Ar.lmin),He=Pt(Ar.lstep),Ge=Math.floor(ee((ne-de)/He))+1,Ie=new Array(Ge);Ie[0]=Pt(de);for(var Br=1;Br<Ge;Br++)Ie[Br]=Pt(Ie[Br-1]+He);return{min:Math.min(ve,(0,d.head)(Ie)),max:Math.max(pe,(0,d.last)(Ie)),ticks:Ie}}function vr(ve){var pe=ve.values,Se=ve.tickInterval,Xe=ve.tickCount,je=pe;if((0,d.isNumber)(Se))return(0,d.filter)(je,function(Br,Vr){return Vr%Se==0});var tr=ve.min,pr=ve.max;if((0,d.isNil)(tr)&&(tr=0),(0,d.isNil)(pr)&&(pr=pe.length-1),(0,d.isNumber)(Xe)&&Xe<pr-tr){var Ar=Rr(tr,pr,Xe,!1,[1,2,5,3,4,7,6,8,9]).ticks,Hr=(0,d.filter)(Ar,function(Br){return Br>=tr&&Br<=pr});return Hr.map(function(Br){return pe[Br]})}return pe.slice(tr,pr+1)}function en(ve){var pe=ve.min,Se=ve.max,Xe=ve.nice,je=ve.tickCount,tr=new $r;return tr.domain([pe,Se]),Xe&&tr.nice(je),tr.ticks(je)}var gn=5,hn=Math.sqrt(50),vn=Math.sqrt(10),Wn=Math.sqrt(2),$r=function(){function ve(){this._domain=[0,1]}return ve.prototype.domain=function(pe){return pe?(this._domain=Array.from(pe,Number),this):this._domain.slice()},ve.prototype.nice=function(pe){var Se,Xe;pe===void 0&&(pe=gn);var je=this._domain.slice(),tr=0,pr=this._domain.length-1,Ar=this._domain[tr],Hr=this._domain[pr],Br;return Hr<Ar&&(Se=[Hr,Ar],Ar=Se[0],Hr=Se[1],Xe=[pr,tr],tr=Xe[0],pr=Xe[1]),Br=ci(Ar,Hr,pe),Br>0?(Ar=Math.floor(Ar/Br)*Br,Hr=Math.ceil(Hr/Br)*Br,Br=ci(Ar,Hr,pe)):Br<0&&(Ar=Math.ceil(Ar*Br)/Br,Hr=Math.floor(Hr*Br)/Br,Br=ci(Ar,Hr,pe)),Br>0?(je[tr]=Math.floor(Ar/Br)*Br,je[pr]=Math.ceil(Hr/Br)*Br,this.domain(je)):Br<0&&(je[tr]=Math.ceil(Ar*Br)/Br,je[pr]=Math.floor(Hr*Br)/Br,this.domain(je)),this},ve.prototype.ticks=function(pe){return pe===void 0&&(pe=gn),wi(this._domain[0],this._domain[this._domain.length-1],pe||gn)},ve}();function wi(ve,pe,Se){var Xe,je=-1,tr,pr,Ar;if(pe=+pe,ve=+ve,Se=+Se,ve===pe&&Se>0)return[ve];if((Xe=pe<ve)&&(tr=ve,ve=pe,pe=tr),(Ar=ci(ve,pe,Se))===0||!isFinite(Ar))return[];if(Ar>0)for(ve=Math.ceil(ve/Ar),pe=Math.floor(pe/Ar),pr=new Array(tr=Math.ceil(pe-ve+1));++je<tr;)pr[je]=(ve+je)*Ar;else for(ve=Math.floor(ve*Ar),pe=Math.ceil(pe*Ar),pr=new Array(tr=Math.ceil(ve-pe+1));++je<tr;)pr[je]=(ve-je)/Ar;return Xe&&pr.reverse(),pr}function ci(ve,pe,Se){var Xe=(pe-ve)/Math.max(0,Se),je=Math.floor(Math.log(Xe)/Math.LN10),tr=Xe/Math.pow(10,je);return je>=0?(tr>=hn?10:tr>=vn?5:tr>=Wn?2:1)*Math.pow(10,je):-Math.pow(10,-je)/(tr>=hn?10:tr>=vn?5:tr>=Wn?2:1)}function oe(ve,pe,Se){var Xe;return Se==="ceil"?Xe=Math.ceil(ve/pe):Se==="floor"?Xe=Math.floor(ve/pe):Xe=Math.round(ve/pe),Xe*pe}function ce(ve,pe,Se){var Xe=oe(ve,Se,"floor"),je=oe(pe,Se,"ceil");Xe=(0,d.fixedBase)(Xe,Se),je=(0,d.fixedBase)(je,Se);for(var tr=[],pr=Xe;pr<=je;pr=pr+Se){var Ar=(0,d.fixedBase)(pr,Se);tr.push(Ar)}return{min:Xe,max:je,ticks:tr}}function Ee(ve,pe,Se){var Xe,je=ve.minLimit,tr=ve.maxLimit,pr=ve.min,Ar=ve.max,Hr=ve.tickCount,Br=Hr===void 0?5:Hr,Vr=(0,d.isNil)(je)?(0,d.isNil)(pe)?pr:pe:je,Tn=(0,d.isNil)(tr)?(0,d.isNil)(Se)?Ar:Se:tr;if(Vr>Tn&&(Xe=[Vr,Tn],Tn=Xe[0],Vr=Xe[1]),Br<=2)return[Vr,Tn];for(var Pn=(Tn-Vr)/(Br-1),ni=[],On=0;On<Br;On++)ni.push(Vr+Pn*On);return ni}function Pe(ve){var pe=ve.min,Se=ve.max,Xe=ve.tickInterval,je=ve.minLimit,tr=ve.maxLimit,pr=en(ve);return!(0,d.isNil)(je)||!(0,d.isNil)(tr)?Ee(ve,(0,d.head)(pr),(0,d.last)(pr)):Xe?ce(pe,Se,Xe).ticks:pr}function Fe(ve){var pe=ve.min,Se=ve.max,Xe=ve.tickCount,je=ve.nice,tr=ve.tickInterval,pr=ve.minLimit,Ar=ve.maxLimit,Hr=Rr(pe,Se,Xe,je).ticks;return!(0,d.isNil)(pr)||!(0,d.isNil)(Ar)?Ee(ve,(0,d.head)(Hr),(0,d.last)(Hr)):tr?ce(pe,Se,tr).ticks:Hr}function Ue(ve){var pe=ve.base,Se=ve.tickCount,Xe=ve.min,je=ve.max,tr=ve.values,pr,Ar=Q(pe,je);if(Xe>0)pr=Math.floor(Q(pe,Xe));else{var Hr=qt(tr,pe,je);pr=Math.floor(Q(pe,Hr))}for(var Br=Ar-pr,Vr=Math.ceil(Br/Se),Tn=[],Pn=pr;Pn<Ar+Vr;Pn=Pn+Vr)Tn.push(Math.pow(pe,Pn));return Xe<=0&&Tn.unshift(0),Tn}function Qe(ve,pe,Se){if(Se===void 0&&(Se=5),ve===pe)return{max:pe,min:ve,ticks:[ve]};var Xe=Se<0?0:Math.round(Se);if(Xe===0)return{max:pe,min:ve,ticks:[]};var je=1.5,tr=.5+1.5*je,pr=pe-ve,Ar=pr/Xe,Hr=Math.pow(10,Math.floor(Math.log10(Ar))),Br=Hr;2*Hr-Ar<je*(Ar-Br)&&(Br=2*Hr,5*Hr-Ar<tr*(Ar-Br)&&(Br=5*Hr,10*Hr-Ar<je*(Ar-Br)&&(Br=10*Hr)));for(var Vr=Math.ceil(pe/Br),Tn=Math.floor(ve/Br),Pn=Math.max(Vr*Br,pe),ni=Math.min(Tn*Br,ve),On=Math.floor((Pn-ni)/Br)+1,si=new Array(On),zn=0;zn<On;zn++)si[zn]=Pt(ni+zn*Br);return{min:ni,max:Pn,ticks:si}}function rr(ve){var pe=ve.exponent,Se=ve.tickCount,Xe=Math.ceil(Xt(pe,ve.max)),je=Math.floor(Xt(pe,ve.min)),tr=Qe(je,Xe,Se).ticks;return tr.map(function(pr){var Ar=pr>=0?1:-1;return Math.pow(pr,pe)*Ar})}function We(ve,pe){var Se=ve.length*pe;return pe===1?ve[ve.length-1]:pe===0?ve[0]:Se%1!=0?ve[Math.ceil(Se)-1]:ve.length%2==0?(ve[Se-1]+ve[Se])/2:ve[Se]}function fr(ve){var pe=ve.tickCount,Se=ve.values;if(!Se||!Se.length)return[];for(var Xe=Se.slice().sort(function(Ar,Hr){return Ar-Hr}),je=[],tr=0;tr<pe;tr++){var pr=tr/(pe-1);je.push(We(Xe,pr))}return je}function fe(ve){var pe=ve.min,Se=ve.max,Xe=ve.tickCount,je=ve.tickInterval,tr=ve.minLimit,pr=ve.maxLimit,Ar=Qe(pe,Se,Xe).ticks;return!(0,d.isNil)(tr)||!(0,d.isNil)(pr)?Ee(ve,(0,d.head)(Ar),(0,d.last)(Ar)):je?ce(pe,Se,je).ticks:Ar}function re(ve){var pe=ve.min,Se=ve.max,Xe=ve.minTickInterval,je=ve.tickInterval,tr=ve.tickCount;if(je)tr=Math.ceil((Se-pe)/je);else{je=nt(pe,Se,tr)[1];var pr=(Se-pe)/je,Ar=pr/tr;Ar>1&&(je=je*Math.ceil(Ar)),Xe&&je<Xe&&(je=Xe)}for(var Hr=[],Br=pe;Br<Se+je;Br+=je)Hr.push(Br);return Hr}function Rt(ve){var pe=vr(ve),Se=(0,d.last)(ve.values);return Se!==(0,d.last)(pe)&&pe.push(Se),pe}function ie(ve){return new Date(ve).getFullYear()}function be(ve){return new Date(ve,0,1).getTime()}function Oe(ve){return new Date(ve).getMonth()}function ze(ve,pe){var Se=ie(ve),Xe=ie(pe),je=Oe(ve),tr=Oe(pe);return(Xe-Se)*12+(tr-je)%12}function ke(ve,pe){return new Date(ve,pe,1).getTime()}function Ze(ve,pe){return Math.ceil((pe-ve)/W)}function kr(ve,pe){return Math.ceil((pe-ve)/G)}function Fr(ve,pe){return Math.ceil((pe-ve)/(60*1e3))}function jr(ve){var pe=ve.min,Se=ve.max,Xe=ve.minTickInterval,je=ve.tickCount,tr=ve.tickInterval,pr=[];tr||(tr=(Se-pe)/je,Xe&&tr<Xe&&(tr=Xe));var Ar=ie(pe);if(tr>H)for(var Hr=ie(Se),Br=Math.ceil(tr/H),Vr=Ar;Vr<=Hr+Br;Vr=Vr+Br)pr.push(be(Vr));else if(tr>$)for(var Tn=Math.ceil(tr/$),Pn=Oe(pe),ni=ze(pe,Se),Vr=0;Vr<=ni+Tn;Vr=Vr+Tn)pr.push(ke(Ar,Vr+Pn));else if(tr>W)for(var On=new Date(pe),si=On.getFullYear(),zn=On.getMonth(),Ti=On.getDate(),Hn=Math.ceil(tr/W),Un=Ze(pe,Se),Vr=0;Vr<Un+Hn;Vr=Vr+Hn)pr.push(new Date(si,zn,Ti+Vr).getTime());else if(tr>G)for(var On=new Date(pe),si=On.getFullYear(),zn=On.getMonth(),Hn=On.getDate(),Ri=On.getHours(),Jt=Math.ceil(tr/G),Dt=kr(pe,Se),Vr=0;Vr<=Dt+Jt;Vr=Vr+Jt)pr.push(new Date(si,zn,Hn,Ri+Vr).getTime());else if(tr>N)for(var yt=Fr(pe,Se),Ct=Math.ceil(tr/N),Vr=0;Vr<=yt+Ct;Vr=Vr+Ct)pr.push(pe+Vr*N);else{var ct=tr;ct<B&&(ct=B);for(var vt=Math.floor(pe/B)*B,ot=Math.ceil((Se-pe)/B),St=Math.ceil(ct/B),Vr=0;Vr<ot+St;Vr=Vr+St)pr.push(vt+Vr*B)}return pr.length>=512&&console.warn("Notice: current ticks length("+pr.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+tr+") is too small, increase the value to solve the problem!"),pr}L("cat",vr),L("time-cat",Rt),L("wilkinson-extended",Fe),L("r-pretty",fe),L("time",re),L("time-pretty",jr),L("log",Ue),L("pow",rr),L("quantile",fr),L("d3-linear",Pe),bt("cat",x),bt("category",x),bt("identity",ft),bt("linear",st),bt("log",ht),bt("pow",At),bt("time",pt),bt("timeCat",mt),bt("quantize",Tt),bt("quantile",jt)},26169:function(xt,T,v){"use strict";v.r(T),v.d(T,{Cache:function(){return Nn},assign:function(){return ea},augment:function(){return Ca},clamp:function(){return ie},clearAnimationFrame:function(){return ta},clone:function(){return fo},contains:function(){return L},debounce:function(){return co},deepMix:function(){return po},difference:function(){return A},each:function(){return W},endsWith:function(){return gn},every:function(){return vn},extend:function(){return Vo},filter:function(){return _},find:function(){return st},findIndex:function(){return Q},firstValue:function(){return y},fixedBase:function(){return Oe},flatten:function(){return K},flattenDeep:function(){return J},forIn:function(){return Jt},get:function(){return X},getEllipsisText:function(){return En},getRange:function(){return Lt},getType:function(){return Lr},getWrapBehavior:function(){return Fe},group:function(){return Ee},groupBy:function(){return oe},groupToMap:function(){return ce},has:function(){return Dt},hasKey:function(){return yt},hasValue:function(){return vt},head:function(){return hr},identity:function(){return sr},includes:function(){return L},indexOf:function(){return To},isArguments:function(){return Dr},isArray:function(){return B},isArrayLike:function(){return c},isBoolean:function(){return Dn},isDate:function(){return Ln},isDecimal:function(){return kr},isElement:function(){return va},isEmpty:function(){return da},isEqual:function(){return zi},isEqualWith:function(){return Lo},isError:function(){return Jn},isEven:function(){return jr},isFinite:function(){return Ii},isFunction:function(){return M},isInteger:function(){return pe},isMatch:function(){return nt},isNegative:function(){return Xe},isNil:function(){return I},isNull:function(){return qi},isNumber:function(){return ke},isNumberEqual:function(){return tr},isObject:function(){return N},isObjectLike:function(){return mt},isOdd:function(){return Ar},isPlainObject:function(){return Gt},isPositive:function(){return Br},isPrototype:function(){return Zn},isRegExp:function(){return La},isString:function(){return Nt},isType:function(){return w},isUndefined:function(){return ji},keys:function(){return H},last:function(){return Sr},lowerCase:function(){return Mt},lowerFirst:function(){return ne},map:function(){return Zo},mapValues:function(){return wt},max:function(){return At},maxBy:function(){return Vr},measureTextWidth:function(){return Qr},memoize:function(){return vo},min:function(){return Vt},minBy:function(){return Tn},mix:function(){return ea},mod:function(){return ni},noop:function(){return Je},number2color:function(){return fr},omit:function(){return Qt},parseRadius:function(){return re},pick:function(){return Ot},pull:function(){return zt},pullAt:function(){return ft},reduce:function(){return q},remove:function(){return Et},requestAnimationFrame:function(){return _a},set:function(){return et},size:function(){return gr},some:function(){return $r},sortBy:function(){return ge},startsWith:function(){return vr},substitute:function(){return He},throttle:function(){return se},toArray:function(){return Me},toDegree:function(){return zn},toInteger:function(){return Ti},toRadian:function(){return Ri},toString:function(){return ot},union:function(){return Re},uniq:function(){return De},uniqueId:function(){return Ne},upperCase:function(){return Ie},upperFirst:function(){return xr},values:function(){return ct},valuesOfKey:function(){return Ke},wrapBehavior:function(){return Qe}});var d=function(Zt){return Zt!==null&&typeof Zt!="function"&&isFinite(Zt.length)},c=d,F=function(Zt,we){return c(Zt)?Zt.indexOf(we)>-1:!1},L=F,O=function(Zt,we){if(!c(Zt))return Zt;for(var _e=[],Ve=0;Ve<Zt.length;Ve++){var lr=Zt[Ve];we(lr,Ve)&&_e.push(lr)}return _e},_=O,P=function(Zt,we){return we===void 0&&(we=[]),_(Zt,function(_e){return!L(we,_e)})},A=P,x={}.toString,C=function(Zt,we){return x.call(Zt)==="[object "+we+"]"},w=C,M=function(Zt){return w(Zt,"Function")},S=function(Zt){return Zt==null},I=S,B=function(Zt){return Array.isArray?Array.isArray(Zt):w(Zt,"Array")},N=function(Zt){var we=typeof Zt;return Zt!==null&&we==="object"||we==="function"};function G(Zt,we){if(!!Zt){var _e;if(B(Zt))for(var Ve=0,lr=Zt.length;Ve<lr&&(_e=we(Zt[Ve],Ve),_e!==!1);Ve++);else if(N(Zt)){for(var Or in Zt)if(Zt.hasOwnProperty(Or)&&(_e=we(Zt[Or],Or),_e===!1))break}}}var W=G,$=Object.keys?function(Zt){return Object.keys(Zt)}:function(Zt){var we=[];return W(Zt,function(_e,Ve){M(Zt)&&Ve==="prototype"||we.push(Ve)}),we},H=$;function j(Zt,we){var _e=H(we),Ve=_e.length;if(I(Zt))return!Ve;for(var lr=0;lr<Ve;lr+=1){var Or=_e[lr];if(we[Or]!==Zt[Or]||!(Or in Zt))return!1}return!0}var nt=j,rt=function(Zt){return typeof Zt=="object"&&Zt!==null},mt=rt,Ft=function(Zt){if(!mt(Zt)||!w(Zt,"Object"))return!1;if(Object.getPrototypeOf(Zt)===null)return!0;for(var we=Zt;Object.getPrototypeOf(we)!==null;)we=Object.getPrototypeOf(we);return Object.getPrototypeOf(Zt)===we},Gt=Ft;function gt(Zt,we){if(!B(Zt))return null;var _e;if(M(we)&&(_e=we),Gt(we)&&(_e=function(lr){return nt(lr,we)}),_e){for(var Ve=0;Ve<Zt.length;Ve+=1)if(_e(Zt[Ve]))return Zt[Ve]}return null}var st=gt;function Xt(Zt,we,_e){_e===void 0&&(_e=0);for(var Ve=_e;Ve<Zt.length;Ve++)if(we(Zt[Ve],Ve))return Ve;return-1}var Q=Xt,qt=function(Zt,we){for(var _e=null,Ve=0;Ve<Zt.length;Ve++){var lr=Zt[Ve],Or=lr[we];if(!I(Or)){B(Or)?_e=Or[0]:_e=Or;break}}return _e},y=qt,Yt=function(Zt){if(!B(Zt))return[];for(var we=[],_e=0;_e<Zt.length;_e++)we=we.concat(Zt[_e]);return we},K=Yt,ht=function(Zt,we){if(we===void 0&&(we=[]),!B(Zt))we.push(Zt);else for(var _e=0;_e<Zt.length;_e+=1)ht(Zt[_e],we);return we},J=ht,At=function(Zt){if(!!B(Zt))return Zt.reduce(function(we,_e){return Math.max(we,_e)},Zt[0])},Vt=function(Zt){if(!!B(Zt))return Zt.reduce(function(we,_e){return Math.min(we,_e)},Zt[0])},pt=function(Zt){var we=Zt.filter(function(on){return!isNaN(on)});if(!we.length)return{min:0,max:0};if(B(Zt[0])){for(var _e=[],Ve=0;Ve<Zt.length;Ve++)_e=_e.concat(Zt[Ve]);we=_e}var lr=At(we),Or=Vt(we);return{min:Or,max:lr}},Lt=pt,Tt=Array.prototype,kt=Tt.splice,jt=Tt.indexOf,Wt=function(Zt){for(var we=[],_e=1;_e<arguments.length;_e++)we[_e-1]=arguments[_e];for(var Ve=0;Ve<we.length;Ve++)for(var lr=we[Ve],Or=-1;(Or=jt.call(Zt,lr))>-1;)kt.call(Zt,Or,1);return Zt},zt=Wt,bt=Array.prototype.splice,at=function(we,_e){if(!c(we))return[];for(var Ve=we?_e.length:0,lr=Ve-1;Ve--;){var Or=void 0,on=_e[Ve];(Ve===lr||on!==Or)&&(Or=on,bt.call(we,on,1))}return we},ft=at,Pt=function(Zt,we,_e){if(!B(Zt)&&!Gt(Zt))return Zt;var Ve=_e;return W(Zt,function(lr,Or){Ve=we(Ve,lr,Or)}),Ve},q=Pt,ut=function(Zt,we){var _e=[];if(!c(Zt))return _e;for(var Ve=-1,lr=[],Or=Zt.length;++Ve<Or;){var on=Zt[Ve];we(on,Ve,Zt)&&(_e.push(on),lr.push(Ve))}return ft(Zt,lr),_e},Et=ut,Nt=function(Zt){return w(Zt,"String")};function ee(Zt,we){var _e;if(M(we))_e=function(lr,Or){return we(lr)-we(Or)};else{var Ve=[];Nt(we)?Ve.push(we):B(we)&&(Ve=we),_e=function(lr,Or){for(var on=0;on<Ve.length;on+=1){var Cn=Ve[on];if(lr[Cn]>Or[Cn])return 1;if(lr[Cn]<Or[Cn])return-1}return 0}}return Zt.sort(_e),Zt}var ge=ee;function De(Zt,we){we===void 0&&(we=new Map);var _e=[];if(Array.isArray(Zt))for(var Ve=0,lr=Zt.length;Ve<lr;Ve++){var Or=Zt[Ve];we.has(Or)||(_e.push(Or),we.set(Or,!0))}return _e}var er=function(){for(var Zt=[],we=0;we<arguments.length;we++)Zt[we]=arguments[we];return De([].concat.apply([],Zt))},Re=er,Ke=function(Zt,we){for(var _e=[],Ve={},lr=0;lr<Zt.length;lr++){var Or=Zt[lr],on=Or[we];if(!I(on)){B(on)||(on=[on]);for(var Cn=0;Cn<on.length;Cn++){var Li=on[Cn];Ve[Li]||(_e.push(Li),Ve[Li]=!0)}}}return _e};function hr(Zt){if(c(Zt))return Zt[0]}function Sr(Zt){if(c(Zt)){var we=Zt;return we[we.length-1]}}function Rr(Zt,we){return B(Zt)||Nt(Zt)?Zt[0]===we:!1}var vr=Rr;function en(Zt,we){return B(Zt)||Nt(Zt)?Zt[Zt.length-1]===we:!1}var gn=en,hn=function(Zt,we){for(var _e=0;_e<Zt.length;_e++)if(!we(Zt[_e],_e))return!1;return!0},vn=hn,Wn=function(Zt,we){for(var _e=0;_e<Zt.length;_e++)if(we(Zt[_e],_e))return!0;return!1},$r=Wn,wi=Object.prototype.hasOwnProperty;function ci(Zt,we){if(!we||!B(Zt))return{};for(var _e={},Ve=M(we)?we:function(Cn){return Cn[we]},lr,Or=0;Or<Zt.length;Or++){var on=Zt[Or];lr=Ve(on),wi.call(_e,lr)?_e[lr].push(on):_e[lr]=[on]}return _e}var oe=ci;function ce(Zt,we){if(!we)return{0:Zt};if(!M(we)){var _e=B(we)?we:we.replace(/\s+/g,"").split("*");we=function(Ve){for(var lr="_",Or=0,on=_e.length;Or<on;Or++)lr+=Ve[_e[Or]]&&Ve[_e[Or]].toString();return lr}}return oe(Zt,we)}var Ee=function(Zt,we){if(!we)return[Zt];var _e=ce(Zt,we),Ve=[];for(var lr in _e)Ve.push(_e[lr]);return Ve};function Pe(Zt,we){return Zt["_wrap_"+we]}var Fe=Pe;function Ue(Zt,we){if(Zt["_wrap_"+we])return Zt["_wrap_"+we];var _e=function(Ve){Zt[we](Ve)};return Zt["_wrap_"+we]=_e,_e}var Qe=Ue,rr={};function We(Zt){var we=rr[Zt];if(!we){for(var _e=Zt.toString(16),Ve=_e.length;Ve<6;Ve++)_e="0"+_e;we="#"+_e,rr[Zt]=we}return we}var fr=We;function fe(Zt){var we=0,_e=0,Ve=0,lr=0;return B(Zt)?Zt.length===1?we=_e=Ve=lr=Zt[0]:Zt.length===2?(we=Ve=Zt[0],_e=lr=Zt[1]):Zt.length===3?(we=Zt[0],_e=lr=Zt[1],Ve=Zt[2]):(we=Zt[0],_e=Zt[1],Ve=Zt[2],lr=Zt[3]):we=_e=Ve=lr=Zt,{r1:we,r2:_e,r3:Ve,r4:lr}}var re=fe,Rt=function(Zt,we,_e){return Zt<we?we:Zt>_e?_e:Zt},ie=Rt,be=function(Zt,we){var _e=we.toString(),Ve=_e.indexOf(".");if(Ve===-1)return Math.round(Zt);var lr=_e.substr(Ve+1).length;return lr>20&&(lr=20),parseFloat(Zt.toFixed(lr))},Oe=be,ze=function(Zt){return w(Zt,"Number")},ke=ze,Ze=function(Zt){return ke(Zt)&&Zt%1!=0},kr=Ze,Fr=function(Zt){return ke(Zt)&&Zt%2==0},jr=Fr,ve=Number.isInteger?Number.isInteger:function(Zt){return ke(Zt)&&Zt%1==0},pe=ve,Se=function(Zt){return ke(Zt)&&Zt<0},Xe=Se,je=1e-5;function tr(Zt,we,_e){return _e===void 0&&(_e=je),Math.abs(Zt-we)<_e}var pr=function(Zt){return ke(Zt)&&Zt%2!=0},Ar=pr,Hr=function(Zt){return ke(Zt)&&Zt>0},Br=Hr,Vr=function(Zt,we){if(!!B(Zt)){for(var _e,Ve=-Infinity,lr=0;lr<Zt.length;lr++){var Or=Zt[lr],on=M(we)?we(Or):Or[we];on>Ve&&(_e=Or,Ve=on)}return _e}},Tn=function(Zt,we){if(!!B(Zt)){for(var _e,Ve=Infinity,lr=0;lr<Zt.length;lr++){var Or=Zt[lr],on=M(we)?we(Or):Or[we];on<Ve&&(_e=Or,Ve=on)}return _e}},Pn=function(Zt,we){return(Zt%we+we)%we},ni=Pn,On=180/Math.PI,si=function(Zt){return On*Zt},zn=si,Ti=parseInt,Hn=Math.PI/180,Un=function(Zt){return Hn*Zt},Ri=Un,Jt=W,Dt=function(Zt,we){return Zt.hasOwnProperty(we)},yt=Dt,Ct=Object.values?function(Zt){return Object.values(Zt)}:function(Zt){var we=[];return W(Zt,function(_e,Ve){M(Zt)&&Ve==="prototype"||we.push(_e)}),we},ct=Ct,vt=function(Zt,we){return L(ct(Zt),we)},ot=function(Zt){return I(Zt)?"":Zt.toString()},St=function(Zt){return ot(Zt).toLowerCase()},Mt=St,te=function(Zt){var we=ot(Zt);return we.charAt(0).toLowerCase()+we.substring(1)},ne=te;function de(Zt,we){return!Zt||!we?Zt:Zt.replace(/\\?\{([^{}]+)\}/g,function(_e,Ve){return _e.charAt(0)==="\\"?_e.slice(1):we[Ve]===void 0?"":we[Ve]})}var He=de,Ge=function(Zt){return ot(Zt).toUpperCase()},Ie=Ge,qe=function(Zt){var we=ot(Zt);return we.charAt(0).toUpperCase()+we.substring(1)},xr=qe,Pr={}.toString,Wr=function(Zt){return Pr.call(Zt).replace(/^\[object /,"").replace(/]$/,"")},Lr=Wr,br=function(Zt){return w(Zt,"Arguments")},Dr=br,Sn=function(Zt){return w(Zt,"Boolean")},Dn=Sn,Yn=function(Zt){return w(Zt,"Date")},Ln=Yn,_n=function(Zt){return w(Zt,"Error")},Jn=_n;function Ii(Zt){return ke(Zt)&&isFinite(Zt)}var Qn=function(Zt){return Zt===null},qi=Qn,dn=Object.prototype,Si=function(Zt){var we=Zt&&Zt.constructor,_e=typeof we=="function"&&we.prototype||dn;return Zt===_e},Zn=Si,ya=function(Zt){return w(Zt,"RegExp")},La=ya,Va=function(Zt){return Zt===void 0},ji=Va,ma=function(Zt){return Zt instanceof Element||Zt instanceof HTMLDocument},va=ma;function _a(Zt){var we=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(_e){return setTimeout(_e,16)};return we(Zt)}function ta(Zt){var we=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;we(Zt)}function sa(Zt,we){for(var _e in we)we.hasOwnProperty(_e)&&_e!=="constructor"&&we[_e]!==void 0&&(Zt[_e]=we[_e])}function ea(Zt,we,_e,Ve){return we&&sa(Zt,we),_e&&sa(Zt,_e),Ve&&sa(Zt,Ve),Zt}var xa=function(){for(var Zt=[],we=0;we<arguments.length;we++)Zt[we]=arguments[we];for(var _e=Zt[0],Ve=1;Ve<Zt.length;Ve++){var lr=Zt[Ve];M(lr)&&(lr=lr.prototype),ea(_e.prototype,lr)}},Ca=xa,ba=function(Zt){if(typeof Zt!="object"||Zt===null)return Zt;var we;if(B(Zt)){we=[];for(var _e=0,Ve=Zt.length;_e<Ve;_e++)typeof Zt[_e]=="object"&&Zt[_e]!=null?we[_e]=ba(Zt[_e]):we[_e]=Zt[_e]}else{we={};for(var lr in Zt)typeof Zt[lr]=="object"&&Zt[lr]!=null?we[lr]=ba(Zt[lr]):we[lr]=Zt[lr]}return we},fo=ba;function Xo(Zt,we,_e){var Ve;return function(){var lr=this,Or=arguments,on=function(){Ve=null,_e||Zt.apply(lr,Or)},Cn=_e&&!Ve;clearTimeout(Ve),Ve=setTimeout(on,we),Cn&&Zt.apply(lr,Or)}}var co=Xo,vo=function(Zt,we){if(!M(Zt))throw new TypeError("Expected a function");var _e=function(){for(var Ve=[],lr=0;lr<arguments.length;lr++)Ve[lr]=arguments[lr];var Or=we?we.apply(this,Ve):Ve[0],on=_e.cache;if(on.has(Or))return on.get(Or);var Cn=Zt.apply(this,Ve);return on.set(Or,Cn),Cn};return _e.cache=new Map,_e},Wa=5;function wa(Zt,we,_e,Ve){_e=_e||0,Ve=Ve||Wa;for(var lr in we)if(we.hasOwnProperty(lr)){var Or=we[lr];Or!==null&&Gt(Or)?(Gt(Zt[lr])||(Zt[lr]={}),_e<Ve?wa(Zt[lr],Or,_e+1,Ve):Zt[lr]=we[lr]):B(Or)?(Zt[lr]=[],Zt[lr]=Zt[lr].concat(Or)):Or!==void 0&&(Zt[lr]=Or)}}var cs=function(Zt){for(var we=[],_e=1;_e<arguments.length;_e++)we[_e-1]=arguments[_e];for(var Ve=0;Ve<we.length;Ve+=1)wa(Zt,we[Ve]);return Zt},po=cs,Ho=function(Zt,we,_e,Ve){M(we)||(_e=we,we=Zt,Zt=function(){});var lr=Object.create?function(on,Cn){return Object.create(on,{constructor:{value:Cn}})}:function(on,Cn){function Li(){}Li.prototype=on;var ra=new Li;return ra.constructor=Cn,ra},Or=lr(we.prototype,Zt);return Zt.prototype=ea(Or,Zt.prototype),Zt.superclass=lr(we.prototype,we),ea(Or,_e),ea(Zt,Ve),Zt},Vo=Ho,Wo=function(Zt,we){if(!c(Zt))return-1;var _e=Array.prototype.indexOf;if(_e)return _e.call(Zt,we);for(var Ve=-1,lr=0;lr<Zt.length;lr++)if(Zt[lr]===we){Ve=lr;break}return Ve},To=Wo,go=Object.prototype.hasOwnProperty;function jo(Zt){if(I(Zt))return!0;if(c(Zt))return!Zt.length;var we=Lr(Zt);if(we==="Map"||we==="Set")return!Zt.size;if(Zn(Zt))return!Object.keys(Zt).length;for(var _e in Zt)if(go.call(Zt,_e))return!1;return!0}var da=jo,Po=function(Zt,we){if(Zt===we)return!0;if(!Zt||!we||Nt(Zt)||Nt(we))return!1;if(c(Zt)||c(we)){if(Zt.length!==we.length)return!1;for(var _e=!0,Ve=0;Ve<Zt.length&&(_e=Po(Zt[Ve],we[Ve]),!!_e);Ve++);return _e}if(mt(Zt)||mt(we)){var lr=Object.keys(Zt),Or=Object.keys(we);if(lr.length!==Or.length)return!1;for(var _e=!0,Ve=0;Ve<lr.length&&(_e=Po(Zt[lr[Ve]],we[lr[Ve]]),!!_e);Ve++);return _e}return!1},zi=Po,Lo=function(Zt,we,_e){return M(_e)?!!_e(Zt,we):zi(Zt,we)},Uo=function(Zt,we){if(!c(Zt))return Zt;for(var _e=[],Ve=0;Ve<Zt.length;Ve++){var lr=Zt[Ve];_e.push(we(lr,Ve))}return _e},Zo=Uo,ue=function(Zt){return Zt},wt=function(Zt,we){we===void 0&&(we=ue);var _e={};return N(Zt)&&!I(Zt)&&Object.keys(Zt).forEach(function(Ve){_e[Ve]=we(Zt[Ve],Ve)}),_e},X=function(Zt,we,_e){for(var Ve=0,lr=Nt(we)?we.split("."):we;Zt&&Ve<lr.length;)Zt=Zt[lr[Ve++]];return Zt===void 0||Ve<lr.length?_e:Zt},et=function(Zt,we,_e){var Ve=Zt,lr=Nt(we)?we.split("."):we;return lr.forEach(function(Or,on){on<lr.length-1?(N(Ve[Or])||(Ve[Or]=ke(lr[on+1])?[]:{}),Ve=Ve[Or]):Ve[Or]=_e}),Zt},dt=Object.prototype.hasOwnProperty,Ot=function(Zt,we){if(Zt===null||!Gt(Zt))return{};var _e={};return W(we,function(Ve){dt.call(Zt,Ve)&&(_e[Ve]=Zt[Ve])}),_e},Qt=function(Zt,we){return q(Zt,function(_e,Ve,lr){return we.includes(lr)||(_e[lr]=Ve),_e},{})},se=function(Zt,we,_e){var Ve,lr,Or,on,Cn=0;_e||(_e={});var Li=function(){Cn=_e.leading===!1?0:Date.now(),Ve=null,on=Zt.apply(lr,Or),Ve||(lr=Or=null)},ra=function(){var na=Date.now();!Cn&&_e.leading===!1&&(Cn=na);var Ko=we-(na-Cn);return lr=this,Or=arguments,Ko<=0||Ko>we?(Ve&&(clearTimeout(Ve),Ve=null),Cn=na,on=Zt.apply(lr,Or),Ve||(lr=Or=null)):!Ve&&_e.trailing!==!1&&(Ve=setTimeout(Li,Ko)),on};return ra.cancel=function(){clearTimeout(Ve),Cn=0,Ve=lr=Or=null},ra},Me=function(Zt){return c(Zt)?Array.prototype.slice.call(Zt):[]},Te={},Ne=function(Zt){return Zt=Zt||"g",Te[Zt]?Te[Zt]+=1:Te[Zt]=1,Zt+Te[Zt]},Je=function(){},sr=function(Zt){return Zt};function gr(Zt){return I(Zt)?0:c(Zt)?Zt.length:Object.keys(Zt).length}var Ir=v(21362),tn,Qr=vo(function(Zt,we){we===void 0&&(we={});var _e=we.fontSize,Ve=we.fontFamily,lr=we.fontWeight,Or=we.fontStyle,on=we.fontVariant;return tn||(tn=document.createElement("canvas").getContext("2d")),tn.font=[Or,on,lr,_e+"px",Ve].join(" "),tn.measureText(Nt(Zt)?Zt:"").width},function(Zt,we){return we===void 0&&(we={}),(0,Ir.__spreadArrays)([Zt],ct(we)).join("")}),En=function(Zt,we,_e,Ve){Ve===void 0&&(Ve="...");var lr=16,Or=Qr(Ve,_e),on=Nt(Zt)?Zt:ot(Zt),Cn=we,Li=[],ra,na;if(Qr(Zt,_e)<=we)return Zt;for(;ra=on.substr(0,lr),na=Qr(ra,_e),!(na+Or>Cn&&na>Cn);)if(Li.push(ra),Cn-=na,on=on.substr(lr),!on)return Li.join("");for(;ra=on.substr(0,1),na=Qr(ra,_e),!(na+Or>Cn);)if(Li.push(ra),Cn-=na,on=on.substr(1),!on)return Li.join("");return""+Li.join("")+Ve},Bn=function(){function Zt(){this.map={}}return Zt.prototype.has=function(we){return this.map[we]!==void 0},Zt.prototype.get=function(we,_e){var Ve=this.map[we];return Ve===void 0?_e:Ve},Zt.prototype.set=function(we,_e){this.map[we]=_e},Zt.prototype.clear=function(){this.map={}},Zt.prototype.delete=function(we){delete this.map[we]},Zt.prototype.size=function(){return Object.keys(this.map).length},Zt}(),Nn=Bn},99438:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(7165),c=v(91110),F=function(){for(var L=[],O=0;O<arguments.length;O++)L[O]=arguments[O];for(var _=L[0],P=1;P<L.length;P++){var A=L[P];c.default(A)&&(A=A.prototype),d.default(_.prototype,A)}};T.default=F},86862:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(){function d(){this.map={}}return d.prototype.has=function(c){return this.map[c]!==void 0},d.prototype.get=function(c,F){var L=this.map[c];return L===void 0?F:L},d.prototype.set=function(c,F){this.map[c]=F},d.prototype.clear=function(){this.map={}},d.prototype.delete=function(c){delete this.map[c]},d.prototype.size=function(){return Object.keys(this.map).length},d}();T.default=v},45466:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d,c,F){return d<c?c:d>F?F:d};T.default=v},88041:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d){var c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;c(d)}T.default=v},23098:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=function(F){if(typeof F!="object"||F===null)return F;var L;if(d.default(F)){L=[];for(var O=0,_=F.length;O<_;O++)typeof F[O]=="object"&&F[O]!=null?L[O]=c(F[O]):L[O]=F[O]}else{L={};for(var P in F)typeof F[P]=="object"&&F[P]!=null?L[P]=c(F[P]):L[P]=F[P]}return L};T.default=c},66494:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=function(F,L){return d.default(F)?F.indexOf(L)>-1:!1};T.default=c},15524:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c,F){var L;return function(){var O=this,_=arguments,P=function(){L=null,F||d.apply(O,_)},A=F&&!L;clearTimeout(L),L=setTimeout(P,c),A&&d.apply(O,_)}}T.default=v},8098:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(38958),F=5;function L(_,P,A,x){A=A||0,x=x||F;for(var C in P)if(P.hasOwnProperty(C)){var w=P[C];w!==null&&c.default(w)?(c.default(_[C])||(_[C]={}),A<x?L(_[C],w,A+1,x):_[C]=P[C]):d.default(w)?(_[C]=[],_[C]=_[C].concat(w)):w!==void 0&&(_[C]=w)}}var O=function(_){for(var P=[],A=1;A<arguments.length;A++)P[A-1]=arguments[A];for(var x=0;x<P.length;x+=1)L(_,P[x]);return _};T.default=O},99739:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(33819),c=v(66494),F=function(L,O){return O===void 0&&(O=[]),d.default(L,function(_){return!c.default(O,_)})};T.default=F},91577:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(41367);function F(L,O){if(!!L){var _;if(d.default(L))for(var P=0,A=L.length;P<A&&(_=O(L[P],P),_!==!1);P++);else if(c.default(L)){for(var x in L)if(L.hasOwnProperty(x)&&(_=O(L[x],x),_===!1))break}}}T.default=F},96835:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(55535);function F(L,O){return d.default(L)||c.default(L)?L[L.length-1]===O:!1}T.default=F},69793:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d,c){for(var F=0;F<d.length;F++)if(!c(d[F],F))return!1;return!0};T.default=v},50773:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(7165),c=v(91110),F=function(L,O,_,P){c.default(O)||(_=O,O=L,L=function(){});var A=Object.create?function(C,w){return Object.create(C,{constructor:{value:w}})}:function(C,w){function M(){}M.prototype=C;var S=new M;return S.constructor=w,S},x=A(O.prototype,L);return L.prototype=d.default(x,L.prototype),L.superclass=A(O.prototype,O),d.default(x,_),d.default(L,P),L};T.default=F},33819:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=function(F,L){if(!d.default(F))return F;for(var O=[],_=0;_<F.length;_++){var P=F[_];L(P,_)&&O.push(P)}return O};T.default=c},78950:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c,F){F===void 0&&(F=0);for(var L=F;L<d.length;L++)if(c(d[L],L))return L;return-1}T.default=v},93702:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91110),c=v(72330),F=v(21429),L=v(38958);function O(_,P){if(!F.default(_))return null;var A;if(d.default(P)&&(A=P),L.default(P)&&(A=function(C){return c.default(C,P)}),A){for(var x=0;x<_.length;x+=1)if(A(_[x]))return _[x]}return null}T.default=O},45971:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438),c=v(21429),F=function(L,O){for(var _=null,P=0;P<L.length;P++){var A=L[P],x=A[O];if(!d.default(x)){c.default(x)?_=x[0]:_=x;break}}return _};T.default=F},19170:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d,c){var F=c.toString(),L=F.indexOf(".");if(L===-1)return Math.round(d);var O=F.substr(L+1).length;return O>20&&(O=20),parseFloat(d.toFixed(O))};T.default=v},53043:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=function(F,L){if(L===void 0&&(L=[]),!d.default(F))L.push(F);else for(var O=0;O<F.length;O+=1)c(F[O],L);return L};T.default=c},42913:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=function(F){if(!d.default(F))return[];for(var L=[],O=0;O<F.length;O++)L=L.concat(F[O]);return L};T.default=c},51664:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91577);T.default=d.default},9036:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(55535),c=v(25686),F=v(72564);T.default=function(L,O,_,P){P===void 0&&(P="...");var A=16,x=F.default(P,_),C=d.default(L)?L:c.default(L),w=O,M=[],S,I;if(F.default(L,_)<=O)return L;for(;S=C.substr(0,A),I=F.default(S,_),!(I+x>w&&I>w);)if(M.push(S),w-=I,C=C.substr(A),!C)return M.join("");for(;S=C.substr(0,1),I=F.default(S,_),!(I+x>w);)if(M.push(S),w-=I,C=C.substr(1),!C)return M.join("");return""+M.join("")+P}},85744:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(6882),F=v(31302),L=function(O){var _=O.filter(function(w){return!isNaN(w)});if(!_.length)return{min:0,max:0};if(d.default(O[0])){for(var P=[],A=0;A<O.length;A++)P=P.concat(O[A]);_=P}var x=c.default(_),C=F.default(_);return{min:C,max:x}};T.default=L},90468:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v={}.toString,d=function(c){return v.call(c).replace(/^\[object /,"").replace(/]$/,"")};T.default=d},67105:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c){return d["_wrap_"+c]}T.default=v},87293:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(55535);T.default=function(c,F,L){for(var O=0,_=d.default(F)?F.split("."):F;c&&O<_.length;)c=c[_[O++]];return c===void 0||O<_.length?L:c}},97395:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(91110),F=Object.prototype.hasOwnProperty;function L(O,_){if(!_||!d.default(O))return{};for(var P={},A=c.default(_)?_:function(M){return M[_]},x,C=0;C<O.length;C++){var w=O[C];x=A(w),F.call(P,x)?P[x].push(w):P[x]=[w]}return P}T.default=L},30971:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(91110),F=v(97395);function L(O,_){if(!_)return{0:O};if(!c.default(_)){var P=d.default(_)?_:_.replace(/\s+/g,"").split("*");_=function(A){for(var x="_",C=0,w=P.length;C<w;C++)x+=A[P[C]]&&A[P[C]].toString();return x}}return F.default(O,_)}T.default=L},46866:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(30971);T.default=function(c,F){if(!F)return[c];var L=d.default(c,F),O=[];for(var _ in L)O.push(L[_]);return O}},8551:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(93680);T.default=d.default},79712:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(66494),c=v(8026);T.default=function(F,L){return d.default(c.default(F),L)}},93680:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(v,d){return v.hasOwnProperty(d)}},70633:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819);function c(F){if(d.default(F))return F[0]}T.default=c},40131:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(v){return v}},56572:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=function(F,L){if(!d.default(F))return-1;var O=Array.prototype.indexOf;if(O)return O.call(F,L);for(var _=-1,P=0;P<F.length;P++)if(F[P]===L){_=P;break}return _};T.default=c},27533:function(xt,T,v){"use strict";var d;d={value:!0};var c=v(66494);d={enumerable:!0,get:function(){return c.default}},d={enumerable:!0,get:function(){return c.default}};var F=v(99739);d={enumerable:!0,get:function(){return F.default}};var L=v(93702);d={enumerable:!0,get:function(){return L.default}};var O=v(78950);d={enumerable:!0,get:function(){return O.default}};var _=v(45971);d={enumerable:!0,get:function(){return _.default}};var P=v(42913);d={enumerable:!0,get:function(){return P.default}};var A=v(53043);d={enumerable:!0,get:function(){return A.default}};var x=v(85744);d={enumerable:!0,get:function(){return x.default}};var C=v(69228);d={enumerable:!0,get:function(){return C.default}};var w=v(91425);d={enumerable:!0,get:function(){return w.default}};var M=v(94777);d={enumerable:!0,get:function(){return M.default}};var S=v(94750);d={enumerable:!0,get:function(){return S.default}};var I=v(55713);d={enumerable:!0,get:function(){return I.default}};var B=v(85723);d={enumerable:!0,get:function(){return B.default}};var N=v(48870);d={enumerable:!0,get:function(){return N.default}};var G=v(44417);d={enumerable:!0,get:function(){return G.default}};var W=v(70633);d={enumerable:!0,get:function(){return W.default}};var $=v(8628);d={enumerable:!0,get:function(){return $.default}};var H=v(65200);d={enumerable:!0,get:function(){return H.default}};var j=v(96835);d={enumerable:!0,get:function(){return j.default}};var nt=v(33819);d={enumerable:!0,get:function(){return nt.default}};var rt=v(69793);d={enumerable:!0,get:function(){return rt.default}};var mt=v(35330);d={enumerable:!0,get:function(){return mt.default}};var Ft=v(46866);d={enumerable:!0,get:function(){return Ft.default}};var Gt=v(97395);d={enumerable:!0,get:function(){return Gt.default}};var gt=v(30971);d={enumerable:!0,get:function(){return gt.default}};var st=v(67105);d={enumerable:!0,get:function(){return st.default}};var Xt=v(78435);Object.defineProperty(T,"Ko",{enumerable:!0,get:function(){return Xt.default}});var Q=v(74868);d={enumerable:!0,get:function(){return Q.default}};var qt=v(82293);d={enumerable:!0,get:function(){return qt.default}};var y=v(45466);d={enumerable:!0,get:function(){return y.default}};var Yt=v(19170);d={enumerable:!0,get:function(){return Yt.default}};var K=v(45397);d={enumerable:!0,get:function(){return K.default}};var ht=v(2551);d={enumerable:!0,get:function(){return ht.default}};var J=v(72683);d={enumerable:!0,get:function(){return J.default}};var At=v(31112);d={enumerable:!0,get:function(){return At.default}};var Vt=v(47203);d={enumerable:!0,get:function(){return Vt.default}};var pt=v(91383);d={enumerable:!0,get:function(){return pt.default}};var Lt=v(49166);d={enumerable:!0,get:function(){return Lt.default}};var Tt=v(6882);d={enumerable:!0,get:function(){return Tt.default}};var kt=v(21698);d={enumerable:!0,get:function(){return kt.default}};var jt=v(31302);d={enumerable:!0,get:function(){return jt.default}};var Wt=v(94720);d={enumerable:!0,get:function(){return Wt.default}};var zt=v(62352);d={enumerable:!0,get:function(){return zt.default}};var bt=v(62444);d={enumerable:!0,get:function(){return bt.default}};var at=v(97556);d={enumerable:!0,get:function(){return at.default}};var ft=v(61823);d={enumerable:!0,get:function(){return ft.default}};var Pt=v(51664);d={enumerable:!0,get:function(){return Pt.default}};var q=v(93680);d={enumerable:!0,get:function(){return q.default}};var ut=v(8551);d={enumerable:!0,get:function(){return ut.default}};var Et=v(79712);d={enumerable:!0,get:function(){return Et.default}};var Nt=v(73945);d={enumerable:!0,get:function(){return Nt.default}};var ee=v(72330);d={enumerable:!0,get:function(){return ee.default}};var ge=v(8026);d={enumerable:!0,get:function(){return ge.default}};var De=v(46601);d={enumerable:!0,get:function(){return De.default}};var er=v(96087);d={enumerable:!0,get:function(){return er.default}};var Re=v(40287);d={enumerable:!0,get:function(){return Re.default}};var Ke=v(57319);d={enumerable:!0,get:function(){return Ke.default}};var hr=v(18092);d={enumerable:!0,get:function(){return hr.default}};var Sr=v(90468);d={enumerable:!0,get:function(){return Sr.default}};var Rr=v(68167);d={enumerable:!0,get:function(){return Rr.default}};var vr=v(21429);d={enumerable:!0,get:function(){return vr.default}};var en=v(64819);d={enumerable:!0,get:function(){return en.default}};var gn=v(77468);d={enumerable:!0,get:function(){return gn.default}};var hn=v(87512);d={enumerable:!0,get:function(){return hn.default}};var vn=v(8110);d={enumerable:!0,get:function(){return vn.default}};var Wn=v(91110);d={enumerable:!0,get:function(){return Wn.default}};var $r=v(44722);d={enumerable:!0,get:function(){return $r.default}};var wi=v(83438);d={enumerable:!0,get:function(){return wi.default}};var ci=v(32083);d={enumerable:!0,get:function(){return ci.default}};var oe=v(41820);d={enumerable:!0,get:function(){return oe.default}};var ce=v(41367);d={enumerable:!0,get:function(){return ce.default}};var Ee=v(77899);d={enumerable:!0,get:function(){return Ee.default}};var Pe=v(38958);d={enumerable:!0,get:function(){return Pe.default}};var Fe=v(72657);d={enumerable:!0,get:function(){return Fe.default}};var Ue=v(48384);d={enumerable:!0,get:function(){return Ue.default}};var Qe=v(55535);Object.defineProperty(T,"HD",{enumerable:!0,get:function(){return Qe.default}});var rr=v(95193);d={enumerable:!0,get:function(){return rr.default}};var We=v(49154);d={enumerable:!0,get:function(){return We.default}};var fr=v(24460);d={enumerable:!0,get:function(){return fr.default}};var fe=v(37250);d={enumerable:!0,get:function(){return fe.default}};var re=v(88041);d={enumerable:!0,get:function(){return re.default}};var Rt=v(99438);d={enumerable:!0,get:function(){return Rt.default}};var ie=v(23098);Object.defineProperty(T,"d9",{enumerable:!0,get:function(){return ie.default}});var be=v(15524);d={enumerable:!0,get:function(){return be.default}};var Oe=v(41913);d={enumerable:!0,get:function(){return Oe.default}};var ze=v(8098);Object.defineProperty(T,"b$",{enumerable:!0,get:function(){return ze.default}});var ke=v(91577);Object.defineProperty(T,"S6",{enumerable:!0,get:function(){return ke.default}});var Ze=v(50773);d={enumerable:!0,get:function(){return Ze.default}};var kr=v(56572);d={enumerable:!0,get:function(){return kr.default}};var Fr=v(51741);d={enumerable:!0,get:function(){return Fr.default}};var jr=v(70069);d={enumerable:!0,get:function(){return jr.default}};var ve=v(53879);d={enumerable:!0,get:function(){return ve.default}};var pe=v(66723);d={enumerable:!0,get:function(){return pe.default}};var Se=v(53091);d={enumerable:!0,get:function(){return Se.default}};var Xe=v(7165);d={enumerable:!0,get:function(){return Xe.default}},d={enumerable:!0,get:function(){return Xe.default}};var je=v(87293);d={enumerable:!0,get:function(){return je.default}};var tr=v(36979);d={enumerable:!0,get:function(){return tr.default}};var pr=v(61257);d={enumerable:!0,get:function(){return pr.default}};var Ar=v(81029);d={enumerable:!0,get:function(){return Ar.default}};var Hr=v(46098);d={enumerable:!0,get:function(){return Hr.default}};var Br=v(45856);d={enumerable:!0,get:function(){return Br.default}};var Vr=v(25686);d={enumerable:!0,get:function(){return Vr.default}};var Tn=v(83355);d={enumerable:!0,get:function(){return Tn.default}};var Pn=v(67122);d={enumerable:!0,get:function(){return Pn.default}};var ni=v(40131);d={enumerable:!0,get:function(){return ni.default}};var On=v(74266);d={enumerable:!0,get:function(){return On.default}};var si=v(72564);d={enumerable:!0,get:function(){return si.default}};var zn=v(9036);d={enumerable:!0,get:function(){return zn.default}};var Ti=v(86862);d={enumerable:!0,get:function(){return Ti.default}}},68167:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"Arguments")};T.default=c},64819:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return d!==null&&typeof d!="function"&&isFinite(d.length)};T.default=v},21429:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193);T.default=function(c){return Array.isArray?Array.isArray(c):d.default(c,"Array")}},77468:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"Boolean")};T.default=c},87512:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"Date")};T.default=c},45397:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=function(F){return d.default(F)&&F%1!=0};T.default=c},24460:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return d instanceof Element||d instanceof HTMLDocument};T.default=v},51741:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438),c=v(64819),F=v(90468),L=v(72657),O=Object.prototype.hasOwnProperty;function _(P){if(d.default(P))return!0;if(c.default(P))return!P.length;var A=F.default(P);if(A==="Map"||A==="Set")return!P.size;if(L.default(P))return!Object.keys(P).length;for(var x in P)if(O.call(P,x))return!1;return!0}T.default=_},53879:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91110),c=v(70069);T.default=function(F,L,O){return d.default(O)?!!O(F,L):c.default(F,L)}},70069:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(77899),c=v(64819),F=v(55535),L=function(O,_){if(O===_)return!0;if(!O||!_||F.default(O)||F.default(_))return!1;if(c.default(O)||c.default(_)){if(O.length!==_.length)return!1;for(var P=!0,A=0;A<O.length&&(P=L(O[A],_[A]),!!P);A++);return P}if(d.default(O)||d.default(_)){var x=Object.keys(O),C=Object.keys(_);if(x.length!==C.length)return!1;for(var P=!0,A=0;A<x.length&&(P=L(O[x[A]],_[x[A]]),!!P);A++);return P}return!1};T.default=L},8110:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"Error")};T.default=c},2551:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=function(F){return d.default(F)&&F%2==0};T.default=c},44722:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820);function c(F){return d.default(F)&&isFinite(F)}T.default=c},91110:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193);T.default=function(c){return d.default(c,"Function")}},72683:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=Number.isInteger?Number.isInteger:function(F){return d.default(F)&&F%1==0};T.default=c},72330:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438),c=v(73945);function F(L,O){var _=c.default(O),P=_.length;if(d.default(L))return!P;for(var A=0;A<P;A+=1){var x=_[A];if(O[x]!==L[x]||!(x in L))return!1}return!0}T.default=F},31112:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=function(F){return d.default(F)&&F<0};T.default=c},83438:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return d==null};T.default=v},32083:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return d===null};T.default=v},47203:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=1e-5;function d(c,F,L){return L===void 0&&(L=v),Math.abs(c-F)<L}T.default=d},41820:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"Number")};T.default=c},77899:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return typeof d=="object"&&d!==null};T.default=v},41367:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(v){var d=typeof v;return v!==null&&d==="object"||d==="function"}},91383:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=function(F){return d.default(F)&&F%2!=0};T.default=c},38958:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(77899),c=v(95193),F=function(L){if(!d.default(L)||!c.default(L,"Object"))return!1;if(Object.getPrototypeOf(L)===null)return!0;for(var O=L;Object.getPrototypeOf(O)!==null;)O=Object.getPrototypeOf(O);return Object.getPrototypeOf(L)===O};T.default=F},49166:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41820),c=function(F){return d.default(F)&&F>0};T.default=c},72657:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=Object.prototype,d=function(c){var F=c&&c.constructor,L=typeof F=="function"&&F.prototype||v;return c===L};T.default=d},48384:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193),c=function(F){return d.default(F,"RegExp")};T.default=c},55535:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(95193);T.default=function(c){return d.default(c,"String")}},95193:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v={}.toString,d=function(c,F){return v.call(c)==="[object "+F+"]"};T.default=d},49154:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d){return d===void 0};T.default=v},73945:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91577),c=v(91110),F=Object.keys?function(L){return Object.keys(L)}:function(L){var O=[];return d.default(L,function(_,P){c.default(L)&&P==="prototype"||O.push(P)}),O};T.default=F},8628:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819);function c(F){if(d.default(F)){var L=F;return L[L.length-1]}}T.default=c},46601:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(25686),c=function(F){return d.default(F).toLowerCase()};T.default=c},96087:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(25686),c=function(F){var L=d.default(F);return L.charAt(0).toLowerCase()+L.substring(1)};T.default=c},53091:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438),c=v(41367),F=function(L){return L};T.default=function(L,O){O===void 0&&(O=F);var _={};return c.default(L)&&!d.default(L)&&Object.keys(L).forEach(function(P){_[P]=O(L[P],P)}),_}},66723:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=function(F,L){if(!d.default(F))return F;for(var O=[],_=0;_<F.length;_++){var P=F[_];O.push(L(P,_))}return O};T.default=c},21698:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(91110);T.default=function(F,L){if(!!d.default(F)){for(var O,_=-Infinity,P=0;P<F.length;P++){var A=F[P],x=c.default(L)?L(A):A[L];x>_&&(O=A,_=x)}return O}}},6882:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429);T.default=function(c){if(!!d.default(c))return c.reduce(function(F,L){return Math.max(F,L)},c[0])}},72564:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21362),c=v(8026),F=v(41913),L=v(55535),O;T.default=F.default(function(_,P){P===void 0&&(P={});var A=P.fontSize,x=P.fontFamily,C=P.fontWeight,w=P.fontStyle,M=P.fontVariant;return O||(O=document.createElement("canvas").getContext("2d")),O.font=[w,M,C,A+"px",x].join(" "),O.measureText(L.default(_)?_:"").width},function(_,P){return P===void 0&&(P={}),d.__spreadArrays([_],c.default(P)).join("")})},41913:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91110);T.default=function(c,F){if(!d.default(c))throw new TypeError("Expected a function");var L=function(){for(var O=[],_=0;_<arguments.length;_++)O[_]=arguments[_];var P=F?F.apply(this,O):O[0],A=L.cache;if(A.has(P))return A.get(P);var x=c.apply(this,O);return A.set(P,x),x};return L.cache=new Map,L}},94720:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(91110);T.default=function(F,L){if(!!d.default(F)){for(var O,_=Infinity,P=0;P<F.length;P++){var A=F[P],x=c.default(L)?L(A):A[L];x<_&&(O=A,_=x)}return O}}},31302:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429);T.default=function(c){if(!!d.default(c))return c.reduce(function(F,L){return Math.min(F,L)},c[0])}},7165:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(c,F){for(var L in F)F.hasOwnProperty(L)&&L!=="constructor"&&F[L]!==void 0&&(c[L]=F[L])}function d(c,F,L,O){return F&&v(c,F),L&&v(c,L),O&&v(c,O),c}T.default=d},62352:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d,c){return(d%c+c)%c};T.default=v},67122:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},74868:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v={};function d(c){var F=v[c];if(!F){for(var L=c.toString(16),O=L.length;O<6;O++)L="0"+L;F="#"+L,v[c]=F}return F}T.default=d},81029:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(94777);T.default=function(c,F){return d.default(c,function(L,O,_){return F.includes(_)||(L[_]=O),L},{})}},82293:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429);function c(F){var L=0,O=0,_=0,P=0;return d.default(F)?F.length===1?L=O=_=P=F[0]:F.length===2?(L=_=F[0],O=P=F[1]):F.length===3?(L=F[0],O=P=F[1],_=F[2]):(L=F[0],O=F[1],_=F[2],P=F[3]):L=O=_=P=F,{r1:L,r2:O,r3:_,r4:P}}T.default=c},61257:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91577),c=v(38958),F=Object.prototype.hasOwnProperty;T.default=function(L,O){if(L===null||!c.default(L))return{};var _={};return d.default(O,function(P){F.call(L,P)&&(_[P]=L[P])}),_}},91425:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=Array.prototype.splice,F=function(O,_){if(!d.default(O))return[];for(var P=O?_.length:0,A=P-1;P--;){var x=void 0,C=_[P];(P===A||C!==x)&&(x=C,c.call(O,C,1))}return O};T.default=F},69228:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=Array.prototype,d=v.splice,c=v.indexOf,F=function(L){for(var O=[],_=1;_<arguments.length;_++)O[_-1]=arguments[_];for(var P=0;P<O.length;P++)for(var A=O[P],x=-1;(x=c.call(L,A))>-1;)d.call(L,x,1);return L};T.default=F},94777:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91577),c=v(21429),F=v(38958),L=function(O,_,P){if(!c.default(O)&&!F.default(O))return O;var A=P;return d.default(O,function(x,C){A=_(A,x,C)}),A};T.default=L},94750:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819),c=v(91425),F=function(L,O){var _=[];if(!d.default(L))return _;for(var P=-1,A=[],x=L.length;++P<x;){var C=L[P];O(C,P,L)&&(_.push(C),A.push(P))}return c.default(L,A),_};T.default=F},37250:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(F){return setTimeout(F,16)};return c(d)}T.default=v},36979:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(41367),c=v(55535),F=v(41820);T.default=function(L,O,_){var P=L,A=c.default(O)?O.split("."):O;return A.forEach(function(x,C){C<A.length-1?(d.default(P[x])||(P[x]=F.default(A[C+1])?[]:{}),P=P[x]):P[x]=_}),L}},74266:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438),c=v(64819);function F(L){return d.default(L)?0:c.default(L)?L.length:Object.keys(L).length}T.default=F},35330:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=function(d,c){for(var F=0;F<d.length;F++)if(c(d[F],F))return!0;return!1};T.default=v},55713:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(55535),F=v(91110);function L(O,_){var P;if(F.default(_))P=function(x,C){return _(x)-_(C)};else{var A=[];c.default(_)?A.push(_):d.default(_)&&(A=_),P=function(x,C){for(var w=0;w<A.length;w+=1){var M=A[w];if(x[M]>C[M])return 1;if(x[M]<C[M])return-1}return 0}}return O.sort(P),O}T.default=L},65200:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(55535);function F(L,O){return d.default(L)||c.default(L)?L[0]===O:!1}T.default=F},40287:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c){return!d||!c?d:d.replace(/\\?\{([^{}]+)\}/g,function(F,L){return F.charAt(0)==="\\"?F.slice(1):c[L]===void 0?"":c[L]})}T.default=v},46098:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(v,d,c){var F,L,O,_,P=0;c||(c={});var A=function(){P=c.leading===!1?0:Date.now(),F=null,_=v.apply(L,O),F||(L=O=null)},x=function(){var C=Date.now();!P&&c.leading===!1&&(P=C);var w=d-(C-P);return L=this,O=arguments,w<=0||w>d?(F&&(clearTimeout(F),F=null),P=C,_=v.apply(L,O),F||(L=O=null)):!F&&c.trailing!==!1&&(F=setTimeout(A,w)),_};return x.cancel=function(){clearTimeout(F),P=0,F=L=O=null},x}},45856:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(64819);T.default=function(c){return d.default(c)?Array.prototype.slice.call(c):[]}},62444:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=180/Math.PI,d=function(c){return v*c};T.default=d},97556:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},61823:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v=Math.PI/180,d=function(c){return v*c};T.default=d},25686:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(83438);T.default=function(c){return d.default(c)?"":c.toString()}},85723:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(48870),c=function(){for(var F=[],L=0;L<arguments.length;L++)F[L]=arguments[L];return d.default([].concat.apply([],F))};T.default=c},48870:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c){c===void 0&&(c=new Map);var F=[];if(Array.isArray(d))for(var L=0,O=d.length;L<O;L++){var _=d[L];c.has(_)||(F.push(_),c.set(_,!0))}return F}T.default=v},83355:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var v={};T.default=function(d){return d=d||"g",v[d]?v[d]+=1:v[d]=1,d+v[d]}},57319:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(25686),c=function(F){return d.default(F).toUpperCase()};T.default=c},18092:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(25686),c=function(F){var L=d.default(F);return L.charAt(0).toUpperCase()+L.substring(1)};T.default=c},44417:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(21429),c=v(83438);T.default=function(F,L){for(var O=[],_={},P=0;P<F.length;P++){var A=F[P],x=A[L];if(!c.default(x)){d.default(x)||(x=[x]);for(var C=0;C<x.length;C++){var w=x[C];_[w]||(O.push(w),_[w]=!0)}}}return O}},8026:function(xt,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var d=v(91577),c=v(91110),F=Object.values?function(L){return Object.values(L)}:function(L){var O=[];return d.default(L,function(_,P){c.default(L)&&P==="prototype"||O.push(_)}),O};T.default=F},78435:function(xt,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function v(d,c){if(d["_wrap_"+c])return d["_wrap_"+c];var F=function(L){d[c](L)};return d["_wrap_"+c]=F,F}T.default=v},32447:function(xt,T,v){"use strict";v.r(T),v.d(T,{__extends:function(){return c},__assign:function(){return F},__rest:function(){return L},__decorate:function(){return O},__param:function(){return _},__metadata:function(){return P},__awaiter:function(){return A},__generator:function(){return x},__createBinding:function(){return C},__exportStar:function(){return w},__values:function(){return M},__read:function(){return S},__spread:function(){return I},__spreadArrays:function(){return B},__await:function(){return N},__asyncGenerator:function(){return G},__asyncDelegator:function(){return W},__asyncValues:function(){return $},__makeTemplateObject:function(){return H},__importStar:function(){return j},__importDefault:function(){return nt},__classPrivateFieldGet:function(){return rt},__classPrivateFieldSet:function(){return mt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=function(Gt,gt){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(st,Xt){st.__proto__=Xt}||function(st,Xt){for(var Q in Xt)Xt.hasOwnProperty(Q)&&(st[Q]=Xt[Q])},d(Gt,gt)};function c(Ft,Gt){d(Ft,Gt);function gt(){this.constructor=Ft}Ft.prototype=Gt===null?Object.create(Gt):(gt.prototype=Gt.prototype,new gt)}var F=function(){return F=Object.assign||function(gt){for(var st,Xt=1,Q=arguments.length;Xt<Q;Xt++){st=arguments[Xt];for(var qt in st)Object.prototype.hasOwnProperty.call(st,qt)&&(gt[qt]=st[qt])}return gt},F.apply(this,arguments)};function L(Ft,Gt){var gt={};for(var st in Ft)Object.prototype.hasOwnProperty.call(Ft,st)&&Gt.indexOf(st)<0&&(gt[st]=Ft[st]);if(Ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Xt=0,st=Object.getOwnPropertySymbols(Ft);Xt<st.length;Xt++)Gt.indexOf(st[Xt])<0&&Object.prototype.propertyIsEnumerable.call(Ft,st[Xt])&&(gt[st[Xt]]=Ft[st[Xt]]);return gt}function O(Ft,Gt,gt,st){var Xt=arguments.length,Q=Xt<3?Gt:st===null?st=Object.getOwnPropertyDescriptor(Gt,gt):st,qt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(Ft,Gt,gt,st);else for(var y=Ft.length-1;y>=0;y--)(qt=Ft[y])&&(Q=(Xt<3?qt(Q):Xt>3?qt(Gt,gt,Q):qt(Gt,gt))||Q);return Xt>3&&Q&&Object.defineProperty(Gt,gt,Q),Q}function _(Ft,Gt){return function(gt,st){Gt(gt,st,Ft)}}function P(Ft,Gt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Ft,Gt)}function A(Ft,Gt,gt,st){function Xt(Q){return Q instanceof gt?Q:new gt(function(qt){qt(Q)})}return new(gt||(gt=Promise))(function(Q,qt){function y(ht){try{K(st.next(ht))}catch(J){qt(J)}}function Yt(ht){try{K(st.throw(ht))}catch(J){qt(J)}}function K(ht){ht.done?Q(ht.value):Xt(ht.value).then(y,Yt)}K((st=st.apply(Ft,Gt||[])).next())})}function x(Ft,Gt){var gt={label:0,sent:function(){if(Q[0]&1)throw Q[1];return Q[1]},trys:[],ops:[]},st,Xt,Q,qt;return qt={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(qt[Symbol.iterator]=function(){return this}),qt;function y(K){return function(ht){return Yt([K,ht])}}function Yt(K){if(st)throw new TypeError("Generator is already executing.");for(;gt;)try{if(st=1,Xt&&(Q=K[0]&2?Xt.return:K[0]?Xt.throw||((Q=Xt.return)&&Q.call(Xt),0):Xt.next)&&!(Q=Q.call(Xt,K[1])).done)return Q;switch(Xt=0,Q&&(K=[K[0]&2,Q.value]),K[0]){case 0:case 1:Q=K;break;case 4:return gt.label++,{value:K[1],done:!1};case 5:gt.label++,Xt=K[1],K=[0];continue;case 7:K=gt.ops.pop(),gt.trys.pop();continue;default:if(Q=gt.trys,!(Q=Q.length>0&&Q[Q.length-1])&&(K[0]===6||K[0]===2)){gt=0;continue}if(K[0]===3&&(!Q||K[1]>Q[0]&&K[1]<Q[3])){gt.label=K[1];break}if(K[0]===6&&gt.label<Q[1]){gt.label=Q[1],Q=K;break}if(Q&&gt.label<Q[2]){gt.label=Q[2],gt.ops.push(K);break}Q[2]&&gt.ops.pop(),gt.trys.pop();continue}K=Gt.call(Ft,gt)}catch(ht){K=[6,ht],Xt=0}finally{st=Q=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}}function C(Ft,Gt,gt,st){st===void 0&&(st=gt),Ft[st]=Gt[gt]}function w(Ft,Gt){for(var gt in Ft)gt!=="default"&&!Gt.hasOwnProperty(gt)&&(Gt[gt]=Ft[gt])}function M(Ft){var Gt=typeof Symbol=="function"&&Symbol.iterator,gt=Gt&&Ft[Gt],st=0;if(gt)return gt.call(Ft);if(Ft&&typeof Ft.length=="number")return{next:function(){return Ft&&st>=Ft.length&&(Ft=void 0),{value:Ft&&Ft[st++],done:!Ft}}};throw new TypeError(Gt?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(Ft,Gt){var gt=typeof Symbol=="function"&&Ft[Symbol.iterator];if(!gt)return Ft;var st=gt.call(Ft),Xt,Q=[],qt;try{for(;(Gt===void 0||Gt-- >0)&&!(Xt=st.next()).done;)Q.push(Xt.value)}catch(y){qt={error:y}}finally{try{Xt&&!Xt.done&&(gt=st.return)&&gt.call(st)}finally{if(qt)throw qt.error}}return Q}function I(){for(var Ft=[],Gt=0;Gt<arguments.length;Gt++)Ft=Ft.concat(S(arguments[Gt]));return Ft}function B(){for(var Ft=0,Gt=0,gt=arguments.length;Gt<gt;Gt++)Ft+=arguments[Gt].length;for(var st=Array(Ft),Xt=0,Gt=0;Gt<gt;Gt++)for(var Q=arguments[Gt],qt=0,y=Q.length;qt<y;qt++,Xt++)st[Xt]=Q[qt];return st}function N(Ft){return this instanceof N?(this.v=Ft,this):new N(Ft)}function G(Ft,Gt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=gt.apply(Ft,Gt||[]),Xt,Q=[];return Xt={},qt("next"),qt("throw"),qt("return"),Xt[Symbol.asyncIterator]=function(){return this},Xt;function qt(At){st[At]&&(Xt[At]=function(Vt){return new Promise(function(pt,Lt){Q.push([At,Vt,pt,Lt])>1||y(At,Vt)})})}function y(At,Vt){try{Yt(st[At](Vt))}catch(pt){J(Q[0][3],pt)}}function Yt(At){At.value instanceof N?Promise.resolve(At.value.v).then(K,ht):J(Q[0][2],At)}function K(At){y("next",At)}function ht(At){y("throw",At)}function J(At,Vt){At(Vt),Q.shift(),Q.length&&y(Q[0][0],Q[0][1])}}function W(Ft){var Gt,gt;return Gt={},st("next"),st("throw",function(Xt){throw Xt}),st("return"),Gt[Symbol.iterator]=function(){return this},Gt;function st(Xt,Q){Gt[Xt]=Ft[Xt]?function(qt){return(gt=!gt)?{value:N(Ft[Xt](qt)),done:Xt==="return"}:Q?Q(qt):qt}:Q}}function $(Ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt=Ft[Symbol.asyncIterator],gt;return Gt?Gt.call(Ft):(Ft=typeof M=="function"?M(Ft):Ft[Symbol.iterator](),gt={},st("next"),st("throw"),st("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function st(Q){gt[Q]=Ft[Q]&&function(qt){return new Promise(function(y,Yt){qt=Ft[Q](qt),Xt(y,Yt,qt.done,qt.value)})}}function Xt(Q,qt,y,Yt){Promise.resolve(Yt).then(function(K){Q({value:K,done:y})},qt)}}function H(Ft,Gt){return Object.defineProperty?Object.defineProperty(Ft,"raw",{value:Gt}):Ft.raw=Gt,Ft}function j(Ft){if(Ft&&Ft.__esModule)return Ft;var Gt={};if(Ft!=null)for(var gt in Ft)Object.hasOwnProperty.call(Ft,gt)&&(Gt[gt]=Ft[gt]);return Gt.default=Ft,Gt}function nt(Ft){return Ft&&Ft.__esModule?Ft:{default:Ft}}function rt(Ft,Gt){if(!Gt.has(Ft))throw new TypeError("attempted to get private field on non-instance");return Gt.get(Ft)}function mt(Ft,Gt,gt){if(!Gt.has(Ft))throw new TypeError("attempted to set private field on non-instance");return Gt.set(Ft,gt),gt}},73786:function(xt,T,v){var d=v(99026),c={};for(var F in d)d.hasOwnProperty(F)&&(c[d[F]]=F);var L=xt.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var O in L)if(L.hasOwnProperty(O)){if(!("channels"in L[O]))throw new Error("missing channels property: "+O);if(!("labels"in L[O]))throw new Error("missing channel labels property: "+O);if(L[O].labels.length!==L[O].channels)throw new Error("channel and label counts mismatch: "+O);var _=L[O].channels,P=L[O].labels;delete L[O].channels,delete L[O].labels,Object.defineProperty(L[O],"channels",{value:_}),Object.defineProperty(L[O],"labels",{value:P})}L.rgb.hsl=function(x){var C=x[0]/255,w=x[1]/255,M=x[2]/255,S=Math.min(C,w,M),I=Math.max(C,w,M),B=I-S,N,G,W;return I===S?N=0:C===I?N=(w-M)/B:w===I?N=2+(M-C)/B:M===I&&(N=4+(C-w)/B),N=Math.min(N*60,360),N<0&&(N+=360),W=(S+I)/2,I===S?G=0:W<=.5?G=B/(I+S):G=B/(2-I-S),[N,G*100,W*100]},L.rgb.hsv=function(x){var C,w,M,S,I,B=x[0]/255,N=x[1]/255,G=x[2]/255,W=Math.max(B,N,G),$=W-Math.min(B,N,G),H=function(j){return(W-j)/6/$+1/2};return $===0?S=I=0:(I=$/W,C=H(B),w=H(N),M=H(G),B===W?S=M-w:N===W?S=1/3+C-M:G===W&&(S=2/3+w-C),S<0?S+=1:S>1&&(S-=1)),[S*360,I*100,W*100]},L.rgb.hwb=function(x){var C=x[0],w=x[1],M=x[2],S=L.rgb.hsl(x)[0],I=1/255*Math.min(C,Math.min(w,M));return M=1-1/255*Math.max(C,Math.max(w,M)),[S,I*100,M*100]},L.rgb.cmyk=function(x){var C=x[0]/255,w=x[1]/255,M=x[2]/255,S,I,B,N;return N=Math.min(1-C,1-w,1-M),S=(1-C-N)/(1-N)||0,I=(1-w-N)/(1-N)||0,B=(1-M-N)/(1-N)||0,[S*100,I*100,B*100,N*100]};function A(x,C){return Math.pow(x[0]-C[0],2)+Math.pow(x[1]-C[1],2)+Math.pow(x[2]-C[2],2)}L.rgb.keyword=function(x){var C=c[x];if(C)return C;var w=Infinity,M;for(var S in d)if(d.hasOwnProperty(S)){var I=d[S],B=A(x,I);B<w&&(w=B,M=S)}return M},L.keyword.rgb=function(x){return d[x]},L.rgb.xyz=function(x){var C=x[0]/255,w=x[1]/255,M=x[2]/255;C=C>.04045?Math.pow((C+.055)/1.055,2.4):C/12.92,w=w>.04045?Math.pow((w+.055)/1.055,2.4):w/12.92,M=M>.04045?Math.pow((M+.055)/1.055,2.4):M/12.92;var S=C*.4124+w*.3576+M*.1805,I=C*.2126+w*.7152+M*.0722,B=C*.0193+w*.1192+M*.9505;return[S*100,I*100,B*100]},L.rgb.lab=function(x){var C=L.rgb.xyz(x),w=C[0],M=C[1],S=C[2],I,B,N;return w/=95.047,M/=100,S/=108.883,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,S=S>.008856?Math.pow(S,1/3):7.787*S+16/116,I=116*M-16,B=500*(w-M),N=200*(M-S),[I,B,N]},L.hsl.rgb=function(x){var C=x[0]/360,w=x[1]/100,M=x[2]/100,S,I,B,N,G;if(w===0)return G=M*255,[G,G,G];M<.5?I=M*(1+w):I=M+w-M*w,S=2*M-I,N=[0,0,0];for(var W=0;W<3;W++)B=C+1/3*-(W-1),B<0&&B++,B>1&&B--,6*B<1?G=S+(I-S)*6*B:2*B<1?G=I:3*B<2?G=S+(I-S)*(2/3-B)*6:G=S,N[W]=G*255;return N},L.hsl.hsv=function(x){var C=x[0],w=x[1]/100,M=x[2]/100,S=w,I=Math.max(M,.01),B,N;return M*=2,w*=M<=1?M:2-M,S*=I<=1?I:2-I,N=(M+w)/2,B=M===0?2*S/(I+S):2*w/(M+w),[C,B*100,N*100]},L.hsv.rgb=function(x){var C=x[0]/60,w=x[1]/100,M=x[2]/100,S=Math.floor(C)%6,I=C-Math.floor(C),B=255*M*(1-w),N=255*M*(1-w*I),G=255*M*(1-w*(1-I));switch(M*=255,S){case 0:return[M,G,B];case 1:return[N,M,B];case 2:return[B,M,G];case 3:return[B,N,M];case 4:return[G,B,M];case 5:return[M,B,N]}},L.hsv.hsl=function(x){var C=x[0],w=x[1]/100,M=x[2]/100,S=Math.max(M,.01),I,B,N;return N=(2-w)*M,I=(2-w)*S,B=w*S,B/=I<=1?I:2-I,B=B||0,N/=2,[C,B*100,N*100]},L.hwb.rgb=function(x){var C=x[0]/360,w=x[1]/100,M=x[2]/100,S=w+M,I,B,N,G;S>1&&(w/=S,M/=S),I=Math.floor(6*C),B=1-M,N=6*C-I,(I&1)!=0&&(N=1-N),G=w+N*(B-w);var W,$,H;switch(I){default:case 6:case 0:W=B,$=G,H=w;break;case 1:W=G,$=B,H=w;break;case 2:W=w,$=B,H=G;break;case 3:W=w,$=G,H=B;break;case 4:W=G,$=w,H=B;break;case 5:W=B,$=w,H=G;break}return[W*255,$*255,H*255]},L.cmyk.rgb=function(x){var C=x[0]/100,w=x[1]/100,M=x[2]/100,S=x[3]/100,I,B,N;return I=1-Math.min(1,C*(1-S)+S),B=1-Math.min(1,w*(1-S)+S),N=1-Math.min(1,M*(1-S)+S),[I*255,B*255,N*255]},L.xyz.rgb=function(x){var C=x[0]/100,w=x[1]/100,M=x[2]/100,S,I,B;return S=C*3.2406+w*-1.5372+M*-.4986,I=C*-.9689+w*1.8758+M*.0415,B=C*.0557+w*-.204+M*1.057,S=S>.0031308?1.055*Math.pow(S,1/2.4)-.055:S*12.92,I=I>.0031308?1.055*Math.pow(I,1/2.4)-.055:I*12.92,B=B>.0031308?1.055*Math.pow(B,1/2.4)-.055:B*12.92,S=Math.min(Math.max(0,S),1),I=Math.min(Math.max(0,I),1),B=Math.min(Math.max(0,B),1),[S*255,I*255,B*255]},L.xyz.lab=function(x){var C=x[0],w=x[1],M=x[2],S,I,B;return C/=95.047,w/=100,M/=108.883,C=C>.008856?Math.pow(C,1/3):7.787*C+16/116,w=w>.008856?Math.pow(w,1/3):7.787*w+16/116,M=M>.008856?Math.pow(M,1/3):7.787*M+16/116,S=116*w-16,I=500*(C-w),B=200*(w-M),[S,I,B]},L.lab.xyz=function(x){var C=x[0],w=x[1],M=x[2],S,I,B;I=(C+16)/116,S=w/500+I,B=I-M/200;var N=Math.pow(I,3),G=Math.pow(S,3),W=Math.pow(B,3);return I=N>.008856?N:(I-16/116)/7.787,S=G>.008856?G:(S-16/116)/7.787,B=W>.008856?W:(B-16/116)/7.787,S*=95.047,I*=100,B*=108.883,[S,I,B]},L.lab.lch=function(x){var C=x[0],w=x[1],M=x[2],S,I,B;return S=Math.atan2(M,w),I=S*360/2/Math.PI,I<0&&(I+=360),B=Math.sqrt(w*w+M*M),[C,B,I]},L.lch.lab=function(x){var C=x[0],w=x[1],M=x[2],S,I,B;return B=M/360*2*Math.PI,S=w*Math.cos(B),I=w*Math.sin(B),[C,S,I]},L.rgb.ansi16=function(x){var C=x[0],w=x[1],M=x[2],S=1 in arguments?arguments[1]:L.rgb.hsv(x)[2];if(S=Math.round(S/50),S===0)return 30;var I=30+(Math.round(M/255)<<2|Math.round(w/255)<<1|Math.round(C/255));return S===2&&(I+=60),I},L.hsv.ansi16=function(x){return L.rgb.ansi16(L.hsv.rgb(x),x[2])},L.rgb.ansi256=function(x){var C=x[0],w=x[1],M=x[2];if(C===w&&w===M)return C<8?16:C>248?231:Math.round((C-8)/247*24)+232;var S=16+36*Math.round(C/255*5)+6*Math.round(w/255*5)+Math.round(M/255*5);return S},L.ansi16.rgb=function(x){var C=x%10;if(C===0||C===7)return x>50&&(C+=3.5),C=C/10.5*255,[C,C,C];var w=(~~(x>50)+1)*.5,M=(C&1)*w*255,S=(C>>1&1)*w*255,I=(C>>2&1)*w*255;return[M,S,I]},L.ansi256.rgb=function(x){if(x>=232){var C=(x-232)*10+8;return[C,C,C]}x-=16;var w,M=Math.floor(x/36)/5*255,S=Math.floor((w=x%36)/6)/5*255,I=w%6/5*255;return[M,S,I]},L.rgb.hex=function(x){var C=((Math.round(x[0])&255)<<16)+((Math.round(x[1])&255)<<8)+(Math.round(x[2])&255),w=C.toString(16).toUpperCase();return"000000".substring(w.length)+w},L.hex.rgb=function(x){var C=x.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!C)return[0,0,0];var w=C[0];C[0].length===3&&(w=w.split("").map(function(N){return N+N}).join(""));var M=parseInt(w,16),S=M>>16&255,I=M>>8&255,B=M&255;return[S,I,B]},L.rgb.hcg=function(x){var C=x[0]/255,w=x[1]/255,M=x[2]/255,S=Math.max(Math.max(C,w),M),I=Math.min(Math.min(C,w),M),B=S-I,N,G;return B<1?N=I/(1-B):N=0,B<=0?G=0:S===C?G=(w-M)/B%6:S===w?G=2+(M-C)/B:G=4+(C-w)/B+4,G/=6,G%=1,[G*360,B*100,N*100]},L.hsl.hcg=function(x){var C=x[1]/100,w=x[2]/100,M=1,S=0;return w<.5?M=2*C*w:M=2*C*(1-w),M<1&&(S=(w-.5*M)/(1-M)),[x[0],M*100,S*100]},L.hsv.hcg=function(x){var C=x[1]/100,w=x[2]/100,M=C*w,S=0;return M<1&&(S=(w-M)/(1-M)),[x[0],M*100,S*100]},L.hcg.rgb=function(x){var C=x[0]/360,w=x[1]/100,M=x[2]/100;if(w===0)return[M*255,M*255,M*255];var S=[0,0,0],I=C%1*6,B=I%1,N=1-B,G=0;switch(Math.floor(I)){case 0:S[0]=1,S[1]=B,S[2]=0;break;case 1:S[0]=N,S[1]=1,S[2]=0;break;case 2:S[0]=0,S[1]=1,S[2]=B;break;case 3:S[0]=0,S[1]=N,S[2]=1;break;case 4:S[0]=B,S[1]=0,S[2]=1;break;default:S[0]=1,S[1]=0,S[2]=N}return G=(1-w)*M,[(w*S[0]+G)*255,(w*S[1]+G)*255,(w*S[2]+G)*255]},L.hcg.hsv=function(x){var C=x[1]/100,w=x[2]/100,M=C+w*(1-C),S=0;return M>0&&(S=C/M),[x[0],S*100,M*100]},L.hcg.hsl=function(x){var C=x[1]/100,w=x[2]/100,M=w*(1-C)+.5*C,S=0;return M>0&&M<.5?S=C/(2*M):M>=.5&&M<1&&(S=C/(2*(1-M))),[x[0],S*100,M*100]},L.hcg.hwb=function(x){var C=x[1]/100,w=x[2]/100,M=C+w*(1-C);return[x[0],(M-C)*100,(1-M)*100]},L.hwb.hcg=function(x){var C=x[1]/100,w=x[2]/100,M=1-w,S=M-C,I=0;return S<1&&(I=(M-S)/(1-S)),[x[0],S*100,I*100]},L.apple.rgb=function(x){return[x[0]/65535*255,x[1]/65535*255,x[2]/65535*255]},L.rgb.apple=function(x){return[x[0]/255*65535,x[1]/255*65535,x[2]/255*65535]},L.gray.rgb=function(x){return[x[0]/100*255,x[0]/100*255,x[0]/100*255]},L.gray.hsl=L.gray.hsv=function(x){return[0,0,x[0]]},L.gray.hwb=function(x){return[0,100,x[0]]},L.gray.cmyk=function(x){return[0,0,0,x[0]]},L.gray.lab=function(x){return[x[0],0,0]},L.gray.hex=function(x){var C=Math.round(x[0]/100*255)&255,w=(C<<16)+(C<<8)+C,M=w.toString(16).toUpperCase();return"000000".substring(M.length)+M},L.rgb.gray=function(x){var C=(x[0]+x[1]+x[2])/3;return[C/255*100]}},83338:function(xt,T,v){var d=v(73786),c=v(3986),F={},L=Object.keys(d);function O(P){var A=function(x){return x==null?x:(arguments.length>1&&(x=Array.prototype.slice.call(arguments)),P(x))};return"conversion"in P&&(A.conversion=P.conversion),A}function _(P){var A=function(x){if(x==null)return x;arguments.length>1&&(x=Array.prototype.slice.call(arguments));var C=P(x);if(typeof C=="object")for(var w=C.length,M=0;M<w;M++)C[M]=Math.round(C[M]);return C};return"conversion"in P&&(A.conversion=P.conversion),A}L.forEach(function(P){F[P]={},Object.defineProperty(F[P],"channels",{value:d[P].channels}),Object.defineProperty(F[P],"labels",{value:d[P].labels});var A=c(P),x=Object.keys(A);x.forEach(function(C){var w=A[C];F[P][C]=_(w),F[P][C].raw=O(w)})}),xt.exports=F},3986:function(xt,T,v){var d=v(73786);function c(){for(var _={},P=Object.keys(d),A=P.length,x=0;x<A;x++)_[P[x]]={distance:-1,parent:null};return _}function F(_){var P=c(),A=[_];for(P[_].distance=0;A.length;)for(var x=A.pop(),C=Object.keys(d[x]),w=C.length,M=0;M<w;M++){var S=C[M],I=P[S];I.distance===-1&&(I.distance=P[x].distance+1,I.parent=x,A.unshift(S))}return P}function L(_,P){return function(A){return P(_(A))}}function O(_,P){for(var A=[P[_].parent,_],x=d[P[_].parent][_],C=P[_].parent;P[C].parent;)A.unshift(P[C].parent),x=L(d[P[C].parent][C],x),C=P[C].parent;return x.conversion=A,x}xt.exports=function(_){for(var P=F(_),A={},x=Object.keys(P),C=x.length,w=0;w<C;w++){var M=x[w],S=P[M];S.parent!==null&&(A[M]=O(M,P))}return A}},99026:function(xt){"use strict";xt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},45411:function(xt){"use strict";xt.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},42885:function(xt,T,v){var d=v(45411),c=v(75029),F={};for(var L in d)d.hasOwnProperty(L)&&(F[d[L]]=L);var O=xt.exports={to:{},get:{}};O.get=function(A){var x=A.substring(0,3).toLowerCase(),C,w;switch(x){case"hsl":C=O.get.hsl(A),w="hsl";break;case"hwb":C=O.get.hwb(A),w="hwb";break;default:C=O.get.rgb(A),w="rgb";break}return C?{model:w,value:C}:null},O.get.rgb=function(A){if(!A)return null;var x=/^#([a-f0-9]{3,4})$/i,C=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,w=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,M=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,S=/(\D+)/,I=[0,0,0,1],B,N,G;if(B=A.match(C)){for(G=B[2],B=B[1],N=0;N<3;N++){var W=N*2;I[N]=parseInt(B.slice(W,W+2),16)}G&&(I[3]=parseInt(G,16)/255)}else if(B=A.match(x)){for(B=B[1],G=B[3],N=0;N<3;N++)I[N]=parseInt(B[N]+B[N],16);G&&(I[3]=parseInt(G+G,16)/255)}else if(B=A.match(w)){for(N=0;N<3;N++)I[N]=parseInt(B[N+1],0);B[4]&&(I[3]=parseFloat(B[4]))}else if(B=A.match(M)){for(N=0;N<3;N++)I[N]=Math.round(parseFloat(B[N+1])*2.55);B[4]&&(I[3]=parseFloat(B[4]))}else return(B=A.match(S))?B[1]==="transparent"?[0,0,0,0]:(I=d[B[1]],I?(I[3]=1,I):null):null;for(N=0;N<3;N++)I[N]=_(I[N],0,255);return I[3]=_(I[3],0,1),I},O.get.hsl=function(A){if(!A)return null;var x=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/,C=A.match(x);if(C){var w=parseFloat(C[4]),M=(parseFloat(C[1])+360)%360,S=_(parseFloat(C[2]),0,100),I=_(parseFloat(C[3]),0,100),B=_(isNaN(w)?1:w,0,1);return[M,S,I,B]}return null},O.get.hwb=function(A){if(!A)return null;var x=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,C=A.match(x);if(C){var w=parseFloat(C[4]),M=(parseFloat(C[1])%360+360)%360,S=_(parseFloat(C[2]),0,100),I=_(parseFloat(C[3]),0,100),B=_(isNaN(w)?1:w,0,1);return[M,S,I,B]}return null},O.to.hex=function(){var A=c(arguments);return"#"+P(A[0])+P(A[1])+P(A[2])+(A[3]<1?P(Math.round(A[3]*255)):"")},O.to.rgb=function(){var A=c(arguments);return A.length<4||A[3]===1?"rgb("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+")":"rgba("+Math.round(A[0])+", "+Math.round(A[1])+", "+Math.round(A[2])+", "+A[3]+")"},O.to.rgb.percent=function(){var A=c(arguments),x=Math.round(A[0]/255*100),C=Math.round(A[1]/255*100),w=Math.round(A[2]/255*100);return A.length<4||A[3]===1?"rgb("+x+"%, "+C+"%, "+w+"%)":"rgba("+x+"%, "+C+"%, "+w+"%, "+A[3]+")"},O.to.hsl=function(){var A=c(arguments);return A.length<4||A[3]===1?"hsl("+A[0]+", "+A[1]+"%, "+A[2]+"%)":"hsla("+A[0]+", "+A[1]+"%, "+A[2]+"%, "+A[3]+")"},O.to.hwb=function(){var A=c(arguments),x="";return A.length>=4&&A[3]!==1&&(x=", "+A[3]),"hwb("+A[0]+", "+A[1]+"%, "+A[2]+"%"+x+")"},O.to.keyword=function(A){return F[A.slice(0,3)]};function _(A,x,C){return Math.min(Math.max(x,A),C)}function P(A){var x=A.toString(16).toUpperCase();return x.length<2?"0"+x:x}},57491:function(xt,T,v){"use strict";var d=v(42885),c=v(83338),F=[].slice,L=["keyword","gray","hex"],O={};Object.keys(c).forEach(function(I){O[F.call(c[I].labels).sort().join("")]=I});var _={};function P(I,B){if(!(this instanceof P))return new P(I,B);if(B&&B in L&&(B=null),B&&!(B in c))throw new Error("Unknown model: "+B);var N,G;if(I==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(I instanceof P)this.model=I.model,this.color=I.color.slice(),this.valpha=I.valpha;else if(typeof I=="string"){var W=d.get(I);if(W===null)throw new Error("Unable to parse color from string: "+I);this.model=W.model,G=c[this.model].channels,this.color=W.value.slice(0,G),this.valpha=typeof W.value[G]=="number"?W.value[G]:1}else if(I.length){this.model=B||"rgb",G=c[this.model].channels;var $=F.call(I,0,G);this.color=S($,G),this.valpha=typeof I[G]=="number"?I[G]:1}else if(typeof I=="number")I&=16777215,this.model="rgb",this.color=[I>>16&255,I>>8&255,I&255],this.valpha=1;else{this.valpha=1;var H=Object.keys(I);"alpha"in I&&(H.splice(H.indexOf("alpha"),1),this.valpha=typeof I.alpha=="number"?I.alpha:0);var j=H.sort().join("");if(!(j in O))throw new Error("Unable to parse color from object: "+JSON.stringify(I));this.model=O[j];var nt=c[this.model].labels,rt=[];for(N=0;N<nt.length;N++)rt.push(I[nt[N]]);this.color=S(rt)}if(_[this.model])for(G=c[this.model].channels,N=0;N<G;N++){var mt=_[this.model][N];mt&&(this.color[N]=mt(this.color[N]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}P.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(I){var B=this.model in d.to?this:this.rgb();B=B.round(typeof I=="number"?I:1);var N=B.valpha===1?B.color:B.color.concat(this.valpha);return d.to[B.model](N)},percentString:function(I){var B=this.rgb().round(typeof I=="number"?I:1),N=B.valpha===1?B.color:B.color.concat(this.valpha);return d.to.rgb.percent(N)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var I={},B=c[this.model].channels,N=c[this.model].labels,G=0;G<B;G++)I[N[G]]=this.color[G];return this.valpha!==1&&(I.alpha=this.valpha),I},unitArray:function(){var I=this.rgb().color;return I[0]/=255,I[1]/=255,I[2]/=255,this.valpha!==1&&I.push(this.valpha),I},unitObject:function(){var I=this.rgb().object();return I.r/=255,I.g/=255,I.b/=255,this.valpha!==1&&(I.alpha=this.valpha),I},round:function(I){return I=Math.max(I||0,0),new P(this.color.map(x(I)).concat(this.valpha),this.model)},alpha:function(I){return arguments.length?new P(this.color.concat(Math.max(0,Math.min(1,I))),this.model):this.valpha},red:C("rgb",0,w(255)),green:C("rgb",1,w(255)),blue:C("rgb",2,w(255)),hue:C(["hsl","hsv","hsl","hwb","hcg"],0,function(I){return(I%360+360)%360}),saturationl:C("hsl",1,w(100)),lightness:C("hsl",2,w(100)),saturationv:C("hsv",1,w(100)),value:C("hsv",2,w(100)),chroma:C("hcg",1,w(100)),gray:C("hcg",2,w(100)),white:C("hwb",1,w(100)),wblack:C("hwb",2,w(100)),cyan:C("cmyk",0,w(100)),magenta:C("cmyk",1,w(100)),yellow:C("cmyk",2,w(100)),black:C("cmyk",3,w(100)),x:C("xyz",0,w(100)),y:C("xyz",1,w(100)),z:C("xyz",2,w(100)),l:C("lab",0,w(100)),a:C("lab",1),b:C("lab",2),keyword:function(I){return arguments.length?new P(I):c[this.model].keyword(this.color)},hex:function(I){return arguments.length?new P(I):d.to.hex(this.rgb().round().color)},rgbNumber:function(){var I=this.rgb().color;return(I[0]&255)<<16|(I[1]&255)<<8|I[2]&255},luminosity:function(){for(var I=this.rgb().color,B=[],N=0;N<I.length;N++){var G=I[N]/255;B[N]=G<=.03928?G/12.92:Math.pow((G+.055)/1.055,2.4)}return .2126*B[0]+.7152*B[1]+.0722*B[2]},contrast:function(I){var B=this.luminosity(),N=I.luminosity();return B>N?(B+.05)/(N+.05):(N+.05)/(B+.05)},level:function(I){var B=this.contrast(I);return B>=7.1?"AAA":B>=4.5?"AA":""},isDark:function(){var I=this.rgb().color,B=(I[0]*299+I[1]*587+I[2]*114)/1e3;return B<128},isLight:function(){return!this.isDark()},negate:function(){for(var I=this.rgb(),B=0;B<3;B++)I.color[B]=255-I.color[B];return I},lighten:function(I){var B=this.hsl();return B.color[2]+=B.color[2]*I,B},darken:function(I){var B=this.hsl();return B.color[2]-=B.color[2]*I,B},saturate:function(I){var B=this.hsl();return B.color[1]+=B.color[1]*I,B},desaturate:function(I){var B=this.hsl();return B.color[1]-=B.color[1]*I,B},whiten:function(I){var B=this.hwb();return B.color[1]+=B.color[1]*I,B},blacken:function(I){var B=this.hwb();return B.color[2]+=B.color[2]*I,B},grayscale:function(){var I=this.rgb().color,B=I[0]*.3+I[1]*.59+I[2]*.11;return P.rgb(B,B,B)},fade:function(I){return this.alpha(this.valpha-this.valpha*I)},opaquer:function(I){return this.alpha(this.valpha+this.valpha*I)},rotate:function(I){var B=this.hsl(),N=B.color[0];return N=(N+I)%360,N=N<0?360+N:N,B.color[0]=N,B},mix:function(I,B){if(!I||!I.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof I);var N=I.rgb(),G=this.rgb(),W=B===void 0?.5:B,$=2*W-1,H=N.alpha()-G.alpha(),j=(($*H==-1?$:($+H)/(1+$*H))+1)/2,nt=1-j;return P.rgb(j*N.red()+nt*G.red(),j*N.green()+nt*G.green(),j*N.blue()+nt*G.blue(),N.alpha()*W+G.alpha()*(1-W))}},Object.keys(c).forEach(function(I){if(L.indexOf(I)===-1){var B=c[I].channels;P.prototype[I]=function(){if(this.model===I)return new P(this);if(arguments.length)return new P(arguments,I);var N=typeof arguments[B]=="number"?B:this.valpha;return new P(M(c[this.model][I].raw(this.color)).concat(N),I)},P[I]=function(N){return typeof N=="number"&&(N=S(F.call(arguments),B)),new P(N,I)}}});function A(I,B){return Number(I.toFixed(B))}function x(I){return function(B){return A(B,I)}}function C(I,B,N){return I=Array.isArray(I)?I:[I],I.forEach(function(G){(_[G]||(_[G]=[]))[B]=N}),I=I[0],function(G){var W;return arguments.length?(N&&(G=N(G)),W=this[I](),W.color[B]=G,W):(W=this[I]().color[B],N&&(W=N(W)),W)}}function w(I){return function(B){return Math.max(0,Math.min(I,B))}}function M(I){return Array.isArray(I)?I:[I]}function S(I,B){for(var N=0;N<B;N++)typeof I[N]!="number"&&(I[N]=0);return I}xt.exports=P},34663:function(xt,T,v){"use strict";v.d(T,{ZP:function(){return H},B8:function(){return mt}});function d(K,ht,J){K.prototype=ht.prototype=J,J.constructor=K}function c(K,ht){var J=Object.create(K.prototype);for(var At in ht)J[At]=ht[At];return J}function F(){}var L=.7,O=1/L,_="\\s*([+-]?\\d+)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",A="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x=/^#([0-9a-f]{3,8})$/,C=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),w=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),M=new RegExp("^rgba\\("+[_,_,_,P]+"\\)$"),S=new RegExp("^rgba\\("+[A,A,A,P]+"\\)$"),I=new RegExp("^hsl\\("+[P,A,A]+"\\)$"),B=new RegExp("^hsla\\("+[P,A,A,P]+"\\)$"),N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d(F,H,{copy:function(K){return Object.assign(new this.constructor,this,K)},displayable:function(){return this.rgb().displayable()},hex:G,formatHex:G,formatHsl:W,formatRgb:$,toString:$});function G(){return this.rgb().formatHex()}function W(){return Q(this).formatHsl()}function $(){return this.rgb().formatRgb()}function H(K){var ht,J;return K=(K+"").trim().toLowerCase(),(ht=x.exec(K))?(J=ht[1].length,ht=parseInt(ht[1],16),J===6?j(ht):J===3?new Ft(ht>>8&15|ht>>4&240,ht>>4&15|ht&240,(ht&15)<<4|ht&15,1):J===8?nt(ht>>24&255,ht>>16&255,ht>>8&255,(ht&255)/255):J===4?nt(ht>>12&15|ht>>8&240,ht>>8&15|ht>>4&240,ht>>4&15|ht&240,((ht&15)<<4|ht&15)/255):null):(ht=C.exec(K))?new Ft(ht[1],ht[2],ht[3],1):(ht=w.exec(K))?new Ft(ht[1]*255/100,ht[2]*255/100,ht[3]*255/100,1):(ht=M.exec(K))?nt(ht[1],ht[2],ht[3],ht[4]):(ht=S.exec(K))?nt(ht[1]*255/100,ht[2]*255/100,ht[3]*255/100,ht[4]):(ht=I.exec(K))?Xt(ht[1],ht[2]/100,ht[3]/100,1):(ht=B.exec(K))?Xt(ht[1],ht[2]/100,ht[3]/100,ht[4]):N.hasOwnProperty(K)?j(N[K]):K==="transparent"?new Ft(NaN,NaN,NaN,0):null}function j(K){return new Ft(K>>16&255,K>>8&255,K&255,1)}function nt(K,ht,J,At){return At<=0&&(K=ht=J=NaN),new Ft(K,ht,J,At)}function rt(K){return K instanceof F||(K=H(K)),K?(K=K.rgb(),new Ft(K.r,K.g,K.b,K.opacity)):new Ft}function mt(K,ht,J,At){return arguments.length===1?rt(K):new Ft(K,ht,J,At==null?1:At)}function Ft(K,ht,J,At){this.r=+K,this.g=+ht,this.b=+J,this.opacity=+At}d(Ft,mt,c(F,{brighter:function(K){return K=K==null?O:Math.pow(O,K),new Ft(this.r*K,this.g*K,this.b*K,this.opacity)},darker:function(K){return K=K==null?L:Math.pow(L,K),new Ft(this.r*K,this.g*K,this.b*K,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gt,formatHex:Gt,formatRgb:gt,toString:gt}));function Gt(){return"#"+st(this.r)+st(this.g)+st(this.b)}function gt(){var K=this.opacity;return K=isNaN(K)?1:Math.max(0,Math.min(1,K)),(K===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(K===1?")":", "+K+")")}function st(K){return K=Math.max(0,Math.min(255,Math.round(K)||0)),(K<16?"0":"")+K.toString(16)}function Xt(K,ht,J,At){return At<=0?K=ht=J=NaN:J<=0||J>=1?K=ht=NaN:ht<=0&&(K=NaN),new y(K,ht,J,At)}function Q(K){if(K instanceof y)return new y(K.h,K.s,K.l,K.opacity);if(K instanceof F||(K=H(K)),!K)return new y;if(K instanceof y)return K;K=K.rgb();var ht=K.r/255,J=K.g/255,At=K.b/255,Vt=Math.min(ht,J,At),pt=Math.max(ht,J,At),Lt=NaN,Tt=pt-Vt,kt=(pt+Vt)/2;return Tt?(ht===pt?Lt=(J-At)/Tt+(J<At)*6:J===pt?Lt=(At-ht)/Tt+2:Lt=(ht-J)/Tt+4,Tt/=kt<.5?pt+Vt:2-pt-Vt,Lt*=60):Tt=kt>0&&kt<1?0:Lt,new y(Lt,Tt,kt,K.opacity)}function qt(K,ht,J,At){return arguments.length===1?Q(K):new y(K,ht,J,At==null?1:At)}function y(K,ht,J,At){this.h=+K,this.s=+ht,this.l=+J,this.opacity=+At}d(y,qt,c(F,{brighter:function(K){return K=K==null?O:Math.pow(O,K),new y(this.h,this.s,this.l*K,this.opacity)},darker:function(K){return K=K==null?L:Math.pow(L,K),new y(this.h,this.s,this.l*K,this.opacity)},rgb:function(){var K=this.h%360+(this.h<0)*360,ht=isNaN(K)||isNaN(this.s)?0:this.s,J=this.l,At=J+(J<.5?J:1-J)*ht,Vt=2*J-At;return new Ft(Yt(K>=240?K-240:K+120,Vt,At),Yt(K,Vt,At),Yt(K<120?K+240:K-120,Vt,At),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var K=this.opacity;return K=isNaN(K)?1:Math.max(0,Math.min(1,K)),(K===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(K===1?")":", "+K+")")}}));function Yt(K,ht,J){return(K<60?ht+(J-ht)*K/60:K<180?J:K<240?ht+(J-ht)*(240-K)/60:ht)*255}},32718:function(xt,T,v){"use strict";v.d(T,{yD:function(){return d},_e:function(){return c},tw:function(){return F}});function d(L){return L*L*L}function c(L){return--L*L*L+1}function F(L){return((L*=2)<=1?L*L*L:(L-=2)*L*L+2)/2}},99868:function(xt,T,v){"use strict";v.r(T),v.d(T,{easeBack:function(){return Vt},easeBackIn:function(){return J},easeBackInOut:function(){return Vt},easeBackOut:function(){return At},easeBounce:function(){return Yt},easeBounceIn:function(){return y},easeBounceInOut:function(){return K},easeBounceOut:function(){return Yt},easeCircle:function(){return j},easeCircleIn:function(){return $},easeCircleInOut:function(){return j},easeCircleOut:function(){return H},easeCubic:function(){return O.tw},easeCubicIn:function(){return O.yD},easeCubicInOut:function(){return O.tw},easeCubicOut:function(){return O._e},easeElastic:function(){return jt},easeElasticIn:function(){return kt},easeElasticInOut:function(){return Wt},easeElasticOut:function(){return jt},easeExp:function(){return W},easeExpIn:function(){return N},easeExpInOut:function(){return W},easeExpOut:function(){return G},easeLinear:function(){return d},easePoly:function(){return x},easePolyIn:function(){return P},easePolyInOut:function(){return x},easePolyOut:function(){return A},easeQuad:function(){return L},easeQuadIn:function(){return c},easeQuadInOut:function(){return L},easeQuadOut:function(){return F},easeSin:function(){return I},easeSinIn:function(){return M},easeSinInOut:function(){return I},easeSinOut:function(){return S}});function d(zt){return+zt}function c(zt){return zt*zt}function F(zt){return zt*(2-zt)}function L(zt){return((zt*=2)<=1?zt*zt:--zt*(2-zt)+1)/2}var O=v(32718),_=3,P=function zt(bt){bt=+bt;function at(ft){return Math.pow(ft,bt)}return at.exponent=zt,at}(_),A=function zt(bt){bt=+bt;function at(ft){return 1-Math.pow(1-ft,bt)}return at.exponent=zt,at}(_),x=function zt(bt){bt=+bt;function at(ft){return((ft*=2)<=1?Math.pow(ft,bt):2-Math.pow(2-ft,bt))/2}return at.exponent=zt,at}(_),C=Math.PI,w=C/2;function M(zt){return+zt==1?1:1-Math.cos(zt*w)}function S(zt){return Math.sin(zt*w)}function I(zt){return(1-Math.cos(C*zt))/2}function B(zt){return(Math.pow(2,-10*zt)-.0009765625)*1.0009775171065494}function N(zt){return B(1-+zt)}function G(zt){return 1-B(zt)}function W(zt){return((zt*=2)<=1?B(1-zt):2-B(zt-1))/2}function $(zt){return 1-Math.sqrt(1-zt*zt)}function H(zt){return Math.sqrt(1- --zt*zt)}function j(zt){return((zt*=2)<=1?1-Math.sqrt(1-zt*zt):Math.sqrt(1-(zt-=2)*zt)+1)/2}var nt=4/11,rt=6/11,mt=8/11,Ft=3/4,Gt=9/11,gt=10/11,st=15/16,Xt=21/22,Q=63/64,qt=1/nt/nt;function y(zt){return 1-Yt(1-zt)}function Yt(zt){return(zt=+zt)<nt?qt*zt*zt:zt<mt?qt*(zt-=rt)*zt+Ft:zt<gt?qt*(zt-=Gt)*zt+st:qt*(zt-=Xt)*zt+Q}function K(zt){return((zt*=2)<=1?1-Yt(1-zt):Yt(zt-1)+1)/2}var ht=1.70158,J=function zt(bt){bt=+bt;function at(ft){return(ft=+ft)*ft*(bt*(ft-1)+ft)}return at.overshoot=zt,at}(ht),At=function zt(bt){bt=+bt;function at(ft){return--ft*ft*((ft+1)*bt+ft)+1}return at.overshoot=zt,at}(ht),Vt=function zt(bt){bt=+bt;function at(ft){return((ft*=2)<1?ft*ft*((bt+1)*ft-bt):(ft-=2)*ft*((bt+1)*ft+bt)+2)/2}return at.overshoot=zt,at}(ht),pt=2*Math.PI,Lt=1,Tt=.3,kt=function zt(bt,at){var ft=Math.asin(1/(bt=Math.max(1,bt)))*(at/=pt);function Pt(q){return bt*B(- --q)*Math.sin((ft-q)/at)}return Pt.amplitude=function(q){return zt(q,at*pt)},Pt.period=function(q){return zt(bt,q)},Pt}(Lt,Tt),jt=function zt(bt,at){var ft=Math.asin(1/(bt=Math.max(1,bt)))*(at/=pt);function Pt(q){return 1-bt*B(q=+q)*Math.sin((q+ft)/at)}return Pt.amplitude=function(q){return zt(q,at*pt)},Pt.period=function(q){return zt(bt,q)},Pt}(Lt,Tt),Wt=function zt(bt,at){var ft=Math.asin(1/(bt=Math.max(1,bt)))*(at/=pt);function Pt(q){return((q=q*2-1)<0?bt*B(-q)*Math.sin((ft-q)/at):2-bt*B(q)*Math.sin((ft+q)/at))/2}return Pt.amplitude=function(q){return zt(q,at*pt)},Pt.period=function(q){return zt(bt,q)},Pt}(Lt,Tt)},39751:function(xt,T,v){"use strict";v.d(T,{Z:function(){return F},M:function(){return L}});var d=v(45257),c=v(82265);function F(O,_){return((0,c.v)(_)?c.Z:L)(O,_)}function L(O,_){var P=_?_.length:0,A=O?Math.min(P,O.length):0,x=new Array(A),C=new Array(P),w;for(w=0;w<A;++w)x[w]=(0,d.Z)(O[w],_[w]);for(;w<P;++w)C[w]=_[w];return function(M){for(w=0;w<A;++w)C[w]=x[w](M);return C}}},53254:function(xt,T,v){"use strict";v.d(T,{Z:function(){return d}});function d(c,F){return c=+c,F=+F,function(L){return c*(1-L)+F*L}}},82265:function(xt,T,v){"use strict";v.d(T,{Z:function(){return d},v:function(){return c}});function d(F,L){L||(L=[]);var O=F?Math.min(L.length,F.length):0,_=L.slice(),P;return function(A){for(P=0;P<O;++P)_[P]=F[P]*(1-A)+L[P]*A;return _}}function c(F){return ArrayBuffer.isView(F)&&!(F instanceof DataView)}},45257:function(xt,T,v){"use strict";v.d(T,{Z:function(){return Ft}});var d=v(34663);function c(Gt,gt,st,Xt,Q){var qt=Gt*Gt,y=qt*Gt;return((1-3*Gt+3*qt-y)*gt+(4-6*qt+3*y)*st+(1+3*Gt+3*qt-3*y)*Xt+y*Q)/6}function F(Gt){var gt=Gt.length-1;return function(st){var Xt=st<=0?st=0:st>=1?(st=1,gt-1):Math.floor(st*gt),Q=Gt[Xt],qt=Gt[Xt+1],y=Xt>0?Gt[Xt-1]:2*Q-qt,Yt=Xt<gt-1?Gt[Xt+2]:2*qt-Q;return c((st-Xt/gt)*gt,y,Q,qt,Yt)}}function L(Gt){var gt=Gt.length;return function(st){var Xt=Math.floor(((st%=1)<0?++st:st)*gt),Q=Gt[(Xt+gt-1)%gt],qt=Gt[Xt%gt],y=Gt[(Xt+1)%gt],Yt=Gt[(Xt+2)%gt];return c((st-Xt/gt)*gt,Q,qt,y,Yt)}}function O(Gt){return function(){return Gt}}function _(Gt,gt){return function(st){return Gt+st*gt}}function P(Gt,gt,st){return Gt=Math.pow(Gt,st),gt=Math.pow(gt,st)-Gt,st=1/st,function(Xt){return Math.pow(Gt+Xt*gt,st)}}function A(Gt,gt){var st=gt-Gt;return st?_(Gt,st>180||st<-180?st-360*Math.round(st/360):st):constant(isNaN(Gt)?gt:Gt)}function x(Gt){return(Gt=+Gt)==1?C:function(gt,st){return st-gt?P(gt,st,Gt):O(isNaN(gt)?st:gt)}}function C(Gt,gt){var st=gt-Gt;return st?_(Gt,st):O(isNaN(Gt)?gt:Gt)}var w=function Gt(gt){var st=x(gt);function Xt(Q,qt){var y=st((Q=(0,d.B8)(Q)).r,(qt=(0,d.B8)(qt)).r),Yt=st(Q.g,qt.g),K=st(Q.b,qt.b),ht=C(Q.opacity,qt.opacity);return function(J){return Q.r=y(J),Q.g=Yt(J),Q.b=K(J),Q.opacity=ht(J),Q+""}}return Xt.gamma=Gt,Xt}(1);function M(Gt){return function(gt){var st=gt.length,Xt=new Array(st),Q=new Array(st),qt=new Array(st),y,Yt;for(y=0;y<st;++y)Yt=(0,d.B8)(gt[y]),Xt[y]=Yt.r||0,Q[y]=Yt.g||0,qt[y]=Yt.b||0;return Xt=Gt(Xt),Q=Gt(Q),qt=Gt(qt),Yt.opacity=1,function(K){return Yt.r=Xt(K),Yt.g=Q(K),Yt.b=qt(K),Yt+""}}}var S=M(F),I=M(L),B=v(39751);function N(Gt,gt){var st=new Date;return Gt=+Gt,gt=+gt,function(Xt){return st.setTime(Gt*(1-Xt)+gt*Xt),st}}var G=v(53254);function W(Gt,gt){var st={},Xt={},Q;(Gt===null||typeof Gt!="object")&&(Gt={}),(gt===null||typeof gt!="object")&&(gt={});for(Q in gt)Q in Gt?st[Q]=Ft(Gt[Q],gt[Q]):Xt[Q]=gt[Q];return function(qt){for(Q in st)Xt[Q]=st[Q](qt);return Xt}}var $=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,H=new RegExp($.source,"g");function j(Gt){return function(){return Gt}}function nt(Gt){return function(gt){return Gt(gt)+""}}function rt(Gt,gt){var st=$.lastIndex=H.lastIndex=0,Xt,Q,qt,y=-1,Yt=[],K=[];for(Gt=Gt+"",gt=gt+"";(Xt=$.exec(Gt))&&(Q=H.exec(gt));)(qt=Q.index)>st&&(qt=gt.slice(st,qt),Yt[y]?Yt[y]+=qt:Yt[++y]=qt),(Xt=Xt[0])===(Q=Q[0])?Yt[y]?Yt[y]+=Q:Yt[++y]=Q:(Yt[++y]=null,K.push({i:y,x:(0,G.Z)(Xt,Q)})),st=H.lastIndex;return st<gt.length&&(qt=gt.slice(st),Yt[y]?Yt[y]+=qt:Yt[++y]=qt),Yt.length<2?K[0]?nt(K[0].x):j(gt):(gt=K.length,function(ht){for(var J=0,At;J<gt;++J)Yt[(At=K[J]).i]=At.x(ht);return Yt.join("")})}var mt=v(82265);function Ft(Gt,gt){var st=typeof gt,Xt;return gt==null||st==="boolean"?O(gt):(st==="number"?G.Z:st==="string"?(Xt=(0,d.ZP)(gt))?(gt=Xt,w):rt:gt instanceof d.ZP?w:gt instanceof Date?N:(0,mt.v)(gt)?mt.Z:Array.isArray(gt)?B.M:typeof gt.valueOf!="function"&&typeof gt.toString!="function"||isNaN(gt)?W:G.Z)(Gt,gt)}},89831:function(xt,T){(function(v,d){d(T)})(this,function(v){"use strict";function d(gt,st){return c(gt)||F(gt,st)||L()}function c(gt){if(Array.isArray(gt))return gt}function F(gt,st){var Xt=[],Q=!0,qt=!1,y=void 0;try{for(var Yt=gt[Symbol.iterator](),K;!(Q=(K=Yt.next()).done)&&(Xt.push(K.value),!(st&&Xt.length===st));Q=!0);}catch(ht){qt=!0,y=ht}finally{try{!Q&&Yt.return!=null&&Yt.return()}finally{if(qt)throw y}}return Xt}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function O(gt,st,Xt,Q){gt=gt.filter(function(Tt,kt){var jt=st(Tt,kt),Wt=Xt(Tt,kt);return jt!=null&&isFinite(jt)&&Wt!=null&&isFinite(Wt)}),Q&&gt.sort(function(Tt,kt){return st(Tt)-st(kt)});for(var qt=gt.length,y=new Float64Array(qt),Yt=new Float64Array(qt),K=0,ht=0,J,At,Vt,pt=0;pt<qt;)Vt=gt[pt],y[pt]=J=+st(Vt,pt,gt),Yt[pt]=At=+Xt(Vt,pt,gt),++pt,K+=(J-K)/pt,ht+=(At-ht)/pt;for(var Lt=0;Lt<qt;++Lt)y[Lt]-=K,Yt[Lt]-=ht;return[y,Yt,K,ht]}function _(gt,st,Xt,Q){for(var qt=0,y=0,Yt=gt.length;y<Yt;y++){var K=gt[y],ht=+st(K,y,gt),J=+Xt(K,y,gt);ht!=null&&isFinite(ht)&&J!=null&&isFinite(J)&&Q(ht,J,qt++)}}function P(gt,st,Xt,Q,qt){var y=0,Yt=0;return _(gt,st,Xt,function(K,ht){var J=ht-qt(K),At=ht-Q;y+=J*J,Yt+=At*At}),1-y/Yt}function A(gt){return Math.atan2(gt[1][1]-gt[0][1],gt[1][0]-gt[0][0])*180/Math.PI}function x(gt){return[(gt[0][0]+gt[1][0])/2,(gt[0][1]+gt[1][1])/2]}function C(gt,st,Xt){for(var Q=Math.log(st-gt)*Math.LOG10E+1|0,qt=1*Math.pow(10,-Q/2-1),y=1e4,Yt=[ht(gt),ht(st)],K=0;J(Yt)&&K<y;);return Yt;function ht(At){return[At,Xt(At)]}function J(At){K++;for(var Vt=At.length,pt=!1,Lt=0;Lt<Vt-1;Lt++){var Tt=At[Lt],kt=At[Lt+1],jt=x([Tt,kt]),Wt=ht(jt[0]),zt=A([Tt,jt]),bt=A([Tt,Wt]),at=Math.abs(zt-bt);at>qt&&(At.splice(Lt+1,0,Wt),pt=!0)}return pt}}function w(gt,st,Xt,Q){var qt=Q-gt*gt,y=Math.abs(qt)<1e-24?0:(Xt-gt*st)/qt,Yt=st-y*gt;return[Yt,y]}function M(){var gt=function(y){return y[0]},st=function(y){return y[1]},Xt;function Q(qt){var y=0,Yt=0,K=0,ht=0,J=0,At=0,Vt=Xt?+Xt[0]:Infinity,pt=Xt?+Xt[1]:-Infinity;_(qt,gt,st,function(bt,at){var ft=Math.log(at),Pt=bt*at;++y,Yt+=(at-Yt)/y,ht+=(Pt-ht)/y,At+=(bt*Pt-At)/y,K+=(at*ft-K)/y,J+=(Pt*ft-J)/y,Xt||(bt<Vt&&(Vt=bt),bt>pt&&(pt=bt))});var Lt=w(ht/Yt,K/Yt,J/Yt,At/Yt),Tt=d(Lt,2),kt=Tt[0],jt=Tt[1];kt=Math.exp(kt);var Wt=function(at){return kt*Math.exp(jt*at)},zt=C(Vt,pt,Wt);return zt.a=kt,zt.b=jt,zt.predict=Wt,zt.rSquared=P(qt,gt,st,Yt,Wt),zt}return Q.domain=function(qt){return arguments.length?(Xt=qt,Q):Xt},Q.x=function(qt){return arguments.length?(gt=qt,Q):gt},Q.y=function(qt){return arguments.length?(st=qt,Q):st},Q}function S(){var gt=function(y){return y[0]},st=function(y){return y[1]},Xt;function Q(qt){var y=0,Yt=0,K=0,ht=0,J=0,At=Xt?+Xt[0]:Infinity,Vt=Xt?+Xt[1]:-Infinity;_(qt,gt,st,function(zt,bt){++y,Yt+=(zt-Yt)/y,K+=(bt-K)/y,ht+=(zt*bt-ht)/y,J+=(zt*zt-J)/y,Xt||(zt<At&&(At=zt),zt>Vt&&(Vt=zt))});var pt=w(Yt,K,ht,J),Lt=d(pt,2),Tt=Lt[0],kt=Lt[1],jt=function(bt){return kt*bt+Tt},Wt=[[At,jt(At)],[Vt,jt(Vt)]];return Wt.a=kt,Wt.b=Tt,Wt.predict=jt,Wt.rSquared=P(qt,gt,st,K,jt),Wt}return Q.domain=function(qt){return arguments.length?(Xt=qt,Q):Xt},Q.x=function(qt){return arguments.length?(gt=qt,Q):gt},Q.y=function(qt){return arguments.length?(st=qt,Q):st},Q}function I(gt){gt.sort(function(Xt,Q){return Xt-Q});var st=gt.length/2;return st%1==0?(gt[st-1]+gt[st])/2:gt[Math.floor(st)]}var B=2,N=1e-12;function G(){var gt=function(y){return y[0]},st=function(y){return y[1]},Xt=.3;function Q(qt){for(var y=O(qt,gt,st,!0),Yt=d(y,4),K=Yt[0],ht=Yt[1],J=Yt[2],At=Yt[3],Vt=K.length,pt=Math.max(2,~~(Xt*Vt)),Lt=new Float64Array(Vt),Tt=new Float64Array(Vt),kt=new Float64Array(Vt).fill(1),jt=-1;++jt<=B;){for(var Wt=[0,pt-1],zt=0;zt<Vt;++zt){for(var bt=K[zt],at=Wt[0],ft=Wt[1],Pt=bt-K[at]>K[ft]-bt?at:ft,q=0,ut=0,Et=0,Nt=0,ee=0,ge=1/Math.abs(K[Pt]-bt||1),De=at;De<=ft;++De){var er=K[De],Re=ht[De],Ke=W(Math.abs(bt-er)*ge)*kt[De],hr=er*Ke;q+=Ke,ut+=hr,Et+=Re*Ke,Nt+=Re*hr,ee+=er*hr}var Sr=w(ut/q,Et/q,Nt/q,ee/q),Rr=d(Sr,2),vr=Rr[0],en=Rr[1];Lt[zt]=vr+en*bt,Tt[zt]=Math.abs(ht[zt]-Lt[zt]),$(K,zt+1,Wt)}if(jt===B)break;var gn=I(Tt);if(Math.abs(gn)<N)break;for(var hn=0,vn,Wn;hn<Vt;++hn)vn=Tt[hn]/(6*gn),kt[hn]=vn>=1?N:(Wn=1-vn*vn)*Wn}return H(K,Lt,J,At)}return Q.bandwidth=function(qt){return arguments.length?(Xt=qt,Q):Xt},Q.x=function(qt){return arguments.length?(gt=qt,Q):gt},Q.y=function(qt){return arguments.length?(st=qt,Q):st},Q}function W(gt){return(gt=1-gt*gt*gt)*gt*gt}function $(gt,st,Xt){var Q=gt[st],qt=Xt[0],y=Xt[1]+1;if(!(y>=gt.length))for(;st>qt&&gt[y]-Q<=Q-gt[qt];)Xt[0]=++qt,Xt[1]=y,++y}function H(gt,st,Xt,Q){for(var qt=gt.length,y=[],Yt=0,K=0,ht=[],J;Yt<qt;++Yt)J=gt[Yt]+Xt,ht[0]===J?ht[1]+=(st[Yt]-ht[1])/++K:(K=0,ht[1]+=Q,ht=[J,st[Yt]],y.push(ht));return ht[1]+=Q,y}function j(){var gt=function(Yt){return Yt[0]},st=function(Yt){return Yt[1]},Xt=Math.E,Q;function qt(y){var Yt=0,K=0,ht=0,J=0,At=0,Vt=Q?+Q[0]:Infinity,pt=Q?+Q[1]:-Infinity,Lt=Math.log(Xt);_(y,gt,st,function(at,ft){var Pt=Math.log(at)/Lt;++Yt,K+=(Pt-K)/Yt,ht+=(ft-ht)/Yt,J+=(Pt*ft-J)/Yt,At+=(Pt*Pt-At)/Yt,Q||(at<Vt&&(Vt=at),at>pt&&(pt=at))});var Tt=w(K,ht,J,At),kt=d(Tt,2),jt=kt[0],Wt=kt[1],zt=function(ft){return Wt*Math.log(ft)/Lt+jt},bt=C(Vt,pt,zt);return bt.a=Wt,bt.b=jt,bt.predict=zt,bt.rSquared=P(y,gt,st,ht,zt),bt}return qt.domain=function(y){return arguments.length?(Q=y,qt):Q},qt.x=function(y){return arguments.length?(gt=y,qt):gt},qt.y=function(y){return arguments.length?(st=y,qt):st},qt.base=function(y){return arguments.length?(Xt=y,qt):Xt},qt}function nt(){var gt=function(y){return y[0]},st=function(y){return y[1]},Xt;function Q(qt){var y=O(qt,gt,st),Yt=d(y,4),K=Yt[0],ht=Yt[1],J=Yt[2],At=Yt[3],Vt=K.length,pt=0,Lt=0,Tt=0,kt=0,jt=0,Wt,zt,bt,at;for(Wt=0;Wt<Vt;)zt=K[Wt],bt=ht[Wt++],at=zt*zt,pt+=(at-pt)/Wt,Lt+=(at*zt-Lt)/Wt,Tt+=(at*at-Tt)/Wt,kt+=(zt*bt-kt)/Wt,jt+=(at*bt-jt)/Wt;var ft=0,Pt=0,q=Xt?+Xt[0]:Infinity,ut=Xt?+Xt[1]:-Infinity;_(qt,gt,st,function(Ke,hr){Pt++,ft+=(hr-ft)/Pt,Xt||(Ke<q&&(q=Ke),Ke>ut&&(ut=Ke))});var Et=Tt-pt*pt,Nt=pt*Et-Lt*Lt,ee=(jt*pt-kt*Lt)/Nt,ge=(kt*Et-jt*Lt)/Nt,De=-ee*pt,er=function(hr){return hr=hr-J,ee*hr*hr+ge*hr+De+At},Re=C(q,ut,er);return Re.a=ee,Re.b=ge-2*ee*J,Re.c=De-ge*J+ee*J*J+At,Re.predict=er,Re.rSquared=P(qt,gt,st,ft,er),Re}return Q.domain=function(qt){return arguments.length?(Xt=qt,Q):Xt},Q.x=function(qt){return arguments.length?(gt=qt,Q):gt},Q.y=function(qt){return arguments.length?(st=qt,Q):st},Q}function rt(){var gt=function(Yt){return Yt[0]},st=function(Yt){return Yt[1]},Xt=3,Q;function qt(y){if(Xt===1){var Yt=S().x(gt).y(st).domain(Q)(y);return Yt.coefficients=[Yt.b,Yt.a],delete Yt.a,delete Yt.b,Yt}if(Xt===2){var K=nt().x(gt).y(st).domain(Q)(y);return K.coefficients=[K.c,K.b,K.a],delete K.a,delete K.b,delete K.c,K}var ht=O(y,gt,st),J=d(ht,4),At=J[0],Vt=J[1],pt=J[2],Lt=J[3],Tt=At.length,kt=[],jt=[],Wt=Xt+1,zt=0,bt=0,at=Q?+Q[0]:Infinity,ft=Q?+Q[1]:-Infinity;_(y,gt,st,function(er,Re){++bt,zt+=(Re-zt)/bt,Q||(er<at&&(at=er),er>ft&&(ft=er))});var Pt,q,ut,Et,Nt;for(Pt=0;Pt<Wt;++Pt){for(ut=0,Et=0;ut<Tt;++ut)Et+=Math.pow(At[ut],Pt)*Vt[ut];for(kt.push(Et),Nt=new Float64Array(Wt),q=0;q<Wt;++q){for(ut=0,Et=0;ut<Tt;++ut)Et+=Math.pow(At[ut],Pt+q);Nt[q]=Et}jt.push(Nt)}jt.push(kt);var ee=Ft(jt),ge=function(Re){Re-=pt;var Ke=Lt+ee[0]+ee[1]*Re+ee[2]*Re*Re;for(Pt=3;Pt<Wt;++Pt)Ke+=ee[Pt]*Math.pow(Re,Pt);return Ke},De=C(at,ft,ge);return De.coefficients=mt(Wt,ee,-pt,Lt),De.predict=ge,De.rSquared=P(y,gt,st,zt,ge),De}return qt.domain=function(y){return arguments.length?(Q=y,qt):Q},qt.x=function(y){return arguments.length?(gt=y,qt):gt},qt.y=function(y){return arguments.length?(st=y,qt):st},qt.order=function(y){return arguments.length?(Xt=y,qt):Xt},qt}function mt(gt,st,Xt,Q){var qt=Array(gt),y,Yt,K,ht;for(y=0;y<gt;++y)qt[y]=0;for(y=gt-1;y>=0;--y)for(K=st[y],ht=1,qt[y]+=K,Yt=1;Yt<=y;++Yt)ht*=(y+1-Yt)/Yt,qt[y-Yt]+=K*Math.pow(Xt,Yt)*ht;return qt[0]+=Q,qt}function Ft(gt){var st=gt.length-1,Xt=[],Q,qt,y,Yt,K;for(Q=0;Q<st;++Q){for(Yt=Q,qt=Q+1;qt<st;++qt)Math.abs(gt[Q][qt])>Math.abs(gt[Q][Yt])&&(Yt=qt);for(y=Q;y<st+1;++y)K=gt[y][Q],gt[y][Q]=gt[y][Yt],gt[y][Yt]=K;for(qt=Q+1;qt<st;++qt)for(y=st;y>=Q;y--)gt[y][qt]-=gt[y][Q]*gt[Q][qt]/gt[Q][Q]}for(qt=st-1;qt>=0;--qt){for(K=0,y=qt+1;y<st;++y)K+=gt[y][qt]*Xt[y];Xt[qt]=(gt[st][qt]-K)/gt[qt][qt]}return Xt}function Gt(){var gt=function(y){return y[0]},st=function(y){return y[1]},Xt;function Q(qt){var y=0,Yt=0,K=0,ht=0,J=0,At=0,Vt=Xt?+Xt[0]:Infinity,pt=Xt?+Xt[1]:-Infinity;_(qt,gt,st,function(bt,at){var ft=Math.log(bt),Pt=Math.log(at);++y,Yt+=(ft-Yt)/y,K+=(Pt-K)/y,ht+=(ft*Pt-ht)/y,J+=(ft*ft-J)/y,At+=(at-At)/y,Xt||(bt<Vt&&(Vt=bt),bt>pt&&(pt=bt))});var Lt=w(Yt,K,ht,J),Tt=d(Lt,2),kt=Tt[0],jt=Tt[1];kt=Math.exp(kt);var Wt=function(at){return kt*Math.pow(at,jt)},zt=C(Vt,pt,Wt);return zt.a=kt,zt.b=jt,zt.predict=Wt,zt.rSquared=P(qt,gt,st,At,Wt),zt}return Q.domain=function(qt){return arguments.length?(Xt=qt,Q):Xt},Q.x=function(qt){return arguments.length?(gt=qt,Q):gt},Q.y=function(qt){return arguments.length?(st=qt,Q):st},Q}v.regressionExp=M,v.regressionLinear=S,v.regressionLoess=G,v.regressionLog=j,v.regressionPoly=rt,v.regressionPow=Gt,v.regressionQuad=nt,Object.defineProperty(v,"__esModule",{value:!0})})},7802:function(xt,T,v){"use strict";v.d(T,{HT:function(){return B}});var d=0,c=0,F=0,L=1e3,O,_,P=0,A=0,x=0,C=typeof performance=="object"&&performance.now?performance:Date,w=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(j){setTimeout(j,17)};function M(){return A||(w(S),A=C.now()+x)}function S(){A=0}function I(){this._call=this._time=this._next=null}I.prototype=B.prototype={constructor:I,restart:function(j,nt,rt){if(typeof j!="function")throw new TypeError("callback is not a function");rt=(rt==null?M():+rt)+(nt==null?0:+nt),!this._next&&_!==this&&(_?_._next=this:O=this,_=this),this._call=j,this._time=rt,H()},stop:function(){this._call&&(this._call=null,this._time=Infinity,H())}};function B(j,nt,rt){var mt=new I;return mt.restart(j,nt,rt),mt}function N(){M(),++d;for(var j=O,nt;j;)(nt=A-j._time)>=0&&j._call.call(null,nt),j=j._next;--d}function G(){A=(P=C.now())+x,d=c=0;try{N()}finally{d=0,$(),A=0}}function W(){var j=C.now(),nt=j-P;nt>L&&(x-=nt,P=j)}function $(){for(var j,nt=O,rt,mt=Infinity;nt;)nt._call?(mt>nt._time&&(mt=nt._time),j=nt,nt=nt._next):(rt=nt._next,nt._next=null,nt=j?j._next=rt:O=rt);_=j,H(mt)}function H(j){if(!d){c&&(c=clearTimeout(c));var nt=j-A;nt>24?(j<Infinity&&(c=setTimeout(G,j-C.now()-x)),F&&(F=clearInterval(F))):(F||(P=C.now(),F=setInterval(W,L)),d=1,w(G))}}},92546:function(xt,T,v){xt.exports={graphlib:v(76626),layout:v(47194),debug:v(11303),util:{time:v(53063).time,notime:v(53063).notime},version:v(11897)}},81255:function(xt,T,v){"use strict";var d=v(72361),c=v(39240);xt.exports={run:F,undo:O};function F(_){var P=_.graph().acyclicer==="greedy"?c(_,A(_)):L(_);d.forEach(P,function(x){var C=_.edge(x);_.removeEdge(x),C.forwardName=x.name,C.reversed=!0,_.setEdge(x.w,x.v,C,d.uniqueId("rev"))});function A(x){return function(C){return x.edge(C).weight}}}function L(_){var P=[],A={},x={};function C(w){d.has(x,w)||(x[w]=!0,A[w]=!0,d.forEach(_.outEdges(w),function(M){d.has(A,M.w)?P.push(M):C(M.w)}),delete A[w])}return d.forEach(_.nodes(),C),P}function O(_){d.forEach(_.edges(),function(P){var A=_.edge(P);if(A.reversed){_.removeEdge(P);var x=A.forwardName;delete A.reversed,delete A.forwardName,_.setEdge(P.w,P.v,A,x)}})}},60765:function(xt,T,v){var d=v(72361),c=v(53063);xt.exports=F;function F(O){function _(P){var A=O.children(P),x=O.node(P);if(A.length&&d.forEach(A,_),d.has(x,"minRank")){x.borderLeft=[],x.borderRight=[];for(var C=x.minRank,w=x.maxRank+1;C<w;++C)L(O,"borderLeft","_bl",P,x,C),L(O,"borderRight","_br",P,x,C)}}d.forEach(O.children(),_)}function L(O,_,P,A,x,C){var w={width:0,height:0,rank:C,borderType:_},M=x[_][C-1],S=c.addDummyNode(O,"border",w,P);x[_][C]=S,O.setParent(S,A),M&&O.setEdge(M,S,{weight:1})}},13257:function(xt,T,v){"use strict";var d=v(72361);xt.exports={adjust:c,undo:F};function c(C){var w=C.graph().rankdir.toLowerCase();(w==="lr"||w==="rl")&&L(C)}function F(C){var w=C.graph().rankdir.toLowerCase();(w==="bt"||w==="rl")&&_(C),(w==="lr"||w==="rl")&&(A(C),L(C))}function L(C){d.forEach(C.nodes(),function(w){O(C.node(w))}),d.forEach(C.edges(),function(w){O(C.edge(w))})}function O(C){var w=C.width;C.width=C.height,C.height=w}function _(C){d.forEach(C.nodes(),function(w){P(C.node(w))}),d.forEach(C.edges(),function(w){var M=C.edge(w);d.forEach(M.points,P),d.has(M,"y")&&P(M)})}function P(C){C.y=-C.y}function A(C){d.forEach(C.nodes(),function(w){x(C.node(w))}),d.forEach(C.edges(),function(w){var M=C.edge(w);d.forEach(M.points,x),d.has(M,"x")&&x(M)})}function x(C){var w=C.x;C.x=C.y,C.y=w}},21135:function(xt){xt.exports=T;function T(){var c={};c._next=c._prev=c,this._sentinel=c}T.prototype.dequeue=function(){var c=this._sentinel,F=c._prev;if(F!==c)return v(F),F},T.prototype.enqueue=function(c){var F=this._sentinel;c._prev&&c._next&&v(c),c._next=F._next,F._next._prev=c,F._next=c,c._prev=F},T.prototype.toString=function(){for(var c=[],F=this._sentinel,L=F._prev;L!==F;)c.push(JSON.stringify(L,d)),L=L._prev;return"["+c.join(", ")+"]"};function v(c){c._prev._next=c._next,c._next._prev=c._prev,delete c._next,delete c._prev}function d(c,F){if(c!=="_next"&&c!=="_prev")return F}},11303:function(xt,T,v){var d=v(72361),c=v(53063),F=v(76626).Graph;xt.exports={debugOrdering:L};function L(O){var _=c.buildLayerMatrix(O),P=new F({compound:!0,multigraph:!0}).setGraph({});return d.forEach(O.nodes(),function(A){P.setNode(A,{label:A}),P.setParent(A,"layer"+O.node(A).rank)}),d.forEach(O.edges(),function(A){P.setEdge(A.v,A.w,{},A.name)}),d.forEach(_,function(A,x){var C="layer"+x;P.setNode(C,{rank:"same"}),d.reduce(A,function(w,M){return P.setEdge(w,M,{style:"invis"}),M})}),P}},76626:function(xt,T,v){var d;try{d=v(75172)}catch(c){}d||(d=window.graphlib),xt.exports=d},39240:function(xt,T,v){var d=v(72361),c=v(76626).Graph,F=v(21135);xt.exports=O;var L=d.constant(1);function O(C,w){if(C.nodeCount()<=1)return[];var M=A(C,w||L),S=_(M.graph,M.buckets,M.zeroIdx);return d.flatten(d.map(S,function(I){return C.outEdges(I.v,I.w)}),!0)}function _(C,w,M){for(var S=[],I=w[w.length-1],B=w[0],N;C.nodeCount();){for(;N=B.dequeue();)P(C,w,M,N);for(;N=I.dequeue();)P(C,w,M,N);if(C.nodeCount()){for(var G=w.length-2;G>0;--G)if(N=w[G].dequeue(),N){S=S.concat(P(C,w,M,N,!0));break}}}return S}function P(C,w,M,S,I){var B=I?[]:void 0;return d.forEach(C.inEdges(S.v),function(N){var G=C.edge(N),W=C.node(N.v);I&&B.push({v:N.v,w:N.w}),W.out-=G,x(w,M,W)}),d.forEach(C.outEdges(S.v),function(N){var G=C.edge(N),W=N.w,$=C.node(W);$.in-=G,x(w,M,$)}),C.removeNode(S.v),B}function A(C,w){var M=new c,S=0,I=0;d.forEach(C.nodes(),function(G){M.setNode(G,{v:G,in:0,out:0})}),d.forEach(C.edges(),function(G){var W=M.edge(G.v,G.w)||0,$=w(G),H=W+$;M.setEdge(G.v,G.w,H),I=Math.max(I,M.node(G.v).out+=$),S=Math.max(S,M.node(G.w).in+=$)});var B=d.range(I+S+3).map(function(){return new F}),N=S+1;return d.forEach(M.nodes(),function(G){x(B,N,M.node(G))}),{graph:M,buckets:B,zeroIdx:N}}function x(C,w,M){M.out?M.in?C[M.out-M.in+w].enqueue(M):C[C.length-1].enqueue(M):C[0].enqueue(M)}},47194:function(xt,T,v){"use strict";var d=v(72361),c=v(81255),F=v(27163),L=v(64505),O=v(53063).normalizeRanks,_=v(71970),P=v(53063).removeEmptyRanks,A=v(31733),x=v(60765),C=v(13257),w=v(62852),M=v(93021),S=v(53063),I=v(76626).Graph;xt.exports=B;function B(Tt,kt){var jt=kt&&kt.debugTiming?S.time:S.notime;jt("layout",function(){var Wt=jt("  buildLayoutGraph",function(){return Gt(Tt)});jt("  runLayout",function(){N(Wt,jt)}),jt("  updateInputGraph",function(){G(Tt,Wt)})})}function N(Tt,kt){kt("    makeSpaceForEdgeLabels",function(){gt(Tt)}),kt("    removeSelfEdges",function(){J(Tt)}),kt("    acyclic",function(){c.run(Tt)}),kt("    nestingGraph.run",function(){A.run(Tt)}),kt("    rank",function(){L(S.asNonCompoundGraph(Tt))}),kt("    injectEdgeLabelProxies",function(){st(Tt)}),kt("    removeEmptyRanks",function(){P(Tt)}),kt("    nestingGraph.cleanup",function(){A.cleanup(Tt)}),kt("    normalizeRanks",function(){O(Tt)}),kt("    assignRankMinMax",function(){Xt(Tt)}),kt("    removeEdgeLabelProxies",function(){Q(Tt)}),kt("    normalize.run",function(){F.run(Tt)}),kt("    parentDummyChains",function(){_(Tt)}),kt("    addBorderSegments",function(){x(Tt)}),kt("    order",function(){w(Tt)}),kt("    insertSelfEdges",function(){At(Tt)}),kt("    adjustCoordinateSystem",function(){C.adjust(Tt)}),kt("    position",function(){M(Tt)}),kt("    positionSelfEdges",function(){Vt(Tt)}),kt("    removeBorderNodes",function(){ht(Tt)}),kt("    normalize.undo",function(){F.undo(Tt)}),kt("    fixupEdgeLabelCoords",function(){Yt(Tt)}),kt("    undoCoordinateSystem",function(){C.undo(Tt)}),kt("    translateGraph",function(){qt(Tt)}),kt("    assignNodeIntersects",function(){y(Tt)}),kt("    reversePoints",function(){K(Tt)}),kt("    acyclic.undo",function(){c.undo(Tt)})}function G(Tt,kt){d.forEach(Tt.nodes(),function(jt){var Wt=Tt.node(jt),zt=kt.node(jt);Wt&&(Wt.x=zt.x,Wt.y=zt.y,kt.children(jt).length&&(Wt.width=zt.width,Wt.height=zt.height))}),d.forEach(Tt.edges(),function(jt){var Wt=Tt.edge(jt),zt=kt.edge(jt);Wt.points=zt.points,d.has(zt,"x")&&(Wt.x=zt.x,Wt.y=zt.y)}),Tt.graph().width=kt.graph().width,Tt.graph().height=kt.graph().height}var W=["nodesep","edgesep","ranksep","marginx","marginy"],$={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},H=["acyclicer","ranker","rankdir","align"],j=["width","height"],nt={width:0,height:0},rt=["minlen","weight","width","height","labeloffset"],mt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Ft=["labelpos"];function Gt(Tt){var kt=new I({multigraph:!0,compound:!0}),jt=Lt(Tt.graph());return kt.setGraph(d.merge({},$,pt(jt,W),d.pick(jt,H))),d.forEach(Tt.nodes(),function(Wt){var zt=Lt(Tt.node(Wt));kt.setNode(Wt,d.defaults(pt(zt,j),nt)),kt.setParent(Wt,Tt.parent(Wt))}),d.forEach(Tt.edges(),function(Wt){var zt=Lt(Tt.edge(Wt));kt.setEdge(Wt,d.merge({},mt,pt(zt,rt),d.pick(zt,Ft)))}),kt}function gt(Tt){var kt=Tt.graph();kt.ranksep/=2,d.forEach(Tt.edges(),function(jt){var Wt=Tt.edge(jt);Wt.minlen*=2,Wt.labelpos.toLowerCase()!=="c"&&(kt.rankdir==="TB"||kt.rankdir==="BT"?Wt.width+=Wt.labeloffset:Wt.height+=Wt.labeloffset)})}function st(Tt){d.forEach(Tt.edges(),function(kt){var jt=Tt.edge(kt);if(jt.width&&jt.height){var Wt=Tt.node(kt.v),zt=Tt.node(kt.w),bt={rank:(zt.rank-Wt.rank)/2+Wt.rank,e:kt};S.addDummyNode(Tt,"edge-proxy",bt,"_ep")}})}function Xt(Tt){var kt=0;d.forEach(Tt.nodes(),function(jt){var Wt=Tt.node(jt);Wt.borderTop&&(Wt.minRank=Tt.node(Wt.borderTop).rank,Wt.maxRank=Tt.node(Wt.borderBottom).rank,kt=d.max(kt,Wt.maxRank))}),Tt.graph().maxRank=kt}function Q(Tt){d.forEach(Tt.nodes(),function(kt){var jt=Tt.node(kt);jt.dummy==="edge-proxy"&&(Tt.edge(jt.e).labelRank=jt.rank,Tt.removeNode(kt))})}function qt(Tt){var kt=Number.POSITIVE_INFINITY,jt=0,Wt=Number.POSITIVE_INFINITY,zt=0,bt=Tt.graph(),at=bt.marginx||0,ft=bt.marginy||0;function Pt(q){var ut=q.x,Et=q.y,Nt=q.width,ee=q.height;kt=Math.min(kt,ut-Nt/2),jt=Math.max(jt,ut+Nt/2),Wt=Math.min(Wt,Et-ee/2),zt=Math.max(zt,Et+ee/2)}d.forEach(Tt.nodes(),function(q){Pt(Tt.node(q))}),d.forEach(Tt.edges(),function(q){var ut=Tt.edge(q);d.has(ut,"x")&&Pt(ut)}),kt-=at,Wt-=ft,d.forEach(Tt.nodes(),function(q){var ut=Tt.node(q);ut.x-=kt,ut.y-=Wt}),d.forEach(Tt.edges(),function(q){var ut=Tt.edge(q);d.forEach(ut.points,function(Et){Et.x-=kt,Et.y-=Wt}),d.has(ut,"x")&&(ut.x-=kt),d.has(ut,"y")&&(ut.y-=Wt)}),bt.width=jt-kt+at,bt.height=zt-Wt+ft}function y(Tt){d.forEach(Tt.edges(),function(kt){var jt=Tt.edge(kt),Wt=Tt.node(kt.v),zt=Tt.node(kt.w),bt,at;jt.points?(bt=jt.points[0],at=jt.points[jt.points.length-1]):(jt.points=[],bt=zt,at=Wt),jt.points.unshift(S.intersectRect(Wt,bt)),jt.points.push(S.intersectRect(zt,at))})}function Yt(Tt){d.forEach(Tt.edges(),function(kt){var jt=Tt.edge(kt);if(d.has(jt,"x"))switch((jt.labelpos==="l"||jt.labelpos==="r")&&(jt.width-=jt.labeloffset),jt.labelpos){case"l":jt.x-=jt.width/2+jt.labeloffset;break;case"r":jt.x+=jt.width/2+jt.labeloffset;break}})}function K(Tt){d.forEach(Tt.edges(),function(kt){var jt=Tt.edge(kt);jt.reversed&&jt.points.reverse()})}function ht(Tt){d.forEach(Tt.nodes(),function(kt){if(Tt.children(kt).length){var jt=Tt.node(kt),Wt=Tt.node(jt.borderTop),zt=Tt.node(jt.borderBottom),bt=Tt.node(d.last(jt.borderLeft)),at=Tt.node(d.last(jt.borderRight));jt.width=Math.abs(at.x-bt.x),jt.height=Math.abs(zt.y-Wt.y),jt.x=bt.x+jt.width/2,jt.y=Wt.y+jt.height/2}}),d.forEach(Tt.nodes(),function(kt){Tt.node(kt).dummy==="border"&&Tt.removeNode(kt)})}function J(Tt){d.forEach(Tt.edges(),function(kt){if(kt.v===kt.w){var jt=Tt.node(kt.v);jt.selfEdges||(jt.selfEdges=[]),jt.selfEdges.push({e:kt,label:Tt.edge(kt)}),Tt.removeEdge(kt)}})}function At(Tt){var kt=S.buildLayerMatrix(Tt);d.forEach(kt,function(jt){var Wt=0;d.forEach(jt,function(zt,bt){var at=Tt.node(zt);at.order=bt+Wt,d.forEach(at.selfEdges,function(ft){S.addDummyNode(Tt,"selfedge",{width:ft.label.width,height:ft.label.height,rank:at.rank,order:bt+ ++Wt,e:ft.e,label:ft.label},"_se")}),delete at.selfEdges})})}function Vt(Tt){d.forEach(Tt.nodes(),function(kt){var jt=Tt.node(kt);if(jt.dummy==="selfedge"){var Wt=Tt.node(jt.e.v),zt=Wt.x+Wt.width/2,bt=Wt.y,at=jt.x-zt,ft=Wt.height/2;Tt.setEdge(jt.e,jt.label),Tt.removeNode(kt),jt.label.points=[{x:zt+2*at/3,y:bt-ft},{x:zt+5*at/6,y:bt-ft},{x:zt+at,y:bt},{x:zt+5*at/6,y:bt+ft},{x:zt+2*at/3,y:bt+ft}],jt.label.x=jt.x,jt.label.y=jt.y}})}function pt(Tt,kt){return d.mapValues(d.pick(Tt,kt),Number)}function Lt(Tt){var kt={};return d.forEach(Tt,function(jt,Wt){kt[Wt.toLowerCase()]=jt}),kt}},72361:function(xt,T,v){var d;try{d={cloneDeep:v(20250),constant:v(13503),defaults:v(28548),each:v(76934),filter:v(64725),find:v(79785),flatten:v(40151),forEach:v(99204),forIn:v(23190),has:v(99946),isUndefined:v(16513),last:v(10611),map:v(9924),mapValues:v(70642),max:v(95987),merge:v(28440),min:v(73376),minBy:v(83296),now:v(5795),pick:v(89409),range:v(60859),reduce:v(16473),sortBy:v(351),uniqueId:v(95708),values:v(81229),zipObject:v(65441)}}catch(c){}d||(d=window._),xt.exports=d},31733:function(xt,T,v){var d=v(72361),c=v(53063);xt.exports={run:F,cleanup:P};function F(A){var x=c.addDummyNode(A,"root",{},"_root"),C=O(A),w=d.max(d.values(C))-1,M=2*w+1;A.graph().nestingRoot=x,d.forEach(A.edges(),function(I){A.edge(I).minlen*=M});var S=_(A)+1;d.forEach(A.children(),function(I){L(A,x,M,S,w,C,I)}),A.graph().nodeRankFactor=M}function L(A,x,C,w,M,S,I){var B=A.children(I);if(!B.length){I!==x&&A.setEdge(x,I,{weight:0,minlen:C});return}var N=c.addBorderNode(A,"_bt"),G=c.addBorderNode(A,"_bb"),W=A.node(I);A.setParent(N,I),W.borderTop=N,A.setParent(G,I),W.borderBottom=G,d.forEach(B,function($){L(A,x,C,w,M,S,$);var H=A.node($),j=H.borderTop?H.borderTop:$,nt=H.borderBottom?H.borderBottom:$,rt=H.borderTop?w:2*w,mt=j!==nt?1:M-S[I]+1;A.setEdge(N,j,{weight:rt,minlen:mt,nestingEdge:!0}),A.setEdge(nt,G,{weight:rt,minlen:mt,nestingEdge:!0})}),A.parent(I)||A.setEdge(x,N,{weight:0,minlen:M+S[I]})}function O(A){var x={};function C(w,M){var S=A.children(w);S&&S.length&&d.forEach(S,function(I){C(I,M+1)}),x[w]=M}return d.forEach(A.children(),function(w){C(w,1)}),x}function _(A){return d.reduce(A.edges(),function(x,C){return x+A.edge(C).weight},0)}function P(A){var x=A.graph();A.removeNode(x.nestingRoot),delete x.nestingRoot,d.forEach(A.edges(),function(C){var w=A.edge(C);w.nestingEdge&&A.removeEdge(C)})}},27163:function(xt,T,v){"use strict";var d=v(72361),c=v(53063);xt.exports={run:F,undo:O};function F(_){_.graph().dummyChains=[],d.forEach(_.edges(),function(P){L(_,P)})}function L(_,P){var A=P.v,x=_.node(A).rank,C=P.w,w=_.node(C).rank,M=P.name,S=_.edge(P),I=S.labelRank;if(w!==x+1){_.removeEdge(P);var B,N,G;for(G=0,++x;x<w;++G,++x)S.points=[],N={width:0,height:0,edgeLabel:S,edgeObj:P,rank:x},B=c.addDummyNode(_,"edge",N,"_d"),x===I&&(N.width=S.width,N.height=S.height,N.dummy="edge-label",N.labelpos=S.labelpos),_.setEdge(A,B,{weight:S.weight},M),G===0&&_.graph().dummyChains.push(B),A=B;_.setEdge(A,C,{weight:S.weight},M)}}function O(_){d.forEach(_.graph().dummyChains,function(P){var A=_.node(P),x=A.edgeLabel,C;for(_.setEdge(A.edgeObj,x);A.dummy;)C=_.successors(P)[0],_.removeNode(P),x.points.push({x:A.x,y:A.y}),A.dummy==="edge-label"&&(x.x=A.x,x.y=A.y,x.width=A.width,x.height=A.height),P=C,A=_.node(P)})}},52205:function(xt,T,v){var d=v(72361);xt.exports=c;function c(F,L,O){var _={},P;d.forEach(O,function(A){for(var x=F.parent(A),C,w;x;){if(C=F.parent(x),C?(w=_[C],_[C]=x):(w=P,P=x),w&&w!==x){L.setEdge(w,x);return}x=C}})}},99506:function(xt,T,v){var d=v(72361);xt.exports=c;function c(F,L){return d.map(L,function(O){var _=F.inEdges(O);if(_.length){var P=d.reduce(_,function(A,x){var C=F.edge(x),w=F.node(x.v);return{sum:A.sum+C.weight*w.order,weight:A.weight+C.weight}},{sum:0,weight:0});return{v:O,barycenter:P.sum/P.weight,weight:P.weight}}else return{v:O}})}},59105:function(xt,T,v){var d=v(72361),c=v(76626).Graph;xt.exports=F;function F(O,_,P){var A=L(O),x=new c({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(C){return O.node(C)});return d.forEach(O.nodes(),function(C){var w=O.node(C),M=O.parent(C);(w.rank===_||w.minRank<=_&&_<=w.maxRank)&&(x.setNode(C),x.setParent(C,M||A),d.forEach(O[P](C),function(S){var I=S.v===C?S.w:S.v,B=x.edge(I,C),N=d.isUndefined(B)?0:B.weight;x.setEdge(I,C,{weight:O.edge(S).weight+N})}),d.has(w,"minRank")&&x.setNode(C,{borderLeft:w.borderLeft[_],borderRight:w.borderRight[_]}))}),x}function L(O){for(var _;O.hasNode(_=d.uniqueId("_root")););return _}},45456:function(xt,T,v){"use strict";var d=v(72361);xt.exports=c;function c(L,O){for(var _=0,P=1;P<O.length;++P)_+=F(L,O[P-1],O[P]);return _}function F(L,O,_){for(var P=d.zipObject(_,d.map(_,function(S,I){return I})),A=d.flatten(d.map(O,function(S){return d.sortBy(d.map(L.outEdges(S),function(I){return{pos:P[I.w],weight:L.edge(I).weight}}),"pos")}),!0),x=1;x<_.length;)x<<=1;var C=2*x-1;x-=1;var w=d.map(new Array(C),function(){return 0}),M=0;return d.forEach(A.forEach(function(S){var I=S.pos+x;w[I]+=S.weight;for(var B=0;I>0;)I%2&&(B+=w[I+1]),I=I-1>>1,w[I]+=S.weight;M+=S.weight*B})),M}},62852:function(xt,T,v){"use strict";var d=v(72361),c=v(18043),F=v(45456),L=v(86490),O=v(59105),_=v(52205),P=v(76626).Graph,A=v(53063);xt.exports=x;function x(S){var I=A.maxRank(S),B=C(S,d.range(1,I+1),"inEdges"),N=C(S,d.range(I-1,-1,-1),"outEdges"),G=c(S);M(S,G);for(var W=Number.POSITIVE_INFINITY,$,H=0,j=0;j<4;++H,++j){w(H%2?B:N,H%4>=2),G=A.buildLayerMatrix(S);var nt=F(S,G);nt<W&&(j=0,$=d.cloneDeep(G),W=nt)}M(S,$)}function C(S,I,B){return d.map(I,function(N){return O(S,N,B)})}function w(S,I){var B=new P;d.forEach(S,function(N){var G=N.graph().root,W=L(N,G,B,I);d.forEach(W.vs,function($,H){N.node($).order=H}),_(N,B,W.vs)})}function M(S,I){d.forEach(I,function(B){d.forEach(B,function(N,G){S.node(N).order=G})})}},18043:function(xt,T,v){"use strict";var d=v(72361);xt.exports=c;function c(F){var L={},O=d.filter(F.nodes(),function(C){return!F.children(C).length}),_=d.max(d.map(O,function(C){return F.node(C).rank})),P=d.map(d.range(_+1),function(){return[]});function A(C){if(!d.has(L,C)){L[C]=!0;var w=F.node(C);P[w.rank].push(C),d.forEach(F.successors(C),A)}}var x=d.sortBy(O,function(C){return F.node(C).rank});return d.forEach(x,A),P}},45926:function(xt,T,v){"use strict";var d=v(72361);xt.exports=c;function c(O,_){var P={};d.forEach(O,function(x,C){var w=P[x.v]={indegree:0,in:[],out:[],vs:[x.v],i:C};d.isUndefined(x.barycenter)||(w.barycenter=x.barycenter,w.weight=x.weight)}),d.forEach(_.edges(),function(x){var C=P[x.v],w=P[x.w];!d.isUndefined(C)&&!d.isUndefined(w)&&(w.indegree++,C.out.push(P[x.w]))});var A=d.filter(P,function(x){return!x.indegree});return F(A)}function F(O){var _=[];function P(C){return function(w){w.merged||(d.isUndefined(w.barycenter)||d.isUndefined(C.barycenter)||w.barycenter>=C.barycenter)&&L(C,w)}}function A(C){return function(w){w.in.push(C),--w.indegree==0&&O.push(w)}}for(;O.length;){var x=O.pop();_.push(x),d.forEach(x.in.reverse(),P(x)),d.forEach(x.out,A(x))}return d.map(d.filter(_,function(C){return!C.merged}),function(C){return d.pick(C,["vs","i","barycenter","weight"])})}function L(O,_){var P=0,A=0;O.weight&&(P+=O.barycenter*O.weight,A+=O.weight),_.weight&&(P+=_.barycenter*_.weight,A+=_.weight),O.vs=_.vs.concat(O.vs),O.barycenter=P/A,O.weight=A,O.i=Math.min(_.i,O.i),_.merged=!0}},86490:function(xt,T,v){var d=v(72361),c=v(99506),F=v(45926),L=v(1349);xt.exports=O;function O(A,x,C,w){var M=A.children(x),S=A.node(x),I=S?S.borderLeft:void 0,B=S?S.borderRight:void 0,N={};I&&(M=d.filter(M,function(nt){return nt!==I&&nt!==B}));var G=c(A,M);d.forEach(G,function(nt){if(A.children(nt.v).length){var rt=O(A,nt.v,C,w);N[nt.v]=rt,d.has(rt,"barycenter")&&P(nt,rt)}});var W=F(G,C);_(W,N);var $=L(W,w);if(I&&($.vs=d.flatten([I,$.vs,B],!0),A.predecessors(I).length)){var H=A.node(A.predecessors(I)[0]),j=A.node(A.predecessors(B)[0]);d.has($,"barycenter")||($.barycenter=0,$.weight=0),$.barycenter=($.barycenter*$.weight+H.order+j.order)/($.weight+2),$.weight+=2}return $}function _(A,x){d.forEach(A,function(C){C.vs=d.flatten(C.vs.map(function(w){return x[w]?x[w].vs:w}),!0)})}function P(A,x){d.isUndefined(A.barycenter)?(A.barycenter=x.barycenter,A.weight=x.weight):(A.barycenter=(A.barycenter*A.weight+x.barycenter*x.weight)/(A.weight+x.weight),A.weight+=x.weight)}},1349:function(xt,T,v){var d=v(72361),c=v(53063);xt.exports=F;function F(_,P){var A=c.partition(_,function(N){return d.has(N,"barycenter")}),x=A.lhs,C=d.sortBy(A.rhs,function(N){return-N.i}),w=[],M=0,S=0,I=0;x.sort(O(!!P)),I=L(w,C,I),d.forEach(x,function(N){I+=N.vs.length,w.push(N.vs),M+=N.barycenter*N.weight,S+=N.weight,I=L(w,C,I)});var B={vs:d.flatten(w,!0)};return S&&(B.barycenter=M/S,B.weight=S),B}function L(_,P,A){for(var x;P.length&&(x=d.last(P)).i<=A;)P.pop(),_.push(x.vs),A++;return A}function O(_){return function(P,A){return P.barycenter<A.barycenter?-1:P.barycenter>A.barycenter?1:_?A.i-P.i:P.i-A.i}}},71970:function(xt,T,v){var d=v(72361);xt.exports=c;function c(O){var _=L(O);d.forEach(O.graph().dummyChains,function(P){for(var A=O.node(P),x=A.edgeObj,C=F(O,_,x.v,x.w),w=C.path,M=C.lca,S=0,I=w[S],B=!0;P!==x.w;){if(A=O.node(P),B){for(;(I=w[S])!==M&&O.node(I).maxRank<A.rank;)S++;I===M&&(B=!1)}if(!B){for(;S<w.length-1&&O.node(I=w[S+1]).minRank<=A.rank;)S++;I=w[S]}O.setParent(P,I),P=O.successors(P)[0]}})}function F(O,_,P,A){var x=[],C=[],w=Math.min(_[P].low,_[A].low),M=Math.max(_[P].lim,_[A].lim),S,I;S=P;do S=O.parent(S),x.push(S);while(S&&(_[S].low>w||M>_[S].lim));for(I=S,S=A;(S=O.parent(S))!==I;)C.push(S);return{path:x.concat(C.reverse()),lca:I}}function L(O){var _={},P=0;function A(x){var C=P;d.forEach(O.children(x),A),_[x]={low:C,lim:P++}}return d.forEach(O.children(),A),_}},92080:function(xt,T,v){"use strict";var d=v(72361),c=v(76626).Graph,F=v(53063);xt.exports={positionX:B,findType1Conflicts:L,findType2Conflicts:O,addConflict:P,hasConflict:A,verticalAlignment:x,horizontalCompaction:C,alignCoordinates:S,findSmallestWidthAlignment:M,balance:I};function L(W,$){var H={};function j(nt,rt){var mt=0,Ft=0,Gt=nt.length,gt=d.last(rt);return d.forEach(rt,function(st,Xt){var Q=_(W,st),qt=Q?W.node(Q).order:Gt;(Q||st===gt)&&(d.forEach(rt.slice(Ft,Xt+1),function(y){d.forEach(W.predecessors(y),function(Yt){var K=W.node(Yt),ht=K.order;(ht<mt||qt<ht)&&!(K.dummy&&W.node(y).dummy)&&P(H,Yt,y)})}),Ft=Xt+1,mt=qt)}),rt}return d.reduce($,j),H}function O(W,$){var H={};function j(rt,mt,Ft,Gt,gt){var st;d.forEach(d.range(mt,Ft),function(Xt){st=rt[Xt],W.node(st).dummy&&d.forEach(W.predecessors(st),function(Q){var qt=W.node(Q);qt.dummy&&(qt.order<Gt||qt.order>gt)&&P(H,Q,st)})})}function nt(rt,mt){var Ft=-1,Gt,gt=0;return d.forEach(mt,function(st,Xt){if(W.node(st).dummy==="border"){var Q=W.predecessors(st);Q.length&&(Gt=W.node(Q[0]).order,j(mt,gt,Xt,Ft,Gt),gt=Xt,Ft=Gt)}j(mt,gt,mt.length,Gt,rt.length)}),mt}return d.reduce($,nt),H}function _(W,$){if(W.node($).dummy)return d.find(W.predecessors($),function(H){return W.node(H).dummy})}function P(W,$,H){if($>H){var j=$;$=H,H=j}var nt=W[$];nt||(W[$]=nt={}),nt[H]=!0}function A(W,$,H){if($>H){var j=$;$=H,H=j}return d.has(W[$],H)}function x(W,$,H,j){var nt={},rt={},mt={};return d.forEach($,function(Ft){d.forEach(Ft,function(Gt,gt){nt[Gt]=Gt,rt[Gt]=Gt,mt[Gt]=gt})}),d.forEach($,function(Ft){var Gt=-1;d.forEach(Ft,function(gt){var st=j(gt);if(st.length){st=d.sortBy(st,function(Yt){return mt[Yt]});for(var Xt=(st.length-1)/2,Q=Math.floor(Xt),qt=Math.ceil(Xt);Q<=qt;++Q){var y=st[Q];rt[gt]===gt&&Gt<mt[y]&&!A(H,gt,y)&&(rt[y]=gt,rt[gt]=nt[gt]=nt[y],Gt=mt[y])}}})}),{root:nt,align:rt}}function C(W,$,H,j,nt){var rt={},mt=w(W,$,H,nt),Ft=nt?"borderLeft":"borderRight";function Gt(Xt,Q){for(var qt=mt.nodes(),y=qt.pop(),Yt={};y;)Yt[y]?Xt(y):(Yt[y]=!0,qt.push(y),qt=qt.concat(Q(y))),y=qt.pop()}function gt(Xt){rt[Xt]=mt.inEdges(Xt).reduce(function(Q,qt){return Math.max(Q,rt[qt.v]+mt.edge(qt))},0)}function st(Xt){var Q=mt.outEdges(Xt).reduce(function(y,Yt){return Math.min(y,rt[Yt.w]-mt.edge(Yt))},Number.POSITIVE_INFINITY),qt=W.node(Xt);Q!==Number.POSITIVE_INFINITY&&qt.borderType!==Ft&&(rt[Xt]=Math.max(rt[Xt],Q))}return Gt(gt,mt.predecessors.bind(mt)),Gt(st,mt.successors.bind(mt)),d.forEach(j,function(Xt){rt[Xt]=rt[H[Xt]]}),rt}function w(W,$,H,j){var nt=new c,rt=W.graph(),mt=N(rt.nodesep,rt.edgesep,j);return d.forEach($,function(Ft){var Gt;d.forEach(Ft,function(gt){var st=H[gt];if(nt.setNode(st),Gt){var Xt=H[Gt],Q=nt.edge(Xt,st);nt.setEdge(Xt,st,Math.max(mt(W,gt,Gt),Q||0))}Gt=gt})}),nt}function M(W,$){return d.minBy(d.values($),function(H){var j=Number.NEGATIVE_INFINITY,nt=Number.POSITIVE_INFINITY;return d.forIn(H,function(rt,mt){var Ft=G(W,mt)/2;j=Math.max(rt+Ft,j),nt=Math.min(rt-Ft,nt)}),j-nt})}function S(W,$){var H=d.values($),j=d.min(H),nt=d.max(H);d.forEach(["u","d"],function(rt){d.forEach(["l","r"],function(mt){var Ft=rt+mt,Gt=W[Ft],gt;if(Gt!==$){var st=d.values(Gt);gt=mt==="l"?j-d.min(st):nt-d.max(st),gt&&(W[Ft]=d.mapValues(Gt,function(Xt){return Xt+gt}))}})})}function I(W,$){return d.mapValues(W.ul,function(H,j){if($)return W[$.toLowerCase()][j];var nt=d.sortBy(d.map(W,j));return(nt[1]+nt[2])/2})}function B(W){var $=F.buildLayerMatrix(W),H=d.merge(L(W,$),O(W,$)),j={},nt;d.forEach(["u","d"],function(mt){nt=mt==="u"?$:d.values($).reverse(),d.forEach(["l","r"],function(Ft){Ft==="r"&&(nt=d.map(nt,function(Xt){return d.values(Xt).reverse()}));var Gt=(mt==="u"?W.predecessors:W.successors).bind(W),gt=x(W,nt,H,Gt),st=C(W,nt,gt.root,gt.align,Ft==="r");Ft==="r"&&(st=d.mapValues(st,function(Xt){return-Xt})),j[mt+Ft]=st})});var rt=M(W,j);return S(j,rt),I(j,W.graph().align)}function N(W,$,H){return function(j,nt,rt){var mt=j.node(nt),Ft=j.node(rt),Gt=0,gt;if(Gt+=mt.width/2,d.has(mt,"labelpos"))switch(mt.labelpos.toLowerCase()){case"l":gt=-mt.width/2;break;case"r":gt=mt.width/2;break}if(gt&&(Gt+=H?gt:-gt),gt=0,Gt+=(mt.dummy?$:W)/2,Gt+=(Ft.dummy?$:W)/2,Gt+=Ft.width/2,d.has(Ft,"labelpos"))switch(Ft.labelpos.toLowerCase()){case"l":gt=Ft.width/2;break;case"r":gt=-Ft.width/2;break}return gt&&(Gt+=H?gt:-gt),gt=0,Gt}}function G(W,$){return W.node($).width}},93021:function(xt,T,v){"use strict";var d=v(72361),c=v(53063),F=v(92080).positionX;xt.exports=L;function L(_){_=c.asNonCompoundGraph(_),O(_),d.forEach(F(_),function(P,A){_.node(A).x=P})}function O(_){var P=c.buildLayerMatrix(_),A=_.graph().ranksep,x=0;d.forEach(P,function(C){var w=d.max(d.map(C,function(M){return _.node(M).height}));d.forEach(C,function(M){_.node(M).y=x+w/2}),x+=w+A})}},61031:function(xt,T,v){"use strict";var d=v(72361),c=v(76626).Graph,F=v(2416).slack;xt.exports=L;function L(A){var x=new c({directed:!1}),C=A.nodes()[0],w=A.nodeCount();x.setNode(C,{});for(var M,S;O(x,A)<w;)M=_(x,A),S=x.hasNode(M.v)?F(A,M):-F(A,M),P(x,A,S);return x}function O(A,x){function C(w){d.forEach(x.nodeEdges(w),function(M){var S=M.v,I=w===S?M.w:S;!A.hasNode(I)&&!F(x,M)&&(A.setNode(I,{}),A.setEdge(w,I,{}),C(I))})}return d.forEach(A.nodes(),C),A.nodeCount()}function _(A,x){return d.minBy(x.edges(),function(C){if(A.hasNode(C.v)!==A.hasNode(C.w))return F(x,C)})}function P(A,x,C){d.forEach(A.nodes(),function(w){x.node(w).rank+=C})}},64505:function(xt,T,v){"use strict";var d=v(2416),c=d.longestPath,F=v(61031),L=v(77076);xt.exports=O;function O(x){switch(x.graph().ranker){case"network-simplex":A(x);break;case"tight-tree":P(x);break;case"longest-path":_(x);break;default:A(x)}}var _=c;function P(x){c(x),F(x)}function A(x){L(x)}},77076:function(xt,T,v){"use strict";var d=v(72361),c=v(61031),F=v(2416).slack,L=v(2416).longestPath,O=v(76626).alg.preorder,_=v(76626).alg.postorder,P=v(53063).simplify;xt.exports=A,A.initLowLimValues=M,A.initCutValues=x,A.calcCutValue=w,A.leaveEdge=I,A.enterEdge=B,A.exchangeEdges=N;function A(H){H=P(H),L(H);var j=c(H);M(j),x(j,H);for(var nt,rt;nt=I(j);)rt=B(j,H,nt),N(j,H,nt,rt)}function x(H,j){var nt=_(H,H.nodes());nt=nt.slice(0,nt.length-1),d.forEach(nt,function(rt){C(H,j,rt)})}function C(H,j,nt){var rt=H.node(nt),mt=rt.parent;H.edge(nt,mt).cutvalue=w(H,j,nt)}function w(H,j,nt){var rt=H.node(nt),mt=rt.parent,Ft=!0,Gt=j.edge(nt,mt),gt=0;return Gt||(Ft=!1,Gt=j.edge(mt,nt)),gt=Gt.weight,d.forEach(j.nodeEdges(nt),function(st){var Xt=st.v===nt,Q=Xt?st.w:st.v;if(Q!==mt){var qt=Xt===Ft,y=j.edge(st).weight;if(gt+=qt?y:-y,W(H,nt,Q)){var Yt=H.edge(nt,Q).cutvalue;gt+=qt?-Yt:Yt}}}),gt}function M(H,j){arguments.length<2&&(j=H.nodes()[0]),S(H,{},1,j)}function S(H,j,nt,rt,mt){var Ft=nt,Gt=H.node(rt);return j[rt]=!0,d.forEach(H.neighbors(rt),function(gt){d.has(j,gt)||(nt=S(H,j,nt,gt,rt))}),Gt.low=Ft,Gt.lim=nt++,mt?Gt.parent=mt:delete Gt.parent,nt}function I(H){return d.find(H.edges(),function(j){return H.edge(j).cutvalue<0})}function B(H,j,nt){var rt=nt.v,mt=nt.w;j.hasEdge(rt,mt)||(rt=nt.w,mt=nt.v);var Ft=H.node(rt),Gt=H.node(mt),gt=Ft,st=!1;Ft.lim>Gt.lim&&(gt=Gt,st=!0);var Xt=d.filter(j.edges(),function(Q){return st===$(H,H.node(Q.v),gt)&&st!==$(H,H.node(Q.w),gt)});return d.minBy(Xt,function(Q){return F(j,Q)})}function N(H,j,nt,rt){var mt=nt.v,Ft=nt.w;H.removeEdge(mt,Ft),H.setEdge(rt.v,rt.w,{}),M(H),x(H,j),G(H,j)}function G(H,j){var nt=d.find(H.nodes(),function(mt){return!j.node(mt).parent}),rt=O(H,nt);rt=rt.slice(1),d.forEach(rt,function(mt){var Ft=H.node(mt).parent,Gt=j.edge(mt,Ft),gt=!1;Gt||(Gt=j.edge(Ft,mt),gt=!0),j.node(mt).rank=j.node(Ft).rank+(gt?Gt.minlen:-Gt.minlen)})}function W(H,j,nt){return H.hasEdge(j,nt)}function $(H,j,nt){return nt.low<=j.lim&&j.lim<=nt.lim}},2416:function(xt,T,v){"use strict";var d=v(72361);xt.exports={longestPath:c,slack:F};function c(L){var O={};function _(P){var A=L.node(P);if(d.has(O,P))return A.rank;O[P]=!0;var x=d.min(d.map(L.outEdges(P),function(C){return _(C.w)-L.edge(C).minlen}));return(x===Number.POSITIVE_INFINITY||x===void 0||x===null)&&(x=0),A.rank=x}d.forEach(L.sources(),_)}function F(L,O){return L.node(O.w).rank-L.node(O.v).rank-L.edge(O).minlen}},53063:function(xt,T,v){"use strict";var d=v(72361),c=v(76626).Graph;xt.exports={addDummyNode:F,simplify:L,asNonCompoundGraph:O,successorWeights:_,predecessorWeights:P,intersectRect:A,buildLayerMatrix:x,normalizeRanks:C,removeEmptyRanks:w,addBorderNode:M,maxRank:S,partition:I,time:B,notime:N};function F(G,W,$,H){var j;do j=d.uniqueId(H);while(G.hasNode(j));return $.dummy=W,G.setNode(j,$),j}function L(G){var W=new c().setGraph(G.graph());return d.forEach(G.nodes(),function($){W.setNode($,G.node($))}),d.forEach(G.edges(),function($){var H=W.edge($.v,$.w)||{weight:0,minlen:1},j=G.edge($);W.setEdge($.v,$.w,{weight:H.weight+j.weight,minlen:Math.max(H.minlen,j.minlen)})}),W}function O(G){var W=new c({multigraph:G.isMultigraph()}).setGraph(G.graph());return d.forEach(G.nodes(),function($){G.children($).length||W.setNode($,G.node($))}),d.forEach(G.edges(),function($){W.setEdge($,G.edge($))}),W}function _(G){var W=d.map(G.nodes(),function($){var H={};return d.forEach(G.outEdges($),function(j){H[j.w]=(H[j.w]||0)+G.edge(j).weight}),H});return d.zipObject(G.nodes(),W)}function P(G){var W=d.map(G.nodes(),function($){var H={};return d.forEach(G.inEdges($),function(j){H[j.v]=(H[j.v]||0)+G.edge(j).weight}),H});return d.zipObject(G.nodes(),W)}function A(G,W){var $=G.x,H=G.y,j=W.x-$,nt=W.y-H,rt=G.width/2,mt=G.height/2;if(!j&&!nt)throw new Error("Not possible to find intersection inside of the rectangle");var Ft,Gt;return Math.abs(nt)*rt>Math.abs(j)*mt?(nt<0&&(mt=-mt),Ft=mt*j/nt,Gt=mt):(j<0&&(rt=-rt),Ft=rt,Gt=rt*nt/j),{x:$+Ft,y:H+Gt}}function x(G){var W=d.map(d.range(S(G)+1),function(){return[]});return d.forEach(G.nodes(),function($){var H=G.node($),j=H.rank;d.isUndefined(j)||(W[j][H.order]=$)}),W}function C(G){var W=d.min(d.map(G.nodes(),function($){return G.node($).rank}));d.forEach(G.nodes(),function($){var H=G.node($);d.has(H,"rank")&&(H.rank-=W)})}function w(G){var W=d.min(d.map(G.nodes(),function(nt){return G.node(nt).rank})),$=[];d.forEach(G.nodes(),function(nt){var rt=G.node(nt).rank-W;$[rt]||($[rt]=[]),$[rt].push(nt)});var H=0,j=G.graph().nodeRankFactor;d.forEach($,function(nt,rt){d.isUndefined(nt)&&rt%j!=0?--H:H&&d.forEach(nt,function(mt){G.node(mt).rank+=H})})}function M(G,W,$,H){var j={width:0,height:0};return arguments.length>=4&&(j.rank=$,j.order=H),F(G,"border",j,W)}function S(G){return d.max(d.map(G.nodes(),function(W){var $=G.node(W).rank;if(!d.isUndefined($))return $}))}function I(G,W){var $={lhs:[],rhs:[]};return d.forEach(G,function(H){W(H)?$.lhs.push(H):$.rhs.push(H)}),$}function B(G,W){var $=d.now();try{return W()}finally{console.log(G+" time: "+(d.now()-$)+"ms")}}function N(G,W){return W()}},11897:function(xt){xt.exports="0.8.5"},2035:function(xt,T,v){"use strict";var d=v(97671),c=this&&this.__spreadArrays||function(){for(var N=0,G=0,W=arguments.length;G<W;G++)N+=arguments[G].length;for(var $=Array(N),H=0,G=0;G<W;G++)for(var j=arguments[G],nt=0,rt=j.length;nt<rt;nt++,H++)$[H]=j[nt];return $};Object.defineProperty(T,"__esModule",{value:!0});var F=function(){function N(G,W,$){this.name=G,this.version=W,this.os=$}return N}();T.BrowserInfo=F;var L=function(){function N(G){this.version=G,this.name="node",this.os=d.platform}return N}();T.NodeInfo=L;var O=function(){function N(){this.bot=!0,this.name="bot",this.version=null,this.os=null}return N}();T.BotInfo=O;var _=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,P=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,A=3,x=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",_]],C=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",P]];function w(N){return N?M(N):typeof navigator!="undefined"?M(navigator.userAgent):I()}T.detect=w;function M(N){var G=N!==""&&x.reduce(function(j,nt){var rt=nt[0],mt=nt[1];if(j)return j;var Ft=mt.exec(N);return!!Ft&&[rt,Ft]},!1);if(!G)return null;var W=G[0],$=G[1];if(W==="searchbot")return new O;var H=$[1]&&$[1].split(/[._]/).slice(0,3);return H?H.length<A&&(H=c(H,B(A-H.length))):H=[],new F(W,H.join("."),S(N))}T.parseUserAgent=M;function S(N){for(var G=0,W=C.length;G<W;G++){var $=C[G],H=$[0],j=$[1],nt=j.test(N);if(nt)return H}return null}T.detectOS=S;function I(){var N=typeof d!="undefined"&&d.version;return N?new L(d.version.slice(1)):null}T.getNodeVersion=I;function B(N){for(var G=[],W=0;W<N;W++)G.push("0");return G}},1517:function(xt,T,v){"use strict";v.r(T),v.d(T,{BrowserInfo:function(){return F},NodeInfo:function(){return L},SearchBotDeviceInfo:function(){return O},BotInfo:function(){return _},ReactNativeInfo:function(){return P},detect:function(){return S},browserName:function(){return B},parseUserAgent:function(){return N},detectOS:function(){return G},getNodeVersion:function(){return W}});var d=v(97671),c=function(H,j,nt){if(nt||arguments.length===2)for(var rt=0,mt=j.length,Ft;rt<mt;rt++)(Ft||!(rt in j))&&(Ft||(Ft=Array.prototype.slice.call(j,0,rt)),Ft[rt]=j[rt]);return H.concat(Ft||Array.prototype.slice.call(j))},F=function(){function H(j,nt,rt){this.name=j,this.version=nt,this.os=rt,this.type="browser"}return H}(),L=function(){function H(j){this.version=j,this.type="node",this.name="node",this.os=d.platform}return H}(),O=function(){function H(j,nt,rt,mt){this.name=j,this.version=nt,this.os=rt,this.bot=mt,this.type="bot-device"}return H}(),_=function(){function H(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return H}(),P=function(){function H(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return H}(),A=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,x=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,C=3,w=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",A]],M=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function S(H){return H?N(H):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new P:typeof navigator!="undefined"?N(navigator.userAgent):W()}function I(H){return H!==""&&w.reduce(function(j,nt){var rt=nt[0],mt=nt[1];if(j)return j;var Ft=mt.exec(H);return!!Ft&&[rt,Ft]},!1)}function B(H){var j=I(H);return j?j[0]:null}function N(H){var j=I(H);if(!j)return null;var nt=j[0],rt=j[1];if(nt==="searchbot")return new _;var mt=rt[1]&&rt[1].split(".").join("_").split("_").slice(0,3);mt?mt.length<C&&(mt=c(c([],mt,!0),$(C-mt.length),!0)):mt=[];var Ft=mt.join("."),Gt=G(H),gt=x.exec(H);return gt&&gt[1]?new O(nt,Ft,Gt,gt[1]):new F(nt,Ft,Gt)}function G(H){for(var j=0,nt=M.length;j<nt;j++){var rt=M[j],mt=rt[0],Ft=rt[1],Gt=Ft.exec(H);if(Gt)return mt}return null}function W(){var H=typeof d!="undefined"&&d.version;return H?new L(d.version.slice(1)):null}function $(H){for(var j=[],nt=0;nt<H;nt++)j.push("0");return j}},17118:function(xt,T,v){"use strict";v.r(T),v.d(T,{assign:function(){return C},format:function(){return Xt},parse:function(){return Q},defaultI18n:function(){return B},setGlobalDateI18n:function(){return G},setGlobalDateMasks:function(){return st}});var d=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,c="[1-9]\\d?",F="\\d\\d",L="\\d{3}",O="\\d{4}",_="[^\\s]+",P=/\[([^]*?)\]/gm;function A(y,Yt){for(var K=[],ht=0,J=y.length;ht<J;ht++)K.push(y[ht].substr(0,Yt));return K}var x=function(y){return function(Yt,K){var ht=K[y].map(function(At){return At.toLowerCase()}),J=ht.indexOf(Yt.toLowerCase());return J>-1?J:null}};function C(y){for(var Yt=[],K=1;K<arguments.length;K++)Yt[K-1]=arguments[K];for(var ht=0,J=Yt;ht<J.length;ht++){var At=J[ht];for(var Vt in At)y[Vt]=At[Vt]}return y}var w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],M=["January","February","March","April","May","June","July","August","September","October","November","December"],S=A(M,3),I=A(w,3),B={dayNamesShort:I,dayNames:w,monthNamesShort:S,monthNames:M,amPm:["am","pm"],DoFn:function(y){return y+["th","st","nd","rd"][y%10>3?0:(y-y%10!=10?1:0)*y%10]}},N=C({},B),G=function(y){return N=C(N,y)},W=function(y){return y.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},$=function(y,Yt){for(Yt===void 0&&(Yt=2),y=String(y);y.length<Yt;)y="0"+y;return y},H={D:function(y){return String(y.getDate())},DD:function(y){return $(y.getDate())},Do:function(y,Yt){return Yt.DoFn(y.getDate())},d:function(y){return String(y.getDay())},dd:function(y){return $(y.getDay())},ddd:function(y,Yt){return Yt.dayNamesShort[y.getDay()]},dddd:function(y,Yt){return Yt.dayNames[y.getDay()]},M:function(y){return String(y.getMonth()+1)},MM:function(y){return $(y.getMonth()+1)},MMM:function(y,Yt){return Yt.monthNamesShort[y.getMonth()]},MMMM:function(y,Yt){return Yt.monthNames[y.getMonth()]},YY:function(y){return $(String(y.getFullYear()),4).substr(2)},YYYY:function(y){return $(y.getFullYear(),4)},h:function(y){return String(y.getHours()%12||12)},hh:function(y){return $(y.getHours()%12||12)},H:function(y){return String(y.getHours())},HH:function(y){return $(y.getHours())},m:function(y){return String(y.getMinutes())},mm:function(y){return $(y.getMinutes())},s:function(y){return String(y.getSeconds())},ss:function(y){return $(y.getSeconds())},S:function(y){return String(Math.round(y.getMilliseconds()/100))},SS:function(y){return $(Math.round(y.getMilliseconds()/10),2)},SSS:function(y){return $(y.getMilliseconds(),3)},a:function(y,Yt){return y.getHours()<12?Yt.amPm[0]:Yt.amPm[1]},A:function(y,Yt){return y.getHours()<12?Yt.amPm[0].toUpperCase():Yt.amPm[1].toUpperCase()},ZZ:function(y){var Yt=y.getTimezoneOffset();return(Yt>0?"-":"+")+$(Math.floor(Math.abs(Yt)/60)*100+Math.abs(Yt)%60,4)},Z:function(y){var Yt=y.getTimezoneOffset();return(Yt>0?"-":"+")+$(Math.floor(Math.abs(Yt)/60),2)+":"+$(Math.abs(Yt)%60,2)}},j=function(y){return+y-1},nt=[null,c],rt=[null,_],mt=["isPm",_,function(y,Yt){var K=y.toLowerCase();return K===Yt.amPm[0]?0:K===Yt.amPm[1]?1:null}],Ft=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(y){var Yt=(y+"").match(/([+-]|\d\d)/gi);if(Yt){var K=+Yt[1]*60+parseInt(Yt[2],10);return Yt[0]==="+"?K:-K}return 0}],Gt={D:["day",c],DD:["day",F],Do:["day",c+_,function(y){return parseInt(y,10)}],M:["month",c,j],MM:["month",F,j],YY:["year",F,function(y){var Yt=new Date,K=+(""+Yt.getFullYear()).substr(0,2);return+(""+(+y>68?K-1:K)+y)}],h:["hour",c,void 0,"isPm"],hh:["hour",F,void 0,"isPm"],H:["hour",c],HH:["hour",F],m:["minute",c],mm:["minute",F],s:["second",c],ss:["second",F],YYYY:["year",O],S:["millisecond","\\d",function(y){return+y*100}],SS:["millisecond",F,function(y){return+y*10}],SSS:["millisecond",L],d:nt,dd:nt,ddd:rt,dddd:rt,MMM:["month",_,x("monthNamesShort")],MMMM:["month",_,x("monthNames")],a:mt,A:mt,ZZ:Ft,Z:Ft},gt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},st=function(y){return C(gt,y)},Xt=function(y,Yt,K){if(Yt===void 0&&(Yt=gt.default),K===void 0&&(K={}),typeof y=="number"&&(y=new Date(y)),Object.prototype.toString.call(y)!=="[object Date]"||isNaN(y.getTime()))throw new Error("Invalid Date pass to format");Yt=gt[Yt]||Yt;var ht=[];Yt=Yt.replace(P,function(At,Vt){return ht.push(Vt),"@@@"});var J=C(C({},N),K);return Yt=Yt.replace(d,function(At){return H[At](y,J)}),Yt.replace(/@@@/g,function(){return ht.shift()})};function Q(y,Yt,K){if(K===void 0&&(K={}),typeof Yt!="string")throw new Error("Invalid format in fecha parse");if(Yt=gt[Yt]||Yt,y.length>1e3)return null;var ht=new Date,J={year:ht.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},At=[],Vt=[],pt=Yt.replace(P,function(Et,Nt){return Vt.push(W(Nt)),"@@@"}),Lt={},Tt={};pt=W(pt).replace(d,function(Et){var Nt=Gt[Et],ee=Nt[0],ge=Nt[1],De=Nt[3];if(Lt[ee])throw new Error("Invalid format. "+ee+" specified twice in format");return Lt[ee]=!0,De&&(Tt[De]=!0),At.push(Nt),"("+ge+")"}),Object.keys(Tt).forEach(function(Et){if(!Lt[Et])throw new Error("Invalid format. "+Et+" is required in specified format")}),pt=pt.replace(/@@@/g,function(){return Vt.shift()});var kt=y.match(new RegExp(pt,"i"));if(!kt)return null;for(var jt=C(C({},N),K),Wt=1;Wt<kt.length;Wt++){var zt=At[Wt-1],bt=zt[0],at=zt[2],ft=at?at(kt[Wt],jt):+kt[Wt];if(ft==null)return null;J[bt]=ft}J.isPm===1&&J.hour!=null&&+J.hour!=12?J.hour=+J.hour+12:J.isPm===0&&+J.hour==12&&(J.hour=0);for(var Pt=new Date(J.year,J.month,J.day,J.hour,J.minute,J.second,J.millisecond),q=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Wt=0,ut=q.length;Wt<ut;Wt++)if(Lt[q[Wt][0]]&&J[q[Wt][0]]!==Pt[q[Wt][1]]())return null;return J.timezoneOffset==null?Pt:new Date(Date.UTC(J.year,J.month,J.day,J.hour,J.minute-J.timezoneOffset,J.second,J.millisecond))}var qt={format:Xt,parse:Q,defaultI18n:B,setGlobalDateI18n:G,setGlobalDateMasks:st};T.default=qt},72988:function(xt,T,v){"use strict";v.d(T,{Ib:function(){return d},WT:function(){return c},FD:function(){return F}});var d=1e-6,c=typeof Float32Array!="undefined"?Float32Array:Array,F=Math.random;function L(A){c=A}var O=Math.PI/180;function _(A){return A*O}function P(A,x){return Math.abs(A-x)<=d*Math.max(1,Math.abs(A),Math.abs(x))}Math.hypot||(Math.hypot=function(){for(var A=0,x=arguments.length;x--;)A+=arguments[x]*arguments[x];return Math.sqrt(A)})},58198:function(xt,T,v){"use strict";v.r(T),v.d(T,{create:function(){return c},fromMat4:function(){return F},clone:function(){return L},copy:function(){return O},fromValues:function(){return _},set:function(){return P},identity:function(){return A},transpose:function(){return x},invert:function(){return C},adjoint:function(){return w},determinant:function(){return M},multiply:function(){return S},translate:function(){return I},rotate:function(){return B},scale:function(){return N},fromTranslation:function(){return G},fromRotation:function(){return W},fromScaling:function(){return $},fromMat2d:function(){return H},fromQuat:function(){return j},normalFromMat4:function(){return nt},projection:function(){return rt},str:function(){return mt},frob:function(){return Ft},add:function(){return Gt},subtract:function(){return gt},multiplyScalar:function(){return st},multiplyScalarAndAdd:function(){return Xt},exactEquals:function(){return Q},equals:function(){return qt},mul:function(){return y},sub:function(){return Yt}});var d=v(72988);function c(){var K=new d.WT(9);return d.WT!=Float32Array&&(K[1]=0,K[2]=0,K[3]=0,K[5]=0,K[6]=0,K[7]=0),K[0]=1,K[4]=1,K[8]=1,K}function F(K,ht){return K[0]=ht[0],K[1]=ht[1],K[2]=ht[2],K[3]=ht[4],K[4]=ht[5],K[5]=ht[6],K[6]=ht[8],K[7]=ht[9],K[8]=ht[10],K}function L(K){var ht=new d.WT(9);return ht[0]=K[0],ht[1]=K[1],ht[2]=K[2],ht[3]=K[3],ht[4]=K[4],ht[5]=K[5],ht[6]=K[6],ht[7]=K[7],ht[8]=K[8],ht}function O(K,ht){return K[0]=ht[0],K[1]=ht[1],K[2]=ht[2],K[3]=ht[3],K[4]=ht[4],K[5]=ht[5],K[6]=ht[6],K[7]=ht[7],K[8]=ht[8],K}function _(K,ht,J,At,Vt,pt,Lt,Tt,kt){var jt=new d.WT(9);return jt[0]=K,jt[1]=ht,jt[2]=J,jt[3]=At,jt[4]=Vt,jt[5]=pt,jt[6]=Lt,jt[7]=Tt,jt[8]=kt,jt}function P(K,ht,J,At,Vt,pt,Lt,Tt,kt,jt){return K[0]=ht,K[1]=J,K[2]=At,K[3]=Vt,K[4]=pt,K[5]=Lt,K[6]=Tt,K[7]=kt,K[8]=jt,K}function A(K){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=1,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function x(K,ht){if(K===ht){var J=ht[1],At=ht[2],Vt=ht[5];K[1]=ht[3],K[2]=ht[6],K[3]=J,K[5]=ht[7],K[6]=At,K[7]=Vt}else K[0]=ht[0],K[1]=ht[3],K[2]=ht[6],K[3]=ht[1],K[4]=ht[4],K[5]=ht[7],K[6]=ht[2],K[7]=ht[5],K[8]=ht[8];return K}function C(K,ht){var J=ht[0],At=ht[1],Vt=ht[2],pt=ht[3],Lt=ht[4],Tt=ht[5],kt=ht[6],jt=ht[7],Wt=ht[8],zt=Wt*Lt-Tt*jt,bt=-Wt*pt+Tt*kt,at=jt*pt-Lt*kt,ft=J*zt+At*bt+Vt*at;return ft?(ft=1/ft,K[0]=zt*ft,K[1]=(-Wt*At+Vt*jt)*ft,K[2]=(Tt*At-Vt*Lt)*ft,K[3]=bt*ft,K[4]=(Wt*J-Vt*kt)*ft,K[5]=(-Tt*J+Vt*pt)*ft,K[6]=at*ft,K[7]=(-jt*J+At*kt)*ft,K[8]=(Lt*J-At*pt)*ft,K):null}function w(K,ht){var J=ht[0],At=ht[1],Vt=ht[2],pt=ht[3],Lt=ht[4],Tt=ht[5],kt=ht[6],jt=ht[7],Wt=ht[8];return K[0]=Lt*Wt-Tt*jt,K[1]=Vt*jt-At*Wt,K[2]=At*Tt-Vt*Lt,K[3]=Tt*kt-pt*Wt,K[4]=J*Wt-Vt*kt,K[5]=Vt*pt-J*Tt,K[6]=pt*jt-Lt*kt,K[7]=At*kt-J*jt,K[8]=J*Lt-At*pt,K}function M(K){var ht=K[0],J=K[1],At=K[2],Vt=K[3],pt=K[4],Lt=K[5],Tt=K[6],kt=K[7],jt=K[8];return ht*(jt*pt-Lt*kt)+J*(-jt*Vt+Lt*Tt)+At*(kt*Vt-pt*Tt)}function S(K,ht,J){var At=ht[0],Vt=ht[1],pt=ht[2],Lt=ht[3],Tt=ht[4],kt=ht[5],jt=ht[6],Wt=ht[7],zt=ht[8],bt=J[0],at=J[1],ft=J[2],Pt=J[3],q=J[4],ut=J[5],Et=J[6],Nt=J[7],ee=J[8];return K[0]=bt*At+at*Lt+ft*jt,K[1]=bt*Vt+at*Tt+ft*Wt,K[2]=bt*pt+at*kt+ft*zt,K[3]=Pt*At+q*Lt+ut*jt,K[4]=Pt*Vt+q*Tt+ut*Wt,K[5]=Pt*pt+q*kt+ut*zt,K[6]=Et*At+Nt*Lt+ee*jt,K[7]=Et*Vt+Nt*Tt+ee*Wt,K[8]=Et*pt+Nt*kt+ee*zt,K}function I(K,ht,J){var At=ht[0],Vt=ht[1],pt=ht[2],Lt=ht[3],Tt=ht[4],kt=ht[5],jt=ht[6],Wt=ht[7],zt=ht[8],bt=J[0],at=J[1];return K[0]=At,K[1]=Vt,K[2]=pt,K[3]=Lt,K[4]=Tt,K[5]=kt,K[6]=bt*At+at*Lt+jt,K[7]=bt*Vt+at*Tt+Wt,K[8]=bt*pt+at*kt+zt,K}function B(K,ht,J){var At=ht[0],Vt=ht[1],pt=ht[2],Lt=ht[3],Tt=ht[4],kt=ht[5],jt=ht[6],Wt=ht[7],zt=ht[8],bt=Math.sin(J),at=Math.cos(J);return K[0]=at*At+bt*Lt,K[1]=at*Vt+bt*Tt,K[2]=at*pt+bt*kt,K[3]=at*Lt-bt*At,K[4]=at*Tt-bt*Vt,K[5]=at*kt-bt*pt,K[6]=jt,K[7]=Wt,K[8]=zt,K}function N(K,ht,J){var At=J[0],Vt=J[1];return K[0]=At*ht[0],K[1]=At*ht[1],K[2]=At*ht[2],K[3]=Vt*ht[3],K[4]=Vt*ht[4],K[5]=Vt*ht[5],K[6]=ht[6],K[7]=ht[7],K[8]=ht[8],K}function G(K,ht){return K[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=1,K[5]=0,K[6]=ht[0],K[7]=ht[1],K[8]=1,K}function W(K,ht){var J=Math.sin(ht),At=Math.cos(ht);return K[0]=At,K[1]=J,K[2]=0,K[3]=-J,K[4]=At,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function $(K,ht){return K[0]=ht[0],K[1]=0,K[2]=0,K[3]=0,K[4]=ht[1],K[5]=0,K[6]=0,K[7]=0,K[8]=1,K}function H(K,ht){return K[0]=ht[0],K[1]=ht[1],K[2]=0,K[3]=ht[2],K[4]=ht[3],K[5]=0,K[6]=ht[4],K[7]=ht[5],K[8]=1,K}function j(K,ht){var J=ht[0],At=ht[1],Vt=ht[2],pt=ht[3],Lt=J+J,Tt=At+At,kt=Vt+Vt,jt=J*Lt,Wt=At*Lt,zt=At*Tt,bt=Vt*Lt,at=Vt*Tt,ft=Vt*kt,Pt=pt*Lt,q=pt*Tt,ut=pt*kt;return K[0]=1-zt-ft,K[3]=Wt-ut,K[6]=bt+q,K[1]=Wt+ut,K[4]=1-jt-ft,K[7]=at-Pt,K[2]=bt-q,K[5]=at+Pt,K[8]=1-jt-zt,K}function nt(K,ht){var J=ht[0],At=ht[1],Vt=ht[2],pt=ht[3],Lt=ht[4],Tt=ht[5],kt=ht[6],jt=ht[7],Wt=ht[8],zt=ht[9],bt=ht[10],at=ht[11],ft=ht[12],Pt=ht[13],q=ht[14],ut=ht[15],Et=J*Tt-At*Lt,Nt=J*kt-Vt*Lt,ee=J*jt-pt*Lt,ge=At*kt-Vt*Tt,De=At*jt-pt*Tt,er=Vt*jt-pt*kt,Re=Wt*Pt-zt*ft,Ke=Wt*q-bt*ft,hr=Wt*ut-at*ft,Sr=zt*q-bt*Pt,Rr=zt*ut-at*Pt,vr=bt*ut-at*q,en=Et*vr-Nt*Rr+ee*Sr+ge*hr-De*Ke+er*Re;return en?(en=1/en,K[0]=(Tt*vr-kt*Rr+jt*Sr)*en,K[1]=(kt*hr-Lt*vr-jt*Ke)*en,K[2]=(Lt*Rr-Tt*hr+jt*Re)*en,K[3]=(Vt*Rr-At*vr-pt*Sr)*en,K[4]=(J*vr-Vt*hr+pt*Ke)*en,K[5]=(At*hr-J*Rr-pt*Re)*en,K[6]=(Pt*er-q*De+ut*ge)*en,K[7]=(q*ee-ft*er-ut*Nt)*en,K[8]=(ft*De-Pt*ee+ut*Et)*en,K):null}function rt(K,ht,J){return K[0]=2/ht,K[1]=0,K[2]=0,K[3]=0,K[4]=-2/J,K[5]=0,K[6]=-1,K[7]=1,K[8]=1,K}function mt(K){return"mat3("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+", "+K[4]+", "+K[5]+", "+K[6]+", "+K[7]+", "+K[8]+")"}function Ft(K){return Math.hypot(K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],K[8])}function Gt(K,ht,J){return K[0]=ht[0]+J[0],K[1]=ht[1]+J[1],K[2]=ht[2]+J[2],K[3]=ht[3]+J[3],K[4]=ht[4]+J[4],K[5]=ht[5]+J[5],K[6]=ht[6]+J[6],K[7]=ht[7]+J[7],K[8]=ht[8]+J[8],K}function gt(K,ht,J){return K[0]=ht[0]-J[0],K[1]=ht[1]-J[1],K[2]=ht[2]-J[2],K[3]=ht[3]-J[3],K[4]=ht[4]-J[4],K[5]=ht[5]-J[5],K[6]=ht[6]-J[6],K[7]=ht[7]-J[7],K[8]=ht[8]-J[8],K}function st(K,ht,J){return K[0]=ht[0]*J,K[1]=ht[1]*J,K[2]=ht[2]*J,K[3]=ht[3]*J,K[4]=ht[4]*J,K[5]=ht[5]*J,K[6]=ht[6]*J,K[7]=ht[7]*J,K[8]=ht[8]*J,K}function Xt(K,ht,J,At){return K[0]=ht[0]+J[0]*At,K[1]=ht[1]+J[1]*At,K[2]=ht[2]+J[2]*At,K[3]=ht[3]+J[3]*At,K[4]=ht[4]+J[4]*At,K[5]=ht[5]+J[5]*At,K[6]=ht[6]+J[6]*At,K[7]=ht[7]+J[7]*At,K[8]=ht[8]+J[8]*At,K}function Q(K,ht){return K[0]===ht[0]&&K[1]===ht[1]&&K[2]===ht[2]&&K[3]===ht[3]&&K[4]===ht[4]&&K[5]===ht[5]&&K[6]===ht[6]&&K[7]===ht[7]&&K[8]===ht[8]}function qt(K,ht){var J=K[0],At=K[1],Vt=K[2],pt=K[3],Lt=K[4],Tt=K[5],kt=K[6],jt=K[7],Wt=K[8],zt=ht[0],bt=ht[1],at=ht[2],ft=ht[3],Pt=ht[4],q=ht[5],ut=ht[6],Et=ht[7],Nt=ht[8];return Math.abs(J-zt)<=d.Ib*Math.max(1,Math.abs(J),Math.abs(zt))&&Math.abs(At-bt)<=d.Ib*Math.max(1,Math.abs(At),Math.abs(bt))&&Math.abs(Vt-at)<=d.Ib*Math.max(1,Math.abs(Vt),Math.abs(at))&&Math.abs(pt-ft)<=d.Ib*Math.max(1,Math.abs(pt),Math.abs(ft))&&Math.abs(Lt-Pt)<=d.Ib*Math.max(1,Math.abs(Lt),Math.abs(Pt))&&Math.abs(Tt-q)<=d.Ib*Math.max(1,Math.abs(Tt),Math.abs(q))&&Math.abs(kt-ut)<=d.Ib*Math.max(1,Math.abs(kt),Math.abs(ut))&&Math.abs(jt-Et)<=d.Ib*Math.max(1,Math.abs(jt),Math.abs(Et))&&Math.abs(Wt-Nt)<=d.Ib*Math.max(1,Math.abs(Wt),Math.abs(Nt))}var y=S,Yt=gt},7124:function(xt,T,v){"use strict";v.r(T),v.d(T,{create:function(){return c},clone:function(){return F},fromValues:function(){return L},copy:function(){return O},set:function(){return _},add:function(){return P},subtract:function(){return A},multiply:function(){return x},divide:function(){return C},ceil:function(){return w},floor:function(){return M},min:function(){return S},max:function(){return I},round:function(){return B},scale:function(){return N},scaleAndAdd:function(){return G},distance:function(){return W},squaredDistance:function(){return $},length:function(){return H},squaredLength:function(){return j},negate:function(){return nt},inverse:function(){return rt},normalize:function(){return mt},dot:function(){return Ft},cross:function(){return Gt},lerp:function(){return gt},random:function(){return st},transformMat2:function(){return Xt},transformMat2d:function(){return Q},transformMat3:function(){return qt},transformMat4:function(){return y},rotate:function(){return Yt},angle:function(){return K},zero:function(){return ht},str:function(){return J},exactEquals:function(){return At},equals:function(){return Vt},len:function(){return pt},sub:function(){return Lt},mul:function(){return Tt},div:function(){return kt},dist:function(){return jt},sqrDist:function(){return Wt},sqrLen:function(){return zt},forEach:function(){return bt}});var d=v(72988);function c(){var at=new d.WT(2);return d.WT!=Float32Array&&(at[0]=0,at[1]=0),at}function F(at){var ft=new d.WT(2);return ft[0]=at[0],ft[1]=at[1],ft}function L(at,ft){var Pt=new d.WT(2);return Pt[0]=at,Pt[1]=ft,Pt}function O(at,ft){return at[0]=ft[0],at[1]=ft[1],at}function _(at,ft,Pt){return at[0]=ft,at[1]=Pt,at}function P(at,ft,Pt){return at[0]=ft[0]+Pt[0],at[1]=ft[1]+Pt[1],at}function A(at,ft,Pt){return at[0]=ft[0]-Pt[0],at[1]=ft[1]-Pt[1],at}function x(at,ft,Pt){return at[0]=ft[0]*Pt[0],at[1]=ft[1]*Pt[1],at}function C(at,ft,Pt){return at[0]=ft[0]/Pt[0],at[1]=ft[1]/Pt[1],at}function w(at,ft){return at[0]=Math.ceil(ft[0]),at[1]=Math.ceil(ft[1]),at}function M(at,ft){return at[0]=Math.floor(ft[0]),at[1]=Math.floor(ft[1]),at}function S(at,ft,Pt){return at[0]=Math.min(ft[0],Pt[0]),at[1]=Math.min(ft[1],Pt[1]),at}function I(at,ft,Pt){return at[0]=Math.max(ft[0],Pt[0]),at[1]=Math.max(ft[1],Pt[1]),at}function B(at,ft){return at[0]=Math.round(ft[0]),at[1]=Math.round(ft[1]),at}function N(at,ft,Pt){return at[0]=ft[0]*Pt,at[1]=ft[1]*Pt,at}function G(at,ft,Pt,q){return at[0]=ft[0]+Pt[0]*q,at[1]=ft[1]+Pt[1]*q,at}function W(at,ft){var Pt=ft[0]-at[0],q=ft[1]-at[1];return Math.hypot(Pt,q)}function $(at,ft){var Pt=ft[0]-at[0],q=ft[1]-at[1];return Pt*Pt+q*q}function H(at){var ft=at[0],Pt=at[1];return Math.hypot(ft,Pt)}function j(at){var ft=at[0],Pt=at[1];return ft*ft+Pt*Pt}function nt(at,ft){return at[0]=-ft[0],at[1]=-ft[1],at}function rt(at,ft){return at[0]=1/ft[0],at[1]=1/ft[1],at}function mt(at,ft){var Pt=ft[0],q=ft[1],ut=Pt*Pt+q*q;return ut>0&&(ut=1/Math.sqrt(ut)),at[0]=ft[0]*ut,at[1]=ft[1]*ut,at}function Ft(at,ft){return at[0]*ft[0]+at[1]*ft[1]}function Gt(at,ft,Pt){var q=ft[0]*Pt[1]-ft[1]*Pt[0];return at[0]=at[1]=0,at[2]=q,at}function gt(at,ft,Pt,q){var ut=ft[0],Et=ft[1];return at[0]=ut+q*(Pt[0]-ut),at[1]=Et+q*(Pt[1]-Et),at}function st(at,ft){ft=ft||1;var Pt=d.FD()*2*Math.PI;return at[0]=Math.cos(Pt)*ft,at[1]=Math.sin(Pt)*ft,at}function Xt(at,ft,Pt){var q=ft[0],ut=ft[1];return at[0]=Pt[0]*q+Pt[2]*ut,at[1]=Pt[1]*q+Pt[3]*ut,at}function Q(at,ft,Pt){var q=ft[0],ut=ft[1];return at[0]=Pt[0]*q+Pt[2]*ut+Pt[4],at[1]=Pt[1]*q+Pt[3]*ut+Pt[5],at}function qt(at,ft,Pt){var q=ft[0],ut=ft[1];return at[0]=Pt[0]*q+Pt[3]*ut+Pt[6],at[1]=Pt[1]*q+Pt[4]*ut+Pt[7],at}function y(at,ft,Pt){var q=ft[0],ut=ft[1];return at[0]=Pt[0]*q+Pt[4]*ut+Pt[12],at[1]=Pt[1]*q+Pt[5]*ut+Pt[13],at}function Yt(at,ft,Pt,q){var ut=ft[0]-Pt[0],Et=ft[1]-Pt[1],Nt=Math.sin(q),ee=Math.cos(q);return at[0]=ut*ee-Et*Nt+Pt[0],at[1]=ut*Nt+Et*ee+Pt[1],at}function K(at,ft){var Pt=at[0],q=at[1],ut=ft[0],Et=ft[1],Nt=Math.sqrt(Pt*Pt+q*q)*Math.sqrt(ut*ut+Et*Et),ee=Nt&&(Pt*ut+q*Et)/Nt;return Math.acos(Math.min(Math.max(ee,-1),1))}function ht(at){return at[0]=0,at[1]=0,at}function J(at){return"vec2("+at[0]+", "+at[1]+")"}function At(at,ft){return at[0]===ft[0]&&at[1]===ft[1]}function Vt(at,ft){var Pt=at[0],q=at[1],ut=ft[0],Et=ft[1];return Math.abs(Pt-ut)<=d.Ib*Math.max(1,Math.abs(Pt),Math.abs(ut))&&Math.abs(q-Et)<=d.Ib*Math.max(1,Math.abs(q),Math.abs(Et))}var pt=H,Lt=A,Tt=x,kt=C,jt=W,Wt=$,zt=j,bt=function(){var at=c();return function(ft,Pt,q,ut,Et,Nt){var ee,ge;for(Pt||(Pt=2),q||(q=0),ut?ge=Math.min(ut*Pt+q,ft.length):ge=ft.length,ee=q;ee<ge;ee+=Pt)at[0]=ft[ee],at[1]=ft[ee+1],Et(at,at,Nt),ft[ee]=at[0],ft[ee+1]=at[1];return ft}}()},92541:function(xt,T,v){"use strict";v.r(T),v.d(T,{create:function(){return c},clone:function(){return F},length:function(){return L},fromValues:function(){return O},copy:function(){return _},set:function(){return P},add:function(){return A},subtract:function(){return x},multiply:function(){return C},divide:function(){return w},ceil:function(){return M},floor:function(){return S},min:function(){return I},max:function(){return B},round:function(){return N},scale:function(){return G},scaleAndAdd:function(){return W},distance:function(){return $},squaredDistance:function(){return H},squaredLength:function(){return j},negate:function(){return nt},inverse:function(){return rt},normalize:function(){return mt},dot:function(){return Ft},cross:function(){return Gt},lerp:function(){return gt},hermite:function(){return st},bezier:function(){return Xt},random:function(){return Q},transformMat4:function(){return qt},transformMat3:function(){return y},transformQuat:function(){return Yt},rotateX:function(){return K},rotateY:function(){return ht},rotateZ:function(){return J},angle:function(){return At},zero:function(){return Vt},str:function(){return pt},exactEquals:function(){return Lt},equals:function(){return Tt},sub:function(){return kt},mul:function(){return jt},div:function(){return Wt},dist:function(){return zt},sqrDist:function(){return bt},len:function(){return at},sqrLen:function(){return ft},forEach:function(){return Pt}});var d=v(72988);function c(){var q=new d.WT(3);return d.WT!=Float32Array&&(q[0]=0,q[1]=0,q[2]=0),q}function F(q){var ut=new d.WT(3);return ut[0]=q[0],ut[1]=q[1],ut[2]=q[2],ut}function L(q){var ut=q[0],Et=q[1],Nt=q[2];return Math.hypot(ut,Et,Nt)}function O(q,ut,Et){var Nt=new d.WT(3);return Nt[0]=q,Nt[1]=ut,Nt[2]=Et,Nt}function _(q,ut){return q[0]=ut[0],q[1]=ut[1],q[2]=ut[2],q}function P(q,ut,Et,Nt){return q[0]=ut,q[1]=Et,q[2]=Nt,q}function A(q,ut,Et){return q[0]=ut[0]+Et[0],q[1]=ut[1]+Et[1],q[2]=ut[2]+Et[2],q}function x(q,ut,Et){return q[0]=ut[0]-Et[0],q[1]=ut[1]-Et[1],q[2]=ut[2]-Et[2],q}function C(q,ut,Et){return q[0]=ut[0]*Et[0],q[1]=ut[1]*Et[1],q[2]=ut[2]*Et[2],q}function w(q,ut,Et){return q[0]=ut[0]/Et[0],q[1]=ut[1]/Et[1],q[2]=ut[2]/Et[2],q}function M(q,ut){return q[0]=Math.ceil(ut[0]),q[1]=Math.ceil(ut[1]),q[2]=Math.ceil(ut[2]),q}function S(q,ut){return q[0]=Math.floor(ut[0]),q[1]=Math.floor(ut[1]),q[2]=Math.floor(ut[2]),q}function I(q,ut,Et){return q[0]=Math.min(ut[0],Et[0]),q[1]=Math.min(ut[1],Et[1]),q[2]=Math.min(ut[2],Et[2]),q}function B(q,ut,Et){return q[0]=Math.max(ut[0],Et[0]),q[1]=Math.max(ut[1],Et[1]),q[2]=Math.max(ut[2],Et[2]),q}function N(q,ut){return q[0]=Math.round(ut[0]),q[1]=Math.round(ut[1]),q[2]=Math.round(ut[2]),q}function G(q,ut,Et){return q[0]=ut[0]*Et,q[1]=ut[1]*Et,q[2]=ut[2]*Et,q}function W(q,ut,Et,Nt){return q[0]=ut[0]+Et[0]*Nt,q[1]=ut[1]+Et[1]*Nt,q[2]=ut[2]+Et[2]*Nt,q}function $(q,ut){var Et=ut[0]-q[0],Nt=ut[1]-q[1],ee=ut[2]-q[2];return Math.hypot(Et,Nt,ee)}function H(q,ut){var Et=ut[0]-q[0],Nt=ut[1]-q[1],ee=ut[2]-q[2];return Et*Et+Nt*Nt+ee*ee}function j(q){var ut=q[0],Et=q[1],Nt=q[2];return ut*ut+Et*Et+Nt*Nt}function nt(q,ut){return q[0]=-ut[0],q[1]=-ut[1],q[2]=-ut[2],q}function rt(q,ut){return q[0]=1/ut[0],q[1]=1/ut[1],q[2]=1/ut[2],q}function mt(q,ut){var Et=ut[0],Nt=ut[1],ee=ut[2],ge=Et*Et+Nt*Nt+ee*ee;return ge>0&&(ge=1/Math.sqrt(ge)),q[0]=ut[0]*ge,q[1]=ut[1]*ge,q[2]=ut[2]*ge,q}function Ft(q,ut){return q[0]*ut[0]+q[1]*ut[1]+q[2]*ut[2]}function Gt(q,ut,Et){var Nt=ut[0],ee=ut[1],ge=ut[2],De=Et[0],er=Et[1],Re=Et[2];return q[0]=ee*Re-ge*er,q[1]=ge*De-Nt*Re,q[2]=Nt*er-ee*De,q}function gt(q,ut,Et,Nt){var ee=ut[0],ge=ut[1],De=ut[2];return q[0]=ee+Nt*(Et[0]-ee),q[1]=ge+Nt*(Et[1]-ge),q[2]=De+Nt*(Et[2]-De),q}function st(q,ut,Et,Nt,ee,ge){var De=ge*ge,er=De*(2*ge-3)+1,Re=De*(ge-2)+ge,Ke=De*(ge-1),hr=De*(3-2*ge);return q[0]=ut[0]*er+Et[0]*Re+Nt[0]*Ke+ee[0]*hr,q[1]=ut[1]*er+Et[1]*Re+Nt[1]*Ke+ee[1]*hr,q[2]=ut[2]*er+Et[2]*Re+Nt[2]*Ke+ee[2]*hr,q}function Xt(q,ut,Et,Nt,ee,ge){var De=1-ge,er=De*De,Re=ge*ge,Ke=er*De,hr=3*ge*er,Sr=3*Re*De,Rr=Re*ge;return q[0]=ut[0]*Ke+Et[0]*hr+Nt[0]*Sr+ee[0]*Rr,q[1]=ut[1]*Ke+Et[1]*hr+Nt[1]*Sr+ee[1]*Rr,q[2]=ut[2]*Ke+Et[2]*hr+Nt[2]*Sr+ee[2]*Rr,q}function Q(q,ut){ut=ut||1;var Et=d.FD()*2*Math.PI,Nt=d.FD()*2-1,ee=Math.sqrt(1-Nt*Nt)*ut;return q[0]=Math.cos(Et)*ee,q[1]=Math.sin(Et)*ee,q[2]=Nt*ut,q}function qt(q,ut,Et){var Nt=ut[0],ee=ut[1],ge=ut[2],De=Et[3]*Nt+Et[7]*ee+Et[11]*ge+Et[15];return De=De||1,q[0]=(Et[0]*Nt+Et[4]*ee+Et[8]*ge+Et[12])/De,q[1]=(Et[1]*Nt+Et[5]*ee+Et[9]*ge+Et[13])/De,q[2]=(Et[2]*Nt+Et[6]*ee+Et[10]*ge+Et[14])/De,q}function y(q,ut,Et){var Nt=ut[0],ee=ut[1],ge=ut[2];return q[0]=Nt*Et[0]+ee*Et[3]+ge*Et[6],q[1]=Nt*Et[1]+ee*Et[4]+ge*Et[7],q[2]=Nt*Et[2]+ee*Et[5]+ge*Et[8],q}function Yt(q,ut,Et){var Nt=Et[0],ee=Et[1],ge=Et[2],De=Et[3],er=ut[0],Re=ut[1],Ke=ut[2],hr=ee*Ke-ge*Re,Sr=ge*er-Nt*Ke,Rr=Nt*Re-ee*er,vr=ee*Rr-ge*Sr,en=ge*hr-Nt*Rr,gn=Nt*Sr-ee*hr,hn=De*2;return hr*=hn,Sr*=hn,Rr*=hn,vr*=2,en*=2,gn*=2,q[0]=er+hr+vr,q[1]=Re+Sr+en,q[2]=Ke+Rr+gn,q}function K(q,ut,Et,Nt){var ee=[],ge=[];return ee[0]=ut[0]-Et[0],ee[1]=ut[1]-Et[1],ee[2]=ut[2]-Et[2],ge[0]=ee[0],ge[1]=ee[1]*Math.cos(Nt)-ee[2]*Math.sin(Nt),ge[2]=ee[1]*Math.sin(Nt)+ee[2]*Math.cos(Nt),q[0]=ge[0]+Et[0],q[1]=ge[1]+Et[1],q[2]=ge[2]+Et[2],q}function ht(q,ut,Et,Nt){var ee=[],ge=[];return ee[0]=ut[0]-Et[0],ee[1]=ut[1]-Et[1],ee[2]=ut[2]-Et[2],ge[0]=ee[2]*Math.sin(Nt)+ee[0]*Math.cos(Nt),ge[1]=ee[1],ge[2]=ee[2]*Math.cos(Nt)-ee[0]*Math.sin(Nt),q[0]=ge[0]+Et[0],q[1]=ge[1]+Et[1],q[2]=ge[2]+Et[2],q}function J(q,ut,Et,Nt){var ee=[],ge=[];return ee[0]=ut[0]-Et[0],ee[1]=ut[1]-Et[1],ee[2]=ut[2]-Et[2],ge[0]=ee[0]*Math.cos(Nt)-ee[1]*Math.sin(Nt),ge[1]=ee[0]*Math.sin(Nt)+ee[1]*Math.cos(Nt),ge[2]=ee[2],q[0]=ge[0]+Et[0],q[1]=ge[1]+Et[1],q[2]=ge[2]+Et[2],q}function At(q,ut){var Et=q[0],Nt=q[1],ee=q[2],ge=ut[0],De=ut[1],er=ut[2],Re=Math.sqrt(Et*Et+Nt*Nt+ee*ee),Ke=Math.sqrt(ge*ge+De*De+er*er),hr=Re*Ke,Sr=hr&&Ft(q,ut)/hr;return Math.acos(Math.min(Math.max(Sr,-1),1))}function Vt(q){return q[0]=0,q[1]=0,q[2]=0,q}function pt(q){return"vec3("+q[0]+", "+q[1]+", "+q[2]+")"}function Lt(q,ut){return q[0]===ut[0]&&q[1]===ut[1]&&q[2]===ut[2]}function Tt(q,ut){var Et=q[0],Nt=q[1],ee=q[2],ge=ut[0],De=ut[1],er=ut[2];return Math.abs(Et-ge)<=d.Ib*Math.max(1,Math.abs(Et),Math.abs(ge))&&Math.abs(Nt-De)<=d.Ib*Math.max(1,Math.abs(Nt),Math.abs(De))&&Math.abs(ee-er)<=d.Ib*Math.max(1,Math.abs(ee),Math.abs(er))}var kt=x,jt=C,Wt=w,zt=$,bt=H,at=L,ft=j,Pt=function(){var q=c();return function(ut,Et,Nt,ee,ge,De){var er,Re;for(Et||(Et=3),Nt||(Nt=0),ee?Re=Math.min(ee*Et+Nt,ut.length):Re=ut.length,er=Nt;er<Re;er+=Et)q[0]=ut[er],q[1]=ut[er+1],q[2]=ut[er+2],ge(q,q,De),ut[er]=q[0],ut[er+1]=q[1],ut[er+2]=q[2];return ut}}()},75172:function(xt,T,v){var d=v(89224);xt.exports={Graph:d.Graph,json:v(17401),alg:v(54613),version:d.version}},91606:function(xt,T,v){var d=v(95329);xt.exports=c;function c(F){var L={},O=[],_;function P(A){d.has(L,A)||(L[A]=!0,_.push(A),d.each(F.successors(A),P),d.each(F.predecessors(A),P))}return d.each(F.nodes(),function(A){_=[],P(A),_.length&&O.push(_)}),O}},21482:function(xt,T,v){var d=v(95329);xt.exports=c;function c(L,O,_){d.isArray(O)||(O=[O]);var P=(L.isDirected()?L.successors:L.neighbors).bind(L),A=[],x={};return d.each(O,function(C){if(!L.hasNode(C))throw new Error("Graph does not have node: "+C);F(L,C,_==="post",x,P,A)}),A}function F(L,O,_,P,A,x){d.has(P,O)||(P[O]=!0,_||x.push(O),d.each(A(O),function(C){F(L,C,_,P,A,x)}),_&&x.push(O))}},40845:function(xt,T,v){var d=v(13746),c=v(95329);xt.exports=F;function F(L,O,_){return c.transform(L.nodes(),function(P,A){P[A]=d(L,A,O,_)},{})}},13746:function(xt,T,v){var d=v(95329),c=v(36614);xt.exports=L;var F=d.constant(1);function L(_,P,A,x){return O(_,String(P),A||F,x||function(C){return _.outEdges(C)})}function O(_,P,A,x){var C={},w=new c,M,S,I=function(B){var N=B.v!==M?B.v:B.w,G=C[N],W=A(B),$=S.distance+W;if(W<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+B+" Weight: "+W);$<G.distance&&(G.distance=$,G.predecessor=M,w.decrease(N,$))};for(_.nodes().forEach(function(B){var N=B===P?0:Number.POSITIVE_INFINITY;C[B]={distance:N},w.add(B,N)});w.size()>0&&(M=w.removeMin(),S=C[M],S.distance!==Number.POSITIVE_INFINITY);)x(M).forEach(I);return C}},59324:function(xt,T,v){var d=v(95329),c=v(94558);xt.exports=F;function F(L){return d.filter(c(L),function(O){return O.length>1||O.length===1&&L.hasEdge(O[0],O[0])})}},22893:function(xt,T,v){var d=v(95329);xt.exports=F;var c=d.constant(1);function F(O,_,P){return L(O,_||c,P||function(A){return O.outEdges(A)})}function L(O,_,P){var A={},x=O.nodes();return x.forEach(function(C){A[C]={},A[C][C]={distance:0},x.forEach(function(w){C!==w&&(A[C][w]={distance:Number.POSITIVE_INFINITY})}),P(C).forEach(function(w){var M=w.v===C?w.w:w.v,S=_(w);A[C][M]={distance:S,predecessor:C}})}),x.forEach(function(C){var w=A[C];x.forEach(function(M){var S=A[M];x.forEach(function(I){var B=S[C],N=w[I],G=S[I],W=B.distance+N.distance;W<G.distance&&(G.distance=W,G.predecessor=N.predecessor)})})}),A}},54613:function(xt,T,v){xt.exports={components:v(91606),dijkstra:v(13746),dijkstraAll:v(40845),findCycles:v(59324),floydWarshall:v(22893),isAcyclic:v(588),postorder:v(98049),preorder:v(67158),prim:v(66058),tarjan:v(94558),topsort:v(7793)}},588:function(xt,T,v){var d=v(7793);xt.exports=c;function c(F){try{d(F)}catch(L){if(L instanceof d.CycleException)return!1;throw L}return!0}},98049:function(xt,T,v){var d=v(21482);xt.exports=c;function c(F,L){return d(F,L,"post")}},67158:function(xt,T,v){var d=v(21482);xt.exports=c;function c(F,L){return d(F,L,"pre")}},66058:function(xt,T,v){var d=v(95329),c=v(6349),F=v(36614);xt.exports=L;function L(O,_){var P=new c,A={},x=new F,C;function w(S){var I=S.v===C?S.w:S.v,B=x.priority(I);if(B!==void 0){var N=_(S);N<B&&(A[I]=C,x.decrease(I,N))}}if(O.nodeCount()===0)return P;d.each(O.nodes(),function(S){x.add(S,Number.POSITIVE_INFINITY),P.setNode(S)}),x.decrease(O.nodes()[0],0);for(var M=!1;x.size()>0;){if(C=x.removeMin(),d.has(A,C))P.setEdge(C,A[C]);else{if(M)throw new Error("Input graph is not connected: "+O);M=!0}O.nodeEdges(C).forEach(w)}return P}},94558:function(xt,T,v){var d=v(95329);xt.exports=c;function c(F){var L=0,O=[],_={},P=[];function A(x){var C=_[x]={onStack:!0,lowlink:L,index:L++};if(O.push(x),F.successors(x).forEach(function(S){d.has(_,S)?_[S].onStack&&(C.lowlink=Math.min(C.lowlink,_[S].index)):(A(S),C.lowlink=Math.min(C.lowlink,_[S].lowlink))}),C.lowlink===C.index){var w=[],M;do M=O.pop(),_[M].onStack=!1,w.push(M);while(x!==M);P.push(w)}}return F.nodes().forEach(function(x){d.has(_,x)||A(x)}),P}},7793:function(xt,T,v){var d=v(95329);xt.exports=c,c.CycleException=F;function c(L){var O={},_={},P=[];function A(x){if(d.has(_,x))throw new F;d.has(O,x)||(_[x]=!0,O[x]=!0,d.each(L.predecessors(x),A),delete _[x],P.push(x))}if(d.each(L.sinks(),A),d.size(O)!==L.nodeCount())throw new F;return P}function F(){}F.prototype=new Error},36614:function(xt,T,v){var d=v(95329);xt.exports=c;function c(){this._arr=[],this._keyIndices={}}c.prototype.size=function(){return this._arr.length},c.prototype.keys=function(){return this._arr.map(function(F){return F.key})},c.prototype.has=function(F){return d.has(this._keyIndices,F)},c.prototype.priority=function(F){var L=this._keyIndices[F];if(L!==void 0)return this._arr[L].priority},c.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},c.prototype.add=function(F,L){var O=this._keyIndices;if(F=String(F),!d.has(O,F)){var _=this._arr,P=_.length;return O[F]=P,_.push({key:F,priority:L}),this._decrease(P),!0}return!1},c.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var F=this._arr.pop();return delete this._keyIndices[F.key],this._heapify(0),F.key},c.prototype.decrease=function(F,L){var O=this._keyIndices[F];if(L>this._arr[O].priority)throw new Error("New priority is greater than current priority. Key: "+F+" Old: "+this._arr[O].priority+" New: "+L);this._arr[O].priority=L,this._decrease(O)},c.prototype._heapify=function(F){var L=this._arr,O=2*F,_=O+1,P=F;O<L.length&&(P=L[O].priority<L[P].priority?O:P,_<L.length&&(P=L[_].priority<L[P].priority?_:P),P!==F&&(this._swap(F,P),this._heapify(P)))},c.prototype._decrease=function(F){for(var L=this._arr,O=L[F].priority,_;F!==0&&(_=F>>1,!(L[_].priority<O));)this._swap(F,_),F=_},c.prototype._swap=function(F,L){var O=this._arr,_=this._keyIndices,P=O[F],A=O[L];O[F]=A,O[L]=P,_[A.key]=F,_[P.key]=L}},6349:function(xt,T,v){"use strict";var d=v(95329);xt.exports=O;var c="\0",F="\0",L="";function O(w){this._isDirected=d.has(w,"directed")?w.directed:!0,this._isMultigraph=d.has(w,"multigraph")?w.multigraph:!1,this._isCompound=d.has(w,"compound")?w.compound:!1,this._label=void 0,this._defaultNodeLabelFn=d.constant(void 0),this._defaultEdgeLabelFn=d.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[F]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}O.prototype._nodeCount=0,O.prototype._edgeCount=0,O.prototype.isDirected=function(){return this._isDirected},O.prototype.isMultigraph=function(){return this._isMultigraph},O.prototype.isCompound=function(){return this._isCompound},O.prototype.setGraph=function(w){return this._label=w,this},O.prototype.graph=function(){return this._label},O.prototype.setDefaultNodeLabel=function(w){return d.isFunction(w)||(w=d.constant(w)),this._defaultNodeLabelFn=w,this},O.prototype.nodeCount=function(){return this._nodeCount},O.prototype.nodes=function(){return d.keys(this._nodes)},O.prototype.sources=function(){var w=this;return d.filter(this.nodes(),function(M){return d.isEmpty(w._in[M])})},O.prototype.sinks=function(){var w=this;return d.filter(this.nodes(),function(M){return d.isEmpty(w._out[M])})},O.prototype.setNodes=function(w,M){var S=arguments,I=this;return d.each(w,function(B){S.length>1?I.setNode(B,M):I.setNode(B)}),this},O.prototype.setNode=function(w,M){return d.has(this._nodes,w)?(arguments.length>1&&(this._nodes[w]=M),this):(this._nodes[w]=arguments.length>1?M:this._defaultNodeLabelFn(w),this._isCompound&&(this._parent[w]=F,this._children[w]={},this._children[F][w]=!0),this._in[w]={},this._preds[w]={},this._out[w]={},this._sucs[w]={},++this._nodeCount,this)},O.prototype.node=function(w){return this._nodes[w]},O.prototype.hasNode=function(w){return d.has(this._nodes,w)},O.prototype.removeNode=function(w){var M=this;if(d.has(this._nodes,w)){var S=function(I){M.removeEdge(M._edgeObjs[I])};delete this._nodes[w],this._isCompound&&(this._removeFromParentsChildList(w),delete this._parent[w],d.each(this.children(w),function(I){M.setParent(I)}),delete this._children[w]),d.each(d.keys(this._in[w]),S),delete this._in[w],delete this._preds[w],d.each(d.keys(this._out[w]),S),delete this._out[w],delete this._sucs[w],--this._nodeCount}return this},O.prototype.setParent=function(w,M){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d.isUndefined(M))M=F;else{M+="";for(var S=M;!d.isUndefined(S);S=this.parent(S))if(S===w)throw new Error("Setting "+M+" as parent of "+w+" would create a cycle");this.setNode(M)}return this.setNode(w),this._removeFromParentsChildList(w),this._parent[w]=M,this._children[M][w]=!0,this},O.prototype._removeFromParentsChildList=function(w){delete this._children[this._parent[w]][w]},O.prototype.parent=function(w){if(this._isCompound){var M=this._parent[w];if(M!==F)return M}},O.prototype.children=function(w){if(d.isUndefined(w)&&(w=F),this._isCompound){var M=this._children[w];if(M)return d.keys(M)}else{if(w===F)return this.nodes();if(this.hasNode(w))return[]}},O.prototype.predecessors=function(w){var M=this._preds[w];if(M)return d.keys(M)},O.prototype.successors=function(w){var M=this._sucs[w];if(M)return d.keys(M)},O.prototype.neighbors=function(w){var M=this.predecessors(w);if(M)return d.union(M,this.successors(w))},O.prototype.isLeaf=function(w){var M;return this.isDirected()?M=this.successors(w):M=this.neighbors(w),M.length===0},O.prototype.filterNodes=function(w){var M=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});M.setGraph(this.graph());var S=this;d.each(this._nodes,function(N,G){w(G)&&M.setNode(G,N)}),d.each(this._edgeObjs,function(N){M.hasNode(N.v)&&M.hasNode(N.w)&&M.setEdge(N,S.edge(N))});var I={};function B(N){var G=S.parent(N);return G===void 0||M.hasNode(G)?(I[N]=G,G):G in I?I[G]:B(G)}return this._isCompound&&d.each(M.nodes(),function(N){M.setParent(N,B(N))}),M},O.prototype.setDefaultEdgeLabel=function(w){return d.isFunction(w)||(w=d.constant(w)),this._defaultEdgeLabelFn=w,this},O.prototype.edgeCount=function(){return this._edgeCount},O.prototype.edges=function(){return d.values(this._edgeObjs)},O.prototype.setPath=function(w,M){var S=this,I=arguments;return d.reduce(w,function(B,N){return I.length>1?S.setEdge(B,N,M):S.setEdge(B,N),N}),this},O.prototype.setEdge=function(){var w,M,S,I,B=!1,N=arguments[0];typeof N=="object"&&N!==null&&"v"in N?(w=N.v,M=N.w,S=N.name,arguments.length===2&&(I=arguments[1],B=!0)):(w=N,M=arguments[1],S=arguments[3],arguments.length>2&&(I=arguments[2],B=!0)),w=""+w,M=""+M,d.isUndefined(S)||(S=""+S);var G=A(this._isDirected,w,M,S);if(d.has(this._edgeLabels,G))return B&&(this._edgeLabels[G]=I),this;if(!d.isUndefined(S)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(w),this.setNode(M),this._edgeLabels[G]=B?I:this._defaultEdgeLabelFn(w,M,S);var W=x(this._isDirected,w,M,S);return w=W.v,M=W.w,Object.freeze(W),this._edgeObjs[G]=W,_(this._preds[M],w),_(this._sucs[w],M),this._in[M][G]=W,this._out[w][G]=W,this._edgeCount++,this},O.prototype.edge=function(w,M,S){var I=arguments.length===1?C(this._isDirected,arguments[0]):A(this._isDirected,w,M,S);return this._edgeLabels[I]},O.prototype.hasEdge=function(w,M,S){var I=arguments.length===1?C(this._isDirected,arguments[0]):A(this._isDirected,w,M,S);return d.has(this._edgeLabels,I)},O.prototype.removeEdge=function(w,M,S){var I=arguments.length===1?C(this._isDirected,arguments[0]):A(this._isDirected,w,M,S),B=this._edgeObjs[I];return B&&(w=B.v,M=B.w,delete this._edgeLabels[I],delete this._edgeObjs[I],P(this._preds[M],w),P(this._sucs[w],M),delete this._in[M][I],delete this._out[w][I],this._edgeCount--),this},O.prototype.inEdges=function(w,M){var S=this._in[w];if(S){var I=d.values(S);return M?d.filter(I,function(B){return B.v===M}):I}},O.prototype.outEdges=function(w,M){var S=this._out[w];if(S){var I=d.values(S);return M?d.filter(I,function(B){return B.w===M}):I}},O.prototype.nodeEdges=function(w,M){var S=this.inEdges(w,M);if(S)return S.concat(this.outEdges(w,M))};function _(w,M){w[M]?w[M]++:w[M]=1}function P(w,M){--w[M]||delete w[M]}function A(w,M,S,I){var B=""+M,N=""+S;if(!w&&B>N){var G=B;B=N,N=G}return B+L+N+L+(d.isUndefined(I)?c:I)}function x(w,M,S,I){var B=""+M,N=""+S;if(!w&&B>N){var G=B;B=N,N=G}var W={v:B,w:N};return I&&(W.name=I),W}function C(w,M){return A(w,M.v,M.w,M.name)}},89224:function(xt,T,v){xt.exports={Graph:v(6349),version:v(16544)}},17401:function(xt,T,v){var d=v(95329),c=v(6349);xt.exports={write:F,read:_};function F(P){var A={options:{directed:P.isDirected(),multigraph:P.isMultigraph(),compound:P.isCompound()},nodes:L(P),edges:O(P)};return d.isUndefined(P.graph())||(A.value=d.clone(P.graph())),A}function L(P){return d.map(P.nodes(),function(A){var x=P.node(A),C=P.parent(A),w={v:A};return d.isUndefined(x)||(w.value=x),d.isUndefined(C)||(w.parent=C),w})}function O(P){return d.map(P.edges(),function(A){var x=P.edge(A),C={v:A.v,w:A.w};return d.isUndefined(A.name)||(C.name=A.name),d.isUndefined(x)||(C.value=x),C})}function _(P){var A=new c(P.options).setGraph(P.value);return d.each(P.nodes,function(x){A.setNode(x.v,x.value),x.parent&&A.setParent(x.v,x.parent)}),d.each(P.edges,function(x){A.setEdge({v:x.v,w:x.w,name:x.name},x.value)}),A}},95329:function(xt,T,v){var d;try{d={clone:v(76833),constant:v(13503),each:v(76934),filter:v(64725),has:v(99946),isArray:v(80744),isEmpty:v(61627),isFunction:v(9363),isUndefined:v(16513),keys:v(55451),map:v(9924),reduce:v(16473),size:v(40617),transform:v(91116),union:v(44065),values:v(81229)}}catch(c){}d||(d=window._),xt.exports=d},16544:function(xt){xt.exports="2.1.8"},81104:function(xt){typeof Object.create=="function"?xt.exports=function(v,d){v.super_=d,v.prototype=Object.create(d.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}})}:xt.exports=function(v,d){v.super_=d;var c=function(){};c.prototype=d.prototype,v.prototype=new c,v.prototype.constructor=v}},34508:function(xt){var T=[],v=[],d="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function c(L,O){if(O=O||{},L===void 0)throw new Error(d);var _=O.prepend===!0?"prepend":"append",P=O.container!==void 0?O.container:document.querySelector("head"),A=T.indexOf(P);A===-1&&(A=T.push(P)-1,v[A]={});var x;return v[A]!==void 0&&v[A][_]!==void 0?x=v[A][_]:(x=v[A][_]=F(),_==="prepend"?P.insertBefore(x,P.childNodes[0]):P.appendChild(x)),L.charCodeAt(0)===65279&&(L=L.substr(1,L.length)),x.styleSheet?x.styleSheet.cssText+=L:x.textContent+=L,x}function F(){var L=document.createElement("style");return L.setAttribute("type","text/css"),L}xt.exports=c,xt.exports.insertCss=c},22948:function(xt){xt.exports=function(v){return!v||typeof v=="string"?!1:v instanceof Array||Array.isArray(v)||v.length>=0&&(v.splice instanceof Function||Object.getOwnPropertyDescriptor(v,v.length-1)&&v.constructor.name!=="String")}},79628:function(xt){function T(v,d,c){switch(c.length){case 0:return v.call(d);case 1:return v.call(d,c[0]);case 2:return v.call(d,c[0],c[1]);case 3:return v.call(d,c[0],c[1],c[2])}return v.apply(d,c)}xt.exports=T},84271:function(xt,T,v){var d=v(17424);function c(F,L){var O=F==null?0:F.length;return!!O&&d(F,L,0)>-1}xt.exports=c},94874:function(xt){function T(v,d,c){for(var F=-1,L=v==null?0:v.length;++F<L;)if(c(d,v[F]))return!0;return!1}xt.exports=T},99861:function(xt){function T(v,d,c,F){var L=-1,O=v==null?0:v.length;for(F&&O&&(c=v[++L]);++L<O;)c=d(c,v[L],L,v);return c}xt.exports=T},26539:function(xt,T,v){var d=v(22310),c=d("length");xt.exports=c},89135:function(xt,T,v){var d=v(42813),c=v(43607);function F(L,O,_){(_!==void 0&&!c(L[O],_)||_===void 0&&!(O in L))&&d(L,O,_)}xt.exports=F},2659:function(xt,T,v){var d=v(45029);function c(F,L,O){for(var _=-1,P=F.length;++_<P;){var A=F[_],x=L(A);if(x!=null&&(C===void 0?x===x&&!d(x):O(x,C)))var C=x,w=A}return w}xt.exports=c},32872:function(xt,T,v){var d=v(44107);function c(F,L){var O=[];return d(F,function(_,P,A){L(_,P,A)&&O.push(_)}),O}xt.exports=c},51533:function(xt){function T(v,d,c,F){for(var L=v.length,O=c+(F?1:-1);F?O--:++O<L;)if(d(v[O],O,v))return O;return-1}xt.exports=T},9256:function(xt,T,v){var d=v(57095),c=v(88133);function F(L,O,_,P,A){var x=-1,C=L.length;for(_||(_=c),A||(A=[]);++x<C;){var w=L[x];O>0&&_(w)?O>1?F(w,O-1,_,P,A):d(A,w):P||(A[A.length]=w)}return A}xt.exports=F},40302:function(xt){function T(v,d){return v>d}xt.exports=T},3251:function(xt){var T=Object.prototype,v=T.hasOwnProperty;function d(c,F){return c!=null&&v.call(c,F)}xt.exports=d},17424:function(xt,T,v){var d=v(51533),c=v(8373),F=v(49237);function L(O,_,P){return _===_?F(O,_,P):d(O,c,P)}xt.exports=L},8373:function(xt){function T(v){return v!==v}xt.exports=T},93757:function(xt){function T(v,d){return v<d}xt.exports=T},50097:function(xt,T,v){var d=v(91866),c=v(89135),F=v(14018),L=v(23585),O=v(20816),_=v(56730),P=v(47052);function A(x,C,w,M,S){x!==C&&F(C,function(I,B){if(S||(S=new d),O(I))L(x,C,B,w,A,M,S);else{var N=M?M(P(x,B),I,B+"",x,C,S):void 0;N===void 0&&(N=I),c(x,B,N)}},_)}xt.exports=A},23585:function(xt,T,v){var d=v(89135),c=v(32315),F=v(78358),L=v(47760),O=v(4084),_=v(13053),P=v(80744),A=v(41590),x=v(57835),C=v(9363),w=v(20816),M=v(19308),S=v(18397),I=v(47052),B=v(20480);function N(G,W,$,H,j,nt,rt){var mt=I(G,$),Ft=I(W,$),Gt=rt.get(Ft);if(Gt){d(G,$,Gt);return}var gt=nt?nt(mt,Ft,$+"",G,W,rt):void 0,st=gt===void 0;if(st){var Xt=P(Ft),Q=!Xt&&x(Ft),qt=!Xt&&!Q&&S(Ft);gt=Ft,Xt||Q||qt?P(mt)?gt=mt:A(mt)?gt=L(mt):Q?(st=!1,gt=c(Ft,!0)):qt?(st=!1,gt=F(Ft,!0)):gt=[]:M(Ft)||_(Ft)?(gt=mt,_(mt)?gt=B(mt):(!w(mt)||C(mt))&&(gt=O(Ft))):st=!1}st&&(rt.set(Ft,gt),j(gt,Ft,H,nt,rt),rt.delete(Ft)),d(G,$,gt)}xt.exports=N},58506:function(xt,T,v){var d=v(75010),c=v(89147),F=v(95979),L=v(65487),O=v(33065),_=v(38342),P=v(11249),A=v(46962),x=v(80744);function C(w,M,S){M.length?M=d(M,function(N){return x(N)?function(G){return c(G,N.length===1?N[0]:N)}:N}):M=[A];var I=-1;M=d(M,_(F));var B=L(w,function(N,G,W){var $=d(M,function(H){return H(N)});return{criteria:$,index:++I,value:N}});return O(B,function(N,G){return P(N,G,S)})}xt.exports=C},88832:function(xt,T,v){var d=v(10867),c=v(37879);function F(L,O){return d(L,O,function(_,P){return c(L,P)})}xt.exports=F},10867:function(xt,T,v){var d=v(89147),c=v(36897),F=v(1186);function L(O,_,P){for(var A=-1,x=_.length,C={};++A<x;){var w=_[A],M=d(O,w);P(M,w)&&c(C,F(w,O),M)}return C}xt.exports=L},36121:function(xt){var T=Math.ceil,v=Math.max;function d(c,F,L,O){for(var _=-1,P=v(T((F-c)/(L||1)),0),A=Array(P);P--;)A[O?P:++_]=c,c+=L;return A}xt.exports=d},30739:function(xt){function T(v,d,c,F,L){return L(v,function(O,_,P){c=F?(F=!1,O):d(c,O,_,P)}),c}xt.exports=T},92918:function(xt,T,v){var d=v(46962),c=v(19652),F=v(71152);function L(O,_){return F(c(O,_,d),O+"")}xt.exports=L},36897:function(xt,T,v){var d=v(60348),c=v(1186),F=v(70213),L=v(20816),O=v(9171);function _(P,A,x,C){if(!L(P))return P;A=c(A,P);for(var w=-1,M=A.length,S=M-1,I=P;I!=null&&++w<M;){var B=O(A[w]),N=x;if(B==="__proto__"||B==="constructor"||B==="prototype")return P;if(w!=S){var G=I[B];N=C?C(G,B,I):void 0,N===void 0&&(N=L(G)?G:F(A[w+1])?[]:{})}d(I,B,N),I=I[B]}return P}xt.exports=_},63989:function(xt,T,v){var d=v(13503),c=v(35234),F=v(46962),L=c?function(O,_){return c(O,"toString",{configurable:!0,enumerable:!1,value:d(_),writable:!0})}:F;xt.exports=L},33065:function(xt){function T(v,d){var c=v.length;for(v.sort(d);c--;)v[c]=v[c].value;return v}xt.exports=T},29098:function(xt,T,v){var d=v(98924),c=v(84271),F=v(94874),L=v(1931),O=v(47506),_=v(79679),P=200;function A(x,C,w){var M=-1,S=c,I=x.length,B=!0,N=[],G=N;if(w)B=!1,S=F;else if(I>=P){var W=C?null:O(x);if(W)return _(W);B=!1,S=L,G=new d}else G=C?[]:N;t:for(;++M<I;){var $=x[M],H=C?C($):$;if($=w||$!==0?$:0,B&&H===H){for(var j=G.length;j--;)if(G[j]===H)continue t;C&&G.push(H),N.push($)}else S(G,H,w)||(G!==N&&G.push(H),N.push($))}return N}xt.exports=A},20720:function(xt,T,v){var d=v(75010);function c(F,L){return d(L,function(O){return F[O]})}xt.exports=c},94484:function(xt){function T(v,d,c){for(var F=-1,L=v.length,O=d.length,_={};++F<L;){var P=F<O?d[F]:void 0;c(_,v[F],P)}return _}xt.exports=T},83018:function(xt,T,v){var d=v(45029);function c(F,L){if(F!==L){var O=F!==void 0,_=F===null,P=F===F,A=d(F),x=L!==void 0,C=L===null,w=L===L,M=d(L);if(!C&&!M&&!A&&F>L||A&&x&&w&&!C&&!M||_&&x&&w||!O&&w||!P)return 1;if(!_&&!A&&!M&&F<L||M&&O&&P&&!_&&!A||C&&O&&P||!x&&P||!w)return-1}return 0}xt.exports=c},11249:function(xt,T,v){var d=v(83018);function c(F,L,O){for(var _=-1,P=F.criteria,A=L.criteria,x=P.length,C=O.length;++_<x;){var w=d(P[_],A[_]);if(w){if(_>=C)return w;var M=O[_];return w*(M=="desc"?-1:1)}}return F.index-L.index}xt.exports=c},63323:function(xt,T,v){var d=v(92918),c=v(8138);function F(L){return d(function(O,_){var P=-1,A=_.length,x=A>1?_[A-1]:void 0,C=A>2?_[2]:void 0;for(x=L.length>3&&typeof x=="function"?(A--,x):void 0,C&&c(_[0],_[1],C)&&(x=A<3?void 0:x,A=1),O=Object(O);++P<A;){var w=_[P];w&&L(O,w,P,x)}return O})}xt.exports=F},19554:function(xt,T,v){var d=v(95979),c=v(24665),F=v(55451);function L(O){return function(_,P,A){var x=Object(_);if(!c(_)){var C=d(P,3);_=F(_),P=function(M){return C(x[M],M,x)}}var w=O(_,P,A);return w>-1?x[C?_[w]:w]:void 0}}xt.exports=L},76106:function(xt,T,v){var d=v(36121),c=v(8138),F=v(97341);function L(O){return function(_,P,A){return A&&typeof A!="number"&&c(_,P,A)&&(P=A=void 0),_=F(_),P===void 0?(P=_,_=0):P=F(P),A=A===void 0?_<P?1:-1:F(A),d(_,P,A,O)}}xt.exports=L},47506:function(xt,T,v){var d=v(23599),c=v(9958),F=v(79679),L=1/0,O=d&&1/F(new d([,-0]))[1]==L?function(_){return new d(_)}:c;xt.exports=O},522:function(xt,T,v){var d=v(40151),c=v(19652),F=v(71152);function L(O){return F(c(O,void 0,d),O+"")}xt.exports=L},55015:function(xt){var T="\\ud800-\\udfff",v="\\u0300-\\u036f",d="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",F=v+d+c,L="\\ufe0e\\ufe0f",O="\\u200d",_=RegExp("["+O+T+F+L+"]");function P(A){return _.test(A)}xt.exports=P},88133:function(xt,T,v){var d=v(91869),c=v(13053),F=v(80744),L=d?d.isConcatSpreadable:void 0;function O(_){return F(_)||c(_)||!!(L&&_&&_[L])}xt.exports=O},8138:function(xt,T,v){var d=v(43607),c=v(24665),F=v(70213),L=v(20816);function O(_,P,A){if(!L(A))return!1;var x=typeof P;return(x=="number"?c(A)&&F(P,A.length):x=="string"&&P in A)?d(A[P],_):!1}xt.exports=O},19652:function(xt,T,v){var d=v(79628),c=Math.max;function F(L,O,_){return O=c(O===void 0?L.length-1:O,0),function(){for(var P=arguments,A=-1,x=c(P.length-O,0),C=Array(x);++A<x;)C[A]=P[O+A];A=-1;for(var w=Array(O+1);++A<O;)w[A]=P[A];return w[O]=_(C),d(L,this,w)}}xt.exports=F},47052:function(xt){function T(v,d){if(!(d==="constructor"&&typeof v[d]=="function")&&d!="__proto__")return v[d]}xt.exports=T},71152:function(xt,T,v){var d=v(63989),c=v(78437),F=c(d);xt.exports=F},78437:function(xt){var T=800,v=16,d=Date.now;function c(F){var L=0,O=0;return function(){var _=d(),P=v-(_-O);if(O=_,P>0){if(++L>=T)return arguments[0]}else L=0;return F.apply(void 0,arguments)}}xt.exports=c},49237:function(xt){function T(v,d,c){for(var F=c-1,L=v.length;++F<L;)if(v[F]===d)return F;return-1}xt.exports=T},29405:function(xt,T,v){var d=v(26539),c=v(55015),F=v(60844);function L(O){return c(O)?F(O):d(O)}xt.exports=L},60844:function(xt){var T="\\ud800-\\udfff",v="\\u0300-\\u036f",d="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",F=v+d+c,L="\\ufe0e\\ufe0f",O="["+T+"]",_="["+F+"]",P="\\ud83c[\\udffb-\\udfff]",A="(?:"+_+"|"+P+")",x="[^"+T+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",w="[\\ud800-\\udbff][\\udc00-\\udfff]",M="\\u200d",S=A+"?",I="["+L+"]?",B="(?:"+M+"(?:"+[x,C,w].join("|")+")"+I+S+")*",N=I+S+B,G="(?:"+[x+_+"?",_,C,w,O].join("|")+")",W=RegExp(P+"(?="+P+")|"+G+N,"g");function $(H){for(var j=W.lastIndex=0;W.test(H);)++j;return j}xt.exports=$},76833:function(xt,T,v){var d=v(99045),c=4;function F(L){return d(L,c)}xt.exports=F},13503:function(xt){function T(v){return function(){return v}}xt.exports=T},28548:function(xt,T,v){var d=v(92918),c=v(43607),F=v(8138),L=v(56730),O=Object.prototype,_=O.hasOwnProperty,P=d(function(A,x){A=Object(A);var C=-1,w=x.length,M=w>2?x[2]:void 0;for(M&&F(x[0],x[1],M)&&(w=1);++C<w;)for(var S=x[C],I=L(S),B=-1,N=I.length;++B<N;){var G=I[B],W=A[G];(W===void 0||c(W,O[G])&&!_.call(A,G))&&(A[G]=S[G])}return A});xt.exports=P},76934:function(xt,T,v){xt.exports=v(99204)},64725:function(xt,T,v){var d=v(86952),c=v(32872),F=v(95979),L=v(80744);function O(_,P){var A=L(_)?d:c;return A(_,F(P,3))}xt.exports=O},79785:function(xt,T,v){var d=v(19554),c=v(9991),F=d(c);xt.exports=F},9991:function(xt,T,v){var d=v(51533),c=v(95979),F=v(12824),L=Math.max;function O(_,P,A){var x=_==null?0:_.length;if(!x)return-1;var C=A==null?0:F(A);return C<0&&(C=L(x+C,0)),d(_,c(P,3),C)}xt.exports=O},40151:function(xt,T,v){var d=v(9256);function c(F){var L=F==null?0:F.length;return L?d(F,1):[]}xt.exports=c},99204:function(xt,T,v){var d=v(74809),c=v(44107),F=v(11756),L=v(80744);function O(_,P){var A=L(_)?d:c;return A(_,F(P))}xt.exports=O},23190:function(xt,T,v){var d=v(14018),c=v(11756),F=v(56730);function L(O,_){return O==null?O:d(O,c(_),F)}xt.exports=L},99946:function(xt,T,v){var d=v(3251),c=v(63100);function F(L,O){return L!=null&&c(L,O,d)}xt.exports=F},41590:function(xt,T,v){var d=v(24665),c=v(93913);function F(L){return c(L)&&d(L)}xt.exports=F},61627:function(xt,T,v){var d=v(6019),c=v(66139),F=v(13053),L=v(80744),O=v(24665),_=v(57835),P=v(7975),A=v(18397),x="[object Map]",C="[object Set]",w=Object.prototype,M=w.hasOwnProperty;function S(I){if(I==null)return!0;if(O(I)&&(L(I)||typeof I=="string"||typeof I.splice=="function"||_(I)||A(I)||F(I)))return!I.length;var B=c(I);if(B==x||B==C)return!I.size;if(P(I))return!d(I).length;for(var N in I)if(M.call(I,N))return!1;return!0}xt.exports=S},16513:function(xt){function T(v){return v===void 0}xt.exports=T},10611:function(xt){function T(v){var d=v==null?0:v.length;return d?v[d-1]:void 0}xt.exports=T},70642:function(xt,T,v){var d=v(42813),c=v(1585),F=v(95979);function L(O,_){var P={};return _=F(_,3),c(O,function(A,x,C){d(P,x,_(A,x,C))}),P}xt.exports=L},95987:function(xt,T,v){var d=v(2659),c=v(40302),F=v(46962);function L(O){return O&&O.length?d(O,F,c):void 0}xt.exports=L},28440:function(xt,T,v){var d=v(50097),c=v(63323),F=c(function(L,O,_){d(L,O,_)});xt.exports=F},73376:function(xt,T,v){var d=v(2659),c=v(93757),F=v(46962);function L(O){return O&&O.length?d(O,F,c):void 0}xt.exports=L},83296:function(xt,T,v){var d=v(2659),c=v(95979),F=v(93757);function L(O,_){return O&&O.length?d(O,c(_,2),F):void 0}xt.exports=L},9958:function(xt){function T(){}xt.exports=T},89409:function(xt,T,v){var d=v(88832),c=v(522),F=c(function(L,O){return L==null?{}:d(L,O)});xt.exports=F},60859:function(xt,T,v){var d=v(76106),c=d();xt.exports=c},16473:function(xt,T,v){var d=v(99861),c=v(44107),F=v(95979),L=v(30739),O=v(80744);function _(P,A,x){var C=O(P)?d:L,w=arguments.length<3;return C(P,F(A,4),x,w,c)}xt.exports=_},40617:function(xt,T,v){var d=v(6019),c=v(66139),F=v(24665),L=v(7941),O=v(29405),_="[object Map]",P="[object Set]";function A(x){if(x==null)return 0;if(F(x))return L(x)?O(x):x.length;var C=c(x);return C==_||C==P?x.size:d(x).length}xt.exports=A},351:function(xt,T,v){var d=v(9256),c=v(58506),F=v(92918),L=v(8138),O=F(function(_,P){if(_==null)return[];var A=P.length;return A>1&&L(_,P[0],P[1])?P=[]:A>2&&L(P[0],P[1],P[2])&&(P=[P[0]]),c(_,d(P,1),[])});xt.exports=O},97341:function(xt,T,v){var d=v(20168),c=1/0,F=17976931348623157e292;function L(O){if(!O)return O===0?O:0;if(O=d(O),O===c||O===-c){var _=O<0?-1:1;return _*F}return O===O?O:0}xt.exports=L},12824:function(xt,T,v){var d=v(97341);function c(F){var L=d(F),O=L%1;return L===L?O?L-O:L:0}xt.exports=c},20480:function(xt,T,v){var d=v(95378),c=v(56730);function F(L){return d(L,c(L))}xt.exports=F},91116:function(xt,T,v){var d=v(74809),c=v(35024),F=v(1585),L=v(95979),O=v(49217),_=v(80744),P=v(57835),A=v(9363),x=v(20816),C=v(18397);function w(M,S,I){var B=_(M),N=B||P(M)||C(M);if(S=L(S,4),I==null){var G=M&&M.constructor;N?I=B?new G:[]:x(M)?I=A(G)?c(O(M)):{}:I={}}return(N?d:F)(M,function(W,$,H){return S(I,W,$,H)}),I}xt.exports=w},44065:function(xt,T,v){var d=v(9256),c=v(92918),F=v(29098),L=v(41590),O=c(function(_){return F(d(_,1,L,!0))});xt.exports=O},95708:function(xt,T,v){var d=v(44140),c=0;function F(L){var O=++c;return d(L)+O}xt.exports=F},81229:function(xt,T,v){var d=v(20720),c=v(55451);function F(L){return L==null?[]:d(L,c(L))}xt.exports=F},65441:function(xt,T,v){var d=v(60348),c=v(94484);function F(L,O){return c(L||[],O||[],d)}xt.exports=F},75029:function(xt,T,v){"use strict";var d=v(22948),c=Array.prototype.concat,F=Array.prototype.slice,L=xt.exports=function(_){for(var P=[],A=0,x=_.length;A<x;A++){var C=_[A];d(C)?P=c.call(P,F.call(C)):P.push(C)}return P};L.wrap=function(O){return function(){return O(L(arguments))}}},21362:function(xt,T,v){"use strict";v.r(T),v.d(T,{__extends:function(){return c},__assign:function(){return F},__rest:function(){return L},__decorate:function(){return O},__param:function(){return _},__metadata:function(){return P},__awaiter:function(){return A},__generator:function(){return x},__createBinding:function(){return C},__exportStar:function(){return w},__values:function(){return M},__read:function(){return S},__spread:function(){return I},__spreadArrays:function(){return B},__spreadArray:function(){return N},__await:function(){return G},__asyncGenerator:function(){return W},__asyncDelegator:function(){return $},__asyncValues:function(){return H},__makeTemplateObject:function(){return j},__importStar:function(){return rt},__importDefault:function(){return mt},__classPrivateFieldGet:function(){return Ft},__classPrivateFieldSet:function(){return Gt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d=function(gt,st){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xt,Q){Xt.__proto__=Q}||function(Xt,Q){for(var qt in Q)Object.prototype.hasOwnProperty.call(Q,qt)&&(Xt[qt]=Q[qt])},d(gt,st)};function c(gt,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");d(gt,st);function Xt(){this.constructor=gt}gt.prototype=st===null?Object.create(st):(Xt.prototype=st.prototype,new Xt)}var F=function(){return F=Object.assign||function(st){for(var Xt,Q=1,qt=arguments.length;Q<qt;Q++){Xt=arguments[Q];for(var y in Xt)Object.prototype.hasOwnProperty.call(Xt,y)&&(st[y]=Xt[y])}return st},F.apply(this,arguments)};function L(gt,st){var Xt={};for(var Q in gt)Object.prototype.hasOwnProperty.call(gt,Q)&&st.indexOf(Q)<0&&(Xt[Q]=gt[Q]);if(gt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var qt=0,Q=Object.getOwnPropertySymbols(gt);qt<Q.length;qt++)st.indexOf(Q[qt])<0&&Object.prototype.propertyIsEnumerable.call(gt,Q[qt])&&(Xt[Q[qt]]=gt[Q[qt]]);return Xt}function O(gt,st,Xt,Q){var qt=arguments.length,y=qt<3?st:Q===null?Q=Object.getOwnPropertyDescriptor(st,Xt):Q,Yt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(gt,st,Xt,Q);else for(var K=gt.length-1;K>=0;K--)(Yt=gt[K])&&(y=(qt<3?Yt(y):qt>3?Yt(st,Xt,y):Yt(st,Xt))||y);return qt>3&&y&&Object.defineProperty(st,Xt,y),y}function _(gt,st){return function(Xt,Q){st(Xt,Q,gt)}}function P(gt,st){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(gt,st)}function A(gt,st,Xt,Q){function qt(y){return y instanceof Xt?y:new Xt(function(Yt){Yt(y)})}return new(Xt||(Xt=Promise))(function(y,Yt){function K(At){try{J(Q.next(At))}catch(Vt){Yt(Vt)}}function ht(At){try{J(Q.throw(At))}catch(Vt){Yt(Vt)}}function J(At){At.done?y(At.value):qt(At.value).then(K,ht)}J((Q=Q.apply(gt,st||[])).next())})}function x(gt,st){var Xt={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},Q,qt,y,Yt;return Yt={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(Yt[Symbol.iterator]=function(){return this}),Yt;function K(J){return function(At){return ht([J,At])}}function ht(J){if(Q)throw new TypeError("Generator is already executing.");for(;Xt;)try{if(Q=1,qt&&(y=J[0]&2?qt.return:J[0]?qt.throw||((y=qt.return)&&y.call(qt),0):qt.next)&&!(y=y.call(qt,J[1])).done)return y;switch(qt=0,y&&(J=[J[0]&2,y.value]),J[0]){case 0:case 1:y=J;break;case 4:return Xt.label++,{value:J[1],done:!1};case 5:Xt.label++,qt=J[1],J=[0];continue;case 7:J=Xt.ops.pop(),Xt.trys.pop();continue;default:if(y=Xt.trys,!(y=y.length>0&&y[y.length-1])&&(J[0]===6||J[0]===2)){Xt=0;continue}if(J[0]===3&&(!y||J[1]>y[0]&&J[1]<y[3])){Xt.label=J[1];break}if(J[0]===6&&Xt.label<y[1]){Xt.label=y[1],y=J;break}if(y&&Xt.label<y[2]){Xt.label=y[2],Xt.ops.push(J);break}y[2]&&Xt.ops.pop(),Xt.trys.pop();continue}J=st.call(gt,Xt)}catch(At){J=[6,At],qt=0}finally{Q=y=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}}var C=Object.create?function(gt,st,Xt,Q){Q===void 0&&(Q=Xt),Object.defineProperty(gt,Q,{enumerable:!0,get:function(){return st[Xt]}})}:function(gt,st,Xt,Q){Q===void 0&&(Q=Xt),gt[Q]=st[Xt]};function w(gt,st){for(var Xt in gt)Xt!=="default"&&!Object.prototype.hasOwnProperty.call(st,Xt)&&C(st,gt,Xt)}function M(gt){var st=typeof Symbol=="function"&&Symbol.iterator,Xt=st&&gt[st],Q=0;if(Xt)return Xt.call(gt);if(gt&&typeof gt.length=="number")return{next:function(){return gt&&Q>=gt.length&&(gt=void 0),{value:gt&&gt[Q++],done:!gt}}};throw new TypeError(st?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(gt,st){var Xt=typeof Symbol=="function"&&gt[Symbol.iterator];if(!Xt)return gt;var Q=Xt.call(gt),qt,y=[],Yt;try{for(;(st===void 0||st-- >0)&&!(qt=Q.next()).done;)y.push(qt.value)}catch(K){Yt={error:K}}finally{try{qt&&!qt.done&&(Xt=Q.return)&&Xt.call(Q)}finally{if(Yt)throw Yt.error}}return y}function I(){for(var gt=[],st=0;st<arguments.length;st++)gt=gt.concat(S(arguments[st]));return gt}function B(){for(var gt=0,st=0,Xt=arguments.length;st<Xt;st++)gt+=arguments[st].length;for(var Q=Array(gt),qt=0,st=0;st<Xt;st++)for(var y=arguments[st],Yt=0,K=y.length;Yt<K;Yt++,qt++)Q[qt]=y[Yt];return Q}function N(gt,st,Xt){if(Xt||arguments.length===2)for(var Q=0,qt=st.length,y;Q<qt;Q++)(y||!(Q in st))&&(y||(y=Array.prototype.slice.call(st,0,Q)),y[Q]=st[Q]);return gt.concat(y||Array.prototype.slice.call(st))}function G(gt){return this instanceof G?(this.v=gt,this):new G(gt)}function W(gt,st,Xt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q=Xt.apply(gt,st||[]),qt,y=[];return qt={},Yt("next"),Yt("throw"),Yt("return"),qt[Symbol.asyncIterator]=function(){return this},qt;function Yt(pt){Q[pt]&&(qt[pt]=function(Lt){return new Promise(function(Tt,kt){y.push([pt,Lt,Tt,kt])>1||K(pt,Lt)})})}function K(pt,Lt){try{ht(Q[pt](Lt))}catch(Tt){Vt(y[0][3],Tt)}}function ht(pt){pt.value instanceof G?Promise.resolve(pt.value.v).then(J,At):Vt(y[0][2],pt)}function J(pt){K("next",pt)}function At(pt){K("throw",pt)}function Vt(pt,Lt){pt(Lt),y.shift(),y.length&&K(y[0][0],y[0][1])}}function $(gt){var st,Xt;return st={},Q("next"),Q("throw",function(qt){throw qt}),Q("return"),st[Symbol.iterator]=function(){return this},st;function Q(qt,y){st[qt]=gt[qt]?function(Yt){return(Xt=!Xt)?{value:G(gt[qt](Yt)),done:qt==="return"}:y?y(Yt):Yt}:y}}function H(gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st=gt[Symbol.asyncIterator],Xt;return st?st.call(gt):(gt=typeof M=="function"?M(gt):gt[Symbol.iterator](),Xt={},Q("next"),Q("throw"),Q("return"),Xt[Symbol.asyncIterator]=function(){return this},Xt);function Q(y){Xt[y]=gt[y]&&function(Yt){return new Promise(function(K,ht){Yt=gt[y](Yt),qt(K,ht,Yt.done,Yt.value)})}}function qt(y,Yt,K,ht){Promise.resolve(ht).then(function(J){y({value:J,done:K})},Yt)}}function j(gt,st){return Object.defineProperty?Object.defineProperty(gt,"raw",{value:st}):gt.raw=st,gt}var nt=Object.create?function(gt,st){Object.defineProperty(gt,"default",{enumerable:!0,value:st})}:function(gt,st){gt.default=st};function rt(gt){if(gt&&gt.__esModule)return gt;var st={};if(gt!=null)for(var Xt in gt)Xt!=="default"&&Object.prototype.hasOwnProperty.call(gt,Xt)&&C(st,gt,Xt);return nt(st,gt),st}function mt(gt){return gt&&gt.__esModule?gt:{default:gt}}function Ft(gt,st,Xt,Q){if(Xt==="a"&&!Q)throw new TypeError("Private accessor was defined without a getter");if(typeof st=="function"?gt!==st||!Q:!st.has(gt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Xt==="m"?Q:Xt==="a"?Q.call(gt):Q?Q.value:st.get(gt)}function Gt(gt,st,Xt,Q,qt){if(Q==="m")throw new TypeError("Private method is not writable");if(Q==="a"&&!qt)throw new TypeError("Private accessor was defined without a setter");if(typeof st=="function"?gt!==st||!qt:!st.has(gt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Q==="a"?qt.call(gt,Xt):qt?qt.value=Xt:st.set(gt,Xt),Xt}},59407:function(xt){xt.exports=function(v){return v&&typeof v=="object"&&typeof v.copy=="function"&&typeof v.fill=="function"&&typeof v.readUInt8=="function"}},2005:function(xt,T,v){var d=v(97671),c=Object.getOwnPropertyDescriptors||function(pt){for(var Lt=Object.keys(pt),Tt={},kt=0;kt<Lt.length;kt++)Tt[Lt[kt]]=Object.getOwnPropertyDescriptor(pt,Lt[kt]);return Tt},F=/%[sdj%]/g;T.format=function(Vt){if(!j(Vt)){for(var pt=[],Lt=0;Lt<arguments.length;Lt++)pt.push(_(arguments[Lt]));return pt.join(" ")}for(var Lt=1,Tt=arguments,kt=Tt.length,jt=String(Vt).replace(F,function(zt){if(zt==="%%")return"%";if(Lt>=kt)return zt;switch(zt){case"%s":return String(Tt[Lt++]);case"%d":return Number(Tt[Lt++]);case"%j":try{return JSON.stringify(Tt[Lt++])}catch(bt){return"[Circular]"}default:return zt}}),Wt=Tt[Lt];Lt<kt;Wt=Tt[++Lt])W(Wt)||!Ft(Wt)?jt+=" "+Wt:jt+=" "+_(Wt);return jt},T.deprecate=function(Vt,pt){if(typeof d!="undefined"&&d.noDeprecation===!0)return Vt;if(typeof d=="undefined")return function(){return T.deprecate(Vt,pt).apply(this,arguments)};var Lt=!1;function Tt(){if(!Lt){if(d.throwDeprecation)throw new Error(pt);d.traceDeprecation?console.trace(pt):console.error(pt),Lt=!0}return Vt.apply(this,arguments)}return Tt};var L={},O;T.debuglog=function(Vt){if(rt(O)&&(O={NODE_ENV:"production"}.NODE_DEBUG||""),Vt=Vt.toUpperCase(),!L[Vt])if(new RegExp("\\b"+Vt+"\\b","i").test(O)){var pt=d.pid;L[Vt]=function(){var Lt=T.format.apply(T,arguments);console.error("%s %d: %s",Vt,pt,Lt)}}else L[Vt]=function(){};return L[Vt]};function _(Vt,pt){var Lt={seen:[],stylize:A};return arguments.length>=3&&(Lt.depth=arguments[2]),arguments.length>=4&&(Lt.colors=arguments[3]),G(pt)?Lt.showHidden=pt:pt&&T._extend(Lt,pt),rt(Lt.showHidden)&&(Lt.showHidden=!1),rt(Lt.depth)&&(Lt.depth=2),rt(Lt.colors)&&(Lt.colors=!1),rt(Lt.customInspect)&&(Lt.customInspect=!0),Lt.colors&&(Lt.stylize=P),C(Lt,Vt,Lt.depth)}T.inspect=_,_.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},_.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function P(Vt,pt){var Lt=_.styles[pt];return Lt?"["+_.colors[Lt][0]+"m"+Vt+"["+_.colors[Lt][1]+"m":Vt}function A(Vt,pt){return Vt}function x(Vt){var pt={};return Vt.forEach(function(Lt,Tt){pt[Lt]=!0}),pt}function C(Vt,pt,Lt){if(Vt.customInspect&&pt&&st(pt.inspect)&&pt.inspect!==T.inspect&&!(pt.constructor&&pt.constructor.prototype===pt)){var Tt=pt.inspect(Lt,Vt);return j(Tt)||(Tt=C(Vt,Tt,Lt)),Tt}var kt=w(Vt,pt);if(kt)return kt;var jt=Object.keys(pt),Wt=x(jt);if(Vt.showHidden&&(jt=Object.getOwnPropertyNames(pt)),gt(pt)&&(jt.indexOf("message")>=0||jt.indexOf("description")>=0))return M(pt);if(jt.length===0){if(st(pt)){var zt=pt.name?": "+pt.name:"";return Vt.stylize("[Function"+zt+"]","special")}if(mt(pt))return Vt.stylize(RegExp.prototype.toString.call(pt),"regexp");if(Gt(pt))return Vt.stylize(Date.prototype.toString.call(pt),"date");if(gt(pt))return M(pt)}var bt="",at=!1,ft=["{","}"];if(N(pt)&&(at=!0,ft=["[","]"]),st(pt)){var Pt=pt.name?": "+pt.name:"";bt=" [Function"+Pt+"]"}if(mt(pt)&&(bt=" "+RegExp.prototype.toString.call(pt)),Gt(pt)&&(bt=" "+Date.prototype.toUTCString.call(pt)),gt(pt)&&(bt=" "+M(pt)),jt.length===0&&(!at||pt.length==0))return ft[0]+bt+ft[1];if(Lt<0)return mt(pt)?Vt.stylize(RegExp.prototype.toString.call(pt),"regexp"):Vt.stylize("[Object]","special");Vt.seen.push(pt);var q;return at?q=S(Vt,pt,Lt,Wt,jt):q=jt.map(function(ut){return I(Vt,pt,Lt,Wt,ut,at)}),Vt.seen.pop(),B(q,bt,ft)}function w(Vt,pt){if(rt(pt))return Vt.stylize("undefined","undefined");if(j(pt)){var Lt="'"+JSON.stringify(pt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Vt.stylize(Lt,"string")}if(H(pt))return Vt.stylize(""+pt,"number");if(G(pt))return Vt.stylize(""+pt,"boolean");if(W(pt))return Vt.stylize("null","null")}function M(Vt){return"["+Error.prototype.toString.call(Vt)+"]"}function S(Vt,pt,Lt,Tt,kt){for(var jt=[],Wt=0,zt=pt.length;Wt<zt;++Wt)K(pt,String(Wt))?jt.push(I(Vt,pt,Lt,Tt,String(Wt),!0)):jt.push("");return kt.forEach(function(bt){bt.match(/^\d+$/)||jt.push(I(Vt,pt,Lt,Tt,bt,!0))}),jt}function I(Vt,pt,Lt,Tt,kt,jt){var Wt,zt,bt;if(bt=Object.getOwnPropertyDescriptor(pt,kt)||{value:pt[kt]},bt.get?bt.set?zt=Vt.stylize("[Getter/Setter]","special"):zt=Vt.stylize("[Getter]","special"):bt.set&&(zt=Vt.stylize("[Setter]","special")),K(Tt,kt)||(Wt="["+kt+"]"),zt||(Vt.seen.indexOf(bt.value)<0?(W(Lt)?zt=C(Vt,bt.value,null):zt=C(Vt,bt.value,Lt-1),zt.indexOf(`
`)>-1&&(jt?zt=zt.split(`
`).map(function(at){return"  "+at}).join(`
`).substr(2):zt=`
`+zt.split(`
`).map(function(at){return"   "+at}).join(`
`))):zt=Vt.stylize("[Circular]","special")),rt(Wt)){if(jt&&kt.match(/^\d+$/))return zt;Wt=JSON.stringify(""+kt),Wt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Wt=Wt.substr(1,Wt.length-2),Wt=Vt.stylize(Wt,"name")):(Wt=Wt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Wt=Vt.stylize(Wt,"string"))}return Wt+": "+zt}function B(Vt,pt,Lt){var Tt=0,kt=Vt.reduce(function(jt,Wt){return Tt++,Wt.indexOf(`
`)>=0&&Tt++,jt+Wt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return kt>60?Lt[0]+(pt===""?"":pt+`
 `)+" "+Vt.join(`,
  `)+" "+Lt[1]:Lt[0]+pt+" "+Vt.join(", ")+" "+Lt[1]}function N(Vt){return Array.isArray(Vt)}T.isArray=N;function G(Vt){return typeof Vt=="boolean"}T.isBoolean=G;function W(Vt){return Vt===null}T.isNull=W;function $(Vt){return Vt==null}T.isNullOrUndefined=$;function H(Vt){return typeof Vt=="number"}T.isNumber=H;function j(Vt){return typeof Vt=="string"}T.isString=j;function nt(Vt){return typeof Vt=="symbol"}T.isSymbol=nt;function rt(Vt){return Vt===void 0}T.isUndefined=rt;function mt(Vt){return Ft(Vt)&&Q(Vt)==="[object RegExp]"}T.isRegExp=mt;function Ft(Vt){return typeof Vt=="object"&&Vt!==null}T.isObject=Ft;function Gt(Vt){return Ft(Vt)&&Q(Vt)==="[object Date]"}T.isDate=Gt;function gt(Vt){return Ft(Vt)&&(Q(Vt)==="[object Error]"||Vt instanceof Error)}T.isError=gt;function st(Vt){return typeof Vt=="function"}T.isFunction=st;function Xt(Vt){return Vt===null||typeof Vt=="boolean"||typeof Vt=="number"||typeof Vt=="string"||typeof Vt=="symbol"||typeof Vt=="undefined"}T.isPrimitive=Xt,T.isBuffer=v(59407);function Q(Vt){return Object.prototype.toString.call(Vt)}function qt(Vt){return Vt<10?"0"+Vt.toString(10):Vt.toString(10)}var y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Yt(){var Vt=new Date,pt=[qt(Vt.getHours()),qt(Vt.getMinutes()),qt(Vt.getSeconds())].join(":");return[Vt.getDate(),y[Vt.getMonth()],pt].join(" ")}T.log=function(){console.log("%s - %s",Yt(),T.format.apply(T,arguments))},T.inherits=v(81104),T._extend=function(Vt,pt){if(!pt||!Ft(pt))return Vt;for(var Lt=Object.keys(pt),Tt=Lt.length;Tt--;)Vt[Lt[Tt]]=pt[Lt[Tt]];return Vt};function K(Vt,pt){return Object.prototype.hasOwnProperty.call(Vt,pt)}var ht=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;T.promisify=function(pt){if(typeof pt!="function")throw new TypeError('The "original" argument must be of type Function');if(ht&&pt[ht]){var Lt=pt[ht];if(typeof Lt!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Lt,ht,{value:Lt,enumerable:!1,writable:!1,configurable:!0}),Lt}function Lt(){for(var Tt,kt,jt=new Promise(function(bt,at){Tt=bt,kt=at}),Wt=[],zt=0;zt<arguments.length;zt++)Wt.push(arguments[zt]);Wt.push(function(bt,at){bt?kt(bt):Tt(at)});try{pt.apply(this,Wt)}catch(bt){kt(bt)}return jt}return Object.setPrototypeOf(Lt,Object.getPrototypeOf(pt)),ht&&Object.defineProperty(Lt,ht,{value:Lt,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Lt,c(pt))},T.promisify.custom=ht;function J(Vt,pt){if(!Vt){var Lt=new Error("Promise was rejected with a falsy value");Lt.reason=Vt,Vt=Lt}return pt(Vt)}function At(Vt){if(typeof Vt!="function")throw new TypeError('The "original" argument must be of type Function');function pt(){for(var Lt=[],Tt=0;Tt<arguments.length;Tt++)Lt.push(arguments[Tt]);var kt=Lt.pop();if(typeof kt!="function")throw new TypeError("The last argument must be of type Function");var jt=this,Wt=function(){return kt.apply(jt,arguments)};Vt.apply(this,Lt).then(function(zt){d.nextTick(Wt,null,zt)},function(zt){d.nextTick(J,zt,Wt)})}return Object.setPrototypeOf(pt,Object.getPrototypeOf(Vt)),Object.defineProperties(pt,c(Vt)),pt}T.callbackify=At}}]);
